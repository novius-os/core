(function(h){var g="wijmo-wijsuperpanel ui-widget ui-widget-content",i="ui-corner-all",m="ui-state-disabled",b="ui-state-hover",a="ui-state-active",f="ui-state-default",c="wijmo-wijsuperpanel-handle",l="wijmo-wijsuperpanel-hbarcontainer",o="wijmo-wijsuperpanel-vbarcontainer",d="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",e="<div class='wijmo-wijsuperpanel-hbarcontainer ui-widget-header'><div class='wijmo-wijsuperpanel-handle ui-state-default ui-corner-all'><span class='ui-icon ui-icon-grip-solid-vertical'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft ui-state-default ui-corner-bl'><span class='ui-icon ui-icon-triangle-1-w'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright ui-state-default ui-corner-br'><span class='ui-icon ui-icon-triangle-1-e'></span></div></div>",k="<div class='wijmo-wijsuperpanel-vbarcontainer ui-widget-header'><div class='wijmo-wijsuperpanel-handle ui-state-default ui-corner-all'><span class='ui-icon ui-icon-grip-solid-horizontal'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop ui-state-default ui-corner-tr'><span class='ui-icon ui-icon-triangle-1-n'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom ui-state-default ui-corner-br'><span class='ui-icon ui-icon-triangle-1-s'></span></div></div>",j="<div class='ui-state-default wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonleft'><span class='ui-icon ui-icon-carat-1-w'></span></div><div class='ui-state-default wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonright'><span class='ui-icon ui-icon-carat-1-e'></span></div>",n="<div class='ui-state-default wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttontop'><span class='ui-icon ui-icon-carat-1-n'></span></div><div class='ui-state-default wijmo-wijsuperpanel-button wijmo-wijsuperpanel-buttonbottom'><span class='ui-icon ui-icon-carat-1-s'></span></div>";h.widget("wijmo.wijsuperpanel",{options:{allowResize:false,autoRefresh:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScrollerActivating:null,hScroller:{scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,bubbleScrollingEvent:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,dragStop:null,painted:null,scrolling:null,scroll:null,scrolled:null,showRounder:true,vScrollerActivating:null,vScroller:{scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},customScrolling:false,listenContentScroll:false},_setOption:function(s,v){var p=this,x=p.options,u=p._fields(),w=u.hbarDrag,q=u.vbarDrag,t=u.resizer;if(s==="animationOptions"){v=h.extend(x.animationOptions,v)}else{if(s==="hScroller"){if(v.scrollLargeChange!==undefined&&v.scrollLargeChange!==null){p._autoHLarge=false}v=h.extend(x.hScroller,v)}else{if(s==="vScroller"){if(v.scrollLargeChange!==undefined&&v.scrollLargeChange!==null){p._autoVLarge=false}v=h.extend(x.vScroller,v)}else{if(s==="resizableOptions"){v=h.extend(p.resizableOptions,v)}}}}h.Widget.prototype._setOption.apply(p,arguments);if(h.isPlainObject(v)){p.options[s]=v}switch(s){case"allowResize":p._initResizer();break;case"disabled":if(v){if(w!==undefined){w.draggable("disable")}if(q!==undefined){q.draggable("disable")}if(t!==undefined){t.resizable("disable")}}else{if(w!==undefined){w.draggable("enable")}if(q!==undefined){q.draggable("enable")}if(t!==undefined){t.resizable("enable")}}break;case"mouseWheelSupport":case"keyboardSupport":p._bindElementEvents(p,u,p.element,x);break}return p},_create:function(){var p=this,q=p.options;q.vScroller.dir="v";q.hScroller.dir="h";if(window.wijmoApplyWijTouchUtilEvents){h=window.wijmoApplyWijTouchUtilEvents(h)}p.paintPanel();p._initResizer();if(p.options.disabled){p.disable()}p._detectAutoRefresh();if(q.listenContentScroll){p._listenContentScroll()}if(p.element.is(":hidden")&&p.element.wijAddVisibilityObserver){p.element.wijAddVisibilityObserver(function(){p.refresh();if(p.element.wijRemoveVisibilityObserver){p.element.wijRemoveVisibilityObserver()}},"wijsuperpanel")}},_detectAutoRefresh:function(){var p=this,q=h.wijmo.wijsuperpanel.panels;if(q===undefined){q=[];h.wijmo.wijsuperpanel.panels=q}q.push(p);if(p.options.autoRefresh){if(!h.wijmo.wijsuperpanel.setAutoRefreshInterval){h.wijmo.wijsuperpanel.setAutoRefreshInterval=p._setAutoRefreshInterval;h.wijmo.wijsuperpanel.setAutoRefreshInterval()}}},_setAutoRefreshInterval:function(){var p=h.wijmo.wijsuperpanel.autoRereshInterval,q=h.wijmo.wijsuperpanel.panels,r=window.setInterval(function(){window.clearInterval(r);var v=q.length,x=false,u,s,z,t,w,y;for(u=0;u<v;u++){s=q[u];z=s.element[0];t=s.options.autoRefresh;if(t){x=true}w=s.getContentElement();y=s._paintedMark;if(s.options.autoRefresh&&w.is(":visible")&&(y===undefined||y.width!==w[0].offsetWidth||y.height!==w[0].offsetHeight||y.mainWidth!==z.offsetWidth||y.mainHeight!==z.offsetHeight)){s.paintPanel()}}if(x){window.setTimeout(h.wijmo.wijsuperpanel.setAutoRefreshInterval,0)}},p===undefined?500:p)},destroy:function(){var p=this,t=p._fields(),s=p.element,r,q;h.wijmo.wijsuperpanel.panels=h.grep(h.wijmo.wijsuperpanel.panels,function(u){return u!==p});if(!t.initialized){return}if(p._radiusKey){p.element.css(p._radiusKey,"")}if(t.intervalID!==undefined){window.clearInterval(t.intervalID);t.intervalID=undefined}if(t.resizer!==undefined){t.resizer.resizable("destroy")}if(t.hbarContainer!==undefined){t.hbarDrag.remove();t.hbarContainer.unbind("."+p.widgetName)}if(t.vbarContainer!==undefined){t.vbarDrag.remove();t.vbarContainer.unbind("."+p.widgetName)}s.unbind("."+p.widgetName);t.contentWrapper.unbind("."+p.widgetName);r=t.stateContainer.find(">.wijmo-wijsuperpanel-button");r.unbind("."+p.widgetName);q=t.templateWrapper;q.contents().each(function(u,v){s.append(v)});t.stateContainer.remove();if(t.tabindex){s.removeAttr("tabindex")}s.removeClass(g+" "+i);h.Widget.prototype.destroy.apply(p,arguments)},_fields:function(){var p=this,r=p.element,q=p.widgetName+"-fields",s=p._fieldsStore;if(s===undefined){s={};r.data(q,s);p._fieldsStore=s}return s},_hasMode:function(p,r){var q=p.scrollMode.split(",");q=h.map(q,function(s){return h.trim(s).toLowerCase()});return h.inArray(r.toLowerCase(),q)>-1},_bindElementEvents:function(q,u,t,v){var p=q._hasMode(v.hScroller,"edge"),s=q._hasMode(v.vScroller,"edge"),r=q.widgetName;if(p||s){if(q._mousemoveBind===undefined){q._mousemoveBind=true;t.bind("mousemove."+r,q,q._contentMouseMove);t.bind("mouseleave."+r,null,function(){q._clearInterval()})}}else{t.unbind("mousemove",q._contentMouseMove);q._mousemoveBind=undefined}if(v.mouseWheelSupport){if(q._mouseWheelBind===undefined){q._mouseWheelBind=true;t.bind("mousewheel."+r,q,q._panelMouseWheel)}}else{q.element.unbind("mousewheel",q._panelMouseWheel);q._mouseWheelBind=undefined}if(v.keyboardSupport){if(q._keyboardBind===undefined){q._keyboardBind=true;t.bind("keydown."+r,q,q._panelKeyDown)}}else{t.unbind("keydown",q._panelKeyDown);q._keyboardBind=undefined}},_dragStop:function(s,p,q){var r={dragHandle:q};p._trigger("dragStop",s,r)},_contentMouseMove:function(D){var w=D.data,y=w.options,s,p,t,C,E,v,G,F,q,u,A,r,B,z,x;if(y.disabled){return}s=y.hScroller;p=y.vScroller;t=h(D.currentTarget);C=w._fields();E=w._hasMode(s,"edge");v=w._hasMode(p,"edge");w._clearInterval();G={X:D.pageX,Y:D.pageY};F=t.offset();q=F.left;u=F.top;q=G.X-q;u=G.Y-u;A=s.hoverEdgeSpan;r=p.hoverEdgeSpan;B=t.innerHeight();z=t.innerWidth();x="";if(E){if(q<A){x="left"}if(q>(z-A)){x="right"}}if(v){if(u<r){x="top"}if(u>(B-r)){x="bottom"}}w._setScrollingInterval(C,x,w,false)},_setScrollingInterval:function(s,q,p,r){var t=p.options;if(q.length>0){s.internalFuncID=window.setInterval(function(){p._doScrolling(q,p,r)},t.keyDownInterval)}},_scrollButtonMouseOver:function(r){var p=r.data,q;if(p.options.disabled){return}q=h(r.currentTarget);if(!q.hasClass(m)){q.bind("mouseout."+p.widgetName,p,p._buttonMouseOut).bind("mousedown."+p.widgetName,p,p._buttonMouseDown).bind("mouseup."+p.widgetName,p,p._buttonMouseUp).addClass(b);p._buttonScroll(q,p,"buttonshover")}},_buttonScroll:function(s,p,v){var r="",u=p.options,t=p._fields(),q=p._hasMode(u.hScroller,v),w=p._hasMode(u.vScroller,v);if(s.hasClass("wijmo-wijsuperpanel-buttonleft")&&q){r="left"}else{if(s.hasClass("wijmo-wijsuperpanel-buttonright")&&q){r="right"}else{if(s.hasClass("wijmo-wijsuperpanel-buttontop")&&w){r="top"}else{if(s.hasClass("wijmo-wijsuperpanel-buttonbottom")&&w){r="bottom"}}}}if(r.length>0){p._clearInterval();p._doScrolling(r,p,true);p._setScrollingInterval(t,r,p,true)}},_listenContentScroll:function(){var F=this,s=F.options,A=F._fields(),z=A.hbarContainer,u=A.hbarDrag,C=A.vbarContainer,B=A.vbarDrag,t=A.templateWrapper,y=A.contentWrapper,E=y.width(),x=y.height(),v=t&&t.offset(),r=v&&v.left,q=v&&v.top,p=A.contentWidth,D=A.contentHeight;y.bind("scroll",function(G){var I=t.position(),w=I.left,H=I.top;y.scrollTop(0).scrollLeft(0);t.css({left:w,top:H});if(w<=0&&w>E-p){s.hScroller.scrollValue=F.scrollPxToValue(-w,"h");F._scrollDrag("h",z,u,true)}if(H<=0&&H>x-D){s.vScroller.scrollValue=F.scrollPxToValue(-H,"v");F._scrollDrag("v",C,B,true)}})},_buttonMouseDown:function(r){var p=r.data,q;if(p.options.disabled){return}q=h(r.currentTarget);if(!q.hasClass(m)){q.addClass(a);p._buttonScroll(q,p,"buttons")}},_buttonMouseUp:function(r){var p=r.data,q=h(r.currentTarget);q.removeClass("ui-state-active");p._clearInterval()},_buttonMouseOut:function(r){var p=r.data,q=h(r.currentTarget);q.unbind("mouseout",p._buttonMouseOut).unbind("mousedown",p._buttonMouseDown).unbind("mouseup",p._buttonMouseUp).removeClass(b).removeClass(a);p._clearInterval()},_panelKeyDown:function(s){var r=s.data,t=r.options,q,p;if(!t.keyboardSupport||t.disabled){return}q=s.shiftKey;p=s.keyCode;if(p===h.ui.keyCode.LEFT){r._doScrolling("left",r,q)}else{if(p===h.ui.keyCode.RIGHT){r._doScrolling("right",r,q)}else{if(p===h.ui.keyCode.UP){r._doScrolling("top",r,q)}else{if(p===h.ui.keyCode.DOWN){r._doScrolling("bottom",r,q)}}}}s.stopPropagation();s.preventDefault()},_draggingInternal:function(x,E,z,C){var t=z.dir,y=t==="h",B=y?"left":"top",s=x.position[B]-E._getScrollContainerPadding(B),q=E._getTrackLen(t)-C[y?"outerWidth":"outerHeight"](true),w=s/q,u=(z.scrollMax-z.scrollLargeChange+1),A=w*u,D,p,r;if(A<z.scrollMin){A=z.scrollMin}if(A>u){A=u}D={oldValue:z.scrollValue,newValue:A,dir:t};if(!E._scrolling(true,E,D)){return}if(E.customScroll){r=Math.abs(E.customScroll);p=E.scrollPxToValue(r,z.dir)}z.scrollValue=p||A;E.customScroll=undefined;E._setDragAndContentPosition(true,false,t,"dragging")},_dragging:function(u,s,r){var v=r.options,q=h(u.target),t=q.parent();if(t.hasClass(l)){r._draggingInternal(s,r,v.hScroller,q)}else{r._draggingInternal(s,r,v.vScroller,q)}},_panelMouseWheel:function(u,w){var y=u.data,p=y.options,x,q,r,t,s,v;if(!p.mouseWheelSupport||p.disabled){return}x=h(u.srcElement||u.originalEvent.target);q="";r=x.closest("."+l,y.element).size()>0;t=p.hScroller;s=p.vScroller;if(w>0){q=r?"left":"top"}else{q=r?"right":"bottom"}if(q.length>0){y._doScrolling(q,y)}v=false;if(q==="left"){v=!y.hNeedScrollBar||Math.abs(t.scrollValue-t.scrollMin)<0.001}if(q==="right"){v=!y.hNeedScrollBar||Math.abs(t.scrollValue-(t.scrollMax-y._getHScrollBarLargeChange()+1))<0.001}if(q==="top"){v=!y.vNeedScrollBar||Math.abs(s.scrollValue-s.scrollMin)<0.001}if(q==="bottom"){v=!y.vNeedScrollBar||Math.abs(s.scrollValue-(s.scrollMax-y._getVScrollBarLargeChange()+1))<0.001}if(!v||!p.bubbleScrollingEvent||q==="left"||q==="right"){u.stopPropagation();u.preventDefault()}},_documentMouseUp:function(r){var p=r.data.self,q=r.data.ele;q.removeClass(a);p._clearInterval();h(document).unbind("mouseup",p._documentMouseUp)},_scrollerMouseOver:function(s){var q=s.data,p,r,t;if(q.options.disabled){return}p=h(s.srcElement||s.originalEvent.target);r=null;t=false;if(p.hasClass(f)){r=p;t=true}else{if(p.parent().hasClass(f)){r=p.parent();t=true}else{if(p.hasClass(o)||p.hasClass(l)){r=p}}}if(r!==undefined){if(t){r.addClass(b)}r.bind("mouseout."+q.widgetName,q,q._elementMouseOut);r.bind("mousedown."+q.widgetName,q,q._elementMouseDown);r.bind("mouseup."+q.widgetName,q,q._elementMouseUp)}},_elementMouseUp:function(q){var p=h(q.currentTarget);p.removeClass("ui-state-active")},_elementMouseDown:function(u){var z=h(u.currentTarget),y=u.data,p,x,r,q,w,t,v,s;if(y.options.disabled||u.which!==1){return}p="";x=false;r=false;if(z.hasClass("wijmo-wijsuperpanel-vbar-buttontop")){p="top";r=true}else{if(z.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom")){p="bottom";r=true}else{if(z.hasClass("wijmo-wijsuperpanel-hbar-buttonleft")){p="left";r=true}else{if(z.hasClass("wijmo-wijsuperpanel-hbar-buttonright")){p="right";r=true}else{if(z.hasClass(c)){z.addClass("ui-state-active");return}else{if(z.hasClass(l)){q=z.find("."+c);w=q.offset();if(u.pageX<w.left){p="left"}else{p="right"}x=true}else{if(z.hasClass(o)){t=z.find("."+c);v=t.offset();if(u.pageY<v.top){p="top"}else{p="bottom"}x=true}}}}}}}y._clearInterval();y._doScrolling(p,y,x);s=y._fields();y._setScrollingInterval(s,p,y,x);if(r){z.addClass("ui-state-active")}h(document).bind("mouseup."+y.widgetName,{self:y,ele:z},y._documentMouseUp)},doScrolling:function(p,q){this._doScrolling(p,this,q)},_setScrollerValue:function(u,x,A,q,D,B,F){var y=x.scrollMin,z=B?q:A,C=x.scrollValue,E,s,v,w,p,r;if(!C){C=y}E=0;if(D){s=x.scrollMax-q+1;if(Math.abs(C-s)<0.001){F._clearInterval();return false}v=x.firstStepChangeFix;E=C+z;if(!B&&Math.abs(C-y)<0.0001&&!isNaN(v)){E+=v}if(E>s){E=s}}else{if(Math.abs(C-y)<0.001){F._clearInterval();return false}E=C-z;if(E<0){E=y}}w={oldValue:x.scrollValue,newValue:E,direction:u,dir:x.dir};if(!F._scrolling(true,F,w)){return false}if(F.customScroll){r=Math.abs(F.customScroll);p=F.scrollPxToValue(r,x.dir)}x.scrollValue=p||E;F.customScroll=undefined;return true},_doScrolling:function(r,y,x){var q=y.options,t=q.vScroller,u=q.hScroller,s=y._getVScrollBarSmallChange(),w=y._getVScrollBarLargeChange(),v=y._getHScrollBarLargeChange(),p=y._getHScrollBarSmallChange();if(r==="top"||r==="bottom"){if(!y._setScrollerValue(r,t,s,w,r==="bottom",x,y)){return}r="v"}else{if(r==="left"||r==="right"){if(!y._setScrollerValue(r,u,p,v,r==="right",x,y)){return}r="h"}}y._setDragAndContentPosition(true,true,r)},_disableButtonIfNeeded:function(B){var v=B._fields(),p,q,s,t,C,x,y,u,w,A,D,z,r;if(v.intervalID>0){window.clearInterval(v.intervalID)}p=B.options;q=v.buttonLeft;s=v.buttonRight;t=v.buttonTop;C=v.buttonBottom;if(q!==undefined){x=B._getHScrollBarLargeChange();y=p.hScroller.scrollMax-x+1;u=p.hScroller.scrollValue;w=p.hScroller.scrollMin;if(u===undefined){u=w}if(Math.abs(u-w)<0.001||!v.hScrolling){q.addClass(m)}else{q.removeClass(m)}if(Math.abs(u-y)<0.001||!v.hScrolling){s.addClass(m)}else{s.removeClass(m)}}if(t!==undefined){A=B._getVScrollBarLargeChange();D=p.vScroller.scrollMax-A+1;z=p.vScroller.scrollValue;r=p.vScroller.scrollMin;if(z===undefined){z=r}if(Math.abs(z-r)<0.001||!v.vScrolling){t.addClass(m)}else{t.removeClass(m)}if(Math.abs(z-D)<0.001||!v.vScrolling){C.addClass(m)}else{C.removeClass(m)}}},_clearInterval:function(){var q=this._fields(),p=q.internalFuncID;if(p>0){window.clearInterval(p);q.internalFuncID=-1}},_elementMouseOut:function(q){var r=h(q.currentTarget),p=q.data;r.unbind("mouseout",p._elementMouseOut);r.unbind("mousedown",p._elementMouseDown);r.unbind("mouseup",p._elementMouseUp);r.removeClass(b)},_getScrollOffset:function(v){var r=h(v),w,z,B,x,t,s,y,p,u,q,A={left:null,top:null};if(r.size()===0){return A}w=this._fields();z=w.contentWrapper;B=w.templateWrapper;x=r.offset();t=B.offset();x.leftWidth=x.left+r.outerWidth();x.topHeight=x.top+r.outerHeight();s=z.offset();s.leftWidth=s.left+z.outerWidth();s.topHeight=s.top+z.outerHeight();u=x.left-t.left;if(x.left<s.left){A.left=u}else{if(x.leftWidth>s.leftWidth){q=x.leftWidth-t.left-z.innerWidth();if(u<q){A.left=u}else{A.left=q}}}y=x.top-t.top;if(x.top<s.top){A.top=y}else{if(x.topHeight>s.topHeight){p=x.topHeight-t.top-z.innerHeight();if(y<p){A.top=y}else{A.top=p}}}return A},_scrollDrag:function(t,x,s,p){var G=this,r=G.options,E=t==="v",z=E?r.vScroller:r.hScroller,u=z.scrollMin,B=z.scrollMax,y=z.scrollValue===undefined?u:(z.scrollValue-u),A=G._getLargeChange(t),C=B-u-A+1,F=-1,q,w,D;if(y>C){y=C}if(x!==undefined){q=G._getTrackLen(t);w=s[E?"outerHeight":"outerWidth"]();D=G._getScrollContainerPadding(E?"top":"left");F=(y/C)*(q-w)+D}if(F>=0){s.css(E?"top":"left",F+"px")}G._scrollEnd(p,G,t)},needToScroll:function(p){var q=this._getScrollOffset(p);return q.top!==null||q.left!==null},scrollChildIntoView:function(p){var s=this._getScrollOffset(p),r=s.left,q=s.top;if(r!==null){this.hScrollTo(r)}if(q!==null){this.vScrollTo(q)}},hScrollTo:function(p){var q=this.options;q.hScroller.scrollValue=this.scrollPxToValue(p,"h");this._setDragAndContentPosition(true,true,"h","nonestop")},vScrollTo:function(q){var p=this.options;p.vScroller.scrollValue=this.scrollPxToValue(q,"v");this._setDragAndContentPosition(true,true,"v","nonestop")},scrollPxToValue:function(A,q){var p=this.options,r=(q==="h"?"outerWidth":"outerHeight"),C=(q==="h"?"contentWidth":"contentHeight"),t=(q==="h"?"hScroller":"vScroller"),u=this._fields(),B=u.contentWrapper,E=u[C],z=B[r](),w=p[t].scrollMin,D=p[t].scrollMax,s=D-w,y=(q==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange()),x=s-y+1,v=x*(A/(E-z));if(v<w){v=w}if(v>x){v=x}return v},scrollTo:function(p,q){this.hScrollTo(p);this.vScrollTo(q)},refresh:function(){this.paintPanel()},paintPanel:function(q){var p=this,t=p.element,u,v,s,r;if(t.is(":visible")){u=typeof document.activeElement!="unknown"?document.activeElement:undefined;v=p.options;s=p._fields();if(!s.initialized){p._initialize(s,t,p)}p._resetLargeChange(p,s,v);p._bindElementEvents(p,s,t,v);r=s.templateWrapper;r.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"});r.hide();r.show();s.contentWidth=r.width();s.contentHeight=r.height();r.css("float","");p._setRounder(p,t);p._setInnerElementsSize(s,t);if(p._testScroll(p,s,v)===false){return false}p._initScrollBars(p,s,v);p._initScrollButtons(p,s,v);p._trigger("painted");p._paintedMark={date:new Date(),mainWidth:t[0].offsetWidth,mainHeight:t[0].offsetHeight,width:s.contentWidth,height:s.contentWidth};if(u!==undefined&&!q){h(u).focus()}return true}return false},_resetLargeChange:function(p,r,s){var q;if(p._autoVLarge){s.vScroller.scrollLargeChange=null}if(p._autoHLarge){s.hScroller.scrollLargeChange=null}r.vTrackLen=undefined;r.hTrackLen=undefined;if(r.vbarContainer){q=r.vbarContainer.children("."+c+":eq(0)");q.detach();r.vbarContainer.remove();r.vbarContainer=undefined}if(r.hbarContainer){q=r.hbarContainer.children("."+c+":eq(0)");q.detach();r.hbarContainer.remove();r.hbarContainer=undefined}},_initialize:function(s,r,q){s.initialized=true;r.addClass(g);s.oldHeight=r.css("height");var p=r.css("overflow");r.css("overflow","");r.height(r.height());r.css("overflow",p);q._createAdditionalDom(q,s,r)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(D,q,v,r,x,w,p){var u=r==="h",B="mouseover."+D.widgetName,E=u?"buttonLeft":"buttonTop",A=u?"buttonRight":"buttonBottom",s=w[E],C=w[A],t,y,z;if(D._hasMode(v,"buttons")||D._hasMode(v,"buttonshover")){t=u?j:n;if(s===undefined){y=h(t).appendTo(p);y.bind(B,D,D._scrollButtonMouseOver);w[E]=s=p.children(u?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop");w[A]=C=p.children(u?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")}z={my:u?"left":"top",of:x,at:u?"left":"top",collision:"none"};h.extend(z,v.decreaseButtonPosition);s.position(z);z={my:u?"right":"bottom",of:x,at:u?"right":"bottom",collision:"none"};h.extend(z,v.increaseButtonPosition);C.position(z)}else{if(s!==undefined){s.remove();C.remove();w[E]=w[A]=undefined}}},_initScrollButtons:function(q,s,t){var p=s.contentWrapper,r=s.stateContainer;q._setButtonPosition(q,t,t.hScroller,"h",p,s,r);q._setButtonPosition(q,t,t.vScroller,"v",p,s,r)},_getVScrollBarSmallChange:function(){var q=this.options,p;if(!q.vScroller.scrollSmallChange){p=this._getVScrollBarLargeChange();q.vScroller.scrollSmallChange=p/2}return q.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(s){var G=this,r=G.options,z=G._fields(),F=s==="v",y=F?r.vScroller:r.hScroller,A=F?"innerHeight":"innerWidth",w=F?"contentHeight":"contentWidth",x=F?"_autoVLarge":"_autoHLarge",D,u,q,C,p,t,B,E;if(y.scrollLargeChange){return y.scrollLargeChange}D=y.scrollMax;u=y.scrollMin;q=D-u;C=z.contentWrapper;p=C[A]();t=z[w];B=p/(t-p);E=((q+1)*B)/(1+B);if(isNaN(E)){E=0}y.scrollLargeChange=E;G[x]=true;return y.scrollLargeChange},_getHScrollBarSmallChange:function(){var q=this.options,p;if(!q.hScroller.scrollSmallChange){p=this._getHScrollBarLargeChange();q.hScroller.scrollSmallChange=p/2}return q.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(E,J,G){var x=G.hScroller,B=x.scrollMax,z=x.scrollMin,A=B-z,r=G.vScroller,F=r.scrollMax,D=r.scrollMin,u=F-D,t=J.hbarDrag,I=J.vbarDrag,q,H,w,L,K,y,s,C,p,v;if(E.hNeedScrollBar&&t.is(":visible")){q=E._getHScrollBarLargeChange();H=E._getTrackLen("h");w=E._getDragLength(A,q,H,G.hScroller.scrollMinDragLength);t.width(w);L=t.outerWidth(true)-t.width();t.width(w-L);K=t.children("span");K.css("margin-left",(t.width()-K[0].offsetWidth)/2);if(H<=t.outerWidth(true)){t.hide()}else{t.show()}if(E._isDragging==true){h(document).trigger("mouseup");E._isDragging=false}}if(E.vNeedScrollBar&&I.is(":visible")){y=E._getVScrollBarLargeChange();s=E._getTrackLen("v");C=E._getDragLength(u,y,s,G.vScroller.scrollMinDragLength);I.height(C);p=I.outerHeight(true)-I.height();I.height(C-p);v=I.children("span");v.css("margin-top",(I.height()-v[0].offsetHeight)/2);if(s<=I.outerHeight(true)){I.hide()}else{I.show()}if(E._isDragging==true){h(document).trigger("mouseup");E._isDragging=false}}E._setDragAndContentPosition(false,false,"both")},_getTrackLen:function(s){var r=this,u=r._fields(),t=s+"TrackLen",q,w,p,v;if(u[t]!==undefined){return u[t]}q=u.hbarContainer;w=u.vbarContainer;p=0;v=0;if(s==="h"){v=r._getScrollContainerPadding("h");p=q.innerWidth()}if(s==="v"){v=r._getScrollContainerPadding("v");p=w.innerHeight()}u[t]=(p-v);return u[t]},_getScrollContainerPadding:function(p){var r=this,t=r._fields(),u=0,q,s;if(p==="h"){u=r._getScrollContainerPadding("left")+r._getScrollContainerPadding("right")}else{if(p==="v"){u=r._getScrollContainerPadding("top")+r._getScrollContainerPadding("bottom")}else{if(p==="left"||p==="right"){q=t.hbarContainer}else{q=t.vbarContainer}s=p+"Padding";if(t[s]!==undefined){u=t[s];return u}if(q&&q.css){u=parseFloat(q.css("padding-"+p))}t[s]=u}}return u},_triggerScroll:function(p,q,s){var r={position:p,dir:q,animationOptions:s};this._trigger("scroll",null,r)},_contentDragAnimate:function(aa,N,T,C,I,w,x){var A=this,W=A.options,S=aa==="v",G=S?W.vScroller:W.hScroller,R=S?"outerHeight":"outerWidth",O=S?"innerHeight":"innerWidth",L=S?"contentHeight":"contentWidth",y=S?"top":"left",F=G.scrollMin,X=G.scrollMax,P=X-F,B=G.scrollValue===undefined?F:(G.scrollValue-F),U=A._getLargeChange(aa),K=P-U+1,Z=A._fields(),q=Z.contentWrapper,z=Z.templateWrapper,M,u,J,t,V,Y,s,p,D,Q,E,H;if(B>K){B=K}M=(Z[L]-q[O]())*(B/K);if(Math.abs(M)<0.001){M=0}M=Math.round(M);u=-1;if(T!==undefined){if(N&&C.is(":animated")&&I!=="nonestop"){C.stop(true,false)}J=A._getTrackLen(aa);t=C[R](true);V=J-t;Y=A._getScrollContainerPadding(y);u=(B/K)*V+Y}if(N&&W.animationOptions&&!W.animationOptions.disabled){if(u>=0&&x!=="dragging"){s=h.extend({},W.animationOptions);s.complete=undefined;p=S?{top:u}:{left:u};C.animate(p,s)}D=h.extend({},W.animationOptions);Q=W.animationOptions.complete;D.complete=function(){A._scrollEnd(w,A,aa);if(h.isFunction(Q)){Q(arguments)}};if(N&&z.is(":animated")&&I!=="nonestop"){z.stop(true,false)}E=S?{top:-M}:{left:-M};if(!W.customScrolling){z.animate(E,D)}else{A._scrollEnd(w,A,aa,B)}A._triggerScroll(M,aa,D)}else{H=S?"top":"left";if(u>=0&&x!=="dragging"){C[0].style[H]=u+"px"}if(!W.customScrolling){z[0].style[H]=-M+"px"}A._triggerScroll(M,aa);A._scrollEnd(w,A,aa,B)}},_setDragAndContentPosition:function(p,s,r,x,y){var z=this,u=z._fields(),t=u.hbarContainer,q=u.hbarDrag,w=u.vbarContainer,v=u.vbarDrag;if((r==="both"||r==="h")&&u.hScrolling){z._contentDragAnimate("h",s,t,q,x,p,y)}if((r==="both"||r==="v")&&u.vScrolling){z._contentDragAnimate("v",s,w,v,x,p,y)}if(u.intervalID>0){window.clearInterval(u.intervalID)}u.intervalID=window.setInterval(function(){z._disableButtonIfNeeded(z)},500)},_scrolling:function(q,p,t){var s=true;if(q){t.beforePosition=p.getContentElement().position();p._beforePosition=t.beforePosition;s=p._trigger("scrolling",null,t);p.customScroll=t.customScroll}return s},_scrollEnd:function(r,p,q,s){if(r){window.setTimeout(function(){var t=p.getContentElement(),v,u;if(!t.is(":visible")){return}v=p.getContentElement().position();u={dir:q,beforePosition:p._beforePosition,afterPosition:v};if(!isNaN(s)){u.newValue=s}p._trigger("scrolled",null,u)},0)}},_getDragLength:function(s,p,q,t){var v=s/p,u=q/v,r=t;if(u<r){u=r}else{if((u+1)>=q){u=q-1}}return Math.round(u)},_needScrollbar:function(q,r){var p=this._hasMode(q,"scrollbar"),s=q.scrollBarVisibility,t=p&&(s==="visible"||(s==="auto"&&r));return t},_bindBarEvent:function(r,s,q){var p=this;r.bind("mouseover."+p.widgetName,p,p._scrollerMouseOver);s.draggable({axis:q==="h"?"x":"y",start:function(u,t){p._isDragging=true},drag:function(u,t){p._dragging(u,t,p)},containment:"parent",stop:function(t){p._dragStop(t,p,q);h(t.target).removeClass("ui-state-active");p._isDragging=false}})},_createBarIfNeeded:function(C,u,s,x,z){if(C){var D=this,v,y=D._fields(),r=s+"barContainer",t=s+"barDrag",w=s==="h",p=z[w?"innerHeight":"innerWidth"](),B=y[r]=h(x),q,A;u.append(B);q=B[0][w?"offsetHeight":"offsetWidth"];p=p-q;v={direction:w?"horizontal":"vertical",targetBarLen:q,contentLength:p};if(D._trigger(w?"hScrollerActivating":"vScrollerActivating",null,v)===false){return false}A=y[t]=B.find("."+c);D._bindBarEvent(B,A,s);z[w?"height":"width"](p)}},_setScrollbarPosition:function(r,A,D,q,B,v,p,H,J,C,z){var s=C==="h",x,I,t,y,G,w,F,E,u;if(v){x=q[0][s?"offsetHeight":"offsetWidth"];I=A._getScrollContainerPadding(C);t=s?"top":"left";y=s?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"};G=s?{top:x+"px"}:{left:x+"px"};w=s?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"};F=s?{top:""}:{left:""};E=D[s?"innerWidth":"innerHeight"]();if(H===t){q.css(y);D.css(G);if(s){q.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass("ui-corner-bl").addClass("ui-corner-tl");q.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass("ui-corner-br").addClass("ui-corner-tr");q.removeClass("ui-corner-bottom").addClass("ui-corner-top")}else{q.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass("ui-corner-tr").addClass("ui-corner-tl");q.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass("ui-corner-br").addClass("ui-corner-bl");q.removeClass("ui-corner-right").addClass("ui-corner-left")}}else{q.css(w);D.css(F);if(s){q.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass("ui-corner-tl").addClass("ui-corner-bl");q.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass("ui-corner-bl").addClass("ui-corner-br");q.removeClass("ui-corner-top").addClass("ui-corner-bottom")}else{q.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass("ui-corner-tl").addClass("ui-corner-tr");q.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass("ui-corner-bl").addClass("ui-corner-br");q.removeClass("ui-corner-left").addClass("ui-corner-right")}}u=0;if(p){u=B[0][s?"offsetWidth":"offsetHeight"];if(J==="left"){q.css("right","0px")}else{if(J==="right"){q.css("left","0px")}else{if(J==="top"){q.css("bottom","0px")}else{if(J==="bottom"){q.css("top","0px")}}}}}if(!s&&p){u=0}q[s?"width":"height"](E-I);A._enableDisableScrollBar(C,q,!z)}else{r.css(s?"left":"top","")}},_testScroll:function(E,x,s){var q=x.templateWrapper,y=x.contentWrapper,v=x.stateContainer,p=y.innerWidth(),C=y.innerHeight(),u=x.contentWidth,t=x.contentHeight,B,D,w,z,A,r;x.hScrolling=u>p;x.vScrolling=t>C;B=E.hNeedScrollBar=E._needScrollbar(s.hScroller,x.hScrolling);if(E._createBarIfNeeded(B,v,"h",e,y)===false){return false}if(B&&!x.vScrolling){q.css("float","left");x.contentHeight=q.height();x.vScrolling=x.contentHeight>(C-x.hbarContainer[0].offsetHeight);q.css("float","")}D=E.vNeedScrollBar=E._needScrollbar(s.vScroller,x.vScrolling);if(E._createBarIfNeeded(D,v,"v",k,y)===false){return false}if(D&&!x.hScrolling){q.css("float","left");x.contentWidth=q.width();x.hScrolling=x.contentWidth>(p-x.vbarContainer[0].offsetWidth);q.css("float","");if(x.hScrolling&&!B){B=E.hNeedScrollBar=E._needScrollbar(s.hScroller,x.hScrolling);if(E._createBarIfNeeded(B,v,"h",e,y)===false){return false}}}w=x.hbarContainer;z=x.vbarContainer;A=s.hScroller.scrollBarPosition;r=s.vScroller.scrollBarPosition;E._setScrollbarPosition(q,E,y,w,z,B,D,A,r,"h",x.hScrolling);E._setScrollbarPosition(q,E,y,z,w,D,B,r,A,"v",x.vScrolling)},_enableDisableScrollBar:function(q,r,p){if(q==="v"){r[p?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled");r.find("."+f)[p?"addClass":"removeClass"](m)}else{if(q==="h"){r[p?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled");r.find("."+f)[p?"addClass":"removeClass"](m)}}r.children("."+c)[p?"hide":"show"]()},_initResizer:function(){var q=this,t=q.options,r=q._fields(),u=r.resizer,p,s;if(!u&&t.allowResize){p=t.resizableOptions;s=p.stop;p.stop=function(v){q._resizeStop(v,q);if(h.isFunction(s)){s(v)}};r.resizer=u=q.element.resizable(p)}if(!t.allowResize&&r.resizer){u.resizable("destroy");r.resizer=null}},_resizeStop:function(q,p){if(!this.options.autoRefresh){p.paintPanel(true)}p._trigger("resized")},_createAdditionalDom:function(q,s,r){if(!r.attr("tabindex")){r.attr("tabindex","-1");s.tabindex=true}var p=s.stateContainer=h(d),t;s.contentWrapper=p.children();t=s.templateWrapper=s.contentWrapper.children();r.contents().each(function(u,v){var w=h(v);if(w.hasClass("wijmo-wijsuperpanel-header")){s.header=w;return}if(w.hasClass("wijmo-wijsuperpanel-footer")){s.footer=w;return}t[0].appendChild(v)});if(s.header!==undefined){r.prepend(s.header)}r[0].appendChild(p[0]);if(s.footer!==undefined){s.footer.insertAfter(p)}},_setRounder:function(p,u){if(this.options.showRounder){u.addClass(i);if(p._rounderAdded){return}if(h.browser.msie){return}var s,r,t,q;s=r="";if(h.browser.webkit){r="WebkitBorderTopLeftRadius";s="WebkitBorderRadius"}else{if(h.browser.mozilla){r="MozBorderRadiusBottomleft";s="MozBorderRadius"}else{r="border-top-left-radius";s="border-radius"}}t=u.css(r);q=parseInt(t,10);u.css(s,q+1);p._rounderAdded=true;p._radiusKey=s}else{u.removeClass(i)}},_setInnerElementsSize:function(s,x){var p=s.stateContainer,t=s.contentWrapper,w=0,q,r,v,u;if(s.header!==undefined){w+=s.header.outerHeight()}if(s.footer!==undefined){w+=s.footer.outerHeight()}q=p[0].style;r=x.innerHeight()-w;v=x.innerWidth();q.display="none";q.height=r+"px";q.width=v+"px";u=t[0].style;u.height=r+"px";u.width=v+"px";q.display=""}})}(jQuery));