/*
 *
 * Wijmo Library 2.3.7
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 **/
var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},wijmo;(function(e){"use strict";var b=jQuery;function c(c,b){if(typeof b==="undefined")b=2;var a=""+c+"";if(a.length>b)a=a.substr(a.length-b);else while(a.length<b)a="0"+a;return a}var p=function(c){__extends(a,c);function a(){c.apply(this,arguments)}a.prototype._createTextProvider=function(){this._textProvider=new q(this,this.options.dateFormat)};a.prototype._strToDate=function(a){return this._textProvider.parseDate(a)};a.prototype._beginUpdate=function(){var a=this.options,d,b=null;c.prototype._beginUpdate.call(this);if(a.minDate)if(typeof a.minDate==="string")a.minDate=this._strToDate(a.minDate);if(a.maxDate)if(typeof a.maxDate==="string")a.maxDate=this._strToDate(a.maxDate);if(!a.date){if(!!this.element.data("elementValue"))d=this.element.data("elementValue")}else if(typeof a.date==="string")d=a.date;else b=a.date;if(d)b=this._strToDate(d);this._safeSetDate(b);this.element.data({defaultDate:b===null?b:new Date(a.date.getTime()),preDate:b===null?b:new Date(a.date.getTime())});this._resetTimeStamp();a.showTrigger&&!this._hasComboItems()&&this._initCalendar();this.element.addClass("wijmo-wijinput-date").attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":a.date})};a.prototype._endUpdate=function(){var a=this;c.prototype._endUpdate.call(this);this.element.bind("click.wijinput",function(){a._highLightCursor()})};a.prototype._isValidDate=function(a,c){var b=this.options;if(a===undefined)return false;if(isNaN(a))return false;if(a.getFullYear()<1||a.getFullYear()>9999)return false;if(c){if(b.minDate)if(a<b.minDate)return false;if(b.maxDate)if(a>b.maxDate)return false}return true};a.prototype._checkRange=function(a){var b=this.options;if(a){if(b.minDate&&a<b.minDate)a=new Date(Math.max(b.minDate,a));if(b.maxDate&&a>b.maxDate)a=new Date(Math.min(b.maxDate,a))}return a};a.prototype._safeSetDate=function(a){var c=this.options,b=a;a=this._checkRange(a);if(isNaN(a))a=b;c.date=a;return true};a.prototype._safeGetDate=function(){var a=this.options.date||this._creationDate;a=this._checkRange(a);return a};a.prototype._setOption=function(d,a){c.prototype._setOption.call(this,d,a);switch(d){case"date":if(!!a){if(typeof a==="string")a=this._strToDate(a);else if(typeof a==="object")a=new Date(a.getTime());else a=new Date(a);if(isNaN(a))a=new Date}this._safeSetDate(a);this._updateText();this._highLightField();break;case"dateFormat":case"culture":this._textProvider._setFormat(this.options.dateFormat);this._updateText();var b=this.element.data("calendar");b&&b.wijcalendar("option",d,a);break;case"activeField":a=Math.min(a,this._textProvider.getFieldCount()-1);a=Math.max(a,0);this.options.activeField=a;this._highLightField();this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var b=this.element.data("calendar",b);b&&b.wijcalendar("option",d,a)}};a.prototype._setData=function(a){this.option("date",a)};a.prototype._resetData=function(){var a=this.element.data("defaultDate");if(a===undefined||a===null){a=this.element.data("elementValue");if(a!==undefined&&a!==null&&a!=="")this.setText(a);else this._setData(null)}else this._setData(a)};a.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0);this.element.data("timeStamp",new Date("1900/1/1"))};a.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(this.options.showNullText&&this.isDateNull())return"";var a=this._textProvider.toString();return a===this.options.nullText?"":a};a.prototype._highLightField=function(a){if(typeof a==="undefined")a=this.options.activeField;if(this.isFocused()){var b=this._textProvider.getFieldRange(a);b&&this.element.wijtextselection(b)}};a.prototype._highLightCursor=function(a){if(this._isNullText())return;if(a===undefined)a=Math.max(0,this.element.wijtextselection().start);var b=this._textProvider.getCursorField(a);if(b<0)return;this._setOption("activeField",b)};a.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)};a.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)};a.prototype._toFirstField=function(){this._setOption("activeField",0)};a.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())};a.prototype._clearField=function(a){if(typeof a==="undefined")a=this.options.activeField;var b=this._textProvider.getFieldRange(a),c,d=this;if(b){c=new e.wijInputResult;this._textProvider.removeAt(b.start,b.end,c);this._updateText();window.setTimeout(function(){d._highLightField()},1)}};a.prototype._doSpin=function(b,a){var c=this;if(!this._allowEdit())return false;if(a&&this.element.data("breakSpinner"))return false;if(this._textProvider[b?"incEnumPart":"decEnumPart"]()){this._updateText();this._highLightField()}a&&!this.element.data("breakSpinner")&&window.setTimeout(function(){return c._doSpin(b,true)},this._calcSpinInterval());return true};a.prototype._onChange=function(){};a.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()};a.prototype._keyDownPreview=function(a){var d=a.keyCode||a.which,c;switch(d){case b.ui.keyCode.LEFT:this._toPrevField();return true;case b.ui.keyCode.RIGHT:this._toNextField();return true;case b.ui.keyCode.TAB:case b.ui.keyCode.SPACE:case 188:case 190:case 110:case 191:if(a.shiftKey){if(this.options.activeField>0){this._toPrevField();return true}}else if(this.options.activeField<this._textProvider.getFieldCount()-1){this._toNextField();return true}break;case b.ui.keyCode.HOME:if(a.ctrlKey)this._setOption("date",new Date);else this._toFirstField();return true;case b.ui.keyCode.END:if(a.ctrlKey)this._setOption("date",new Date("1970/1/1"));else this._toLastField();return true;case b.ui.keyCode.DELETE:if(this._allowEdit()){c=this.element.wijtextselection();if(c.end-c.start===this.element.val().length){this.isDeleteAll=true;this._setOption("date",new Date("1970/1/1"))}else this._clearField();return true}}return false};a.prototype._autoMoveToNextField=function(a,b){if(!this.options.autoNextField)return;this._textProvider.needToMove(this.options.activeField,a,b)&&this._toNextField()};a.prototype._keyPressPreview=function(c){var e=c.keyCode||c.which,h,f,k,a,i,j,l,m,n,d,g;if(e===b.ui.keyCode.ENTER){if(this.isDateNull())this.options.date=new Date;return false}h=this._textProvider.getFieldRange(this.options.activeField);if(h){if(e===b.ui.keyCode.TAB)return true;if(e===b.ui.keyCode.SPACE){this._stopEvent(c);return true}f=String.fromCharCode(e);k=this._textProvider.isFieldSep(f,this.options.activeField);if(k){this._toNextField();this._stopEvent(c);return true}a=this.element.data("cursorPos");i=new Date;l=this.element.data("timeStamp");g=this.element.data("lastInput");j=i.getTime()-l.getTime()>this.options.keyDelay;var d=f;if(j)a=0;else if(g)d=g+d;this.element.data({timeStamp:i,lastInput:d});m=h.start+a;this.element.data("cursorPos",++a);n=this._textProvider.addToField(d,this.options.activeField,m);if(n){this._updateText();this._autoMoveToNextField(a,f);this._highLightField()}else{this._resetTimeStamp();this._fireIvalidInputEvent()}this._stopEvent(c);return true}return false};a.prototype._raiseDataChanged=function(){var a=this.options.date,b=this.element.data("preDate");this.element.data("preDate",!a?null:new Date(a.getTime()));if(!b&&a||b&&!a||b&&a&&b.getTime()!==a.getTime()){this._syncCalendar();this.element.attr("aria-valuenow",a);this._trigger("dateChanged",null,{date:a})}};a.prototype.isDateNull=function(){return this.options.date===null||this.options.date===undefined};a.prototype._isMinDate=function(a){return a.getFullYear()===1&&a.getMonth()===0&&a.getDate()===1};a.prototype._initCalendar=function(){var e=this,a=this.options,c=a.calendar,d;if(c===undefined||c===null)return;if(typeof c==="boolean"||c==="default"){c=b("<div/>");c.appendTo(document.body)}d=b(c);if(d.length!==1)return;this.element.data("calendar",d);if(a.localization){a.nextTooltip=a.localization.nextTooltip;a.prevTooltip=a.localization.prevTooltip;a.titleFormat=a.localization.titleFormat;a.toolTipFormat=a.localization.toolTipFormat}d.wijcalendar({popupMode:true,culture:a.culture,nextTooltip:a.nextTooltip||"Next",prevTooltip:a.prevTooltip||"Previous",titleFormat:a.titleFormat||"MMMM yyyy",toolTipFormat:a.toolTipFormat||"dddd, MMMM dd, yyyy",selectedDatesChanged:function(){var a=d.wijcalendar("getSelectedDate"),b=e.option("date");d.wijcalendar("close");if(a){if(b){a.setHours(b.getHours());a.setMinutes(b.getMinutes());a.setSeconds(b.getSeconds());a.setMilliseconds(b.getMilliseconds())}e.option("date",a)}e._trySetFocus()}});this._syncCalendar()};a.prototype._syncCalendar=function(){var a=this.element.data("calendar"),c,b;if(!a)return;c=this.options;b=this._safeGetDate();if(this._isMinDate(b))b=new Date;a.wijcalendar("option","displayDate",b);c.minDate&&a.wijcalendar("option","minDate",c.minDate);c.maxDate&&a.wijcalendar("option","maxDate",c.maxDate);a.wijcalendar("unSelectAll");a.wijcalendar("selectDate",b);a.wijcalendar("refresh")};a.prototype._isPopupShowing=function(){var a=this.element.data("calendar");return!a?c.prototype._isPopupShowing.call(this):a.wijcalendar("isPopupShowing")};a.prototype._showPopup=function(){var a=this.element.data("calendar");if(!a)return c.prototype._showPopup.call(this);if(!this._allowEdit())return;this._syncCalendar();a.wijcalendar("popup",b.extend({},this.options.popupPosition,{of:this.outerDiv}))};a.prototype._hidePopup=function(){var a=this.element.data("calendar");if(!a)return c.prototype._hidePopup.call(this);a.wijcalendar("close")};a.prototype._isCalendarVisible=function(){if(!this._allowEdit())return false;var a=this.element.data("calendar");return!a?false:a.wijcalendar("isPopupShowing")};a.prototype._popupVisible=function(){return this._hasComboItems()?this._isComboListVisible():this._isCalendarVisible()};return a}(e.wijinputcore);p.prototype.options=b.extend(true,{},e.wijinputcore.prototype.options,{date:null,minDate:null,maxDate:null,dateFormat:"d",startYear:1950,smartInputMode:true,activeField:0,keyDelay:800,autoNextField:true,calendar:"default",popupPosition:{offset:"0 4"},dateChanged:null});b.widget("wijmo.wijinputdate",p.prototype);var q=function(d){__extends(a,d);function a(a,b){d.call(this);this.inputWidget=a;this.maskPartsCount=0;this.pattern="M/d/yyyy";this._disableSmartInputMode=false;this.paddingZero=c;this.descriptors=new Array(0);this.desPostions=new Array(0);this.fields=new Array(0);this._setFormat(b)}a.prototype.initialize=function(){};a.prototype.getFieldCount=function(){return this.fields.length};a.prototype.getFieldRange=function(b){var a=this.fields[b];return{start:a.startIndex,end:a.startIndex+a.getText().length}};a.prototype.getCursorField=function(a){a=Math.min(a,this.desPostions.length-1);a=Math.max(a,0);var c=this.desPostions[a].desc,d;if(c.type===-1){d=b.inArray(c,this.descriptors);if(d>0&&this.descriptors[d-1].type!==-1)c=this.descriptors[d-1];else return-1}return b.inArray(c,this.fields)};a.prototype.needToMove=function(c,d,e){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),true))return false;var b=this.fields[c],a=parseInt(e,10);if(d===b.maxLen)return true;if(isNaN(a))return false;switch(b.type){case 20:case 25:case 45:case 46:return a>1;case 47:case 48:return a>2;case 30:case 31:return a>3;case 50:case 51:case 60:case 61:return a>6}return false};a.prototype._getCulture=function(){return this.inputWidget._getCulture()};a.prototype._isDigitString=function(a){a=b.trim(a);if(a.length===0)return true;var c=a.charAt(0),d,e;if(c==="+"||c==="-"){a=a.substr(1);a=b.trim(a)}if(a.length===0)return true;try{d=parseFloat(a);e=d.toString();return e===a}catch(f){return false}};a.prototype._setFormat=function(h){this.descriptors=[];var a="",d="",f=false,g=false,e,c;this.pattern=this._parseFormatToPattern(h);for(e=0;e<this.pattern.length;e++){c=this.pattern.charAt(e);if(g){this.descriptors.push(this.createDescriptor(-1,c));a="";g=false;continue}if(c==="\\"){g=true;if(a.length>0){!this.handlePattern(a)&&this.descriptors.push(this.createDescriptor(-1,d));a=""}continue}if(c==="'"){if(f){f=false;a=""}else{f=true;if(a.length>0){!this.handlePattern(a)&&this.descriptors.push(this.createDescriptor(-1,d));a=""}}continue}if(f){this.descriptors.push(this.createDescriptor(-1,c));a="";continue}if(!e)d=c;if(d!==c&&a.length>0){!this.handlePattern(a)&&this.descriptors.push(this.createDescriptor(-1,d));a=""}a+=c;d=c}if(a.length>0)!this.handlePattern(a)&&this.descriptors.push(this.createDescriptor(-1,d));this.fields=b.grep(this.descriptors,function(a){return a.type!==-1})};a.prototype._parseFormatToPattern=function(c){var a=this.inputWidget._getCulture().calendars.standard,b=a.patterns.d;if(c.length<=1)switch(c){case"":case"d":b=a.patterns.d;break;case"D":b=a.patterns.D;break;case"f":b=a.patterns.D+" "+a.patterns.t;break;case"F":b=a.patterns.D+" "+a.patterns.T;break;case"g":b=a.patterns.d+" "+a.patterns.t;break;case"G":b=a.patterns.d+" "+a.patterns.T;break;case"m":b=a.patterns.M;break;case"M":b=a.patterns.M;break;case"s":b=a.patterns.S;break;case"t":b=a.patterns.t;break;case"T":b=a.patterns.T;break;case"u":b=a.patterns.S;break;case"U":b=a.patterns.D+" "+a.patterns.T;break;case"y":b=a.patterns.Y;break;case"Y":b=a.patterns.Y}else b=c;return b};a.prototype.getDate=function(){return!!this.inputWidget?new Date(this.inputWidget._safeGetDate().getTime()):undefined};a.prototype.setDate=function(a){this.inputWidget&&this.inputWidget._setData(a)};a.prototype._internalSetDate=function(e){if(this.inputWidget){var c=this,a=this.inputWidget.options,d=this.inputWidget.element,f=!!d.data("typing"),b;if(f){a.date=e;b=function(){var f=new Date,e=d.data("timeStamp");if(f.getTime()-e.getTime()>a.keyDelay){c.inputWidget._safeSetDate(a.date);c.inputWidget._updateText();c.inputWidget._highLightField()}else window.setTimeout(b,a.keyDelay)};window.setTimeout(b,a.keyDelay)}else this.inputWidget._safeSetDate(e)}};a.prototype.daysInMonth=function(a,c){a=a-1;var b=new Date(c,++a,1,-1).getDate();return b};a.prototype.setYear=function(a,d,i){try{if(d&&d.isfullreset){d.offset=1;a="1970"}if(typeof a==="string")if(!this._isDigitString(a))return false;a=a*1;var h=this.inputWidget.options,e=1,f=9999,c,b,g;if(i){if(h.minDate)e=Math.max(e,h.minDate.getFullYear());if(h.maxDate)f=Math.min(f,h.maxDate.getFullYear())}if(d&&d.isreset)a=e;if(a<e)a=e;if(a>f)a=f;c=this.getDate();b=new Date(c.getTime());b.setFullYear(a);if(this._isValidDate(b)){g=this.daysInMonth(this.getMonth(),this.getYear());if(g===c.getDate()){b=new Date(c.getTime());b.setDate(1);b.setFullYear(a);g=this.daysInMonth(b.getMonth()+1,b.getFullYear());b.setDate(g);if(this._isValidDate(b)){this._internalSetDate(b);return true}else return false}c.setFullYear(a);this._internalSetDate(c);return true}else{if(d&&d.isreset){c.setFullYear(1);this._internalSetDate(c);return true}return false}}catch(j){return false}};a.prototype.getYear=function(){return this.getDate().getFullYear()};a.prototype.setMonth=function(b,e,c){try{if(c&&c.isfullreset)b="1";b=b*1;var f=this.getDate(),d,a;if(typeof e!=="undefined"&&!e)if(b>12||b<1)if(c&&c.isreset)b=1;else return false;d=this.daysInMonth(this.getMonth(),this.getYear());if(d===this.getDate().getDate()){a=new Date(f.getTime());a.setDate(1);a.setMonth(b-1);d=this.daysInMonth(a.getMonth()+1,a.getFullYear());a.setDate(d);if(this._isValidDate(a)){this._internalSetDate(a);return true}else return false}else{a=new Date(f.getTime());a.setMonth(b-1);if(this._isValidDate(a)){this._internalSetDate(a);return true}else return false}}catch(g){return false}};a.prototype.getMonth=function(){return this.getDate().getMonth()+1};a.prototype.setDayOfMonth=function(b,c,a){try{if(a&&a.isfullreset)return this.setDayOfMonth(1,c);var f=this.getDate(),e,d;b=b*1;if(typeof c!=="undefined"&&!c){e=this.daysInMonth(this.getMonth(),this.getYear());if(b>e||b<1)return a&&a.isreset?this.setDayOfMonth(1,c,a):false}d=new Date(f.getTime());d.setDate(b);if(this._isValidDate(d)){this._internalSetDate(d);return true}else return false}catch(g){return false}};a.prototype.getDayOfMonth=function(){return this.getDate().getDate()};a.prototype.setHours=function(a,c){try{a=a*1;if(typeof c!=="undefined"&&!c)if(a>24)return false;var b=new Date(this.getDate().getTime());b.setHours(a);if(this._isValidDate(b)){this._internalSetDate(b);return true}else return false}catch(d){return false}};a.prototype.getHours=function(){return this.getDate().getHours()};a.prototype.setMinutes=function(a,c){try{a=a*1;if(typeof c!=="undefined"&&!c)if(a>60)return false;var b=new Date(this.getDate().getTime());b.setMinutes(a);if(this._isValidDate(b)){this._internalSetDate(b);return true}else return false}catch(d){return false}};a.prototype.getMinutes=function(){return this.getDate().getMinutes()};a.prototype.setSeconds=function(a,c){try{a=a*1;if(typeof c!=="undefined"&&!c)if(a>60)return false;var b=new Date(this.getDate().getTime());b.setSeconds(a);if(this._isValidDate(b)){this._internalSetDate(b);return true}else return false}catch(d){return false}};a.prototype.getSeconds=function(){return this.getDate().getSeconds()};a.prototype.setDayOfWeek=function(a){try{a=a*1;var b=a-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+b,true)}catch(c){return false}};a.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1};a.prototype.handlePattern=function(c){var a=new RegExp("y{3,4}"),b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(10));return true}a=new RegExp("y{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(2));return true}a=new RegExp("y{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(1));return true}a=new RegExp("d{4,4}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(101));return true}a=new RegExp("d{3,3}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(100));return true}a=new RegExp("d{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(30));return true}a=new RegExp("d{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(31));return true}a=new RegExp("M{4,4}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(27));return true}a=new RegExp("M{3,3}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(26));return true}a=new RegExp("M{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(20));return true}a=new RegExp("M{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(25));return true}a=new RegExp("h{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(46));return true}a=new RegExp("h{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(45));return true}a=new RegExp("H{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(48));return true}a=new RegExp("H{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(47));return true}a=new RegExp("m{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(50));return true}a=new RegExp("m{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(51));return true}a=new RegExp("s{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(60));return true}a=new RegExp("s{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(61));return true}a=new RegExp("t{2,2}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(251));return true}a=new RegExp("t{1,1}");b=a.test(c);if(b){this.descriptors.push(this.createDescriptor(250));return true}return false};a.prototype.createDescriptor=function(d,c){var a=null,b=this.maskPartsCount++;switch(d){case-1:a=new M(this,b);a.liternal=c;break;case 20:a=new w(this,b);break;case 25:a=new x(this,b);break;case 26:a=new y(this,b);break;case 27:a=new z(this,b);break;case 30:a=new A(this,b);break;case 31:a=new B(this,b);break;case 100:a=new r(this,b);break;case 101:a=new s(this,b);break;case 10:a=new v(this,b);break;case 1:a=new K(this,b);break;case 2:a=new L(this,b);break;case 45:a=new C(this,b);break;case 46:a=new D(this,b);break;case 47:a=new E(this,b);break;case 48:a=new F(this,b);break;case 250:a=new t(this,b);break;case 251:a=new u(this,b);break;case 50:a=new G(this,b);break;case 51:a=new H(this,b);break;case 60:a=new I(this,b);break;case 61:a=new J(this,b)}return a};a.prototype.toString=function(){if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.inputWidget.isDateNull())return this.inputWidget.options.nullText;var d="",e=0,a,b,c;this.desPostions=new Array(0);for(a=0;a<this.descriptors.length;a++){this.descriptors[a].startIndex=d.length;b=""||this.descriptors[a].getText();d+=b;for(c=0;c<b.length;c++){this.desPostions.push({desc:this.descriptors[a],pos:c,text:b,length:b.length});e++;if(this.desPostions.length!==e)throw"Fatal Error !!!!!!!!!!!!!!!";}}return d};a.prototype.parseDate=function(b){var a;if(this.pattern==="dddd"||this.pattern==="ddd"||typeof b==="object")try{a=new Date(b);if(isNaN(a))a=new Date}catch(c){a=new Date}else{a=Globalize.parseDate(b,this.pattern,this._getCulture());if(!a)a=this._tryParseDate(b,this.pattern);if(!a)a=new Date}return a};a.prototype.set=function(a){this._internalSetDate(new Date(this.parseDate(a)));return true};a.prototype.haveEnumParts=function(){return false};a.prototype.removeLiterals=function(a){a=""+a+"";a=a.replace(new RegExp("[+]","g"),"");a=a.replace(new RegExp("[.]","g"),"");a=a.replace(new RegExp("[:]","g"),"");a=a.replace(new RegExp("[-]","g"),"");a=a.replace(new RegExp("[()=]","g"),"");return a};a.prototype.getFirstDelimiterPos=function(b,d){var c=0,a=0,e,f;while(c<d.length&&a<b.length){e=d.charAt(c);f=b.charAt(a);if(e===f)a++;else return a-1;c++}return b.length-1};a.prototype.findAlikeArrayItemIndex=function(d,f){for(var c=-1,e=99999,b,a=0;a<d.length;a++){b=d[a].toLowerCase().indexOf(f.toLowerCase());if(b!==-1&&b<e){e=b;c=a}}return c};a.prototype._isValidDate=function(a){return this.inputWidget._isValidDate(a)};a.prototype.isFieldSep=function(d,c){var b=c++,a;if(b<this.descriptors.length){a=this.descriptors[b];return a.type!==-1?false:d===a.text}return false};a.prototype.getPositionType=function(b){var a=this.desPostions[b];return a.desc.type};a.prototype.addToField=function(a,e){var f=this.fields[e],d,b,c;d=a;b={val:a,pos:0,offset:0,isreset:false};this.inputWidget.element.data("typing",true);c=f.setText(d,a.length===1?false:true,b);this.inputWidget.element.data("typing",false);return c};a.prototype.insertAt=function(c,k,b){if(typeof b==="undefined")b=new e.wijInputResult;b.testPosition=-1;var a,r,d,g,n,j,q,f,i,p,o,l,m,t,u,h,s;if(c.length===1){a=this.desPostions[k];if(a&&a.desc.type===-1)if(a.text===c){b.testPosition=k;b.hint=b.characterEscaped;return true}}r=c;d=k;c=this.removeLiterals(c);g=c;n=false;q=false;if(d>0&&g.length===1){d--;k=d;a=this.desPostions[d];n=true;if(a&&(a.desc.type===-1||a.desc.getText().length!==1)){k++;d++;n=false}}j=false;while(g.length>0&&d<this.desPostions.length){a=this.desPostions[d];if(a.desc.type===-1){d=d+a.length;continue}if(a.desc.needAdjustInsertPos()){f=g.substr(0,a.length-a.pos);f=a.text.slice(0,a.pos)+f+a.text.slice(a.pos+f.length,a.length);if(n)f=a.text+f;if(q)f=f+a.text;p=a.desc.getText().length;l="";try{if(c.length===1)if(!a.pos)l=c;else if(a.pos>0)l=f.substring(0,a.pos+1)}catch(v){}if(p===1&&f.length>1&&c.length===1)if(a.desc.type===31||a.desc.type===25)this._disableSmartInputMode=true;i={val:c,pos:a.pos,offset:0,isreset:false};j=a.desc.setText(f,c.length===1?false:true,i);this._disableSmartInputMode=false;if(!j&&typeof l!=="undefined"&&l.length>0&&(a.desc.type===26||a.desc.type===27||a.desc.type===100||a.desc.type===101||a.desc.type===250||a.desc.type===251))j=a.desc.setText(l,c.length===1?false:true,i);if(j){b.hint=b.success;b.testPosition=d+i.offset;if(c.length===1){m=a.desc.getText().length;o=a.pos;if(a.pos>m-1)o=m;t=m-p;if(t>0&&a.pos===p-1)o=m-1;u=this.toString();b.testPosition=a.desc.startIndex+o+i.offset}g=g.slice(a.length-a.pos,g.length)}else{b.hint=b.invalidInput;if(b.testPosition!==-1)b.testPosition=k;if(a.desc.type!==-1&&c.length===1)return false}d=d+a.length}else{h=this.getFirstDelimiterPos(g,r);if(h<0)h=0;f=g.substring(0,h+1);i={val:c,pos:a.pos,offset:0,isreset:false};j=a.desc.setText(f,c.length===1?false:true,i);if(j){b.hint=b.success;b.testPosition=d+i.offset;g=g.slice(h+1,g.length)}else{b.hint=b.invalidInput;if(b.testPosition!==-1)b.testPosition=k}if(h<0)h=0;s=h+1;d=d+s}}return j};a.prototype.removeAt=function(b,e,c){try{var a=this.desPostions[b],d,g,f,h,i=this.inputWidget,k=i.element,j=k.val().length;if(j===e+1&&b===0)i.isDeleteAll=true;if(a.desc.needAdjustInsertPos()){d="0";g=b;a.text=a.desc.getText();d=a.text.slice(0,a.pos)+d+a.text.slice(a.pos+d.length,a.length);f={val:d,pos:a.pos,offset:0,isreset:true,isfullreset:false};if(e-b+1>=a.length){f.isfullreset=true;b=b+a.length;g=b}h=a.desc.setText(d,false,f);if(h){c.hint=c.success;c.testPosition=g}else{c.hint=c.invalidInput;if(c.testPosition===-1)c.testPosition=b}}b<e&&this.removeAt(b+1,e,c);return true}catch(l){return false}};a.prototype.incEnumPart=function(){var a=this.fields[this.inputWidget.options.activeField];a&&a.inc();return true};a.prototype.decEnumPart=function(){var a=this.fields[this.inputWidget.options.activeField];a&&a.dec();return true};a.prototype.setValue=function(a){this.setDate(new Date(a instanceof Date?a.getTime():a));return true};a.prototype.getValue=function(){return this.getDate()};a.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?false:this.inputWidget?this.inputWidget.options.smartInputMode:true};a.prototype._getInt=function(g,e,d,f){for(var a,c=f;c>=d;c--){a=g.substring(e,e+c);if(a.length<d)return null;if(b.wij.charValidator.isDigit(a))return a}return null};a.prototype._tryParseDate=function(e,a){var g=this._getCulture().calendars,d,c,f,b;a=a||g.standard.patterns.d;if(a){if(a.indexOf("MMM")===-1&&a.indexOf("MMMM")===-1)a=a.replace("MM","M");a=a.replace("dd","d");a=a.replace("tt","a")}d=a.replace("yyyy","yy");c=g.standard["/"];f=[a,d,a.replace(new RegExp(c,"g"),"-"),d.replace(new RegExp(c,"g"),"-"),a.replace(new RegExp(c,"g"),"."),d.replace(new RegExp(c,"g"),".")];b=Globalize.parseDate(e,f,this._getCulture());if(b)return b;b=new Date(e);return b.toString()!=="Invalid Date"&&e&&e!==""?b:0};a.prototype._formatDate=function(a,f,e){var b=this;if(!a.valueOf())return"&nbsp;";var d=this.inputWidget._getCulture().calendars.standard,g=f.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(g){var f;switch(g){case"yyyy":return c(a.getFullYear(),4);case"MMMM":return e.dateTimeFormat.monthNames[a.getMonth()];case"MMM":return e.dateTimeFormat.abbreviatedMonthNames[a.getMonth()];case"MM":return b.paddingZero(a.getMonth()+1,2);case"M":return b.paddingZero(a.getMonth()+1,1);case"mm":return b.paddingZero(a.getMinutes(),2);case"m":return b.paddingZero(a.getMinutes(),1);case"dddd":return e.dateTimeFormat.dayNames[a.getDay()];case"ddd":return e.dateTimeFormat.abbreviatedDayNames[a.getDay()];case"dd":return b.paddingZero(a.getDate(),2);case"d":return b.paddingZero(a.getDate(),1);case"hh":f=a.getHours()%12;return b.paddingZero(f?f:12,2);case"h":f=a.getHours()%12;return b.paddingZero(f?f:12,1);case"HH":return b.paddingZero(a.getHours(),2);case"H":return b.paddingZero(a.getHours(),1);case"ss":return b.paddingZero(a.getSeconds(),2);case"s":return b.paddingZero(a.getSeconds(),1);case"tt":return a.getHours()<12?d.AM[0]:d.PM[0];case"t":return a.getHours()<12?d.AM[0].length>0?d.AM[0].charAt(0):"":d.PM[0].length>0?d.PM[0].charAt(0):"";case"a/p":return a.getHours()<12?"a":"p"}return"N"});return g};return a}(e.wijTextProvider),a;(function(a){a._map=[];a.liternal=-1;a.OneDigitYear=1;a.TwoDigitYear=2;a.FourDigitYear=10;a.TwoDigitMonth=20;a.Month=25;a.AbbreviatedMonthNames=26;a.MonthNames=27;a.TwoDigityDayOfMonth=30;a.DayOfMonth=31;a.AbbreviatedDayNames=100;a.DayNames=101;a.h=45;a.hh=46;a.H=47;a.HH=48;a.ShortAmPm=250;a.AmPm=251;a.mm=50;a.m=51;a.ss=60;a.s=61})(a||(a={}));var d=function(){function b(b,c){this.id=c;this.startIndex=0;this.name=null;this.type=a.liternal;this.maxLen=2;this._txtProvider=b;this.startIndex=0}b.prototype.getText=function(){return null};b.prototype.setText=function(){return false};b.prototype.inc=function(){};b.prototype.dec=function(){};b.prototype.needAdjustInsertPos=function(){return true};b.prototype.reachMaxLen=function(){var a=this.getText();do if(a.charAt(0)==="0")a=a.slice(1);else break;while(a.length>0);return a.length>=this.maxLen};return b}(),M=function(b){__extends(a,b);function a(a,c){b.call(this,a,c);this.liternal="";this.maxLen=100}a.prototype.getText=function(){return this.liternal};return a}(d),g=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()+1,true)};a.prototype.dec=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()-1,true)};a.prototype.setText=function(c,a,b){return this._txtProvider.setMonth(c,a,b)};return a}(d),w=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="Two-digit month";this.type=a.TwoDigitMonth}b.prototype.getText=function(){var a=""+this._txtProvider.getMonth()+"";return a.length===1?"0"+a:a};return b}(g),x=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="month";this.type=a.Month}b.prototype.getText=function(){return""+this._txtProvider.getMonth()+""};return b}(g),y=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="AbbreviatedMonthNames";this.type=a.AbbreviatedMonthNames;this.maxLen=a.AbbreviatedMonthNames}b.prototype.getText=function(){var b=this._txtProvider.getMonth(),a=this._txtProvider._getCulture();return a.calendars.standard.months.namesAbbr[b-1]};b.prototype.setText=function(d,b,c){var a=-1,e=this._txtProvider.inputWidget._getCulture().calendars.standard;a=this._txtProvider.findAlikeArrayItemIndex(e.months.namesAbbr,d);return a===-1?false:this._txtProvider.setMonth(a+1,b,c)};return b}(g),z=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="MonthNames";this.type=a.MonthNames;this.maxLen=100}b.prototype.getText=function(){var b=this._txtProvider.getMonth(),a=this._txtProvider._getCulture();return a.calendars.standard.months.names[b-1]};b.prototype.setText=function(e,d,b){var a=-1,c;if(b&&b.isfullreset)a=1;else{c=this._txtProvider._getCulture();a=this._txtProvider.findAlikeArrayItemIndex(c.calendars.standard.months.names,e);if(a===-1)return false}return this._txtProvider.setMonth(a+1,d,b)};return b}(g),f=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()+1,true)};a.prototype.dec=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()-1,true)};a.prototype.setText=function(c,a,b){return this._txtProvider.setDayOfMonth(c,a,b)};return a}(d),A=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="Two-digit day of month";this.type=a.TwoDigityDayOfMonth}b.prototype.getText=function(){return c(this._txtProvider.getDayOfMonth())};return b}(f),B=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="Day of month";this.type=a.DayOfMonth}b.prototype.getText=function(){var a=this._txtProvider.getDayOfMonth();return""+a+""};return b}(f),r=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="AbbreviatedDayNames";this.type=a.AbbreviatedDayNames;this.maxLen=100}b.prototype.getText=function(){var b=this._txtProvider.getDayOfWeek(),a=this._txtProvider._getCulture();return a.calendars.standard.days.namesShort[b-1]};b.prototype.setText=function(c){var a=-1,b=this._txtProvider._getCulture();a=this._txtProvider.findAlikeArrayItemIndex(b.calendars.standard.days.namesShort,c);return a===-1?false:this._txtProvider.setDayOfWeek(a+1)};b.prototype.needAdjustInsertPos=function(){return false};return b}(f),s=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="DayNames";this.type=a.DayNames;this.maxLen=100}b.prototype.getText=function(){var b=this._txtProvider.getDayOfWeek(),a=this._txtProvider._getCulture();return a.calendars.standard.days.names[b-1]};b.prototype.setText=function(c){var a=-1,b=this._txtProvider._getCulture();a=this._txtProvider.findAlikeArrayItemIndex(b.calendars.standard.days.names,c);return a===-1?false:this._txtProvider.setDayOfWeek(a+1)};b.prototype.needAdjustInsertPos=function(){return false};return b}(f),k=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){this._txtProvider.setYear(this._txtProvider.getYear()+1,null,true)};a.prototype.dec=function(){this._txtProvider.setYear(this._txtProvider.getYear()-1,null,true)};return a}(d),v=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="Four-digit year";this.type=a.FourDigitYear;this.maxLen=4}b.prototype.getText=function(){return c(this._txtProvider.getYear(),4)};b.prototype.setText=function(k,l,a){if(this._txtProvider._isSmartInputMode()&&a){var e=2e3,f,d,j,b,g,c,h,i;if(this._txtProvider.inputWidget.options.startYear)e=this._txtProvider.inputWidget.options.startYear;d=e+100-1;f=this._txtProvider.paddingZero(e,4);d=this._txtProvider.paddingZero(d,4);if(a.pos===0||a.pos===1){j=new Date;b=this._txtProvider.paddingZero(this._txtProvider.getYear(),4);if(b.charAt(0)==="0"&&b.charAt(1)==="0"&&a.pos<=1){g=a.val;c="00";if(g>=5)c=f.slice(0,2);else c=d.slice(0,2);h=a.val+b.slice(3,4);i=c+h;a.offset=2-a.pos;this._txtProvider.setYear(i,a);return true}}}return this._txtProvider.setYear(k,a)};return b}(k),i=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.setText=function(a,j,i){a=c(a);var b=c(this._txtProvider.getYear(),4),g,d,f,e,h;if(a==="00"){g=this._txtProvider.getMonth();d=this._txtProvider.getDayOfMonth();f=this._txtProvider.getHours();e=this._txtProvider.getMinutes();h=this._txtProvider.getSeconds();if(g===1&&d===1&&!f&&!e&&!h){b="0001";a="01"}}if(b.length>=2)b=b.substr(0,2)+a.substr(0,2);return this._txtProvider.setYear(b,i)};return a}(k),K=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="One-digit year";this.type=a.OneDigitYear}b.prototype.getText=function(){var a=c(this._txtProvider.getYear());if(a[0]==="0")a=a[1];return a};return b}(i),L=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="Two-digit year";this.type=a.TwoDigitYear}b.prototype.getText=function(){return c(this._txtProvider.getYear(),2)};return b}(i),o=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){this._txtProvider.setHours(this._txtProvider.getHours()+1,true)};a.prototype.dec=function(){this._txtProvider.setHours(this._txtProvider.getHours()-1,true)};return a}(d),j=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.setText=function(a,b){var c=this._txtProvider.getHours();if(c>12)a=a*1+12;return this._txtProvider.setHours(a,b)};return a}(o),C=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="h";this.type=a.h}b.prototype.getText=function(){var a=this._txtProvider.getHours();if(a>12)a=a-12;else if(a===0)a=12;return""+a+""};return b}(j),D=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="hh";this.type=a.hh}b.prototype.getText=function(){var a=this._txtProvider.getHours();if(a>12)a-=12;else if(a===0)return"12";return c(a)};return b}(j),h=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.setText=function(b,a){return this._txtProvider.setHours(b,a)};return a}(o),E=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="H";this.type=a.H}b.prototype.getText=function(){var a=this._txtProvider.getHours();return""+a+""};return b}(h),F=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="HH";this.type=a.HH}b.prototype.getText=function(){return c(this._txtProvider.getHours())};return b}(h),n=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){var a=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(a,true)};a.prototype.dec=function(){var a=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(a,true)};a.prototype.setText=function(b){var a;if(b.toLowerCase().indexOf("a")>=0){a=this._txtProvider.getHours()%12;this._txtProvider.setHours(a,true)}else if(b.toLowerCase().indexOf("p")>=0){a=this._txtProvider.getHours()%12+12;this._txtProvider.setHours(a,true)}return true};return a}(d),t=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="t";this.type=a.ShortAmPm}b.prototype.getText=function(){var c=this._txtProvider.getHours(),b=this._txtProvider._getCulture(),a=b.calendars.standard[c<12?"AM":"PM"][0];return a.charAt(0)||" "};return b}(n),u=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="tt";this.type=a.AmPm}b.prototype.getText=function(){var c=this._txtProvider.getHours(),a="",b=this._txtProvider._getCulture();if(c<12)a=b.calendars.standard.AM[0];else a=b.calendars.standard.PM[0];if(a.length<=0)a=" ";return a};return b}(n),l=function(b){__extends(a,b);function a(a,c){b.call(this,a,c);this.delta=1}a.prototype.inc=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()+this.delta,true)};a.prototype.dec=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()-this.delta,true)};a.prototype.setText=function(b,c,a){if(a&&a.isfullreset)b="0";return this._txtProvider.setMinutes(b,c)};return a}(d),G=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="mm";this.type=a.mm}b.prototype.getText=function(){return c(this._txtProvider.getMinutes())};return b}(l),H=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="m";this.type=a.m;this.delta=12}b.prototype.getText=function(){return this._txtProvider.getMinutes().toString()};return b}(l),m=function(b){__extends(a,b);function a(a,c){b.call(this,a,c)}a.prototype.inc=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()+12,true)};a.prototype.dec=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()-12,true)};a.prototype.setText=function(b,c,a){if(a&&a.isfullreset)b="0";return this._txtProvider.setSeconds(b,c)};return a}(d),I=function(d){__extends(b,d);function b(b,c){d.call(this,b,c);this.name="ss";this.type=a.ss}b.prototype.getText=function(){return c(this._txtProvider.getSeconds())};return b}(m),J=function(c){__extends(b,c);function b(b,d){c.call(this,b,d);this.name="s";this.type=a.s}b.prototype.getText=function(){return this._txtProvider.getSeconds().toString()};return b}(m)})(wijmo||(wijmo={}));