/*
 *
 * Wijmo Library 2.3.7
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 **/
(function(a){"use strict";a.widget("wijmo.wijlightbox",{options:{textPosition:"overlay",width:600,height:400,autoSize:true,player:"",groupItems:null,rootUrl:"",ctrlButtons:"",dialogButtons:"close",counterType:"default",counterFormat:"[i] of [n]",counterLimit:10,showCounter:true,showNavButtons:true,showTimer:false,controlsPosition:"inside",showControlsOnHover:true,clickPause:false,keyNav:false,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(c){var b=a(this).css(c).offset().top;b<0&&a(this).css("top",c.top-b)}},zIndex:1e3,closeOnEscape:true,closeOnOuterClick:true,autoPlay:false,delay:2e3,loop:true,cookie:null,transAnimation:{animated:"fade",duration:400,easing:"easeInQuad"},slideDirection:"horizontal",resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"easeInQuad"},textHideOption:{duration:300,easing:"easeInQuad"},showMovieControls:true,autoPlayMovies:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",beforeShow:null,show:null,open:null,beforeClose:null,close:null},_keyDownHandler:function(b){var d=this.options,c=this;if(b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){if(c._isFullSize())c._toggleFullSize();else d.closeOnEscape&&c._close();b.preventDefault();return}if(d.keyNav)if(b.keyCode)switch(b.keyCode){case a.ui.keyCode.LEFT:case a.ui.keyCode.DOWN:c.back();b.preventDefault();break;case a.ui.keyCode.RIGHT:case a.ui.keyCode.UP:c.next();b.preventDefault();break;case a.ui.keyCode.HOME:d.groupItems.length>0&&c.show(0);b.preventDefault();break;case a.ui.keyCode.END:d.groupItems.length>0&&c.show(d.groupItems.length-1);b.preventDefault()}},_create:function(){var b=this.options,c=this;if(window.wijmoApplyWijTouchUtilEvents)a=window.wijmoApplyWijTouchUtilEvents(a);if(!b.groupItems)b.groupItems=[];this._defaults={transAnimation:{animated:"fade",duration:400,easing:"easeInQuad"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"easeInQuad"},textHideOption:{duration:300,easing:"easeInQuad"}};this._parse();this.container=a("<div/>").addClass("wijmo-wijlightbox ui-widget wijmo-wijlightbox-controls-"+b.controlsPosition).css("z-index",b.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",a.proxy(c,"_keyDownHandler")).appendTo(document.body).hide();this.frame=a("<div></div>").addClass("wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix").appendTo(this.container);this.content=a("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame);if(b.activeIndex===undefined){if(typeof b.activeIndex!=="number"&&b.cookie)b.activeIndex=parseInt(c._cookie(),10);b.activeIndex=b.activeIndex||(b.groupItems.length?0:-1)}else if(b.activeIndex===null)b.activeIndex=-1;b.activeIndex=b.activeIndex>=0&&b.groupItems[b.activeIndex]||b.activeIndex<0?b.activeIndex:0;this._initClickBehavior();this._createTimerBar();this._createDialogButtons();this._createCtrlButtons();this._createText();this._createCounter();this._refreshCounter();this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){c._addState("hover",a(this))},mouseout:function(){c._removeState("hover",a(this))},mousedown:function(){c._addState("active",a(this))},mouseup:function(){c._removeState("active",a(this))}});this._groupMode()&&this._createNavButtons();this._initHoverBehavior();this.container.width(this.frame.outerWidth())},destroy:function(){var c=this.options,b=this;this._hideWaiting();this._hideOverlay();c.cookie&&this._cookie(null,c.cookie);this.container.remove();a.Widget.prototype.destroy.apply(b,arguments);return b},_setOption:function(c,b){a.Widget.prototype._setOption.apply(this,arguments);switch(c){case"groupItems":if(this.options.activeIndex>=b.length)this.show(b.length-1);else if(this.options.activeIndex<0&&b.length)this.show(0);else this.show(this.options.activeIndex);break;case"activeIndex":this.show(b);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior()}},_initClickBehavior:function(){var c=this.options,b=this;this.content.unbind("click");if(c.clickPause)this._groupMode()&&this.content.click(function(){b[!b.isPlaying()?"play":"stop"]()});else this._groupMode()&&this.content.click(function(d){if(b.isPlaying())return false;var c=a.extend({},a(this).offset(),{width:a(this).outerWidth(true),height:a(this).outerHeight(true)});if(d.pageX>=c.left&&d.pageX<c.left+c.width/2)!b.backBtn.hasClass("ui-state-disabled")&&b.back();else!b.nextBtn.hasClass("ui-state-disabled")&&b.next()})},_initHoverBehavior:function(){var b=this.options,a=this;this.frame.unbind(".wijlightbox");b.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(a.container.data("moving.wijlightbox"))return false;a._showAccessories(true)},"mouseleave.wijlightbox":function(){if(a.container.data("moving.wijlightbox"))return false;a._hideAccessories(true)},"mousemove.wijlightbox":function(){a.container.data("moving.wijlightbox")===false&&a.container.data("accessvisible.wijlightbox")===false&&a.frame.trigger("mouseenter")}})},_getPlugins:function(){var c=this.container.data("plugins.wijlightbox"),b,d,e;if(!c){c={};if(window.navigator.plugins&&window.navigator.plugins.length){b=[];a.each(window.navigator.plugins,function(c,a){b.push(a.name)});b=b.join(",");e=b.indexOf("Flip4Mac")>-1;c={fla:b.indexOf("Shockwave Flash")>-1,qt:b.indexOf("QuickTime")>-1,wmp:!e&&b.indexOf("Windows Media")>-1,f4m:e}}else{d=function(b){var a;try{a=new ActiveXObject(b)}catch(c){}return!!a};c={fla:d("ShockwaveFlash.ShockwaveFlash"),qt:d("QuickTime.QuickTime"),wmp:d("wmplayer.ocx"),f4m:false}}this.container.data("plugins.wijlightbox",c)}return c},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_getFragmentId:function(d){var f=/^#.+/,b=a(d).attr("href")||"",c=b.split("#")[0],e=a("base")[0];if(c&&(c===window.location.toString().split("#")[0]||e&&c===e.href)){b=d.hash;d.href=b}return f.test(b)?this._sanitizeSelector(b):""},_parseLink:function(j){var f=this,e=this.options,d=a(j),b={},g,c,h,i,k=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(d.length>0&&d[0].tagName.toLowerCase()==="a"){g=d.attr("rel");a.each(k,function(c,a){b[a]=d.attr(a)||""});if(!b.href)return;if(!b.player)b.player=e.player||f._getPlayerName(b.href);c=d.find("img");if(c&&c.length===0)c=d;if(c&&c.length>=1){a.each(["title","alt"],function(d,a){b[a]=c.attr(a)||b[a]});b.img=c}if(g){h=g.match(/\[(.*?)\]/);if(h)b.gallery=h[1]||b.gallery;a.each(g.split(";"),function(d,c){var a=c.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);if(a)b[a[1]]=a[2]})}if(b.player==="inline")b.href=f._getFragmentId(j);if(!b.gallery)d.bind({click:function(a){a.stopPropagation();a.preventDefault();!e.disabled&&f._open(c,b);return false}});else{i=e.groupItems.length;e.groupItems[i]=b;d.bind({click:function(a){a.stopPropagation();a.preventDefault();!e.disabled&&f._open(c,i);return false}})}}},_parse:function(){var a=this;this._parseLink(this.element);this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(){a._parseLink(this)})},_showAccessories:function(a){this.container.data("accessvisible.wijlightbox",true);this._showNavButtons(a);this._showToolboxButtons(a);this._showCounter(a)},_hideAccessories:function(a){this.container.data("accessvisible.wijlightbox",false);this._hideNavButtons(a);this._hideToolboxButtons(a);this._hideCounter(a)},_groupMode:function(){var a=this.options;return a.groupItems&&a.groupItems.length>1},_resetText:function(){this._removeText();this._createText()},_createText:function(i){var g=this,c=g.options,e,b,d,f,h;if(c.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;e=c.textPosition.toLowerCase();b=a("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+e+" ui-widget-content ui-helper-clearfix");f=a("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+e+" ui-helper-clearfix").appendTo(b);h=a("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+e+" ui-helper-clearfix").appendTo(b);if(c.textPosition==="inside")b.addClass("ui-widget-content ui-helper-clearfix").width(this.frame.width()).appendTo(this.frame);else if(c.textPosition==="outside")b.addClass("ui-widget-content ui-corner-all ui-helper-clearfix").width(this.frame.width()).appendTo(this.container);else if(c.textPosition==="overlay"||c.textPosition==="titleOverlay"){d=a("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+e+" ui-helper-clearfix").width(this.frame.width()).appendTo(this.frame);b.width(this.frame.width()).appendTo(this.frame);c.textPosition==="titleOverlay"&&b.bind({mouseenter:function(){d.stop();b.stop();var e=f.outerHeight(true)+h.outerHeight(true),i=a.extend({},g._defaults.textShowOption,c.textShowOption,{queue:false});d.animate({height:e},i);b.animate({height:e},i)},mouseleave:function(){d.stop();b.stop();var e=f.height(),h=a.extend({},g._defaults.textHideOption,c.textHideOption,{queue:false});d.animate({height:e},h);b.animate({height:e},h)}})}this._refreshText(i)},_removeText:function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},_getActiveItem:function(){var a=this.options;return a.groupItems&&a.groupItems.length&&a.activeIndex>=0&&a.activeIndex<a.groupItems.length?a.groupItems[a.activeIndex]:null},_refreshText:function(l){var m=this,c=this.options,e,b,j,i,d;if(c.textPosition==="none")return;e=this.container.data("item.wijlightbox")||this._getActiveItem();if(!e)return;b=this.container.find(".wijmo-wijlightbox-text");j=this.container.find(".wijmo-wijlightbox-title");i=this.container.find(".wijmo-wijlightbox-detail");d=this.container.find(".wijmo-wijlightbox-mask");d.stop();b.stop();j.html(e.title);i.html(e.alt);c.textPosition==="outside"&&b.width(this.frame.width());var g=j.outerHeight(true),f=i.outerHeight(true),h=a.extend({},m._defaults.textShowOption,c.textShowOption,{queue:false});if(c.textPosition==="overlay"||c.textPosition==="titleOverlay"){var k=g+(c.textPosition==="overlay"?f:0);b.height(0);d.height(0);b.animate({height:k},h);d.animate({height:k},h)}else if(!!l)b.height(g+f);else{b.height(0);b.animate({height:g+f},h)}},_addState:function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)},_removeState:function(a,b){b.removeClass("ui-state-"+a)},_createNavButtons:function(){var b=this,c=this.options;if(!c.showNavButtons||!this._groupMode()){this._removeNavButtons();return}if(!this.backBtn)this.backBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev ui-state-default"+(c.controlsPosition==="inside"?" ui-corner-right":" ui-corner-left")).append("<span class='ui-icon ui-icon-triangle-1-w'></span>").hide().appendTo(this.frame).bind({click:function(){!a(this).hasClass("ui-state-disabled")&&b.back();return false},mouseover:function(){b._addState("hover",a(this))},mouseout:function(){b._removeState("hover",a(this))},mousedown:function(){b._addState("active",a(this))},mouseup:function(){b._removeState("active",a(this))}});if(!this.nextBtn)this.nextBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next ui-state-default"+(c.controlsPosition==="inside"?" ui-corner-left":" ui-corner-right")).append("<span class='ui-icon ui-icon-triangle-1-e'></span>").hide().appendTo(this.frame).bind({click:function(){!a(this).hasClass("ui-state-disabled")&&b.next();return false},mouseover:function(){b._addState("hover",a(this))},mouseout:function(){b._removeState("hover",a(this))},mousedown:function(){b._addState("active",a(this))},mouseup:function(){b._removeState("active",a(this))}})},_removeNavButtons:function(){if(this.backBtn){this.backBtn.remove();this.backBtn=undefined}if(this.nextBtn){this.nextBtn.remove();this.nextBtn=undefined}},_refreshNavButtons:function(){var b=this.options,a;if(this.backBtn){a=b.activeIndex===0?"addClass":"removeClass";this.backBtn[a]("ui-state-disabled")}if(this.nextBtn){a=b.activeIndex>=b.groupItems.length-1?"addClass":"removeClass";this.nextBtn[a]("ui-state-disabled")}},_showNavButtons:function(b){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(true,true).fadeIn(b?600:0,function(){a(this).css("opacity","")})},_hideNavButtons:function(a){this.container.find(".wijmo-wijlightbox-button").stop(true,true).fadeOut(a?600:0)},_createToolbox:function(){if(!this.toolBox)this.toolBox=a("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame)},_showToolboxButtons:function(b){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(true,true).fadeIn(b?600:0,function(){a(this).css("opacity","")})},_hideToolboxButtons:function(a){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(true,true).fadeOut(a?600:0)},_createCtrlButtons:function(){var b=this,c=this.options;if(!c.ctrlButtons||c.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var d=c.ctrlButtons.split("|");if(d.length===1&&d[0]===c.ctrlButtons)d=c.ctrlButtons.split(",");a.each(d,function(e,d){d=a.trim(d);if(d==="play"&&!this.playBtn)b.playBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-play ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-play'></span>").hide().click(function(){if(b.isPlaying())b.stop();else{c.activeIndex>=c.groupItems.length-1&&b.show(0);b.play()}return false});else if(d==="stop"&&!this.stopBtn)b.stopBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-stop ui-state-default ui-state-disabled ui-corner-all").append("<span class='ui-icon ui-icon-stop'></span>").hide().click(function(){if(b.isPlaying()){b.stop();b.show(0)}return false})});this.stopBtn&&this.stopBtn.appendTo(this.toolBox);this.playBtn&&this.playBtn.appendTo(this.toolBox)},_removeCtrlButtons:function(){if(this.playBtn){this.playBtn.remove();this.playBtn=undefined}if(this.stopBtn){this.stopBtn.remove();this.stopBtn=undefined}},_refreshCtrlButtons:function(){if(this.playBtn){var a=this.playBtn.find(".ui-icon");if(a){a.removeClass("ui-icon-play ui-icon-pause");a.addClass(this.isPlaying()?"ui-icon-pause":"ui-icon-play")}}this.stopBtn&&this.stopBtn[!this.isPlaying()?"addClass":"removeClass"]("ui-state-disabled")},_createDialogButtons:function(){var d=this,c=this.options,b;if(!c.dialogButtons||c.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox();b=c.dialogButtons.split("|");if(b.length===1&&b[0]===c.dialogButtons)b=c.dialogButtons.split(",");a.each(b,function(c,b){b=a.trim(b);if(b==="close"&&!this.closeBtn)d.closeBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-close'></span>").hide().click(function(){d._close();return false});else if(b==="fullSize"&&!this.fullBtn)d.fullBtn=a("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-arrow-4-diag'></span>").hide().click(function(){d._toggleFullSize();return false})});this.closeBtn&&this.closeBtn.appendTo(this.toolBox);this.fullBtn&&this.fullBtn.appendTo(this.toolBox);if(!this.btnSep)this.btnSep=a("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox)},_removeDialogButtons:function(){if(this.closeBtn){this.closeBtn.remove();this.closeBtn=undefined}if(this.fullBtn){this.fullBtn.remove();this.fullBtn=undefined}},_refreshDialogButtons:function(){if(this.fullBtn){var a=this.fullBtn.find(".ui-icon");if(a){a.removeClass("ui-icon-arrow-4-diag ui-icon-newwin");a.addClass(this._isFullSize()?"ui-icon-newwin":"ui-icon-arrow-4-diag")}}},_createTimerBar:function(){var b=this,c=b.options;if(!c.showTimer||!b._groupMode()){b._removeTimerBar();return}b._createToolbox();if(!b.timerBar){b.timerBar=a("<div></div>").addClass("wijmo-wijlightbox-timerbar ui-widget-content ui-priority-secondary ui-corner-all").appendTo(b.toolBox);b.timerMeter=a("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value ui-widget-content ui-corner-all").appendTo(b.toolBox)}},_removeTimerBar:function(){if(this.timerMeter){this.timerMeter.remove();this.timerMeter=undefined}if(this.timerBar){this.timerBar.remove();this.timerBar=undefined}},_createCounter:function(){var b=this,c=b.options;if(!c.showCounter||!b._groupMode()){b._removeCounter();return}if(!b.counter)b.counter=a("<div></div>").addClass("wijmo-wijlightbox-counter ui-state-default"+(c.controlsPosition==="inside"?"  ui-corner-tl":" ui-corner-all")).hide().appendTo(b.frame)},_removeCounter:function(){if(this.counter){this.counter.remove();this.counter=undefined}},_refreshCounter:function(d){var i=this,b=this.options,f="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(b.showCounter&&b.groupItems.length>1&&this.counter){if(d===undefined)d=b.activeIndex;var h=b.groupItems.length;if(b.counterType==="sequence"){var c=0,g=h,e=parseInt(b.counterLimit,10)||0;if(e>=2&&e<h){var k=Math.floor(e/2);c=Math.min(g-e,Math.max(c,d-k));g=Math.min(g,c+e)}while(c!==g)a("<a></a>").addClass("wijmo-wijlightbox-counter-item ui-corner-all ui-state-default"+(c===d?" wijmo-wijlightbox-counter-active ui-state-active":"")).text(++c).appendTo(this.counter);this.counter.find("a").click(function(){if(a(this).hasClass("wijmo-wijlightbox-counter-active"))return false;i.show(parseInt(a(this).text(),10)-1);return false})}else{var j=b.counterFormat||"[i] of [n]";f=j.replace("[i]",d+1);f=f.replace("[n]",h);a("<span></span>").text(f).appendTo(this.counter)}}},_showCounter:function(b){this.container.find(".wijmo-wijlightbox-counter").stop(true,true).fadeIn(b?600:0,function(){a(this).css("opacity","")})},_hideCounter:function(a){this.container.find(".wijmo-wijlightbox-counter").stop(true,true).fadeOut(a?600:0)},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name);return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_showOverlay:function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new a.wijmo.wijlightbox.overlay(this))},_hideOverlay:function(){var a=this.container.data("overlay.wijlightbox");if(!a)return;a.close();this.container.removeData("overlay.wijlightbox")},_hasOverlay:function(){return this.container.hasData("overlay.wijlightbox")},_showWaiting:function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new a.wijmo.wijlightbox.overlay(this,true))},_hideWaiting:function(){var a=this.container.data("waiting.wijlightbox");if(!a)return;a.close();this.container.removeData("waiting.wijlightbox")},_hasWaiting:function(){return this.container.hasData("waiting.wijlightbox")},_getUrl:function(c){var d=this.options,b=typeof c==="string"?c:c.href,a=d.rootUrl;if(a&&a.length>0){if(a.indexOf("//")===-1)a=window.location.protocol+"//"+window.location.host+(a.startsWith("/")?"":"/")+a;if(a.substr(a.length-1,1)!=="/")a+="/";b=a+(b.substr(0,1)==="/"?b.substr(1):b)}return b},_preload:function(){for(var a=this.options,b=Math.max(0,a.activeIndex);b<Math.min(a.activeIndex+5,a.groupItems.length);b++)if(!a.groupItems[b].image){a.groupItems[b].image=new Image;a.groupItems[b].image.src=this._getUrl(a.groupItems[b])}},_slideTo:function(o,m,l,e,j){var n=this.options,i=this,b=o.getElement(),c,h,g,d,f,k;if(b.parent().is(".wijmo-wijlightbox-aniwrapper"))c=b.parent();else{c=a.effects.createWrapper(b).css({overflow:"hidden"});c.removeClass("ui-effects-wrapper");c.addClass("wijmo-wijlightbox-aniwrapper")}if(c.parent().is(".wijmo-wijlightbox-aniwrapper"))h=c.parent();else{h=a.effects.createWrapper(c).css({overflow:"hidden"});h.removeClass("ui-effects-wrapper");h.addClass("wijmo-wijlightbox-aniwrapper")}g=n.slideDirection||"horizontal";d=b.outerWidth();f=b.outerHeight();if(g==="horizontal"){b.width(d).css("float",e?"left":"right");c.width(2*d).css({left:e?0:-1*d,position:"absolute"})}else{b.height(f);c.width(d).css({top:e?0:-1*f,position:"absolute"}).height(2*f)}m.appendTo(c);k=m.getElement();if(g==="horizontal")k.width(d).css("float",e?"left":"right");else k.height(f);this.container.data("animating.wijlightbox",true);c.effect("slide",{mode:"hide",direction:g==="horizontal"?e?"left":"right":e?"up":"down",easing:l.easing,distance:g==="horizontal"?d:f,duration:l.duration},function(){b=c.children(":last");while(b.parent().is(".wijmo-wijlightbox-aniwrapper"))b.parent().replaceWith(b);b.css({"float":"",width:"",height:""});if(n.autoSize&&!i._isFullSize())i._resize(j);else{a.isFunction(j)&&j.apply(i);i._refreshText()}})},_moveFrom:function(e,c,d){var b=this,g=this.options,f;if(a.isFunction(c)){d=c;c=a.extend({},b._defaults.resizeAnimation,g.resizeAnimation)}else c=a.extend({},b._defaults.resizeAnimation,g.resizeAnimation,c);b._removeText();if(c.animated==="none"||c.duration<=0){b._createText();a.isFunction(d)&&d.apply(b);this.container.data("moving.wijlightbox",false);return}f=a.extend({width:b.frame.width(),height:b.frame.height()},b.container.offset());b.frame.width(e.width).height(e.height);b.container.css({left:e.left,top:e.top,width:b.frame.outerWidth(),position:"absolute",opacity:""});b._moveTo(f,c,function(){b.frame.width(f.width);b.container.width(b.frame.outerWidth());b._createText();b.container.data("moving.wijlightbox",false);a.isFunction(d)&&d.apply(b)})},_moveTo:function(d,b,f){var c=this,i=this.options;if(a.isFunction(b)){f=b;b=a.extend({},c._defaults.resizeAnimation,i.resizeAnimation)}else b=a.extend({},c._defaults.resizeAnimation,i.resizeAnimation,b);var g=b.duration/2,e=b.animated,h=c._isOpen(),l=e==="wh"?{left:d.left}:{top:d.top},m=e==="wh"?{top:d.top}:{left:d.left},j=e==="wh"?{width:d.width}:{height:d.height},k=e==="wh"?{height:d.height}:{width:d.width};if(e==="wh"||e==="hw"){h&&c.container.animate(l,{duration:g,easing:b.easing,queue:true});c.frame.animate(j,{duration:g,easing:b.easing,complete:function(){h&&c.container.animate(m,{duration:g,easing:b.easing,queue:true});c.frame.animate(k,{duration:g,easing:b.easing,complete:function(){c.container.data("moving.wijlightbox",false);a.isFunction(f)&&f.apply(c)}})}});return}h&&c.container.animate({left:d.left,top:d.top},{duration:b.duration,easing:b.easing,queue:true});c.frame.animate({width:d.width,height:d.height,opacity:1},{duration:b.duration,easing:b.easing,complete:function(){c.container.data("moving.wijlightbox",false);a.isFunction(f)&&f.apply(c)}})},show:function(a){this._show(a);return this},adjustPosition:function(){this._position()},_resize:function(c){var b=this,d=a.extend({},b.container.offset(),{width:b.frame.width(),height:b.frame.height()});b._size();b._isOpen()&&b._position();b._moveFrom(d,c)},_onAfterShow:function(){var a=this,b=this.options,c;a._refreshNavButtons();a.container.data("animating.wijlightbox",false);!b.modal&&a._hideOverlay();c={index:b.activeIndex,item:b.groupItems[b.activeIndex]};a._trigger("show",null,c);a._startTimer()},_show:function(f,g,i){var b=this,c=this.options,k,d;if(this.container.data("showing.wijlightbox")){k=[function(){b._show(f,g,i)}];this.container.queue("showqueue",k);return this}d=c.activeIndex;if(!a.isPlainObject(f)){d=f;if(d<0||d>=c.groupItems.length)return this;f=c.groupItems[d]}f&&this.container.data("item.wijlightbox",f);this._groupMode()&&this._preload();if(a.isFunction(g)){i=g;g=undefined}if(!i)i=b._onAfterShow;var m={index:d,item:f};if(b._trigger("beforeShow",null,m)===false)return this;this.container.data("showing.wijlightbox",true);var j=function(){a.isFunction(i)&&i.apply(b);b.container.data("showing.wijlightbox",false);b.container.dequeue("showqueue");b.container.clearQueue("showqueue")};b._refreshCounter(d);var h=this.container.data("player.wijlightbox"),e,l=function(){b.container.data("playerwidth.wijlightbox",e.width);b.container.data("playerheight.wijlightbox",e.height);var f=a.extend({},b._defaults.transAnimation,c.transAnimation);if(c.activeIndex===d||f.animated==="none"||f.duration<=0||!b._isOpen()){c.activeIndex=d;h&&h.remove();e.appendTo(b.content);b._refreshText();j();return}c.cookie&&b._cookie(c.activeIndex,c.cookie);if(f.animated==="slide"){g=g===undefined?d>c.activeIndex:g;b._slideTo(h,e,f,g,j);c.activeIndex=d}else{c.activeIndex=d;var k=function(){if(e){e.appendTo(b.content,true);e.fadeIn(f.duration,j)}};a.browser.msie&&b.frame.trigger("mouseleave");var i=function(){h&&h.remove();if(c.autoSize&&!b._isFullSize())b._resize(k);else{k();b._refreshText()}};if(h)h.fadeOut(f.duration*.4,i);else i()}};e=this._createPlayer(f,l);return this},next:function(){var b=this.options;if(!this._groupMode())return false;var a=b.activeIndex+1;if(b.loop)a=a%b.groupItems.length;if(a<b.groupItems.length){this._show(a,true);return true}return false},back:function(){var b=this.options;if(!this._groupMode())return false;var a=b.activeIndex-1;if(b.loop)a=a<0?b.groupItems.length-1:a;if(a>=0){this._show(a,false);return true}return false},isPlaying:function(){return!!this.container.data("playing.wijlightbox")},_startTimer:function(){if(!this.isPlaying()||!this._groupMode())return;var b=this.options,a=this,c;if(b.showTimer===true){!this.timerMeter&&this._createTimerBar();c=this.timerBar.width();a.timerMeter.width("0");a.timerMeter.animate({width:c},b.delay,function(){a.isPlaying()&&!a.next()&&a.stop()})}else window.setTimeout(function(){a.isPlaying()&&!a.next()&&a.stop()},b.delay)},play:function(){if(!this._groupMode())return false;!this.container.data("playing.wijlightbox")&&this.container.data("playing.wijlightbox",true);this._refreshCtrlButtons();this._hideNavButtons();this._startTimer()},stop:function(){this.container.removeData("playing.wijlightbox");this._refreshCtrlButtons();this._removeTimerBar()},_size:function(d,i){var g=this.options,c=g.width,b=g.height,f=g.autoSize?this.container.data("playerwidth.wijlightbox")||c:c,e=g.autoSize?this.container.data("playerheight.wijlightbox")||b:b,h,j=e/f;if(typeof d==="boolean")i=d;else if(a.isPlainObject(d)&&"width"in d&&"height"in d){c=d.width;b=d.height}else{h=this.container.data("player.wijlightbox");if(g.autoSize&&h&&h.name==="img"){if(f>c){f=c;e=Math.round(c*j)}if(e>b){e=b;f=Math.round(b/j)}}c=f;b=e;if(i)return{width:c,height:b}}this.frame.width(c).height(b);this.container.width(this.frame.outerWidth(true))},_position:function(){var f=this.options,c=[],e=[0,0],d,b=f.position;if(b){if(typeof b==="string"||typeof b==="object"&&"0"in b){c=b.split?b.split(" "):[b[0],b[1]];if(c.length===1)c[1]=c[0];a.each(["left","top"],function(a,b){if(+c[a]===c[a]){e[a]=c[a];c[a]=b}});b={my:c.join(" "),at:c.join(" "),offset:e.join(" ")}}b=a.extend({},f.position,b)}d=this.container.is(":visible");!d&&this.container.show();this.container.css({top:0,left:0}).position(b);!d&&this.container.hide()},_getRelRect:function(b){var c;if(b){if(a.isPlainObject(b)&&"left"in b&&"top"in b&&"width"in b&&"height"in b)c=a.merge({},b);else b=a(b);if(b.jquery&&b.length)c=a.extend({},b.offset(),{width:b.width(),height:b.height()})}return c},_close:function(d){var g=this.options,c=this,b,f,e;if(!this._isOpen())return;f={rel:d};if(false===this._trigger("beforeClose",null,f))return;d=f.rel;if(!d&&this._groupMode())d=g.groupItems[g.activeIndex].img;this.container.data("moving.wijlightbox",true);this._hideAccessories(false);this._hideWaiting();this._hideOverlay();this.stop();e=function(){c._removePlayer();c.container.hide();c._trigger("close");c.container.unbind("keypress.wijlightbox");c.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox");a(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")};b=this._getRelRect(d);if(!b)if(this.container.data("rect.wijlightbox"))b=this.container.data("rect.wijlightbox");this._removeText();if(b){this._moveTo(b,{animated:"sync",duration:200},e);return}e.call();return this},_isOpen:function(){return!!this.container.data("open.wijlightbox")},_open:function(d,f){if(this._isOpen())return;var c=this.options,b=this;if(this.toolBox)if(this._isFullSize())this.toolBox.css({top:"2px",right:"4px"});else this.toolBox.css({top:"",right:""});var e=function(){c.modal&&b._showOverlay();if(c.showControlsOnHover)this._hideAccessories(false);else this._showAccessories(false);var e=b._getRelRect(d);b.container.css("opacity",0);b.container.show();b._size();b._createText(true);b._refreshText(true);b._position();b.container.data("open.wijlightbox",true);if(d&&e){b.container.data("rect.wijlightbox",e);b._moveFrom(e,{animated:"sync"})}else{var f=a.extend({},b._defaults.transAnimation,c.transAnimation);if(f.animated==="fade"){b.container.hide();b.container.fadeIn(f.duration,function(){b._createText()})}else b._createText();this.container.data("moving.wijlightbox",false)}a(document).bind("keydown.wijlightbox",a.proxy(b,"_keyDownHandler")).bind("click.wijlightbox",function(e){var d=e.target||e.srcElement;if(b._isOpen()&&!!c.closeOnOuterClick)d!==b.container.get(0)&&a(d).parents().index(b.container)<0&&b._close()});c.autoPlay&&this.play();b._refreshNavButtons();b._refreshDialogButtons();var g={index:c.activeIndex,item:c.groupItems[c.activeIndex]};b._trigger("show",null,g);b._trigger("open")};this.container.data("moving.wijlightbox",true);this._show(f,true,e);return this},_getWinRect:function(){var b=a(window);return a.extend({width:b.width(),height:b.height()},b.offset()||{left:2,top:2})},_resizeHandler:function(){var a=this;a._removeText();a._size(a._getWinRect());a._createText()},_isFullSize:function(){return!!this.container.data("fullsize.wijlightbox")},_toggleFullSize:function(){var b=this,d=a(window);if(!b._isOpen())return;if(this._isFullSize()){b.toolBox&&b.toolBox.css({top:"",right:""});this.container.data("fullsize.wijlightbox",false);d.unbind("resize.wijlightbox",a.proxy(this,"_resizeHandler"));b._resize(function(){b._adjustPlayerSize(b.content.innerWidth(),b.content.innerHeight())})}else{this.container.data("fullsize.wijlightbox",true);d.bind("resize.wijlightbox",a.proxy(this,"_resizeHandler"));var c=b._getWinRect(),e=this.frame.borderSize();c.width-=e.width;c.height-=e.height;b._removeText();b._moveTo(c,{animated:"sync"},function(){b.toolBox&&b.toolBox.css({top:"2px",right:"4px"});b.frame.width(c.width);b.container.width(b.frame.outerWidth());b._createText();b._adjustPlayerSize(b.content.innerWidth(),b.content.innerHeight())})}this._refreshDialogButtons()},_getExt:function(a){var c,b,e=/[0-9a-z]+$/i,d=a.indexOf("?");if(d>-1)a=a.substring(0,d);b=a.match(e);if(b)c=b[0].toLowerCase();return c},_getPlayerName:function(c){if(c.indexOf("#")===0||c.indexOf("#")>0&&c.indexOf(document.location.href)===0)return"inline";var f=["bmp","gif","jpg","jpeg","png"],g=["swf"],e=["flv","m4v"],i=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],h=["asf","avi","mpg","mpeg","wm","wmv"],d=["mp4","mpg","mpeg","ogg","ogv"],b=this._getExt(c);if(b){if(a.inArray(b,f)>=0)return"img";if(a.inArray(b,g)>=0)return"swf";if(a.inArray(b,e)>=0)return"flv";if(a.inArray(b,h)>=0)return"wmp";if(a.inArray(b,i)>=0)return"qt";if(a.inArray(b,d)>=0)return"wijvideo"}return"iframe"},_adjustPlayerSize:function(c,b){var a=this.container.data("player.wijlightbox");a&&a.adjustSize&&a.adjustSize(c,b)},_removePlayer:function(){var a=this.container.data("player.wijlightbox");if(a){a.remove();this.container.data("player.wijlightbox",null)}},_createPlayer:function(h,g,e){var b=h.player;if(!a.isFunction(a.wijmo.wijlightbox[b]))throw"unknown player "+b;var d=this,f=false,c,j=function(){f=true;this._hideWaiting();a.isFunction(g)&&window.setTimeout(function(){g.apply(d)},1)},i=function(){this._hideWaiting();a.isFunction(e)&&e.apply(d)};c=new a.wijmo.wijlightbox[b](this,h,j,i);this.container.data("player.wijlightbox",c);window.setTimeout(function(){f===false&&d._showWaiting()},200);return c}});a.extend(a.wijmo.wijlightbox,{img:function(c,b,e,d){this.name="img";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);var f=this;a("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var d=a(this);f.width=b.width?parseInt(b.width,10):d.width();f.height=b.height?parseInt(b.height,10):d.height();d.remove();e&&a.isFunction(e)&&e.apply(c)},error:function(){a(this).remove();d&&a.isFunction(d)&&d.apply(c)}}).attr("src",this.url)},swf:function(c,b,d){this.name="swf";var e=c.options;this.id="flashhost";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);this.width=b.width?parseInt(b.width,10):e.width;this.height=b.height?parseInt(b.height,10):e.height;d&&a.isFunction(d)&&d.apply(c)},iframe:function(c,b,d){this.name="swf";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);if(b.width)this.width=parseInt(b.width,10);if(b.height)this.height=parseInt(b.height,10);this.$iframe=a("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(c.content).bind("load",function(){d&&a.isFunction(d)&&d.apply(c)}).attr("src",this.url)},inline:function(c,b,d){this.name="inline";var f=c.options;this.lightbox=c;this.item=b;this.width=b.width?parseInt(b.width,10):f.width;if(b.height)this.height=parseInt(b.height,10);else{var e=a(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox ui-widget"><div class="wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix"><div class="wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix"><div class="wijmo-wijlightbox-content"> </div></div></div></div>').appendTo(document.body).width(this.width);this.height=e.outerHeight(true)+10;e.unwrap();e.remove()}d&&a.isFunction(d)&&d.apply(c)},flv:function(c,b,d){this.name="flv";var e=c.options;this.id="flvhost";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);var f=20;this.width=b.width?parseInt(b.width,10):e.width;this.height=b.height?parseInt(b.height,10):e.height;if(e.showMovieControls)this.height+=f;d&&a.isFunction(d)&&d.apply(c)},wmp:function(c,b,d){var e=c.options,f;this.name="wmp";this.id="wmphost";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);f=a.browser.msie?70:45;this.width=b.width?parseInt(b.width,10):e.width;this.height=b.height?parseInt(b.height,10):e.height;if(e.showMovieControls)this.height+=f;d&&a.isFunction(d)&&d.apply(c)},qt:function(c,b,d){var e=c.options,f=16;this.name="qt";this.id="qthost";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);this.width=b.width?parseInt(b.width,10):e.width;this.height=b.height?parseInt(b.height,10):e.height;if(e.showMovieControls)this.height+=f;d&&a.isFunction(d)&&d.apply(c)},wijvideo:function(c,b,d){var e=c.options;this.name="wijvideo";this.id="wijvideohost";this.lightbox=c;this.item=b;this.url=this.lightbox._getUrl(b);this.wijvideosrc=!!b.wijvideosrc&&b.wijvideosrc!==""?this.lightbox._getUrl(b.wijvideosrc):null;this.width=b.width?parseInt(b.width,10):e.width;this.height=b.height?parseInt(b.height,10):e.height;d&&a.isFunction(d)&&d.apply(c)}});a.extend(a.wijmo.wijlightbox.img.prototype,{appendTo:function(b,c){this.$element=a("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url);c&&this.$element.hide();if(this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"){b.children().length&&b.empty();this.$element.prependTo(b)}else this.$element.appendTo(b)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(b,a){this.$element&&this.$element.fadeOut(b,a)},fadeIn:function(b,a){this.$element&&this.$element.fadeIn(b,a)},getElement:function(){return this.$element}});a.extend(a.wijmo.wijlightbox.swf.prototype,{appendTo:function(d){this.$container=a("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(d);var b=this.lightbox.options,e=b.flashInstall,f=b.flashVersion,c=b.flashVars,g=b.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",f,e,c,g)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id);this.$container.remove()},fadeOut:function(b,a){this.$container&&this.$container.fadeOut(b,a)},fadeIn:function(b,a){this.$container&&this.$container.fadeIn(b,a)},getElement:function(){return this.$container}});a.extend(a.wijmo.wijlightbox.iframe.prototype,{appendTo:function(b,a){!a&&this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(b,a){this.$iframe&&this.$iframe.fadeOut(b,a)},fadeIn:function(b,a){this.$iframe&&this.$iframe.fadeIn(b,a)},getElement:function(){return this.$iframe}});a.extend(a.wijmo.wijlightbox.inline.prototype,{appendTo:function(b,c){this.$element=a(this.item.href).clone().appendTo(b);!c&&this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(b,a){this.$element&&this.$element.fadeOut(b,a)},fadeIn:function(b,a){this.$element&&this.$element.fadeIn(b,a)},getElement:function(){return this.$element}});a.extend(a.wijmo.wijlightbox.flv.prototype,{appendTo:function(f){this.$container=a("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(f);var b=this.lightbox.options,d="100%",c="100%",j=b.flvPlayer,g=b.flashInstall,h=b.flashVersion,e=a.extend({file:this.url,width:d,height:c,autostart:b.autoPlayMovies?"true":"false",controlbar:b.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},b.flashVars),i=a.extend({autostart:b.autoPlayMovies?"true":"false",allowscriptaccess:"always"},b.flashParams);S.flash.embedSWF(j,this.id,d,c,h,g,e,i)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id);this.$container.remove()},fadeOut:function(b,a){this.$container&&this.$container.fadeOut(b,a)},fadeIn:function(b,a){this.$container&&this.$container.fadeIn(b,a)},getElement:function(){return this.$container}});a.extend(a.wijmo.wijlightbox.wmp.prototype,{appendTo:function(f){this.$container=a("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(f);var d=this.lightbox.options,b='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',c={autostart:d.autoPlayMovies?1:0},e;if(a.browser.msie){b+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"';c.url=this.url;c.uimode=d.showMovieControls?"full":"none"}else{b+=' type="video/x-ms-wmv"';b+=' data="'+this.url+'"';c.showcontrols=d.showMovieControls?1:0}b+=">";for(e in c)b+='<param name="'+e+'" value="'+c[e]+'">';b+="</object>";this.$container.html(b)},remove:function(){if(a.browser.msie)try{window[this.id].controls.stop();window[this.id].URL="movie"+now()+".wmv";window[this.id]=function(){}}catch(b){}this.$container.remove()},fadeOut:function(b,a){this.$container&&this.$container.fadeOut(b,a)},fadeIn:function(b,a){this.$container&&this.$container.fadeIn(b,a)},getElement:function(){return this.$container}});a.extend(a.wijmo.wijlightbox.qt.prototype,{appendTo:function(d,h){this.$container=a("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(d);var i=this.lightbox.options,j=i.autoPlayMovies?"true":"false",k=i.showMovieControls?"true":"false",c="<object",b={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true"},e,f;if(a.browser.msie){b.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";b.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"}else{b.type="video/quicktime";b.data=this.url}for(e in b)c+=" "+e+'="'+b[e]+'"';c+=">";var g={src:this.url,scale:"aspect",controller:k,autoplay:j};for(f in g)c+='<param name="'+f+'" value="'+g[f]+'">';c+="</object>";h&&d.hide();this.$container.html(c);h&&d.show()},remove:function(){try{document[this.id].Stop();document[this.id]=null}catch(a){}this.$container.remove()},fadeOut:function(b,a){a.call();return},fadeIn:function(b,a){a.call();return},getElement:function(){return this.$container}});a.extend(a.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(c){var b=this.lightbox.options;this.$container=a("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:b.autoPlayMovies?"true":"false",controls:b.showMovieControls?"controls":""}).appendTo(c);!!this.url&&a("<source/>").attr({src:this.url}).appendTo(this.$container);!!this.wijvideosrc&&a("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container);this.$container.wijvideo({fullScreenButtonVisible:false})},remove:function(){this.$container.remove()},fadeOut:function(b,a){this.$container&&this.$container.fadeOut(b,a)},fadeIn:function(b,a){this.$container&&this.$container.fadeIn(b,a)},getElement:function(){return this.$container},adjustSize:function(b,a){this.$container.wijvideo("setWidth",b);this.$container.wijvideo("setHeight",a)}});a.extend(a.wijmo.wijlightbox,{overlay:function(d,c){this.mask=a("<div></div>").addClass("ui-widget-overlay wijmo-wijlightbox-overlay"+(c?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){d._close();return false});a.fn.bgiframe&&this.mask.bgiframe();if(c){this.mask.css("z-index",this.zIndex);var b=a("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);b.css({left:(this.mask.width()-b.width())/2,top:(this.mask.height()-b.height())/2})}a(window).bind("resize.wijlightbox-overlay",a.proxy(this,"resize"));window.setTimeout(function(){var b;if(this.mask){b=a.wijmo.wijlightbox.overlay;a(document).bind(b.events,function(c){if(a(c.target).zIndex()<b.zIndex)return false})}},1)}});a.extend(a.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".wijlightbox-overlay"}).join(" "),close:function(){a([document,window]).unbind(".wijlightbox-overlay");this.mask.remove();this.mask=undefined},height:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<c?a(window).height():b}else return a(document).height()},width:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<c?a(window).width():b}else return a(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(jQuery);