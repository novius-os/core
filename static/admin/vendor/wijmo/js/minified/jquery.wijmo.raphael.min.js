/*
 *
 * Wijmo Library 2.3.7
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 **/
(function(a){"use strict";if(!window.Raphael)return;a.extend({round:function(a,b){return!a?0:Globalize.parseFloat(a.toFixed(b),10,Globalize.culture("en"))},toOADate:function(b){var c=864e5,a=b-new Date(1900,0,1)+2*c;return a},fromOADate:function(a){var c=864e5,b=new Date(a-2*c+ +new Date(1900,0,1));return b},arrayClone:function(c){var b=[];a.each(c,function(d,c){b.push(a.extend(true,{},c))});return b}});a.wijraphael={isSVGElem:function(a){var b="http://www.w3.org/2000/svg";return a.nodeType===1&&a.namespaceURI===b},addClass:function(c,b){b=b||"";a.each(c,function(){if(a.wijraphael.isSVGElem(this)){var c=this;a.each(b.split(/\s+/),function(e,d){var b=c.className?c.className.baseVal:c.getAttribute("class");if(a.inArray(d,b.split(/\s+/))===-1){b+=(b?" ":"")+d;if(c.className)c.className.baseVal=b;else c.setAttribute("class",b)}})}else a(this).addClass(b)})},clearRaphaelCache:function(){Raphael.path2curve.cache=null;Raphael.path2curve.count=null;Raphael.parseTransformString.cache=null;Raphael.parseTransformString.count=null;Raphael.parsePathString.cache=null;Raphael.parsePathString.count=null;Raphael._pathToAbsolute.cache=null;Raphael._pathToAbsolute.count=null},getPositionByAngle:function(e,f,c,d){var a={},b=Raphael.rad(d);a.x=e+c*Math.cos(-1*b);a.y=f+c*Math.sin(-1*b);return a},hasClass:function(b,c){if(!c||c.length===0)return false;if(a.wijraphael.isSVGElem(b)){var e=b.className?b.className.baseVal:b.getAttribute("class"),d=false;a.each(e.split(/\s+/),function(b,a){if(a===c){d=true;return false}});return d}else return a(b).hasClass(c)},sector:function(c,d,b,e,f){var g=a.wijraphael.getPositionByAngle(c,d,b,e),h=a.wijraphael.getPositionByAngle(c,d,b,f);return["M",c,d,"L",g.x,g.y,"A",b,b,0,+(f-e>180),0,h.x,h.y,"z"]}};var b="[\\x20\\t\\r\\n\\f]",c=a.expr.filter.CLASS;a.expr.filter.CLASS=function(c,f){if(parseFloat(a.fn.jquery)<1.8){var d=!(a.wijraphael&&a.wijraphael.isSVGElem(c))?c.className:c.className?c.className.baseVal:c.getAttribute("class");return(" "+d+" ").indexOf(f)>-1}else{var e=new RegExp("(^|"+b+")"+c+"("+b+"|$)");return function(b){var c=!(a.wijraphael&&a.wijraphael.isSVGElem(b))?b.className:b.className?b.className.baseVal:b.getAttribute("class");return e.test(c)}}};if(parseFloat(a.fn.jquery)<1.8)a.expr.preFilter.CLASS=function(d,f,g,h,j,i){var c=0,b=null,e=null;d=" "+d[1].replace(/\\/g,"")+" ";if(i)return d;for(c=0,b={};b;c++){b=f[c];if(!b)try{b=f.item(c)}catch(k){}if(b){e=!(a.wijraphael&&a.wijraphael.isSVGElem(b))?b.className:(b.className?b.className.baseVal:"")||b.getAttribute("class");if(j^(e&&(" "+e+" ").indexOf(d)>-1))!g&&h.push(b);else if(g)f[c]=false}}return false};Raphael.fn.tri=function(b,c,e){var g=b,j=c-e,a=Math.cos(Math.PI/6)*e,d=Math.tan(Math.PI/3)*a,h=b+a,k=c+d,i=b-a,l=c+d,f=["M",g,j,"L",h,k,"L",i,l,"z"];return this.path(f.concat(" "))};Raphael.fn.invertedTri=function(b,c,e){var g=b,j=c+e,a=Math.cos(Math.PI/6)*e,d=Math.tan(Math.PI/3)*a,h=b+a,k=c-d,i=b-a,l=c-d,f=["M",g,j,"L",h,k,"L",i,l,"z"];return this.path(f.concat(" "))};Raphael.fn.box=function(b,c,e){var a=Math.cos(Math.PI/4)*e,d=["M",b-a,c-a,"L",b+a,c-a,"L",b+a,c+a,"L",b-a,c+a,"z"];return this.path(d.concat(" "))};Raphael.fn.diamond=function(b,c,a){var d=["M",b,c-a,"L",b+a,c,"L",b,c+a,"L",b-a,c,"z"];return this.path(d.concat(" "))};Raphael.fn.cross=function(b,c,e){var a=Math.cos(Math.PI/4)*e,d=["M",b-a,c-a,"L",b+a,c+a,"M",b-a,c+a,"L",b+a,c-a];return this.path(d.concat(" "))};Raphael.fn.paintMarker=function(f,d,e,b){var c=this,a=null;if(!f)f="circle";switch(f){case"circle":a=c.circle(d,e,b);break;case"tri":a=c.tri(d,e,b);break;case"invertedTri":a=c.invertedTri(d,e,b);break;case"box":a=c.box(d,e,b);break;case"diamond":a=c.diamond(d,e,b);break;case"cross":a=c.cross(d,e,b)}return a};Raphael.prototype.htmlText=function(l,m,b,j,f,e){function i(b,a,d){var f=/<(b|strong)>/,e=/<(i|em)>/,c=/href=[\"\']([^\"\']+)[\"\']/,g=/<a/;d&&b.attr(d);f.test(a)&&b.attr("font-weight","bold");e.test(a)&&b.attr("font-style","italic");if(g.test(a))a.match(c)[1]&&b.attr("href",a.match(c)[1])}var k=b.toString().split(/<br\s?\/>|\\r/i),h=this,c=h.set(),d=0,g=0;f=f||3;e=e||5;a.each(k,function(n,l){var k=0,m=l.split("|||");l=l.replace(/<([A-Za-z]+(.|\n)*?)>/g,"|||<$1>").replace(/<\/([A-Za-z]*)>/g,"</$1>|||");a.each(m,function(p,m){var l=null,e=null,n=0,o=0;if(m!==""){l=m;l=a.trim(l.replace(/<(.|\n)*?>/g,""));b=h.text(0,0,l);i(b,m,j);e=b.wijGetBBox();n=e.width/2+d;o=-e.height/2+g;d=d+e.width+f;b.translate(n,o);c.push(b);if(k<e.height)k=e.height}});g+=k+e;d=k=0});g=0;c.transform(Raphael.format("...t{0},{1}",l-c.getBBox().x,m-c.getBBox().y));return c};Raphael.fn.line=function(a,b,c,d){return this.path(["M",a,b,"L",c,d])};Raphael.fn.roundRect=function(m,n,f,e,l,j,i,k){var b=[],d=[-1,1,1,1,1,-1,-1,-1],h=["v","h","v","h"],c=null,g=null;a.each([l,j,i,k],function(c,a){if(typeof a==="number")b=b.concat({x:a,y:a});else if(typeof a==="object")b=b.concat(a);else b=b.concat({x:0,y:0})});c=["M",m+b[0].x,n];g=[e-b[0].y-b[1].y,f-b[1].x-b[2].x,b[2].y+b[3].y-e,b[3].x+b[0].x-f];a.each(b,function(b,a){if(a.x&&a.y)c=c.concat("a",a.x,a.y,0,0,0,d[2*b]*a.x,d[2*b+1]*a.y);c=c.concat(h[b],g[b])});c.push("z");return this.path(c)};Raphael.fn.wrapText=function(o,p,j,h,n,g){var i=this,c=g.rotation,l=c?a.extend(true,{},g,{rotation:0}):g,k=p,e=i.set(),b=null,d=null,f=[];if(typeof j==="undefined")j="";function m(j,h,g){var b=null,f=null,a=j.toString().split(" "),e=[],c=[],d="";while(a.length){d+=" "+a[0];b=i.text(-1e3,-1e3,d);b.attr(g);f=b.wijGetBBox();if(f.width>h){if(c.length){e.push(c);d=a[0]}c=[a.shift()]}else c.push(a.shift());a.length===0&&e.push(c);b.wijRemove();b=null}return e}a.each(m(j,h,l),function(q,p){var j=p.join(" "),m=n||"near",a=i.text(o,k,j),d=0,g=0;a.attr(l);b=a.wijGetBBox();switch(m){case"near":d=h-b.width/2;break;case"center":d+=h/2;break;case"far":d+=b.width/2}if(c){g+=b.height/2/Math.abs(Math.sin(c));k+=b.height/Math.abs(Math.sin(c))}else{g+=b.height/2;k+=b.height}b.x+=d;b.y+=g;if(c)a.attr({x:a.attr("x")+d,y:a.attr("y")+g});else a.transform(Raphael.format("...T{0},{1}",d,g));e.push(a);f.push(b)});if(c){b=e.wijGetBBox();if(e.length>1){a.each(e,function(c,a){a.attr({y:a.attr("y")-b.height/2});f[c].y-=b.height/2});d={x:b.x+b.width/2,y:b.y+b.height/2};a.each(e,function(m,h){var g=Math,i=f[m],e={x:i.x+i.width/2,y:i.y+i.height/2},k=g.sqrt(g.pow(e.x-d.x,2)+g.pow(e.y-d.y,2)),b=0,j=null,l=null;h.attr({rotation:c});if(k===0)return true;j=h.wijGetBBox();b=Raphael.deg(g.asin(g.abs(e.y-d.y)/k));if(e.y>d.y)if(e.x>d.x)b-=360;else b=-1*(b+180);else if(e.x>d.x)b*=-1;else b=-1*(180-b);l=a.wijraphael.getPositionByAngle(d.x,d.y,k,-1*(c+b));h.attr({y:h.attr("y")+l.y-j.y-j.height/2})})}else e[0].transform(Raphael.format("...R{0}",c))}return e};Raphael.fn.getSVG=function(){function m(f,c){var b="<"+f+" ",d=null,e=false;a.each(c,function(a,c){if(a==="text"||a==="opacity"||a==="transform"||a==="path"||a==="w"||a==="h"||a==="translation")return true;if(c){if(a==="stroke"&&c===0)c="none";b+=a+"='"+c+"' "}});if(c.opacity){d=c.opacity;b+="opacity='"+d+"' style='opacity:"+d+";";e=true}if(c.transform&&c.transform.length>0){d=c.transform;if(e)b+="transform:"+d;else{b+="style='transform:"+d;e=true}}if(e)b+="'";if(c.text){d=c.text;b+="><tspan>"+d+"</tspan>"}else b+=">";b+="</"+f+">";return b}for(var h=this,k='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+h.canvas.offsetWidth+'" height="'+h.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',d="",i,g,e,f=0,l=0,c=0,j=0,b=h.bottom;b;b=b.next)if(b&&b.type)switch(b.type){case"path":for(f=0,l=b.attrs.path.length;f<l;f++){g=b.attrs.path[f];for(c=0,j=g.length;c<j;c++){e=g[c];if(c<1)d+=e;else if(c===j-1)d+=e;else d+=e+","}}if(d&&d.length>0)b.attrs.d=d.replace(/,/g," ");break;case"text":if(!b.attrs["text-anchor"])b.attrs["text-anchor"]="middle";break;case"image":i=b.transformations;b.attrs.transform=i?i.join(" "):"";break;case"ellipse":case"rect":k+=m(b.type,b.attrs)}k+="</svg>";return k};Raphael.el.wijRemove=function(){var b=this,c;if(b.removed)return;if(b.node.parentNode){c=a(b.node);b.stop().remove();c.remove()}};Raphael.st.wijRemove=function(){a.each(this,function(b,a){a.wijRemove&&!a.removed&&a.wijRemove()})};Raphael.el.wijGetBBox=function(){return this.getBBox()};Raphael.el.wijAnimate=function(b,h,c,g){if(!b||a.isEmptyObject(b))return;var f=this.shadow,e=0,d={easeInCubic:">",easeOutCubic:"<",easeInOutCubic:"<>",easeInBack:"backIn",easeOutBack:"backOut",easeOutElastic:"elastic",easeOutBounce:"bounce"};if(d[c])c=d[c];this.animate(b,h,c,g);d=null;if(f&&f.offset){e=f.offset;if(b.x)b.x+=e;if(b.y)b.y+=e;this.shadow.animate(b,h,c,g)}};Raphael.el.wijAttr=function(b,d){this.attr(b,d);if(this.shadow)if(typeof b==="object"){var c=a.extend(true,{},b);if(c.fill)delete c.fill;if(c.stroke)delete c.stroke;if(c["stroke-width"])delete c["stroke-width"];this.shadow.attr(c,d)}else if(typeof b==="string")switch(b){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(b,d);break;case"x":this.shadow.attr(b,d);this.shadow.attr("transform","...t1,0");break;case"y":this.shadow.attr(b,d);this.shadow.attr("transform","...t0,1")}};Raphael.st.wijAttr=function(c,b){a.each(this.items,function(d,a){a.wijAttr(c,b)});return this};Raphael.st.wijAnimate=function(f,g,e,d){var a=0,c=0,b=null;for(a=0,c=this.items.length;a<c;a++){b=this.items[a];b.wijAnimate(f,g,e,d)}return this};Raphael.st.wijGetBBox=function(){for(var b=[],c=[],j=[],i=[],g=Math.max,h=Math.min,e="push",d="apply",a=null,f=0,f=this.items.length-1;f>=0;f--){a=this.items[f].wijGetBBox();b[e](a.x);c[e](a.y);j[e](a.x+a.width);i[e](a.y+a.height)}b=h[d](0,b);c=h[d](0,c);return{x:b,y:c,width:g[d](0,j)-b,height:g[d](0,i)-c}}})(jQuery);