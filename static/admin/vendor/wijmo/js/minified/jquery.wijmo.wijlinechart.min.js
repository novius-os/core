/*
 *
 * Wijmo Library 2.3.7
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 **/
(function(a){"use strict";if(!window.Raphael)return;a.widget("wijmo.wijlinechart",a.wijmo.wijchartcore,{options:{stacked:false,hole:null,type:"line",animation:{enabled:true,direction:"horizontal",duration:2e3,easing:">"},seriesTransition:{enabled:true,duration:2e3,easing:">"},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},widgetEventPrefix:"wijlinechart",_create:function(){var b=this,c=b.options;this._hotFixForJQ1_9();a.wijmo.wijchartcore.prototype._create.apply(b,arguments);b.chartElement.addClass("wijmo-wijlinechart");c.type==="area"&&b.chartElement.addClass("wijmo-wijareachart")},destroy:function(){var b=this,c=b.options;b.chartElement.removeClass("wijmo-wijlinechart");c.type==="area"&&b.chartElement.removeClass("wijmo-wijareachart");a.wijmo.wijchartcore.prototype.destroy.apply(b,arguments);if(b.aniPathsAttr&&b.aniPathsAttr.length){a.each(b.aniPathsAttr,function(b,a){a=null});b.aniPathsAttr=null}},getLinePath:function(c){var d=this,b=d.chartElement.data("fields"),a,e;if(b&&b.chartElements){a=b.chartElements;if(a.paths&&a.paths.length)return a.paths[c]}return e},getLineMarkers:function(b){var e=this,d=e.options,c=e.chartElement.data("fields"),a,f;if(d.seriesList&&d.seriesList[b].markers&&d.seriesList[b].markers.visible)if(c&&c.chartElements){a=c.chartElements;if(a.markersSet&&a.markersSet.length)return a.markersSet[b]}return f},_showSerieEles:function(b){var d=this.options,c;b.markers&&a.each(b.markers,function(d,c){var b=a(c.node).data("wijchartDataObj");if(b&&b.lineSeries&&b.lineSeries.markers)if(!b.lineSeries.markers.visible)return true;c.show()});b.dcl&&a.each(b.dcl,function(b,a){d.showChartLabels&&a.show()});if(b.path){c=a(b.path.node).data("wijchartDataObj");if(c.visible){b.path.show();b.path.shadow&&b.path.shadow.show();b.path.area&&b.path.area.show();b.path.tracker&&b.path.tracker.show()}a(b.path.node).data("wijchartDataObj")&&a(b.path.node).data("wijchartDataObj").virtualMarkers&&a.each(a(b.path.node).data("wijchartDataObj").virtualMarkers,function(b,a){a.visible=true})}},_hideSerieEles:function(b){b.markers&&a.each(b.markers,function(b,a){a.hide()});b.dcl&&a.each(b.dcl,function(b,a){a.hide()});if(b.path){b.path.hide();b.path.shadow&&b.path.shadow.hide();b.path.area&&b.path.area.hide();b.path.tracker&&b.path.tracker.hide();a(b.path.node).data("wijchartDataObj")&&a(b.path.node).data("wijchartDataObj").virtualMarkers&&a.each(a(b.path.node).data("wijchartDataObj").virtualMarkers,function(b,a){a.visible=false})}},_supportStacked:function(){return true},_indicatorLineShowing:function(b){a.wijmo.wijchartcore.prototype._indicatorLineShowing.apply(this,arguments);a.each(b,function(b,a){a.marker&&a.marker.attr(a.markerHoverStyle)})},_removeIndicatorStyles:function(b){a.each(b,function(b,a){if(a.marker){a.marker.attr(a.markerStyle);a.marker.transform("s1")}})},_mouseDownInsidePlotArea:function(){a.wijmo.wijchartcore.prototype._mouseDownInsidePlotArea.apply(this,arguments);this._clearHoverState(true)},_paintLegend:function(){var c=this,l=c.options,d=0,q=0,k=0,j=null,m=l.seriesList,p=l.seriesStyles,b=null,e=null,f=null,n=0,o=0,h=null,i=null,g=null;a.extend(true,l,{legend:{size:{width:30,height:3}}});a.wijmo.wijchartcore.prototype._paintLegend.apply(c,arguments);if(l.legend.visible){c.legends.length&&c.legendIcons.length&&a.each(c.legendIcons,function(g,b){var d=b.getBBox(),f=c.canvas,e;e=f.path(Raphael.format("M{0},{1}L{2},{3}",d.x,d.y+d.height/2,d.x+d.width,d.y+d.height/2)).attr(a.extend(true,{},b.attr(),{stroke:b.attr("stroke"),"stroke-width":l.legend.size.height}));a(e.node).data("legendIndex",a(b.node).data("legendIndex")).data("index",a(b.node).data("index"));a.wijraphael.addClass(a(e.node),"wijchart-legend-icon wijchart-legend");b.remove();b=null;c.legendIcons[g]=e});if(!l.legend.reversed)for(d=0,q=m.length;d<q;d++){b=m[d];e=p[d];if(b.legendEntry&&b.display!=="exclude"){if(b.markers&&b.markers.visible){j=c.legendIcons[k];e["stroke-dasharray"]&&j.attr({"stroke-width":1,"stroke-dasharray":e["stroke-dasharray"]});f=j.wijGetBBox();n=f.x+f.width/2;o=f.y+f.height/2;h=b.markerStyle;h=a.extend({fill:e.stroke,stroke:e.stroke,opacity:1},h);i=b.markers.type;if(!i)i="circle";g=c.canvas.paintMarker(i,n,o,3);a.wijraphael.addClass(a(g.node),"chart-legend-dot wijchart-legend");g.attr(h);a(g.node).data("index",d).data("legendIndex",k);c.legendDots.push(g)}k++}}else for(d=m.length-1;d>=0;d--){b=m[d];e=p[d];if(b.legendEntry&&b.display!=="exclude"){if(b.markers&&b.markers.visible){j=c.legendIcons[k];e["stroke-dasharray"]&&j.attr({"stroke-width":1,"stroke-dasharray":e["stroke-dasharray"]});f=j.wijGetBBox();n=f.x+f.width/2;o=f.y+f.height/2;h=b.markerStyle;h=a.extend({fill:e.stroke,stroke:e.stroke,opacity:1},h);i=b.markers.type;if(!i)i="circle";g=c.canvas.paintMarker(i,n,o,3);a.wijraphael.addClass(a(g.node),"chart-legend-dot wijchart-canvas-object wijchart-legend");g.attr(h);a(g.node).data("index",d).data("legendIndex",k);c.legendDots.push(g)}k++}}}},_mouseDown:function(){a.wijmo.wijchartcore.prototype._mouseDown.apply(this,arguments)},_mouseUp:function(){a.wijmo.wijchartcore.prototype._mouseUp.apply(this,arguments)},_mouseOver:function(d,c){var b=this;if(!c||!(c.type==="line"||c.type==="marker"))return;if(b.indicatorLine)return;a.wijmo.wijchartcore.prototype._mouseOver.apply(this,arguments);if(c.type==="marker")c=c.lineSeries;if(c.path.removed)return;if(b.hoverLine!==c||b.hoverLine===null){b.isNewLine=true;if(b.hoverLine)if(!b.hoverLine.path.removed){if(b.options.type==="line"&&b.hoverLine.lineStyle.fill)delete b.hoverLine.lineStyle.fill;b.hoverLine.path.wijAttr(b.hoverLine.lineStyle);if(b.hoverPoint&&!b.hoverPoint.isSymbol){b.hoverPoint.marker.wijAttr(b.hoverPoint.markerStyle);b.hoverPoint.marker.transform("s1")}}c.lineHoverStyle&&c.path.wijAttr(c.lineHoverStyle);b.hoverLine=c;b.hoverPoint=null;b.hoverVirtualPoint=null}},_mouseOut:function(){a.wijmo.wijchartcore.prototype._mouseOut.apply(this,arguments)},_mouseMove:function(){a.wijmo.wijchartcore.prototype._mouseMove.apply(this,arguments)},_click:function(){a.wijmo.wijchartcore.prototype._click.apply(this,arguments)},_mouseMoveInsidePlotArea:function(v,q){var b=this,f=b.tooltip,j=b.options.hint,e,h,c=0,l,d,m,n,t=null,g=null,k=null,s=j.title,r=j.content,p=a.isFunction(s),o=a.isFunction(r),i=0,u=b.options.indicator;if(f)k=f.getOptions();if(b.hoverLine&&!b.indicatorLine){if(b.isNewLine){j.enable&&f&&f.hide();b.isNewLine=false}e=b.hoverLine.lineMarkers;h=b.hoverLine.virtualMarkers;c=-1;l={x:0,y:0};if(e&&e.length){a.each(e,function(f,b){if(b.removed)return true;var a=b.wijGetBBox(),e=a.x+a.width/2,d=Math.abs(e-q.left);if(f===0||d<i){i=d;c=f;l={x:e,y:a.y+a.height/2}}});if(b.hoverPoint&&b.hoverPoint.index===c)return;if(c>-1){if(e[c].removed)return;d=a(e[c].node).data("wijchartDataObj");if(d){if(b.hoverPoint&&!b.hoverPoint.isSymbol)if(!b.hoverPoint.removed){b.hoverPoint.marker.wijAttr(b.hoverPoint.markerStyle);b.hoverPoint.marker.transform("s1")}if(!d.isSymbol)!d.marker.removed&&d.marker.wijAttr(d.markerHoverStyle)}b.hoverPoint=d;b.hoverVirtualPoint=h[c]}}else{a.each(h,function(d,a){var b=Math.abs(a.x-q.left);if(d===0||b<i){i=b;c=d;l={x:a.x,y:a.y}}});if(b.hoverVirtualPoint&&b.hoverVirtualPoint.index===c)return;if(c>-1){b.hoverPoint=null;b.hoverVirtualPoint=h[c]}}if(f){g=b.hoverVirtualPoint;m=g.valX;n=g.valY;if(p||o){if(p)k.title=function(){var d={pointIndex:c,lineIndex:b.hoverLine.index,x:m,y:n,label:b.hoverLine.label,data:g,fmt:s},e=a.proxy(d.fmt,d),f=e();return f};if(o)k.content=function(){var d={pointIndex:c,lineIndex:b.hoverLine.index,x:m,y:n,label:b.hoverLine.label,data:g,fmt:r},f=a.proxy(d.fmt,d),e=f();return e}}t=a.extend({stroke:b.hoverLine.path.attr("stroke")},j.style);k.style.stroke=t.stroke;f.showAt(l)}}a.wijmo.wijchartcore.prototype._mouseMoveInsidePlotArea.apply(b,arguments)},_mouseMoveOutsidePlotArea:function(){var b=this;b._clearHoverState();a.wijmo.wijchartcore.prototype._mouseMoveOutsidePlotArea.apply(b,arguments)},_clearHoverState:function(c){var a=this,b=a.tooltip,d=a.options.hint;d.enable&&b&&!c&&b.hide();if(a.hoverLine)if(!a.hoverLine.path.removed){if(a.options.type==="line"&&a.hoverLine.lineStyle.fill)delete a.hoverLine.lineStyle.fill;a.hoverLine.path.wijAttr(a.hoverLine.lineStyle);if(a.hoverPoint&&!a.hoverPoint.isSymbol){a.hoverPoint.marker.wijAttr(a.hoverPoint.markerStyle);a.hoverPoint.marker.transform("s1")}}a.hoverLine=null;a.hoverPoint=null;a.hoverVirtualPoint=null},_paintPlotArea:function(){var b=this,c=b.options,d;if(!b.aniPathsAttr)b.aniPathsAttr=[];d={bounds:b.canvasBounds,widgetName:b.widgetName,canvas:b.canvas,tooltip:b.tooltip,stacked:c.stacked,hole:c.hole,type:c.type,axis:c.axis,animation:c.animation,seriesTransition:c.seriesTransition,seriesList:c.seriesList,seriesStyles:c.seriesStyles,seriesHoverStyles:c.seriesHoverStyles,showChartLabels:c.showChartLabels,chartLabelStyle:c.chartLabelStyle,chartLabelFormatString:c.chartLabelFormatString,isXTime:b.axisInfo.x.isTime,isYTime:b.axisInfo.y.isTime||b.axisInfo.y[0].isTime,disabled:c.disabled,culture:b._getCulture(),hint:c.hint,aniPathsAttr:b.aniPathsAttr,chartLabelEles:b.chartLabelEles,mouseDown:a.proxy(b._mouseDown,b),mouseUp:a.proxy(b._mouseUp,b),mouseOver:a.proxy(b._mouseOver,b),mouseOut:a.proxy(b._mouseOut,b),mouseMove:a.proxy(b._mouseMove,b),click:a.proxy(b._click,b),widget:this};b.chartElement.wijline(d)}})})(jQuery);(function(a){"use strict";if(!window.Raphael)return;a.wijchart._line=function(f,b){var d=this,p=b.bounds,n=b.widgetName,s=b.canvas,t=b.animation,q=b.seriesTransition,E=b.hint,B=b.tooltip,u=b.mouseDown,A=b.mouseUp,w=b.mouseOver,y=b.mouseOut,v=b.mouseMove,D=b.click,l=[],r=[],k=[],h=[],j=[],x=b.disabled,g=s.set(),e=b.aniPathsAttr,i=[],o,c=f.data("fields")||{},m=[],z=b.culture,C=b.widget;d.widget=C;d.render(b,i,e,h,j,l,g,r,k,m,z);(t.enabled||q.enabled)&&d.playAnimation(t,q,g,p,h,e);e.length=0;a.each(i,function(b,a){e.push(a)});d.unbindLiveEvents(f,n);d.bindLiveEvents(f,s,p,n,u,A,w,y,v,D,x,E,k,B);o={paths:h,shadowPaths:j,markersSet:l,animationSet:g,symbols:r};if(!c.chartElements)c.chartElements={};c.seriesEles=m;a.extend(true,c.chartElements,o);f.data("fields",c)};a.wijchart._line.prototype.playAnimation=function(g,b,i,j,h,c){var f=this,d=g.duration,e=g.easing;if(g.direction==="horizontal"){if(c&&c.length&&b.enabled){d=b.duration;e=b.easing}f.playHAnimation(d,e,i,j,h)}else a.each(h,function(g,a){if(typeof a==="undefined"||a===null)return true;if(c&&c.length>g&&b.enabled){d=b.duration;e=b.easing;f.playVAnimation(a,c,g,d,e)}else a.straight&&f.playVStraightAnimation(a,d,e)})};a.wijchart._line.prototype.playVAnimation=function(b,g,h,e,f){var c,d;b.shadow&&b.shadow.hide();b.tracker&&b.tracker.hide();c=g[h];if(c&&c.path)d=a.wijchart.getDiffAttrs(c.path,b.attr());if(!a.isEmptyObject(d)){b.attr(c.path);b.wijAnimate(d,e,f,function(){b.shadow&&b.visible!==false&&b.shadow.show();b.tracker&&b.tracker.show()})}a.each(b.markers,function(g,b){var d=a.wijchart.getDiffAttrs(c.markers[g],b.attr());if(!a.isEmptyObject(d)){b.attr(c.markers[g]);b.wijAnimate(d,e,f)}});b.labels&&a.each(b.labels,function(h,d){var g=a.wijchart.getDiffAttrs(c.labels[h],d.attr()),b=c.labels[h];if(b&&b.text)delete b.text;if(!a.isEmptyObject(g)){d.attr(b);d.wijAnimate(g,e,f)}});if(b.area){d=a.wijchart.getDiffAttrs(c.area,b.area.attr());if(!a.isEmptyObject(d)){b.area.attr(c.area);b.area.wijAnimate(d,e,f)}}};a.wijchart._line.prototype.playVStraightAnimation=function(b,f,g){var d,e,c;b.shadow&&b.shadow.hide();b.tracker&&b.tracker.hide();d=b.straight;e=b.attr().path;b.attr({path:d});b.wijAnimate({path:e},f,g,function(){b.shadow&&b.visible!==false&&b.shadow.show();b.tracker&&b.tracker.show()});a.each(b.markers,function(c,a){if(a.straight){var b=a.attr().cy;a.attr({cy:a.straight});a.wijAnimate({cy:b},f,g)}});if(b.area){c=b.area;d=c.straight;e=c.attr().path;c.attr({path:d});c.wijAnimate({path:e},f,g)}};a.wijchart._line.prototype.playHAnimation=function(e,f,c,b,g){a.each(g,function(b,a){a.tracker&&a.tracker.hide()});var h=b.endX-b.startX+20,d=b.endY-b.startY+20;c.wijAttr("clip-rect",b.startX-10+" "+(b.startY-10)+" 0 "+d);c.wijAnimate({"clip-rect":b.startX-10+" "+(b.startY-10)+" "+h+" "+d},e,f,function(){this.tracker&&this.tracker.show();if(Raphael.vml){var b=null,d=null,c=this.node;if(c&&c.clipRect){b=this.attrs;delete b["clip-rect"];c.clipRect=null;d=a(c).parent();d.before(c);d.remove();this.attr(b);b.src&&b.src.length&&this.attr({src:b.src})}}})};a.wijchart._line.prototype.render=function(b,F,t,d,p,J,u,N,I,K,L){var s=this,w=b.bounds,l=b.canvas,q=b.stacked,P=b.hole,Q=b.type,O=b.axis,R=b.animation,M=b.seriesTransition,n=false,v=b.seriesList,A=b.seriesStyles,B=b.seriesHoverStyles,D=b.showChartLabels,C=b.chartLabelStyle,z=b.chartLabelFormatString,y=b.isXTime,i=b.isYTime,E=b.chartLabelEles,f,g,h,x,r,c,H=[],G=[],e,k,j,o,m;a.each(v,function(V,b){var Z=[],bb=[],cb=[],U,T,X,S,W,Y,ab=[];if(b.display==="exclude")return true;Y=A[V];b=a.extend(true,{display:"show",fitType:"line",markers:{visible:false,type:"circle"},visible:true},b);U=b.data;T=a.extend({stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},Y);S=b.markerStyle;S=a.extend({fill:T.stroke,stroke:T.stroke,opacity:1,width:3},S);X=B[V];W=a.extend(true,{},X,{transform:"s1.5","stroke-width":1},v.markerHoverStyle);r=[].concat(U.x);c=[].concat(U.y);j=l.set();k=[];x=b.fitType;o=false;if(b.markers.symbol&&b.markers.symbol.length)o=true;f=l.set();if(!t||t.length<=V||R.enabled&&!M.enabled)n=true;if(n)if(c.length>0){g=a.wijchart.getFirstValidListValue(c);if(i)g=a.toOADate(g);h=a.wijchart.getLastValidListValue(c);if(i)h=a.toOADate(h)}m=s.processYValues(c,b.display,P,q,H);a.each(c,function(d,p){e=r[d];if(y)e=a.toOADate(e);p=c[d];if(m[d].isHole){if(b.display==="excludeHole")return true;if(!m[d].isValue)return true}if(i)p=a.toOADate(p);if(e===undefined)return false;k=s.renderPoint(w,l,cb,k,j,Z,u,f,bb,E,z,n,g,h,e,p,U.y[d],O,x,y,i,d,S,W,b,o,D,N,r,c,m,b.display,q,ab,L)});s.renderPath(l,w,b,d,p,I,X,S,W,j,J,u,k,F,cb,T,C,Z,bb,f,V,Q,G,q,ab);K.push({markers:j,path:d[d.length-1],shadowPath:p[p.length-1],dcl:f})});a.each(d,function(b,a){a.tracker&&a.tracker.toFront()});a.each(d,function(b,a){a.markers&&a.markers.toFront()})};a.wijchart._line.prototype.renderPath=function(v,g,d,E,J,K,z,H,F,l,L,B,b,C,i,e,G,y,A,o,j,N,D,M,I){var c,x,u,k,f,w,n,t,q,m,r,h,s,p;c=v.path(b.join(" "));c.straight=i.join(" ");a.wijchart.paintShadow(c);if(j===0){D.length=0;if(b.length>1){f=b[1];w=b[b.length-2]}else{f=g.startX;w=g.endX}a.merge(D,["L",f,g.endY,"L",w,g.endY])}n=v.path(b.join(" "));c.tracker=n;if(e["stroke-width"])t=10+parseFloat(e["stroke-width"]);else t=10;n.attr({"stroke-width":t,stroke:"#C0C0C0",opacity:.01});a.wijraphael.addClass(a(n.node),"wijchart-canvas-object wijlinechart linetracker");a(n.node).data("owner",a(c.node));if(N==="area"){if(e.fill&&e.fill!=="none"){x=e.fill;delete e.fill}else x=e.stroke;u=.5;if(e["fill-opacity"]&&e["fill-opacity"]!=="none")u=e["fill-opacity"];c.wijAttr(e);if(b.length>1)f=b[1];else f=g.startX;if(M)if(j>0){m=Raphael.parsePathString(E[j-1].attr("path"));if(m&&m.length>0){for(s=m.length-1;s>=0;s--){r=m[s];if(r.length===3){b.push("L");b.push(r[1]);b.push(r[2])}}b.push("Z")}}else{b.push("V");b.push(g.endY);b.push("H");b.push(f);b.push("Z")}else{h=Raphael.parsePathString(c.attr("path"));if(h&&h.length>0){b=[];a.each(h,function(d,c){a.each(c,function(c,a){b.push(a)});if(c[0]==="M")f=c[1];if(d<h.length-1&&h[d+1][0]==="M"){b.push("V");b.push(g.endY);b.push("H");b.push(f);b.push("Z")}if(d===h.length-1){b.push("V");b.push(g.endY);b.push("H");b.push(f);b.push("Z")}})}}k=v.path(b.join(" "));a.wijraphael.addClass(a(k.node),"wijlinechart-area");k.wijAttr({fill:x,opacity:u,stroke:"none"});i.push("V");i.push(g.endY);i.push("H");i.push(f);i.push("Z");k.straight=i.join(" ");c.area=k;B.push(k);C.push({path:a.extend(true,{},c.attr()),area:a.extend(true,{},k.attr()),markers:y,labels:A})}else{p=a.extend(true,{},e);if(p.fill)delete p.fill;c.wijAttr(p);C.push({path:a.extend(true,{},c.attr()),markers:y,labels:A})}c.markers=l;E.push(c);if(c.shadow)J[j]=c.shadow;B.push(c);K[j]={lineStyle:e,lineHoverStyle:z,markerStyle:H,markerHoverStyle:F};(!d.markers.visible||d.display==="hide")&&l.hide();if(!d.visible||d.display==="hide"){c.hide();c.shadow&&c.shadow.hide();c.area&&c.area.hide();c.visible=false}d.markers.style&&l.attr(d.markers.style);l.toFront();if(o.length){q=a.extend(true,{},G);if(d.textStyle)q=a.extend(true,q,d.textStyle);o.attr(q);o.toFront();c.labels=o}L[j]=l;d.index=j;d.type="line";d.path=c;d.lineMarkers=l;d.lineStyle=e;d.lineHoverStyle=z;d.virtualMarkers=I;a.wijraphael.addClass(a(c.node),"wijchart-canvas-object wijlinechart");a(c.node).data("wijchartDataObj",d)};a.wijchart._line.prototype.renderPoint=function(d,F,t,n,X,M,Q,K,P,N,I,A,B,S,r,w,bb,o,V,W,C,c,y,J,u,R,L,Z,D,E,k,U,Y,O,T){var q=this,cb=d.endX-d.startX,ab=d.endY-d.startY,l=o.x.min,p=o.y.min,G=o.x.max,db=o.y.max,H=cb/(G-l),x=ab/(db-p),v,g,s,f=0,h,i,b,m,z=u.markers.visible,e=q.widget,j;if(isNaN(r)||typeof r==="string")s=c;else s=r;f=d.startX+(s-l)*H;h=d.endY-(w-p)*x;k[c].x=f;k[c].y=h;if(A){i=B+(S-B)/(G-l)*(s-l);i=d.endY-(i-p)*x;t.push(k[c].idx?"L":"M");t.push(f);t.push(i)}if(!k[c].isHole)n=q.getPathArrByFitType(n,V,c,E.length,d,D,E,f,h,W,C,r,w,H,x,l,p,k,U,Y);else return n;if(L){m=q.renderChartLabel(F,C,w,I,f,h,T);N.push(m);K.push(m);P.push(a.extend(true,{},m.attr()))}if(z){v=q.renderMarker(F,Z,R,u.markers,c,f,h,y);g=v.dot;if(A)g.straight=i}b={};b.valX=D[c];b.valY=bb;b.index=c;b.type="marker";b.lineSeries=u;b.x=f;b.y=h;b.markerStyle=y;b.markerHoverStyle=J;b.visible=true;if(z){b.marker=g;b.isSymbol=v.isSymbol;a(g.node).data("wijchartDataObj",b);X.push(g);M.push(a.extend(true,{},g.attr()));Q.push(g)}e.dataPoints=e.dataPoints||{};e.pointXs=e.pointXs||[];j=a.round(f,2);if(!e.dataPoints[j.toString()]){e.dataPoints[j.toString()]=[];e.pointXs.push(j)}e.dataPoints[j.toString()].push(b);O.push(b);return n};a.wijchart._line.prototype.processYValues=function(d,i,e,g,c){var h=[],b=0,f=0;a.each(d,function(k,l){if(!b)f=k;var j={isHole:false,isValue:true,idx:b,firstYIdx:f,x:0,y:0};b++;if(a.wijchart.isHole(l,e))if(g)d[k]=0;else{j.isHole=true;if(i==="excludeHole"){b--;j.idx=0}else{b=0;j.idx=0}if(!a.wijchart.isHole(e)&&l===e)j.isValue=true;else j.isValue=false}h.push(j);if(g&&k<c.length)d[k]+=c[k]});c.length=0;a.merge(c,d);return h};a.wijchart._line.prototype.renderMarker=function(h,n,l,c,m,j,k,d){var i,b=null,g=false,f,e;if(l){i=c.symbol;a.each(i,function(c,a){if(a.index===m){b=h.image(a.url,j-a.width/2,k-a.height/2,a.width,a.height);n.push(b);g=true;return false}})}if(b===null){f=c.type;e=d.width;b=h.paintMarker(f,j,k,e);c.visible&&b.attr(d)}a.wijraphael.addClass(a(b.node),"wijchart-canvas-object wijlinechart wijchart-canvas-marker");return{dot:b,isSymbol:g}};a.wijchart._line.prototype.renderChartLabel=function(i,h,f,d,j,k,g){var c,b,e;c=h?a.fromOADate(f):f;if(d&&d.length)c=Globalize.format(c,d,g);b=i.text(j,k,c);a.wijraphael.addClass(a(b.node),"wijlinechart-label");e=b.wijGetBBox();b.transform(Raphael.format("...T{0},{1}",0,-e.height));return b};a.wijchart._line.prototype.getAnchors=function(j,k,a,b,l,m){var n=(a-j)/2,o=(l-a)/2,c=Math.atan((a-j)/Math.abs(b-k)),d=Math.atan((l-a)/Math.abs(b-m)),e=0,f=0,h=0,g=0,i=0;c=k<b?Math.PI-c:c;d=m<b?Math.PI-d:d;e=Math.PI/2-(c+d)%(Math.PI*2)/2;f=n*Math.sin(e+c);h=n*Math.cos(e+c);g=o*Math.sin(e+d);i=o*Math.cos(e+d);return{x1:a-f,y1:b+h,x2:a+g,y2:b+i}};a.wijchart._line.prototype.getPathArrByFitType=function(b,n,c,h,q,C,D,d,e,A,B,w,I,x,H,v,F,g,z,u){var G=this,p=null,t=0,y=0,r=0,s=0,o=null,m=null,E=g[c],l=false,j=E.idx,f,i=c-1,k=c+1;if(z==="excludeHole"&&!u){if(c>0&&c<h-1){k=-1;i=-1;for(f=c+1;f<h;f++){l=true;if(g[f].isHole)continue;k=f;l=false;break}for(f=c-1;f>=0;f--){if(g[f].isHole)continue;i=f;break}if(i>-1){r=g[i].x;t=g[i].y}}}else{if(c<h-1)l=g[k].isHole;if(c>0&&c<h-1){r=g[i].x;t=g[i].y}}if(u)n="line";if(n==="line")b=b.concat([j?"L":"M",d,e]);else if(n==="spline")if(!j)if(c===h-1)b=b.concat(["M",d,e]);else if(l)b=b.concat(["M",d,e]);else b=b.concat(["M",d,e,"C",d,e]);else if(j&&c<h-1&&!l){p=D[k];if(B)p=a.toOADate(p);y=q.endY-(p-F)*H;if(isNaN(w)||typeof w==="string")s=q.startX+(k-v)*x;else{o=C[k];if(A)o=a.toOADate(o);s=q.startX+(o-v)*x}m=G.getAnchors(r,t,d,e,s,y);b=b.concat([m.x1,m.y1,d,e,m.x2,m.y2])}else b=b.concat([d,e,d,e]);else if(n==="bezier")if(!j)b=b.concat(["M",d,e]);else if(c<h-1&&g[c+1].isHole&&j%2===1||c===h-1&&j%2===1)b=b.concat(["Q",d,e,d,e]);else if(j%2===0)b=b.concat([d,e]);else b=b.concat(["Q",d,e]);return b};a.wijchart._line.prototype.bindLiveEvents=function(b,o,m,d,f,j,h,i,g,k,e){var c={element:b,mousedown:function(g){if(e)return;var c=a(g.target),d,h=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){h=d.lineSeries;if(!h.markers.visible)f.call(b,g,h);else f.call(b,g,d)}else f.call(b,g,d)},mouseup:function(f){if(e)return;var c=a(f.target),d,g=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){g=d.lineSeries;if(!g.markers.visible)j.call(b,f,g);else j.call(b,f,d)}else j.call(b,f,d)},mouseover:function(f){if(e)return;var c=a(f.target),d,g=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){g=d.lineSeries;if(!g.markers.visible)h.call(b,f,g);else h.call(b,f,d)}else h.call(b,f,d)},mouseout:function(f){if(e)return;var c=a(f.target),d,g=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){g=d.lineSeries;if(!g.markers.visible)i.call(b,f,g);else i.call(b,f,d)}else i.call(b,f,d)},mousemove:function(f){if(e)return;var c=a(f.target),d,h=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){h=d.lineSeries;if(!h.markers.visible)g.call(b,f,h);else g.call(b,f,d)}else g.call(b,f,d)},click:function(f){if(e)return;var c=a(f.target),d,g=null;if(c.data("owner"))c=c.data("owner");d=c.data("wijchartDataObj");if(c.hasClass("wijchart-canvas-marker")){g=d.lineSeries;if(!g.markers.visible)k.call(b,f,g);else k.call(b,f,d)}else k.call(b,f,d)}};a(".wijlinechart",b[0]).live("mousedown."+d,a.proxy(c.mousedown,c)).live("mouseup."+d,a.proxy(c.mouseup,c)).live("mouseover."+d,a.proxy(c.mouseover,c)).live("mouseout."+d,a.proxy(c.mouseout,c)).live("mousemove."+d,a.proxy(c.mousemove,c)).live("click."+d,a.proxy(c.click,c))};a.wijchart._line.prototype.unbindLiveEvents=function(c,b){a(".wijlinechart",c[0]).die(b).die("."+b)};a.fn.extend({wijline:function(b){new a.wijchart._line(this,b)}})})(jQuery);