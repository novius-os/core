/*
 *
 * Wijmo Library 2.3.7
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 **/
(function(a){"use strict";if(!window.Raphael)return;Raphael.fn.isoTri=function(a,b,c,d,k){var e=a,h=b+d/2,f=a+c,i=b,g=a+c,j=b+d,l;if(k==="north"){e=a;h=b;f=a-c/2;i=b+d;g=a+c/2;j=b+d}else if(k==="east"){e=a-c/2;h=b-d/2;f=a-c/2;i=b+d/2;g=a+c/2;j=b}else if(k==="west"){e=a-c/2;h=b;f=a+c/2;i=b-d/2;g=a+c/2;j=b+d/2}l=["M",e,h,"L",f,i,"L",g,j,"z"];return this.path(l.concat(" "))};a.wijgauge={math:{mod360:function(b){var a=b%360;if(b<0)a+=360;return a},getAngle:function(e,d,f){var a=this,b=a.distance(d,f),c=a.distance(d,e),g=a.distance(f,e),i=b*b,j=c*c,k=g*g,h=Math.acos((k-j-i)/(-2*c*b));return Math.round(180/Math.PI*h)},distance:function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},log:function(b,a){return b<=0?NaN:a===1||a<0?NaN:Math.log(b)/Math.log(a)}},decoratorUtils:{generateValues:function(b,f,a){var d=[],e,c;if(f>b&&a>0){e=parseInt((f-b)/a+1,10);for(c=0;c<e;c++)d.push(b+c*a)}else a===0&&d.push(b);return d},isInRange:function(a,c,b){return a>=c&&a<=b||a<=c&&a>=b}},paintMarker:function(a,c,f,g,b,d,h){var e;if(c==="rect")return a.rect(f-b/2,g-d/2,b,d);else{if(h)if(c==="tri")e=a.isoTri(f,g,b,d);else e=a.paintMarker(c,f,g,d);else e=a.paintMarker(c,f,g,b);return e}},formatString:function(c,b){if(a.isFunction(b))return b.call(this,c);else if(b!==""){var e=/\{0(?::((?:n|d|p|c)\d?))?\}/gi,f,d;if(e.test(b)){f=b.match(e);d=RegExp.$1;return b.replace(/\{0(?::(?:(?:n|d|p|c)\d?))?\}/gi,Globalize.format(c,d))}}return c}}})(jQuery);(function(a){"use strict";a.widget("wijmo.wijgauge",{options:{value:0,max:100,min:0,width:600,height:400,tickMajor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:2,visible:true,marker:"rect",offset:0,interval:10},tickMinor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:1,visible:false,marker:"rect",offset:0,interval:5},pointer:{length:1,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:0,shape:"tri",visible:true,template:null},islogarithmic:false,logarithmicBase:10,labels:{format:"",style:{fill:"#1E395B","font-size":12,"font-weight":"800"},visible:true,offset:0},animation:{enabled:true,duration:2e3,easing:">"},face:{style:{fill:"270-#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":4},template:null},marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,ranges:[],isInverted:false,beforeValueChanged:null,valueChanged:null,painted:null},_create:function(){var c=this,b=c.options,e;if(window.wijmoApplyWijTouchUtilEvents)a=window.wijmoApplyWijTouchUtilEvents(a);c.element.is(":hidden")&&c.element.wijAddVisibilityObserver&&c.element.wijAddVisibilityObserver(function(){c.redraw();c.element.wijRemoveVisibilityObserver&&c.element.wijRemoveVisibilityObserver()},"wijgauge");isNaN(b.width)&&c._setDefaultWidth();isNaN(b.height)&&c._setDefaultHeight();c._setDefaultWidthHeight();b.disabled&&c.disable();if(b.face&&b.face.template&&typeof b.face.template==="string"&&window[b.face.template])b.face.template=window[b.face.template];if(b.pointer&&b.pointer.template&&typeof b.pointer.template==="string"&&window[b.pointer.template])b.pointer.template=window[b.pointer.template];if(b.cap&&b.cap.template&&typeof b.cap.template==="string"&&window[b.cap.template])b.cap.template=window[b.cap.template];c.element.addClass("ui-widget").toggleClass("ui-state-disabled",b.disabled);try{c.canvas=new Raphael(c.element[0],b.width,b.height)}catch(f){var d=c.element.css("display");e=a("<div></div>").insertBefore(c.element).append(c.element);c.element.addClass("ui-helper-hidden-accessible").appendTo(a("body"));d==="none"&&c.element.css("display","block");c.canvas=new Raphael(c.element[0],b.width,b.height);c.element.appendTo(e).unwrap().removeClass("ui-helper-hidden-accessible");d==="none"&&c.element.css("display","none")}c._autoCalculate();c._draw()},_autoCalculate:function(){},_setDefaultWidth:function(){},_setDefaultHeight:function(){},_setDefaultWidthHeight:function(){var c=this,a=c.element,d=c.options,b=a.get(0).style,f=b.width,e=b.height;if(f!=="")d.width=a.width();if(e!=="")d.height=a.height()},_setOption:function(d,c){var b=this,f=b.options,e=f[d];if(d==="disabled"){b._handleDisabledOption(c,b.element);a.Widget.prototype._setOption.apply(b,arguments)}else if(d==="value"){if(b._trigger("beforeValueChanged",null,{newValue:c,oldValue:e})){a.Widget.prototype._setOption.apply(b,arguments);b._set_value(c,e)}b._trigger("valueChanged",null,{newValue:c,oldValue:e})}else{a.Widget.prototype._setOption.apply(b,arguments);if(a.isPlainObject(c))f[d]=a.extend({},e,c);if(f.radius==="auto"){b._autoCalculate();b.redraw();return}b["_set_"+d]&&b["_set_"+d](c,e)}},_set_value:function(){this._setPointer()},_set_max:function(){this._redrawMarksAndLabels();this._set_ranges();this._setPointer()},_set_min:function(){this._redrawMarksAndLabels();this._set_ranges();this._setPointer()},_set_width:function(){this.redraw()},_set_height:function(){this.redraw()},_set_tickMajor:function(){this._redrawMarksAndLabels()},_set_tickMinor:function(){this._redrawMarksAndLabels()},_set_pointer:function(){var a=this;if(a.pointer){a.pointer.wijRemove();a.pointer=null}a._paintPointer();a._setPointer()},_clearState:function(){var a=this;if(a.markBbox)a.markBbox=null;a.labels=[];a.majorMarks=[];a.minorMarks=[];a.face=null;a.pointer=null},_set_face:function(){var a=this;if(a.face){a.face.wijRemove();a.face=null;a._paintFace();a._resetElementPosition()}},_set_islogarithmic:function(){var a=this;a._redrawMarksAndLabels();a._setPointer()},_set_isIncerted:function(){this.redraw()},_set_logarithmicBase:function(){var a=this;a._redrawMarksAndLabels();a._setPointer()},_set_labels:function(){this._redrawMarksAndLabels()},_set_margin:function(b,a){b!==a&&this.redraw()},_set_marginTop:function(b,a){this._set_margin(b,a)},_set_marginBottom:function(b,a){this._set_margin(b,a)},_set_marginLeft:function(b,a){this._set_margin(b,a)},_set_marginRight:function(b,a){this._set_margin(b,a)},_set_ranges:function(){var a=this;a._removeRanges();a._paintRanges();a._resetElementPosition()},_resetElementPosition:function(c){var b=this;c&&b.ranges&&a.each(b.ranges,function(b,a){a.toFront()});b.majorMarks&&a.each(b.majorMarks,function(b,a){a.toFront()});b.minorMarks&&a.each(b.minorMarks,function(b,a){a.toFront()});b.labels&&a.each(b.labels,function(b,a){a.toFront()});b.pointer&&b.pointer.toFront();b.cap&&b.cap.toFront()},_redrawMarksAndLabels:function(){var a=this;a._removeMarksAndLabels();a._drawMarksAndLabels()},_removeMarksAndLabels:function(){var b=this;a.each(b.labels,function(a,c){c.wijRemove();b.labels[a]=null});a.each(b.majorMarks,function(a,c){c.wijRemove();b.majorMarks[a]=null});a.each(b.minorMarks,function(a,c){c.wijRemove();b.minorMarks[a]=null})},_drawMarksAndLabels:function(){var a=this;a.labels=[];a.majorMarks=[];a.minorMarks=[];a._paintMarks()},_triggerPainted:function(){return this._trigger("painted")},_draw:function(){var b=this,c=b.options;b.pointer=null;b._innerBbox={width:c.width-c.marginLeft-c.marginRight,height:c.height-c.marginTop-c.marginBottom,left:c.marginLeft,top:c.marginTop};b._paintFace();b.ranges&&b._removeRanges();b._paintRanges();b._drawMarksAndLabels();b._paintPointer();if(b.pointer){b._setOffPointerValue();b._setPointer()}a.wijraphael.clearRaphaelCache();b._triggerPainted()},redraw:function(){var a=this,b=a.options;a.element.empty();this._clearState();a.canvas=new Raphael(a.element[0],b.width,b.height);a._draw()},destroy:function(){var b=this;b._unbindEvents(b.majorMarks);b._unbindEvents(b.minorMarks);b._unbindEvents(b.labels);b.element.removeClass("ui-widget").empty();if(b.disabledDiv){b.disabledDiv.remove();b.disabledDiv=null}a.Widget.prototype.destroy.apply(b,arguments)},getCanvas:function(){return this.canvas},_percentage:function(){var e=this,b=e.options,d=b.max,a=b.min,c=b.value;return isNaN(c)?0:d===a?1:(c-a)/(d-a)},_valueToLogical:function(e){var i=this,b=i.options,f=b.min,g=b.max,h=b.logarithmicBase,c,d;if(e<f)return 0;if(g<e)return 1;c=(e-f)/(g-f);if(!b.islogarithmic)d=c;else d=a.wijgauge.math.log(1+(h-1)*c,b.logarithmicBase);return d},_logicalToValue:function(b){var f=this,a=f.options,e=a.max,d=a.min,c;if(b<0)return d;if(1<=b)return e;if(!a.islogarithmic)c=b;else{if(a.logarithmicBase<=1)return a.min;c=(Math.pow(a.logarithmicBase,b)-1)/(a.logarithmicBase-1)}return d+(e-d)*c},_paintFace:function(){},_paintRanges:function(){var b=this,d=b.options,c=d.ranges||[];b.ranges=[];a.each(c,function(c,a){b._paintRange(a)})},_removeRanges:function(){var b=this;a.each(b.ranges,function(a,c){c.wijRemove();b.ranges[a]=null})},_paintMarks:function(){var b=this,c=b.options,d=a.wijgauge.decoratorUtils.generateValues,e=d(c.min,c.max,c.tickMajor.interval),g=d(c.min,c.max,c.tickMinor.interval),f=c.labels,h=f.visible;c.tickMajor.visible&&a.each(e,function(d,a){b.majorMarks.push(b._paintMark(a,c.tickMajor,true));h&&b.labels.push(b._paintLabel(a,f))});c.tickMinor.visible&&a.each(g,function(g,f){var d=false;a.each(e,function(b,a){if(f===a){d=true;return false}});!d&&b.minorMarks.push(b._paintMark(f,c.tickMinor,false))});b._bindClickEvents(b.majorMarks);b._bindClickEvents(b.minorMarks);b._bindClickEvents(b.labels)},_bindClickEvents:function(c){var b=this;a.each(c,function(d,c){a(c.node).bind("click."+b.widgetName,function(a){b._trigger("click",a,{ele:c})})})},_unbindEvents:function(b){var c=this;a.each(b,function(d,b){a(b.node).unbind("."+c.widgetName)})},_paintLabel:function(){},_paintMark:function(){},_paintPointer:function(){},_setPointer:function(){a.wijraphael.clearRaphaelCache()},_setOffPointerValue:function(){},_handleDisabledOption:function(b,c){var a=this;if(b){if(!a.disabledDiv)a.disabledDiv=a._createDisabledDiv(c);a.disabledDiv.appendTo("body")}else if(a.disabledDiv){a.disabledDiv.remove();a.disabledDiv=null}},_createDisabledDiv:function(i){var e=this,f=e.options,c=i||e.element,d=c.offset(),h=f.width||c.outerWidth(),g=f.height||c.outerHeight(),b;b=a("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:h,height:g,left:d.left,top:d.top});Raphael.vml&&b.addClass("ui-state-disabled").css("background-color","#fff");return b}})})(jQuery);