/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*!
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

/*
 * Globalize Cultures
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * This file was generated by the Globalize Culture Generator
 * Translation: bugs found in this file need to be fixed in the generator
 */

/* Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.6
 *
 * Requires: jQuery 1.2.2+
 */

/*!
 * jQuery Form Plugin
 * version: 3.46.0-2013.11.21
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI Mouse 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Droppable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */

/*!
 * jQuery UI Resizable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Sortable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Dialog 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */

/*!
 * jQuery UI Button 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Datepicker 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 *
 * Depends:
 *	jquery.ui.core.js
 */

/*!
 * jQuery UI Effects 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*!
 * jQuery UI Effects Blind 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */

/*!
 * jQuery UI Effects Slide 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */

/*!
 * jQuery UI Effects Scale 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */

/*!
 * jQuery UI Effects Transfer 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */

/*!
 * jQuery UI Effects Fade 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */

/*! jQuery UI - v1.9.2 - 2013-02-15
 * http://jqueryui.com
 * Includes: jquery.ui.datepicker-af.js, jquery.ui.datepicker-ar-DZ.js, jquery.ui.datepicker-ar.js, jquery.ui.datepicker-az.js, jquery.ui.datepicker-bg.js, jquery.ui.datepicker-bs.js, jquery.ui.datepicker-ca.js, jquery.ui.datepicker-cs.js, jquery.ui.datepicker-cy-GB.js, jquery.ui.datepicker-da.js, jquery.ui.datepicker-de.js, jquery.ui.datepicker-el.js, jquery.ui.datepicker-en-AU.js, jquery.ui.datepicker-en-GB.js, jquery.ui.datepicker-en-NZ.js, jquery.ui.datepicker-eo.js, jquery.ui.datepicker-es.js, jquery.ui.datepicker-et.js, jquery.ui.datepicker-eu.js, jquery.ui.datepicker-fa.js, jquery.ui.datepicker-fi.js, jquery.ui.datepicker-fo.js, jquery.ui.datepicker-fr-CH.js, jquery.ui.datepicker-fr.js, jquery.ui.datepicker-gl.js, jquery.ui.datepicker-he.js, jquery.ui.datepicker-hi.js, jquery.ui.datepicker-hr.js, jquery.ui.datepicker-hu.js, jquery.ui.datepicker-hy.js, jquery.ui.datepicker-id.js, jquery.ui.datepicker-is.js, jquery.ui.datepicker-it.js, jquery.ui.datepicker-ja.js, jquery.ui.datepicker-ka.js, jquery.ui.datepicker-kk.js, jquery.ui.datepicker-km.js, jquery.ui.datepicker-ko.js, jquery.ui.datepicker-lb.js, jquery.ui.datepicker-lt.js, jquery.ui.datepicker-lv.js, jquery.ui.datepicker-mk.js, jquery.ui.datepicker-ml.js, jquery.ui.datepicker-ms.js, jquery.ui.datepicker-nl-BE.js, jquery.ui.datepicker-nl.js, jquery.ui.datepicker-no.js, jquery.ui.datepicker-pl.js, jquery.ui.datepicker-pt-BR.js, jquery.ui.datepicker-pt.js, jquery.ui.datepicker-rm.js, jquery.ui.datepicker-ro.js, jquery.ui.datepicker-ru.js, jquery.ui.datepicker-sk.js, jquery.ui.datepicker-sl.js, jquery.ui.datepicker-sq.js, jquery.ui.datepicker-sr-SR.js, jquery.ui.datepicker-sr.js, jquery.ui.datepicker-sv.js, jquery.ui.datepicker-ta.js, jquery.ui.datepicker-th.js, jquery.ui.datepicker-tj.js, jquery.ui.datepicker-tr.js, jquery.ui.datepicker-uk.js, jquery.ui.datepicker-vi.js, jquery.ui.datepicker-zh-CN.js, jquery.ui.datepicker-zh-HK.js, jquery.ui.datepicker-zh-TW.js
 * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/*
 *
 * Wijmo Library 3.20133.20
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 */

/*
 *
 * Wijmo Library 3.20133.20
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 */

/*
 *
 * Wijmo Library 3.20133.20
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 */

/*
 *
 * Wijmo Library 3.20131.4
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 */

/*
 *
 * Wijmo Library 3.20133.20
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 *
 * Licensed under the Wijmo Commercial License. Also available under the GNU GPL Version 3 license.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 *
 */

//	if (tFilter.IsSymbol(c))

/*!this.ContextMenu.IsShow() && */

//		var ret = this.IsSpace(c);

/**
 * NOVIUS OS - Web OS for digital communication
 *
 * @copyright  2011 Novius
 * @license    GNU Affero General Public License v3 or (at your option) any later version
 *             http://www.gnu.org/licenses/agpl-3.0.html
 * @link http://www.novius-os.org
 */

function __wijReadOptionEvents(e,t){for(var n=0;n<e.length;n++)t.options[e[n]]!==null&&t.element.bind(e[n],t.options[e[n]]);for(var n in t.options)if(n.indexOf(" ")!==-1){var r=n.split(" ");for(var i=0;i<r.length;i++)r[i].length>0&&t.element.bind(r[i],t.options[n])}}function wijmoASPNetParseOptionsReviewer(o,k){var a,v=o[k],d;if(v)switch(typeof v){case"string":a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?):(\d{3})Z$/.exec(v),a&&(d=new Date(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6],+a[7]),d.setFullYear(+a[1]),o[k]=d);break;case"object":if(v.needQuotes!==undefined&&v.valueString!==undefined)v.needQuotes?o[k]=v.valueString:o[k]=eval(v.valueString);else for(k in v)wijmoASPNetParseOptionsReviewer(v,k)}}function wijmoASPNetParseOptions(e){var t;if(!e)return e;for(t in e)wijmoASPNetParseOptionsReviewer(e,t);return e}window.log=function(){log.history=log.history||[],log.history.push(arguments),this.console&&console.log(Array.prototype.slice.call(arguments))},function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;r=n.pop();)e[r]=e[r]||t}(window.console=window.console||{}),define("log",function(){}),function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(!w.acceptData(e))return;var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=c.pop()||w.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:w.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[w.camelCase(n)])):s=o,s}function R(e,t,n){if(!w.acceptData(e))return;var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!z(o[u]))return}s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function U(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e){if(t==="data"&&w.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(w.find.attr(e,"type")!==null)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!w.hasData(e))return;var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,w.css(e,"display")==="none"||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=w.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=w.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&w.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&w.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,w.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e){r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],w.css(e,"display")==="inline"&&w.css(e,"float")==="none"&&(!w.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if($n.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){if(o.addEventListener||e.type==="load"||o.readyState==="complete")P(),w.ready()},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=T.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0));if(N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=o.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!w.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r)}return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?--w.readyWait:w.isReady)return;if(!o.body)return setTimeout(w.ready);w.isReady=!0;if(e!==!0&&--w.readyWait>0)return;n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready")},isFunction:function(e){return w.type(e)==="function"},isArray:Array.isArray||function(e){return w.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||w.type(e)!=="object"||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=w.trim(t);if(t&&C.test(t.replace(L,"@").replace(A,"]").replace(k,"")))return(new Function("return "+t))()}w.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:b&&!b.call("﻿ ")?function(e){return e==null?"":b.call(e)}:function(e){return e==null?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(H(Object(e))?w.merge(n,typeof e=="string"?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(w.type(r)==="object"){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n){n=w.Deferred();if(o.readyState==="complete")setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=e.frameElement==null&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;(t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,w=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&St(e.slice(a,r)),r<i&&St(e=e.slice(r)),r<i&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&gt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:E,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=ft(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=Y.test(t.querySelectorAll))ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(E,e)?-1:n===t||y(E,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return ct(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return e.compareDocumentPosition(h.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!r.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(F,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e=typeof e=="string"?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!i||f)&&(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=r!==1||e&&w.isFunction(e.promise)?r:0,s=i===1?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone=o.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=s.getAttribute("value")==="",s.value="t",s.setAttribute("type","radio"),t.radioValue=s.value==="t",s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in w(t))break;return t.ownLast=h!=="0",w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];if(!a)return;n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=w.data(u);if(u.nodeType===1&&!w._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else if(n===i||n==="boolean")this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace($,""):n==null?"":n);return}return i=w.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,w(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":w.isArray(s)&&(s=w.map(s,function(e){return e==null?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(w.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){t=w(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=w.inArray(w(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===i)return w.prop(e,n,r);if(u!==1||!w.isXMLDoc(e))n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W);if(r===t)return s&&"get"in s&&(o=s.get(e,n))!==null?o:(o=w.find.attr(e,n),o==null?t:o);if(r!==null)return s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);w.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&e.nodeType===1)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&t==="radio"&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Y||!G)w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return W&&W.set(e,t,n);e.defaultValue=t}};G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,t===""?!1:t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||!!e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(!m||!(l=m.events))return;t=(t||"").match(S)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)w.event.remove(e,p+t[f],n,r,!0);continue}c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&w.removeEvent(e,p,m.handle),delete l[p])}w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||o;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+w.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[w.expando]?n:new w.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!w.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!w.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")w.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)});return!1}w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){n++===0&&o.addEventListener(e,r,!0)},teardown:function(){--n===0&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,typeof e=="string"&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?w(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?typeof e=="string"?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!w(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(w.support.htmlSerialize||!mt.test(e))&&(w.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(l<=1||typeof d!="string"||w.support.checkClone||!Tt.test(d)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=w.map(jt(a,"script"),_t),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,w.map(o,Dt);for(f=0;f<s;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")))}a=r=null}}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!w.support.noCloneEvent||!w.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(w.type(s)==="object")w.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!w.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&w.inArray(s,r)!==-1)continue;o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;(n=e[u])!=null;u++)if(t||w.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+E+")(.*)$","i"),Jt=new RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=w.camelCase(n),f=e.style;n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!w.cssNumber[a]&&(r+="px"),!w.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!w.contains(e.ownerDocument,e)&&(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,w.support.boxSizing&&w.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&w.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&(e.style&&e.style.display||w.css(e,"display"))==="none"},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return n==null?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional);if(w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l);if(l)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(mn[3]||(mn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(b===2)return x;a=c.global,a&&w.active++===0&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&b!==2){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||s!=="px"&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=w.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(e.elem.style[w.cssProps[e.prop]]!=null||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&typeof e=="object"?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};r.duration=w.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;Xn=w.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");r==="static"&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=(r==="absolute"||r==="fixed")&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return w.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&w.css(e,"position")==="static")e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=w:(e.jQuery=e.$=w,typeof define=="function"&&define.amd&&define("jquery",[],function(){return w}))}(window),function(e){typeof define=="function"&&define.amd?define("jquery.cookie",["jquery"],e):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;n=function(e){return new n.prototype.init(e)},typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?module.exports=n:e.Globalize=n,n.cultures={},n.prototype={constructor:n,init:function(e){return this.cultures=n.cultures,this.cultureSelector=e,this}},n.prototype.init.prototype=n.prototype,n.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},n.cultures["default"].calendar=n.cultures["default"].calendars.standard,n.cultures.en=n.cultures["default"],n.cultureSelector="en",r=/^0x[a-f0-9]+$/i,i=/^[+\-]?infinity$/i,s=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,u=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},f=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,p=arguments.length,d=!1;typeof u=="boolean"&&(d=u,u=arguments[1]||{},a=2),typeof u!="object"&&!c(u)&&(u={});for(;a<p;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;d&&i&&(h(i)||(s=l(i)))?(s?(s=!1,o=r&&l(r)?r:[]):o=r&&h(r)?r:{},u[n]=f(d,o,i)):i!==t&&(u[n]=i)}return u},l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c=function(e){return Object.prototype.toString.call(e)==="[object Function]"},h=function(e){return Object.prototype.toString.call(e)==="[object Object]"},p=function(e,t){return e.indexOf(t)===0},d=function(e){return(e+"").replace(o,"")},v=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},m=function(e,t,n){var r;for(r=e.length;r<t;r+=1)e=n?"0"+e:e+"0";return e},g=function(e,t){var n=0,r=!1;for(var i=0,s=e.length;i<s;i++){var o=e.charAt(i);switch(o){case"'":r?t.push("'"):n++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(o),r=!1}}return n},y=function(e,t){t=t||"F";var n,r=e.patterns,i=t.length;if(i===1){n=r[t];if(!n)throw"Invalid date format string '"+t+"'.";t=n}else i===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},b=function(e,t,n){function T(e,t){var n,r=e+"";return t>1&&r.length<t?(n=c[t-2]+r,n.substr(n.length-t,t)):(n=r,n)}function N(){return h||p?h:(h=d.test(t),p=!0,h)}function C(e,t){if(w)return w[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var r=n.calendar,i=r.convert,s;if(!t||!t.length||t==="i"){if(n&&n.name.length)if(i)s=b(e,r.patterns.F,n);else{var o=new Date(e.getTime()),u=S(e,r.eras);o.setFullYear(x(e,r,u)),s=o.toLocaleString()}else s=e.toString();return s}var a=r.eras,f=t==="s";t=y(r,t),s=[];var l,c=["0","00","000"],h,p,d=/([^d]|^)(d|dd)([^d]|$)/g,v=0,m=E(),w;!f&&i&&(w=i.fromGregorian(e));for(;;){var k=m.lastIndex,L=m.exec(t),A=t.slice(k,L?L.index:t.length);v+=g(A,s);if(!L)break;if(v%2){s.push(L[0]);continue}var O=L[0],M=O.length;switch(O){case"ddd":case"dddd":var _=M===3?r.days.namesAbbr:r.days.names;s.push(_[e.getDay()]);break;case"d":case"dd":h=!0,s.push(T(C(e,2),M));break;case"MMM":case"MMMM":var D=C(e,1);s.push(r.monthsGenitive&&N()?r.monthsGenitive[M===3?"namesAbbr":"names"][D]:r.months[M===3?"namesAbbr":"names"][D]);break;case"M":case"MM":s.push(T(C(e,1)+1,M));break;case"y":case"yy":case"yyyy":D=w?w[0]:x(e,r,S(e,a),f),M<4&&(D%=100),s.push(T(D,M));break;case"h":case"hh":l=e.getHours()%12,l===0&&(l=12),s.push(T(l,M));break;case"H":case"HH":s.push(T(e.getHours(),M));break;case"m":case"mm":s.push(T(e.getMinutes(),M));break;case"s":case"ss":s.push(T(e.getSeconds(),M));break;case"t":case"tt":D=e.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",s.push(M===1?D.charAt(0):D);break;case"f":case"ff":case"fff":s.push(T(e.getMilliseconds(),3).substr(0,M));break;case"z":case"zz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),M));break;case"zzz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),2)+":"+T(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":r.eras&&s.push(r.eras[S(e,a)].name);break;case"/":s.push(r["/"]);break;default:throw"Invalid date format pattern '"+O+"'."}}return s.join("")},function(){var e;e=function(e,t,n){var r=n.groupSizes,i=r[0],s=1,o=Math.pow(10,t),u=Math.round(e*o)/o;isFinite(u)||(u=e),e=u;var a=e+"",f="",l=a.split(/e/i),c=l.length>1?parseInt(l[1],10):0;a=l[0],l=a.split("."),a=l[0],f=l.length>1?l[1]:"",c>0?(f=m(f,c,!1),a+=f.slice(0,c),f=f.substr(c)):c<0&&(c=-c,a=m(a,c+1,!0),f=a.slice(-c,a.length)+f,a=a.slice(0,-c)),t>0?f=n["."]+(f.length>t?f.slice(0,t):m(f,t)):f="";var h=a.length-1,p=n[","],d="";while(h>=0){if(i===0||i>h)return a.slice(0,h+1)+(d.length?p+d+f:f);d=a.slice(h-i+1,h+1)+(d.length?p+d:""),h-=i,s<r.length&&(i=r[s],s++)}return a.slice(0,h+1)+p+d+f},w=function(t,n,r){if(!isFinite(t))return t===Infinity?r.numberFormat.positiveInfinity:t===-Infinity?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!n||n==="i")return r.name.length?t.toLocaleString():t.toString();n=n||"D";var i=r.numberFormat,s=Math.abs(t),o=-1,u;n.length>1&&(o=parseInt(n.slice(1),10));var a=n.charAt(0).toUpperCase(),f;switch(a){case"D":u="n",s=v(s),o!==-1&&(s=m(""+s,o,!0)),t<0&&(s="-"+s);break;case"N":f=i;case"C":f=f||i.currency;case"P":f=f||i.percent,u=t<0?f.pattern[0]:f.pattern[1]||"n",o===-1&&(o=f.decimals),s=e(s*(a==="P"?100:1),o,f);break;default:throw"Bad number format specifier: "+a}var l=/n|\$|-|%/g,c="";for(;;){var h=l.lastIndex,p=l.exec(u);c+=u.slice(h,p?p.index:u.length);if(!p)break;switch(p[0]){case"n":c+=s;break;case"$":c+=i.currency.symbol;break;case"-":/[1-9]/.test(s)&&(c+=i["-"]);break;case"%":c+=i.percent.symbol}}return c}}(),E=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},S=function(e,t){if(!t)return 0;var n,r=e.getTime();for(var i=0,s=t.length;i<s;i++){n=t[i].start;if(n===null||r>=n)return i}return 0},x=function(e,t,n,r){var i=e.getFullYear();return!r&&t.eras&&(i-=t.eras[n].offset),i},function(){var e,t,n,r,i,s,o;e=function(e,t){if(t<100){var n=new Date,r=S(n),i=x(n,e,r),s=e.twoDigitYearMax;s=typeof s=="string"?(new Date).getFullYear()%100+parseInt(s,10):s,t+=i-i%100,t>s&&(t-=100)}return t},t=function(e,t,n){var r,i=e.days,a=e._upperDays;return a||(e._upperDays=a=[o(i.names),o(i.namesAbbr),o(i.namesShort)]),t=s(t),n?(r=u(a[1],t),r===-1&&(r=u(a[2],t))):r=u(a[0],t),r},n=function(e,t,n){var r=e.months,i=e.monthsGenitive||e.months,a=e._upperMonths,f=e._upperMonthsGen;a||(e._upperMonths=a=[o(r.names),o(r.namesAbbr)],e._upperMonthsGen=f=[o(i.names),o(i.namesAbbr)]),t=s(t);var l=u(n?a[1]:a[0],t);return l<0&&(l=u(n?f[1]:f[0],t)),l},r=function(e,t){var n=e._parseRegExp;if(!n)e._parseRegExp=n={};else{var r=n[t];if(r)return r}var i=y(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],u=0,a=0,f=E(),l;while((l=f.exec(i))!==null){var c=i.slice(u,l.index);u=f.lastIndex,a+=g(c,s);if(a%2){s.push(l[0]);continue}var h=l[0],p=h.length,d;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\/)";break;default:throw"Invalid date format pattern '"+h+"'."}d&&s.push(d),o.push(l[0])}g(i.slice(u),s),s.push("$");var v=s.join("").replace(/\s+/g,"\\s+"),m={regExp:v,groups:o};return n[t]=m},i=function(e,t,n){return e<t||e>n},s=function(e){return e.split(" ").join(" ").toUpperCase()},o=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=s(e[n]);return t},T=function(s,o,u){s=d(s);var a=u.calendar,f=r(a,o),l=(new RegExp(f.regExp)).exec(s);if(l===null)return null;var c=f.groups,h=null,v=null,m=null,g=null,y=null,b=0,w,E=0,S=0,x=0,T=null,N=!1;for(var C=0,k=c.length;C<k;C++){var L=l[C+1];if(L){var A=c[C],O=A.length,M=parseInt(L,10);switch(A){case"dd":case"d":g=M;if(i(g,1,31))return null;break;case"MMM":case"MMMM":m=n(a,L,O===3);if(i(m,0,11))return null;break;case"M":case"MM":m=M-1;if(i(m,0,11))return null;break;case"y":case"yy":case"yyyy":v=O<4?e(a,M):M;if(i(v,0,9999))return null;break;case"h":case"hh":b=M,b===12&&(b=0);if(i(b,0,11))return null;break;case"H":case"HH":b=M;if(i(b,0,23))return null;break;case"m":case"mm":E=M;if(i(E,0,59))return null;break;case"s":case"ss":S=M;if(i(S,0,59))return null;break;case"tt":case"t":N=a.PM&&(L===a.PM[0]||L===a.PM[1]||L===a.PM[2]);if(!N&&(!a.AM||L!==a.AM[0]&&L!==a.AM[1]&&L!==a.AM[2]))return null;break;case"f":case"ff":case"fff":x=M*Math.pow(10,3-O);if(i(x,0,999))return null;break;case"ddd":case"dddd":y=t(a,L,O===3);if(i(y,0,6))return null;break;case"zzz":var _=L.split(/:/);if(_.length!==2)return null;w=parseInt(_[0],10);if(i(w,-12,13))return null;var D=parseInt(_[1],10);if(i(D,0,59))return null;T=w*60+(p(L,"-")?-D:D);break;case"z":case"zz":w=M;if(i(w,-12,13))return null;T=w*60;break;case"g":case"gg":var P=L;if(!P||!a.eras)return null;P=d(P.toLowerCase());for(var H=0,B=a.eras.length;H<B;H++)if(P===a.eras[H].name.toLowerCase()){h=H;break}if(h===null)return null}}}var j=new Date,F,I=a.convert;F=I?I.fromGregorian(j)[0]:j.getFullYear(),v===null?v=F:a.eras&&(v+=a.eras[h||0].offset),m===null&&(m=0),g===null&&(g=1);if(I){j=I.toGregorian(v,m,g);if(j===null)return null}else{j.setFullYear(v,m,g);if(j.getDate()!==g)return null;if(y!==null&&j.getDay()!==y)return null}N&&b<12&&(b+=12),j.setHours(b,E,S,x);if(T!==null){var q=j.getMinutes()-(T+j.getTimezoneOffset());j.setHours(j.getHours()+parseInt(q/60,10),q%60)}return j}}(),N=function(e,t,n){var r=t["-"],i=t["+"],s;switch(n){case"n -":r=" "+r,i=" "+i;case"n-":a(e,r)?s=["-",e.substr(0,e.length-r.length)]:a(e,i)&&(s=["+",e.substr(0,e.length-i.length)]);break;case"- n":r+=" ",i+=" ";case"-n":p(e,r)?s=["-",e.substr(r.length)]:p(e,i)&&(s=["+",e.substr(i.length)]);break;case"(n)":p(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},n.prototype.findClosestCulture=function(e){return n.findClosestCulture.call(this,e)},n.prototype.format=function(e,t,r){return n.format.call(this,e,t,r)},n.prototype.localize=function(e,t){return n.localize.call(this,e,t)},n.prototype.parseInt=function(e,t,r){return n.parseInt.call(this,e,t,r)},n.prototype.parseFloat=function(e,t,r){return n.parseFloat.call(this,e,t,r)},n.prototype.culture=function(e){return n.culture.call(this,e)},n.addCultureInfo=function(e,t,n){var r={},i=!1;typeof e!="string"?(n=e,e=this.culture().name,r=this.cultures[e]):typeof t!="string"?(n=t,i=this.cultures[e]==null,r=this.cultures[e]||this.cultures["default"]):(i=!0,r=this.cultures[t]),this.cultures[e]=f(!0,{},r,n),i&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},n.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];typeof e=="string"&&(e=e.split(","));if(l(e)){var n,r=this.cultures,i=e,s,o=i.length,u=[];for(s=0;s<o;s++){e=d(i[s]);var a,f=e.split(";");n=d(f[0]),f.length===1?a=1:(e=d(f[1]),e.indexOf("q=")===0?(e=e.substr(2),a=parseFloat(e),a=isNaN(a)?0:a):a=1),u.push({lang:n,pri:a})}u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0});for(s=0;s<o;s++){n=u[s].lang,t=r[n];if(t)return t}for(s=0;s<o;s++){n=u[s].lang;do{var c=n.lastIndexOf("-");if(c===-1)break;n=n.substr(0,c),t=r[n];if(t)return t}while(1)}for(s=0;s<o;s++){n=u[s].lang;for(var h in r){var p=r[h];if(p.language===n)return p}}}else if(typeof e=="object")return e;return t||null},n.format=function(e,t,n){var r=this.findClosestCulture(n);return e instanceof Date?e=b(e,t,r):typeof e=="number"&&(e=w(e,t,r)),e},n.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures["default"].messages[e]},n.parseDate=function(e,t,n){n=this.findClosestCulture(n);var r,i,s;if(t){typeof t=="string"&&(t=[t]);if(t.length)for(var o=0,u=t.length;o<u;o++){var a=t[o];if(a){r=T(e,a,n);if(r)break}}}else{s=n.calendar.patterns;for(i in s){r=T(e,s[i],n);if(r)break}}return r||null},n.parseInt=function(e,t,r){return v(n.parseFloat(e,t,r))},n.parseFloat=function(e,t,n){typeof t!="number"&&(n=t,t=10);var o=this.findClosestCulture(n),u=NaN,a=o.numberFormat;e.indexOf(o.numberFormat.currency.symbol)>-1&&(e=e.replace(o.numberFormat.currency.symbol,""),e=e.replace(o.numberFormat.currency["."],o.numberFormat["."])),e.indexOf(o.numberFormat.percent.symbol)>-1&&(e=e.replace(o.numberFormat.percent.symbol,"")),e=e.replace(/ /g,"");if(i.test(e))u=parseFloat(e);else if(!t&&r.test(e))u=parseInt(e,16);else{var f=N(e,a,a.pattern[0]),l=f[0],c=f[1];l===""&&a.pattern[0]!=="(n)"&&(f=N(e,a,"(n)"),l=f[0],c=f[1]),l===""&&a.pattern[0]!=="-n"&&(f=N(e,a,"-n"),l=f[0],c=f[1]),l=l||"+";var h,p,d=c.indexOf("e");d<0&&(d=c.indexOf("E")),d<0?(p=c,h=null):(p=c.substr(0,d),h=c.substr(d+1));var v,m,g=a["."],y=p.indexOf(g);y<0?(v=p,m=null):(v=p.substr(0,y),m=p.substr(y+g.length));var b=a[","];v=v.split(b).join("");var w=b.replace(/\u00A0/g," ");b!==w&&(v=v.split(w).join(""));var E=l+v;m!==null&&(E+="."+m);if(h!==null){var S=N(h,a,"-n");E+="e"+(S[0]||"+")+S[1]}s.test(E)&&(u=parseFloat(E))}return u},n.culture=function(e){return typeof e!="undefined"&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures["default"]}}(this),define("jquery.globalize",function(){}),function(e,t){var n;typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?n=require("globalize"):n=e.Globalize,n.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}}),n.addCultureInfo("fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",",NaN:"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}}),n.addCultureInfo("es-ES","default",{name:"es-ES",englishName:"Spanish (Spain, International Sort)",nativeName:"Español (España, alfabetización internacional)",language:"es",numberFormat:{",":".",".":",",NaN:"NeuN",negativeInfinity:"-Infinito",positiveInfinity:"Infinito",percent:{",":".",".":","},currency:{pattern:["-n $","n $"],",":".",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],namesAbbr:["dom","lun","mar","mié","jue","vie","sáb"],namesShort:["do","lu","ma","mi","ju","vi","sá"]},months:{names:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],namesAbbr:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]},AM:null,PM:null,eras:[{name:"d.C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd, dd' de 'MMMM' de 'yyyy",t:"H:mm",T:"H:mm:ss",f:"dddd, dd' de 'MMMM' de 'yyyy H:mm",F:"dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",M:"dd MMMM",Y:"MMMM' de 'yyyy"}}}}),n.addCultureInfo("ja-JP","default",{name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",language:"ja",numberFormat:{NaN:"NaN (非数値)",negativeInfinity:"-∞",positiveInfinity:"+∞",percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"¥"}},calendars:{standard:{days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"西暦",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Japanese:{name:"Japanese",days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"平成",start:null,offset:1867},{name:"昭和",start:-18121536e5,offset:1911},{name:"大正",start:-13576032e5,offset:1925},{name:"明治",start:6002208e4,offset:1988}],twoDigitYearMax:99,patterns:{d:"gg y/M/d",D:"gg y'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"gg y'年'M'月'd'日' H:mm",F:"gg y'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"gg y'年'M'月'"}}}}),n.addCultureInfo("ru-RU","default",{name:"ru-RU",englishName:"Russian (Russia)",nativeName:"русский (Россия)",language:"ru",numberFormat:{",":" ",".":",",negativeInfinity:"-бесконечность",positiveInfinity:"бесконечность",percent:{pattern:["-n%","n%"],",":" ",".":","},currency:{pattern:["-n$","n$"],",":" ",".":",",symbol:"р."}},calendars:{standard:{"/":".",firstDay:1,days:{names:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],namesAbbr:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],namesShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},months:{names:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},monthsGenitive:{names:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря",""],namesAbbr:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек",""]},AM:null,PM:null,patterns:{d:"dd.MM.yyyy",D:"d MMMM yyyy 'г.'",t:"H:mm",T:"H:mm:ss",f:"d MMMM yyyy 'г.' H:mm",F:"d MMMM yyyy 'г.' H:mm:ss",Y:"MMMM yyyy"}}}})}(this),define("jquery.globalize.cultures",function(){}),function(e){typeof define=="function"&&define.amd?define("jquery.mousewheel",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function u(t){var n=t||window.event,o=r.call(arguments,1),u=0,l=0,c=0,h=0;t=e.event.fix(n),t.type="mousewheel","detail"in n&&(c=n.detail*-1),"wheelDelta"in n&&(c=n.wheelDelta),"wheelDeltaY"in n&&(c=n.wheelDeltaY),"wheelDeltaX"in n&&(l=n.wheelDeltaX*-1),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(l=c*-1,c=0),u=c===0?l:c,"deltaY"in n&&(c=n.deltaY*-1,u=c),"deltaX"in n&&(l=n.deltaX,c===0&&(u=l*-1));if(c===0&&l===0)return;h=Math.max(Math.abs(c),Math.abs(l));if(!s||h<s)s=h;return u=Math[u>=1?"floor":"ceil"](u/s),l=Math[l>=1?"floor":"ceil"](l/s),c=Math[c>=1?"floor":"ceil"](c/s),t.deltaX=l,t.deltaY=c,t.deltaFactor=s,o.unshift(t,u,l,c),i&&clearTimeout(i),i=setTimeout(a,200),(e.event.dispatch||e.event.handle).apply(this,o)}function a(){s=null}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;e.event.special.mousewheel={version:"3.1.6",setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],u,!1);else this.onmousewheel=u},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],u,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){typeof define=="function"&&define.amd?define("jquery-form",["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function r(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(r,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var u=[];try{if(l.extraData)for(var f in l.extraData)l.extraData.hasOwnProperty(f)&&(e.isPlainObject(l.extraData[f])&&l.extraData[f].hasOwnProperty("name")&&l.extraData[f].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+l.extraData[f].name+'">').val(l.extraData[f].value).appendTo(o)[0]):u.push(e('<input type="hidden" name="'+f+'">').val(l.extraData[f]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(r,15);try{o.submit()}catch(c){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):a.removeAttr("target"),e(u).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f||c.disabled)continue;if(n&&s.clk&&c.type=="image"){s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),define("jquery-ui.core",function(){}),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),define("jquery-ui.widget",function(){}),function(e,t){function h(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),define("jquery-ui.position",function(){}),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("jquery-ui.mouse",function(){}),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),define("jquery-ui.draggable",function(){}),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),define("jquery-ui.droppable",function(){}),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),define("jquery-ui.resizable",function(){}),function(e,t){function n(e,t,n){return e>t&&e<t+n}function r(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||r(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return r==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)}):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,o,u,a,f,l,c,h,p,d=null,v=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(d&&e.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],v=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!d)return;if(this.containers.length===1)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{o=1e4,u=null,p=d.floating||r(this.currentItem),a=p?"left":"top",f=p?"width":"height",l=this.positionAbs[a]+this.offset.click[a];for(s=this.items.length-1;s>=0;s--){if(!e.contains(this.containers[v].element[0],this.items[s].item[0]))continue;if(this.items[s].item[0]===this.currentItem[0])continue;if(p&&!n(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))continue;c=this.items[s].item.offset()[a],h=!1,Math.abs(c-l)>Math.abs(c+this.items[s][f]-l)&&(h=!0,c+=this.items[s][f]),Math.abs(c-l)<o&&(o=Math.abs(c-l),u=this.items[s],this.direction=h?"up":"down")}if(!u&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),define("jquery-ui.sortable",function(){}),function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var t=this,n=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(r){t._allowInteraction(r)||(r.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})}(jQuery),define("jquery-ui.dialog",function(){}),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),define("jquery-ui.button",function(){}),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(r.inline?t.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var n="datepicker",r;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,u){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),o(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=u?u.length?u:[u.pageX,u.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,u,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),u=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),o(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,u),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,u,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;o(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),s=i[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),define("jquery-ui.datepicker",function(){}),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(r,i,s,o,u){return typeof i=="boolean"||i===t?s?e.effects.animateClass.call(this,i?{add:r}:{remove:r},s,o,u):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:r},i,s,o)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}e.extend(e.effects,{version:"1.10.3",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?(r[o](),u()):s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},show:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(i(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(i(t)||typeof t=="boolean")return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),define("jquery-ui.effects.core",function(){}),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),define("jquery-ui.effects.blind",function(){}),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),define("jquery-ui.effects.slide",function(){}),function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}}(jQuery),define("jquery-ui.effects.scale",function(){}),function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),define("jquery-ui.effects.transfer",function(){}),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),define("jquery-ui.effects.fade",function(){}),jQuery(function(e){e.datepicker.regional.en={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}),jQuery(function(e){e.datepicker.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Janv.","Févr.","Mars","Avril","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}),jQuery(function(e){e.datepicker.regional.ja={closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}}),define("jquery-ui.datepicker.i18n",function(){});var wijmo;(function(e){function t(e){return isNaN(e)?0:e}function f(){if($.ui&&$.ui.keyCode)return $.ui.keyCode;if($.mobile&&$.mobile.keyCode)return $.mobile.keyCode;throw"keyCode object is not found"}$.fn.extend({wijtextselection:function(){var e,t,n=this[0],r=this.val();if(arguments.length===0){var i,s,o,u;if(typeof n.selectionStart!="undefined")o=n.selectionStart,u=n.selectionEnd;else try{var a=document.selection;n.tagName.toLowerCase()!="textarea"?(i=a.createRange().duplicate(),i.moveEnd("character",r.length),o=i.text===""?r.length:r.lastIndexOf(i.text),i=a.createRange().duplicate(),i.moveStart("character",-r.length),u=i.text.length):(i=a.createRange(),s=i.duplicate(),s.moveToElementText(n),s.setEndPoint("EndToEnd",i),o=s.text.length-i.text.length,u=o+i.text.length)}catch(u){}var f=r.substring(o,u);return{start:o,end:u,text:f,replace:function(e){return r.substring(0,o)+e+r.substring(u,r.length)}}}if(arguments.length===1){if(typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number")e=arguments[0].start,t=arguments[0].end;else if(typeof arguments[0]=="string")(e=r.indexOf(arguments[0]))>-1&&(t=e+arguments[0].length);else if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var l=arguments[0].exec(r);l!=null&&(e=l.index,t=e+l[0].length)}}else arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(e=arguments[0],t=arguments[1]);typeof e=="undefined"&&(e=0,t=r.length);if(typeof n.createTextRange!="undefined"){var c=n.createTextRange();c.collapse(!0),c.moveStart("character",e),c.moveEnd("character",t-e),c.select()}else n.selectionStart=e,n.selectionEnd=t},wijContent:function(e){return this.each(function(){this.innerHTML='<iframe frameborder="0" style="width: 100%; height: 100%;" src="'+e+'">"'})},wijAddVisibilityObserver:function(e,t){return this.each(function(){var n=this;$(this).addClass("wijmo-wijobserver-visibility"),$(this).bind("wijmovisibilitychanged"+(t?"."+t:""),function(t){e.apply(n,arguments),t.stopPropagation()})})},wijRemoveVisibilityObserver:function(e){return this.each(function(){$(this).removeClass("wijmo-wijobserver-visibility"),e?jQuery.isFunction(e)?$(this).unbind("wijmovisibilitychanged",e):$(this).unbind("wijmovisibilitychanged."+e):$(this).unbind("wijmovisibilitychanged")})},wijTriggerVisibility:function(){return this.each(function(){var e=$(this);e.hasClass("wijmo-wijobserver-visibility")&&e.not(".wijmo-wijobserver-visibility-exec").addClass("wijmo-wijobserver-visibility-exec").trigger("wijmovisibilitychanged").removeClass("wijmo-wijobserver-visibility-exec"),e.find(".wijmo-wijobserver-visibility").not(".wijmo-wijobserver-visibility-exec").addClass("wijmo-wijobserver-visibility-exec").trigger("wijmovisibilitychanged").removeClass("wijmo-wijobserver-visibility-exec")})},leftBorderWidth:function(){var e=parseFloat($(this).css("borderLeftWidth")),n=parseFloat($(this).css("padding-left")),r=0;return $(this).css("margin-left")!=="auto"&&(r=parseFloat($(this).css("margin-left"))),t(e)+t(n)+t(r)},rightBorderWidth:function(){var e=parseFloat($(this).css("borderRightWidth")),n=parseFloat($(this).css("padding-right")),r=0;return $(this).css("margin-right")!=="auto"&&(r=parseFloat($(this).css("margin-right"))),t(e)+t(n)+t(r)},topBorderWidth:function(){var e=parseFloat($(this).css("borderTopWidth")),n=parseFloat($(this).css("padding-top")),r=0;return $(this).css("margin-top")!=="auto"&&(r=parseFloat($(this).css("margin-top"))),t(e)+t(n)+t(r)},bottomBorderWidth:function(){var e=parseFloat($(this).css("borderBottomWidth")),n=parseFloat($(this).css("padding-bottom")),r=0;return $(this).css("margin-bottom")!=="auto"&&(r=parseFloat($(this).css("margin-bottom"))),t(e)+t(n)+t(r)},borderSize:function(){var e=$(this).leftBorderWidth()+$(this).rightBorderWidth(),t=$(this).topBorderWidth()+$(this).bottomBorderWidth(),n={width:e,height:t};return n},setOutWidth:function(e){var t=$(this).leftBorderWidth()+$(this).rightBorderWidth();return $(this).width(e-t),this},setOutHeight:function(e){var t=$(this).topBorderWidth()+$(this).bottomBorderWidth();return $(this).height(e-t),this},getWidget:function(){var e=this.data("widgetName");return e&&e!==""?this.data(e):null},wijshow:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.show(s,$.extend(a,{easing:u}),o,i);return}}this.show(),i&&$.isFunction(i)&&i.call(this)},wijhide:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.stop().hide(s,$.extend(a,{easing:u}),o,i);return}}this.hide(),i&&$.isFunction(i)&&i.call(this)}}),$.save=function(e,t){if($.effects)return $.effects.save(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},$.restore=function(e,t){if($.effects)return $.effects.restore(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},$.createWrapper=function(e){if($.effects)return $.effects.createWrapper(e);if(e.parent().is(".ui-effects-wrapper"))return e.parent();var t={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;return e.wrap(n),(e[0]===r||$.contains(e[0],r))&&$(r).focus(),n=e.parent(),e.css("position")=="static"?(n.css({position:"relative"}),e.css({position:"relative"})):($.extend(t,{position:e.css("position"),zIndex:e.css("z-index")}),$.each(["top","left","bottom","right"],function(n,r){t[r]=e.css(r),isNaN(parseInt(t[r],10))&&(t[r]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(t).show()},$.removeWrapper=function(e){if($.effects)return $.effects.removeWrapper(e);var t,n=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(t=e.parent().replaceWith(e),(e[0]===n||$.contains(e[0],n))&&$(n).focus(),t):e},$.fn.hasAllClasses=function(e){var t,n=(e||"").match(/\S+/g)||[];if(n.length===0)return!1;for(t=0;t<n.length;t++)if(!this.hasClass(n[t]))return!1;return!0},$.setMode=function(e,t){return $.effects?$.effects.setMode(e,t):(t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t)};var n=function(){};$.extend(n.prototype,{_UTFPunctuationsString:" ! \" # % & ' ( ) * , - . / : ; ? @ [ \\ ] { } ¡ « ­ · » ¿ ; · ՚ ՛ ՜ ՝ ՞ ՟ ։ ֊ ־ ׀ ׃ ׳ ״ ، ؛ ؟ ٪ ٫ ٬ ٭ ۔ ܀ ܁ ܂ ܃ ܄ ܅ ܆ ܇ ܈ ܉ ܊ ܋ ܌ ܍ । ॥ ॰ ෴ ๏ ๚ ๛ ༄ ༅ ༆ ༇ ༈ ༉ ༊ ་ ༌ ། ༎ ༏ ༐ ༑ ༒ ༺ ༻ ༼ ༽ ྅ ၊ ။ ၌ ၍ ၎ ၏ ჻ ፡ ። ፣ ፤ ፥ ፦ ፧ ፨ ᙭ ᙮ ᚛ ᚜ ᛫ ᛬ ᛭ ។ ៕ ៖ ៗ ៘ ៙ ៚ ៜ ᠀ ᠁ ᠂ ᠃ ᠄ ᠅ ᠆ ᠇ ᠈ ᠉ ᠊ ‐ ‑ ‒ – — ― ‖ ‗ ‘ ’ ‚ ‛ “ ” „ ‟ † ‡ • ‣ ․ ‥ … ‧ ‰ ‱ ′ ″ ‴ ‵ ‶ ‷ ‸ ‹ › ※ ‼ ‽ ‾ ⁁ ⁂ ⁃ ⁅ ⁆ ⁈ ⁉ ⁊ ⁋ ⁌ ⁍ ⁽ ⁾ ₍ ₎ 〈 〉 、 。 〃 〈 〉 《 》 「 」 『 』 【 】 〔 〕 〖 〗 〘 〙 〚 〛 〜 〝 〞 〟 〰 ﴾ ﴿ ︰ ︱ ︲ ︵ ︶ ︷ ︸ ︹ ︺ ︻ ︼ ︽ ︾ ︿ ﹀ ﹁ ﹂ ﹃ ﹄ ﹉ ﹊ ﹋ ﹌ ﹐ ﹑ ﹒ ﹔ ﹕ ﹖ ﹗ ﹘ ﹙ ﹚ ﹛ ﹜ ﹝ ﹞ ﹟ ﹠ ﹡ ﹣ ﹨ ﹪ ﹫ ！ ＂ ＃ ％ ＆ ＇ （ ） ＊ ， － ． ／ ： ； ？ ＠ ［ ＼ ］ ｛ ｝ ｡ ｢ ｣ ､';this.UTFWhitespacesString_='	  \f                              ​ \u2028   　",isDigit:function(e){var t=e.charCodeAt(0);return t>=48&&t<58},isLetter:function(e){return!!(e+"").match(new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ȟȢ-ȳɐ-ʭʰ-ʸʻ-ˁːˑˠ-ˤˮͺΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϗϚ-ϳЀ-ҁҌ-ӄӇӈӋӌӐ-ӵӸӹԱ-Ֆՙա-ևא-תװ-ײء-غـ-يٱ-ۓەۥۦۺ-ۼܐܒ-ܬހ-ޥअ-हऽॐक़-ॡঅ-ঌএঐও-নপ-রলশ-হড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલળવ-હઽૐૠଅ-ଌଏଐଓ-ନପ-ରଲଳଶ-ହଽଡ଼ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠೡഅ-ഌഎ-ഐഒ-നപ-ഹൠൡඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜໝༀཀ-ཇཉ-ཪྈ-ྋက-အဣ-ဧဩဪၐ-ၕႠ-Ⴥა-ჶᄀ-ᅙᅟ-ᆢᆨ-ᇹሀ-ሆለ-ቆቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኆኈኊ-ኍነ-ኮኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዎዐ-ዖዘ-ዮደ-ጎጐጒ-ጕጘ-ጞጠ-ፆፈ-ፚᎠ-Ᏼᐁ-ᙬᙯ-ᙶᚁ-ᚚᚠ-ᛪក-ឳᠠ-ᡷᢀ-ᢨḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁿℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℱℳ-ℹ々〆〱-〵ぁ-ゔゝゞァ-ヺー-ヾㄅ-ㄬㄱ-ㆎㆠ-ㆷ㐀-䶵一-龥ꀀ-ꒌ가-힣豈-鶴ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹲﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"))},isLetterOrDigit:function(e){return this.isLetter(e)||this.isDigit(e)},isDoubleByteNumber:function(e){var t=e.charCodeAt(0);return t>=65296&&t<65306},isSymbol:function(e){var t=new RegExp("[$+<->^`|~¢-©¬®-±´¶¸×÷ʹʺ˂-ˏ˒-˟˥-˭ʹ͵΄΅҂۩۽۾৲৳৺୰฿༁-༃༓-༗༚-༟༴༶༸྾-࿅࿇-࿌࿏៛᾽᾿-῁῍-῏῝-῟῭-`´῾⁄⁺-⁼₊-₌₠-₯℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮Ⅎ℺←-⇳∀-⋱⌀-⌨⌫-⍻⍽-⎚␀-␦⑀-⑊⒜-ⓩ─-▕■-◷☀-☓☙-♱✁-✄✆-✉✌-✧✩-❋❍❏-❒❖❘-❞❡-❧➔➘-➯➱-➾⠀-⣿⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿゛゜㆐㆑㆖-㆟㈀-㈜㈪-㉃㉠-㉻㉿㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾꒐-꒡꒤-꒳꒵-꓀꓂-꓄꓆﬩﹢﹤-﹦﹩＄＋＜-＞＾｀｜～￠-￦￨-￮￼�]");return t.test(e+"")},isPunctuation:function(e){return this._UTFPunctuationsString.indexOf(e)>=0},isPrintableChar:function(e){return!this.isLetterOrDigit(e)&&!this.isPunctuation(e)&&!this.isSymbol(e)&&!this.isDoubleByteNumber(e)?e===" ":!0},isAscii:function(e){return e>="!"&&e<="~"},isAsciiLetter:function(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"},isUpper:function(e){return e.toUpperCase()===e},isLower:function(e){return e.toLowerCase()===e},isAlphanumeric:function(e){return this.isLetter(e)?!0:this.isDigit(e)},isAciiAlphanumeric:function(e){return(e<"0"||e>"9")&&(e<"A"||e>"Z")?e>="a"?e<="z":!1:!0},setChar:function(e,t,n){return n>=e.length||n<0?e:e.substr(0,n)+t+e.substr(n+1)}}),$.fn.zIndex||($.fn.zIndex=function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length){var t=$(this[0]),n,r;while(t.length&&t[0]!==document){n=t.css("position");if(n==="absolute"||n==="relative"||n==="fixed"){r=parseInt(t.css("zIndex"),10);if(!isNaN(r)&&r!==0)return r}t=t.parent()}}return 0});var r=["\n","\r",'"',"@","+","'","<",">","%","{","}"],i=["!ESC!NN!","!ESC!RR!","!ESC!01!","!ESC!02!","!ESC!03!","!ESC!04!","!ESC!05!","!ESC!06!","!ESC!07!","!ESC!08!","!ESC!09!"],s=["(\n)","(\r)",'(")',"(@)","(\\+)","(')","(\\<)","(\\>)","(%)","(\\{)","(\\})"];$.wij||$.extend({wij:{charValidator:new n,encodeString:function(e){for(var t=0;t<r.length;t++){var n=new RegExp(s[t],"g");e=e.replace(n,i[t])}return e},decodeString:function(e){if(e==="")return;for(var t=0;t<i.length;t++){var n=new RegExp(i[t],"g");e=e.replace(n,r[t])}return e}}}),jQuery.uaMatch||(jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}});if(!jQuery.browser){var o=jQuery.uaMatch(navigator.userAgent),u={version:"0",msie:!1,opera:!1,safari:!1,mozilla:!1,webkit:!1,chrome:!1};o.browser&&(u[o.browser]=!0,u.version=o.version),u.chrome?u.webkit=!0:u.webkit&&(u.safari=!0),jQuery.browser=u}$.ui&&$.ui.position&&$.ui.position.flipfit&&($.ui.position.flip.top=function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,i=n.height,s=n.isWindow?n.scrollTop:n.offset.top,o=e.top-t.collisionPosition.marginTop,u=o-s,a=o+t.collisionHeight-i-s,f=t.my[1]==="top",l=f?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,c=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,h=-2*t.offset[1],p,d;u<0?(d=e.top+l+c+h+t.collisionHeight-i-r,e.top+l+c+h>u&&(d<0||d<Math.abs(u))&&(e.top+=l+c+h)):a>0&&(p=e.top-t.collisionPosition.marginTop+l+c+h-s,e.top+l+c+h+t.collisionHeight-i-s<a&&(p>0||Math.abs(p)<a)&&(e.top+=l+c+h))});var a=$.fn.position;$.fn.position=function(e){if(e&&$.isPlainObject(e)&&e.offset){var t=(e.my||"").split(" "),n=/left|center|right/,r=/top|center|bottom/,i=(e.offset||"").split(" ");t.length===1&&(n.test(t[0])?t.concat(["center"]):r.test(t[0])?["center"].concat(t):["center","center"]),i.length===1&&i.concat(i[0]),$.each(t,function(e,n){/\+|-/.test(i[e])?t[e]=t[e]+i[e]:t[e]=t[e]+"+"+i[e]}),e.my=t.join(" ")}return a.apply(this,arguments)},e.getKeyCodeEnum=f})(wijmo||(wijmo={})),define("wijmo.wijutil",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.autoMobilize=!0,e.wijCSS={widget:"ui-widget",overlay:"ui-widget-overlay",content:"ui-widget-content",header:"ui-widget-header",stateDisabled:"ui-state-disabled",stateFocus:"ui-state-focus",stateActive:"ui-state-active",stateDefault:"ui-state-default",stateHighlight:"ui-state-highlight",stateHover:"ui-state-hover",stateChecked:"ui-state-checked",stateError:"ui-state-error",getState:function(e){return e=e.charAt(0).toUpperCase()+e.substr(1),t.wijmo.wijCSS["state"+e]},icon:"ui-icon",iconCheck:"ui-icon-check",iconRadioOn:"ui-icon-radio-on",iconRadioOff:"ui-icon-radio-off",iconClose:"ui-icon-close",iconArrow4Diag:"ui-icon-arrow-4-diag",iconNewWin:"ui-icon-newwin",iconVGripSolid:"ui-icon-grip-solid-vertical",iconHGripSolid:"ui-icon-grip-solid-horizontal",iconPlay:"ui-icon-play",iconPause:"ui-icon-pause",iconStop:"ui-icon-stop",iconArrowUp:"ui-icon-triangle-1-n",iconArrowRight:"ui-icon-triangle-1-e",iconArrowDown:"ui-icon-triangle-1-s",iconArrowLeft:"ui-icon-triangle-1-w",iconArrowRightDown:"ui-icon-triangle-1-se",iconArrowThickDown:"ui-icon-arrowthick-1-s glyphicon glyphicon-arrow-down",iconArrowThickUp:"ui-icon-arrowthick-1-n glyphicon glyphicon-arrow-up",iconCaratUp:"ui-icon-carat-1-n",iconCaratRight:"ui-icon-carat-1-e",iconCaratDown:"ui-icon-carat-1-s",iconCaratLeft:"ui-icon-carat-1-w",iconClock:"ui-icon-clock glyphicon glyphicon-time",iconPencil:"ui-icon-pencil glyphicon glyphicon-pencil",iconSeekFirst:"ui-icon-seek-first",iconSeekEnd:"ui-icon-seek-end",iconSeekNext:"ui-icon-seek-next",iconSeekPrev:"ui-icon-seek-prev",iconPrint:"ui-icon-print",iconDisk:"ui-icon-disk",iconSeekStart:"ui-icon-seek-start",iconFullScreen:"ui-icon-newwin",iconContinousView:"ui-icon-carat-2-n-s",iconZoomIn:"ui-icon-zoomin",iconZoomOut:"ui-icon-zoomout",iconBookmark:"ui-icon-bookmark",iconSearch:"ui-icon-search",iconImage:"ui-icon-image",inputSpinnerLeft:"ui-input-spinner-left",inputSpinnerRight:"ui-input-spinner-right",inputTriggerLeft:"ui-input-trigger-left",inputTriggerRight:"ui-input-trigger-right",inputSpinnerTriggerLeft:"ui-input-spinner-trigger-left",inputSpinnerTriggerRight:"ui-input-spinner-trigger-right",cornerAll:"ui-corner-all",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",cornerBottom:"ui-corner-bottom",cornerBL:"ui-corner-bl",cornerBR:"ui-corner-br",cornerTop:"ui-corner-top",cornerTL:"ui-corner-tl",cornerTR:"ui-corner-tr",helperClearFix:"ui-helper-clearfix",helperReset:"ui-helper-reset",helperHidden:"ui-helper-hidden",priorityPrimary:"ui-priority-primary",prioritySecondary:"ui-priority-secondary",button:"ui-button",buttonText:"ui-button-text",buttonTextOnly:"ui-button-text-only",tabs:"ui-tabs",tabsTop:"ui-tabs-top",tabsBottom:"ui-tabs-bottom",tabsLeft:"ui-tabs-left",tabsRight:"ui-tabs-right",tabsLoading:"ui-tabs-loading",tabsActive:"ui-tabs-active",tabsPanel:"ui-tabs-panel",tabsNav:"ui-tabs-nav",tabsHide:"ui-tabs-hide",tabsCollapsible:"ui-tabs-collapsible",activeMenuitem:"ui-active-menuitem"},e.wijMobileCSS={content:"ui-content",header:"ui-header",overlay:"ui-overlay",stateDisabled:"ui-disabled",stateFocus:"ui-focus",stateActive:"ui-btn-active",stateDefault:"ui-btn-up-a",iconArrowUp:"ui-icon-arrow-u",iconArrowRight:"ui-icon-arrow-r",iconArrowDown:"ui-icon-arrow-d",iconArrowLeft:"ui-icon-arrow-l",iconArrowRightDown:"ui-icon-arrow-d",iconSeekFirst:"ui-icon-arrow-l",iconSeekEnd:"ui-icon-arrow-r",iconSeekNext:"ui-icon-arrow-r",iconSeekPrev:"ui-icon-arrow-l",iconClose:"ui-icon-delete",iconStop:"ui-icon-grid",iconCheck:"ui-icon-checkbox-on"},e.wijMobileThemePrefix=["ui-bar","ui-body","ui-overlay","ui-btn-up","ui-btn-hover","ui-btn-down"],e.autoInit=function(n,r){if(t.mobile&&t.mobile.page&&r){var i=t.mobile.page.prototype.options.keepNative;i&&i.length&&i.indexOf(r)===-1?i=[i,r].join(", "):i=r,t.mobile.page.prototype.options.keepNative=i}t.mobile&&t.wijmo[n]&&t.wijmo[n].prototype&&t.wijmo[n].prototype.enhanceWithin&&t(document).bind("pagecreate create",function(e){t.wijmo[n].prototype.enhanceWithin(e.target)})},e.registerWidget=function(n,r,i,s){var o="wijmo."+n,u;typeof i=="function"&&(u=i,i=null);if(i===null||i===undefined)i=t.extend(!0,{},r),r=t.wijmo.widget;i.options=i.options||{},i.options.initSelector=i.options.initSelector||":jqmData(role='"+n+"')",t.mobile&&i.options&&i.options.wijMobileCSS&&(i.options.wijCSS=i.options.wijCSS||{},t.extend(i.options.wijCSS,i.options.wijMobileCSS)),t.widget(o,r,i),u?u.call():this.autoInit&&this.autoInit(n,i.options.initSelector)},e.addThemeToMobileCSS=function(r,i){t.each(i,function(n,s){typeof s=="string"?t.each(e.wijMobileThemePrefix,function(e,t){var o=new RegExp("\\b"+t);o.test(s)&&(i[n]=s+" "+t+"-"+r)}):e.addThemeToMobileCSS(r,s)})},e}();t.wijmo=n;var r=function(){function e(){}return e.prototype.destroy=function(){},e.prototype._setOption=function(e,t){},e.prototype._create=function(){},e.prototype._init=function(){},e.prototype.widget=function(){return this.element},e}();e.JQueryUIWidget=r,r.prototype.options={wijCSS:t.wijmo.wijCSS},r.prototype.destroy=function(){t.Widget.prototype.destroy.apply(this,arguments)},r.prototype._setOption=function(e,n){t.Widget.prototype._setOption.apply(this,arguments)},r.prototype._create=function(){t.Widget.prototype._create.apply(this,arguments)},r.prototype._init=function(){t.Widget.prototype._init.apply(this,arguments)};var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(r);e.JQueryMobileWidget=i,t(window.document).trigger("wijmoinit");var s=function(e){function n(){e.apply(this,arguments),this._widgetCreated=!1}return __extends(n,e),n.prototype._baseWidget=function(){return this._isMobile?t.mobile.widget:t.Widget},n.prototype._createWidget=function(e,n){this._widgetCreated=!0,this._syncEventPrefix&&(this.widgetEventPrefix=this.widgetName),window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this._baseWidget().prototype._createWidget.apply(this,arguments)},n.prototype._create=function(){this._baseWidget().prototype._create.apply(this,arguments)},n.prototype._init=function(){this._baseWidget().prototype._init.apply(this,arguments)},n.prototype.destroy=function(){this._baseWidget().prototype.destroy.apply(this,arguments)},n.prototype._setOption=function(e,t){this._baseWidget().prototype._setOption.apply(this,arguments),e==="disabled"&&t&&this._isMobile&&this.element.removeClass("ui-state-disabled").addClass(this.options.wijCSS.stateDisabled)},n}(i);e.wijmoWidget=s,s.prototype._syncEventPrefix=!0,s.prototype._isMobile=!1,t.mobile!=null&&t.wijmo.autoMobilize===!0?(t.extend(!0,s.prototype.options.wijCSS,t.wijmo.wijMobileCSS),s.prototype._isMobile=!0,s.prototype.options=t.extend(!0,{},s.prototype.options,s.prototype._baseWidget().prototype.options),s.prototype.enhanceWithin=function(e,n){this._widgetCreated||t.mobile.widget.prototype.enhanceWithin.apply(this,arguments)},s.prototype._getCreateOptions=function(){var e=this.element,n,r=r=function(e){if(typeof e=="undefined")return{};if(e===null)return{};var n=/(?:(?:\{[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*)|(?:,[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*))('(.*?[^\\])')?/gi,r=/\[.*?(?=[\]\[])|[\]\[].*?(?=[\]])/gi,i=e.replace(n,function(e,t,n,r){var i,s=/[\n\r\t\s]*['"]?([^\{,\s]+?)['"]?\s*:[\n\r\t\s]*/i,o=/\:[\n\r\t\s]*(?:'(.*)')?/i;return i=e.replace(s,'"$1":'),r?i.replace(o,':"$1"'):i}).replace(r,function(e){var t=/'(.*?[^\\])'/g;return e.replace(t,'"$1"')});return t.parseJSON(i)},i=r(e.attr("data-"+t.mobile.nsNormalize("options"))),s;return n=t.mobile.widget.prototype._getCreateOptions.apply(this,arguments),s=t.extend(!0,{},this.options.wijCSS),this.theme=this.options.theme!==undefined?this.options.theme:this.element.jqmData("theme"),this.theme&&t.wijmo.addThemeToMobileCSS(this.theme,s),t.extend(n,{wijCSS:s},i)},t.widget("wijmo.widget",t.mobile.widget,s.prototype),t(document).on("pageshow",function(e,n){if(e.target==null)return;var r=t(e.target);r.wijTriggerVisibility&&r.wijTriggerVisibility()})):(s.prototype.options=t.extend(!0,{},s.prototype.options,s.prototype._baseWidget().prototype.options),t.widget("wijmo.widget",s.prototype))})(wijmo||(wijmo={})),define("wijmo.widget",function(){});var wijmo;(function(e){e.expando=".wijmo";var t=function(){function e(e){this.message=e,this.stack="Wijmo"+(new Error).stack,this.name="WijmoError"}return e}();e.WijmoError=t;var n=t;n.prototype=new Error,n.prototype.constructor=n})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=function(){function t(e){this.object=e}return t.getFrom=function(r,i){typeof i=="undefined"&&(i=!0);var s=e.expando,o;if(Object(r)!==r)return null;o=r[s],o&&o.object!==r&&(o=null);if(i&&!(o instanceof t&&Object.prototype.hasOwnProperty.call(r,s))){o=new t(r);try{Object.defineProperty(r,s,{value:o,configurable:!1,enumerable:!1,writable:!1})}catch(u){r[s]=o}}return o},t}();t.Expando=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(e){function t(e){return function(){var t=function(){return e.prototype._call.apply(t,arguments)};return $.extend(t,e.prototype),e.apply(t,arguments),t}}e.funcClass=t})(e.util||(e.util={}));var t=e.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){function i(e){return t.isFunction(e.subscribe)}function l(e){return typeof e=="undefined"&&(e=null),new f(e)}function c(e){return typeof e=="undefined"&&(e=null),new f(e,!0)}function h(e){return t.isFunction(e)&&i(e)}var t=jQuery,n=function(){function e(e,t){this.handler=e,this.context=t}return e.prototype.trigger=function(e){return this.handler.apply(this.context,e)},e}();e.SubscriberEntry=n;var r=function(){function r(e){this.defaultContext=e,this._entries=[]}return r.prototype.subscribe=function(t,r){typeof r=="undefined"&&(r=this.defaultContext);var i=this,s=new n(t,r);return this._entries.push(s),{dispose:function(){return e.util.remove(i._entries,s)}}},r.prototype.trigger=function(){var t=[];for(var n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];e.util.each(this._entries,function(e,n){return n.trigger(t)})},r.makeSubscribable=function(n){var i=new r(n);return n.subscribe=t.proxy(i.subscribe,i),i},r}();e.Subscribable=r,e.isSubscriptable=i;var s=function(){function e(){}return e.prototype.subscribe=function(e,t){return this._subscribable=this._subscribable||new r(this),this._subscribable.subscribe(e,t)},e.prototype._trigger=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},e}();e.BaseObservable=s;var o=function(e){function t(t){e.call(this),this.mutable=t}return __extends(t,e),t.prototype._call=function(){return this.mutable.value},t}(s);e._ReadOnlyObservable=o;var u=e.util.funcClass(o),a=function(e){function t(t,n){typeof n=="undefined"&&(n=!1),e.call(this),this.value=t,this.checkNewValue=n}return __extends(t,e),t.prototype._call=function(e){return arguments.length>0&&(!this.checkNewValue||e!==this.value)&&(this.value=e,this._trigger(e),this._readOnly&&this._readOnly._trigger(e)),this.value},t.prototype.read=function(){return this._readOnly=this._readOnly||new u(this),this._readOnly},t}(s);e._MutableObservable=a;var f=e.util.funcClass(a);e.observable=l,e.observableWithNewValueCheck=c,e.isObservable=h})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){(function(n){function i(e,t){return typeof t=="undefined"&&(t=!1),r.isArray(e)?e=e.slice(0):r.isPlainObject(e)&&(e=r.extend(!!t,{},e)),e}function s(e){return typeof e=="string"||e instanceof String}function o(e){return typeof e=="number"}function u(t){return t===e.expando||t===r.expando}function a(e,t){var n=this;r.each(e,function(e,r){if(!u(e))return t.call(n,e,r)})}function f(t,n){var i=r.map(t,n);return delete i[e.expando],i}function l(e){var t;return e&&r.isFunction(e.toString)&&e.toString!==Object.prototype.toString?t=e.toString():t=JSON.stringify(e),t!=null&&t.length>2&&t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substr(1,t.length-2)),t}function c(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];return e.replace(/{(\d+)}/g,function(e,n){return l(t[parseInt(n,10)])})}function h(e,t){var n=!0;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(!n)return!1}),n}function p(e,t){var n=!1;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(n)return!1}),n}function d(e,t){var n,i,o;if(e==null)return t==null?0:-1;if(t==null)return 1;if(r.isArray(e)&&r.isArray(t)){i=Math.min(e.length,t.length);for(n=0;n<i;n++){o=d(e[n],t[n]);if(o!==0)return o}return e.length-t.length}return s(e)&&s(t)?(e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0):(o=e-t,isNaN(o)?0:o)}function v(e,t){return r.inArray(t,e)>=0}function m(e,t){var n=0,r;for(r=0;r<e.length;)e[r]!==t?r++:(e.splice(r,1),n++);return n}function g(e,t){return e==-1?-1:e==0?0:t?Math.ceil(e/t):1}function y(e,t){function i(){return e.apply(t,n)}var n=[];for(var r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];if(typeof setTimeout==typeof undefined)return i();setTimeout(i,10)}function b(e){if(typeof console=="undefined")return;console.error?console.error(e):console.log&&console.log(e)}function w(e,n){var r=0,i=e,s;for(;;){var o=n.indexOf(".",r);o>=0?(s=n.substring(r,o),r=o+1):r>0?s=n.substring(r):s=n,i=i[s],t.isObservable(i)&&(i=i());if(o<0)break}return i}function E(e,n,r){var i=0,s;for(;;){var o=n.indexOf(".",i);o>=0?(s=n.substring(i,o),i=o+1):i>0?s=n.substring(i):s=n;var u=e[s];if(!(o>=0)){t.isObservable(u)?u(r):e[s]=r;break}t.isObservable(u)&&(u=u()),e=u}}function S(e){return typeof e=="object"&&!r.isArray(e)&&!r.isPlainObject(e)&&e.constructor!==Object.prototype.constructor}function x(e){t.util.each(e,function(e,n){if(!n||typeof n!="object")return;t.util.each(n,function(e,r){var i;if(!t.util.isString(r))return;i=/\/Date\((-?\d+)\)\//.exec(r);if(!i)return;n[e]=new Date(parseInt(i[1],10))})})}var r=jQuery;n.clone=i,n.isString=s,n.isNumeric=o,n.isInternalProperty=u,n.each=a,n.map=f,n.toStr=l,n.format=c,n.every=h,n.some=p,n.compare=d,n.contains=v,n.remove=m,n.pageCount=g,n.executeDelayed=y,n.logError=b,n.getProperty=w,n.setProperty=E,n.isClassInstance=S,n.convertDateProperties=x;var T=function(){function e(e){this.key=e}return e}();n.HashMapEntry=T;var N=function(){function e(){this.hash={}}return e.prototype.getEntry=function(e,t){typeof t=="undefined"&&(t=!1);if(e===null)return!this.nullEntry&&t&&(this.nullEntry=new T(e)),this.nullEntry;var n=String(e),r=this.hash[n],i;if(r==null){if(!t)return null;r=[],this.hash[n]=r}for(var s=0;s<r.length;s++)if(r[s].key===e)return r[s];return t&&(i=new T(e),r.push(i)),null},e.prototype.containsKey=function(e){return!!this.getEntry(e)},e.prototype.get=function(e,t){typeof t=="undefined"&&(t=null);var n=this.getEntry(e);return n?n.value:t},e.prototype.put=function(e,t){this.getEntry(e,!0).value=t},e}();n.HashMap=N})(t.util||(t.util={}));var n=t.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){t.errors={},t.errors._register=function(n){t.util.each(n,function(n,r){function i(){var n=[];for(var i=0;i<arguments.length-0;i++)n[i]=arguments[i+0];var s;return $.isFunction(r)?r=r.apply(this,arguments):arguments.length>0&&(n.unshift(r),r=t.util.format.apply(this,n)),r=$.trim(r),s=r[r.length-1],s!=="."&&s!=="!"&&s!=="?"&&(r+="."),new e.WijmoError(r)}t.errors[n]=function(){throw i.apply(this,arguments)},t.errors[n].create=i})},t.errors._register({indexOutOfBounds:"Index is outside the bounds of the array.",notImplemented:"The operation is not implemented",unsupportedOperation:"Unsupported operation",unsupportedFilterOperator:"Unsupported filter operator: {0}",unsupportedDataSource:"Unsupported data source",argument:function(e){var t="Unexpected argument value.";return e&&(t+="\nParameter name: "+e),t},argumentNull:"Argument '{0}' is null/undefined",noParser:"There is no parser for type '{0}'",noUrl:"Url is not specified",cantConvert:"Value can't be converted to type '{0}': '{1}'",noGlobalize:"Globalize is not defined. Make sure you include globalize.js",itemNotInView:"Item {0} is not in the data view",unsupportedFilterFormat:"The filter format is not supported",multiPropertyKeysNotSupported:"Entities with multiple properties in the primary key are not supported. Entity type: {0}",keyPropertyNotFound:"Key property not found in {0} entity type"})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function r(n,r){typeof r=="undefined"&&(r=!1),n=n.toLowerCase();var i=t.ops[n];if(!i){var s=t.opMap[n];s&&(i=t.ops[s])}return!i&&r&&e.errors.unsupportedFilterOperator(n),i}function i(i){var s;if(!n.isPlainObject(i))return{operator:"==",op:t.ops.equals,value:i};var o=i.operator||t.ops.equals;if(e.util.isString(i.operator)){if(i.operator.toLowerCase()==="nofilter")return null;o=r(i.operator,!0)}else n.isFunction(o.apply)||e.errors.unsupportedFilterOperator(o);return{operator:i.operator,op:o,value:i.value}}function s(t){var r={isEmpty:!1,original:t,func:null,normalized:null};if(n.isFunction(t))r.func=t;else if(n.isArray(t))e.errors.unsupportedFilterFormat(t);else if(t){r.normalized={};var s=!1;e.util.each(t,function(t,o){n.isArray(o)&&e.errors.unsupportedFilterFormat(),o=i(o),o&&(r.normalized[t]=o,s=!0)}),s?r.func=function(t){return e.util.every(r.normalized,function(n,r){var i=e.util.getProperty(t,r);return n.op.apply(i,n.value)})}:r.normalized=null}return!r.normalized&&!r.func&&(r.isEmpty=!0,r.func=function(e){return!0}),r}var n=jQuery;t.opMap={"==":"equals",doesnotcontain:"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal",isnotempty:"notisempty",isnotnull:"notisnull"},t.normalizeCondition=i,t.compile=s,t.ops=function(){function r(e,n,r,i,s){return t[e.toLowerCase()]={name:e,displayName:n,arity:r,applicableTo:i,apply:s}}function i(t){return t instanceof Date&&(t=t.getTime()),e.util.isString(t)&&(t=t.toLowerCase()),t}function s(e,t,n,s){r(e,t,2,n,function(e,t){return s(i(e),i(t))})}function o(e,t,n,i){r(e,t,1,n,i)}function u(e,t,r){s(e,t,n.prim,r)}function a(e,t,r){s(e,t,n.str,r)}var t={},n={str:["string"],prim:["string","number","datetime","currency","boolean"]};return u("Equals","Equals",function(e,t){return e==t}),u("NotEqual","Not equal",function(e,t){return e!=t}),u("Greater","Greater than",function(e,t){return e>t}),u("Less","Less than",function(e,t){return e<t}),u("GreaterOrEqual","Greater or equal",function(e,t){return e>=t}),u("LessOrEqual","Less or equal",function(e,t){return e<=t}),a("Contains","Contains",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)>=0}),a("NotContain","Does not contain",function(e,t){return e!=t&&(!e||!e.indexOf||e.indexOf(t)<0)}),a("BeginsWith","Begins with",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)==0}),a("EndsWith","Ends with",function(t,n){var r;return!e.util.isString(t)||!e.util.isString(n)?!1:(r=t.lastIndexOf(n),r>=0&&t.length-r===n.length)}),o("IsEmpty","Is empty",n.str,function(e){return!e&&e!==0&&e!==!1}),o("NotIsEmpty","Is not empty",n.str,function(e){return!!e||e===0||e===!1}),o("IsNull","Is null",n.prim,function(e){return e==null}),o("NotIsNull","Is not null",n.prim,function(e){return e!=null}),t}()})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function n(t){var n=[];return t=e.util.isString(t)?t.split(/,\s*/):$.isArray(t)?t.slice(0):[t],t=$.isArray(t)?t.slice(0):[t],e.util.each(t,function(t,r){var i=!0,s;if(r==null)return;if(!e.util.isString(r)){r.property!=null&&n.push(r);return}if(r[0]==="-")i=!1,r=r.substr(1);else{var o=/\s(asc|desc)\s*$/.exec(r);o&&(r=r.substr(0,o.index),i=o[1]!=="desc")}n.push({property:r,asc:i})}),n.length>0?n:null}function r(t,r){typeof r=="undefined"&&(r=e.util.compare);var i=n(t),s={isEmpty:!0,original:t,propertyCompareTo:r,compare:null,normalized:i};return i!=null&&(s.isEmpty=!1,s.compare=function(t,n){var s=0,o,u;for(s=0;s<i.length;s++){u=i[s],o=r(e.util.getProperty(t,u.property),e.util.getProperty(n,u.property));if(o!==0)return u.asc||(o=-o),o}return 0}),s}t.compile=r})(e.sorting||(e.sorting={}));var t=e.sorting})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(r){return t.isFunction(r)||e.errors.argument("factory"),n.push(r),{dispose:function(){e.util.remove(n,r)}}}function i(t){if(s(t))return t;var r=e.util.some(n,function(e){return e(t)});return r||e.errors.unsupportedDataSource()}function s(e){return e&&t.isFunction(e.count)&&t.isFunction(e.item)&&t.isFunction(e.getProperty)}var t=jQuery,n=[];e.registerDataViewFactory=r,r(function(e){return s(e)&&e}),r(function(n){return t.isArray(n)&&new e.ArrayDataView(n)}),e.asDataView=i,e.isDataView=s})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function n(n){function i(e){return function(){if(r)return;r=!0;try{e.apply(this,arguments)}finally{r=!1}}}this.array=n,this.currentItem=e.observableWithNewValueCheck(null),this.currentPosition=e.observableWithNewValueCheck(-1);var r=!1;this.currentItem.subscribe(i(function(e){this.currentPosition(e==null?-1:t.inArray(e,this.array))}),this),this.currentPosition.subscribe(i(function(t){e.util.isNumeric(t)||e.errors.argument("value"),(t<-1||t>=this.array.length)&&e.errors.indexOutOfBounds(),this.currentItem(t<0?null:this.array[t])}),this)}return n.prototype.update=function(){var e=this.currentItem(),n=this.currentPosition(),r=t.inArray(e,this.array);r<0&&e==null&&this._recentlyRemovedItem!=null&&(r=t.inArray(this._recentlyRemovedItem,this.array)),r>=0?(e&&(this._recentlyRemovedItem=e),this.currentPosition(r)):n>=0&&n<this.array.length?this.currentItem(this.array[n]):n==this.array.length&&this.array.length>0?(n=this.array.length-1,this.currentPosition(n),this.currentItem(this.array[n])):(this.currentPosition(-1),this.currentItem(null))},n.prototype.updateDelayed=function(){e.util.executeDelayed(this.update,this)},n}();e.CurrencyManager=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function t(t){function n(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),t(!0)}this.onChanged=t,this.filter=e.observable(),this._compiledFilter=e.filtering.compile(null),this.sort=e.observable(),this._compiledSort=e.sorting.compile(null),this.pageIndex=e.observable(0),this.pageSize=e.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(e){this.onFilterChanged(e),t()},this),this.sort.subscribe(function(){this._compiledSort=e.sorting.compile(this.sort()),t()},this),this.pageIndex.subscribe(n,this),this.pageSize.subscribe(n,this)}return t.prototype.onFilterChanged=function(t){this._compiledFilter=e.filtering.compile(t)},t.prototype.setFilter=function(e){this.filter(e)},t.prototype.update=function(e){"filter"in e&&this.setFilter(e.filter),"sort"in e&&this.sort(e.sort),"pageSize"in e&&this.pageSize(e.pageSize),"pageIndex"in e&&this.pageIndex(e.pageIndex)},t.prototype.apply=function(e,t,n){typeof t=="undefined"&&(t=!0),typeof n=="undefined"&&(n=null);var r;if(!this._compiledFilter.isEmpty){n?n.length=0:n=[];for(r=0;r<e.length;r++){var i=e[r];this._compiledFilter.func(i)&&n.push(i)}}else if(!n)n=e.slice(0);else{n.length=e.length;for(r=0;r<e.length;r++)n[r]=e[r]}this._compiledSort.isEmpty||n.sort(this._compiledSort.compare);var s=n.length;return t&&this._take>0&&(this._skip>0&&n.splice(0,Math.min(this._skip,n.length)),this._take<n.length&&(n.length=this._take)),{results:n,totalCount:s}},t.prototype.toObj=function(){return{filter:this._compiledFilter.normalized,sort:this._compiledSort.normalized,pageSize:this.pageSize(),pageIndex:this.pageIndex()}},t}();e.Shape=n;var r=function(){function r(t){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=e.observable(1),this._totalItemCount=e.observable(0),this._isLoaded=e.observable(!1),this._isLoading=e.observable(!1),this._currentEditItem=e.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new e.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(t)}return r.prototype.dispose=function(){},r.prototype.count=function(){return this.local.length},r.prototype.item=function(t){return(t<0||t>=this.local.length)&&e.errors.indexOutOfBounds(),this.local[t]},r.prototype.indexOf=function(e){return t.inArray(e,this.local)},r.prototype.getSource=function(){return this.sourceArray},r.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},r._getProps=function(r){var i=[];return e.util.each(r,function(e,n){e=String(e);if(e.match(/^_/))return;if(t.isFunction(n)&&!n.subscribe)return;i.push({name:e})}),i},r.prototype.getProperties=function(){return this.count()?r._getProps(this.item(0)):[]},r.prototype._readProperty=function(t,n){return e.util.getProperty(t,n)},r.prototype.getProperty=function(e,t){var n=this._getItem(e);return this._readProperty(n,t)},r.prototype._writeProperty=function(t,n,r){e.util.setProperty(t,n,r)},r.prototype.setProperty=function(e,t,n){var r=this._getItem(e);return r===this.currentEditItem()&&this._currentEditItemSnapshot&&!(t in this._currentEditItemSnapshot)&&(this._currentEditItemSnapshot[t]=this.getProperty(e,t)),this._writeProperty(r,t,n),this},r.prototype.subscribe=function(e,t){return this._changed.subscribe(e,t)},r.prototype.trigger=function(){this._currencyManager.update(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},r.prototype.canFilter=function(){return!0},r.prototype.canSort=function(){return!0},r.prototype._updateShape=function(e){this._updatingShape=!0;try{this._shape.update(e)}finally{this._updatingShape=!1}},r.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},r.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},r.prototype._createShape=function(e){return new n(e)},r.prototype._initShape=function(e){var t=this,n=function(e){typeof e=="undefined"&&(e=!1),t._updatingShape||t.refresh(null,e&&t.localPaging)};this._shape=this._createShape(n),e&&this._updateShape(e),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},r.prototype._localRefresh=function(n){typeof n=="undefined"&&(n=this.localPaging);var r=this._shape.apply(this.sourceArray,n,this.local);return n&&this._totalItemCount(r.totalCount),this._pageCount(e.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),t.Deferred().resolve().promise()},r.prototype._remoteRefresh=function(){return this._localRefresh()},r.prototype.refresh=function(e,t){typeof t=="undefined"&&(t=!1);var n=this;this.cancelRefresh(),e&&this._updateShape(e),this._isLoading(!0);var r=t?this._localRefresh():this._remoteRefresh();return r.then(function(){n._isLoaded(!0),n._isLoading(!1)})},r.prototype.cancelRefresh=function(){},r.prototype._initCurrency=function(){this._currencyManager=new e.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},r.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},r.prototype._beginEdit=function(e,t){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=t,this._currentEditItem(e)},r.prototype.canAdd=function(){return!0},r.prototype.add=function(t){t||e.errors.argument("item"),this.commitEdit(),this.local.push(t),this._beginEdit(t,!0),this.trigger()},r.prototype.canAddNew=function(){return!1},r.prototype.addNew=function(){return e.errors.unsupportedOperation()},r.prototype.editItem=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit(),e=this._getItem(e),e&&this._beginEdit(e,!1)},r.prototype.canRemove=function(){return!0},r.prototype._remove=function(t){this.local.splice(t.index,1),e.util.remove(this.sourceArray,t.item),this.trigger()},r.prototype.remove=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit();var t=this._resolve(e);return t?(this._remove(t),!0):!1},r.prototype.canCancelEdit=function(){return!0},r.prototype.cancelEdit=function(){var n=this,r;if(!this.currentEditItem())return;var i=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew?e.util.remove(this.local,this.item):this._currentEditItemSnapshot&&t.each(this._currentEditItemSnapshot,function(e,t){return n._writeProperty(i,e,t)}),this.trigger()},r.prototype.canCommitEdit=function(){return!0},r.prototype.commitEdit=function(){if(!this.currentEditItem())return;var t=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew&&this.sourceArray.push(t);var n=this._shape._compiledFilter;!n.isEmpty&&!n.func(t)&&e.util.remove(this.local,t),this.trigger()},r.prototype._getItem=function(t){var n;return e.util.isNumeric(t)?this.item(t):t},r.prototype._resolve=function(t,n){typeof n=="undefined"&&(n=!1);var r;return e.util.isNumeric(t)?{index:t,item:this.item(t)}:(r=this.indexOf(t),r<0?(n&&e.errors.itemNotInView(t),null):{index:r,item:t})},r}();e.ArrayDataViewBase=r;var i=function(e){function t(t,n){e.call(this,n),this.sourceArray=t,this.refresh()}return __extends(t,e),t}(r);e.ArrayDataView=i})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(e){function n(t){e.call(this),this.isRemote=!0,this.sourceArray=[],t&&this._construct(t)}return __extends(n,e),n.prototype._construct=function(e){this.options=e=t.extend({localPaging:!1},e),this.localPaging=e.localPaging,this._updateShape(e)},n}(e.ArrayDataViewBase);e.RemoteDataView=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={})),define("wijmo.data",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e){this._originalReader=e}return e.prototype.read=function(e){e.items=null,this._originalReader&&t.isFunction(this._originalReader.read)&&this._originalReader.read(e),t.isArray(e.items)||(t.isArray(e.data)?e.items=e.data:e.data&&t.isArray(e.data.rows)?e.items=e.data.rows:e.items=[]);if(e.dynamic)if(!e.data||isNaN(e.data.totalRows))throw"totalRows value is missing"},e}(),r=function(r){function i(e){var i=this;r.call(this),this.dataSource=e,this.isRemote=!0,this.localPaging=!0,this._origLoaded=e.loaded,this._origReader=e.reader,e.loaded=function(e,n){i._loaded(),t.isFunction(i._origLoaded)&&i._origLoaded.apply(i,arguments)},e.reader=new n(e.reader);var s=e.items&&e.items.length>0;t.isArray(e.data)&&!s&&e.read(),e.items&&this._loaded()}return __extends(i,r),i.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,r.prototype.dispose.call(this)},i.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?e.ArrayDataViewBase._getProps(this.sourceArray[0]):[]},i.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&e.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var t=r.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&t.then(this._currentDeferred.resolve)},i.prototype._remoteRefresh=function(){this._currentDeferred&&this._currentDeferred.state()==="pending"&&this._currentDeferred.fail(),this._currentDeferred=t.Deferred();var e={},n=!1;return this.dataSource.dynamic&&(n=!0,e.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=t.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=t.extend({},this._origDataOption,e.data))),this.dataSource.load(e,n),this._currentDeferred},i.prototype._prepareRequest=function(){return{filtering:this._prepareFilterRequest(),paging:this._preparePageRequest(),sorting:this._prepareSortRequest()}},i.prototype._prepareFilterRequest=function(){var e=[];return!this._shape._compiledFilter.isEmpty&&this._shape._compiledFilter.normalized&&t.each(this._shape._compiledFilter.normalized,function(t,n){e.push({dataKey:t,filterOperator:n.op.Name,filterValue:n.value})}),e},i.prototype._preparePageRequest=function(){return{pageIndex:this._shape.pageIndex(),pageSize:this._shape.pageSize()}},i.prototype._prepareSortRequest=function(){return this._shape._compiledSort.isEmpty||!this._shape._compiledSort.normalized||this._shape._compiledSort.normalized.length==0?[]:t.map(this._shape._compiledSort.normalized,function(e){return{dataKey:e.property,sortDirection:e.asc?"ascending":"descending"}})},i}(e.ArrayDataViewBase);e.registerDataViewFactory(function(e){if(typeof wijdatasource=="function"&&e instanceof wijdatasource)return new r(e);return})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={})),define("wijmo.data.wijdatasource",function(){}),function(e){e.fn.extend({wijtextselection:function(){var t,n,r=this[0],i=this.val();if(arguments.length===0){var s,o,u,a;if(e.browser.msie&&e.browser.version<9)try{var f=document.selection;r.tagName.toLowerCase()!="textarea"?(s=f.createRange().duplicate(),s.moveEnd("character",i.length),u=s.text===""?i.length:i.lastIndexOf(s.text),s=f.createRange().duplicate(),s.moveStart("character",-i.length),a=s.text.length):(s=f.createRange(),o=s.duplicate(),o.moveToElementText(r),o.setEndPoint("EndToEnd",s),u=o.text.length-s.text.length,a=u+s.text.length)}catch(a){}else u=r.selectionStart,a=r.selectionEnd;var l=i.substring(u,a);return{start:u,end:a,text:l,replace:function(e){return i.substring(0,u)+e+i.substring(a,i.length)}}}if(arguments.length===1){if(typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number")t=arguments[0].start,n=arguments[0].end;else if(typeof arguments[0]=="string")(t=i.indexOf(arguments[0]))>-1&&(n=t+arguments[0].length);else if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var c=arguments[0].exec(i);c!=null&&(t=c.index,n=t+c[0].length)}}else arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(t=arguments[0],n=arguments[1]);typeof t=="undefined"&&(t=0,n=i.length);if(e.browser.msie){var h=r.createTextRange();h.collapse(!0),h.moveStart("character",t),h.moveEnd("character",n-t),h.select()}else r.selectionStart=t,r.selectionEnd=n}})}(jQuery),define("wijmo.wijtextselection",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(wijmo){(function(input){var $=jQuery,jqKeyCode=wijmo.getKeyCodeEnum(),wijinputcore=function(e){function t(){e.apply(this,arguments),this._boundMouseWheel=!1,this._wasPopupShowing=!1,this._blockNextTriggerClickedEvent=!1}return __extends(t,e),t.prototype._elemWithClasses=function(e,t){return typeof t=="undefined"&&(t=[]),$(e).addClass(t.join(" "))},t.prototype._divWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<div/>",e)},t.prototype._spanWithClasses=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];return this._elemWithClasses("<span/>",e)},t.prototype._horizontalBorderWidth=function(e){return e.leftBorderWidth()+e.rightBorderWidth()},t.prototype._verticalBorderWidth=function(e){return e.topBorderWidth()+e.bottomBorderWidth()},t.prototype._create=function(){var e=this;try{var t=document.activeElement==this.element[0]}catch(n){}var r=this._horizontalBorderWidth(this.element),i=this._verticalBorderWidth(this.element);if(this.element[0].tagName.toLowerCase()!=="input"&&this.element[0].tagName.toLowerCase()!=="textarea")throw"Target element is not a INPUT";this._creationDate=new Date,window.wijmoApplyWijTouchUtilEvents&&($=window.wijmoApplyWijTouchUtilEvents($)),this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){e._destroy(),e._create(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijinput"),this.element.data("widgetName",this.widgetName),$.effects&&$.effects.save?$.effects.save(this.element,["width","height"]):$.save&&$.save(this.element,["width","height"]);var s=this.options.wijCSS;this.element.wrap("<div><span/></div>"),this.wrapper=this.element.parent(),this.outerDiv=this.wrapper.parent(),this.outerDiv.addClass([s.wijinput,s.widget,s.helperClearFix,s.stateDefault,s.cornerAll].join(" ")),this.wrapper.addClass(s.wijinputWrapper),this.element.addClass(s.wijinputInput).addClass(s.cornerAll).attr("role","textbox");if(!(Utility.IsIE()&&parseFloat($.browser.version)<=7))try{this.element.attr("aria-multiline",!1)}catch(n){this.element[0].setAttribute("aria-multiline","false")}this._createDropDownAndSpin(),this._initialize(),t&&$(function(){return e.element.focus().wijtextselection(0,e.element.val().length)});var o=this.element[0].style;o.width&&(this._isInPercents(o.width)?this.outerDiv.width(o.width):this.outerDiv.width(this.element.width()+r-this._horizontalBorderWidth(this.outerDiv)),this.element.width("")),o.height&&(this._isInPercents(o.height)?this.outerDiv.height(o.height):this.outerDiv.height(this.element.height()+i-this._verticalBorderWidth(this.outerDiv)),this.element.height(this.outerDiv.height()-(parseInt(this.wrapper.css("padding-top"))+parseInt(this.wrapper.css("padding-bottom")))))},t.prototype._createDropDownAndSpin=function(){this._createDropDownAndSpinElement(),this._createDropDownAndSpinStyle(),this._createDropDownAndSpinLayout()},t.prototype._createDropDownAndSpinElement=function(){var e=this.options.wijCSS,t=this.options.spinnerAlign,n=t==="verticalLeft",r=this.options.dropDownButtonAlign==="left",i=this.options.showSpinner,s=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(n=this.options.buttonAlign=="left",r=this.options.buttonAlign=="left",t=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight"),this.triggerBtn=null,this.spinUpElement=null,this.spinDownElement=null,this.outerDiv.css("overflow","hidden");if(s){var o=r?e.cornerLeft:e.cornerRight;this.triggerBtn=this._divWithClasses(e.wijinputTrigger,e.stateDefault,o).append(this._spanWithClasses(e.icon,e.iconArrowDown)).attr("role","button"),this.element.attr({role:"combobox","aria-expanded":!1})}i&&(this.spinnerLeft=this._divWithClasses(e.wijinputSpinnerLeft,e.wijinputButton),this.spinnerRight=this._divWithClasses(e.wijinputSpinnerRight,e.wijinputButton),t==="verticalLeft"||t==="verticalRight"?(this.spinUpElement=this._divWithClasses(e.stateDefault,e.wijinputSpinUp).append(this._spanWithClasses(e.icon,e.iconArrowUp)).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(e.stateDefault,e.wijinputSpinDown).append(this._spanWithClasses(e.icon,e.iconArrowDown)).attr("role","downbutton")):(this.spinUpElement=this._divWithClasses(e.stateDefault,e.wijinputSpin).append(this._spanWithClasses(e.icon,e.iconPlus)).attr("role","upbutton"),this.spinDownElement=this._divWithClasses(e.stateDefault,e.wijinputSpin).append(this._spanWithClasses(e.icon,e.iconMinus)).attr("role","downbutton")),this.element.attr("role","spinner"))},t.prototype._createDropDownAndSpinStyle=function(){var e=this.options.wijCSS,t=this.options.spinnerAlign,n=this.options.spinnerAlign==="verticalLeft",r=this.options.dropDownButtonAlign==="left",i=this.options.showSpinner,s=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(n=this.options.buttonAlign=="left",r=this.options.buttonAlign=="left",t=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight");if(s&&i)if(r)switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputSpinnerTriggerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputTriggerLeft),this.outerDiv.addClass(e.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerTriggerLeft),this.outerDiv.addClass(e.inputSpinnerRight)}else switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputTriggerRight),this.outerDiv.addClass(e.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputSpinnerTriggerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerTriggerRight),this.outerDiv.addClass(e.inputSpinnerLeft)}else if(s)r?this.outerDiv.addClass(e.inputTriggerLeft):this.outerDiv.addClass(e.inputTriggerRight);else if(i)switch(t){case"verticalLeft":this.outerDiv.addClass(e.inputSpinnerLeft);break;case"verticalRight":this.outerDiv.addClass(e.inputSpinnerRight);break;case"horizontalDownLeft":case"horizontalUpLeft":this.outerDiv.addClass(e.inputSpinnerLeft),this.outerDiv.addClass(e.inputSpinnerRight)}if(s&&i)if(r)switch(t){case"verticalRight":this.spinUpElement.addClass(e.cornerTR),this.spinDownElement.addClass(e.cornerBR);break;case"horizontalDownLeft":this.spinUpElement.addClass(e.cornerRight);break;case"horizontalUpLeft":this.spinDownElement.addClass(e.cornerRight)}else switch(t){case"verticalLeft":this.spinUpElement.addClass(e.cornerTL),this.spinDownElement.addClass(e.cornerBL);break;case"horizontalDownLeft":this.spinDownElement.addClass(e.cornerLeft);break;case"horizontalUpLeft":this.spinUpElement.addClass(e.cornerLeft)}else if(i)switch(t){case"verticalLeft":this.spinUpElement.addClass(e.cornerTL),this.spinDownElement.addClass(e.cornerBL);break;case"verticalRight":this.spinUpElement.addClass(e.cornerTR),this.spinDownElement.addClass(e.cornerBR);break;case"horizontalDownLeft":this.spinDownElement.addClass(e.cornerLeft),this.spinUpElement.addClass(e.cornerRight);break;case"horizontalUpLeft":this.spinUpElement.addClass(e.cornerLeft),this.spinDownElement.addClass(e.cornerRight)}},t.prototype._createDropDownAndSpinLayout=function(){var e=this.options.spinnerAlign,t=this.options.showSpinner,n=this._isDropDownButtonShown();this.options.buttonAlign!=null&&(e=this.options.buttonAlign=="left"?"verticalLeft":"verticalRight"),n&&this.triggerBtn.appendTo(this.outerDiv);if(t)switch(e){case"verticalLeft":this.spinnerLeft.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"verticalRight":this.spinnerRight.append(this.spinUpElement).append(this.spinDownElement).appendTo(this.outerDiv);break;case"horizontalDownLeft":this.spinnerLeft.append(this.spinDownElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinUpElement).appendTo(this.outerDiv);break;case"horizontalUpLeft":this.spinnerLeft.append(this.spinUpElement).appendTo(this.outerDiv),this.spinnerRight.append(this.spinDownElement).appendTo(this.outerDiv)}},t.prototype._isDropDownButtonShown=function(){var e=this.options.showTrigger;return e===undefined&&(e=!1),e||this.options.showDropDownButton},t.prototype._isInPercents=function(e){return e.match(/%$/)},t.prototype._createTextProvider=function(){return undefined},t.prototype._beginUpdate=function(){},t.prototype._endUpdate=function(){var e=this;this.element.mousewheel&&!this._boundMouseWheel&&(this.element.mousewheel(function(t,n){e.isFocused()&&e._doSpin(n>0,!1)&&t.preventDefault()}),this._boundMouseWheel=!0)},t.prototype._isPopupShowing=function(){return!!this._comboDiv&&this._comboDiv.wijpopup("isVisible")},t.prototype._onTriggerMouseDown=function(e){this._wasPopupShowing&&(this._blockNextTriggerClickedEvent=!0)},t.prototype._onTriggerMouseUp=function(e){},t.prototype._onTriggerClicked=function(){if(this._blockNextTriggerClickedEvent){this._blockNextTriggerClickedEvent=!1;return}this._popupVisible()?this._hidePopup():this._showPopup()},t.prototype._showPopup=function(){return this._popupComboList()},t.prototype._hidePopup=function(){this._comboDiv.wijpopup("hide")},t.prototype._initialize=function(){var e=this;this.element.data("initializing",!0),this._trigger("initializing"),this.element.data("preText",this.element.val()),this.element.data("elementValue",this.element.val()),this.element.data("errorstate",!1),this.element.data("breakSpinner",!0),this.element.data("prevCursorPos",-1),this.element.data("simulating",!1),this._createTextProvider(),this._beginUpdate();var t=this.options,n=function(e){return(e.which?e.which:e.button)===1},r=function(t){if(e.options.disabled)return;if(!n(t))return;if(e.options.disableUserInput)return;e._trySetFocus(),Utility.IsFireFox4OrLater()&&e._stopEvent(t),e.element.data("breakSpinner",!1),e._addState("active",$(e)),e._doSpin($(t.currentTarget).attr("role")=="upbutton",!0)},i=function(t){if(e.options.disabled)return;if(!n(t))return;if(e.options.disableUserInput)return;e._stopSpin(),e._removeState("active",$(e))};this.triggerBtn&&!t.disabledState&&this.triggerBtn.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",$(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",$(e))},mousedown:function(t){if(e.options.disabled)return;if(!n(t))return;e._stopEvent(t),e._addState("active",$(e)),e._trigger("triggerMouseDown"),e._trigger("dropDownButtonMouseDown"),e._onTriggerMouseDown(t)},mouseup:function(t){e._onTriggerMouseUp(t)},click:function(t){if(e.options.disabled)return;e._stopEvent(t),e._stopSpin(),e._removeState("active",$(e)),e._trigger("triggerMouseUp"),e._trigger("dropDownButtonMouseUp"),e._onTriggerClicked(),e._trySetFocus()}}),this.spinUpElement&&!t.disabledState&&this.spinUpElement.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",$(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",$(e)),e._removeState("active",$(e)),e._stopSpin()},mousedown:r,mouseup:i}),this.spinDownElement&&!t.disabledState&&this.spinDownElement.bind({mouseover:function(){if(e.options.disabled)return;e._addState("hover",$(e))},mouseout:function(){if(e.options.disabled)return;e._removeState("hover",$(e)),e._removeState("active",$(e)),e._stopSpin()},mousedown:r,mouseup:i}),this._attachInputEvent(),this.element.data("initializing",!1),this._resetData(),this._endUpdate(),this._updateText();if(this.options.disabledState){var s=t.disabled;this.disable(),t.disabled=s}this.options.disabled&&this.disable(),this.options.imeMode&&this.element.css("ime-mode",this.options.imeMode),this.element.data("initialized",!0),this._trigger("initialized")},t.prototype._attachInputEvent=function(){this.element.bind({"focus.wijinput":$.proxy(this._onFocus,this),"beforedeactivate.wijinput":$.proxy(this._onBeforeDeactivate,this),"blur.wijinput":$.proxy(this._onBlur,this),"mousedown.wijinput":$.proxy(this._onMouseDown,this),"mouseup.wijinput":$.proxy(this._onMouseUp,this),"keypress.wijinput":$.proxy(this._onKeyPress,this),"keydown.wijinput":$.proxy(this._onKeyDown,this),"keyup.wijinput":$.proxy(this._onKeyUp,this),"compositionstart.wijinput":$.proxy(this._onCompositionStart,this),"compositionend.wijinput":$.proxy(this._onCompositionEnd,this),"change.wijinput":$.proxy(this._onChange,this),"paste.wijinput":$.proxy(this._onPaste,this),"drop.wijinput":$.proxy(this._onDrop,this)}),this.element.bind("propertychange.wijinput input.wijinput",$.proxy(this._onInput,this))},t.prototype._detachInputEvent=function(){this.element.unbind(".wijinput")},t.prototype._init=function(){this.element.attr("readOnly")&&(this.options.readonly=!0),this.options.readonly===!0&&(this.options.disableUserInput=!0),(this.options.readonly===!0||this.options.disableUserInput===!0)&&this.element.attr("readOnly",!0),this.options.placeholder!=null&&(this.options.nullText=this.options.placeholder),this.options.showTrigger!=undefined&&this._setOption("showDropDownButton",this.options.showTrigger)},t.prototype._showNullText=function(){return!!this.options.nullText||this.options.nullText===""},t.prototype._setOption=function(e,t){switch(e){case"readonly":this._super(e,t),e="disableUserInput";break;case"placeholder":this._super(e,t),e="nullText";break;case"showTrigger":this.options.showDropDownButton=t}this._super(e,t);switch(e){case"spinnerAlign":case"dropDownButtonAlign":case"showDropDownButton":case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy(),this._create();break;case"showNullText":case"nullText":this._updateText();break;case"imeMode":this.element.css("ime-mode",this.options.imeMode);break;case"disabled":this.element.attr("disabled",t);var n=t?"addClass":"removeClass",r=this.options.wijCSS.stateDisabled;this.element[n](r),this.triggerBtn&&this.triggerBtn[n](r),this.spinUpElement&&this.spinUpElement[n](r),this.spinDownElement&&this.spinDownElement[n](r);break;case"disableUserInput":this.element.attr("readOnly",t)}},t.prototype.destroy=function(){this._super(),this._comboDiv&&this._comboDiv.remove(),this._destroy()},t.prototype.drop=function(){this._onTriggerClicked()},t.prototype.isDestroyed=function(){return!this.outerDiv},t.prototype._destroy=function(){if(this.isDestroyed())return;this.wrapper=undefined,this.outerDiv=undefined,this._detachInputEvent(),this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevCursorPos").removeData("simulating").removeData("isPassword").removeClass(this.options.wijCSS.wijinputInput).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded"),this.element.parent().replaceWith(this.element),this.element.parent().replaceWith(this.element),$.effects&&$.effects.restore?$.effects.restore(this.element,["width","height"]):$.restore&&$.restore(this.element,["width","height"])},t.prototype.widget=function(){return this.outerDiv||this._super()},t.prototype._getCulture=function(e){return typeof e=="undefined"&&(e=this.options.culture),Globalize.findClosestCulture(e||this.options.culture)},t.prototype._addState=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass(this.options.wijCSS.getState(e))},t.prototype._removeState=function(e,t){t.removeClass(this.options.wijCSS.getState(e))},t.prototype._isInitialized=function(){return!this.element.data("initializing")},t.prototype._setData=function(e){this.setText(e)},t.prototype._resetData=function(){},t.prototype._validateData=function(){},t.prototype.getText=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!1):this.element.val()},t.prototype.setText=function(e){this._isInitialized()?(this._textProvider.setText(e),this._updateText()):this.element.val(e)},t.prototype.getPostValue=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},t.prototype.selectText=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this.getText().length),isNaN(e)&&(e=0),isNaN(t)&&(t=0),Utility.IsFireFox4OrLater()&&this.focus();if(this.element.is(":disabled"))return;this.element.wijtextselection(e,t)},t.prototype.focus=function(){if(this.element.is(":disabled"))return;this.element.get(0).focus()},t.prototype.isFocused=function(){return this.outerDiv?this.outerDiv.hasClass(this.options.wijCSS.stateFocus):!1},t.prototype._raiseTextChanged=function(){var e=this.element.val(),t=this.element.data("preText");!!this.element.data("initialized")&&t!==e&&(this._trigger("textChanged",null,{text:e}),this.element.data("changed",!0)),this.element.data("preText",e)},t.prototype._raiseDataChanged=function(){},t.prototype._allowEdit=function(){return!this.element.is(":disabled")},t.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this._isInitialized())return;e=!!e;var t;this.element.data("selectionbeforeblur")!==undefined?(t=this.element.data("selectionbeforeblur"),this.element.removeData("selectionbeforeblur")):t=this.element.wijtextselection();var n=this.options;this.isDeleteAll&&this._showNullText()?(this.isDeleteAll=!1,n.date=null,this.element.val(n.nullText)):(this.element.val(this._textProvider.toString()),this.options.text=this._textProvider.toString(!0,!1,!1));if(this.element.is(":disabled"))return;e&&this.selectText(t.start,t.end),this.element.data("prevCursorPos",t.start),this._raiseTextChanged(),this._raiseDataChanged()},t.prototype._trySetFocus=function(){if(document.activeElement!==this.element[0])try{this.options.disableUserInput||this.element.focus()}catch(e){}},t.prototype._deleteSelText=function(e){typeof e=="undefined"&&(e=!1);if(!this._allowEdit())return;var t=this.element.wijtextselection();if(e){if(t.end<1)return;t.end===t.start&&t.start--}t.end--,t.end<t.start&&(t.end=t.start);var n=new wijInputResult;this._textProvider.removeAt(t.start,t.end,n),this._updateText(),this.selectText(n.testPosition,n.testPosition)},t.prototype._fireIvalidInputEvent=function(e){var t=this,n=this._trigger("invalidInput",null,{widget:this,"char":e});if($.isFunction(this.options.invalidInput)&&n===!0)return;if(!this.element.data("errorstate")){var r=this.options.invalidClass||this.options.wijCSS.stateError;this.element.data("errorstate",!0),window.setTimeout(function(){t.outerDiv&&t.outerDiv.removeClass(r),t.element.data("errorstate",!1)},200),this.outerDiv.addClass(r)}},t.prototype._onInput=function(e){if(!this._isSimulating()||!this.element.data("ime")||this.element.data("isComposingIME")){this.element.data("isComposingIME")&&this.element.data("simulationPending",!0);return}this._simulate()},t.prototype._keyDownPreview=function(e){var t=e.keyCode||e.which;return e.ctrlKey===!0&&t===88?!0:e.ctrlKey===!0&&t===90?!0:!1},t.prototype._onDoubleByteCharacter=function(){var e=this.element.data("lastDbsState"),t=this.element.wijtextselection(),n=this.element.val();this.element.data("isComposingIME")&&e&&e.selection.start===t.start&&e.Text===n?(this.element.removeData("lastDbsState"),this._onCompositionEnd()):(this.element.data("lastDbsState",{selection:t,text:n}),this._onCompositionStart())},t.prototype._onCompositionStart=function(){if(this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!0),this._beforeSimulate(!0)},t.prototype._onCompositionEnd=function(){if(!this.element.data("isComposingIME"))return;this.element.data("isComposingIME",!1),this._isInitialized()&&(!this._textProvider||!this._textProvider.noMask)&&this._simulateIfPending()},t.prototype._simulateIfPending=function(){this.element.data("simulationPending")&&this.element.data("lastSelection")&&this._simulate()},t.prototype._beforeSimulate=function(e){typeof e=="undefined"&&(e=!1),this.element.data("lastSelection")||(this.element.data("lastSelection",this.element.wijtextselection()),this.element.data("lastValue",this.element.val())),this.element.data("ime",e),this.element.data("simulating",!0)},t.prototype._isSimulating=function(){return this.element.data("simulating")},t.prototype._simulate=function(e){var t=this,n=null;this.element.data("simulationPending",!1);if(typeof e=="string")n=e;else{var r=this.element.wijtextselection(),i=this.element.data("lastSelection").start,s=r.end;s>=i&&(n=this.element.val().substring(i,s))}n&&window.setTimeout(function(){if(t._isLastValueNull())return;t.element.val(t.element.data("lastValue"));var e=t.element.data("lastSelection");t.element.wijtextselection(e),t.element.data("batchKeyPress",!0),t.element.data("simulating",!1);var r=jQuery.Event("keypress");r.ctrlKey=r.altKey=!1;for(var i=0;i<n.length;i++){r.which=r.charCode=r.keyCode=n.charCodeAt(i),t.element.data("nextChar",i===n.length-1?"":n.charAt(i+1)),t._onKeyPress(r),t.element.data("nextChar","");var s=t.element.data("appendChar");s&&s.length>0&&(t.element.data("appendChar",""),r.which=r.charCode=r.keyCode=s.charCodeAt(i),t._onKeyPress(r)),t.element.data("skipNextChar")&&(i++,t.element.data("skipNextChar",!1))}t.element.data("batchKeyPress",!1),t._endSimulate()},1)},t.prototype._isLastValueNull=function(){return!this.element.data("lastValue")},t.prototype._endSimulate=function(){this._simulateIfPending(),this.element.removeData("ime"),this.element.removeData("lastSelection"),this.element.removeData("lastValue")},t.prototype._processKeyForDropDownList=function(e){var t=this._getKeyCode(e);if(!(!e.altKey||t!==jqKeyCode.UP&&t!==jqKeyCode.DOWN))return this._onTriggerClicked(),this._stopEvent(e),!0;if(t===jqKeyCode.ESCAPE&&this._wasPopupShowing)return this._hidePopup(),this._stopEvent(e),!0;if(this._wasPopupShowing&&this._comboDiv!==undefined){if(t===jqKeyCode.DOWN){try{this._comboDiv.wijlist("next")}catch(n){}return this._stopEvent(e),!0}if(t===jqKeyCode.UP){try{this._comboDiv.wijlist("previous")}catch(n){}return this._stopEvent(e),!0}if(t===jqKeyCode.ENTER)return this._comboDiv.wijlist("select"),this._stopEvent(e),!0;if(t===jqKeyCode.PAGE_DOWN){try{this._comboDiv.wijlist("nextPage")}catch(n){}return this._stopEvent(e),!0}if(t===jqKeyCode.PAGE_UP){try{this._comboDiv.wijlist("previousPage")}catch(n){}return this._stopEvent(e),!0}}},t.prototype._processKeyOnNoMask=function(e){var t=this._getKeyCode(e);t===jqKeyCode.Enter&&this._onEnterDown(e);if(t===jqKeyCode.LEFT||t===jqKeyCode.RIGHT)if(this._processLeftRightKey(t===jqKeyCode.LEFT)){this._stopEvent(e);return}this._processKeyForDropDownList(e)},t.prototype._onKeyDown=function(e){this.element.data("prevCursorPos",-1),this._deleteKeyDown=!1;if(!this._isInitialized())return;if(this._textProvider&&!!this._textProvider.noMask){this._processKeyOnNoMask(e);return}var t=this._getKeyCode(e);if(t===229){this._onDoubleByteCharacter();return}this._onCompositionEnd();if(this.options.disableUserInput){t===jqKeyCode.TAB?this._processTabKey(e)&&this._stopEvent(e):this._stopEvent(e);return}if(this._keyDownPreview(e)){this._stopEvent(e);return}if(this._processKeyForDropDownList(e))return;switch(t){case jqKeyCode.UP:this._doSpin(!0,!1),this._stopEvent(e);return;case jqKeyCode.DOWN:this._doSpin(!1,!1),this._stopEvent(e);return;case jqKeyCode.LEFT:case jqKeyCode.RIGHT:this._processLeftRightKey(t===jqKeyCode.LEFT)&&this._stopEvent(e);return;case jqKeyCode.TAB:this._processTabKey(e)&&this._stopEvent(e);return}if(e.ctrlKey)switch(t){case jqKeyCode.INSERT:case 67:return;default:}if(e.ctrlKey||e.altKey)return;switch(t){case 112:case 113:case 114:case 115:case 116:case 117:case jqKeyCode.TAB:case jqKeyCode.CAPSLOCK:case jqKeyCode.END:case jqKeyCode.HOME:case jqKeyCode.CTRL:case jqKeyCode.SHIFT:return;case jqKeyCode.BACKSPACE:this._deleteSelText(!0),this._stopEvent(e);return;case jqKeyCode.DELETE:this._deleteSelText(!1),this._stopEvent(e),this._deleteKeyDown=!0;return;case jqKeyCode.ENTER:this._onEnterDown(e);break;case jqKeyCode.ESCAPE:this._stopEvent(e),window.setTimeout($.proxy(this._resetData,this),1);return;case jqKeyCode.PAGE_UP:case jqKeyCode.PAGE_DOWN:case jqKeyCode.ALT:this._stopEvent(e);return}},t.prototype._onEnterDown=function(e){this.options.hideEnter&&this._stopEvent(e)},t.prototype._onKeyUp=function(e){if(this._textProvider&&!!this._textProvider.noMask)return;var t=this._getKeyCode(e);if(this._isSimulating()){t===jqKeyCode.ENTER&&this._onCompositionEnd();return}if(!this._isInitialized())return;if(t===jqKeyCode.ENTER||t===jqKeyCode.ESCAPE)return;if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}this._stopEvent(e)},t.prototype._getKeyCode=function(e){var t=window.navigator.userAgent;return t.indexOf("iPod")===-1&&t.indexOf("iPhone")===-1||e.which!==127?e.keyCode||e.which:8},t.prototype._keyPressPreview=function(e){return!1},t.prototype._onKeyPress=function(e){if(this._isSimulating()||this._textProvider&&!!this._textProvider.noMask)return;this.element.data("prevCursorPos",-1);if(this.options.disableUserInput)return;if(!this._allowEdit())return;if(e.ctrlKey&&e.keyCode===119){this._onPaste(e);return}var t=e.keyCode||e.which;if(Utility.IsFireFox4OrLater())switch(e.keyCode){case jqKeyCode.UP:case jqKeyCode.DOWN:case jqKeyCode.LEFT:case jqKeyCode.RIGHT:case jqKeyCode.HOME:case jqKeyCode.END:return}switch(t){case 0:case jqKeyCode.TAB:return;case jqKeyCode.BACKSPACE:this._stopEvent(e);return;case jqKeyCode.DELETE:if(this._deleteKeyDown){this._stopEvent(e);return}break;case jqKeyCode.ENTER:this.options.hideEnter&&this._stopEvent(e);return}if(e.ctrlKey||e.altKey)if(t!==jqKeyCode.SPACE)return;if(this._keyPressPreview(e))return;var n=String.fromCharCode(t),r=this._textProvider.replaceWith(this.element.wijtextselection(),n);r?(this._updateText(),this.selectText(r.testPosition+1,r.testPosition+1),this.element.data("prevCursorPos",r.testPosition+1)):this._fireIvalidInputEvent(n),this.element.data("batchKeyPress")||this._stopEvent(e)},t.prototype._isNullText=function(e){return e=e||this.element.val(),this._showNullText()&&e===this.options.nullText},t.prototype._doFocus=function(){var e=this.element.wijtextselection(),t=e.start;this._updateText();var n=this.element.val();n.length===t&&(t=0),$.browser.safari||this.selectText(t,t)},t.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},t.prototype._onFocus=function(e){if(this.options.disableUserInput)return;this._addState("focus",this.outerDiv);if(!this.element.data("breakSpinner"))return;if(!this._isInitialized())return;if(!this._allowEdit())return;this.element.data("focusNotCalledFirstTime")||this.element.data("focusNotCalledFirstTime",(new Date).getTime()),this._afterFocused()},t.prototype._onBeforeDeactivate=function(e){if(this.options.disableUserInput)return;if(!this.element.data("breakSpinner"))return;if(!this._isInitialized())return;if(!this._allowEdit())return;this.element.data("selectionbeforeblur",this.element.wijtextselection())},t.prototype._onBlur=function(e){if(this.options.disableUserInput)return;this._onCompositionEnd();if(this._isComboListVisible())return;var t=this.isFocused();this._removeState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){this.element.get(0).focus();var n=this.element.data("prevCursorPos");n!==undefined&&n!==-1&&this.selectText(n,n);return}if(!this._isInitialized()||!t)return;this.element.data("value",this.element.val()),this._updateTextOnLostFocus()},t.prototype._updateTextOnLostFocus=function(){var e=this;window.setTimeout(function(){e._onChange(),e._updateText(),e._validateData(),e.element.data("changed")&&(e.element.data("changed",!1),e._popupVisible()||(e._trigger("change"),e.element.change()))},100)},t.prototype._popupVisible=function(){return this._wasPopupShowing},t.prototype._onMouseDown=function(e){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;if(Utility.IsMouseDownOnClearButton(e)){var t=!1;try{t=document.activeElement===e.target}catch(n){}this.element.data("focusedWhenMouseDown",t),this.element.data("mouseDownOnClearButton",!0);return}},t.prototype._onMouseUp=function(e){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;if(Utility.IsMouseDownOnClearButton(e)&&this.element.data("mouseDownOnClearButton")&&this.element.data("focusedWhenMouseDown")===!0){if(!this.options.disableUserInput){var t=this;setTimeout(function(){t._processClearButton()},0)}this.element.data("mouseDownOnClearButton",!1);return}this.element.data("mouseDownOnClearButton",!1),this.element.data("focusedWhenMouseDown",!1);var n=this.element.wijtextselection();this.element.data("prevCursorPos",n.start);if(this.element.val()=="")return;var t=this;setTimeout(function(){t.element.val()==""&&t.setText("")},5)},t.prototype._onChange=function(){if(!this.element)return;var e=this.element.val(),t=this.getText();t!==e&&this.setText(e)},t.prototype._onPaste=function(e){if(this._textProvider&&!!this._textProvider.noMask)return;this._beforeSimulate();var t=this;window.setTimeout(function(){t._simulate()},1)},t.prototype._onDrop=function(e){this._beforeSimulate();if(e.originalEvent&&e.originalEvent.dataTransfer){var t=e.originalEvent.dataTransfer.getData("Text");t&&this._simulate(t)}},t.prototype._stopEvent=function(e){e.stopPropagation(),e.preventDefault()},t.prototype._calcSpinInterval=function(){return this._repeatingCount++,this._repeatingCount>10?50:this._repeatingCount>4?100:this._repeatingCount>2?200:400},t.prototype._doSpin=function(e,t){return!1},t.prototype._stopSpin=function(){this.element.data("breakSpinner",!0),this._repeatingCount=0;var e=this.element.data("spintimer");e&&(clearTimeout(e),this.element.data("spintimer",undefined))},t.prototype._hasComboItems=function(){return!!this._getcomboItems()&&this._getcomboItems().length},t.prototype._getcomboItems=function(){return!!this.options.comboItems&&this.options.comboItems.length>0?this.options.comboItems:this.options.pickers.list},t.prototype._getcomboWidth=function(){return this.options.comboWidth||this.options.pickers.width},t.prototype._getcomboHeight=function(){return this.options.comboHeight||this.options.pickers.height},t.prototype._isComboListVisible=function(){return this._comboDiv?this._comboDiv.wijpopup("isVisible"):!1},t.prototype._createComboDiv=function(){var e=this;if(this._comboDiv===undefined){this._comboDiv=$("<div></div>").appendTo(document.body).css("position","absolute");var t=this._normalize(this._getcomboItems());this._comboDiv.wijlist({maxItemsCount:5,selected:function(t,n){e.options.disableUserInput||e._setData(n.item.value),e._comboDiv.wijpopup("hide"),e._trySetFocus()}}),this._comboDiv.wijlist("setItems",t),this._comboDiv.wijlist("renderList")}},t.prototype._popupComboList=function(){var e=this;return this._hasComboItems()?this._allowEdit()?(this._createComboDiv(),this._comboDiv.width(this.outerDiv.width()),this._comboDiv.wijlist("option","autoSize",!this._getcomboHeight()),this._getcomboHeight()&&this._comboDiv.height(this._getcomboHeight()),this._getcomboWidth()&&parseInt(this._getcomboWidth())!==this._comboDiv.width()&&(this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv,this._createComboDiv(),this._comboDiv.width(this._getcomboWidth()),this._comboDiv.wijlist("option","autoSize",!this._getcomboHeight()),this._getcomboHeight()&&this._comboDiv.height(this._getcomboHeight())),this._comboDiv.wijlist("refreshSuperPanel"),this._comboDiv.wijpopup({autoHide:!0,hidden:function(){e._trigger("dropDownClose"),e._wasPopupShowing=!1,e._comboDiv.wijlist("unselectItems"),e._comboDiv.wijlist("deactivate")},shown:function(){e._trigger("dropDownOpen"),e._wasPopupShowing=!0}}),this.outerDiv.attr("aria-expanded",!0),this._comboDiv.wijpopup("show",{of:this.outerDiv,offset:"0 4",hidden:function(){e.outerDiv.attr("aria-expanded",!1)}}),!0):!1:!1},t.prototype._normalize=function(e){return e.length&&e[0].label&&e[0].value?e:$.map(e,function(e){return typeof e=="string"?{label:e,value:e}:$.extend({label:e.label||e.value,value:e.value||e.label},e)})},t.prototype._processLeftRightKey=function(e){return!1},t.prototype._processTabKey=function(e){return!1},t.prototype._moveControl=function(e,t,n){var r=Utility.GetElements(),i=null,s={};if(r.length<2)return null;var o=Utility.GetNextFocusableControl(e,r,t);setTimeout(function(){Utility.SetElementFocus(o)},0)},t.prototype._processClearButton=function(){},t}(wijmo.wijmoWidget);input.wijinputcore=wijinputcore;var wijinputClass="wijmo-wijinput",classPrefix=wijinputClass+"-",wijinputcore_options=function(){function e(){this.wijCSS={wijinput:wijinputClass,wijinputInput:classPrefix+"input",wijinputWrapper:classPrefix+"wrapper",wijinputWrapperSpinnerLeft:classPrefix+"wrapper-spinner-left",wijinputWrapperSpinnerRight:classPrefix+"wrapper-spinner-right",wijinputTrigger:classPrefix+"trigger",wijinputSpinnerLeft:classPrefix+"spinner-left",wijinputSpinnerRight:classPrefix+"spinner-right",wijinputButton:classPrefix+"button",wijinputSpin:classPrefix+"spin",wijinputSpinUp:classPrefix+"spinup",wijinputSpinDown:classPrefix+"spindown",iconPlus:"ui-icon-plus",iconMinus:"ui-icon-minus"},this.imeMode="",this.culture="",this.invalidClass=$.wijmo.wijCSS.stateError,this.nullText=undefined,this.placeholder=undefined,this.showNullText=!1,this.hideEnter=!1,this.disableUserInput=!1,this.readonly=!1,this.buttonAlign=null,this.dropDownButtonAlign="right",this.showDropDownButton=!1,this.showTrigger=undefined,this.showSpinner=!1,this.comboItems=undefined,this.comboWidth=undefined,this.comboHeight=undefined,this.blurOnLeftRightKey="none",this.spinnerAlign="verticalRight",this.allowSpinLoop=!1,this.pickers={list:undefined,width:undefined,height:undefined},this.dropDownOpen=null,this.dropDownClose=null,this.initializing=null,this.initialized=null,this.triggerMouseDown=null,this.triggerMouseUp=null,this.dropDownButtonMouseDown=null,this.dropDownButtonMouseUp=null,this.textChanged=null,this.invalidInput=null}return e}();wijinputcore.prototype.options=$.extend(!0,{},wijmo.wijmoWidget.prototype.options,new wijinputcore_options);var wijInputResult=function(){function e(){this.characterEscaped=1,this.noEffect=2,this.sideEffect=3,this.success=4,this.unknown=0,this.hint=0,this.alphanumericCharacterExpected=-2,this.asciiCharacterExpected=-1,this.digitExpected=-3,this.invalidInput=-51,this.letterExpected=-4,this.nonEditPosition=-54,this.positionOutOfRange=-55,this.promptCharNotAllowed=-52,this.signedDigitExpected=-5,this.unavailableEditPosition=-53,this.testPosition=-1,this.binaryExpected=-6}return e.prototype.clone=function(){var t=new e;return t.hint=this.hint,t.testPosition=this.testPosition,t},e}();input.wijInputResult=wijInputResult;var wijTextProvider=function(){function e(){}return e.prototype.setText=function(e,t){},e.prototype.toString=function(e,t,n,r,i){return""},e.prototype.insertAt=function(e,t,n){return!1},e.prototype.removeAt=function(e,t,n,r){},e.prototype.replaceWith=function(e,t){var n=e.start,r=new wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,r,!0),n=r.testPosition),this.insertAt(t,n,r)?r:null},e}();input.wijTextProvider=wijTextProvider;var Utility=function(){function Utility(){}return Utility.IdCounter=0,Utility.EditFieldSuffix="_EidtField",Utility.MaskValChar="﻿",Utility.Hold="g-C2",Utility.FireEvent=function(t,n,r,i){if(!n)return!1;try{n.call(window,t,r)}catch(s){return!1}return!0},Utility.FindIMControl=function(t){},Utility.ArrayIndexOf=function(t,n){if(t.indeOf)return t.indexOf(n);for(var r=0;r<t.length;r++)if(t[r]===n)return r;return-1},Utility.AttachEvent=function(t,n,r,i){t!==null&&t!==undefined&&(t.addEventListener?t.addEventListener(n,r,i):t.attachEvent&&t.attachEvent("on"+n,r))},Utility.AttachFocusEventOfDocument=function(){Utility.IsIE8OrBelow()?Utility.AttachEvent(document,"beforeactivate",function(e){Utility.FocusControlUpdate(e)},!0):Utility.AttachEvent(document,"focus",function(e){Utility.FocusControlUpdate(e)},!0)},Utility.FocusControlUpdate=function(t){Utility.PreviousFocusControl=Utility.FocusControl,Utility.FocusControl=t.target||t.srcElement},Utility.ToString=function(t,n,r,i){var s=t+"";if(r!=null){while(s.length<n)i?s+=r:s=r+s;return s}while(s.length<n)s+=t+"";return s},Utility.GetSelectionEndPosition=function(t){if(!Utility.IsIE()||Utility.IsIE11OrLater()){var n=0;n=t.selectionEnd;if(t.value){var r=t.value.substring(0,n);n=r.GetLength()}var i=0;i=t.selectionStart;if(t.value){var r=t.value.substring(0,i);i=r.GetLength()}return i>n&&(n=i),n}return Utility.GetSelectionStartPosition(t)+document.selection.createRange().text.GetLength()},Utility.GetSelectionStartPosition=function(t){if(t.selectionStart!=null){var n=0;n=t.selectionStart;if(t.value){var r=t.value.substring(0,n);n=r.GetLength()}var i=0;i=t.selectionEnd;if(t.value){var r=t.value.substring(0,i);i=r.GetLength()}return i<n&&(n=i),n}try{var s=t.createTextRange(),o=document.selection.createRange(),u=t.value.GetLength(),a=0,f=u,l=0;while(a<f){l=Math.floor((a+f)/2),s=t.createTextRange();var c=l,r=t.value.Substring(0,l);for(;;){var h=r.IndexOf("\r\n");if(h==-1)break;c--,r=r.Substring(h+2,r.GetLength())}var p=l-c;c=l-p,s.moveStart("character",c);if(s.offsetTop>o.offsetTop)f=l;else if(s.offsetTop<o.offsetTop){if(a==l)return f;a=l}else if(s.offsetLeft>o.offsetLeft)f=l;else{if(!(s.offsetLeft<o.offsetLeft))return t.value.Substring(l-1,l)=="\r"&&l++,l;if(a==l)return f;a=l}}return u}catch(d){return 0}},Utility.GetCursorPosition=function(t,n){if(t==null)return-1;if(!Utility.IsIE()||Utility.IsIE11OrLater()){var r=0;r=t.selectionStart;if(t.value){var i=t.value.substring(0,r);r=i.GetLength()}return r}var s=0;if(document.selection){t.focus();var o=document.selection.createRange();o.moveStart("character",-t.value.length),s=o.text.length}return s},Utility.GetPasteData=function(t){return Utility.GetDataFromClipboard(t)},Utility.GetDataFromClipboard=function(t){return t==0?Utility.SavedText:window.clipboardData?window.clipboardData.getData("Text"):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined?Utility.CutCopyPasteEventObject.clipboardData.getData("text"):null},Utility.ClearSelection=function(t){Utility.IsIE()&&!Utility.IsIE11OrLater()?document.selection.createRange().text!=""&&document.selection.empty():Utility.GetSelectionText(t)!=""&&(t.selectionStart=t.value.length,t.selectionEnd=t.selectionStart)},Utility.GetSelectionText=function(t){if(t.selectionStart!=null)return t.value.substring(t.selectionStart,t.selectionEnd);if(document.selection!=null)return document.selection.createRange().text;if(document.activeElement!==null){var t=document.activeElement,n=t.selectionStart,r=t.selectionEnd;return t.value.substring(n,r)}return""},Utility.GetNextFocusableControl=function(t,n,r){var i=0;for(var s=0;s<n.length;s++)if(t===n[s]){r?i=(s+1)%n.length:i=(s-1+n.length)%n.length;break}return n[i]},Utility.FireSystemEvent=function(t,n){if(Utility.IsIE())t.fireEvent(n);else{var r=document.createEvent("HTMLEvents");r.initEvent(n.substring(2,n.length),!0,!0),t.dispatchEvent(r)}},Utility.GetTextBoxScrollWidth=function(t,n){return Utility.MeasureText(t.value,t).Width},Utility.MoveFocus=function(t,n){var r=Utility.GetElements(),i=Utility.GetNextFocusableControl(t,r,n);return Utility.SetElementFocus(i),i},Utility.SetElementFocus=function(t){t.focus()},Utility.GetAllElements=function(){return document.body.querySelectorAll?document.body.querySelectorAll("button, input, object, select, textarea"):document.body.all?document.body.all:document.body.getElementsByTagName("*")},Utility.GetElements=function(){var t=[],n=Utility.GetAllElements(),r=0,i=/^(?:button|input|object|select|textarea)$/i;for(var s=0;s<n.length;s++){if((!document.body.querySelectorAll||Utility.IsIE())&&!i.test(n[s].tagName.toLowerCase()))continue;var o=!n[s].disabled,u=n[s].style.visibility!=="hidden",a=n[s].type!="hidden"&&n[s].tabIndex!=-1,f=n[s].tagName.toLowerCase()=="textarea"&&n[s].tabIndex!=-1,l=a||f;o&&u&&l&&(t[r++]=n[s])}for(var s=0;s<t.length-1;s++)for(var c=s+1;c<t.length;c++)if(t[c].tabIndex<t[s].tabIndex){var h=t[s];t[s]=t[c],t[c]=h}return t},Utility.CheckInt=function(t,n,r){var i=parseInt(t);if(isNaN(i))throw"value is invalid";if(i<n||i>r)throw t+" is out of range, should between "+n+" and "+r;return i},Utility.CheckFloat=function(t,n,r){var i=parseFloat(t);if(isNaN(i))throw"value is invalid";if(t<n||t>r)throw t+" is out of range, should between "+n+" and "+r;return i},Utility.CheckDate=function(t,n,r){if(!(t instanceof Date))throw"Type is invalid";if(isNaN(t))throw"Date is a invalid date";if(r!=undefined)if(t<n||t>r)throw t+" is out of range, should between "+n+" and "+r},Utility.CheckBool=function(t){return typeof t=="string"&&t.toLowerCase()==="true"?!0:t==1},Utility.CheckFunction=function CheckFunction(fun){if(fun===undefined||fun===null)return null;if(typeof fun=="string"){fun=Utility.Trim(fun);if(fun.length==0)return null;try{eval("fun ="+fun)}catch(e){}}if(typeof fun=="function")return fun;throw"The value is not a valid function"},Utility.GetCheckElement=function(){if(Utility.CheckElement==null){var t=document.createElement("div");Utility.CheckElement=t,t.style.display="none"}return Utility.CheckElement},Utility.CheckString=function(t){if(t!==undefined&&(typeof t=="string"||t instanceof String))return t==null&&(t=""),t.toString();throw t+" type is not a string."},Utility.GetCSSLength=function(t){var n=parseInt(t);return isNaN(n)?0:n},Utility.CheckCSSLength=function(t){return t=Utility.CheckInt(t,0,Math.pow(2,31)),parseInt(t)==t&&(t+="px"),Utility.GetCheckElement().style.width="",Utility.GetCheckElement().style.width=t,Utility.GetCheckElement().style.width},Utility.CheckFontSizeValue=function(t){return parseInt(t)==t&&(t+="px"),Utility.GetCheckElement().style.fontSize="",Utility.GetCheckElement().style.fontSize=t,Utility.GetCheckElement().style.fontSize},Utility.CheckColor=function(t){return Utility.GetCheckElement().style.backgroundColor="",Utility.GetCheckElement().style.backgroundColor=t,Utility.GetCheckElement().style.backgroundColor},Utility.CheckImageUrl=function(t){return Utility.CheckString(t)},Utility.GetCssImageUrl=function(t){return t.startWith('url("')?t=t.substring(5,t.length-2):t.startWith("url(")&&(t=t.substring(4,t.length-1)),t},Utility.CheckCssImageUrl=function(t){return t.length>0&&!t.startWith("url(")&&(t="url("+t+")"),Utility.GetCheckElement().style.backgroundImage="",Utility.GetCheckElement().style.backgroundImage=t,Utility.GetCheckElement().style.backgroundImage},Utility.CheckEnum=function(t,n){for(var r in t)if(t[r]==n||t[r]==n.toLowerCase())return t[r];throw"Enum value is invalid"},Utility.CheckChar=function(t){t=Utility.CheckString(t);if(t.length!==1)throw"Invalid value";return t},Utility.GetMultipleStringEnum=function(t){var n=t.split(" ");return n.sort(),n.join(",")},Utility.CheckMultipleStringEnum=function(t,n){var r=n.split(","),i=[];for(var s=0;s<r.length;s++)i.push(Utility.CheckEnum(t,Utility.Trim(r[s])));return i.join(" ")},Utility.EncodingToHTML=function(t){if(t.IndexOf("&")!=-1){var n=t,r="";while(n.IndexOf("&")!=-1){var i=n.IndexOf("&");n=n.replace("&","&amp;"),r+=n.Substring(0,i+5),n=n.Substring(i+5,n.GetLength())}n.IndexOf("&")==-1&&n!=""&&(r+=n),t=r}while(t.IndexOf(" ")!=-1)t=t.replace(" ","&nbsp;");while(t.IndexOf("<")!=-1)t=t.replace("<","&lt;");while(t.IndexOf(">")!=-1)t=t.replace(">","&gt;");return t},Utility.DecodingFromHTML=function(t){while(t.IndexOf("&nbsp;")!=-1)t=t.replace("&nbsp;"," ");while(t.IndexOf("&lt;")!=-1)t=t.replace("&lt;","<");while(t.IndexOf("&gt;")!=-1)t=t.replace("&gt;",">");if(t.IndexOf("&amp;")!=-1){var n=t,r="";while(n.IndexOf("&amp;")!=-1){var i=n.IndexOf("&amp;");n=n.replace("&amp;","&"),r+=n.Substring(0,i+1),n=n.Substring(i+1,n.GetLength())}n.IndexOf("&amp;")==-1&&n!=""&&(r+=n),t=r}return t},Utility.IsStandCompliantModeOn=function(){return Utility.IsIE()?document.compatMode=="CSS1Compat":document.compatMode=="CSS1Compat"||document.compatMode=="BackCompat"},Utility.GetPageZoomRate=function(){if(Utility.IsIE()&&Utility.engine===8)return screen.deviceXDPI/screen.logicalXDPI;var t=document.getElementById("gcsh_standard_control_for_get_normal_position");if(typeof t!="undefined"&&t!=null)return document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100;var n=document.createElement("div");return document.body.appendChild(n),n.id="gcsh_standard_control_for_get_normal_position",n.style.visibility="hidden",n.style.left="100px",n.style.top="1px",n.style.width="1px",n.style.height="1px",n.style.position="absolute",document.getElementById("gcsh_standard_control_for_get_normal_position").offsetLeft/100},Utility.GetElementPosition=function(t){if(Utility.IsIE()||Utility.chrome||Utility.safari){if(Utility.engine>=8){var n=Utility.GetElementPositionForIE8(t);if(n.Left==0&&n.Top==0){var r=Utility.GetElementPositionForFireFox(t);return r}return n}var i=Utility.GetElementPositionForIE(t);return{Left:i.Left,Top:i.Top}}return Utility.GetElementPositionForFireFox(t)},Utility.GetElementPositionForIE8=function(t){var n=t;typeof t=="string"&&(n=document.getElementById(t));var r=0,i=0;if(n==null||n.self||n.nodeType===9)return{Left:i,Top:r};var s=n.getBoundingClientRect();if(!s)return{Left:i,Top:r};var o=n.ownerDocument.documentElement,i=s.left+o.scrollLeft,r=s.top+o.scrollTop;try{var u=n.ownerDocument.parentWindow.frameElement||null;if(u){var a=u.frameBorder==="0"||u.frameBorder==="no"?2:0;i+=a,r+=a}}catch(f){}return{Left:i,Top:r}},Utility.GetElementPositionForIE=function(t){var n=t;typeof t=="string"&&(n=document.getElementById(t));var r=0,i=0;if(n==null)return{Left:i,Top:r};if(n.offsetParent)while(n.offsetParent!=null){var s=n.offsetParent,o=s.tagName.toLowerCase();o!="table"&&o!="body"&&o!="html"&&s.clientTop&&s.clientLeft&&(i+=s.clientLeft,r+=s.clientTop);if(Utility.engine==7&&s.style.position.toLowerCase()=="relative"){i+=n.offsetLeft-n.scrollLeft,r+=n.offsetTop;var u=Utility.GetPageZoomRate();if(u==1){var a=n.offsetTop;for(var f=0;f<s.children.length;f++){var l=s.children[f];if(l==n)break;if(l.offsetTop){a=l.offsetTop;break}}r-=a}}else if(!Utility.IsStandCompliantModeOn()||Utility.engine!=7||n.style.position.toLowerCase()!="absolute"&&n.style.position.toLowerCase()!="relative")n.tagName.toLowerCase()=="input"&&n.type.toLowerCase()=="text"||n.tagName.toLowerCase()=="textarea"?(r+=n.offsetTop,i+=n.offsetLeft):(r+=n.offsetTop-n.scrollTop,i+=n.offsetLeft-n.scrollLeft);else{var u=Utility.GetPageZoomRate();r+=(n.offsetTop-n.scrollTop)/u,i+=(n.offsetLeft-n.scrollLeft)/u}n=s}else n.left&&n.top?(i+=n.left,r+=n.top):(n.x&&(i+=n.x),n.y&&(r+=n.y));if(n.style.position.toLowerCase()!="relative"&&n.style.position.toLowerCase()!="absolute"&&n.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn())if(Utility.engine!=7)r+=n.offsetTop,i+=n.offsetLeft;else{var c=parseInt(n.currentStyle.marginTop),h=parseInt(n.currentStyle.marginLeft);isNaN(c)&&(c=0),isNaN(h)&&(h=0),r+=c,i+=h}return{Left:i,Top:r}},Utility.GetElementPositionForFireFox=function(t){var n=t;typeof t=="string"&&(n=document.getElementById(t));var r=0,i=0,s=0,o=0;if(n==null)return{Left:i,Top:r};if(n.offsetParent)while(n.offsetParent!=null){var u=n.offsetParent.tagName.toLowerCase();u!="table"&&u!="body"&&u!="html"&&u!="div"&&n.offsetParent.clientTop&&n.offsetParent.clientLeft&&(i+=n.offsetParent.clientLeft,r+=n.offsetParent.clientTop),r+=n.offsetTop,i+=n.offsetLeft,n=n.offsetParent}else n.left&&n.top?(i+=n.left,r+=n.top):(n.x&&(i+=n.x),n.y&&(r+=n.y));n=t,typeof t=="string"&&(n=document.getElementById(t));if(n.parentElement)while(n.parentElement!=null&&n.tagName.toLowerCase()!="html")o+=n.scrollTop,s+=n.scrollLeft,n=n.parentElement;return r-=o,i-=s,n.style.position.toLowerCase()!="relative"&&n.style.position.toLowerCase()!="absolute"&&n.tagName.toLowerCase()=="body"&&Utility.IsStandCompliantModeOn()&&(r+=n.offsetTop,i+=n.offsetLeft),{Left:i,Top:r}},Utility.MeasureText=function(t,n){if(Utility.MeasureElement===undefined){var r=document.createElement("div");r.style.position="absolute",r.style.border="solid 0px",r.style.left="-100000px",r.style.top="-100000px";var i=window.document.createTextNode("");r.appendChild(i),document.body.appendChild(r),Utility.MeasureElement=r,Utility.MeasureTextElement=i}var r=Utility.MeasureElement,i=Utility.MeasureTextElement;if(document!=null){var s=document.body.contains(n);s||document.body.appendChild(n);var o=n.currentStyle||window.getComputedStyle(n,null);r.style.fontFamily=o.fontFamily,r.style.fontSize=o.fontSize,r.style.fontStyle=o.fontStyle,r.style.fontWeight=o.fontWeight,s||document.body.removeChild(n)}var u=null;if(typeof t=="string")i.nodeValue=t,u={Width:r.clientWidth,Height:r.clientHeight};else{u=[];for(var a=0;a<t.length;a++)i.nodeValue=t[a],u.push({Width:r.clientWidth,Height:r.clientHeight})}return u},Utility.GetOSDefaultFontFamily=function(){switch(Utility.GetClientOS().toLowerCase()){case"winxp":return"MS UI Gothic";case"vista":return"¥á¥¤¥ê¥ª";case"win7":return"¥á¥¤¥ê¥ª";case"win8":return"Meiryo UI";case"win2003":return"MS UI Gothic";case"win2000":return"MS UI Gothic"}return"MS UI Gothic"},Utility.IsTouchSupport=function(){return window.navigator.userAgent.toLowerCase().indexOf("touch")!=-1},Utility.DisabledHoldVisual=function(t){t!==null&&t!==undefined&&Utility.IsTouchSupport()&&Utility.IsIE10OrLater()&&(t.addEventListener("MSHoldVisual",function(e){e.preventDefault()},!1),t.addEventListener("MSGestureHold",function(e){e.preventDefault()},!1),t.addEventListener("contextmenu",function(e){e.preventDefault()},!1))},Utility.IsMouseDownOnClearButton=function(t){if(!Utility.IsIE10OrLater())return!1;for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];for(var i=0;i<r.cssRules.length;i++)if(r.cssRules[i].selectorText=="::-ms-clear"&&r.cssRules[i].style.display=="none")return!1}var s=t.offsetX,o=t.offsetY,u=t.srcElement||t.target,a=u.clientWidth,f=u.clientHeight,l=parseInt(u.currentStyle.paddingLeft),c=parseInt(u.currentStyle.paddingRight);if(u.readOnly||t.button!=MouseButton.Left)return!1;if(a-f+l+c<Utility.GetClearButtonShowThreshold(u))return!1;var h=a-f;return s>h&&s<=a&&o>=0&&o<f?!0:!1},Utility.GetClearButtonShowThreshold=function(t){var n=Utility.MeasureText("ABCDQ",t).Height,r=4.3604432*n-.76207324;return r=Math.round(r),r},Utility.IsFocusFromIMControl=function(t,n){try{var r=n.fromElement;while(r!=null){if(r.id==t||r.id==t+this.Hold+"_DropDownObj"||r.id==t+"_DropDown_Container"||r.id==t+"_ContextMenu"||r.id==t+"_HistoryList"||r.id==t+"_EditField"||r.id==t+"_BorderContainer"||r.id==t+"_DropDown_EditField")return!0;r=r.parentNode}return!1}catch(i){return!1}},Utility.IsFocusToIMControl=function(t,n){try{var r=n.toElement;while(r!=null){if(r.id==t||r.id==t+this.Hold+"_DropDownObj"||r.id==t+"_DropDown_Container"||r.id==t+"_ContextMenu"||r.id==t+"_HistoryList"||r.id==t+this.Hold+"_DropDownObj_PopupMonth"||r.id==t+"_EditField"||r.id==t+"_BorderContainer"||r.id==t+"_DropDown_EditField")return!0;r=r.parentNode}return!1}catch(i){return!1}},Utility.Trim=function(t){if(t=="")return"";var n=0,r=0;for(var i=0;i<t.length;i++)if(t.CharAt(i)!=" "&&t.CharAt(i)!="¡¡"){n=i;break}for(var i=t.length-1;i>=0;i--)if(t.CharAt(i)!=" "&&t.CharAt(i)!="¡¡"){r=i+1;break}try{var s=t.Substring(n,r);return s}catch(o){return t}},Utility.GetBrowserType=function(){var t=navigator.userAgent.toLowerCase();if(t.indexOf("msie")!=-1)Utility.ie=t.match(/msie ([\d.]+)/)[1];else if(t.indexOf("chrome")!=-1)Utility.chrome=t.match(/chrome\/([\d.]+)/)[1];else if(t.indexOf("safari")!=-1){var n=t.match(/version\/([\d.]+)/);n&&(Utility.safari=n[1])}else t.indexOf("firefox")!=-1?Utility.firefox=t.match(/firefox\/([\d.]+)/)[1]:t.indexOf("opera")!=-1&&(Utility.opera=t.match(/opera.([\d.]+)/)[1]);t.indexOf("ipad")!=-1&&(Utility.IPad=!0),Utility.engine=null,window.navigator.appName=="Microsoft Internet Explorer"&&(document.documentMode?Utility.engine=document.documentMode:(Utility.engine=5,document.compatMode&&document.compatMode=="CSS1Compat"&&(Utility.engine=7),Utility.ie&&Utility.ie.indexOf("6")==0&&(Utility.engine=6))),t.indexOf("rv:")!==-1&&t.indexOf("firefox")===-1&&(Utility.ie=Utility.engine=t.match(/rv:([\d.]+)/)[1])},Utility.GetTouchPath=function(t,n){return t===-1||n===-1?"Error":t>n?t-n>20?"ToTop":"NotMove":t<n?n-t>20?"ToBottom":"NotMove":"NotMove"},Utility.IsPad=function(){var t=Utility.IPad||Utility.GetClientOS().toLowerCase()=="android";return t},Utility.IsJapan=function(){return navigator.userLanguage?navigator.userLanguage.indexOf("ja")!=-1:navigator.language?navigator["language"].indexOf("ja")!=-1:!1},Utility.IsFireFox4OrLater=function(){return Utility.firefox!=null&&parseFloat(Utility.firefox)>=4},Utility.IsIE11OrLater=function(){return Utility.IsIE()&&Utility.engine>=11},Utility.IsIE10OrLater=function(){return Utility.IsIE()&&Utility.engine>=10},Utility.IsIE9OrLater=function(){return Utility.IsIE()&&Utility.engine>=9},Utility.IsIE8OrLater=function(){return Utility.IsIE()&&Utility.engine>=8},Utility.IsIE8OrBelow=function(){return Utility.IsIE()&&Utility.engine<=8},Utility.IsIE8=function(){return Utility.IsIE()&&Utility.engine==8},Utility.IsIE7=function(){return Utility.IsIE()&&Utility.engine==7},Utility.IsIE7OrLater=function(){return Utility.IsIE()&&Utility.engine>=7},Utility.IsIE=function(){return Utility.ie!==undefined},Utility.IsIE9=function(){return Utility.IsIE()&&Utility.engine==9},Utility.GetClientOS=function(){var t;if(!Utility.IsIE()){var n=navigator.userAgent,r=n.indexOf("("),i=n.indexOf(")");t=n.substring(r+1,i)}else t=navigator.appVersion;return t.indexOf("NT 6.0")!=-1?"vista":t.indexOf("NT 5.2")!=-1?"win2003":t.indexOf("NT 5.1")!=-1?"winxp":t.indexOf("NT 5.0")!=-1?"win2000":t.indexOf("NT 6.1")!=-1?"Win7":t.indexOf("NT 6.2")!=-1?"Win8":t.indexOf("NT 6.3")!=-1?"Win8":t.indexOf("Android")!=-1?"Android":"unknow"},Utility.CreateStyleElement=function(t){var n=document.createElement("style");return n.id=t,n.type="text/css",n},Utility.CreateClassStyle=function(t){return Utility.CreateSelectorStyle("."+t)},Utility.CreateSelectorStyle=function(t){var n=document.getElementById("tableStyle");n==null&&(n=this.CreateStyleElement("tableStyle"),document.body.appendChild(n));var r=n.sheet||n.styleSheet,i=r.cssRules||r.rules;return r.insertRule?r.insertRule(t+"{ }",i.length):r.addRule(t,"{ }",i.length),i.item(i.length-1)},Utility.SetSelection=function(t,n,r,i){$(t).wijtextselection(Math.min(n,r),Math.max(n,r))},Utility.PreventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},Utility.CancelBubble=function(t){t.cancelBubble!==undefined?t.cancelBubble=!0:t.stopPropagation()},Utility.DragDrop=function(t){try{t.dragDrop(!0)}catch(n){}},Utility.GetMouseButton=function(t){var n=MouseButton.Default,r=Utility.IsIE8OrBelow()?1:0;return t.button==r?n=MouseButton.Left:t.button==1?n=MouseButton.Middle:t.button==2&&(n=MouseButton.Right),n},Utility.GetMouseWheelValue=function(t,n){return Utility.IsFireFox4OrLater()?-n.detail/3:(n.wheelDelta>=120?t++:n.wheelDelta<=-120&&t--,t)},Utility.SetCopy=function(t,n){var r;try{if(t==null||t==""){document.selection&&(r=document.selection.createRange().text);if(r=="")return}}catch(i){}t!=null&&(r=t),Utility.CopyDataToClipBoard(r,n)},Utility.CopyDataToClipBoard=function(t,n){if(n==0){Utility.SavedText=t;return}window.clipboardData?setTimeout(function(){try{window.clipboardData.setData("Text",t)}catch(e){}},0):Utility.CutCopyPasteEventObject!==null&&Utility.CutCopyPasteEventObject.clipboardData!==undefined&&Utility.CutCopyPasteEventObject.clipboardData.setData("text",t)},Utility.SetZoomStyle=function(t,n,r){if(t===undefined||t===null)return;var i="top left";r===DropDownAlign.Right&&(i="top right"),Utility.firefox?(t.style.MozTransformOrigin=n===""?"":i,t.style.MozTransform=n===""?"":"scale("+n+")",t.setAttribute("ZoomValue",n)):Utility.chrome||Utility.safari?n!==""?(t.style.MozTransform="scale("+n+")",t.style.WebkitTransform="scale("+n+")",t.style.webkitTransformOrigin=i):(t.style.MozTransform="",t.style.WebkitTransform="",t.style.WebkitTransformOrigin=""):Utility.IsIE9OrLater()?n!==""?(t.style.msTransform="scale("+n+")",t.style.msTransformOrigin=i):(t.style.msTransform="",t.style.msTransformOrigin=""):t.style.zoom=n},Utility.FilterText=function(t,n){if(n.GetLength()==0)return"";var r="",i=0,s=0;for(i=0;i<n.GetLength();i++){var o=!1;for(s=0;s<t.GetLength();s++)n.Substring(i,i+1)==t.Substring(s,s+1)&&(o=!0);o==1&&(r+=n.Substring(i,i+1))}return r},Utility.IndexOfAny=function(t,n,r){if(r>=t.length)return-1;for(var i=r;i<t.length;i++)for(var s=0;s<n.length;s++)if(t.charAt(i)==n[s])return i;return-1},Utility}();input.Utility=Utility,Utility.GetBrowserType();var CharType=function(){function e(){this.OtherChar=0,this.Control=1,this.Numeric=2,this.MathSymbol=3,this.Symbol=4,this.Punctuation=5,this.Space=6,this.UpperCase=7,this.LowerCase=8,this.Katakana=9,this.Hiragana=10,this.FarEastPunctation=11,this.Hangul=12,this.FullWidth=32768}return e}();input.CharType=CharType;var CharCategory=function(){function e(){this.MinValue="\0",this.MaxValue="￿",this.ANSISTART=0,this.ANSIEND=255,this.BOTHWIDTHSTART=65280,this.BOTHWIDTHEND=65519,this.FULLALPHASTART=65281,this.FULLUPPERSTART=65313,this.FULLUPPEREND=65338,this.FULLALPHAEND=65374,this.CJKHALFSYMBOLSTART=65377,this.CJKHALFSYMBOLEND=65380,this.KANAHALFSTART=65381,this.KANAHALFEND=65439,this.HANGULHALFSTART=65440,this.HANGULHALFEND=65500,this.FULLSYMBOLSTART=65504,this.FULLSYMBOLEND=65510,this.HALFPUNCTSTART=65512,this.HALFPUNCTEND=65518,this.KATAKANA_VOICED="ﾞ",this.KATAKANA_SEMIVOICED="ﾟ",this.Tab="	",this.Space=" ",this._charstarts=["\0","","Ā","ƀ","ɐ","ʰ","̀","Ͱ","Ѐ","԰","֐","؀","܀","ހ","ऀ","ঀ","਀","઀","଀","஀","ఀ","ಀ","ഀ","඀","฀","຀","ༀ","က","Ⴀ","ᄀ","ሀ","Ꭰ","᐀"," ","ᚠ","ក","᠀","Ḁ","ἀ"," ","⁰","₠","⃐","℀","⅐","←","∀","⌀","␀","⑀","①","─","▀","■","☀","✀","⠀","⺀","⼀","⿰","　","぀","゠","㄀","㄰","㆐","ㆠ","㈀","㌀","㐀","一","ꀀ","꒐","가","豈","ﬀ","ﭐ","︠","︰","﹐","ﹰ","＀","￰"],this.Blocks=["BASIC_LATIN","LATIN_1_SUPPLEMENT","LATIN_EXTENDED_A","LATIN_EXTENDED_B","IPA_EXTENSIONS","SPACING_MODIFIER_LETTERS","COMBINING_DIACRITICAL_MARKS","GREEK","CYRILLIC","ARMENIAN","HEBREW","ARABIC","SYRIAC","THAANA","DEVANAGARI","BENGALI","GURMUKHI","GUJARATI","ORIYA","TAMIL","TELUGU","KANNADA","MALAYALAM","SINHALA","THAI","LAO","TIBETAN","MYANMAR","GEORGIAN","HANGUL_JAMO","ETHIOPIC","CHEROKEE","UNIFIED_CANADIAN_ABORIGINAL_SYLLABIC","OGHAM","RUNIC","KUMER","MONGOLIAN","LATIN_EXTENDED_ADDITIONAL","GREEK_EXTENDED","GENERAL_PUNCTUATION","SUPERSCRIPTS_AND_SUBSCRIPTS","CURRENCY_SYMBOLS","COMBINING_MARKS_FOR_SYMBOLS","LETTERLIKE_SYMBOLS","NUMBER_FORMS","ARROWS","MATHEMATICAL_OPERATORS","MISCELLANEOUS_TECHNICAL","CONTROL_PICTURES","OPTICAL_CHARACTER_RECOGNITION","ENCLOSED_ALPHANUMERICS","BOX_DRAWING","BLOCK_ELEMENTS","GEOMETRIC_SHAPES","MISCELLANEOUS_SYMBOLS","DINGBATS","BRAILLE_PATTERNS","CJK_RADICALS_SUPPLEMENT","KANGXI_RADICALS","IDEOGRAPHIC_DESCRIPTION_CHARACTERS","CJK_SYMBOLS_AND_PUNCTUATION","HIRAGANA","KATAKANA","BOPOMOFO","HANGUL_COMPATIBILITY_JAMO","KANBUN","BOPOMOFO_EXTENDED","ENCLOSED_CJK_LETTERS_AND_MONTHS","CJK_COMPATIBILITY","CJK_UNIFIED_IDEOGRAPHS_EXTENSION","CJK_UNIFIED_IDEOGRAPHS","YI_SYLLABLES","YI_RADICALS","HANGUL_SYLLABLES","CJK_COMPATIBILITY_IDEOGRAPHS","ALPHABETIC_PRESENTATION_FORMS","ARABIC_PRESENTATION_FORMS_A","COMBINING_HALF_MARKS","CJK_COMPATIBILITY_FORMS","SMALL_FORM_VARIANTS","ARABIC_PRESENTATION_FORMS_B","HALFWIDTH_AND_FULLWIDTH_FORMS","SPECIALS"],this._fullhalfblocks=["！","０","：","Ａ","［","ａ","｛","｡","･","ﾠ","￠","￨"],this._halfkana=["・","ヲ","ァ","ィ","ゥ","ェ","ォ","ャ","ュ","ョ","ッ","ー","ア","イ","ウ","エ","オ","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ","ホ","マ","ミ","ム","メ","モ","ヤ","ユ","ヨ","ラ","リ","ル","レ","ロ","ワ","ン","゙","゚"],this._fullkana=["ｧ","ｱ","ｨ","ｲ","ｩ","ｳ","ｪ","ｴ","ｫ","ｵ","ｶ","ｶ","ｷ","ｷ","ｸ","ｸ","ｹ","ｹ","ｺ","ｺ","ｻ","ｻ","ｼ","ｼ","ｽ","ｽ","ｾ","ｾ","ｿ","ｿ","ﾀ","ﾀ","ﾁ","ﾁ","ｯ","ﾂ","ﾂ","ﾃ","ﾃ","ﾄ","ﾄ","ﾅ","ﾆ","ﾇ","ﾈ","ﾉ","ﾊ","ﾊ","ﾊ","ﾋ","ﾋ","ﾋ","ﾌ","ﾌ","ﾌ","ﾍ","ﾍ","ﾍ","ﾎ","ﾎ","ﾎ","ﾏ","ﾐ","ﾑ","ﾒ","ﾓ","ｬ","ﾔ","ｭ","ﾕ","ｮ","ﾖ","ﾗ","ﾘ","ﾙ","ﾚ","ﾛ","ﾜ","ﾜ","ｨ","ｪ","ｦ","ﾝ","ｳ","ｶ","ｹ","ﾜ","ｨ","ｪ","ｦ","･","ｰ"],this._fullkanaSmall=["ｧ","ｨ","ｩ","ｪ","ｫ","ｬ","ｭ","ｮ","ｯ"],this._accentkana=[0,0,0,0,0,0,0,0,0,0,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,-1,1,0,-1,1,-1,1,-1,1,0,0,0,0,0,-3,1,2,-3,1,2,-3,1,2,-3,1,2,-3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,0,0],this._feQuotes=["‘","’","“","”"],this._jpnMixed=["ー"],this._jpnSpecialFull=["　","、","。","「","」","“","”","‘","’","゛","゜","￥"],this._jpnSpecialHalf=[" ","､","｡","｢","｣",'"','"',"'","'","ﾞ","ﾟ","¥"];var e=new CharType;this._mwtable=[e.Symbol|e.FullWidth,e.Numeric|e.FullWidth,e.Symbol|e.FullWidth,e.UpperCase|e.FullWidth,e.Symbol|e.FullWidth,e.LowerCase|e.FullWidth,e.Symbol|e.FullWidth,e.FarEastPunctation,e.Katakana,e.Hangul,e.Symbol|e.FullWidth,e.Symbol]}return e}();input.CharCategory=CharCategory;var CharProcess=function(){function e(){this.CharCategory=new CharCategory,this.Ctype=new CharType}return e.LowerKana="ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮｧｨｩｪｫｬｭｮｯヵヶゕゖ",e.UpperKana="あいうえおつやゆよわアイウエオツヤユヨワｱｲｳｴｵﾔﾕﾖﾂカケかけ",e.FullWidthSymbolArray=["、","。","，","．","・","：","；","？","！","゛","゜","´","｀","¨","＾","￣","＿","ヽ","ヾ","ゝ","ゞ","〃","仝","々","〆","〇","ー","—","‐","／","〜","‖","｜","…","‥","‘","’","“","”","（","）","〔","〕","［","］","｛","｝","〈","〉","《","》","「","」","『","』","【","】","＋","−","±","×","÷","＝","≠","＜","＞","≦","≧","∞","∴","♂","♀","°","′","″","℃","￥","＄","¢","£","％","＃","＆","＊","＠","§","☆","★","○","●","◎","◇","◆","□","■","△","▲","▽","▼","※","〒","→","←","↑","↓","〓","＇","＂","－","〳","〴","〵","〻","〼","ヿ","ゟ","∈","∋","⊆","⊇","⊂","⊃","∪","∩","⊄","⊅","⊊","⊋","∉","∅","⌅","⌆","∧","∨","¬","⇒","⇔","∀","∃","⊕","⊖","⊗","∥","∦","⦅","⦆","〘","〙","〖","〗","∠","⊥","⌒","∂","∇","≡","≒","≪","≫","√","∽","∝","∵","∫","∬","≢","≃","≅","≈","≶","≷","↔","Å","‰","♯","♭","♪","†","‡","¶","♮","♫","♬","♩","◯","＼","～","￠","￡","￢","―"],e.HalfWidthSymbolArray=["\\","~","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","]","^","_","`","{","|","}","｡","｢","｣","､","･","¡","¤","¥"],e.CharEx=new e,e.prototype.ToHalfKatakana=function(e){var t="";if(this.IsFullWidth(e)){if(this.IsKatakana(e)){var n=e,r=n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(r<0||r>91)return n;n=this.CharCategory._fullkana[r];var i=this.CharCategory._accentkana[r];i>0&&(n+=String.fromCharCode(i==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),t=n}else if(this.IsHiragana(e)){var n=String.fromCharCode(e.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0)),r=n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(r<0||r>91)return n;n=this.CharCategory._fullkana[r];var i=this.CharCategory._accentkana[r];i>0&&(n+=String.fromCharCode(i==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0))),t=n}}else this.IsKatakana(e)&&(t=e);return t},e.prototype.GetCharType=function(e){var t=this.Ctype.OtherChar,n=this.BelongTo(e);if(e==""||"\0"<=e&&e<=""||""<=e&&e<="")return this.Ctype.Control;if("A"<=e&&e<="Z")return this.Ctype.UpperCase;if("a"<=e&&e<="z")return this.Ctype.LowerCase;if("0"<=e&&e<="9")return this.Ctype.Numeric;if(this.IsFullWidthSymbol(e)||this.IsHalfWidthSymbol(e))t=this.Ctype.Symbol;if(e.charCodeAt(0)==8216||e.charCodeAt(0)==8217||e.charCodeAt(0)==8220||e.charCodeAt(0)==8221)t=this.Ctype.Punctuation;e.charCodeAt(0)==12288&&(t=this.Ctype.Space);switch(this.CharCategory.Blocks[n]){case"HALFWIDTH_AND_FULLWIDTH_FORMS":return this.MultiWidthDetails(e);case"KATAKANA":return this.Ctype.Katakana|this.Ctype.FullWidth;case"HIRAGANA":return this.Ctype.Hiragana|this.Ctype.FullWidth}return this.IsFarEastBlock(n,e)&&(t|=this.Ctype.FullWidth),t},e.prototype.IsCharOfType=function(e,t){return this.GetCharType(e)==t},e.prototype.IsMultiWidth=function(e){var t=this.BelongTo(e),n=this.CharCategory.Blocks[t];return n=="KATAKANA"||n=="CJK_SYMBOLS_AND_PUNCTUATION"||n=="HALFWIDTH_AND_FULLWIDTH_FORMS"||n=="BASIC_LATIN"&&e>=" "},e.prototype.IsFullWidthSymbol=function(t){for(var n=0;n<e.FullWidthSymbolArray.length;n++)if(t===e.FullWidthSymbolArray[n])return!0;return!1},e.prototype.IsHalfWidthSymbol=function(t){for(var n=0;n<e.HalfWidthSymbolArray.length;n++)if(t===e.HalfWidthSymbolArray[n])return!0;return!1},e.prototype.IsFullWidth=function(e){if(this.IsFullWidthSymbol(e))return!0;if(this.IsHalfWidthSymbol(e))return!1;var t=this.BelongTo(e),n=this.IsFarEastBlock(t,e);return this.CharCategory.Blocks[t]=="HALFWIDTH_AND_FULLWIDTH_FORMS"&&(n=(this.MultiWidthDetails(e)&this.Ctype.FullWidth)==this.Ctype.FullWidth),n},e.prototype.IsSurrogatePair=function(e){return e.charCodeAt(0)>="".charCodeAt(0)&&e.charCodeAt(0)<="".charCodeAt(0)&&e.charCodeAt(1)>="".charCodeAt(0)&&e.charCodeAt(1)<="".charCodeAt(0)?!0:!1},e.prototype.IsSurrogate=function(e){return e!=null&&e.charCodeAt(0)>="".charCodeAt(0)&&e.charCodeAt(0)<="".charCodeAt(0)},e.prototype.IsOther=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.OtherChar},e.prototype.IsControl=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Control},e.prototype.IsKatakana=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Katakana},e.prototype.IsSmallHalfKatakana=function(e){var t=new Array("ァ","ィ","ゥ","ェ","ォ","ャ","ュ","ョ","ッ","ヮ"),n=e;e.charCodeAt(0)>this.CharCategory.KANAHALFSTART&&(n=this.CharCategory._halfkana[e.charCodeAt(0)-this.CharCategory.KANAHALFSTART]);for(var r=0;r<t.length;r++)if(n==t[r])return!0;return!1},e.prototype.IsHiragana=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Hiragana||this.CharCategory._jpnMixed[0]==e},e.prototype.IsShiftJIS=function(e){return!1},e.prototype.IsJISX0208=function(e){return!1},e.prototype.IsDigit=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Numeric},e.prototype.IsPunctuation=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Punctuation},e.prototype.IsMathSymbol=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.MathSymbol},e.prototype.IsSymbol=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.Symbol},e.prototype.IsLower=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.LowerCase},e.prototype.IsUpper=function(e){return(this.GetCharType(e)&~this.Ctype.FullWidth)==this.Ctype.UpperCase},e.prototype.IsDigitOrSymbol=function(e){return this.IsDigit(e)||this.IsMathSymbol(e)},e.prototype.IsAlphabet=function(e){return this.IsUpper(e)||this.IsLower(e)},e.prototype.IsAlphaOrDigit=function(e){return this.IsUpper(e)||this.IsLower(e)||this.IsDigit(e)},e.prototype.IsUpperKana=function(e){return!this.IsLowerKana(e)},e.prototype.IsLowerKana=function(t){return e.LowerKana.search(t)!=-1},e.prototype.HasLowerKana=function(t){return e.UpperKana.search(t)!=-1||this.IsLowerKana(t)},e.prototype.ToUpperKana=function(t){var n=e.LowerKana.search(t);return n==-1?t:e.UpperKana.substr(n,1)},e.prototype.ToLowerKana=function(t){var n=e.UpperKana.search(t);return n>=e.UpperKana.length-4&&n<e.UpperKana.length?t:n==-1?t:e.LowerKana.substr(n,1)},e.prototype.ToLower=function(e){return this.IsUpper(e)?String.fromCharCode(e.charCodeAt(0)+32):e},e.prototype.ToUpper=function(e){return this.IsLower(e)?String.fromCharCode(e.charCodeAt(0)-32):e},e.prototype.IsSpace=function(e){return e==" "||e==="　"},e.prototype.ToFullWidth=function(e){var t={text:"",processedAll:!1};t.text=e,t.processedAll=!1;if(e.length==0)return t;var n=e.Substring(0,1);if(this.IsMultiWidth(n)){if(n<this.CharCategory._charstarts[1]){if(n==" ")return t.text="　",t;var r="!";return t.text=String.fromCharCode(n.charCodeAt(0)-r.charCodeAt(0)+(this.CharCategory._charstarts[81].charCodeAt(0)+1)),t}if((this.MultiWidthDetails(n)&this.Ctype.Katakana)==this.Ctype.Katakana){if(n.charCodeAt(0)<this.CharCategory.KANAHALFSTART){var i=this.GetFullHalfWidthSpecialChar(n,!0);return t.text=i!==""?i:n,t}n=this.CharCategory._halfkana[n.charCodeAt(0)-this.CharCategory.KANAHALFSTART];if(e.length<2)return t.text=n,t;var s=e.charCodeAt(1)-(this.CharCategory.KATAKANA_VOICED.charCodeAt(0)-1);if(s==1||s==2){t.processedAll=!0;var o=this.CharCategory._accentkana[n.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1)];o!=0&&((Math.abs(o)&2)==s&&(n=String.fromCharCode(n.charCodeAt(0)+1)),n=String.fromCharCode(n.charCodeAt(0)+1))}s==1&&n=="ウ"&&(n="ヴ")}}return t.text=n,t},e.prototype.ToHalfWidth=function(e){return this.ToHalfWidthEx(e)},e.prototype.ToHalfWidthEx=function(e){var t=this.GetCharType(e),n=this.IsMultiWidth(e);if((t&this.Ctype.FullWidth)==this.Ctype.FullWidth)switch(t&~this.Ctype.FullWidth){case this.Ctype.Punctuation:case this.Ctype.UpperCase:case this.Ctype.LowerCase:case this.Ctype.Symbol:case this.Ctype.Numeric:case this.Ctype.MathSymbol:var r=this.GetFullHalfWidthSpecialChar(e,!1);if(r!=="")e=r;else if(n){var i="!";e=String.fromCharCode(e.charCodeAt(0)-(this.CharCategory._charstarts[81].charCodeAt(0)+1)+i.charCodeAt(0))}break;case this.Ctype.Katakana:var s=e.charCodeAt(0)-(this.CharCategory._charstarts[62].charCodeAt(0)+1);if(s<0||s>91)return e;e=this.CharCategory._fullkana[s];var o=this.CharCategory._accentkana[s];if(o>0)return e+=String.fromCharCode(o==1?this.CharCategory.KATAKANA_VOICED.charCodeAt(0):this.CharCategory.KATAKANA_SEMIVOICED.charCodeAt(0)),e;break;case this.Ctype.Space:e=" ";break;case this.Ctype.Hangul:}return e},e.prototype.ToKatakana=function(e){if(!this.IsCharOfType(e,this.Ctype.Hiragana|this.Ctype.FullWidth))return e;var t=this.GetFullHalfWidthSpecialChar(e,!1);return t!==""?t:String.fromCharCode(e.charCodeAt(0)-this.CharCategory._charstarts[61].charCodeAt(0)+this.CharCategory._charstarts[62].charCodeAt(0))},e.prototype.ToHiragana=function(e){return this.IsKatakana(e)?(this.IsFullWidth(e)||(e=this.ToFullWidth(e).text),this.IsCharOfType(e,this.Ctype.Katakana|this.Ctype.FullWidth)?e>="ヷ"&&e<="ヿ"?e:e=="ヵ"?"か":e=="ヶ"?"け":String.fromCharCode(e.charCodeAt(0)+this.CharCategory._charstarts[61].charCodeAt(0)-this.CharCategory._charstarts[62].charCodeAt(0)):e):e},e.prototype.ToBigHalfKatakana=function(e){if(!this.IsSmallHalfKatakana(e))return e;var t=this.CharCategory._halfkana[e.charCodeAt(0)-this.CharCategory.KANAHALFSTART];return t=String.fromCharCode(t.charCodeAt(0)+1),t},e.prototype.BelongTo=function(e){var t=0,n=83,r=n>>1;while(n-t>1)e>=this.CharCategory._charstarts[r]?t=r:n=r,r=n+t>>1;return r},e.prototype.MultiWidthDetails=function(e){var t=0,n=this.CharCategory._fullhalfblocks.length,r=n>>1;while(n-t>1)e>=this.CharCategory._fullhalfblocks[r]?t=r:n=r,r=n+t>>1;return this.CharCategory._mwtable[r]},e.prototype.IsFarEastBlock=function(e,t){switch(this.CharCategory.Blocks[e]){case"CJK_COMPATIBILITY":case"CJK_COMPATIBILITY_FORMS":case"CJK_COMPATIBILITY_IDEOGRAPHS":case"CJK_RADICALS_SUPPLEMENT":case"CJK_SYMBOLS_AND_PUNCTUATION":case"CJK_UNIFIED_IDEOGRAPHS":case"CJK_UNIFIED_IDEOGRAPHS_EXTENSION":case"HALFWIDTH_AND_FULLWIDTH_FORMS":case"BOPOMOFO":case"BOPOMOFO_EXTENDED":case"HIRAGANA":case"KATAKANA":case"KANBUN":case"HANGUL_COMPATIBILITY_JAMO":case"HANGUL_JAMO":case"HANGUL_SYLLABLES":return!0;default:for(var n=0;n<this.CharCategory._feQuotes.length;n++)if(t==this.CharCategory._feQuotes[n])return!0;if(t.charCodeAt(0)>255)return!0;if(t.charCodeAt(0)==8216||t.charCodeAt(0)==8217||t.charCodeAt(0)==8220||t.charCodeAt(0)==8221)return!0}return!1},e.prototype.GetFullHalfWidthSpecialChar=function(e,t){if(t==1)var n=this.CharCategory._jpnSpecialHalf,r=this.CharCategory._jpnSpecialFull;else var n=this.CharCategory._jpnSpecialFull,r=this.CharCategory._jpnSpecialHalf;var i=-1,s=0;while(s<n.length){if(n[s]==e){i=s;break}s++}return i!=-1&&s<r.length?r[s]:""},e}();input.CharProcess=CharProcess,function(e){e._map=[],e.None=0,e.Click=1,e.ContextMenu=2,e.ClientEvent=3,e.KeyExit=4,e.Default=5,e.SpinButton=6,e.DropDown=7,e.ImeInput=8,e.Left=9,e.Right=10,e.DragDrop=11}(input.FocusType||(input.FocusType={}));var FocusType=input.FocusType;(function(e){e._map=[],e.Default=0,e.Era=1,e.Year=2,e.Month=3,e.Day=4,e.AMPM=5,e.Hour=6,e.Minute=7,e.Second=8})(input.DateCursorPosition||(input.DateCursorPosition={}));var DateCursorPosition=input.DateCursorPosition;(function(e){e._map=[],e.NoControl=0,e.Filter=1,e.Cut=2})(input.CrLfMode||(input.CrLfMode={}));var CrLfMode=input.CrLfMode;(function(e){e._map=[],e.IncludeLiterals=0,e.ExcludeLiterals=1})(input.ClipContent||(input.ClipContent={}));var ClipContent=input.ClipContent;(function(e){e._map=[],e.Insert=0,e.Overwrite=1,e.FixedInsert=2,e.FixedOverwrite=3})(input.EditMode||(input.EditMode={}));var EditMode=input.EditMode;(function(e){e._map=[],e.Always=1,e.PostDisplay=2,e.PreDisplay=3})(input.ShowLiterals||(input.ShowLiterals={}));var ShowLiterals=input.ShowLiterals;(function(e){e._map=[],e.None=0,e.Left=1,e.Right=2,e.Both=3})(input.ExitOnLeftRightKey||(input.ExitOnLeftRightKey={}));var ExitOnLeftRightKey=input.ExitOnLeftRightKey;(function(e){e._map=[],e.None=0,e.Field=1,e.All=2})(input.HighlightText||(input.HighlightText={}));var HighlightText=input.HighlightText;(function(e){e._map=[],e.Default=-1,e.Left=0,e.Middle=1,e.Right=2})(input.MouseButton||(input.MouseButton={}));var MouseButton=input.MouseButton;(function(e){e._map=[],e.Left=1,e.Right=2})(input.DropDownAlign||(input.DropDownAlign={}));var DropDownAlign=input.DropDownAlign;(function(e){e._map=[],e._map[0]="Automatic",e.Automatic=0,e._map[1]="Fixed",e.Fixed=1})(input.ScrollBarMode||(input.ScrollBarMode={}));var ScrollBarMode=input.ScrollBarMode;(function(e){e._map=[],e._map[0]="None",e.None=0,e._map[1]="Horizontal",e.Horizontal=1,e._map[2]="Vertical",e.Vertical=2,e._map[3]="Both",e.Both=3})(input.ScrollBars||(input.ScrollBars={}));var ScrollBars=input.ScrollBars;(function(e){e._map=[],e.Normal=0,e.Hover=1,e.Pressed=2,e.Focused=4,e.Disabled=8})(input.ControlStatus||(input.ControlStatus={}));var ControlStatus=input.ControlStatus;(function(e){e._map=[],e.Tab=1,e.ShiftTab=2,e.NextControl=3,e.PreviousControl=4,e.Right=5,e.Left=6,e.CtrlRight=7,e.CtrlLeft=8,e.CharInput=9})(input.ExitKeys||(input.ExitKeys={}));var ExitKeys=input.ExitKeys;(function(e){e._map=[],e.Control=0,e.Field=1})(input.TabAction||(input.TabAction={}));var TabAction=input.TabAction;(function(e){e._map=[],e.BackSpace=8,e.Tab=9,e.Clear=12,e.Enter=13,e.Shift=16,e.Control=17,e.Alt=18,e.Pause=19,e.Caps_Lock=20,e.Escape=27,e.Space=32,e.PageUp=33,e.PageDown=34,e.End=35,e.Home=36,e.Left=37,e.Up=38,e.Right=39,e.Down=40,e.Select=41,e.Print=42,e.Execute=43,e.Insert=45,e.Delete=46,e.Help=47,e.equalbraceright=48,e.exclamonesuperior=49,e.quotedbltwosuperior=50,e.sectionthreesuperior=51,e.dollar=52,e.percent=53,e.ampersand=54,e.slashbraceleft=55,e.parenleftbracketleft=56,e.parenrightbracketright=57,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.H=72,e.I=73,e.J=74,e.K=75,e.L=76,e.M=77,e.N=78,e.O=79,e.P=80,e.Q=81,e.R=82,e.S=83,e.T=84,e.U=85,e.V=86,e.W=87,e.X=88,e.Y=89,e.Z=90,e.KP_0=96,e.KP_1=97,e.KP_2=98,e.KP_3=99,e.KP_4=100,e.KP_5=101,e.KP_6=102,e.KP_7=103,e.KP_8=104,e.KP_9=105,e.KP_Multiply=106,e.KP_Add=107,e.KP_Separator=108,e.KP_Subtract=109,e.KP_Decimal=110,e.KP_Divide=111,e.F1=112,e.F2=113,e.F3=114,e.F4=115,e.F5=116,e.F6=117,e.F7=118,e.F8=119,e.F9=120,e.F10=121,e.F11=122,e.F12=123,e.F13=124,e.F14=125,e.F15=126,e.F16=127,e.F17=128,e.F18=129,e.F19=130,e.F20=131,e.F21=132,e.F22=133,e.F23=134,e.F24=135,e.Num_Lock=136,e.Scroll_Lock=137})(input.Key||(input.Key={}));var Key=input.Key,BaseUIProcess=function(){function e(){this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,this.isOverWrite=!1,this.moveFocusExitOnLastChar=!1}return e.prototype.GetInputElement=function(){return this.Owner.GetInputElement()},e.prototype.GetElementId=function(){return this.Owner.GetInputElement().id},e.prototype.GetShowLiterals=function(){return this.Owner.GetShowLiterals!==undefined?this.Owner.GetShowLiterals():ShowLiterals.Always},e.prototype.SetCursorPositionAndSelection=function(e,t,n,r){var i={};if(e==1||e==HighlightText.All)i.SelectionStart=0,i.SelectionEnd=t.GetLength();return i},e.prototype.Clear=function(){return null},e.prototype.Focus=function(e){var t=e.Text,n=e.DisplayText,r=e.FocusType,i=e.Element,s=e.HighlightText,o=e.CursorPosition,u={};this.isMulSelected=!1,r==FocusType.Click&&(u.SelectionStart=Utility.GetCursorPosition(i),u.SelectionEnd=u.SelectionStart),u.Text=t,u.SelectionStart==-1?(u.SelectionStart=0,u.SelectionEnd=0):u.SelectionStart>u.Text.GetLength()?(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()):u.SelectionStart==n.GetLength()&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength()),r==FocusType.Left&&o==DateCursorPosition.Default?(u.SelectionStart=0,u.SelectionEnd=0):r==FocusType.Right&&o==DateCursorPosition.Default&&(u.SelectionStart=u.Text.GetLength(),u.SelectionEnd=u.Text.GetLength());if(s==HighlightText.None&&o==DateCursorPosition.Default)return u;if(r==FocusType.ContextMenu)return u;var a=u.SelectionStart==null?e.SelectionStart:u.SelectionStart,f=this.SetCursorPositionAndSelection(s,u.Text,o,a);return f!=null&&(u.SelectionStart=f.SelectionStart,u.SelectionEnd=f.SelectionEnd,u.IsSelectionDeterminedByHighlightText=!0),u},e.prototype.LoseFocus=function(e){},e.prototype.MouseDown=function(e){var t={};return this.isTriClick=!1,this.isDblClick&&!Utility.GrapeCityTimeout&&e==MouseButton.Left&&(this.isTriClick=!0,t=this.SelectAll()),this.isDblClick=!1,t},e.prototype.MouseUp=function(e,t,n,r,i){var s={};return this.isTriClick?(Utility.SetSelection(e,t,n),null):i?(s=this.SelectAll(),Utility.SetSelection(e,s.SelectionStart,s.SelectionEnd),s):(s.SelectionStart=t,s.SelectionEnd=n,r==MouseButton.Left&&(s.SelectionStart=Utility.GetSelectionStartPosition(e),s.SelectionEnd=Utility.GetSelectionEndPosition(e)),s.SelectionStart!=s.SelectionEnd?this.isMulSelected=!0:this.isMulSelected=!1,s)},e.prototype.ProcessShortcutKey=function(e,t,n,r){var i={};switch(e){case"Clear":if(t)return i.System=!1,i;return this.Clear();case"NextControl":var s=this.MoveControl(this.GetInputElement(),!0,!1,"NextControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"PreviousControl":var s=this.MoveControl(this.GetInputElement(),!1,!1,"PreviousControl");return s!=null&&(i.EventInfo=s.EventInfo,i.FocusType=s.FocusType,i.FocusExit=!0),i.System=!1,i;case"NextField":return i=this.MoveField(n,!0),i;case"PreviousField":return i=this.MoveField(n,!1),i;case"NextField/NextControl":var i=this.MoveFieldAndControl(n,!0);return i;case"PreviousField/PreviousControl":var i=this.MoveFieldAndControl(n,!1);return i}},e.prototype.ProcessCharKeyInput=function(e,t,n,r,i){return null},e.prototype.ProcessNavigatorKeyInput=function(e,t,n,r,i,s,o,u){var a={};switch(e){case 45:return t==EditMode.FixedInsert?this.isOverWrite=!1:t==EditMode.FixedOverwrite?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,a.Overwrite=this.isOverWrite,a.System=!1,this.Format.Fields.fieldCount==0&&(a.System=!0),a;case 8:a=this.ProcessBackSpace(i,s,r),a.System=!1;break;case 46:a=this.ProcessDelete(i,s,r),a.System=!1;break;case 196643:case 196644:case 196645:case 196647:case 65569:case 196641:case 65570:case 196642:if(e==65569||e==196641)e=196644;else if(e==65570||e==196642)e=196643;a.SelectionEnd=this.GetCaretPosition(s,e),this.isMulSelected=!0,a.System=!1;break;case 65582:case 65544:if(this.isMulSelected){if(!this.Owner._isSupportClipBoard()){a.System=!0;break}a=this.Cut(n,i,s)}else a=this.ProcessBackSpace(i,s);a.System=!1;break;case 65581:case 131158:if(this.Owner._isSupportClipBoard()){var f=Utility.GetPasteData(this.Owner?this.Owner.GetUseClipboard():!0);a=this.Paste(i,s,f,u),a.System=!1}else a.System=!0;break;case 65571:case 65572:case 65573:case 65575:case 65574:case 65576:this.isMulSelected=!0,a.SelectionEnd=this.GetCaretPosition(s,e),a.System=!1;break;case 131139:case 131117:this.Owner._isSupportClipBoard()?(this.Copy(n,i,s),a.System=!1):a.System=!0;break;case 131118:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessDelete(i,s),a.System=!1;break;case 131080:case 196616:this.isMulSelected||(s=this.GetCaretPosition(s,e)),a=this.ProcessBackSpace(i,s),a.System=!1;break;case 131137:a=this.SelectAll(),a.System=!1;break;case 131160:this.Owner._isSupportClipBoard()?(a=this.Cut(n,i,s),a.System=!1):a.System=!0;break;case 131162:a=this.Undo(),a.System=!1;break;case 131109:case 37:if(i==0&&(o==ExitOnLeftRightKey.Both||o==ExitOnLeftRightKey.Left)){var l=e==37?"Left":"CtrlLeft",c=this.MoveControl(this.GetInputElement(),!1,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131108:case 131110:case 36:case 33:case 131105:if(e==33||e==131105)e=131108;a=this.ProcessLeftDirection(i,s,e),a.System=!1;break;case 131111:case 39:if(i==r.GetLength()&&(o==ExitOnLeftRightKey.Both||o==ExitOnLeftRightKey.Right)){var l=e==39?"Right":"CtrlRight",c=this.MoveControl(this.GetInputElement(),!0,!0,l);return c!=null&&(a.EventInfo=c.EventInfo,a.FocusType=c.FocusType,a.FocusExit=!0),a};case 131107:case 131112:case 35:case 34:case 131106:if(e==34||e==131106)e=131107;a=this.ProcessRightDirection(i,s,e),a.System=!1;break;default:a=null}return a},e.prototype.ProcessLeftDirection=function(e,t,n){},e.prototype.ProcessRightDirection=function(e,t,n){},e.prototype.KeyDown=function(e){var t=e.KeyCode,n=e.SelectionStart,r=e.SelectionEnd,i=e.Text,s=e.EditMode,o=e.KeyAction,u=e.ReadOnly,a=e.ClipContent,f=e.ExitOnLastChar,l=e.ExitOnLeftRightKey,c=e.TabAction,h={};switch(s){case EditMode.Insert:this.isOverWrite=!1;break;case EditMode.Overwrite:this.isOverWrite=!0;break;case EditMode.FixedInsert:this.isOverWrite=!1;break;case EditMode.FixedOverwrite:this.isOverWrite=!0}n!=r?this.isMulSelected=!0:this.isMulSelected=!1;switch(t){case 9:return h=this.ProcessTabKey(r,!0,c),h;case 65545:return h=this.ProcessTabKey(r,!1,c),h}if(o!=null)return this.ProcessShortcutKey(o,u,r,n);if(u){if(t==27||t==262182||t==262184||t==38||t==40)return null;if(t!=131117&&t!=131139&&t!=9&&t!=65545&&t!=131081&&t!=196617&&t!=131137&&t!=37&&t!=39&&t!=38&&t!=40)return h}if(this.Format.Fields.fieldCount==0){switch(t){case 45:return s==EditMode.FixedInsert?this.isOverWrite=!1:s==EditMode.FixedOverwrite?this.isOverWrite=!0:this.isOverWrite=!this.isOverWrite,h.Overwrite=this.isOverWrite,this.Format.Fields.fieldCount==0&&(h.System=!0),h;case 37:case 131109:if(n==0&&(l==ExitOnLeftRightKey.Both||l==ExitOnLeftRightKey.Left)){var p=t==37?"Left":"CtrlLeft",d=this.MoveControl(this.GetInputElement(),!1,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}break;case 39:case 131111:if(n==i.GetLength()&&(l==ExitOnLeftRightKey.Both||l==ExitOnLeftRightKey.Right)){var p=t==39?"Right":"CtrlRight",d=this.MoveControl(this.GetInputElement(),!0,!0,p);return d!=null&&(h.EventInfo=d.EventInfo,h.FocusType=d.FocusType,h.FocusExit=!0),h}}return null}var v=this.ProcessCharKeyInput(t,n,r,f,i);return v!=null?v:(h=this.ProcessNavigatorKeyInput(t,s,a,i,n,r,l,f),h)},e.prototype.KeyPress=function(e){},e.prototype.KeyUp=function(e){},e.prototype.ShowContextMenu=function(e,t){var n={};return t==""&&(n.SelectionStart=Utility.GetCursorPosition(e),n.SelectionEnd=n.SelectionStart),n},e.prototype.SelectStart=function(e,t,n){var r={};return t==""&&!this.isTriClick&&!this.isDblClick&&n!=MouseButton.Default&&(r.SelectionStart=Utility.GetCursorPosition(e),r.SetFalse=!0),r},e.prototype.DoubleClick=function(e){var t={},n=this.Format.Fields.GetFieldIndexByPos(e),r=this.Format.Fields.GetFieldRange(n.index);return t.SelectionStart=r.start,t.SelectionEnd=r.length+r.start,Utility.GrapeCityTimeout=!1,this.isDblClick=!0,this.isMulSelect=!0,setTimeout(function(){Utility.GrapeCityTimeout=!0},300),t},e.prototype.Undo=function(){},e.prototype.Cut=function(e,t,n){var r={};return t==n?r:(this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),r=this.ProcessDelete(t,n),this.FireClientEvent("OnCut"),r)},e.prototype.Copy=function(t,n,r){var i=null,s=!0;if(t==ClipContent.ExcludeLiterals){var o=Math.abs(n-r),n=Math.min(n,r);if(o==0)return;i=this.Format.Fields.GetNonLiteralsText(n,o)}else!Utility.IsIE()||Utility.IsIE11OrLater()?i=Utility.GetSelectionText(this.Owner.GetInputElement()):i=document.selection.createRange().text;this.Owner&&(i=e.UpdateCrLfString(i,this.Owner.GetAcceptsCrlf()),s=this.Owner.GetUseClipboard()),Utility.IsIE()?setTimeout(function(){Utility.SetCopy(i,s)}):Utility.SetCopy(i,s)},e.prototype.Paste=function(e,t,n,r){},e.prototype.SelectAll=function(){var e={SelectionStart:0,SelectionEnd:0};e.SelectionStart=0;var t;return this.ID&&(t=this.GetShowLiterals()),t=="PostDisplay"||t=="PreDisplay"?e.SelectionEnd=Utility.FindIMControl(this.ID).GetText().GetLength():e.SelectionEnd=this.Format.Fields.GetLength(),this.isMulSelected=!0,e},e.prototype.FireEvent=function(e,t,n,r){if(Utility.FireEvent(e,t,n,r))return FocusType.ClientEvent},e.prototype.ProcessCharKey=function(e,t,n,r){var i={},s=Math.min(e,t),o=Math.abs(t-e),u={};i.start=s,i.success=!1;if(this.Format.Fields.GetFieldIndex(s).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}var f=n.toString();if(o==0&&!this.isOverWrite)u=this.Format.Fields.Insert(s,f,!1);else if(o==0)if(s==this.Format.Fields.GetLength())u=this.Format.Fields.Insert(s,f,!1);else{var l=!1,c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset,d=this.Format.Fields.GetFieldRange(h);this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"?s-p+d.length==this.Format.Fields.GetLength()?l=!1:(l=!0,o=d.length-p+1):(l=!0,o=n.GetLength());if(this.Format.Fields.GetFieldIndexByPos(s+o).index==-1){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i}l?u=this.Format.Fields.Replace(s,o,f,!1):u=this.Format.Fields.Insert(s,f,!1)}else u=this.Format.Fields.Replace(s,o,f,!1);s=u.cursorPos;if(u.text!=""){var a={};return a.Name=this.Owner.InvalidInputEvent,a.Args=null,a.Type="invalidInput",i.EventInfo=a,i.start=s,i.success=!1,i}if(r==1)if(s==this.Format.Fields.GetLength())this.moveFocusExitOnLastChar=!0;else{var c=this.Format.Fields.GetFieldIndexByPos(s),h=c.index,p=c.offset;h==this.Format.Fields.fieldCount-1&&p==0&&this.Format.Fields.GetFieldByIndex(h).fieldLabel=="PromptField"&&(this.moveFocusExitOnLastChar=!0)}return i.start=s,i.success=!0,i},e.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};if(n==this.Format.Fields.GetLength()&&r==0)return i;var s,o=this.Format.Fields.GetFieldIndexByPos(n);s=o.index;if(s==-1)return i;if(r==0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;n=this.Format.Fields.Delete(n,1).cursorPos,i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndexByPos(n+r),u=o.offset,a=o.index;if(a==-1)return i;u==0&&a--;if(s==a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel=="PromptField")return i;var f=this.Format.Fields.Delete(n,r);if(!f.isSucceed)return i;i.SelectionStart=f.cursorPos,i.SelectionStart==0&&this.Format.Fields.GetFieldByIndex(0).fieldLabel=="PromptField"&&(i.SelectionStart=this.Format.Fields.GetFieldByIndex(0).GetLength()),i.SelectionEnd=i.SelectionStart;var l,c,h=this.Format.Fields.GetFieldIndexByPos(i.SelectionStart);c=h.index,l=h.offset,l!=0&&this.Format.Fields.GetFieldByIndex(c).fieldLabel=="PromptField"&&(i.SelectionStart=i.SelectionStart-l+this.Format.Fields.GetFieldByIndex(c).GetLength(),i.SelectionEnd=i.SelectionStart)}return i},e.prototype.ProcessBackSpace=function(e,t,n){},e.prototype.ProcessDelete=function(e,t,n){},e.prototype.GetCaretPosition=function(e,t,n,r,i){var s=this.Format.Fields,o=s.GetFieldIndexByPos(e),u=o.index,a=o.offset,f,n,r,l=0;switch(t){case 36:case 65572:case 65574:return e<=n?0:n;case 35:case 65571:case 65576:return e>=r?s.GetLength():r;case 37:if(e==0)return 0;s.GetFieldByIndex(u).fieldLabel==i?a>0?e-=a:e--:a==0&&s.GetFieldByIndex(u-1).fieldLabel==i?e-=s.GetFieldRange(u-1).length:e--;break;case 39:if(e==s.GetLength())return e;if(s.GetFieldByIndex(u).fieldLabel==i){f=s.GetFieldRange(u),n=f.start,r=n+f.length;if(e<r)return r}else e++;break;case 131109:if(e==0||u==0)return 0;if(s.GetFieldByIndex(u).fieldLabel==i)f=s.GetFieldRange(u-1),e=f.start;else{if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return 0}e-=a}break;case 196645:if(e==0||u==0)return 0;a==0?(f=s.GetFieldRange(u-1),e=f.start):e-=a;break;case 131111:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();if(s.GetFieldByIndex(u).fieldLabel!=i){for(l=u+1;l<s.fieldCount;l++)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return s.GetLength()}f=s.GetFieldRange(u+1),e=f.start;break;case 196647:if(e==s.GetLength()||u==s.fieldCount-1)return s.GetLength();f=s.GetFieldRange(u+1),e=f.start;break;case 131118:return e==s.GetLength()||s.GetFieldByIndex(u).fieldLabel==i?e:(f=s.GetFieldRange(u),f.start+f.length);case 131080:case 196616:if(e==0||s.GetFieldByIndex(u).fieldLabel==i&&u==0)return e;if(s.GetFieldByIndex(u).fieldLabel==i)return s.GetFieldRange(u-1).start;if(a==0){for(l=u-1;l>=0;l--)if(s.GetFieldByIndex(l).fieldLabel!=i)return f=s.GetFieldRange(l),f.start;return e}e-=a;break;case 196643:case 131107:case 131112:return s.GetLength();case 196644:case 131108:case 131110:return 0;case 65573:return e==0?0:--e;case 65575:return e==s.GetLength()?e:++e}return e},e.prototype.CompareShortcut=function(e,t){if(t.toString().IndexOf("|")==-1)return t==e?!0:!1;var n=null;while(n!=-1){n=t.toString().IndexOf("|");var r=t.toString().GetLength();if(t.Substring(0,n==-1?r:n)==e)return!0;t=t.Substring(n+1,r)}return!1},e.prototype.MoveControl=function(e,t,n,r){var i=Utility.GetElements(),s=null,o={};if(i.length<2)return null;var u=Utility.GetNextFocusableControl(e,i,t);r=="CharInput"||!Utility.IsIE()?(Utility.NextID=u,setTimeout(function(){Utility.SetElementFocus(u)},0)):Utility.SetElementFocus(u);if(n){var a=document.getElementById(u);if(a!=null&&(a.tagName.toLowerCase()=="textarea"||a.type=="text")&&Utility.IsIE()){var f=a.createTextRange();if(r=="Left"||r=="CtrlLeft")f.moveStart("character",a.value.length),f.select()}}var l={Key:ExitKeys.CharInput};switch(r){case"NextControl":l.Key=ExitKeys.NextControl;break;case"PreviousControl":l.Key=ExitKeys.PreviousControl;break;case"Right":l.Key=ExitKeys.Right;break;case"Left":l.Key=ExitKeys.Left;break;case"CtrlRight":l.Key=ExitKeys.CtrlRight;break;case"CtrlLeft":l.Key=ExitKeys.CtrlLeft;break;case"CharInput":l.Key=ExitKeys.CharInput}return s={},s.Name=this.Owner.KeyExitEvent,s.Args=l,s.Type="KeyExit",s!=null&&(o.EventInfo=s),o},e.prototype.MoveField=function(e,t){var n=this.Format.Fields.MoveField(e,t),r={};return n==-1?(r.NextPos=n,r):(r.SelectionStart=n,r.SelectionEnd=n,r)},e.prototype.ProcessTabKey=function(e,t,n){var r={Key:ExitKeys.Tab},i={};t?r.Key=ExitKeys.Tab:r.Key=ExitKeys.ShiftTab;var s={};return s.Name=this.Owner.KeyExitEvent,s.Args=r,s.Type="KeyExit",i.EventInfo=s,i.FocusType=FocusType.KeyExit,i.System=!0,i},e.prototype.MoveFieldAndControl=function(e,t){var n=this.MoveField(e,t);if(n.NextPos!=-1)return n;var r=t?"NextControl":"PreviousControl",i=this.MoveControl(this.GetInputElement(),t,!1,r);return i!=null&&(n.EventInfo=i.EventInfo,n.FocusType=i.FocusType,n.FocusExit=!0),n},e.prototype.DragStart=function(){},e.prototype.DragEnd=function(){},e.prototype.Drop=function(){},e.prototype.DragOver=function(){},e.prototype.GetKeyActionName=function(e,t){if(t==null)return null;var n=t,r=new Array,i=n.IndexOf(","),s=0;if(t!=""){while(i!=-1)r[s++]=n.Substring(0,i),n=n.Substring(i+1,n.GetLength()),i=n.IndexOf(",");r[s++]=n;for(var o=0;o<s;o+=2)if(this.IsKeyCodeContained(e,r[o+1]))return r[o]}return null},e.prototype.IsKeyCodeContained=function(e,t){var n=t,r=n.IndexOf("|");while(r!=-1){if(n.Substring(0,r)==e)return!0;n=n.Substring(r+1,n.GetLength()),r=n.IndexOf("|")}return n==e?!0:!1},e.prototype.FireClientEvent=function(e){},e.prototype.PerformSpin=function(e,t,n){},e.UpdateCrLfString=function(t,n){var r=t;if(t)if(n==CrLfMode.Filter)r=t.replace(new RegExp("[\r\n]","g"),"");else if(n==CrLfMode.Cut){var i=t.split(new RegExp("[\r\n]","g"));i.length>0?r=i[0]:r=""}return r},e.FilterReturnChar=function(t){return t!=null&&(t=t.replace(new RegExp("[\r]","g"),"")),t},e}();input.BaseUIProcess=BaseUIProcess;var InputUIUpdate=function(){function e(e){this.Owner=e}return e.prototype.SetLastClientValues=function(e){},e.prototype.GetText=function(){if(this.Owner.GetInputElement()!=null)return this.Owner.GetInputElement().value},e.prototype.SetText=function(e){if(this.GetText()==null)return;if(this.GetText().replace(/\r\n/g,"\n")==e.replace(/\r\n/g,"\n"))return;this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().value=e)},e.prototype.SetFocus=function(){try{this.Owner.GetInputElement()!=null&&this.Owner.GetInputElement().focus()}catch(e){}},e.prototype.GetTextHAlign=function(){return this.Owner.GetInputElement()!==null?this.Owner.GetInputElement().style.textAlign:""},e.prototype.SetTextHAlign=function(e){if(this.Owner.GetInputElement()!==null){this.Owner.GetInputElement().style.textAlign=e;if(Utility.IsIE()){var t=this.Owner.GetInputElement().style.width,n=parseInt(t);isNaN(n)&&(n=120),this.Owner.GetInputElement().style.width=n+1+"px";var r=this;setTimeout(function(){r.InputElement.style.width=t},0)}}},e.prototype.SetForeColor=function(e){this.Owner.GetInputElement()!=null&&(this.Owner.GetInputElement().style.color=e)},e.prototype.WriteCssStyle=function(e){try{var t=document.getElementById("gcsh_InputManWeb_Style_Container");if(Utility.IsIE())t.styleSheet.cssText=e;else{var n=t.sheet;for(var r=n.cssRules.length-1;r>=0;r--)n.deleteRule(r);var i=e.split("}");for(var s=0;s<i.length;s++){var o=i[s],u=o.indexOf("{");if(u==-1)continue;var e=o.substring(u+1);if(e.length!=0){var a=o.substring(0,u);n.insertRule(a+"{"+e+"}",n.cssRules.length)}}}}catch(f){}},e.prototype.ClearCssStyle=function(){},e}();input.InputUIUpdate=InputUIUpdate;var GlobalEventHandler=function(){function e(){}return e.OnKeyDown=function(t,n,r){if(t.ImeMode===!0&&!Utility.IsIE8OrBelow())return;var i=n.keyCode;r&&(i|=524288);var s={};s.Shift=!1,s.Ctrl=!1,s.Alt=!1,n.shiftKey&&(s.Shift=!0),n.ctrlKey&&(s.Ctrl=!0),n.altKey&&(s.Alt=!0);var o=null;Utility.FuncKeysPressed=s;try{o=t.KeyDown(n)}catch(u){}if(o!=null&&o.KeyCode!=null){Utility.IsIE()&&(n.keyCode=o.KeyCode),Utility.IsIE()||(Utility.ShouldInvokeKeyPress=!1);return}o?Utility.IsIE()?n!=null&&(n.returnValue=!0):Utility.ShouldInvokeKeyPress=!0:(Utility.PreventDefault(n),Utility.IsIE()||(Utility.ShouldInvokeKeyPress=!1))},e.OnKeyPress=function(t,n){if(!(n.charCode!==118&&n.charCode!==120&&n.charCode!==99||!n.ctrlKey))return;if(Utility.IPad&&n.charCode>256)return;if(n.keyCode==46&&n.shiftKey)return;if(t.ImeMode===!0)return;var r=t;if(!Utility.IsIE()&&(n.charCode==0||!Utility.ShouldInvokeKeyPress)){if(!Utility.ShouldInvokeKeyPress||(n.keyCode==38||n.keyCode==40)&&r.Type!="Edit"){Utility.ShouldInvokeKeyPress=!0,Utility.PreventDefault(n),r!=null&&r.Type=="Edit"&&r.DropDownObj!=null&&r.DropDownObj.IsKeyFromDropDown&&(r.DropDownObj.IsKeyFromDropDown=!1);return}if(n.keyCode!=13||r.Type!="Edit")return}var i=n.keyCode||n.charCode;if(i!=13||r.Type=="Edit"){var s=String.fromCharCode(i);try{if(CharProcess.CharEx.IsSurrogate(s.charAt(0))){r.IsSurrogateKeyPressing=!0;return}}catch(o){}if(s!=null){var u=null;try{u=t.KeyPress(s,n)}catch(o){}}if(!u){Utility.PreventDefault(n);return}}},e.OnKeyUp=function(t,n){if(t.ImeMode===!0&&!Utility.IsIE8OrBelow())return;try{var r=t;if(r.IsSurrogateKeyPressing)try{if(r.InputElement!=null){var i=r.InputElement.value,s=r.InputElement.selectionStart,o=i.substr(s-2,s);r.KeyPress(o,n)}}finally{r.IsSurrogateKeyPressing=!1}Utility.FuncKeysPressed={Shift:n.shiftKey,Ctrl:n.ctrlKey,Alt:n.altKey},r.KeyUp(n)}catch(u){}},e.OnCompositionStart=function(t,n){try{t.CompositionStart(n)}catch(r){}},e.OnCompositionUpdate=function(t,n){try{t.CompositionUpdate(n)}catch(r){}},e.OnCompositionEnd=function(t,n){try{t.CompositionEnd(n)}catch(r){}},e.OnWebkitEditableContentChanged=function(t,n){try{t.WebkitEditableContentChanged(n)}catch(r){}},e.OnMouseOver=function(t,n){try{t.MouseOver&&t.MouseOver()}catch(r){}},e.OnMouseOut=function(t,n){try{t.MouseOut()}catch(r){}},e.OnMouseMove=function(t,n){try{t.MouseMove&&t.MouseMove(n)}catch(r){}},e.OnMouseDown=function(t,n){if(t.ImeMode&&t.ImeMode===!0&&!Utility.IsIE8OrBelow())return;try{t.MouseDown(n),Utility.IsIE()||(Utility.DragStartElementID=t)}catch(r){}},e.OnMouseUp=function(t,n){if(t.ImeMode&&t.ImeMode===!0&&!Utility.IsIE8OrBelow())return;try{if(t.MouseUpPointerType!=null&&t.MouseUpPointerType!==4&&t.MouseUpPointerType!=="mouse"){var r={};for(var i in n)r[i]=n[i];setTimeout(function(e){t.MouseUp(r)},300)}else t.MouseUp(n);Utility.IsIE()||(Utility.DragStartElementID="")}catch(s){}},e.OnSelectStart=function(t,n){Utility.InnerSelect===!0&&Utility.ShouldFireOnSelectStart==0&&Utility.CancelBubble(n);var r=Utility.GetSelectionText(t.GetInputElement());if(typeof r=="undefined"||r==null)r="";var i=null;try{i=t.SelectStart(r)}catch(s){}i==0&&Utility.PreventDefault(n)},e.OnDblClick=function(t,n){var r=null;try{r=t.DoubleClick()}catch(i){}r||Utility.PreventDefault(n)},e.OnHTML5BeforeCopy=function(t,n){try{Utility.CutCopyPasteEventObject=n?n.originalEvent:n,t.Copy(n)}catch(r){}finally{Utility.CutCopyPasteEventObject=null}},e.OnHTML5Cut=function(t,n){try{var r=t.GetInputElement(),i=r.value,s=r.selectionStart,o=r.selectionEnd;setTimeout(function(){r.value=i,r.selectionStart=s,r.selectionEnd=o,t.Cut(n)},0)}catch(u){}},e.OnHTML5Paste=function(t,n){try{if(Utility.chrome&&Utility.GetClientOS().toLowerCase()!=="android")Utility.CutCopyPasteEventObject=n?n.originalEvent:n,t.Paste(Utility.GetDataFromClipboard(!0)),Utility.PreventDefault(n);else{var r=t.SelectionStart,i=t.SelectionEnd;setTimeout(function(){Utility.GetClientOS().toLowerCase()==="android"&&(t.SelectionStart=r,t.SelectionEnd=i),t.isPasting=!0,t.ImeInput("DirectInput")},0)}}catch(s){}finally{Utility.CutCopyPasteEventObject=null}},e.OnMouseWheel=function(t,n){try{t.MouseWheel(n),t.ShouldCancelMouseWheelDefaultBehavior()&&Utility.PreventDefault(n)}catch(r){}},e.OnDragStart=function(t,n){try{t.DragStart()}catch(r){}},e.OnDragEnd=function(t,n){try{t.DragEnd(n)}catch(r){}},e.OnDrop=function(t,n){try{var r=n.originalEvent.dataTransfer.getData("Text");t.DragDrop(r,n)}catch(i){}},e.OnTouchStart=function(t,n){Utility.TouchStartTime=new Date,Utility.TouchStartEvt=n},e.OnTouchEnd=function(t,n){if(Utility.TouchStartTime!==undefined){Utility.TouchEndTime=new Date;var r=Utility.TouchEndTime.valueOf()-Utility.TouchStartTime.valueOf();if(r>1e3){var i="";try{i=Utility.GetSelectionText(t.GetInputElement())}catch(s){}t.ShowContextMenu(i,Utility.TouchStartEvt),t.GetEnabled()&&Utility.PreventDefault(n)}Utility.TouchStartTime=undefined,Utility.TouchEndTime=undefined}},e.OnDragEnter=function(t,n){try{t.DragEnter()}catch(r){}},e.OnDragLeave=function(t,n){try{t.DragLeave()}catch(r){}},e.OnSelect=function(t,n){try{t&&t.Focused&&t.Select()}catch(r){}},e.OnPropertyChanged=function(t,n){try{t.PropertyChange(n)}catch(r){}},e.OnMSPointerUp=function(t,n){t.MSPointerUp(n)},e.OnMSPointerDown=function(t,n){try{t.MSPointerDown(n)}catch(r){}},e.OnMSGestureTap=function(t,n){try{t.MSGestureTap(n)}catch(r){}},e.OnEditFieldFocus=function(t,n){if(Utility.IsFocusFromIMControl(t._id,n))if(Utility.IsIE()||Utility.HasGetFocus)return;Utility.IsOnFocus=!0,Utility.IsIE()||(Utility.HasGetFocus=!0),this.OnFocus(t,n)},e.OnEditFieldLoseFocus=function(n,r){try{var i=n;if(i!=null&&i.Type=="Edit"&&i.IsFocusToDropDownEdit){i.IsFocusToDropDownEdit=!1;return}if(Utility.IsFocusToIMControl(n._id,r))return;if(Utility.firefox){if(Utility.IsOnFocus&&Utility.IsIE()&&Utility.IsOnActivate&&Utility.IsOnActivateControlID==n._id){Utility.FocusToBorder!=null&&Utility.FocusToBorder==1&&(Utility.FocusToBorder=!1,i.SetInnerFocus());return}Utility.FocusToBorder=!1,Utility.IsIE()?Utility.IsOnFocus=!1:Utility.HasGetFocus=!1}e.OnLostFocus(n,r),Utility.FuncKeysPressed={Shift:!1,Ctrl:!1,Alt:!1}}catch(s){}},e.OnFocusOut=function(t,n){Utility.FocusToBorder=!1;if(Utility.IsIE()&&n.toElement){var r=n.toElement.id;r==t._id+"_Inside_Div_Container"&&(Utility.FocusToBorder=!0)}if(Utility.IsFocusToIMControl(t._id,n)){Utility.IsIE()&&Utility.engine>=9&&(Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=t._id,Utility.IsOnFocus=!0);return}Utility.IsIE()&&Utility.IsOnActivate&&(Utility.IsOnActivate=!1,Utility.IsOnActivateControlID=""),Utility.IsOnFocus&&(Utility.IsOnFocus=!1)},e.OnActivate=function(t,n){Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=t._id;if(Utility.IsFocusFromIMControl(t._id,n))return;Utility.IsOnActivate=!0,Utility.IsOnActivateControlID=t._id},e.OnDeActivate=function(t,n){if(Utility.IsFocusToIMControl(t._id,n))return;Utility.IsOnActivate=!1,Utility.IsOnActivateControlID="",Utility.IsOnFocus=!1},e.OnFocus=function(t,n){try{var r=function(){t.Focus(),t.Focused=!0,Utility.IsPad()&&(t.IPadSelectionRefreshTimer=setInterval(function(){t.Select()},400))};Utility.IsIE()?r.call(this):setTimeout(r,0)}catch(i){}},e.OnLostFocus=function(t,n){try{t.LoseFocus(n),t.Focused=!1,Utility.IsPad()&&clearInterval(t.IPadSelectionRefreshTimer)}catch(r){}},e}();input.GlobalEventHandler=GlobalEventHandler,String.prototype.GetLength=function(){return this.length},String.prototype.Substring=function(e,t){return this.substring(e,t)},String.prototype.IndexOf=function(e,t){return this.indexOf(e,t)},String.prototype.LastIndexOf=function(e){return this.lastIndexOf(e)},String.prototype.CharAt=function(e){return this.charAt(e)}})(wijmo.input||(wijmo.input={}));var input=wijmo.input})(wijmo||(wijmo={})),define("wijmo.wijinputcore",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};$.fn.extend({getBounds:function(){return $.extend({},$(this).offset(),{width:$(this).outerWidth(!0),height:$(this).outerHeight(!0)})},setBounds:function(e){return $(this).css({left:e.left,top:e.top}).width(e.width).height(e.height),this},getMaxZIndex:function(){var e=($(this).css("z-index")=="auto"?0:$(this).css("z-index"))*1;return $(this).siblings().each(function(t,n){e=Math.max(e,($(n).css("z-index")=="auto"?0:$(n).css("z-index"))*1)}),Math.max(e,$(this).zIndex())}});var wijmo;(function(e){(function(t){var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._init=function(){this.elementZIndex=this.element.zIndex();if(!!this.options.ensureOutermost){var e=$("form");e.length===0&&(e=$(document.body)),this.element.appendTo(e)}this.element.data("visible.wijpopup",!1),this.element.css("position","absolute"),this.element.position({of:$(document.body)}),this.element.hide()},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);if(t==="autoHide"){var r=this.isVisible();this.hide(),r&&this.show()}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.isVisible()&&this.hide();if($.browser.msie&&parseInt($.browser.version)<7){var t=this.element.data("backframe.wijpopup");t||t.remove()}var n=this;this.element.unbind(".wijpopup"),$.each(["visible","backframe","animating","width"],function(e,t){n.element.removeData(t+".wijpopup")})},t.prototype.isVisible=function(){return!!this.element.data("visible.wijpopup")&&this.element.is(":visible")},t.prototype.isAnimating=function(){return!!this.element.data("animating.wijpopup")},t.prototype.show=function(e){var t=this;this._setPosition(e);if(this.isVisible())return;if(this._trigger("showing")===!1)return;this.options.autoHide&&window.setTimeout(function(){t._bindDocMouseUpEvent()},0);var n=this.options.showEffect||"show",r=this.options.showDuration||300,i=this.options.showOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[n]?this.element.show(n,i,r,$.proxy(this._showCompleted,this)):this.element[n](n==="show"?null:r,$.proxy(this._showCompleted,this)),(!n||!r||n==="show"||r<=0)&&this._showCompleted()},t.prototype._showCompleted=function(){this.element.removeData("animating.wijpopup"),this.element.data("visible.wijpopup",!0),this._trigger("shown")},t.prototype.showAt=function(e,t){this.show({my:"left+"+e+" top+"+t,at:"left top",of:document.body})},t.prototype.hide=function(){if(!this.isVisible())return;if(this._trigger("hiding")===!1){this._bindDocMouseUpEvent();return}var e=this.options.hideEffect||"hide",t=this.options.hideDuration||300,n=this.options.hideOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[e]?this.element.hide(e,n,t,$.proxy(this._hideCompleted,this)):this.element[e](e==="hide"?null:t,$.proxy(this._hideCompleted,this)),(!e||!t||e==="hide"||t<=0)&&this._hideCompleted()},t.prototype._hideCompleted=function(){this.element.data("width.wijpopup")!==undefined&&(this.element.width(this.element.data("width.wijpopup")),this.element.removeData("width.wijpopup")),this.element.unbind("move.wijpopup"),this.element.removeData("animating.wijpopup");if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e&&e.hide()}this._trigger("hidden")},t.prototype._onDocMouseUp=function(e,t){var n=e.target?e.target:e.srcElement;t.isVisible()&&!!t.options.autoHide&&(n!=t.element.get(0)&&$(n).parents().index(t.element)<0?t.hide():this._bindDocMouseUpEvent())},t.prototype._bindDocMouseUpEvent=function(){var e=this;$(document).one("mouseup.wijpopup",function(t){e._onDocMouseUp(t,e)})},t.prototype._onMove=function(e){var t=this.element.data("backframe.wijpopup");t&&(this.element.before(t),t.css({top:this.element.css("top"),left:this.element.css("left")}))},t.prototype._addBackgroundIFrame=function(){if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e||(e=jQuery("<iframe/>").css({position:"absolute",display:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}).attr({src:"javascript:'<html></html>';",scrolling:"no",frameborder:"0","tabIndex ":-1}),this.element.before(e),this.element.data("backframe.wijpopup",e),this.element.bind("move.wijpopup",$.proxy(this._onMove,this))),e.setBounds(this.element.getBounds()),e.css({display:"block",left:this.element.css("left"),top:this.element.css("top"),"z-index":this.element.css("z-index")-1})}},t.prototype._setZIndex=function(e){this.element.css("z-index",e);var t=this.element.data("backframe.wijpopup");t&&t.css("z-index",this.element.css("z-index")-1)},t.prototype._setPosition=function(e){var t=this.element.is(":visible"),n;this.element.show(),this.element.position($.extend({},this.options.position,e?e:{})),t||this.element.hide(),e&&(n=e.of),n||(n=this.options.position.of),this._addBackgroundIFrame();var r=Math.max(1e3,this.elementZIndex);n&&(r=Math.max(r,$(n).getMaxZIndex())),this._setZIndex(r+10),this._trigger("posChanged")},t}(e.JQueryUIWidget);t.wijpopup=n;var r=function(){function e(){this.ensureOutermost=!1,this.showEffect="show",this.showOptions={},this.showDuration=300,this.hideEffect="hide",this.hideOptions={},this.hideDuration=100,this.autoHide=!1,this.position={at:"left bottom",my:"left top"},this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.posChanged=null}return e}();n.prototype.options=$.extend(!0,{},e.wijmoWidget.prototype.options,new r),$.wijmo.registerWidget("wijpopup",n.prototype)})(e.popup||(e.popup={}));var t=e.popup})(wijmo||(wijmo={})),define("wijmo.wijpopup",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijcalendar",i={general:0,weekEnd:1,otherMonth:2,outOfRange:4,today:8,custom:16,disabled:32,selected:64,gap:128},s=function(e){function t(){e.apply(this,arguments),this._touchRangeSelect=!1}return __extends(t,e),t.prototype._create=function(){var e=this,t=e.options.wijCSS;e._originalStyle=e.element.attr("style"),window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),n.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(this.options),this.element.addClass("wijmo-wijcalendar  "+t.datepickerInline+" "+t.datepicker+" "+t.widget+" "+t.content+" "+t.helperClearFix+" "+t.cornerAll).attr("role","grid"),this._previewWrapper(this.options.allowPreview),this.element.data("preview.wijcalendar",!1),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcalendar")},t.prototype._init=function(){if(this.options.popupMode){var e={autoHide:!!this.options.autoHide,showing:undefined,shown:undefined,hiding:undefined,hidden:undefined},t=this;this.options.beforePopup&&(e.showing=this.options.beforePopup),this.options.afterPopup&&(e.shown=this.options.afterPopup),this.options.beforeClose&&(e.hiding=this.options.beforeClose),e.hidden=function(e){t.element.removeData("lastdate.wijcalendar"),t.options.afterClose&&t.options.afterClose.call(e)},this.element.wijpopup(e)}else this.element.removeAttr("style"),this._originalStyle&&this.element.attr("style",this._originalStyle);this._getSelectedDates(),this._getDisabledDates(),this._resetWidth(),this.refresh()},t.prototype.destroy=function(){var t=this.options.wijCSS;e.prototype.destroy.call(this),this.close(),this.element.html(""),this.element.removeClass("wijmo-wijcalendar "+t.datepickerInline+" "+t.datepicker+" "+t.widget+" "+t.content+" "+t.helperClearFix+" "+t.cornerAll+" "+t.datepickerMulti).removeAttr("role");var r=this;n.each(["preview","disableddates","selecteddates","dragging","lastdate","animating"],function(e,t){r.element.removeData(t+".wijcalendar")}),this._previewWrapper(!1)},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"showWeekDays":case"showWeekNumbers":case"showTitle":case"showOtherMonthDays":case"selectionMode":this.unSelectAll(),this._resetWidth(),this.refresh();break;case"culture":this.refresh();break;case"allowPreview":this._previewWrapper(n),this.refresh();break;case"monthCols":this._resetWidth(),this.refresh();break;case"monthRows":this._myGrid&&(this._myGrid=undefined);break;case"autoHide":this.element.wijpopup({autoHide:this.options.autoHide});break;case"selectedDates":this._getSelectedDates().setDates(n),this.refresh();break;case"disabledDates":this._getDisabledDates().setDates(n),this.refresh();break;case"displayDate":this.refresh();break;case"allowQuickPick":this.refresh()}},t.prototype._previewWrapper=function(e){e?this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")||this.element.wrap("<div class='wijmo-wijcalendar-preview-wrapper "+this.options.wijCSS.helperClearFix+"'></div>"):this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")&&this.element.unwrap()},t.prototype._isRTL=function(){return!!this._getCulture(null).isRTL},t.prototype.refresh=function(){this._myGrid&&(this._myGrid=undefined),this.element.empty().append(this._createCalendar()),this.element[(this._isRTL()?"add":"remove")+"Class"](this.options.wijCSS.datepickerRtl),this.options.showTitle?this.element.removeClass("wijmo-wijcalendar-notitle"):this.element.addClass("wijmo-wijcalendar-notitle"),this._bindEvents()},t.prototype.refreshDate=function(e){if(!this._monthViews)return;if(e<this._groupStartDate||e>this._groupEndDate)return;n.each(this._monthViews,function(){this._refreshDate(e)})},t.prototype.getDisplayDate=function(){var e=this.options.displayDate?this.options.displayDate:new Date;return a.isSameDate(e,new Date(1900,0,1))&&(e=new Date),e},t.prototype.getSelectedDate=function(){var e=this.options.selectedDates;return!e||e.length===0?null:e[0]},t.prototype.selectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().add(e),this.refreshDate(e),!0)},t.prototype.unSelectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().remove(e),this.refreshDate(e),!0)},t.prototype.unSelectAll=function(){var e=this.options.selectedDates,t;if(e&&e.length>0){this._getSelectedDates().clear();for(t=0;t<e.length;t++)this.refreshDate(e[t])}},t.prototype._slideToDate=function(e){if(a.isSameMonth(this.getDisplayDate(),e))return;var t=this.element.is(":visible");if(!t)this.options.displayDate=e;else{if(this._trigger("beforeSlide")===!1)return;this._isSingleMonth()?this._playSlideAnimation(e):this._playMmSlideAnimation(e)}},t.prototype.isPopupShowing=function(){return this.options.popupMode?this.element.wijpopup("isVisible"):!1},t.prototype.popup=function(e){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("show",e)},t.prototype.popupAt=function(e,t){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("showAt",e,t)},t.prototype.close=function(){this.isPopupShowing()&&this.element.wijpopup("hide")},t.prototype._getCulture=function(e){return Globalize.findClosestCulture(e||this.options.culture)},t.prototype._getDates=function(e){var t=e.toLowerCase()+".wijcalendar",n=this.element.data(t);return n===undefined&&(n=new l(this,e),this.element.data(t,n)),n},t.prototype._getDisabledDates=function(){return this._getDates("disabledDates")},t.prototype._getSelectedDates=function(){return this._getDates("selectedDates")},t.prototype._onDayDragStart=function(e){return e.preventDefault(),e.stopPropagation(),!1},t.prototype._onDayMouseDown=function(e){e.preventDefault(),e.stopPropagation();var t=this.options,r=this,i,s,o=!1,u=t.selectedDates,a=!1,f=[];if(e.which!==1)return e.which===0&&this._onTouchstart(e),!1;if(n.browser.msie&&parseFloat(n.browser.version)>=10)if(e.originalEvent.pointerType){if(e.originalEvent.pointerType===2||e.originalEvent.pointerType==="touch")return this._onTouchstart(e),!1}else if(e.originalEvent.originalEvent&&e.originalEvent.originalEvent.pointerType)if(e.originalEvent.originalEvent.pointerType===2||e.originalEvent.originalEvent.pointerType==="touch")return this._onTouchstart(e),!1;return i=this._getCellDate(e.currentTarget),i===undefined?!1:t.selectionMode.day?(s={date:i},this._trigger("beforeSelect",null,s)===!1?!1:((!t.selectionMode.days||!e.metaKey&&!e.shiftKey&&!e.ctrlKey)&&this.unSelectAll(),!t.selectionMode.days||(e.shiftKey&&this.element.data("lastdate.wijcalendar")?(this._selectRange(this.element.data("lastdate.wijcalendar"),i,null),o=!0):e.ctrlKey&&(this.element.data("lastdate.wijcalendar",i),n.each(u,function(e,t){if(i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate())return a=!0,!1}),a?this.unSelectDate(i):this.selectDate(i),u=t.selectedDates,n.each(u,function(e,t){f.push(new Date(t))}),this._trigger("selectedDatesChanged",null,{dates:f}),o=!0)),o||(this.element.data("lastdate.wijcalendar",i),o=this.selectDate(i),this._trigger("selectedDatesChanged",null,{dates:[i]})),o&&(this._trigger("afterSelect",null,s),!t.selectionMode.days||(this.element.data("dragging.wijcalendar",!0),n(document.body).bind("mouseup."+this.widgetName,function(){n(document.body).unbind("mouseup."+r.widgetName),r.element.data("dragging.wijcalendar",!1)}))),!1)):!1},t.prototype._onMouseUp=function(e){return e.preventDefault(),e.stopPropagation(),this.element.data("dragging.wijcalendar",!1),!1},t.prototype._onDayClicked=function(e){var t=this._getCellDate(e.currentTarget);return t===undefined?!1:this.options.selectionMode.day?(this.isPopupShowing()?this.close():n(e.currentTarget).hasAllClasses(this.options.wijCSS.datepickerOtherMonth)&&this._slideToDate(t),!1):!1},t.prototype._onDayMouseEnter=function(e){n(e.currentTarget).attr("state","hover"),this._refreshDayCell(e.currentTarget);if(!!this.element.data("dragging.wijcalendar")){var t=this._getCellDate(e.currentTarget);if(t===undefined)return;this.unSelectAll(),this._selectRange(this.element.data("lastdate.wijcalendar"),t,!0)}},t.prototype._onDayMouseLeave=function(e){n(e.currentTarget).attr("state","normal"),this._refreshDayCell(e.currentTarget)},t.prototype._onTouchstart=function(e){this._touchStartTime=new Date},t.prototype._onTouchend=function(e){e.preventDefault(),e.stopPropagation();var t=new Date,r=t-this._touchStartTime,i=this.options,s=this,o,u,a=i.selectedDates,f=!1,l=[];this.element.data("dragging.wijcalendar",!1);if(n.browser.msie){if(!(parseFloat(n.browser.version)>=10))return!1;if(e.originalEvent.pointerType){if(e.originalEvent.pointerType!==2&&e.originalEvent.pointerType!=="touch")return!1}else{if(!e.originalEvent.originalEvent.pointerType)return!1;if(e.originalEvent.originalEvent.pointerType!==2&&e.originalEvent.originalEvent.pointerType!=="touch")return!1}}else if(e.which!==0)return!1;return o=this._getCellDate(e.currentTarget),o===undefined?!1:i.selectionMode.day?(u={date:o},this._trigger("beforeSelect",null,u)===!1?!1:(n.each(a,function(e,t){if(o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return f=!0,!1}),!this._touchRangeSelect&&r>=750?(this.element.data("lastdate.wijcalendar",o),f?!i.selectionMode.days||this.unSelectDate(o):(i.selectionMode.days?this._touchRangeSelect=!0:this.unSelectAll(),this.selectDate(o)),a=i.selectedDates,n.each(a,function(e,t){l.push(new Date(t))}),a.length>0&&this._trigger("selectedDatesChanged",null,{dates:l})):(i.selectionMode.days||(this.unSelectAll(),this._touchRangeSelect=!1),this._touchRangeSelect?(r>=750&&(!i.selectionMode.days||(this.element.data("lastdate.wijcalendar",o),f?(this.unSelectDate(o),this._touchRangeSelect=!1):this.selectDate(o),a=i.selectedDates,n.each(a,function(e,t){l.push(new Date(t))}),this._trigger("selectedDatesChanged",null,{dates:l}))),r<750&&this.element.data("lastdate.wijcalendar")&&(this._selectRange(this.element.data("lastdate.wijcalendar"),o,null),this._touchRangeSelect&&(this._touchRangeSelect=!1))):(this.unSelectAll(),this.element.data("lastdate.wijcalendar",o),this.selectDate(o),this._trigger("selectedDatesChanged",null,{dates:[o]}))),this._trigger("afterSelect",null,u),this._touchStartTime=null,!1)):!1},t.prototype._selectRange=function(e,t,n){if(e!==undefined&&e!==new Date(1900,1,1)){var r=e,i=t,s=[];e>t&&(i=e,r=t);for(;;){if(r>i)break;this.selectDate(r),s[s.length]=r,r=a.addDays(r,1)}n||this.element.removeData("lastdate.wijcalendar"),this._trigger("selectedDatesChanged",null,{dates:s})}else this.selectDate(e),this._trigger("selectedDatesChanged",null,{dates:[e]});return!0},t.prototype._getCellDate=function(e){var t=n(e).attr("date");return t===undefined?t:new Date(t)},t.prototype._getParentTable=function(e){var t=n(e).parents("table");return t.length===0?undefined:t.get(0)},t.prototype._initMonthSelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s=[],o,u,a,f,l;if(t[t.length-1]!=="ms")throw Error.create("not a monthview");r=t.slice(0,t.length-1).join("_"),i=this._getParentTable(e);if(i){if(i.id!==r)throw Error.create("not a monthview");for(o=0;o<i.rows.length;o++){l=i.rows[o];for(u=0;u<l.cells.length;u++)a=l.cells[u],a&&(f=n(a).attr("daytype"),f!==undefined&&n(a).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(f,10))&&(s[s.length]=a))}}n(e).data("cells",s)},t.prototype._onMonthSelectorClicked=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.element.removeData("lastdate.wijcalendar"),this.unSelectAll();for(i=0;i<t.length;i++)s=t[i],o=n(s).attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onMonthSelectorMouseEnter=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onMonthSelectorMouseLeave=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._initWeekDaySelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s,o=[],u=0,a,f,l;if(t[t.length-2]!=="cs")throw Error.create("not a column");r=parseInt(t[t.length-1],10),i=t.slice(0,t.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a column");this.options.showWeekDays&&u++;for(;u<s.rows.length;u++)a=s.rows[u],r<a.cells.length&&(f=a.cells[r],f&&(l=n(f).attr("daytype"),l!==undefined&&n(f).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f)))}n(e).data("cells",o)},t.prototype._onWeekDayClicked=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<t.length;i++)s=n(t[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onWeekDayMouseEnter=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onWeekDayMouseLeave=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._initWeekNumberSelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s,o=[],u,a,f,l;if(t[t.length-2]!=="rs")throw Error.create("not a row");r=parseInt(t[t.length-1],10),i=t.slice(0,t.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a row");u=s.rows[r];if(u){a=0,this.options.showWeekNumbers&&a++;for(;a<u.cells.length;a++)f=u.cells[a],f&&(l=n(f).attr("daytype"),l!==undefined&&n(f).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f))}}n(e).data("cells",o)},t.prototype._onWeekNumberClicked=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<t.length;i++)s=n(t[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onWeekNumberMouseEnter=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onWeekNumberMouseLeave=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._isAnimating=function(){return!!this.element.data("animating.wijcalendar")},t.prototype._onPreviewMouseEnter=function(e){if(!!this.element.data("previewContainer"))return;if(this._isAnimating())return;var t=n(e.currentTarget),r=t.attr("id"),i=this.getDisplayDate(),s=this.options.wijCSS,o=this.options.monthCols*this.options.monthRows,u=n("<div/>");if(r===undefined)return;r==="prevPreview"&&(o=-o),this.options.displayDate=a.addMonths(i,o),this.element.data("preview.wijcalendar",!0),u.appendTo(document.body),u.hide(),u.addClass("wijmo-wijcalendar "+s.datepickerInline+" "+s.datepicker+" "+s.widget+" "+s.content+" "+s.helperClearFix+" "+s.cornerAll),u.append(this._createCalendar()),this.options.displayDate=i,this.element.data("preview.wijcalendar",!1),this._createMonthViews(),u.wijpopup({showEffect:"slide",showOptions:{direction:r==="prevPreview"?"right":"left"},hideEffect:"slide",hideOptions:{direction:r==="prevPreview"?"right":"left"}}),u.wijpopup("show",{my:r==="prevPreview"?"right top":"left top",at:r==="prevPreview"?"left top":"right top",of:t}),this.element.data("previewContainer",u)},t.prototype._onPreviewMouseLeave=function(e){var t=n(e.currentTarget),r=t.attr("id"),i=this.element.data("previewContainer"),s=this;if(r===undefined)return;i&&(i.wijpopup("isAnimating")?window.setTimeout(function(){s._onPreviewMouseLeave(e)},200):(i.wijpopup("hide"),this.element.removeData("previewContainer")))},t.prototype._resetWidth=function(){this._myGrid||(this.element.css("height",""),this.options.monthCols>1?(this.element.css("width",17*this.options.monthCols+"em"),this.element.addClass(this.options.wijCSS.datepickerMulti)):(this.element.css("width",""),this.element.removeClass(this.options.wijCSS.datepickerMulti)))},t.prototype._playMmSlideAnimation=function(e){var t=this.element.width(),r=this.element.height(),i=this.getDisplayDate(),s,o,u,a=this.options.direction||"horizontal",f=this,l,c;this.element.height(r),this.element.wrapInner("<div class='wijmo-wijcalendar-multi-aniwrapper'></div>"),s=this.element.find(">:first-child").width(t).height(r),o=s.clone(!1),o.hide(),this.options.displayDate=e,this._createMonthViews(),o.empty().append(this._createMonthGroup()),o.appendTo(this.element),u=e>i,this.element.data("animating.wijcalendar",!0),n.effects?(s.effect("slide",{mode:"hide",direction:a==="horizontal"?u?"left":"right":u?"up":"down",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){s.remove()}),o.effect("slide",{direction:a==="horizontal"?u?"right":"left":u?"down":"up",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")})):(a==="horizontal"?(l={width:0},c={width:"100%"}):(l={height:0},c={height:"100%"}),s.animate(l,this.options.duration,null,function(){s.remove()}),o.animate(c,this.options.duration,null,function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")}))},t.prototype._playSlideAnimation=function(e){if(!this._isSingleMonth())return;var t=this,r=this.getDisplayDate(),i=t.options.wijCSS,s=this.element.find("."+i.datepickerCalendar),o,u,a=1,l=this.options.direction||"horizontal",c=e>r,h=[],p,d,v;s.parent().is(".wijmo-wijcalendar-aniwrapper")?o=s.parent():(o=n.createWrapper(s).css({overflow:"hidden"}),o.removeClass(i.effectsWrapper),o.addClass("wijmo-wijcalendar-aniwrapper")),o.parent().is(".wijmo-wijcalendar-aniwrapper")?u=o.parent():(u=n.createWrapper(o).css({overflow:"hidden"}),u.removeClass(i.effectsWrapper),u.addClass("wijmo-wijcalendar-aniwrapper"));if(this._myGrid)switch(this._myGrid.gridType){case"month":a=1;break;case"year":a=10;break;case"decade":a=100}h[h.length]=e,p=s.outerWidth(),d=s.outerHeight(),l==="horizontal"?(s.width(p).css("float",c?"left":"right"),o.width((h.length+1)*p),o.css("left",c?0:-h.length*p).css("position","absolute")):(o.width(p),o.css("top",c?0:-h.length*d).css("position","absolute"),o.height((h.length+1)*d)),n.each(h,function(e,r){if(t._myGrid===undefined){var i=new f(t,r),s=t._customize(i.getHtml(!0));l==="horizontal"?s.width(p).css("float",c?"left":"right").appendTo(o):s.appendTo(o)}else l==="horizontal"?n(t._myGrid.getHtml(r,!0)).width(p).height(d).css("float",c?"left":"right").appendTo(o):n(t._myGrid.getHtml(r,!0)).height(d).appendTo(o)}),this.options.displayDate=e,this._myGrid===undefined&&this._createMonthViews(),this._refreshTitle(),this.element.data("animating.wijcalendar",!0),n.effects?o.effect("slide",{mode:"hide",direction:l==="horizontal"?c?"left":"right":c?"up":"down",easing:this.options.easing||"easeOutBack",distance:(l==="horizontal"?p:d)*h.length,duration:this.options.duration},function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),t._bindEvents(),t.element.data("animating.wijcalendar",!1),t._trigger("afterSlide")}):(l==="horizontal"?v={width:0}:v={height:0},o.animate(v,this.options.duration,null,function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),t._bindEvents(),t.element.data("animating.wijcalendar",!1),t._trigger("afterSlide")}))},t.prototype._onTitleClicked=function(){if(!this.options.allowQuickPick||!this._isSingleMonth())return;if(this._isAnimating())return;if(this._myGrid===undefined)this._myGrid=new c(this);else switch(this._myGrid.gridType){case"month":this._myGrid.gridType="year";break;case"year":this._myGrid.gridType="decade";break;case"decade":return}this._refreshTitle(),this.element.width(this.element.width()).height(this.element.height());var e=this.options.wijCSS,t=this.element.find("."+e.datepickerCalendar),r,i,s,o=t.outerWidth(),u=t.outerHeight(),a,f,l,h,p,d,v=this;t.parent().is(".wijmo-wijcalendar-aniwrapper")?r=t.parent():r=n.createWrapper(t).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper"),r.parent().is(".wijmo-wijcalendar-aniwrapper")?i=r.parent():i=n.createWrapper(r).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(o).height(u),s=n(this._myGrid.getHtml(!0)).css({position:"absolute",top:0,left:0,opacity:0}).appendTo(i).height(u),a=this._myGrid.getSelectedIndex(),f=Math.floor(a/4),l=a-f*4,h=o/4,p=u/3,d={left:h*l,top:p*f,width:h,height:p},t.width("100%").height("100%"),r.css({border:"solid 1px #cccccc"}),this.element.data("animating.wijcalendar",!0),n.effects?r.effect("size",{to:d,duration:this.options.duration||500},function(){r.remove()}):r.animate(d,this.options.duration||500,null,function(){r.remove()}),s.animate({opacity:1},this.options.duration||500,null,function(){s.css({position:"",top:"",left:"",filter:""});while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);v._bindEvents(),v.element.data("animating.wijcalendar",!1)})},t.prototype._onMyGridClicked=function(e){if(this._myGrid===undefined)return!1;if(this._isAnimating())return!1;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10),i=parseInt(t.attr("value"),10),s=this.options.wijCSS,o=this.element.find("."+s.datepickerCalendar),u,a,f,l,c,h,p,d,v,m=this;if(this._myGrid.gridType!=="month")if(!r||r===11)return!1;return t.hasAllClasses(s.stateActive)||this._myGrid.select(r,i),this._myGrid.gridType==="decade"?this._myGrid.gridType="year":this._myGrid.gridType==="year"?this._myGrid.gridType="month":this._myGrid=undefined,this._refreshTitle(),f=o.outerWidth(),l=o.outerHeight(),o.parent().is(".wijmo-wijcalendar-aniwrapper")?a=o.parent():a=n.createWrapper(o).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(f).height(l),c=n.extend({},t.position(),{width:t.width(),height:t.height()}),this._myGrid===undefined?(this._createMonthViews(),p=this.getDisplayDate(),d=this._getMonthView(p),h=this._customize(d.getHtml(!0))):h=n(this._myGrid.getHtml(!0)),v=h.height(l).appendTo(a),u=n.createWrapper(v).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").css(n.extend(c,{border:"solid 1px #cccccc",position:"absolute"})),this.element.data("animating.wijcalendar",!0),u.animate({left:0,top:0,width:f,height:l},this.options.duration||500,null,function(){v.css("width","")}),o.animate({opacity:0},this.options.duration||500,null,function(){o.remove();while(v.parent().is(".wijmo-wijcalendar-aniwrapper"))v.parent().replaceWith(v);m._myGrid===undefined&&m.element.width("").height(""),m._bindEvents(),m.element.data("animating.wijcalendar",!1)}),!1},t.prototype._onMyGridMouseEnter=function(e){if(this._myGrid===undefined)return;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;t.addClass(this.options.wijCSS.stateHover)},t.prototype._onMyGridMouseLeave=function(e){if(this._myGrid===undefined)return;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;t.removeClass(this.options.wijCSS.stateHover)},t.prototype._bindEvents=function(){var e=this.options.wijCSS,t="";n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(t="wij"),!this.element.data("preview.wijcalendar")&&!this.options.disabledState&&!this.options.disabled&&(this.element.find("div .wijmo-wijcalendar-navbutton").unbind().bind("mouseout.wijcalendar",function(){var t=n(this);t.removeClass(e.stateHover),t.hasAllClasses(e.datepickerNextHover)?t.removeClass(e.datepickerNextHover):t.hasAllClasses(e.datepickerPrevHover)&&t.removeClass(e.datepickerPrevHover)}).bind("mouseover.wijcalendar",function(){var t=n(this);t.addClass(e.stateHover),t.hasAllClasses(e.datepickerNext)?t.addClass(e.datepickerNextHover):t.hasAllClasses(e.datepickerPrev)&&t.addClass(e.datepickerPrevHover)}).bind("click.wijcalendar",n.proxy(this._onNavButtonClicked,this)),this.element.unbind(".wijcalendar").bind(t+"mouseup.wijcalendar",n.proxy(this._onMouseUp,this)),this.element.find("."+e.datepickerTitle).unbind().bind("mouseout.wijcalendar",function(){n(this).removeClass(e.stateHover)}).bind("mouseover.wijcalendar",function(){n(this).addClass(e.stateHover)}).bind("click.wijcalendar",n.proxy(this._onTitleClicked,this)),this.element.find(".wijmo-wijcalendar-prevpreview-button, .wijmo-wijcalendar-nextpreview-button").unbind("mouseenter.wijcalendar").unbind("mouseleave.wijcalendar").bind({"mouseenter.wijcalendar":n.proxy(this._onPreviewMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onPreviewMouseLeave,this)}),this._myGrid===undefined?(this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind(t+"click.wijcalendar",n.proxy(this._onDayClicked,this)).bind("mouseenter.wijcalendar",n.proxy(this._onDayMouseEnter,this)).bind("mouseleave.wijcalendar",n.proxy(this._onDayMouseLeave,this)).bind(t+"mousedown.wijcalendar",n.proxy(this._onDayMouseDown,this)).bind("dragstart.wijcalendar",n.proxy(this._onDayDragStart,this)),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(n.browser.msie&&this.element.unbind("contextmenu.wijcalendar").bind({"contextmenu.wijcalendar":function(){return!1}}),this.element.find(".wijmo-wijcalendar-day-selectable").unbind(t+"mouseup.wijcalendar").bind(t+"mouseup.wijcalendar",n.proxy(this._onTouchend,this))),!this.options.selectionMode.month||this.element.find(".wijmo-wijcalendar-monthselector").unbind().bind({"click.wijcalendar":n.proxy(this._onMonthSelectorClicked,this),"mouseenter.wijcalendar":n.proxy(this._onMonthSelectorMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onMonthSelectorMouseLeave,this)}),!this.options.selectionMode.weekDay||this.element.find("."+e.datepickerWeekDay).unbind().bind({"click.wijcalendar":n.proxy(this._onWeekDayClicked,this),"mouseenter.wijcalendar":n.proxy(this._onWeekDayMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onWeekDayMouseLeave,this)}),!this.options.selectionMode.weekNumber||this.element.find(".wijmo-wijcalendar-week-num").unbind().bind({"click.wijcalendar":n.proxy(this._onWeekNumberClicked,this),"mouseenter.wijcalendar":n.proxy(this._onWeekNumberMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onWeekNumberMouseLeave,this)})):this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind({"click.wijcalendar":n.proxy(this._onMyGridClicked,this),"mouseenter.wijcalendar":n.proxy(this._onMyGridMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onMyGridMouseLeave,this)}))},t.prototype._isSelectable=function(e){var t=this.options;return t.showOtherMonthDays&&e&i.otherMonth||!(e&(i.outOfRange|i.disabled|i.otherMonth))},t.prototype._getCellClassName=function(e,t,n){var r=this.options,s="",o=r.wijCSS.stateDefault,u=!!r.selectionMode.day||!!r.selectionMode.days;return n=n||!1,!n&&!r.disabledState&&!r.disabled&&u&&this._isSelectable(e)&&(s+=" wijmo-wijcalendar-day-selectable"),e&i.weekEnd&&(s+=" "+r.wijCSS.datepickerWeekEnd),e&i.otherMonth&&(s+=" "+r.wijCSS.datepickerOtherMonth,o+=" "+r.wijCSS.prioritySecondary),e&i.outOfRange&&(s+=" wijmo-wijcalendar-outofrangeday",o+=" "+r.wijCSS.prioritySecondary),e&i.gap?s+=" wijmo-wijcalendar-gap":(e&i.disabled&&(s+=" "+r.wijCSS.datepickerUnselectable,o+=" "+r.wijCSS.stateDisabled),e&i.today&&(s+=" "+r.wijCSS.datepickerDaysCellOver+" "+r.wijCSS.datepickerToday,o+=" "+r.wijCSS.stateHighlight),e&i.selected&&(e&(i.outOfRange|i.disabled))===0&&(s+=" "+r.wijCSS.datepickerCurrentDay,o+=" "+r.wijCSS.stateActive),e&i.gap&&(s+=" wijmo-wijcalendar-gap"),e&i.custom&&(s+=" wijmo-wijcalendar-customday")),{cssCell:s,cssText:o}},t.prototype._onNavButtonClicked=function(e){if(this._isAnimating())return!1;var t=1,r=n(e.currentTarget).attr("id"),i=this.getDisplayDate(),s=i;if(this._myGrid===undefined)t=r.indexOf("quick")>=0?this.options.quickNavStep:1,t=r.indexOf("next")>=0?t:-t,t=t*this.options.monthRows*this.options.monthCols,s=a.addMonths(i,t);else{t=r.indexOf("next")>=0?1:-1;switch(this._myGrid.gridType){case"month":s=a.addYears(i,t);break;case"year":s=a.addYears(i,t*10);break;case"decade":s=a.addYears(i,t*100)}}return this._slideToDate(s),!1},t.prototype._getMonthGroupHtml=function(){var e=this.getDisplayDate(),t,n,r,i=this.options.wijCSS,s,o;if(this._isSingleMonth())return t=this._getMonthView(e),t.showPreview=this.options.allowPreview&&!this.element.data("preview.wijcalendar"),t.getHtml();n=100/this.options.monthCols+"%",r=new u;for(s=0;s<this.options.monthRows;s++){for(o=0;o<this.options.monthCols;o++)r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerGroup+(o===0?" "+i.datepickerGroupFirst:"")+(o===this.options.monthCols-1?" "+i.datepickerGroupLast:"")),r.writeAttribute("style","width:"+n),r.writeTagRightChar(),t=this._getMonthView(e),t.showPreview=!1,r.write(t.getHtml()),r.writeEndTag("div"),e=a.addMonths(e,1);r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerRowBreak),r.writeTagRightChar(),r.writeEndTag("div")}return r.toString()},t.prototype._getCalendarHtml=function(){this._createMonthViews();var e=new u;return e.write(this._getMonthGroupHtml()),e.toString()},t.prototype._customizeDayCell=function(e){e.attr("state")===undefined&&e.attr("state","normal");if(e.attr("daytype")===undefined)return;if(e.attr("date")===undefined)return;var t=parseInt(e.attr("daytype"),10),n=new Date(e.attr("date")),r=e.attr("state")==="hover";this.options.customizeDate(e,n,t,r)},t.prototype._customize=function(e){var t=this.options,r=this,i=n(e);return n.isFunction(t.customizeDate)?(n.each(i.find(".wijmo-wijcalendar-day-selectable"),function(e,t){r._customizeDayCell(n(t))}),i):i},t.prototype._createCalendar=function(){return this._customize(n(n.parseHTML(this._getCalendarHtml())))},t.prototype._createMonthGroup=function(){return this._customize(n(this._getMonthGroupHtml()))},t.prototype._getMonthID=function(e){return e.getFullYear()+"_"+(e.getMonth()+1)},t.prototype._createMonthViews=function(){this._monthViews={};var e="",t=this.getDisplayDate(),n,r,i,s;for(n=0;n<this.options.monthRows;n++)for(r=0;r<this.options.monthCols;r++)e=this._getMonthID(t),this._monthViews[e]=new f(this,t),n===0&&(r===0&&(this._monthViews[e].isFirst=!0),r===this.options.monthCols-1&&(this._monthViews[e].isLast=!0)),t=a.addMonths(t,1);t=this.getDisplayDate(),e=this._getMonthID(t),i=this._monthViews[e],i&&(this._groupStartDate=i.getStartDate()),s=this.options.monthRows*this.options.monthCols,s>1&&(t=a.addMonths(t,s-1),e=this._getMonthID(t),i=this._monthViews[e]),i&&(this._groupEndDate=i.getEndDate())},t.prototype._getMonthView=function(e){var t=this._getMonthID(e);return this._monthViews[t]},t.prototype._getId=function(){return this.element.attr("id")},t.prototype._getChildElement=function(e){var t=this.element.find("[id*='"+e+"']");return t.length===0?undefined:t},t.prototype._refreshDayCell=function(e){var t=n(e),r=this.options,s,o,u,a;t.attr("state")===undefined&&t.attr("state","normal");if(t.attr("daytype")===undefined)return;if(t.attr("date")===undefined)return;s=parseInt(t.attr("daytype"),10),o=new Date(t.attr("date")),u=t.attr("state")==="hover",t.attr("class",this._getCellClassName(s,o,undefined).cssCell),t.removeAttr("aria-selected"),s&i.selected&&t.attr("aria-selected",!0);if(n.isFunction(r.customizeDate)&&this._customizeDayCell(t))return;a=t.find("a"),a.length>0&&(a.toggleClass(this.options.wijCSS.stateHover,u),a.toggleClass(this.options.wijCSS.stateActive,(s&i.selected)!==0))},t.prototype._isSingleMonth=function(){return this.options.monthCols*this.options.monthRows===1},t.prototype._splitString=function(e,t,n){if(n===undefined)return e.split(t);var r=[],i=e.split(t),s;for(s=0;s<i.length;s++)s>=n?r[n-1]=r[n-1]+t+i[s]:r.push(i[s]);return r},t.prototype._getNavButtonHtml=function(e,t,n,r){var i=new u;return i.writeBeginTag("a"),i.writeAttribute("id",e),i.writeAttribute("class",t),i.writeAttribute("role","button"),i.writeAttribute("href","#"),r&&(i.writeAttribute("title",r),i.writeAttribute("aria-label",r)),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("class",n),i.writeTagRightChar(),r&&i.write(r),i.writeEndTag("span"),i.writeEndTag("a"),i.toString()},t.prototype._getTitleText=function(e){if(this._myGrid!==undefined)return this._myGrid.getTitle();var t=e||this.getDisplayDate(),r=this.options.titleFormat||"MMMM yyyy";return n.isFunction(this.options.title)?this.options.title(t,r)||this._formatDate(r,t):this._formatDate(r,t)},t.prototype._refreshTitle=function(){this.element.find("."+this.options.wijCSS.datepickerTitle).html(this._getTitleText(undefined))},t.prototype._fillTitle=function(e,t){var n=this.options.wijCSS;e.writeBeginTag("div"),e.writeAttribute("class",n.datepickerTitle+" wijmo-wijcalendar-title"+" "+n.stateDefault+" "+n.cornerAll),e.writeTagRightChar(),e.write(this._getTitleText(t)),e.writeEndTag("div")},t.prototype._getHeaderHtml=function(e,t,n){var r=!!this.element.data("preview.wijcalendar"),i=this.options.wijCSS,s=r?"none":this._isSingleMonth()?this.options.navButtons:"default",o=this.element.is("."+i.datepickerRtl),a=new u;return s==="quick"?(a.writeBeginTag("div"),a.writeAttribute("class",i.header+" wijmo-wijcalendar-header "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("quickprev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(o?"next":"prev")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.quickPrevTooltip.replace("#",this.options.quickNavStep))),a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" wijmo-wijcalendar-header-inner"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"e":"w")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),!n||a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"w":"e")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div"),!n||a.write(this._getNavButtonHtml("quicknext","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(o?"prev":"next")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.quickNextTooltip.replace("#",this.options.quickNavStep))),a.writeEndTag("div")):(a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" "+i.header+" "+i.datepickerHeader+" "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),s!=="none"&&!!t&&a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"e":"w")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),s!=="none"&&!!n&&a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"w":"e")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div")),a.toString()},t.prototype._formatDate=function(e,t){return a.getTicks(t)?Globalize.format(t,e,this._getCulture(null)):"&nbsp;"},t}(e.wijmoWidget);t.wijcalendar=s;var o=function(){function e(){this.initSelector=":jqmData(role='wijcalendar')",this.wijCSS={datepickerInline:"ui-datepicker-inline",datepicker:"ui-datepicker",datepickerCalendar:"ui-datepicker-calendar",datepickerMulti:"ui-datepicker-multi",datepickerRtl:"datepicker-rtl",datepickerOtherMonth:"ui-datepicker-other-month",prioritySecondary:"ui-priority-secondary",effectsWrapper:"ui-effects-wrapper",datepickerNextHover:"ui-datepicker-next-hover",datepickerPrevHover:"ui-datepicker-prev-hover",datepickerNext:"ui-datepicker-next",datepickerPrev:"ui-datepicker-prev",datepickerTitle:"ui-datepicker-title",datepickerWeekDay:"ui-datepicker-week-day",datepickerWeekEnd:"ui-datepicker-week-end",datepickerUnselectable:"ui-datepicker-unselectable",datepickerDaysCellOver:"ui-datepicker-days-cell-over",datepickerToday:"ui-datepicker-today",stateHighlight:"ui-state-highlight",datepickerCurrentDay:"ui-datepicker-current-day",datepickerGroup:"ui-datepicker-group",datepickerGroupFirst:"ui-datepicker-group-first",datepickerGroupLast:"ui-datepicker-group-last",datepickerRowBreak:"ui-datepicker-row-break",datepickerHeader:"ui-datepicker-header",uiIconGripDottedVertical:"ui-icon-grip-dotted-vertical",uiDatepickerWeekCol:"ui-datepicker-week-col"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHighlight:"ui-btn-down-e"},this.culture="",this.monthCols=1,this.monthRows=1,this.titleFormat="MMMM yyyy",this.showTitle=!0,this.displayDate=undefined,this.dayRows=6,this.dayCols=7,this.weekDayFormat="short",this.showWeekDays=!0,this.showWeekNumbers=!1,this.calendarWeekRule="firstDay",this.minDate=new Date(1900,0,1),this.maxDate=new Date(2099,11,31),this.showOtherMonthDays=!0,this.showDayPadding=!1,this.selectionMode={day:!0,days:!0},this.allowPreview=!1,this.allowQuickPick=!0,this.toolTipFormat="dddd, MMMM dd, yyyy",this.prevTooltip="Previous",this.nextTooltip="Next",this.quickPrevTooltip="Quick Previous",this.quickNextTooltip="Quick Next",this.prevPreviewTooltip="",this.nextPreviewTooltip="",this.navButtons="default",this.quickNavStep=12,this.direction="horizontal",this.duration=250,this.easing="easeInQuad",this.popupMode=!1,this.autoHide=!0,this.customizeDate=null,this.title=null,this.beforeSlide=null,this.afterSlide=null,this.beforeSelect=null,this.afterSelect=null,this.selectedDatesChanged=null}return e}();s.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new o),n.wijmo.registerWidget("wijcalendar",s.prototype);var u=function(){function e(){this._html=[]}return e.prototype.writeTagLeftChar=function(){this._html[this._html.length]="<"},e.prototype.writeTagRightChar=function(){this._html[this._html.length]=">"},e.prototype.write=function(e){this._html[this._html.length]=" "+e+" "},e.prototype.writeBeginTag=function(e){this._html[this._html.length]="<"+e},e.prototype.writeEndTag=function(e){this._html[this._html.length]="</"+e+">"},e.prototype.writeFullBeginTag=function(e){this._html[this._html.length]="<"+e+">"},e.prototype.writeSelfClosingTagEnd=function(){this._html[this._html.length]="/>"},e.prototype.writeAttribute=function(e,t){if(t===undefined||t===null)return;this._html[this._html.length]=" "+e+'="',this._html[this._html.length]=t,this._html[this._html.length]='"'},e.prototype.clean=function(){this._html=[]},e.prototype.toString=function(){return this._html.join("")},e}();t.htmlTextWriter=u;var a={addDays:function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t);return t&&n.getDate()===e.getDate()&&(n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n.setTime(n.getTime()+t*24*3600*1e3)),n},addMonths:function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,1)},addYears:function(e,t){return this.addMonths(e,t*12)},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getTicks:function(e){return e.valueOf()},isSameDate:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isSameMonth:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()},getDaysInMonth:function(e){return(new Date(e.getFullYear(),e.getMonth()+1,0)).getDate()},getWeekStartDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-(e.getDay()-t+7)%7)},getDayOfYear:function(e){var t=new Date(e.getFullYear(),0,1),n=this.getTicks(e)-this.getTicks(t),r=n/864e5;return Math.floor(r)+1},getFirstDayWeekOfYear:function(e,t){var n=this.getDayOfYear(e)-1,r=e.getDay()-n%7,i;return r=(r-t+14)%7,i=(n+r)/7,Math.floor(i)+1},getDayOfWeek:function(e,t){return(e.getDay()-t+7)%7},getWeekOfYearFullDays:function(e,t,n,r){var i=this.getDayOfYear(e)-1,s=this.getDayOfWeek(e,n)-i%7;return s=(n-s+14)%7,s&&s>=r&&(s-=7),s=i-s,s>=0?Math.floor(s/7)+1:this.getWeekOfYearFullDays(this.addDays(e,-(i+1)),t,n,r)},getWeekOfYear:function(e,t,n){switch(t){case"firstDay":return this.getFirstDayWeekOfYear(e,n);case"firstFullWeek":return this.getWeekOfYearFullDays(e,t,n,7);case"firstFourDayWeek":return this.getWeekOfYearFullDays(e,t,n,4)}return this.getFirstDayWeekOfYear(e,n)},getDateToken:function(e){return e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate()}},f=function(){function e(e,t){this.calendar=e;if(t===undefined||a.isSameDate(t,new Date(1900,0,1)))t=new Date;this.displayDate=t,this.id=this.calendar._getId()+"_"+this.calendar._getMonthID(t),this.isFirst=!1,this.isLast=!1,this.showPreview=!1,this.culture=this.calendar._getCulture(),this._calcDates(this.displayDate)}return e.prototype._calcDates=function(e){var t=a.getDaysInMonth(e);this._startDateInMonth=new Date(e.getFullYear(),e.getMonth(),1),this._endDateInMonth=a.addDays(this._startDateInMonth,t-1),this._startDate=a.getWeekStartDate(this._startDateInMonth,this.culture.calendar.firstDay),this._endDate=a.addDays(this._startDate,this.calendar.options.dayRows*this.calendar.options.dayCols-1)},e.prototype._isFirstMonth=function(){var e=this.calendar.getDisplayDate();return a.isSameMonth(this._startDateInMonth,e)},e.prototype._isLastMonth=function(){var e=this.calendar.getDisplayDate();return e=new Date(e.getFullYear(),e.getMonth(),1),e=a.addMonths(e,this.calendar.options.monthCols*this.calendar.options.monthRows-1),a.isSameMonth(this._startDateInMonth,e)},e.prototype.getStartDate=function(){return this._startDate},e.prototype.getEndDate=function(){return this._endDate},e.prototype._getMonthDate=function(){return this._startDateInMonth===undefined,this._startDateInMonth},e.prototype._setMonthDate=function(e){this._calcDates(e)},e.prototype._getWeekDayText=function(e,t){t=t||"short";var n=this.culture.calendar.days,r="";switch(t){case"full":r=n.names[e];break;case"firstLetter":r=n.names[e].substring(0,1);break;case"abbreviated":r=n.namesAbbr[e];break;default:r=n.namesShort[e]}return r},e.prototype._getRowCount=function(){var e=this.calendar.options;return e.showWeekDays?e.dayRows+1:e.dayRows},e.prototype._getColCount=function(){var e=this.calendar.options;return e.showWeekNumbers?e.dayCols+1:e.dayCols},e.prototype._getDayType=function(e){var t=this.calendar.options,n=i.general,r=e.getDay(),s=r===6||r===0,o=e<t.minDate||e>t.maxDate,u=e<this._startDateInMonth||e>this._endDateInMonth,f=o||this.calendar._getDisabledDates().contains(e),l=this.calendar._getSelectedDates().contains(e),c=new Date,h=a.isSameDate(e,c),p=!1;return s&&(n|=i.weekEnd),h&&(n|=i.today),f&&(n|=i.disabled),u&&(n|=i.otherMonth),o&&(n|=i.outOfRange),l&&(n|=i.selected),p&&(n|=i.custom),u&&!t.showOtherMonthDays&&(n|=i.gap),n},e.prototype._refreshDate=function(e){if(e<this._startDate||e>this._endDate)return;var t=this.calendar.options,r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(this._startDate.getFullYear(),this._startDate.getMonth(),this._startDate.getDate()),s=Math.floor(Math.abs(r-i)/864e5),o=Math.floor(s/this.calendar.options.dayCols),u=Math.floor(s%this.calendar.options.dayCols),a,f,l,c;t.showWeekNumbers&&u++,t.showWeekDays&&o++,a=n("#"+this.id,this.calendar.element).get(0),a&&o<a.rows.length&&(f=a.rows[o],u<f.cells.length&&(l=f.cells[u],c=this._getDayType(e),n(l).attr("daytype",c.toString()),this.calendar._refreshDayCell(l)))},e.prototype._fillDayCell=function(e,t,n){var r=this.calendar.options,s=null,o=t.getDate().toString(),u=this.calendar._formatDate(r.toolTipFormat||"dddd, MMMM dd, yyyy",t),a=this._getDayType(t),f=this.calendar._isSelectable(a),l=this.calendar._getCellClassName(a,t,n);o=r.showDayPadding&&o.length===1?"0"+o:o,e.writeBeginTag("td"),e.writeAttribute("daytype",a.toString()),f&&(e.writeAttribute("title",u),e.writeAttribute("aria-label",u)),e.writeAttribute("date",t.toDateString()),e.writeAttribute("class",l.cssCell),e.writeAttribute("role","gridcell"),f||e.writeAttribute("aria-disabled","true"),e.writeTagRightChar(),a&i.gap?e.write("&#160;"):s&&s.content?e.write(s.content):(e.writeBeginTag("a"),e.writeAttribute("class",l.cssText),e.writeAttribute("href","#"),e.writeAttribute("onclick","return false;"),e.writeTagRightChar(),e.write(o),e.writeEndTag("a")),e.writeEndTag("td")},e.prototype.getHtml=function(e){e=!!e;var t=this.calendar.options,n=t.wijCSS,r=!!this.calendar.element.data("preview.wijcalendar"),i=new u,s,o,f,l,c,h,p,d,v,m,g,y;!e&&t.showTitle&&i.write(this.calendar._getHeaderHtml(this._startDateInMonth,this.isFirst,this.isLast)),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-prevpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","prevPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.prevPreviewTooltip),i.writeAttribute("aria-label",t.prevPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.writeBeginTag("table"),i.writeAttribute("id",this.id),i.writeAttribute("class",n.datepickerCalendar+" wijmo-wijcalendar-table"),i.writeAttribute("role","grid"),i.writeAttribute("summary",this.calendar._getTitleText(this._startDateInMonth)),i.writeAttribute("onselectstart","return false;"),i.writeTagRightChar();if(t.showWeekDays){i.writeFullBeginTag("thead"),i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_ms"),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-monthselector"+(t.selectionMode.month?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),!!t.selectionMode.month&&!r?(i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.iconArrowRightDown),i.writeAttribute("style","display: block;"),i.writeSelfClosingTagEnd()):i.write(t.weekString?t.weekString:"Wk"),i.writeEndTag("th")),f=this._startDate.getDay(),l=this._startDate;for(s=0;s<t.dayCols;s++)c=f===6||f===0,h=s+(t.showWeekNumbers?1:0),p=this._getWeekDayText(f,t.weekDayFormat),d=this._getWeekDayText(f,"full"),i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_cs_"+h),i.writeAttribute("class",n.datepickerWeekDay+(c?" "+n.datepickerWeekEnd:"")+(t.selectionMode.weekDay?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("title",d),i.writeAttribute("aria-label",d),i.writeTagRightChar(),i.write(p),i.writeEndTag("span"),i.writeEndTag("th"),f=(f+1)%7,l=a.addDays(l,1);i.writeEndTag("tr"),i.writeEndTag("thead")}i.writeFullBeginTag("tbody"),v=this._startDate,m=this._startDateInMonth;for(s=0;s<t.dayRows;s++){i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(g=s+(t.showWeekDays?1:0),i.writeBeginTag("td"),i.writeAttribute("id",this.id+"_rs_"+g),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-week-num"+(t.selectionMode.weekNumber?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","rowheader"),i.writeTagRightChar(),y=a.getWeekOfYear(m,t.calendarWeekRule,this.culture.calendar.firstDay),i.write(y),i.writeEndTag("td"),m=a.addDays(m,t.dayCols));for(o=0;o<t.dayCols;o++)this._fillDayCell(i,v,r),v=a.addDays(v,1);i.writeEndTag("tr")}return i.writeEndTag("tbody"),i.writeEndTag("table"),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-nextpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","nextPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.nextPreviewTooltip),i.writeAttribute("aria-label",t.nextPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.toString()},e}();t.wijMonthView=f;var l=function(){function e(e,t){this._calendar=e,this._optionName=t?t:"selectedDates",this._normalize()}return e.prototype.getDates=function(){return this._calendar.options[this._optionName]===undefined&&(this._calendar.options[this._optionName]=[]),this._calendar.options[this._optionName]},e.prototype.setDates=function(e){this._calendar.options[this._optionName]=e,this._normalize()},e.prototype.getCount=function(){return this.getDates().length},e.prototype.clear=function(){this.setDates([])},e.prototype.add=function(e){this.addRange(e,e)},e.prototype.remove=function(e){this.removeRange(e,e)},e.prototype.indexOf=function(e){return this.getCount()?this._findRangeBound(e,!0,!1):-1},e.prototype.contains=function(e){return this.indexOf(e)!==-1},e.prototype.removeRange=function(e,t){if(!this.getCount())return;var n=this._findRangeBound(e,!1,!0),r=this._findRangeBound(t,!1,!1),i,s,o;if(n<0||r<0)return;if(n>r)return;i=this.getDates();if(i[r]>t)return;s=n?i.slice(0,n):[],o=r>=i.length-1?[]:i.slice(r+1),this.setDates(s.concat(o))},e.prototype.addRange=function(e,t){this.removeRange(e,t);var n=this.getDates(),r=this._findRangeBound(e,!1,!0),i=r?n.slice(0,r):[],s=n.slice(r),o=[],u;e=a.getDate(e),t=a.getDate(t);for(u=e;u<=t;u=a.addDays(u,1))o[o.length]=u;this.setDates(i.concat(o.concat(s)))},e.prototype._findRangeBound=function(e,t,n){var r=this.getDates(),i=0,s=r.length,o;while(i<s){o=i+s>>1;if(a.isSameDate(e,r[o]))return o;e<r[o]?s=o:i=o+1}return t?-1:n?i:s},e.prototype._parseDate=function(e){var t;e?typeof e=="string"&&(t=e):e=new Date;if(t){t=t.replace(/-/g,"/");try{e=new Date(t),isNaN(e)&&(e=new Date)}catch(n){e=new Date}}return e},e.prototype._normalize=function(){var e=this._calendar.options[this._optionName],t=this,r;n.isArray(e)&&(r=n.map(e,function(e,n){return t._parseDate(e)}),this._calendar.options[this._optionName]=r.sort(function(e,t){return e.getTime()-t.getTime()}))},e}();t.wijDateCollection=l;var c=function(){function e(e){this.gridType="month",this.calendar=e,e&&(this.culture=e._getCulture())}return e.prototype.select=function(e,t){var n=this.calendar.getDisplayDate();switch(this.gridType){case"month":n.setMonth(t);break;case"year":n.setFullYear(t);break;case"decade":n.setFullYear(t)}this.calendar.options.displayDate=n},e.prototype.getSelectedIndex=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return e.getMonth();case"year":return t-n;case"decade":return Math.floor((t-r)/10)}return 0},e.prototype.getTitle=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return t.toString();case"year":return n+1+" - "+(n+10);case"decade":return r+10+" - "+(r+109)}return""},e.prototype.getHtml=function(e,t){e===undefined?e=this.calendar.getDisplayDate():typeof e=="boolean"&&(t=e,e=this.calendar.getDisplayDate()),t=!!t;var n=this.calendar.options,r=3,i=4,s=new u,o=n.wijCSS,a,f,l,c,h,p,d,v,m,g,y,b,w,E;n.showTitle&&!t&&s.write(this.calendar._getHeaderHtml(null,!0,!0)),a=100/r+"%",a="30%",s.writeBeginTag("table"),s.writeAttribute("class",o.datepickerCalendar+" wijmo-wijcalendar-mygrid"),s.writeAttribute("role","grid"),s.writeAttribute("onselectstart","return false;"),s.writeTagRightChar(),f=e.getFullYear(),l=e.getFullYear()*12,c=Math.floor(f/10)*10-1,h=Math.floor(f/100)*100-10,p=this.culture.calendar.months;for(d=0;d<r;d++){s.writeBeginTag("tr"),s.writeAttribute("height",a),s.writeTagRightChar();for(v=0;v<i;v++){m=d*4+v,g=!1,y=!1,b="",w=null;switch(this.gridType){case"month":e.getMonth()===m&&(g=!0),w=m,b=p.namesAbbr[m],y=l+m<n.minDate.getFullYear()*12+n.minDate.getMonth()||l+m>n.maxDate.getFullYear()*12+n.maxDate.getMonth();break;case"year":if(m===0||m===11)y=!0;w=c+m,w<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f===w,b=w.toString();break;case"decade":if(m===0||m===11)y=!0;w=h+m*10,w+10<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f>=w&&f<w+10,b=w.toString()+"-<br/>"+(w+9).toString()}E=o.datepickerWeekDay,y?E=E+" "+o.datepickerOtherMonth+" "+o.prioritySecondary+" "+o.datepickerUnselectable:!n.disabledState&&!n.disabled&&(E+=" wijmo-wijcalendar-day-selectable"),E+=" "+o.stateDefault+(y?" "+o.stateDisabled:"")+(g?" "+o.stateActive+" "+o.stateHighlight:""),s.writeBeginTag("td"),s.writeAttribute("class",E),s.writeAttribute("role","gridcell"),s.writeAttribute("index",m.toString()),s.writeAttribute("value",w.toString()),s.writeAttribute("other",y.toString()),s.writeTagRightChar(),s.writeBeginTag("a"),s.writeAttribute("href","#"),s.writeTagRightChar(),s.write(b),s.writeEndTag("a"),s.writeEndTag("td")}s.writeEndTag("tr")}return s.writeEndTag("table"),s.toString()},e}();t.wijMyGrid=c})(e.calendar||(e.calendar={}));var t=e.calendar})(wijmo||(wijmo={})),define("wijmo.wijcalendar",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){function i(e,t){typeof t=="undefined"&&(t=2);var n=""+e+"";if(n.length>t)n=n.substr(n.length-t);else while(n.length<t)n="0"+n;return n}var n=jQuery,r=e.getKeyCodeEnum(),s=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype._createTextProvider=function(){this._textProvider=new a(this,this.options.dateFormat,this.options.displayFormat)},i.prototype._strToDate=function(e){return this._textProvider.parseDate(e)},i.prototype._beginUpdate=function(){var t,n=null;e.prototype._beginUpdate.call(this),this.options.minDate&&typeof this.options.minDate=="string"&&(this.options.minDate=this._strToDate(this.options.minDate)),this.options.maxDate&&typeof this.options.maxDate=="string"&&(this.options.maxDate=this._strToDate(this.options.maxDate)),this.options.date===undefined?!this.element.data("elementValue")||(t=this.element.data("elementValue")):typeof this.options.date=="string"?t=this.options.date:n=this.options.date,this.options.date===undefined&&(this.options.date=new Date),t&&(n=this._strToDate(t)),n==null&&(n=this.options.date),this._safeSetDate(n);var r=this._getCulture();r!=null&&(this.options.amDesignator==""&&(this.options.amDesignator=this._getStandardAMPM("AM")),this.options.pmDesignator==""&&(this.options.pmDesignator=this._getStandardAMPM("PM"))),this.element.data({defaultDate:n===null?n:new Date(this.options.date.getTime()),preDate:n===null?n:new Date(this.options.date.getTime())}),this._resetTimeStamp(),this._initPicker(),this.element.addClass(this.options.wijCSS.wijinputdate).attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":this.options.date})},i.prototype._endUpdate=function(){var n=this;e.prototype._endUpdate.call(this),this.element.bind("click.wijinput",function(){if(!n._allowEdit())return;var e=n.options.activeField,r=n.element.wijtextselection();n._updateText(),n.element.wijtextselection(r),n._highLightCursor(),t.Utility.chrome&&n.element.data("needResoteActiveField")==1&&n._setOption("activeField",e)})},i.prototype._getInnerNullText=function(){return this.options.placeholder!=null?this.options.placeholder:this.options.showNullText?this.options.nullText:null},i.prototype._getInnerAmDesignator=function(){return this.options.amDesignator==""?this._getStandardAMPM("AM"):this.options.amDesignator},i.prototype._getInnerPmDesignator=function(){return this.options.pmDesignator==""?this._getStandardAMPM("PM"):this.options.pmDesignator},i.prototype._getAllowSpinLoop=function(){return!!this.options.allowSpinLoop},i.prototype._getRealMaxDate=function(){return this.options.maxDate?this.options.maxDate:new Date(9999,11,31,23,59,59)},i.prototype._getRealMinDate=function(){if(this.options.minDate)return this.options.minDate;var e=new Date(1,0,1,0,0,0);return e.setFullYear(1),e},i.prototype._getRealEraMaxDate=function(){return this.options.maxDate?u.GetEraMax()<this.options.maxDate?u.GetEraMax():this.options.maxDate:u.GetEraMax()},i.prototype._getRealEraMinDate=function(){return this.options.minDate?u.GetEraMin()>this.options.minDate?u.GetEraMin():this.options.minDate:u.GetEraMin()},i.prototype._isEraFormatExist=function(){return this._textProvider._isEraFormatExist()},i.prototype._checkDate=function(){var e=this.options.date,t=this._checkRange(this.options.date);u.Equal(e,t)||(this._setOption("date",t),this._trigger("valueBoundsExceeded",null))},i.prototype._checkRange=function(e){return e&&(this.options.minDate&&e<this.options.minDate&&(e=new Date(Math.max(this.options.minDate,e))),this.options.maxDate&&e>this.options.maxDate&&(e=new Date(Math.min(this.options.maxDate,e)))),e},i.prototype._safeSetDate=function(e,t){var n=e;return t||(e=this._checkRange(e)),isNaN(e)&&(e=n),this.options.date=e,!0},i.prototype._safeGetDate=function(e){var t=this.options.date;return t==null&&(t=new Date),e||(t=this._checkRange(t)),t},i.prototype._setOption=function(t,n){if(t=="showTrigger"){this._setOption("showDropDownButton",n);return}e.prototype._setOption.call(this,t,n);switch(t){case"pickers":this._reInitPicker();break;case"minDate":case"maxDate":typeof this.options[t]=="string"&&(this.options[t]=this._strToDate(n));var r=this.options.date;r===null&&(r=new Date);var i=this._getRealMinDate(),s=this._getRealMaxDate();(r<i||r>s)&&this._safeSetDate(r),this._updateText(),this._highLightField();break;case"date":!n||(typeof n=="string"?n=this._strToDate(n):typeof n=="object"?n=new Date(n.getTime()):n=new Date(n),isNaN(n)&&(n=new Date)),this._safeSetDate(n),this._updateText(),this._highLightField();break;case"midnightAs0":case"hour12As0":case"amDesignator":case"pmDesignator":this._updateText(),this._highLightField();break;case"culture":this._textProvider._setFormat(this.options.dateFormat);var o=this.options.displayFormat==""?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(o),this.options.amDesignator=this._getStandardAMPM("AM"),this.options.pmDesignator=this._getStandardAMPM("PM"),this._updateText();var u=this.element.data("calendar");u&&u.wijcalendar("option",t,n),this._reInitPicker();break;case"dateFormat":this._textProvider._setFormat(this.options.dateFormat),this.options.displayFormat==""&&this._textProvider._setDisplayFormat(this.options.dateFormat);if(this._isEraFormatExist()&&this.options.date!=null){var a=this._getRealEraMinDate(),f=this._getRealEraMaxDate();this.options.date<a?this._setOption("date",a):this.options.date>f&&this._setOption("date",f)}this._updateText();var u=this.element.data("calendar");u&&u.wijcalendar("option",t,n),this._reInitPicker();break;case"displayFormat":var o=this.options.displayFormat==""?this.options.dateFormat:this.options.displayFormat;this._textProvider._setDisplayFormat(o),this._updateText();break;case"activeField":n=Math.min(n,this._textProvider.getFieldCount()-1),n=Math.max(n,0),this.options.activeField=n,this._checkDate(),this._highLightField(),this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var u=this.element.data("calendar",u);u&&u.wijcalendar("option",t,n);break;case"comboItems":this._reInitPicker()}},i.prototype._setData=function(e){this.option("date",e)},i.prototype._resetData=function(){var e=this.element.data("defaultDate");e===undefined||e===null?(e=this.element.data("elementValue"),e!==undefined&&e!==null&&e!==""?this.setText(e):this._setData(null)):this._setData(e)},i.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0),this.element.data("timeStamp",new Date("1900/1/1")),this.element.data("lastInputChar","")},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isDateNull())return"";var t=this._textProvider.toString();return t===this.options.nullText?"":t},i.prototype._highLightField=function(e){typeof e=="undefined"&&(e=this.options.activeField);if(this.isFocused()){var t=this._textProvider.getFieldRange(e);t&&this.element.wijtextselection(t)}},i.prototype._highLightCursor=function(e){if(this._isNullText())return;e===undefined&&(e=Math.max(0,this.element.wijtextselection().start));var t=this._textProvider.getCursorField(e);if(t<0)return;this._setOption("activeField",t)},i.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)},i.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)},i.prototype._toFirstField=function(){this._setOption("activeField",0)},i.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())},i.prototype._clearField=function(e){typeof e=="undefined"&&(e=this.options.activeField);var n=this._textProvider.getFieldRange(e),r,i=this;n&&(r=new t.wijInputResult,this._textProvider.removeAt(n.start,n.end,r),this._updateText(),window.setTimeout(function(){i._highLightField()},1))},i.prototype.spinUp=function(){this._doSpin(!0,!1)},i.prototype.spinDown=function(){this._doSpin(!1,!1)},i.prototype.drop=function(){e.prototype._onTriggerClicked.call(this)},i.prototype.focus=function(){e.prototype.focus.call(this),this._addState("focus",this.outerDiv),this._updateText(),this._highLightField()},i.prototype.isDateNull=function(){return this.options.date===null||this.options.date===undefined},i.prototype._min=function(e,t){return t==undefined?e:e<t?e:t},i.prototype._max=function(e,t){return t==undefined?e:e>t?e:t},i.prototype._allowEdit=function(){return!this.option("disableUserInput")},i.prototype._onFocus=function(n){e.prototype._onFocus.call(this,n);if(!this._allowEdit())return;this._updateText(),this._highLightField();if(t.Utility.chrome){var r=this;r.element.data("needResoteActiveField",!0),window.setTimeout(function(){r.element.data("needResoteActiveField",!1)},200)}},i.prototype._simulate=function(t){var n=null;if(typeof t=="string")n=t;else{var r=this.element.wijtextselection(),i=this.element.data("lastSelection").start,s=r.end;s>=i&&(n=this.element.val().substring(i,s))}for(var o=0;o<u.GetEraCount();o++)if(n.toLowerCase()===u.GetEraShortNames()[o].toLowerCase()||n.toLowerCase()===u.GetEraAbbreviations()[o].toLowerCase()||n.toLowerCase()===u.GetEraSymbols()[o].toLowerCase()||n.toLowerCase()===u.GetEraNames()[o].toLowerCase()){n=u.GetEraShortNames()[o].toLowerCase();break}e.prototype._simulate.call(this,n)},i.prototype._doSpin=function(e,t){var n=this;if(!this._allowEdit())return!1;if(t&&this.element.data("breakSpinner"))return!1;e?this._trigger("spinUp",null):this._trigger("spinDown",null);if(this.options.date==null){this._setDefaultDate(e);return}this._textProvider[e?"incEnumPart":"decEnumPart"]()&&(this._updateText(),this._highLightField());if(t&&!this.element.data("breakSpinner")){var r=window.setTimeout(function(){return n._doSpin(e,!0)},this._calcSpinInterval());this.element.data("spintimer",r)}return!0},i.prototype._setDefaultDate=function(e){e?this.options.date=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate():this.options.date=this._isEraFormatExist()?this._getRealEraMaxDate():this._getRealMaxDate(),this._updateText(),this._highLightField()},i.prototype._onChange=function(){},i.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},i.prototype._onBlur=function(t){e.prototype._onBlur.call(this,t),this._checkDate()},i.prototype._keyDownPreview=function(n){if(e.prototype._keyDownPreview.call(this,n))return!0;var i=n.keyCode||n.which,s;switch(i){case r.UP:case r.DOWN:if(n.altKey)return this._onTriggerClicked(),!0;if(this.element.data("pickerCurrentTab")!="List")return this._doSpin(i==r.UP,!1),this._stopEvent(n),!0;break;case r.LEFT:return this.options.activeField!=0||this.options.blurOnLeftRightKey.toLowerCase()!="left"&&this.options.blurOnLeftRightKey.toLowerCase()!="both"?this._toPrevField():t.Utility.MoveFocus(this.element.get(0),!1),!0;case r.RIGHT:return this.options.activeField!=this._textProvider.getFieldCount()-1||this.options.blurOnLeftRightKey.toLowerCase()!="right"&&this.options.blurOnLeftRightKey.toLowerCase()!="both"?this._toNextField():t.Utility.MoveFocus(this.element.get(0),!0),!0;case r.ENTER:if(this._wasPopupShowing)return this.element.data("pickerCurrentTab")=="Calendar"?this.options.date==null&&this._setOption("date",new Date):this.element.data("pickerCurrentTab")=="List"?this._processKeyForDropDownList(n):this._okButtonMouseDown(null,null),this._hidePopup(),!0;this.options.hideEnter&&e.prototype._stopEvent.call(this,n);break;case r.TAB:if(this.options.tabAction!=="field")break;s=this.element.wijtextselection();if(s&&s.end-s.start!==this.element.val().length)if(n.shiftKey){if(!(this.options.activeField>0))break;this._toPrevField()}else{if(!(this.options.activeField<this._textProvider.getFieldCount()-1))break;this._toNextField()}return!0;case r.SPACE:case 188:case 190:case 110:case 191:if(n.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0;break;case r.HOME:return n.ctrlKey?this._setOption("date",new Date):this._toFirstField(),!0;case r.END:return n.ctrlKey?this._processClearButton():this._toLastField(),!0;case r.BACKSPACE:case r.DELETE:if(this._allowEdit())return this._processDeleteKey(),!0}return!1},i.prototype._processDeleteKey=function(){if(this.options.date==null)return;var e=this.element.wijtextselection();if(e.end-e.start===this.element.val().length){var t=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate();if(this.options.date>t){this._setOption("date",t);return}}else{var n=this.options.activeField,r=this._textProvider.getFiledText(n);this._clearField();var i=this._textProvider.getFiledText(n);if(r!=i)return}this._processClearButton()},i.prototype._autoMoveToNextField=function(e,t){if(!this.options.autoNextField)return;this._textProvider.needToMove(this.options.activeField,e,t)&&this._toNextField()},i.prototype._processClearButton=function(){this._allowEdit()?this._setOption("date",null):this._updateText()},i.prototype._autoMoveToNextControl=function(e,n,r){if(!this.options.blurOnLastChar||r!==this._textProvider.getFieldCount()-1)return;this._textProvider.needToMove(r,e,n)&&t.Utility.MoveFocus(this.element.get(0),!0)},i.prototype._keyPressPreview=function(e){var t=e.keyCode||e.which,n,i,s,o,u,a,f,l,c,h,p;if(t===r.ENTER)return this.isDateNull()&&this._setOption("date",new Date),!1;n=this._textProvider.getFieldRange(this.options.activeField);if(n){if(t===r.TAB)return!0;if(t===r.SPACE)return this._stopEvent(e),!0;i=String.fromCharCode(t),s=this._textProvider.isFieldSep(i,this.options.activeField);if(s)return this._toNextField(),this._stopEvent(e),!0;o=this.element.data("cursorPos"),u=new Date,f=this.element.data("timeStamp"),p=this.element.data("lastInput"),a=u.getTime()-f.getTime()>this.options.keyDelay;var h=i;a?o=0:p&&(h=p+h),this.element.data({timeStamp:u,lastInput:h}),l=n.start+o,this.element.data("cursorPos",++o);var d=this.options.date==null;c=this._textProvider.addToField(h,this.options.activeField,l);if(c){var v=this.options.activeField;this._updateText(),this._autoMoveToNextField(o,i),this._highLightField(),this._autoMoveToNextControl(o,i,v)}else d&&this._setOption("date",null),this._resetTimeStamp(),this._fireIvalidInputEvent();return this.element.data("lastInputChar",i),this._stopEvent(e),!0}return!1},i.prototype._raiseDataChanged=function(){var e=this.options.date,t=this.element.data("preDate");this.element.data("preDate",e?new Date(e.getTime()):null);if(!t&&e||t&&!e||t&&e&&t.getTime()!==e.getTime())this._popupVisible()&&this._syncCalendar(),this.element.attr("aria-valuenow",e),this._trigger("dateChanged",null,{date:e})},i.prototype._isMinDate=function(e){return e.getFullYear()===1&&e.getMonth()===0&&e.getDate()===1},i.prototype._reInitPicker=function(){this._destroyPicker(),this._initPicker()},i.prototype._destroy=function(){e.prototype._destroy.call(this),this._destroyPicker()},i.prototype._destroyPicker=function(){var e=this.element.data("pickers");e!=undefined&&(e.remove(),this.element.data("pickers",null),this.element.data("calendar",null),this.element.data("datePicker",null),this.element.data("timePicker",null),this._comboDiv=undefined)},i.prototype._initPicker=function(){var e=this,r=this.element.data("pickers");if(r!=undefined)return;var i=this;this._initPickerData();var s=this._getPickerCount(),o=this.element.data("pickerWidth"),u=this.element.data("pickerHeight"),a=this.element.data("pickerAreaHeight");s>1&&(u+=8,a+=8);var f=s>1?u:a;r=n("<table/>").appendTo(document.body).attr({"class":"ui-widget-content ui-corner-all",borderWidth:"0px",cellspacing:"0px",cellpadding:"0px",cursor:"default"}).css({"font-size":"12px"});var l=n("<tr/>").appendTo(r),c=n("<tr/>").appendTo(r),h=n("<td/>").appendTo(l).css({width:"100%",height:"100%"}),p=n("<td/>").appendTo(c).attr("align","center").css({width:"100%",height:"30px",display:"none"}),d=n("<input type='button'/>").appendTo(p).attr({"class":"ui-state-active ui-widget",value:"OK"}).css({width:"80px",height:"26px",margin:"1px","text-align":"center",cursor:"pointer",visibility:"hidden"}).mousedown(function(e,t){i._okButtonMouseDown(e,t)}),v=n("<div/>").appendTo(h).css({width:"100%",height:"100%",padding:"0px",margin:"0px",borderWidth:"0px",overflow:"hidden"}),m=n("<ul/>").css({"line-height":"1px","font-size":"12px"});s>1&&m.appendTo(v);var g="";if(this._isCalendarPickerShown()){s>1?this._addPickerTab(m,"Calendar","#calendarDiv"):t.Utility.IsIE9()&&(h.css({width:""}),v.css({width:""})),this._initCalendarPicker();var y=this.element.data("calendar");this._addPickerEditor(v,y,"calendarDiv"),g="Calendar"}this._isListPickerShown()&&(s>1&&this._addPickerTab(m,"List","#listDiv"),this._initListPicker(),this._addPickerEditor(v,this._comboDiv,"listDiv"),g=g==""?"List":g);if(this._isDatePickerShown()){s>1&&this._addPickerTab(m,"Date","#dateDiv"),this._initDatePicker();var b=this.element.data("datePicker");this._addPickerEditor(v,b,"dateDiv"),g=g==""?"Date":g}if(this._isTimePickerShown()){s>1&&this._addPickerTab(m,"Time","#timeDiv"),this._initTimePicker();var w=this.element.data("timePicker");this._addPickerEditor(v,w,"timeDiv"),g=g==""?"Time":g}if(g=="Calendar")r.css({width:o+"px",height:""});else if(g=="Date"||g=="Time")p.css({display:""}),r.css({width:o+"px",height:u+"px"}),v.css({height:f+"px"});this.element.data("pickerCurrentTab",g);var i=this;v.wijtabs({select:function(e,t){var n=t.tab.outerText||t.tab.text;p.css({display:"none"}),i.element.data("pickerCurrentTab",n);if(n=="Calendar")i.focus(),r.css({width:o+"px",height:"","font-size":""}),v.css({height:"100%"});else if(n=="List"){var s=i._getListPickerWidth();i._comboDiv.wijlist("option","width",s),r.css({width:s,height:"","font-size":""}),v.css({height:"100%"}),i._comboDiv.wijlist("renderList"),i._comboDiv.focus()}else{i.focus();if(n=="Time"||n=="Date")p.css({display:""}),r.css({width:o+"px",height:u+"px","font-size":"12px"}),v.css({height:f+"px"})}}}),r.wijpopup({autoHide:!0,hidden:function(){e._trigger("dropDownClose"),e._wasPopupShowing=!1},shown:function(){e._trigger("dropDownOpen"),e._wasPopupShowing=!0}}),this.element.data("pickers",r),this.element.data("divPickers",v),this.element.data("divOK",d)},i.prototype._initPickerData=function(){var e=70,t=32,n=26,r=30,i=150,s=100,o=235,u=242,a=220,f=220,l=this._getPickerCount(),c=l*e,h=s;c=c<i?i:c,this._isCalendarPickerShown()&&(c=c<o?o:c,h=h<u?u:h);if(this._isListPickerShown()){var p=this._getcomboItems();if(p!=undefined){var d=p.length*n;h=h<d?d:h}}if(this._isDatePickerShown()){c=c<a?a:c,h=h<a?a:h;var v=this._getDatePickerMinYear(),m=this._getDatePickerMaxYear(),g=this._getDefaultDatePickerFormat(),y=this.options.pickers.datePicker.format!=undefined?this.options.pickers.datePicker.format:g,b=y.split(",");b.length!=3&&(b=g.split(","),this.options.pickers.datePicker.format=g);var w=this._getRollFormat(b,"y"),E=this._getRollFormat(b,"M"),S=this._getRollFormat(b,"d");if(!this._isValidatePickerFormat(w)||!this._isValidatePickerFormat(E)||!this._isValidatePickerFormat(S))b=g.split(","),w=this._getRollFormat(b,"y"),E=this._getRollFormat(b,"M"),S=this._getRollFormat(b,"d"),this.options.pickers.datePicker.format=g;this.element.data("pickerDateYearFormat",w),this.element.data("pickerDateMonthFormat",E),this.element.data("pickerDateDayFormat",S),this.element.data("pickerMinYear",v),this.element.data("pickerMaxYear",m),this.element.data("pickerDateFormat",b)}if(this._isTimePickerShown()){c=c<a?a:c,h=h<a?a:h;var x=this._getDefaultTimePickerFormat(),T=this.options.pickers.timePicker.format!=undefined?this.options.pickers.timePicker.format:x,N=T.split(",");N.length!=3&&(N=x.split(","),this.options.pickers.timePicker.format=x);var C=this._getRollFormat(N,"h"),k=this._getRollFormat(N,"m"),L=this._getRollFormat(N,"t");if(!this._isValidatePickerFormat(C)||!this._isValidatePickerFormat(k)||!this._isValidatePickerFormat(L))N=x.split(","),C=this._getRollFormat(N,"h"),k=this._getRollFormat(N,"m"),L=this._getRollFormat(N,"t"),this.options.pickers.timePicker.format=x;this.element.data("pickerTimeHourFormat",C),this.element.data("pickerTimeMinuteFormat",k),this.element.data("pickerTimeAMFormat",L),this.element.data("pickerTimeFormat",N)}var A=this.options.pickers.width!=undefined?this.options.pickers.width:0,O=this.options.pickers.height!=undefined?this.options.pickers.height:0;A=A<c?c:A,O=O<h?h:O,O-=l>1?t:0;var M=O-r,_=Math.floor(M/5)+1,D=_*2,P=_*5+6,H=_*4-3,B=_*2+2,j=_;this.element.data("itemHeight",_),this.element.data("indicatorHeight",D),this.element.data("pickerWidth",A),this.element.data("pickerHeight",O),this.element.data("pickerAreaHeight",M),this.element.data("indicatorTranslateTop",P),this.element.data("indicatorTranslateDown",H),this.element.data("indicatorTranslateSelector",B),this.element.data("indicatorTranslateContent",j)},i.prototype._initListPicker=function(){var e=this;if(this._comboDiv!==undefined)return;this._comboDiv=n("<div/>").css({overflow:"hidden",display:"block",left:"",top:"",position:""});var r=this._normalize(this._getcomboItems());this._comboDiv.wijlist({maxItemsCount:5,autoSize:!0,selected:function(t,n){e.options.disableUserInput||e._setData(n.item.value);var r=e.element.data("pickers");r!=undefined&&r.wijpopup("hide"),e._trySetFocus()}}),this._comboDiv.wijlist("setItems",r),this._comboDiv.wijlist("renderList"),t.Utility.IsIE7()&&this._comboDiv.attr("align","left")},i.prototype._initCalendarPicker=function(){var t=this,r=this.element.data("calendar");if(r!=undefined)return;var i=this.options.calendar;if(i===undefined||i===null)return;if(typeof i=="boolean"||i==="default")i=n("<div/>");r=n(i);if(r.length!==1)return;this.element.data("calendar",r),this.options.localization&&(this.options.nextTooltip=this.options.localization.nextTooltip,this.options.prevTooltip=this.options.localization.prevTooltip,this.options.titleFormat=this.options.localization.titleFormat,this.options.toolTipFormat=this.options.localization.toolTipFormat),r.wijcalendar({popupMode:!0,culture:this.options.culture,nextTooltip:this.options.nextTooltip||"Next",prevTooltip:this.options.prevTooltip||"Previous",titleFormat:this.options.titleFormat||"MMMM yyyy",toolTipFormat:this.options.toolTipFormat||"dddd, MMMM dd, yyyy",selectedDatesChanged:function(){var n=r.wijcalendar("getSelectedDate"),i=t.option("date");e.prototype._wasPopupShowing=!1;var s=t.element.data("pickers");s!=undefined&&s.wijpopup("hide"),t._trigger("dropDownClose",null),n&&(i&&(n.setHours(i.getHours()),n.setMinutes(i.getMinutes()),n.setSeconds(i.getSeconds()),n.setMilliseconds(i.getMilliseconds())),t._allowEdit()&&(t.option("date",n),t.selectText())),t._trySetFocus()}}),r.css({display:"block",left:"",top:"",position:"","margin-bottom":"0px"}),this._syncCalendar(),this._updateCalendarPicker()},i.prototype._initTimePicker=function(){var e=this.element.data("timePicker");if(e!=undefined)return;var r=this,i=this.element.data("itemHeight")*5,s=this.element.data("pickerWidth"),o=this.element.data("itemHeight")+"px",u=this.element.data("indicatorHeight")+"px",a=this.element.data("indicatorTranslateTop"),f=this.element.data("indicatorTranslateDown"),l=this.element.data("indicatorTranslateSelector"),c=this.element.data("indicatorTranslateContent"),h=this._createDivElement(document.body,s+"px"),p=this._createDivIndicatiorElement(h,o,"",l),d=this._createTableElement(h,i+"px","-",c),v=n("<tr/>").appendTo(d),m=n("<td/>").css({width:"33%"}),g=this._createPickerDivElement(m,i),y=this._createMaskElement(g,i),b={};for(var w=1;w<=12;w++){var E=this._getRollText(w,this.element.data("pickerTimeHourFormat")),S=this._createItemElement(w,y,o,E);b[w-1]=S}var x=n("<td/>").css({width:"33%"}),T=this._createPickerDivElement(x,i),N=this._createMaskElement(T,i),C={};for(var w=0;w<60;w++){var E=this._getRollText(w,this.element.data("pickerTimeMinuteFormat")),S=this._createItemElement(w,N,o,E);C[w]=S}var k=n("<td/>").css({width:"34%"}),L=this._createPickerDivElement(k,i),A=this._createMaskElement(L,i),O={};for(var w=0;w<2;w++){var E=this._getRollText(w,this.element.data("pickerTimeAMFormat")),S=this._createItemElement(w,A,o,E);O[w]=S}var M=this.element.data("pickerTimeFormat"),_=!1,D=!1,P=!1;for(var w=0;w<M.length;w++)(M[w]=="h"||M[w]=="hh")&&!_&&(m.appendTo(v),_=!0),(M[w]=="m"||M[w]=="mm")&&!D&&(x.appendTo(v),D=!0),(M[w]=="t"||M[w]=="tt")&&!P&&(k.appendTo(v),P=!0);this.element.data("timePicker",h),this.element.data("divHour",g),this.element.data("divMinute",T),this.element.data("divAM",L),this.element.data("divHourMask",y),this.element.data("divMinuteMask",N),this.element.data("divAMMask",A),this.element.data("pickerHourArray",b),this.element.data("pickerMinuteArray",C),this.element.data("pickerAMArray",O);if(!t.Utility.IsIE8OrBelow()){var H=this._createIndicatiorElement(g,u,"-",a),B=this._createIndicatiorElement(g,u,"-",f),j=this._createIndicatiorElement(T,u,"-",a),F=this._createIndicatiorElement(T,u,"-",f),I=this._createIndicatiorElement(L,u,"-",a),q=this._createIndicatiorElement(L,u,"-",f);this.element.data("divHourIndicatorTop",H),this.element.data("divMinuteIndicatorTop",j),this.element.data("divAMIndicatorTop",I),this.element.data("divHourIndicatorDown",B),this.element.data("divMinuteIndicatorDown",F),this.element.data("divAMIndicatorDown",q)}this._initTimePickerEvent(),this._initTouchPickerEvent("Hour"),this._initTouchPickerEvent("Minute"),this._initTouchPickerEvent("AM")},i.prototype._initTimePickerEvent=function(){var e=this,t=this.element.data("divHour"),n=this.element.data("divMinute"),r=this.element.data("divAM");t.mousewheel(function(t,n){e._hourMouseWheel(t,n)}),n.mousewheel(function(t,n){e._minuteMouseWheel(t,n)}),r.mousewheel(function(t,n){e._amMouseWheel(t,n)})},i.prototype._initDatePicker=function(){var e=this.element.data("datePicker");if(e!=undefined)return;var r=this,i=this.element.data("pickerMinYear"),s=this.element.data("pickerMaxYear"),o=this.element.data("itemHeight")*5,u=this.element.data("pickerWidth"),a=this.element.data("itemHeight")+"px",f=this.element.data("indicatorHeight")+"px",l=this.element.data("indicatorTranslateTop"),c=this.element.data("indicatorTranslateDown"),h=this.element.data("indicatorTranslateSelector"),p=this.element.data("indicatorTranslateContent"),d=this._createDivElement(document.body,u+"px"),v=this._createDivIndicatiorElement(d,a,"",h),m=this._createTableElement(d,o+"px","-",p),g=n("<tr/>").appendTo(m),y="33%",b="33%",w="33%";this.element.data("pickerDateMonthFormat")=="MMMM"&&(y="30%",b="45%",w="25%");var E=n("<td/>").css({width:y}),S=this._createPickerDivElement(E,o),x=this._createMaskElement(S,o),T=new Array;for(var N=i;N<=s;N++){var C=this._getRollText(N,this.element.data("pickerDateYearFormat")),k=this._createItemElement(N,x,a,C);T[N-i]=k}var L=n("<td/>").css({width:b}),A=this._createPickerDivElement(L,o),O=this._createMaskElement(A,o),M={};for(var N=1;N<=12;N++){var C=this._getRollText(N,this.element.data("pickerDateMonthFormat")),k=this._createItemElement(N-1,O,a,C);M[N-1]=k}var _=n("<td/>").css({width:w}),D=this._createPickerDivElement(_,o),P=this._createMaskElement(D,o),H={};for(var N=1;N<=31;N++){var C=this._getRollText(N,this.element.data("pickerDateDayFormat")),k=this._createItemElement(N,P,a,C);H[N-1]=k}var B=this.element.data("pickerDateFormat"),j=!1,F=!1,I=!1;for(var N=0;N<B.length;N++)B[N]=="yyyy"&&!j&&(E.appendTo(g),j=!0),(B[N]=="M"||B[N]=="MM"||B[N]=="MMM"||B[N]=="MMMM")&&!F&&(L.appendTo(g),F=!0),(B[N]=="d"||B[N]=="dd")&&!I&&(_.appendTo(g),I=!0);this.element.data("datePicker",d),this.element.data("divYear",S),this.element.data("divMonth",A),this.element.data("divDay",D),this.element.data("divYearMask",x),this.element.data("divMonthMask",O),this.element.data("divDayMask",P),this.element.data("pickerYearArray",T),this.element.data("pickerMonthArray",M),this.element.data("pickerDayArray",H);if(!t.Utility.IsIE8OrBelow()){var q=this._createIndicatiorElement(S,f,"-",l),R=this._createIndicatiorElement(S,f,"-",c),U=this._createIndicatiorElement(A,f,"-",l),z=this._createIndicatiorElement(A,f,"-",c),W=this._createIndicatiorElement(D,f,"-",l),X=this._createIndicatiorElement(D,f,"-",c);this.element.data("divYearIndicatorTop",q),this.element.data("divMonthIndicatorTop",U),this.element.data("divDayIndicatorTop",W),this.element.data("divYearIndicatorDown",R),this.element.data("divMonthIndicatorDown",z),this.element.data("divDayIndicatorDown",X)}this._initDatePickerEvent(),this._initTouchPickerEvent("Year"),this._initTouchPickerEvent("Month"),this._initTouchPickerEvent("Day")},i.prototype._initDatePickerEvent=function(){var e=this,t=this.element.data("divYear"),n=this.element.data("divMonth"),r=this.element.data("divDay");t.mousewheel(function(t,n){e._yearMouseWheel(t,n)}),n.mousewheel(function(t,n){e._monthMouseWheel(t,n)}),r.mousewheel(function(t,n){e._dayMouseWheel(t,n)})},i.prototype._initTouchPickerEvent=function(e){var n=this.element.data("div"+e),r=this.element.data("div"+e+"Mask");this._addPickerTouchEvent(r,e);if(!t.Utility.IsIE8OrBelow()){var i=this.element.data("div"+e+"IndicatorTop"),s=this.element.data("div"+e+"IndicatorDown");this._addPickerTouchEvent(i,e),this._addPickerTouchEvent(s,e)}},i.prototype._addPickerTouchEvent=function(e,t){var n=this;e.bind("touchstart",function(e){n._touchStart(e,t),e.preventDefault()}).bind("touchmove",function(e){n._touchMove(e,t),e.preventDefault()}).bind("touchend",function(e){n._touchEnd(e,t),e.preventDefault()})},i.prototype._touchStart=function(e,t){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=n.clientY;this.element.data("touch"+t+"StartY",r),this.element.data("touch"+t+"BaseY",this.element.data("picker"+t+"ScrollCurrent")),this.element.data("touch"+t+"Started",!0),this.element.data("touchStartTime",new Date);var i=this.element.data("picker"+t+"ScrollCurrent");this.element.data("picker"+t+"ScrollTo",i)},i.prototype._touchMove=function(e,t){if(this.element.data("touch"+t+"Started")!=1)return;var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=n.clientY,i=this.element.data("touch"+t+"StartY"),s=this.element.data("touch"+t+"BaseY"),o=s+r-i;this._scrollTheViewByTouch(t,o)},i.prototype._touchEnd=function(e,t){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=this.element.data("touch"+t+"StartY"),i=this.element.data("touch"+t+"BaseY"),s=n.clientY-r,o=i+s;if(Math.abs(s)<10){var u=this.element.data("picker"+t+"ScrollCurrent");this.element.data("picker"+t+"ScrollTo",u),this._adjustTouchPosition(t,u);return}this.element.data("touch"+t+"StartY",-1),this.element.data("touch"+t+"BaseY",-1),this.element.data("touch"+t+"Started",!1);var a=new Date,f=a-this.element.data("touchStartTime");if(f<200){var l=this.element.data("itemHeight")*5,c=s<0?-1:1;s*=4,s=Math.abs(s)<l?c*l:s,o+=s,this.element.data("touchQuickScroll",!0),this.element.data("picker"+t+"ScrollRate",3)}this._adjustTouchPosition(t,o)},i.prototype._hourMouseWheel=function(e,t){if(isNaN(t))return;var n=this.element.data("pickerHour"),r=this.element.data("pickerHour"),i=r;r-=t,r=r<1?1:r,r=r>12?12:r;var s=this.element.data("pickerAM");r==12?s==0&&(s=1,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,0,!1),this.element.data("pickerAM",s)):i==12&&s==1&&(s=0,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,1,!1),this.element.data("pickerAM",s)),this._updateItemTransform("Hour",r-1),this._scrollTheView("Hour",r-1,n-1,!1),this.element.data("pickerHour",r),e.preventDefault&&e.preventDefault()},i.prototype._minuteMouseWheel=function(e,t){if(isNaN(t))return;var n=this.element.data("pickerMinute"),r=this.element.data("pickerMinute");r-=t,r=r<0?0:r,r=r>59?59:r,this._updateItemTransform("Minute",r),this._scrollTheView("Minute",r,n,!1),this.element.data("pickerMinute",r),e.preventDefault&&e.preventDefault()},i.prototype._amMouseWheel=function(e,t){if(isNaN(t))return;var r=n(e.currentTarget).data("pickerAM"),i=this.element.data("pickerAM");i-=t,i=i<0?0:i,i=i>1?1:i,this._updateItemTransform("AM",i),this._scrollTheView("AM",i,r,!1),this.element.data("pickerAM",i),e.preventDefault&&e.preventDefault()},i.prototype._yearMouseWheel=function(e,t){if(isNaN(t))return;var n=this.element.data("pickerMinYear"),r=this.element.data("pickerMaxYear"),i=this.element.data("pickerYear"),s=this.element.data("pickerYear");i-=t,i=i<n?n:i,i=i>r?r:i,this._updateItemTransform("Year",i-n),this._scrollTheView("Year",i-n,s-n,!1),this.element.data("pickerYear",i),this._updateDayPickerMaxCount(),e.preventDefault&&e.preventDefault()},i.prototype._monthMouseWheel=function(e,t){if(isNaN(t))return;var n=this.element.data("pickerMonth"),r=this.element.data("pickerMonth");n-=t,n=n<1?1:n,n=n>12?12:n,this._updateItemTransform("Month",n-1),this._scrollTheView("Month",n-1,r,!1),this.element.data("pickerMonth",n),this._updateDayPickerMaxCount(),e.preventDefault&&e.preventDefault()},i.prototype._dayMouseWheel=function(e,t){if(isNaN(t))return;var n=this.element.data("pickerDayMaxCount"),r=this.element.data("pickerDay"),i=this.element.data("pickerDay");i-=t,i=i<1?1:i,i=i>n?n:i,this._updateItemTransform("Day",i-1),this._scrollTheView("Day",i-1,r-1,!1),this.element.data("pickerDay",i),e.preventDefault&&e.preventDefault()},i.prototype._hourMouseDown=function(e,t){var r=this.element.data("pickerHour"),i=n(e.currentTarget).data("rollValue");this._scrollTheView("Hour",i,r,!1),this.element.data("pickerHour",i)},i.prototype._minuteMouseDown=function(e,t){var r=this.element.data("pickerMinute"),i=n(e.currentTarget).data("rollValue");this._scrollTheView("Minute",i,r,!1),this.element.data("pickerMinute",i)},i.prototype._amMouseDown=function(e,t){var r=n(e.currentTarget).data("pickerAM"),i=n(e.currentTarget).data("rollValue");this._scrollTheView("AM",i,r,!1),this.element.data("pickerAM",i)},i.prototype._yearMouseDown=function(e,t){var r=this.element.data("pickerMinYear"),i=n(e.currentTarget).data("rollValue"),s=this.element.data("pickerYear");this._scrollTheView("Year",i-r,s-r,!1),this.element.data("pickerYear",i),this._updateDayPickerMaxCount()},i.prototype._monthMouseDown=function(e,t){var r=this.element.data("pickerMonth"),i=n(e.currentTarget).data("rollValue");this._scrollTheView("Month",i,r,!1),this.element.data("pickerMonth",i),this._updateDayPickerMaxCount()},i.prototype._dayMouseDown=function(e,t){var r=this.element.data("pickerDay"),i=n(e.currentTarget).data("rollValue");this._scrollTheView("Day",i-1,r-1,!1),this.element.data("pickerDay",i)},i.prototype._updateCalendarPicker=function(){var e=this.element.data("calendar"),t=this.options.pickers;if(e==undefined||t==undefined)return;if(t.calendar==undefined)return;t.calendar.allowQuickPick!=undefined&&e.wijcalendar("option","allowQuickPick",t.calendar.allowQuickPick),t.calendar.navButtons!=undefined&&e.wijcalendar("option","navButtons",t.calendar.navButtons),t.calendar.nextTooltip!=undefined&&e.wijcalendar("option","nextTooltip",t.calendar.nextTooltip),t.calendar.prevTooltip!=undefined&&e.wijcalendar("option","prevTooltip",t.calendar.prevTooltip),t.calendar.showDayPadding!=undefined&&e.wijcalendar("option","showDayPadding",t.calendar.showDayPadding),t.calendar.showOtherMonthDays!=undefined&&e.wijcalendar("option","showOtherMonthDays",t.calendar.showOtherMonthDays),t.calendar.showTitle!=undefined&&e.wijcalendar("option","showTitle",t.calendar.showTitle),t.calendar.showWeekDays!=undefined&&e.wijcalendar("option","showWeekDays",t.calendar.showWeekDays),t.calendar.showWeekNumbers!=undefined&&e.wijcalendar("option","showWeekNumbers",t.calendar.showWeekNumbers),t.calendar.titleFormat!=undefined&&e.wijcalendar("option","titleFormat",t.calendar.titleFormat),t.calendar.toolTipFormat!=undefined&&e.wijcalendar("option","toolTipFormat",t.calendar.toolTipFormat),t.calendar.weekDayFormat!=undefined&&e.wijcalendar("option","weekDayFormat",t.calendar.weekDayFormat)},i.prototype._updateTimePicker=function(){var e=this.element.data("pickerHour")-1,t=this.element.data("pickerMinute"),n=this.element.data("pickerAM"),r=this.element.data("divHourMask"),i=this.element.data("divMinuteMask"),s=this.element.data("divAMMask");this._updateItemTransform("Hour",e),this._updateItemTransform("Minute",t),this._updateItemTransform("AM",n),this._scrollTheView("Hour",e,e,!0),this._scrollTheView("Minute",t,t,!0),this._scrollTheView("AM",n,n,!0),this.element.data("pickerHourScrollDelay",5),this.element.data("pickerMinuteScrollDelay",5),this.element.data("pickerAMScrollDelay",5),this.element.data("pickerHourScrollRate",1),this.element.data("pickerMinuteScrollRate",1),this.element.data("pickerAMScrollRate",1)},i.prototype._updateDatePicker=function(){var e=this.element.data("pickerMinYear"),t=this.element.data("pickerYear"),n=this.element.data("pickerMonth"),r=this.element.data("pickerDay"),i=u.DaysInMonth(t,n);this._updateItemTransform("Year",t-e),this._updateItemTransform("Month",n-1),this._updateItemTransform("Day",r-1),this._scrollTheView("Year",t-e,t-e,!0),this._scrollTheView("Month",n-1,n-1,!0),this._scrollTheView("Day",r-1,r-1,!0),this.element.data("pickerYearScrollDelay",5),this.element.data("pickerMonthScrollDelay",5),this.element.data("pickerDayScrollDelay",5),this.element.data("pickerYearScrollRate",1),this.element.data("pickerMonthScrollRate",1),this.element.data("pickerDayScrollRate",1),this._updateDayPickerMaxCount()},i.prototype._updateDayPickerMaxCount=function(){var e=this.element.data("pickerYear"),t=this.element.data("pickerMonth"),n=this.element.data("pickerDay"),r=u.DaysInMonth(e,t);this.element.data("pickerDayMaxCount",r);var i=this.element.data("pickerDayArray");for(var s=29;s<=31;s++){var o=s>r?"none":"";i[s-1].css("display",o)}if(n>r){var a=this.element.data("divDayMask");n=r,this._updateItemTransform("Day",n-1),this._scrollTheView("Day",n-1,null,!1),this.element.data("pickerDay",n)}},i.prototype._updateItemTransform=function(e,n){if(t.Utility.IsIE8OrBelow())return;if(n<0)return;var r=this.element.data("picker"+e+"Array"),i=this._getItemLength(e),s="skew(0deg) scale(1.2, 1.2) translate(0px, 0px)",o="skew(-5deg) scale(0.9, 0.9) translate(0px, 0px)",u="skew(-10deg) scale(0.7, 0.7) translate(0px, 0px)",a="skew(-15deg) scale(0.5, 0.5) translate(0px, 0px)";for(var f=0;f<i;f++)f==n-3?this._setCssTransform(r[f],"",a,!0):f==n-2?this._setCssTransform(r[f],"",u,!0):f==n-1?this._setCssTransform(r[f],"",o,!0):f==n?this._setCssTransform(r[f],"",s,!0):f==n+1?this._setCssTransform(r[f],"",o,!0):f==n+2?this._setCssTransform(r[f],"",u,!0):f==n+3?this._setCssTransform(r[f],"",a,!0):this._setCssTransform(r[f],"","",!0)},i.prototype._createDivElement=function(e,t){var e=n("<div/>").appendTo(e).css({width:t+"px",display:"block",left:"",top:"",position:""}).bind("touchstart",function(e){e.preventDefault()}).bind("touchmove",function(e){e.preventDefault()});return e},i.prototype._createTableElement=function(e,t,r,i){var s=n("<table/>").appendTo(e).css({width:"100%",height:t+"px"}).attr({cellspacing:"0px",cellpadding:"0px"});return this._setCssTransform(s,r,i,!1),s},i.prototype._createItemElement=function(e,t,r,i){var s=n("<div/>").appendTo(t).css({height:r,lineHeight:r,cursor:"default"}).html(i).data("rollValue",e);return s},i.prototype._createPickerDivElement=function(e,t){var r=n("<div/>").appendTo(e).css({height:t,border:"0px","text-align":"center",overflow:"hidden",background:"transparent"});return r},i.prototype._createMaskElement=function(e,t){var r=n("<div/>").appendTo(e).css({height:t});return r},i.prototype._createDivIndicatiorElement=function(e,t,r,i){var s=n("<div/>").appendTo(e).css({height:t,opacity:"0.5",lineHeight:t,margin:"0px",cursor:"default"}).attr("class","ui-state-active");return this._setCssTransform(s,r,i,!1),s},i.prototype._createIndicatiorElement=function(e,t,r,i){var s=n("<div/>").appendTo(e).css({height:t,opacity:"0.5",lineHeight:t,"border-width":"0px",cursor:"default"}).attr("class","ui-widget-content");return this._setCssTransform(s,r,i,!1),s},i.prototype._hideItemInIE7=function(e,n){if(!t.Utility.IsIE7())return;var r=this.element.data("picker"+e+"LastItemIndex"),i=this._getItemIndexByPosition(e,n);if(i==r)return;var s=i-2,o=i+2,u=this.element.data("picker"+e+"Array"),a=this._getItemLength(e);for(var f=0;f<a;f++)f>=s&&f<=o?u[f].css("visibility",""):u[f].css("visibility","hidden");this.element.data("picker"+e+"LastItemIndex",i)},i.prototype._okButtonMouseDown=function(t,n){var r=this.element.data("pickerYear"),i=this.element.data("pickerMonth")-1,s=this.element.data("pickerDay"),o=this.element.data("pickerHour"),u=this.element.data("pickerMinute"),a=this.element.data("pickerAM");o==12&&(o=0),a==1&&(o+=12);var f=this._getPickerValue();f.setFullYear(r),f.setMonth(i),f.setDate(s),f.setHours(o),f.setMinutes(u),e.prototype._wasPopupShowing=!1;var l=this.element.data("pickers");l!=undefined&&l.wijpopup("hide"),this._trigger("dropDownClose",null),this._allowEdit()&&(this.option("date",f),this.selectText()),this._trySetFocus()},i.prototype._getCorrentPickerFormat=function(e){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(e[n].index<e[t].index){var r=e[t];e[t]=e[n],e[n]=r}var i="";for(var t=0;t<e.length;t++)i+=e[t].value,t<e.length-1&&(i+=",");return i},i.prototype._getDefaultDatePickerFormat=function(){var e=this._getCulture();if(e==null)return"yyyy,M,d";var t=e.calendars.standard,n=t.patterns.d,r={index:n.indexOf("y"),value:"yyyy"},i={index:n.indexOf("M"),value:"MM"},s={index:n.indexOf("d"),value:"dd"};if(r.index==-1||i.index==-1||s.index==-1)return"yyyy,M,d";var o=new Array;return o[0]=r,o[1]=i,o[2]=s,this._getCorrentPickerFormat(o)},i.prototype._getDefaultTimePickerFormat=function(){if(this.options.culture.length>=2){var e=this.options.culture.substr(0,2);if(e=="ja"||e=="zh")return"tt,hh,mm"}return"hh,mm,tt"},i.prototype._getListPickerWidth=function(){var e=this._getcomboWidth(),t=this.element.data("pickerWidth"),n=e!=undefined?e:this.outerDiv.width();return t>n?t+"px":n+"px"},i.prototype._getDatePickerMinYear=function(){var e=this._isEraFormatExist()?this._getRealEraMinDate():this._getRealMinDate(),t=e.getFullYear(),n=this._getPickerValue(),r=this._max(n.getFullYear()-50,t);return r},i.prototype._getDatePickerMaxYear=function(){var e=this._isEraFormatExist()?this._getRealEraMaxDate():this._getRealMaxDate(),t=e.getFullYear(),n=this._getPickerValue(),r=this._min(n.getFullYear()+50,t);return r},i.prototype._getPickerValue=function(){var e=this.options.date;return e=e==null?new Date:e,e},i.prototype._getRollFormat=function(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)!=-1)return e[n];return""},i.prototype._getRollText=function(e,t){var n=this._getCulture(),r="";switch(t){case"M":case"h":r=e.toString();break;case"MM":case"hh":r=e<10?"0"+e.toString():e.toString();break;case"m":case"d":case"yyyy":r=e.toString();break;case"mm":case"dd":r=e<10?"0"+e.toString():e.toString();break;case"t":r=e==0?this._getStandardAMPM("AM"):this._getStandardAMPM("PM"),r=r.substr(0,1);break;case"tt":r=e==0?this._getStandardAMPM("AM"):this._getStandardAMPM("PM");break;case"MMM":r=n.calendars.standard.months.namesAbbr[e-1];break;case"MMMM":r=n.calendars.standard.months.names[e-1];break;default:}return r},i.prototype._getStandardAMPM=function(e){var t=this._getCulture();if(t&&t.calendar){var n=t.calendars.standard[e];if(n)return n[0]}return e},i.prototype._getItemIndexByPosition=function(e,t){var n=this._getTouchPositionArray(e),r=this._getItemLength(e);e=="Day"&&r>this.element.data("pickerDayMaxCount")&&(r=this.element.data("pickerDayMaxCount"));var i=-1;for(var s=0;s<r;s++){if(s==0){if(t>n[s]){i=0;break}}else if(t<=n[s-1]&&t>=n[s]){var o=n[s-1]-t,u=t-n[s];i=o>u?s:s-1;break}if(s==r-1&&t<n[s]){i=s;break}}return i},i.prototype._getItemLength=function(e){switch(e){case"Hour":case"Month":return 12;case"Year":var t=this.element.data("pickerMinYear"),n=this.element.data("pickerMaxYear");return n-t+1;case"Day":return 31;case"Minute":return 60;case"AM":return 2}return-1},i.prototype._getTouchPositionArray=function(e){var t={},n=this.element.data("itemHeight"),r=this._getItemLength(e);for(var i=0;i<r;i++)t[i]=(2-i)*n;return t},i.prototype._adjustTouchPosition=function(e,t){var n=this._getTouchPositionArray(e),r=this._getItemIndexByPosition(e,t),i=this._itemIndexToValue(e,r);this.element.data("picker"+e,i),this._scrollTheViewByTouch(e,n[r])},i.prototype._itemIndexToValue=function(e,t){switch(e){case"Minute":case"AM":return t;case"Hour":case"Month":case"Day":return t+1;case"Year":var n=this.element.data("pickerMinYear");return n+t}return-1},i.prototype._scrollTheView=function(e,t,n,r){var i=this.element.data("itemHeight"),s=(2-t)*i;this.element.data("picker"+e+"ScrollTo",s);if(r==1){var o=this.element.data("div"+e+"Mask"),u=s;this._setCssTransform(o,"",u,!1),this._hideItemInIE7(e,u),this.element.data("picker"+e+"ScrollCurrent",u)}else this._scrollPicker(e)},i.prototype._scrollPicker=function(e){var t=this.element.data("div"+e+"Mask"),n=this.element.data("picker"+e+"ScrollTo"),r=this.element.data("picker"+e+"ScrollCurrent"),i=this.element.data("picker"+e+"ScrollDelay");r==undefined&&(r=n,this._setCssTransform(t,"",r,!1),this.element.data("picker"+e+"ScrollCurrent",r));if(n==r||r==undefined)return!1;r+=n>r?1:-1;var s="translate(0,"+r+"px) ";this._setCssTransform(t,"",r,!1),this._hideItemInIE7(e,r),this.element.data("picker"+e+"ScrollCurrent",r);var o=this;return setTimeout(function(){o._scrollPicker(e)},i),!0},i.prototype._scrollTheViewByTouch=function(e,t){var n=this.element.data("itemHeight"),r=this.element.data("picker"+e+"ScrollCurrent"),i=this.element.data("picker"+e+"ScrollTo");this.element.data("picker"+e+"ScrollTo",t),this._scrollPickerByTouch(e)},i.prototype._setCssTransform=function(e,n,r,i){var s=r;i||(s="translate(0, "+n+r+"px)"),e.css("position",""),e.css("top",""),t.Utility.IsIE8OrBelow()?(e.css("position","relative"),e.css("top",n+r+"px")):t.Utility.IsIE9()?e.css("-ms-transform",s):e.css("transform",s)},i.prototype._scrollPickerByTouch=function(e){var t=this.element.data("div"+e+"Mask"),n=this.element.data("picker"+e+"ScrollTo"),r=this.element.data("picker"+e+"ScrollCurrent");r==undefined&&(r=n,this._setCssTransform(t,"",r,!1),this.element.data("picker"+e+"ScrollCurrent",r));if(n==r){this.element.data("picker"+e+"ScrollRate",1),this.element.data("picker"+e+"ScrollDelay",5),this.element.data("touchQuickScroll",!1);if(e=="Month"||e=="Year")this._updateDayPickerMaxCount();else if(e=="Hour"){var i=this._getItemIndexByPosition(e,r),s=this.element.data("pickerAM");i==11?s==0&&(s=1,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,0,!1),this.element.data("pickerAM",s)):s==1&&(s=0,this._updateItemTransform("AM",s),this._scrollTheView("AM",s,1,!1),this.element.data("pickerAM",s))}return!1}var o=this.element.data("itemHeight"),u=this.element.data("picker"+e+"ScrollDelay"),a=this.element.data("picker"+e+"ScrollRate"),f=Math.abs(n-r),l=f>a?a:f;this.element.data("touchQuickScroll")==1&&(f<o?u=80:f<o*2?u=50:f<o*5?u=30:f<o*8?u=20:f<o*10&&(u=10),this.element.data("picker"+e+"ScrollDelay",u)),r+=n>r?l:-1*l,this._setCssTransform(t,"",r,!1),this.element.data("picker"+e+"ScrollCurrent",r);var i=this._getItemIndexByPosition(e,r),c=this.element.data("picker"+e+"LastItemIndex");i!=c&&this._updateItemTransform(e,i),this.element.data("picker"+e+"LastItemIndex",c);var h=this;return setTimeout(function(){h._scrollPickerByTouch(e)},u),!0},i.prototype._syncCalendar=function(){var e=this.element.data("calendar");if(!e)return;var t=this._safeGetDate();if(t==null||this._isMinDate(t))t=new Date;e.wijcalendar("option","displayDate",t),this.options.minDate&&e.wijcalendar("option","minDate",this.options.minDate),this.options.maxDate&&e.wijcalendar("option","maxDate",this.options.maxDate),e.wijcalendar("unSelectAll"),e.wijcalendar("selectDate",t),e.wijcalendar("refresh")},i.prototype._showPopup=function(){if(!this._allowEdit())return!1;this._isDatePickerNeedReInit()&&this._reInitPicker();var e=this.element.data("pickers");if(e==undefined)return!1;e.wijpopup("show",n.extend({},this.options.popupPosition,{of:this.outerDiv}));var t=this._getPickerValue(),r=t.getHours();r>12?r-=12:r==0&&(r=12),this.element.data("pickerValue",t),this.element.data("pickerYear",t.getFullYear()),this.element.data("pickerMonth",t.getMonth()+1),this.element.data("pickerDay",t.getDate()),this.element.data("pickerHour",r),this.element.data("pickerMinute",t.getMinutes()),this.element.data("pickerAM",t.getHours()<12?0:1),this.element.data("divOK").css("visibility",""),this._isTimePickerShown()&&(this._updateTimePicker(),e.attr({"class":"ui-widget-content ui-corner-all"})),this._isDatePickerShown()&&(this._updateDatePicker(),e.css({"font-size":"12px"}).attr({"class":"ui-widget-content ui-corner-all"}));if(this._isListPickerShown()){this._getPickerCount()==1&&(e.attr({"class":""}),this._comboDiv.focus());if(this.element.data("pickerCurrentTab")=="List"){var i=this._getListPickerWidth();e.css({width:i,height:""}),e.css({"font-size":""});var s=this._comboDiv[0].parentElement;this._comboDiv.wijlist("destroy"),this._comboDiv.remove(),delete this._comboDiv,this._initListPicker(),this._comboDiv.appendTo(s),this._comboDiv.focus()}}return this._isCalendarPickerShown()&&(this._syncCalendar(),this.element.data("pickerCurrentTab")=="Calendar"&&(this._getPickerCount()<=1&&e.css({width:""}).attr({"class":""}),e.css({"font-size":""}))),!0},i.prototype._hidePopup=function(){var e=this.element.data("pickers");e!=undefined&&e.wijpopup("hide"),this.element.data("divOK").css("visibility","hidden")},i.prototype._popupVisible=function(){var e=this.element.data("pickers");return e!=undefined?e.wijpopup("isVisible"):!1},i.prototype._isComboListVisible=function(){return this._popupVisible()},i.prototype._isValidDate=function(e,t){if(e===undefined)return!1;if(isNaN(e))return!1;if(e.getFullYear()<1||e.getFullYear()>9999)return!1;if(t){if(this.options.minDate&&e<this.options.minDate)return!1;if(this.options.maxDate&&e>this.options.maxDate)return!1}return!0},i.prototype._isValidatePickerFormat=function(e){switch(e){case"yyyy":case"M":case"MM":case"MMM":case"MMMM":case"d":case"dd":case"h":case"hh":case"m":case"mm":case"t":case"tt":return!0}return!1},i.prototype._isDatePickerNeedReInit=function(){if(!this._isDatePickerShown())return!1;var e=this.element.data("pickerMinYear"),t=this.element.data("pickerMaxYear"),n=this._getPickerValue().getFullYear();if(n<e||n>t)return!0;var r=this._isEraFormatExist()?this._getRealEraMinDate().getFullYear():this._getRealMinDate().getFullYear(),i=this._isEraFormatExist()?this._getRealEraMaxDate().getFullYear():this._getRealMaxDate().getFullYear();return e<r||t>i?!0:!1},i.prototype._isDropDownButtonShown=function(){return this.options.showDropDownButton},i.prototype._isCalendarPickerShown=function(){return this.options.pickers.calendar!=undefined&&this.options.pickers.calendar.visible!==!1||this._getPickerCount()==0},i.prototype._isListPickerShown=function(){var e=this._getcomboItems();return e!=undefined&&e.length!=undefined?e.length>0:!1},i.prototype._isTimePickerShown=function(){return this.options.pickers.timePicker!=undefined&&this.options.pickers.timePicker.visible!==!1},i.prototype._isDatePickerShown=function(){return this.options.pickers.datePicker!=undefined&&this.options.pickers.datePicker.visible!==!1},i.prototype._getPickerCount=function(){var e=0,t=this.options.pickers.calendar!=undefined&&this.options.pickers.calendar.visible!==!1;return e+=t?1:0,e+=this._isListPickerShown()?1:0,e+=this._isTimePickerShown()?1:0,e+=this._isDatePickerShown()?1:0,e},i.prototype._addPickerEditor=function(e,t,r){var i=n("<div/>").attr({id:r,align:"center"}).css({padding:"0px"}).append(t).appendTo(e)},i.prototype._addPickerTab=function(e,t,r){var i=n("<li/>").appendTo(e).css("line-height","1px"),s=n("<a/>").attr("href",r).html(t).appendTo(i)},i.prototype.selectText=function(t,n){typeof t=="undefined"&&(t=0),typeof n=="undefined"&&(n=this.getText().length);if(this.isFocused())e.prototype.selectText.call(this,t,n);else{this.focus();var r=this;setTimeout(function(){r.selectText(t,n)},0)}},i}(t.wijinputcore);t.wijinputdate=s;var o=function(){function e(){this.wijCSS={wijinputdate:t.wijinputcore.prototype.options.wijCSS.wijinput+"-date"},this.date=undefined,this.minDate=null,this.maxDate=null,this.dateFormat="d",this.displayFormat="",this.amDesignator="",this.pmDesignator="",this.midnightAs0=!0,this.hour12As0=!1,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.tabAction="field",this.startYear=1950,this.smartInputMode=!1,this.activeField=0,this.keyDelay=800,this.autoNextField=!0,this.calendar="default",this.popupPosition={offset:"0 4"},this.imeMode="auto",this.showDropDownButton=!0,this.showTrigger=undefined,this.pickers={list:undefined,width:undefined,height:undefined,calendar:undefined,datePicker:undefined,timePicker:undefined},this.dateChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null}return e}();s.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new o),n.wijmo.registerWidget("wijinputdate",s.prototype);var u=function(){function e(){}return e.EraDates=new Array(new Date(1868,8,8),new Date(1912,6,30),new Date(1926,11,25),new Date(1989,0,8)),e.EraCount=4,e.EraYears=new Array(45,15,64,99),e.EraMax=new Date(2087,11,31,23,59,59),e.EraMin=new Date(1868,8,8),e.EraKeys=new Array("1","2","3","4","m","t","s","h"),e.EraIndices=new Array(0,1,2,3,0,1,2,3),e.DateLongFormat="yyyyMMddHHmmss",e.EraNames=new Array("M","T","S","H","明","大","昭","平","明治","大正","昭和","平成"),e.WeekDays=new Array("日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"),e.MonthNames=new Array("1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"),e.ShortWeekDays=new Array("日","月","火","水","木","金","土"),e.ShortMonthNames=new Array("1","2","3","4","5","6","7","8","9","10","11","12"),e.RokuyouTextArray=new Array("先勝","友引","先負","仏滅","大安","赤口"),e.RokuyouTextArrayEn=new Array("Senshou","Tomobiki","Senbu","Butsumetsu","Taian","Shakkou"),e.DefaultTwoDigitYear=2029,e.Digits=2,e.EraYearMax=99,e.RokuyouMin=new Date(1960,0,28),e.RokuyouMax=new Date(2050,0,22),e.LunarInfo=new Array(44710,43856,19808,43748,42352,21104,29283,55632,27479,22176,39632,19925,19168,42208,54484,53840,54680,46400,54944,103846,38320,18864,43444,42160,45690,27216,27968,46934,11104,38320,19317,18800,25776,29859,59984,28056,21968,11104,38629,37600,51552,59732,54432,55888,30034,22208,43959,9680,37584,51893,43344,46240,111779,46416,21977,19360,42416,21877,21168,43344,47444,27296,44368,27474,19296,42726,42352,21104,27237,55600,23200,46755,38608,19415,19168,42192,118998,53840,54560,56645,46752,38608,21938,18864,42359,42160,45648,111189,27968,44448),e.IsValidEraDate=function(t){return t<this.GetEraMin()||t>this.GetEraMax()?!1:!0},e.ConvertToGregorianYear=function(t,n,r){return t<0||t>=this.GetEraCount()||n<1||r&&n>this.GetEraYears()[t]?-1:this.GetEraDates()[t].getFullYear()+n-1},e.GetEraDates=function(){if(window.eras!=undefined){var t=new Array;for(var n=0;n<window.eras.length;n++){var r=new Date(window.eras[n].startDate.replace(/-/g,"/"));t[n]=r}return t}return this.EraDates},e.GetEraNames=function(){var t=new Array;if(window.eras!=undefined){for(var n=0;n<window.eras.length;n++)t[n]=window.eras[n].name;return t}for(var n=0;n<this.EraCount;n++)t[n]=this.EraNames[n+2*this.EraCount];return t},e.GetEraSymbols=function(){var t=new Array;if(window.eras!=undefined){for(var n=0;n<window.eras.length;n++)t[n]=window.eras[n].symbol;return t}for(var n=0;n<this.EraCount;n++)t[n]=this.EraNames[n];return t},e.GetEraAbbreviations=function(){var t=new Array;if(window.eras!=undefined){for(var n=0;n<window.eras.length;n++)t[n]=window.eras[n].abbreviation;return t}for(var n=0;n<this.EraCount;n++)t[n]=this.EraNames[n+this.EraCount];return t},e.GetEraShortNames=function(){var t=new Array;if(window.eras!=undefined){for(var n=0;n<window.eras.length;n++)t[n]=window.eras[n].shortcuts.split(",")[1];return t}for(var n=0;n<this.EraCount;n++)t[n]=this.EraNames[n];return t},e.GetEraShortcuts=function(){var t=new Array;if(window.eras!=undefined){for(var n=0;n<window.eras.length;n++)t[n]=window.eras[n].shortcuts.split(",")[0];return t}for(var n=0;n<this.EraCount;n++)t[n]=this.EraKeys[n];return t},e.GetEraMax=function(){if(window.eras!=undefined&&window.eras.length>0){var t=new Date(window.eras[window.eras.length-1].startDate.replace(/-/g,"/"));return t.setFullYear(t.getFullYear()+99),t}return this.EraMax},e.GetEraMin=function(){if(window.eras!=undefined&&window.eras.length>0){var t=new Date(window.eras[0].startDate.replace(/-/g,"/"));return t}return this.EraMin},e.GetEraCount=function(){return window.eras!=undefined?window.eras.length:this.EraCount},e.GetEraYears=function(){if(window.eras!=undefined){var t=new Array;for(var n=1;n<window.eras.length;n++){var r=new Date(window.eras[n-1].startDate.replace(/-/g,"/")),i=new Date(window.eras[n].startDate.replace(/-/g,"/"));t[n-1]=i.getFullYear()-r.getFullYear()+1}return t[n-1]=99,t}return this.EraYears},e.ConvertToGregorianDate=function(t,n,r,i,s,o,u,a){var f=this.ConvertToGregorianYear(t,n,a);if(f<1||f>9999)return null;if(r<1||r>12)return null;var l=this.DaysInMonth(f,r);if(i<1||i>l)return null;if(s<0||s>23)return null;if(o<0||o>59)return null;if(u<0||u>59)return null;var c=new Date(f,r-1,i,s,o,u);if(a){var h=this.GetEraDates()[t],p=t+1!=this.GetEraCount()?this.AddMilliseconds(this.GetEraDates()[t+1],-1):this.GetEraMax();if(c<h||c>p)return null}return c},e.String2Date=function(t){if(t==null||t.Length==0)return null;var n=new Date(Date.parse(t));return n},e.Date2String=function(n,r,i,s){var o="";try{r==1?i==1?o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate():s==1?o=n.getHours()+":"+t.Utility.ToString(n.getMinutes(),2,"0")+":"+t.Utility.ToString(n.getSeconds(),2,"0"):o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+n.getHours()+":"+t.Utility.ToString(n.getMinutes(),2,"0")+":"+t.Utility.ToString(n.getSeconds(),2,"0"):i==1?o=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear():s==1?o=n.getHours()+":"+t.Utility.ToString(n.getMinutes(),2,"0")+":"+t.Utility.ToString(n.getSeconds(),2,"0"):o=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()+" "+n.getHours()+":"+t.Utility.ToString(n.getMinutes(),2,"0")+":"+t.Utility.ToString(n.getSeconds(),2,"0")}catch(u){o=""}return o},e.Date2Long=function(t){try{return(t.getFullYear()*100+t.getMonth()+1)*100+t.getDate()}catch(n){return 0}},e.Date2Number=function(t){return t==null?0:((((t.getFullYear()*100+t.getMonth()+1)*100+t.getDate())*100+t.getHours())*100+t.getMinutes())*100+t.getSeconds()},e.Long2Date=function(t){return new Date(Math.floor(t/1e4),Math.floor(t%1e4/100)-1,t%100)},e.GetEraDate=function(t){var n=new Object;n.era=-1,n.eraYear=-1;if(!this.IsValidEraDate(t))return n;for(var r=0;r<this.GetEraCount();r++){var i=r+1!=this.GetEraCount()?this.GetEraDates()[r+1]:this.AddMilliseconds(this.GetEraMax(),1);if(t<i){n.era=r,n.eraYear=t.getFullYear()-this.GetEraDates()[r].getFullYear()+1;break}}return n},e.MakeDate=function(t,n,r,i){var s=new Date;return s=this.ConvertToGregorianDate(t,n,r,i,0,0,0,!0),s==null?-1:s},e.GetValidMonthRange=function(t,n){var r={};return r.min=1,r.max=12,t==-1||n==-1?r:(n==1?r.min=this.GetEraDates()[t].getMonth()+1:n==this.EraYears[t]&&t<this.EraCount-1&&(r.max=this.AddMilliseconds(this.GetEraDates()[t+1],-1).getMonth()+1),r)},e.GetValidDayRange=function(t,n,r){var i=new Object;i.min=1,i.max=this.DaysInMonth(this.ConvertToGregorianYear(t,n,!0),r);var s=this.GetEraDates()[t],o=t<this.GetEraCount()-1?this.AddMilliseconds(this.GetEraDates()[t+1],-1):this.GetEraMax();return t==-1||n==-1?i:(n==1&&r==s.getMonth()+1?i.min=s.getDate():n==this.EraYears[t]&&r==o.getMonth()+1&&(i.max=o.getDate()),i)},e.IsLeapYear=function(t){return t%400==0||t%4==0&&t%100!=0?!0:!1},e.DayOfYear=function(t,n,r){var i=0;for(var s=1;s<n;s++)i+=this.DaysInMonth(t,s);return i+=r,i},e.DaysInMonth=function(t,n){if(n>12)t+=Math.floor(n/12),n%=12;else if(n<0){var r=n*-1;t-=Math.ceil(r/12),n=12-r%12}switch(n){case 2:return this.IsLeapYear(t)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},e.Equal=function(t,n,r){if(t==null&&n==null)return!0;if(t==null)return!1;if(n==null)return!1;try{return r?t.getFullYear()==n.getFullYear()&&t.getMonth()==n.getMonth()&&t.getDate()==n.getDate()&&t.getHours()==n.getHours()&&t.getMinutes()==n.getMinutes()&&t.getSeconds()==n.getSeconds()?!0:!1:t.getFullYear()==n.getFullYear()&&t.getMonth()==n.getMonth()&&t.getDate()==n.getDate()?!0:!1}catch(i){return!1}},e.YearMonthEqual=function(t,n){if(t==null&&n==null)return!0;if(t==null)return!1;if(n==null)return!1;try{return t.getFullYear()==n.getFullYear()&&t.getMonth()==n.getMonth()?!0:!1}catch(r){return!1}},e.SetDate=function(t,n,r){var i=new Date,s=12e4;if(t*12+n>s)i=new Date(9999,11,31);else if(t*12+n<100)i=new Date(100,0,1);else{var o=this.DaysInMonth(t,n);r>o&&(r=o),i=new Date(t,n-1,r)}return i},e.SetFullDate=function(t,n,r){var i=new Date;i.setDate(1);var s=12e4,o=this.DaysInMonth(t,n);return n>0&&n<12&&r>o&&(r=o),i.setFullYear(t),i.setMonth(n-1),i.setDate(r),i},e.SetFullDateByDate=function(t){var n=new Date;return n.setDate(1),n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth()),n.setDate(t.getDate()),n.setHours(0,0,0,0),n},e.LYearDays=function(t){var n,r=348;for(n=32768;n>8;n>>=1)r+=this.LunarInfo[t-1960]&n?1:0;return r+this.leapDays(t)},e.leapDays=function(t){return this.LeapMonth(t)?this.LunarInfo[t-1960]&65536?30:29:0},e.LeapDays=function(t){return this.LeapMonth(t)?this.LunarInfo[t-1960]&65536?30:29:0},e.LeapMonth=function(t){return this.LunarInfo[t-1960]&15},e.MonthDays=function(t,n){return this.LunarInfo[t-1960]&65536>>n?30:29},e.GetRokuyou=function(t){if(t-this.RokuyouMin<0||t-this.RokuyouMax>0)return;var n,r=0,i=0,s=new Date(1960,0,28),o=Math.round((t-s)/864e5);for(n=1960;n<2050&&o>0;n++)i=this.LYearDays(n),o-=i;o<0&&(o+=i,n--),this.year=n,r=this.LeapMonth(n),this.isLeap=!1;for(n=1;n<13&&o>0;n++)r>0&&n==r+1&&this.isLeap==0?(--n,this.isLeap=!0,i=this.LeapDays(this.year)):i=this.MonthDays(this.year,n),this.isLeap==1&&n==r+1&&(this.isLeap=!1),o-=i;o==0&&r>0&&n==r+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--n)),o<0&&(o+=i,--n),this.month=n,this.day=o+1;var u=(this.month+this.day-2)%6,a=new Date(1996,6,15),f=new Date(1996,7,13);this.IsDateInRange(t,a,f)&&(u=(6+u-1)%6);var l=new Date(1996,8,12),c=new Date(1996,9,11);this.IsDateInRange(t,l,c)&&(u=(6+u-1)%6);var h=new Date(2033,7,25),p=new Date(2033,11,21);this.IsDateInRange(t,h,p)&&(u=(u+1)%6),this.Equal(t,a)&&(u=(6+u-1)%6),this.Equal(t,l)&&(u=(6+u-1)%6);var d;return d},e.IsDateInRange=function(t,n,r){var i=t.getYear(),s=n.getYear(),o=r.getYear(),u=t.getMonth(),a=n.getMonth(),f=r.getMonth(),l=t.getDate(),c=n.getDate(),h=r.getDate(),p=i*1e4+u*100+l,d=s*1e4+a*100+c,v=o*1e4+f*100+h;return p>=d&&p<=v},e.GetRokuyouText=function(t){var n=new Array;n=this.RokuyouTextArray.slice(0);switch(t){default:return""}},e.DaysInSpecialWeek=function(t,n,r){var i=new Array,s=this.DaysInMonth(t,n+1),o=new Date(t,n,1),u;for(var a=1;a<=s;a++){o.setDate(a);if(o.getDay()==r){var f=new Date(t,n,a);i.push(f),u=a;break}}u+=7;while(u<=s){o.setDate(u);var l=new Date(t,n,u);i.push(l),u+=7}return i},e.GetDaysByFirstWeekday=function(t){var n=new Array;n.push(t);var r=new Date(t);while(r.getDate()+7<=this.DaysInMonth(t.getFullYear(),t.getMonth()+1))r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+7),n.push(r);return n},e.AddMilliseconds=function(t,n){var r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());return r.setMilliseconds(r.getMilliseconds()+n),new Date(r.valueOf())},e.GetWeekIndexByDate=function(t){return Math.floor(t.getDate()/7)},e}();t.DateTimeInfo=u;var a=function(e){function r(t,n,r){e.call(this),this.inputWidget=t,this.maskPartsCount=0,this.pattern="M/d/yyyy",this.displayPattern="M/d/yyyy",this._disableSmartInputMode=!1,this.paddingZero=i,this.descriptors=new Array(0),this.desPostions=new Array(0),this.fields=new Array(0),this.displayDescriptors=new Array(0),this.displayDesPostions=new Array(0),this.displayFields=new Array(0),this._setFormat(n),r=r==""?n:r,this._setDisplayFormat(r)}return __extends(r,e),r.prototype.initialize=function(){},r.prototype.getFiledText=function(e){var t=this.fields[e];return t.getText()},r.prototype.getFieldCount=function(){return this.fields.length},r.prototype.getFieldRange=function(e){e>=this.fields.length&&(e=this.fields.length-1);var t=this.fields[e];return{start:t.startIndex,end:t.startIndex+t.getText().length}},r.prototype.getCursorField=function(e){if(this.desPostions.length==0)return 0;e=Math.min(e,this.desPostions.length-1),e=Math.max(e,0);var t=this.desPostions[e].desc,r;if(t.type===-1){r=n.inArray(t,this.descriptors);if(!(r>0&&this.descriptors[r-1].type!==-1))return-1;t=this.descriptors[r-1]}return n.inArray(t,this.fields)},r.prototype.needToMove=function(e,t,n){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),!0))return!1;var r=this.fields[e];switch(r.type){case 72:case 73:case 74:for(var i=0;i<u.GetEraCount();i++)if(n.toLowerCase()===u.GetEraShortcuts()[i].toLowerCase()||n.toLowerCase()===u.GetEraShortNames()[i].toLowerCase()||n.toLowerCase()===u.GetEraAbbreviations()[i].toLowerCase()||n.toLowerCase()===u.GetEraNames()[i].toLowerCase())return!0;return!1}var s=parseInt(n,10);if(t===r.maxLen)return!0;if(isNaN(s))return!1;var o=this.inputWidget.element.data("lastInputChar");switch(r.type){case 10:return this._isSmartInputMode()&&t===2;case 20:case 25:case 45:case 46:return o=="0"&&s==1?!0:s>1;case 47:case 48:return o=="0"&&s<=2?!0:s>2;case 30:case 31:return o=="0"&&s<=3?!0:s>3;case 50:case 51:case 60:case 61:return o=="0"&&s<=6?!0:s>6;case 70:case 71:return!1}return!1},r.prototype._isEraFormatExist=function(){for(var e=0;e<this.descriptors.length;e++)if(this.descriptors[e].type>=70&&this.descriptors[e].type<=74)return!0;return!1},r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype._isDigitString=function(e){e=n.trim(e);if(e.length===0)return!0;var t=e.charAt(0),r,i;if(t==="+"||t==="-")e=e.substr(1),e=n.trim(e);if(e.length===0)return!0;try{return r=parseFloat(e),i=r.toString(),i===e}catch(s){return!1}},r.prototype._setFormat=function(e){var t=this.inputWidget._getCulture();if(t==null)return;this.pattern=this._parseFormatToPattern(e),this.descriptors=this._parseFormat(this.pattern),this.fields=n.grep(this.descriptors,function(e){return e.type!==-1})},r.prototype._setDisplayFormat=function(e){var t=this.inputWidget._getCulture();if(t==null)return;this.displayPattern=this._parseFormatToPattern(e),this.displayDescriptors=this._parseFormat(this.displayPattern),this.displayFields=n.grep(this.descriptors,function(e){return e.type!==-1})},r.prototype._parseFormat=function(e){var t=[],n="",r="",i=!1,s=!1,o,u;for(o=0;o<e.length;o++){u=e.charAt(o);if(s){t.push(this.createDescriptor(-1,u)),n="",s=!1;continue}if(u==="\\"){s=!0,n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n="");continue}if(u==="'"){i?(i=!1,n=""):(i=!0,n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n=""));continue}if(i){t.push(this.createDescriptor(-1,u)),n="";continue}o||(r=u),r!==u&&n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r)),n=""),n+=u,r=u}return n.length>0&&(this.handlePattern(n,t)||t.push(this.createDescriptor(-1,r))),t},r.prototype._parseFormatToPattern=function(e){var t=this.inputWidget._getCulture().calendars.standard,n=t.patterns.d;if(e.length<=1)switch(e){case"":case"d":n=t.patterns.d;break;case"D":n=t.patterns.D;break;case"f":n=t.patterns.D+" "+t.patterns.t;break;case"F":n=t.patterns.D+" "+t.patterns.T;break;case"g":n=t.patterns.d+" "+t.patterns.t;break;case"G":n=t.patterns.d+" "+t.patterns.T;break;case"m":n=t.patterns.M;break;case"M":n=t.patterns.M;break;case"s":n=t.patterns.S;break;case"t":n=t.patterns.t;break;case"T":n=t.patterns.T;break;case"u":n=t.patterns.S;break;case"U":n=t.patterns.D+" "+t.patterns.T;break;case"y":n=t.patterns.Y;break;case"Y":n=t.patterns.Y}else n=e;return n},r.prototype.getDate=function(){return this.inputWidget?new Date(this.inputWidget._safeGetDate(!0).getTime()):undefined},r.prototype.setDate=function(e){this.inputWidget&&this.inputWidget._setData(e)},r.prototype._internalSetDate=function(e){if(this.inputWidget){var t=this,n=this.inputWidget.options,r=this.inputWidget.element,i=!!r.data("typing"),s;i?(n.date=e,s=function(){var e=new Date,i=r.data("timeStamp");i&&(e.getTime()-i.getTime()>n.keyDelay?(t.inputWidget._safeSetDate(n.date,!0),t.inputWidget._updateText(),t.inputWidget._highLightField()):window.setTimeout(s,n.keyDelay))},window.setTimeout(s,n.keyDelay)):this.inputWidget._safeSetDate(e)}},r.prototype.daysInMonth=function(e,t){e-=1;var n=(new Date(t,++e,1,-1)).getDate();return n},r.prototype.setYear=function(e,t,n){try{t&&t.isfullreset&&(t.offset=1,e="1970");if(typeof e=="string"&&!this._isDigitString(e))return!1;e*=1;var r=this.inputWidget.options,i=1,s=9999,o,u,a;n&&(r.minDate&&(i=Math.max(i,r.minDate.getFullYear())),r.maxDate&&(s=Math.min(s,r.maxDate.getFullYear()))),t&&t.isreset&&(e=i),e<i&&(e=i),e>s&&(e=s),o=this.getDate(),u=new Date(o.getTime()),u.setFullYear(e);if(this._isValidDate(u))return a=this.daysInMonth(this.getMonth(),this.getYear()),a===o.getDate()?(u=new Date(o.getTime()),u.setDate(1),u.setFullYear(e),a=this.daysInMonth(u.getMonth()+1,u.getFullYear()),u.setDate(a),this._isValidDate(u)?(this._internalSetDate(u),!0):!1):(o.setFullYear(e),this._internalSetDate(o),!0);return t&&t.isreset?(o.setFullYear(1),this._internalSetDate(o),!0):!1}catch(f){return!1}},r.prototype.getYear=function(){return this.getDate().getFullYear()},r.prototype.setMonth=function(e,t,n){try{n&&n.isfullreset&&(e="1"),e*=1;var r=this.getDate(),i,s;if(typeof t!="undefined"&&!t)if(e>12||e<1){if(!n||!n.isreset)return!1;e=1}return i=this.daysInMonth(this.getMonth(),this.getYear()),i===this.getDate().getDate()?(s=new Date(r.getTime()),s.setDate(1),s.setMonth(e-1),i=this.daysInMonth(s.getMonth()+1,s.getFullYear()),s.setDate(i),this._isValidDate(s)?(this._internalSetDate(s),!0):!1):(s=new Date(r.getTime()),s.setMonth(e-1),this._isValidDate(s)?(this._internalSetDate(s),!0):!1)}catch(o){return!1}},r.prototype.getMonth=function(){return this.getDate().getMonth()+1},r.prototype.setDayOfMonth=function(e,t,n){try{if(n&&n.isfullreset)return this.setDayOfMonth(1,t);var r=this.getDate(),i,s;e*=1;if(typeof t!="undefined"&&!t){i=this.daysInMonth(this.getMonth(),this.getYear());if(e>i||e<1)return n&&n.isreset?this.setDayOfMonth(1,t,n):!1}return s=new Date(r.getTime()),s.setDate(e),this._isValidDate(s)?(this._internalSetDate(s),!0):!1}catch(o){return!1}},r.prototype.getDayOfMonth=function(){return this.getDate().getDate()},r.prototype.setHours=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>24)return!1;var n=new Date(this.getDate().getTime());return n.setHours(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getHours=function(){return this.getDate().getHours()},r.prototype.setMinutes=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setMinutes(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getMinutes=function(){return this.getDate().getMinutes()},r.prototype.setSeconds=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setSeconds(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getSeconds=function(){return this.getDate().getSeconds()},r.prototype.setDayOfWeek=function(e){try{e*=1;var t=e-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+t,!0)}catch(n){return!1}},r.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1},r.prototype.handlePattern=function(e,t){var n=new RegExp("y{3,4}"),r=n.test(e);return r?(t.push(this.createDescriptor(10)),!0):(n=new RegExp("y{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(2)),!0):(n=new RegExp("y{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(1)),!0):(n=new RegExp("d{4,4}"),r=n.test(e),r?(t.push(this.createDescriptor(101)),!0):(n=new RegExp("d{3,3}"),r=n.test(e),r?(t.push(this.createDescriptor(100)),!0):(n=new RegExp("d{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(30)),!0):(n=new RegExp("d{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(31)),!0):(n=new RegExp("M{4,4}"),r=n.test(e),r?(t.push(this.createDescriptor(27)),!0):(n=new RegExp("M{3,3}"),r=n.test(e),r?(t.push(this.createDescriptor(26)),!0):(n=new RegExp("M{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(20)),!0):(n=new RegExp("M{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(25)),!0):(n=new RegExp("h{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(46)),!0):(n=new RegExp("h{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(45)),!0):(n=new RegExp("H{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(48)),!0):(n=new RegExp("H{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(47)),!0):(n=new RegExp("m{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(50)),!0):(n=new RegExp("m{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(51)),!0):(n=new RegExp("s{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(60)),!0):(n=new RegExp("s{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(61)),!0):(n=new RegExp("t{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(251)),!0):(n=new RegExp("t{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(250)),!0):(n=new RegExp("e{2,10}"),r=n.test(e),r?(t.push(this.createDescriptor(71)),!0):(n=new RegExp("e{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(70)),!0):(n=new RegExp("g{3,10}"),r=n.test(e),r?(t.push(this.createDescriptor(74)),!0):(n=new RegExp("g{2,2}"),r=n.test(e),r?(t.push(this.createDescriptor(73)),!0):(n=new RegExp("g{1,1}"),r=n.test(e),r?(t.push(this.createDescriptor(72)),!0):!1)))))))))))))))))))))))))},r.prototype.createDescriptor=function(e,t){var n=null,r=this.maskPartsCount++;switch(e){case-1:n=new c(this,r),n.liternal=t;break;case 20:n=new w(this,r);break;case 25:n=new E(this,r);break;case 26:n=new S(this,r);break;case 27:n=new x(this,r);break;case 30:n=new N(this,r);break;case 31:n=new C(this,r);break;case 100:n=new k(this,r);break;case 101:n=new L(this,r);break;case 10:n=new M(this,r);break;case 1:n=new _(this,r);break;case 2:n=new D(this,r);break;case 45:n=new B(this,r);break;case 46:n=new j(this,r);break;case 47:n=new I(this,r);break;case 48:n=new q(this,r);break;case 250:n=new U(this,r);break;case 251:n=new z(this,r);break;case 50:n=new X(this,r);break;case 51:n=new V(this,r);break;case 60:n=new J(this,r);break;case 61:n=new K(this,r);break;case 70:n=new p(this,r);break;case 71:n=new d(this,r);break;case 72:n=new m(this,r);break;case 73:n=new g(this,r);break;case 74:n=new y(this,r);break;default:}return n},r.prototype.toString=function(){if(this.inputWidget._isEraFormatExist()&&this.inputWidget.options.date!=null){var e=this.inputWidget._getRealEraMinDate(),t=this.inputWidget._getRealEraMaxDate();if(this.inputWidget.options.date<e||this.inputWidget.options.date>t)return""}if(!this.inputWidget.isFocused())return this.inputWidget.isDateNull()&&this.inputWidget._getInnerNullText()!=null?this.inputWidget._getInnerNullText():this.getDisplayString();var n="",r=0,i,s,o;this.desPostions=new Array(0);for(i=0;i<this.descriptors.length;i++){this.descriptors[i].startIndex=n.length,s=this.descriptors[i].getText(),n+=s;for(o=0;o<s.length;o++){this.desPostions.push({desc:this.descriptors[i],pos:o,text:s,length:s.length}),r++;if(this.desPostions.length!==r)throw"Fatal Error !!!!!!!!!!!!!!!"}}return n},r.prototype.getDisplayString=function(){var e="",t=0,n,r,i,s=new Array(0);for(n=0;n<this.displayDescriptors.length;n++){this.displayDescriptors[n].startIndex=e.length,r=this.displayDescriptors[n].getText(),e+=r;for(i=0;i<r.length;i++){s.push({desc:this.displayDescriptors[n],pos:i,text:r,length:r.length}),t++;if(s.length!==t)throw"Fatal Error !!!!!!!!!!!!!!!"}}return e},r.prototype.parseDate=function(e){var t;if(this.pattern==="dddd"||this.pattern==="ddd"||typeof e=="object")try{t=new Date(e),isNaN(t)&&(t=new Date)}catch(n){t=new Date}else t=Globalize.parseDate(e,this.pattern,this._getCulture()),t||(t=this._tryParseDate(e,this.pattern)),t||(t=null);return t},r.prototype.setText=function(e){var t=this.parseDate(e);return t==null?this._internalSetDate(null):this._internalSetDate(new Date(t)),!0},r.prototype.haveEnumParts=function(){return!1},r.prototype.removeLiterals=function(e){return e=""+e+"",e=e.replace(new RegExp("[+]","g"),""),e=e.replace(new RegExp("[.]","g"),""),e=e.replace(new RegExp("[:]","g"),""),e=e.replace(new RegExp("[-]","g"),""),e=e.replace(new RegExp("[()=]","g"),""),e},r.prototype.getFirstDelimiterPos=function(e,t){var n=0,r=0,i,s;while(n<t.length&&r<e.length){i=t.charAt(n),s=e.charAt(r);if(i!==s)return r-1;r++,n++}return e.length-1},r.prototype.findAlikeArrayItemIndex=function(e,t){var n=-1,r=99999,i,s;for(i=0;i<e.length;i++)s=e[i].toLowerCase().indexOf(t.toLowerCase()),s!==-1&&s<r&&(r=s,n=i);return n},r.prototype._isValidDate=function(e){return this.inputWidget._isValidDate(e)},r.prototype.isFieldSep=function(e,t){var n=t++,r;return n<this.descriptors.length?(r=this.descriptors[n],r.type!==-1?!1:e===r.text):!1},r.prototype.getPositionType=function(e){var t=this.desPostions[e];return t.desc.type},r.prototype.addToField=function(e,t,n){var r=this.fields[t],i,s,o;return i=e,s={val:e,pos:0,offset:0,isreset:!1},this.inputWidget.element.data("typing",!0),o=r.setText(i,e.length===1?!1:!0,s),this.inputWidget.element.data("typing",!1),o},r.prototype.insertAt=function(e,n,r){typeof r=="undefined"&&(r=new t.wijInputResult),r.testPosition=-1;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(e.length===1){i=this.desPostions[n];if(i&&i.desc.type===-1&&i.text===e)return r.testPosition=n,r.hint=r.characterEscaped,!0}s=e,o=n,e=this.removeLiterals(e),u=e,a=!1,l=!1,o>0&&u.length===1&&(o--,n=o,i=this.desPostions[o],a=!0,i&&(i.desc.type===-1||i.desc.getText().length!==1)&&(n++,o++,a=!1)),f=!1;while(u.length>0&&o<this.desPostions.length){i=this.desPostions[o];if(i.desc.type===-1){o+=i.length;continue}if(i.desc.needAdjustInsertPos()){c=u.substr(0,i.length-i.pos),c=i.text.slice(0,i.pos)+c+i.text.slice(i.pos+c.length,i.length),a&&(c=i.text+c),l&&(c+=i.text),p=i.desc.getText().length,v="";try{e.length===1&&(i.pos?i.pos>0&&(v=c.substring(0,i.pos+1)):v=e)}catch(E){}p===1&&c.length>1&&e.length===1&&(i.desc.type===31||i.desc.type===25)&&(this._disableSmartInputMode=!0),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),this._disableSmartInputMode=!1,!f&&typeof v!="undefined"&&v.length>0&&(i.desc.type===26||i.desc.type===27||i.desc.type===100||i.desc.type===101||i.desc.type===250||i.desc.type===251)&&(f=i.desc.setText(v,e.length===1?!1:!0,h));if(f)r.hint=r.success,r.testPosition=o+h.offset,e.length===1&&(m=i.desc.getText().length,d=i.pos,i.pos>m-1&&(d=m),g=m-p,g>0&&i.pos===p-1&&(d=m-1),y=this.toString(),r.testPosition=i.desc.startIndex+d+h.offset),u=u.slice(i.length-i.pos,u.length);else{r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n);if(i.desc.type!==-1&&e.length===1)return!1}o+=i.length}else b=this.getFirstDelimiterPos(u,s),b<0&&(b=0),c=u.substring(0,b+1),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),f?(r.hint=r.success,r.testPosition=o+h.offset,u=u.slice(b+1,u.length)):(r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n)),b<0&&(b=0),w=b+1,o+=w}return f},r.prototype.removeAt=function(e,t,n){try{var r=this.desPostions[e],i,s,o,u,a=this.inputWidget,f=a.element,l=f.val().length;return l===t+1&&e===0&&(a.isDeleteAll=!0),r.desc.needAdjustInsertPos()&&(i="0",s=e,r.text=r.desc.getText(),i=r.text.slice(0,r.pos)+i+r.text.slice(r.pos+i.length,r.length),r.desc.name==="tt"?i="AM":r.desc.name==="t"?i="A":r.desc.formatString==="ee"?i="01":r.desc.formatString==="e"&&(i="1"),o={val:i,pos:r.pos,offset:0,isreset:!0,isfullreset:!1},t-e+1>=r.length&&(o.isfullreset=!0,e+=r.length,s=e),u=r.desc.setText(i,!1,o),u?(n.hint=n.success,n.testPosition=s):(n.hint=n.invalidInput,n.testPosition===-1&&(n.testPosition=e))),e<t&&this.removeAt(e+1,t,n),!0}catch(c){return!1}},r.prototype.incEnumPart=function(){var e=this.fields[this.inputWidget.options.activeField];return e&&e.inc(),!0},r.prototype.decEnumPart=function(e){var t=this.fields[this.inputWidget.options.activeField];return t&&t.dec(),!0},r.prototype.setValue=function(e){return this.setDate(new Date(e instanceof Date?e.getTime():e)),!0},r.prototype.getValue=function(){return this.getDate()},r.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?!1:this.inputWidget?this.inputWidget.options.smartInputMode:!0},r.prototype._getInt=function(e,t,r,i){var s,o;for(s=i;s>=r;s--){o=e.substring(t,t+s);if(o.length<r)return null;if(n.wij.charValidator.isDigit(o))return o}return null},r.prototype._tryParseDate=function(e,t){var n=this._getCulture().calendars,r,i,s,o;return t=t||n.standard.patterns.d,t&&(t.indexOf("MMM")===-1&&t.indexOf("MMMM")===-1&&(t=t.replace("MM","M")),t=t.replace("dd","d"),t=t.replace("tt","a")),r=t.replace("yyyy","yy"),i=n.standard["/"],s=[t,r,t.replace(new RegExp(i,"g"),"-"),r.replace(new RegExp(i,"g"),"-"),t.replace(new RegExp(i,"g"),"."),r.replace(new RegExp(i,"g"),".")],o=Globalize.parseDate(e,s,this._getCulture()),o?o:(o=new Date(e),o.toString()!=="Invalid Date"&&e&&e!==""?o:0)},r.prototype._formatDate=function(e,t,n){var r=this;if(!e.valueOf())return"&nbsp;";var s=this.inputWidget._getCulture().calendars.standard,o=t.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(t){var o;switch(t){case"yyyy":return i(e.getFullYear(),4);case"MMMM":return n.dateTimeFormat.monthNames[e.getMonth()];case"MMM":return n.dateTimeFormat.abbreviatedMonthNames[e.getMonth()];case"MM":return r.paddingZero(e.getMonth()+1,2);case"M":return r.paddingZero(e.getMonth()+1,1);case"mm":return r.paddingZero(e.getMinutes(),2);case"m":return r.paddingZero(e.getMinutes(),1);case"dddd":return n.dateTimeFormat.dayNames[e.getDay()];case"ddd":return n.dateTimeFormat.abbreviatedDayNames[e.getDay()];case"dd":return r.paddingZero(e.getDate(),2);case"d":return r.paddingZero(e.getDate(),1);case"hh":return o=e.getHours()%12,r.paddingZero(o?o:12,2);case"h":return o=e.getHours()%12,r.paddingZero(o?o:12,1);case"HH":return r.paddingZero(e.getHours(),2);case"H":return r.paddingZero(e.getHours(),1);case"ss":return r.paddingZero(e.getSeconds(),2);case"s":return r.paddingZero(e.getSeconds(),1);case"tt":return e.getHours()<12?s.AM[0]:s.PM[0];case"t":return e.getHours()<12?s.AM[0].length>0?s.AM[0].charAt(0):"":s.PM[0].length>0?s.PM[0].charAt(0):"";case"a/p":return e.getHours()<12?"a":"p"}return"N"});return o},r}(t.wijTextProvider);t.wijDateTextProvider=a,function(e){e._map=[],e.liternal=-1,e.OneDigitYear=1,e.TwoDigitYear=2,e.FourDigitYear=10,e.TwoDigitMonth=20,e.Month=25,e.AbbreviatedMonthNames=26,e.MonthNames=27,e.EraYear=70,e.TwoEraYear=71,e.EraName=72,e.TwoEraName=73,e.ThreeEraName=74,e.TwoDigityDayOfMonth=30,e.DayOfMonth=31,e.AbbreviatedDayNames=100,e.DayNames=101,e.h=45,e.hh=46,e.H=47,e.HH=48,e.ShortAmPm=250,e.AmPm=251,e.mm=50,e.m=51,e.ss=60,e.s=61}(t.DescriptorType||(t.DescriptorType={}));var f=t.DescriptorType,l=function(){function e(e,t){this.id=t,this.startIndex=0,this.name=null,this.type=f.liternal,this.maxLen=2,this.formatString="",this._txtProvider=e,this.startIndex=0}return e.prototype.getText=function(){return null},e.prototype.getRealText=function(e){return this._txtProvider.inputWidget.options.date==null?this.formatString:e},e.prototype.setText=function(e,t,n){return!1},e.prototype.inc=function(){},e.prototype.dec=function(){},e.prototype.needAdjustInsertPos=function(){return!0},e.prototype.reachMaxLen=function(){var e=this.getText();do{if(e.charAt(0)!=="0")break;e=e.slice(1)}while(e.length>0);return e.length>=this.maxLen},e}();t._iDateDescriptor=l;var c=function(e){function t(t,n){e.call(this,t,n),this.liternal="",this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){return this.liternal},t}(l),h=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDate(),t=this._txtProvider.inputWidget._getRealEraMinDate(),n=this._txtProvider.inputWidget._getRealEraMaxDate();u.Equal(e,n)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(t.valueOf())):(this._txtProvider.setYear(this._txtProvider.getYear()+1,null,!0),this._txtProvider.getDate()>n&&this._txtProvider.setDate(new Date(n.valueOf())))},t.prototype.dec=function(){var e=this._txtProvider.getDate(),t=this._txtProvider.inputWidget._getRealEraMinDate(),n=this._txtProvider.inputWidget._getRealEraMaxDate();u.Equal(e,t)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(n.valueOf())):(this._txtProvider.setYear(this._txtProvider.getYear()-1,null,!0),this._txtProvider.getDate()<t&&this._txtProvider.setDate(new Date(t.valueOf())))},t}(l),p=function(e){function t(t,n){e.call(this,t,n),this.name="Era Year",this.formatString="e",this.type=f.EraYear}return __extends(t,e),t.prototype.getText=function(){var e=u.GetEraDate(this._txtProvider.getDate());return e.eraYear===-1?"":(e.eraYear=e.eraYear>99?99:e.eraYear,this.getRealText(String(e.eraYear)))},t.prototype.setText=function(e,t,n){if(isNaN(parseInt(e)))return!1;var r=this._txtProvider.getDate(),i=u.GetEraDate(r);if(i.eraYear!==-1){var s=parseInt(e);s>=u.GetEraYears()[i.era]&&(s=u.GetEraYears()[i.era]);var o=this._txtProvider.inputWidget.options.date==null;o&&(s=parseInt(e));var a=u.ConvertToGregorianDate(i.era,s,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1);if(i.era<u.GetEraCount()-1){var f=u.GetEraDates()[i.era+1];a>f&&(s=u.GetEraYears()[i.era]-1,a=u.ConvertToGregorianDate(i.era,s,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1))}return this._txtProvider.setDate(a),!0}return!1},t}(h),d=function(e){function t(t,n){e.call(this,t,n),this.name="Two Era Year",this.formatString="ee",this.type=f.TwoEraYear}return __extends(t,e),t.prototype.getText=function(){var e=u.GetEraDate(this._txtProvider.getDate());return e.eraYear===-1?"":(e.eraYear=e.eraYear>99?99:e.eraYear,this.getRealText(i(e.eraYear,2)))},t.prototype.setText=function(e,t,n){if(isNaN(parseInt(e)))return!1;var r=this._txtProvider.getDate(),i=u.GetEraDate(r);if(i.eraYear!==-1){var s=String(i.eraYear)+e,o=parseInt(s.substring(s.length-2,s.length));o>u.GetEraYears()[i.era]&&(o=u.GetEraYears()[i.era]);var a=this._txtProvider.inputWidget.options.date==null;a&&(o=parseInt(e));var f=u.ConvertToGregorianDate(i.era,o,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1);if(i.era<u.GetEraCount()-1){var l=u.GetEraDates()[i.era+1];f>l&&(o=u.GetEraYears()[i.era]-1,f=u.ConvertToGregorianDate(i.era,o,r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),!1))}return this._txtProvider.setDate(f),!0}return!1},t}(h),v=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDate(),t=u.GetEraDate(e);if(t.era===-1)return;var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();if(u.Equal(e,r))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(n.valueOf()));else if(t.era>=u.GetEraCount()-1)this._txtProvider.setDate(new Date(r.valueOf()));else{var i=t.era+1,s=t.eraYear>u.GetEraYears()[i]?u.GetEraYears()[i]:t.eraYear,o=u.ConvertToGregorianDate(i,s,e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),!0);o=o==null?u.GetEraDates()[i]:o,o>r?this._txtProvider.setDate(new Date(r.valueOf())):this._txtProvider.setDate(o)}},t.prototype.dec=function(){var e=this._txtProvider.getDate(),t=u.GetEraDate(e);if(t.era===-1)return;var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();if(u.Equal(e,n))this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(new Date(r.valueOf()));else if(t.era==0)this._txtProvider.setDate(new Date(n.valueOf()));else{var i=t.era-1,s=t.eraYear>u.GetEraYears()[i]?u.GetEraYears()[i]:t.eraYear,o=u.ConvertToGregorianDate(i,s,e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),!0);o==null&&(o=new Date(u.GetEraDates()[i+1]),o.setDate(o.getDate()-1)),o>r?this._txtProvider.setDate(new Date(n.valueOf())):this._txtProvider.setDate(o)}},t}(l),m=function(e){function t(t,n){e.call(this,t,n),this.name="Era Name",this.formatString="g",this.type=f.EraName}return __extends(t,e),t.prototype.getText=function(){var e=u.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(u.GetEraSymbols()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<u.GetEraCount();i++)if(r.toLowerCase()===u.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===u.GetEraShortNames()[i].toLowerCase())break;if(i==u.GetEraCount())return!0;var s=this._txtProvider.getDate(),o=u.GetEraDate(s);if(o.era===-1)return!0;var a=o.eraYear>u.GetEraYears()[i]?u.GetEraYears()[i]:o.eraYear,f=u.ConvertToGregorianDate(i,a,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);f=f==null?u.GetEraDates()[i]:f;if(i<u.GetEraCount()-1){var l=u.GetEraDates()[i+1];f=f>l?l:f}return this._txtProvider.setDate(f),!0},t}(v),g=function(e){function t(t,n){e.call(this,t,n),this.name="Two Era Name",this.formatString="gg",this.type=f.TwoEraName}return __extends(t,e),t.prototype.getText=function(){var e=u.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(u.GetEraAbbreviations()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<u.GetEraCount();i++)if(r.toLowerCase()===u.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===u.GetEraShortNames()[i].toLowerCase()||e.toLowerCase()===u.GetEraAbbreviations()[i].toLowerCase())break;if(i==u.GetEraCount())return!0;var s=this._txtProvider.getDate(),o=u.GetEraDate(s);if(o.era===-1)return!0;var a=o.eraYear>u.GetEraYears()[i]?u.GetEraYears()[i]:o.eraYear,f=u.ConvertToGregorianDate(i,a,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);f=f==null?u.GetEraDates()[i]:f;if(i<u.GetEraCount()-1){var l=u.GetEraDates()[i+1];f=f>l?l:f}return this._txtProvider.setDate(f),!0},t}(v),y=function(e){function t(t,n){e.call(this,t,n),this.name="Three Era Name",this.formatString="ggg",this.type=f.ThreeEraName}return __extends(t,e),t.prototype.getText=function(){var e=u.GetEraDate(this._txtProvider.getDate());return e.era===-1?"":this.getRealText(u.GetEraNames()[e.era])},t.prototype.setText=function(e,t,n){var r=e.substr(e.length-1,1),i=0;for(i=0;i<u.GetEraCount();i++)if(r.toLowerCase()===u.GetEraShortcuts()[i].toLowerCase()||e.toLowerCase()===u.GetEraShortNames()[i].toLowerCase()||e.toLowerCase()===u.GetEraAbbreviations()[i].toLowerCase()||e.toLowerCase()===u.GetEraNames()[i].toLowerCase())break;if(i==u.GetEraCount())return!0;var s=this._txtProvider.getDate(),o=u.GetEraDate(s);if(o.era===-1)return!0;var a=o.eraYear>u.GetEraYears()[i]?u.GetEraYears()[i]:o.eraYear,f=u.ConvertToGregorianDate(i,a,s.getMonth()+1,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),!0);f=f==null?u.GetEraDates()[i]:f;if(i<u.GetEraCount()-1){var l=u.GetEraDates()[i+1];f=f>l?l:f}return this._txtProvider.setDate(f),!0},t}(v),b=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){e.prototype.inc.call(this);var t=new Date(this._txtProvider.getDate().valueOf()),n=t.getMonth()+1;t.setMonth(n);if(this._txtProvider.inputWidget._isEraFormatExist()){var r=this._txtProvider.inputWidget._getRealEraMinDate(),i=this._txtProvider.inputWidget._getRealEraMaxDate();u.Equal(this._txtProvider.getDate(),i)?t>i?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t):this._txtProvider.setDate(i)}else{var r=this._txtProvider.inputWidget._getRealMinDate(),i=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):u.Equal(this._txtProvider.getDate(),i)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(i)}},t.prototype.dec=function(){e.prototype.inc.call(this);var t=new Date(this._txtProvider.getDate().valueOf()),n=t.getMonth()-1;t.setMonth(n);if(this._txtProvider.inputWidget._isEraFormatExist()){var r=this._txtProvider.inputWidget._getRealEraMinDate(),i=this._txtProvider.inputWidget._getRealEraMaxDate();t<r?u.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(i):this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var r=this._txtProvider.inputWidget._getRealMinDate(),i=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):u.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(i):this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){return parseInt(e)>12&&(e=e.substr(e.length-1,1)),this._txtProvider.setMonth(e,t,n)},t}(l),w=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit month",this.formatString="MM",this.type=f.TwoDigitMonth}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return this.getRealText(e.length===1?"0"+e:e)},t}(b),E=function(e){function t(t,n){e.call(this,t,n),this.name="month",this.formatString="M",this.type=f.Month}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return this.getRealText(e)},t}(b),S=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedMonthNames",this.formatString="MMM",this.type=f.AbbreviatedMonthNames,this.maxLen=f.AbbreviatedMonthNames}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.months.namesAbbr[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider.inputWidget._getCulture().calendars.standard;return r=this._txtProvider.findAlikeArrayItemIndex(i.months.namesAbbr,e),r===-1?!1:this._txtProvider.setMonth(r+1,t,n)},t}(b),x=function(e){function t(t,n){e.call(this,t,n),this.name="MonthNames",this.formatString="MMMM",this.type=f.MonthNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.months.names[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i;if(n&&n.isfullreset)r=1;else{i=this._txtProvider._getCulture(),r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.months.names,e);if(r===-1)return!1}return this._txtProvider.setMonth(r+1,t,n)},t}(b),T=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getDayOfMonth()+1,t=new Date(this._txtProvider.getDate().valueOf());t.setDate(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getDayOfMonth()-1,t=new Date(this._txtProvider.getDate().valueOf());t.setDate(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){var r=this._txtProvider.getDate(),i=u.DaysInMonth(r.getFullYear(),r.getMonth()+1);return parseInt(e)>i&&(e=i+""),this._txtProvider.setDayOfMonth(e,t,n)},t}(l),N=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit day of month",this.formatString="dd",this.type=f.TwoDigityDayOfMonth}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(i(this._txtProvider.getDayOfMonth()))},t}(T),C=function(e){function t(t,n){e.call(this,t,n),this.name="Day of month",this.formatString="d",this.type=f.DayOfMonth}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfMonth();return this.getRealText(""+e+"")},t}(T),k=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedDayNames",this.formatString="ddd",this.type=f.AbbreviatedDayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.days.namesShort[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.namesShort,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(T),L=function(e){function t(t,n){e.call(this,t,n),this.name="DayNames",this.formatString="dddd",this.type=f.DayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return this.getRealText(t.calendars.standard.days.names[e-1])},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.names,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(T),A=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getYear()+1,t=new Date(this._txtProvider.getDate().valueOf());t.setFullYear(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?u.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):u.Equal(this._txtProvider.getDate(),r)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(r)}},t.prototype.dec=function(){var e=this._txtProvider.getYear()-1,t=new Date(this._txtProvider.getDate().valueOf());t.setFullYear(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?u.Equal(this._txtProvider.getDate(),n)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):u.Equal(this._txtProvider.getDate(),n)?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(n)}},t}(l),O=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){e=i(e);var r=i(this._txtProvider.getYear(),4),s,o,u,a,f;return e==="00"&&(s=this._txtProvider.getMonth(),o=this._txtProvider.getDayOfMonth(),u=this._txtProvider.getHours(),a=this._txtProvider.getMinutes(),f=this._txtProvider.getSeconds(),s===1&&o===1&&!u&&!a&&!f&&(r="0001",e="01")),r.length>=2&&(r=r.substr(0,2)+e.substr(0,2)),this._txtProvider.setYear(parseInt(r),n,!1)},t}(A),M=function(e){function t(t,n){e.call(this,t,n),this.name="Four-digit year",this.formatString="yyyy",this.type=f.FourDigitYear,this.maxLen=4}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(i(this._txtProvider.getYear(),4))},t.prototype.setText=function(e,t,n){if(this._txtProvider._isSmartInputMode()&&n){e*=1,e%=100;var r=2e3;this._txtProvider.inputWidget.options.startYear&&(r=this._txtProvider.inputWidget.options.startYear);var i=r%100,s=r-i;e>=i?e=s+e:e=s+e+100}return this._txtProvider.setYear(e,n,!1)},t}(A),_=function(e){function t(t,n){e.call(this,t,n),this.name="One-digit year",this.formatString="y",this.type=f.OneDigitYear}return __extends(t,e),t.prototype.getText=function(){var e=i(this._txtProvider.getYear());return e[0]==="0"&&(e=e[1]),this.getRealText(e)},t}(O),D=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit year",this.formatString="yy",this.type=f.TwoDigitYear}return __extends(t,e),t.prototype.getText=function(){return this._txtProvider.inputWidget.isFocused()&&this._txtProvider.inputWidget.options.date==null?"yy":this.getRealText(i(this._txtProvider.getYear(),2))},t}(O),P=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getHours()+1,t=new Date(this._txtProvider.getDate().valueOf());t.setHours(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getHours()-1,t=new Date(this._txtProvider.getDate().valueOf());t.setHours(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t}(l),H=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){var r=this._txtProvider.getHours();return r>12&&(e=e*1+12),this._txtProvider.setHours(e,t)},t}(P),B=function(e){function t(t,n){e.call(this,t,n),this.name="h",this.formatString="h",this.type=f.h}return __extends(t,e),t.prototype.getText=function(){if(this._txtProvider.inputWidget.isFocused()&&this._txtProvider.inputWidget.options.date==null)return"h";var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),e==12&&this._txtProvider.inputWidget.options.hour12As0&&(e=0),this.getRealText(""+e+"")},t}(H),j=function(e){function t(t,n){e.call(this,t,n),this.name="hh",this.formatString="hh",this.type=f.hh}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),e==12&&this._txtProvider.inputWidget.options.hour12As0&&(e=0),this.getRealText(i(e,2))},t}(H),F=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){return this._txtProvider.setHours(e,t)},t}(P),I=function(e){function t(t,n){e.call(this,t,n),this.name="H",this.formatString="H",this.type=f.H}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e==0&&!this._txtProvider.inputWidget.options.midnightAs0&&(e=24),this.getRealText(""+e+"")},t}(F),q=function(e){function t(t,n){e.call(this,t,n),this.name="HH",this.formatString="HH",this.type=f.HH}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e==0&&!this._txtProvider.inputWidget.options.midnightAs0&&(e=24),this.getRealText(i(e,2))},t}(F),R=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.dec=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.setText=function(e,t,n){var r;return e.toLowerCase().indexOf("a")>=0?(r=this._txtProvider.getHours()%12,this._txtProvider.setHours(r,!0)):e.toLowerCase().indexOf("p")>=0&&(r=this._txtProvider.getHours()%12+12,this._txtProvider.setHours(r,!0)),!0},t}(l),U=function(e){function t(t,n){e.call(this,t,n),this.name="t",this.formatString="t",this.type=f.ShortAmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=this._txtProvider.inputWidget._getInnerAmDesignator(),r=this._txtProvider.inputWidget._getInnerPmDesignator(),i=e<12?n:r;return this.getRealText(i.charAt(0)||" ")},t}(R),z=function(e){function t(t,n){e.call(this,t,n),this.name="tt",this.formatString="tt",this.type=f.AmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=this._txtProvider.inputWidget._getInnerAmDesignator(),r=this._txtProvider.inputWidget._getInnerPmDesignator(),i=e<12?n:r;return i.length<=0&&(i=" "),this.getRealText(i)},t}(R),W=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getMinutes()+1,t=new Date(this._txtProvider.getDate().valueOf());t.setMinutes(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getMinutes()-1,t=new Date(this._txtProvider.getDate().valueOf());t.setMinutes(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setMinutes(e,t)},t}(l),X=function(e){function t(t,n){e.call(this,t,n),this.name="mm",this.formatString="mm",this.type=f.mm}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(i(this._txtProvider.getMinutes()))},t}(W),V=function(e){function t(t,n){e.call(this,t,n),this.name="m",this.formatString="m",this.type=f.m,this.delta=12}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(this._txtProvider.getMinutes().toString())},t}(W),$=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=this._txtProvider.getSeconds()+1,t=new Date(this._txtProvider.getDate().valueOf());t.setSeconds(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t>r?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(n)}},t.prototype.dec=function(){var e=this._txtProvider.getSeconds()-1,t=new Date(this._txtProvider.getDate().valueOf());t.setSeconds(e);if(this._txtProvider.inputWidget._isEraFormatExist()){var n=this._txtProvider.inputWidget._getRealEraMinDate(),r=this._txtProvider.inputWidget._getRealEraMaxDate();t<n?this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r):this._txtProvider.setDate(t)}else{var n=this._txtProvider.inputWidget._getRealMinDate(),r=this._txtProvider.inputWidget._getRealMaxDate();this._txtProvider.inputWidget._isValidDate(t,!0)?this._txtProvider.setDate(t):this._txtProvider.inputWidget._getAllowSpinLoop()&&this._txtProvider.setDate(r)}},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setSeconds(e,t)},t}(l),J=function(e){function t(t,n){e.call(this,t,n),this.name="ss",this.formatString="ss",this.type=f.ss}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(i(this._txtProvider.getSeconds()))},t}($),K=function(e){function t(t,n){e.call(this,t,n),this.name="s",this.formatString="s",this.type=f.s}return __extends(t,e),t.prototype.getText=function(){return this.getRealText(this._txtProvider.getSeconds().toString())},t}($)})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),define("wijmo.wijinputdate",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function t(e,t,n){this.filterLabel=e,this._include=n,this._owner=t}return t.prototype.Check=function(e,t){var n={};n.success=!1,n.strValue="",n.index=t;var r=e.Substring(t,t+1),i=this.IsValid(r);if(i)return e=e.Substring(t,t+1),t++,n.strValue=e,n.index=t,n;if(this._owner.GetAutoConvert()&&(r.length===1||r.length===3)){n=this.Convert(e,t);if(n.success)return n}return n},t.prototype.IsValid=function(t){return t.length===2&&(t.charCodeAt(1)===65438||t.charCodeAt(1)===65439)&&!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?this.IsValidTwoByte(t):t.length>1?this.IsValidMoreByte(t):this.IsValidTwoByte(t)},t.prototype.IsValidTwoByte=function(e){return!1},t.prototype.IsValidMoreByte=function(e){return!1},t.prototype.Convert=function(t,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=t.Substring(n,n+1),s,o=e.CharProcess.CharEx;if(o.IsAlphabet(i)){var u=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(u=o.IsFullWidth(u)?o.ToHalfWidth(u):o.ToFullWidth(u).text,s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}i=o.ToKatakana(i),s=this.IsValid(i);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var l=o.ToHalfWidthEx(i);s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r;if(o.IsLowerKana(l)){l=o.ToUpperKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}else if(o.HasLowerKana(l)){l=o.ToLowerKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var u=i,c=!1;if(o.IsFullWidth(i)){var h=o.ToHalfWidthEx(i);if(h.GetLength()>0){s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}if(o.IsLowerKana(h)){h=o.ToUpperKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}else if(o.HasLowerKana(h)){h=o.ToLowerKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}}else{if(n==null){u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=u,r}else{if(n+1<t.GetLength()){var p=o.ToFullWidth(t.Substring(n,n+2));u=p.text,c=p.processedAll}else u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,r}if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}u=o.ToHiragana(u),s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,u==="ゔ"&&(c?r.strValue="う゛":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},t}();e.CharacterFilter=n;var r=function(t){function n(e,n){t.call(this,"HalfWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?t==="\r"||t==="\n"?!0:!1:!0},n}(n),i=function(t){function n(e,n){t.call(this,"FullWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),s=function(t){function n(e,n){t.call(this,"HiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsHiragana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),o=function(t){function n(e,n){t.call(this,"ShiftJISFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsShiftJIS(t)},n}(n),u=function(t){function n(e,n){t.call(this,"JISX0208Filter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsJISX0208(t)},n}(n),a=function(t){function n(e,n){t.call(this,"DBCSHiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsUpperKana(t)&&e.CharProcess.CharEx.IsHiragana(t)},n}(n),f=function(t){function n(e,n){t.call(this,"DBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),l=function(t){function n(e,n){t.call(this,"SBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),c=function(t){function n(e,n){t.call(this,"SurrogateFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsSurrogatePair(t)?!0:t==="\r"||t==="\n"?!0:!1},n.prototype.IsValidMoreByte=function(t){for(var n=0;n<t.length;n++)if(e.CharProcess.CharEx.IsSurrogate(t[n]))return!0;return!1},n}(n),h=function(t){function n(e,n){t.call(this,"HalfWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),p=function(t){function n(e,n){t.call(this,"FullWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),d=function(t){function n(e,n){t.call(this,"HalfWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),v=function(t){function n(e,n){t.call(this,"FullWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),m=function(e){function t(t,n,r,i){e.call(this,"LimitedFilter",r,i),this._includeChars=t,this._excludeChars=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t}(n),g=function(e){function t(t,n,r,i){e.call(this,"RangeFilter",r,i),this._startChar=t,this._endChar=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return e>=this._startChar&&e<=this._endChar?!0:e==="\r"||e==="\n"?!0:!1},t}(n),y=function(e){function t(t,n){e.call(this,"UnionFilter",t,n),this.filterArray=[]}return __extends(t,e),t.prototype.Add=function(e){if(e==null)return;e.filterLabel==="HiraganaFilter"?this.hiranagaFilter=e:e.filterLabel==="FullWidthKatakanaFilter"&&(this.katakanaFilter=e),this.filterArray.push(e)},t.prototype.AddRange=function(e){for(var t=0;t<e.length;t++)this.Add(e[t])},t.prototype.IsValidTwoByte=function(e){if(this.filterArray.length===0)return e==="\r"||e==="\n"?!0:!1;var t=!1,n=!1;for(var r=0;r<this.filterArray.length;r++)this.filterArray[r]._include&&(n=!0);var i=e==="ー";if(i)if(this.hiranagaFilter&&this.katakanaFilter){if(n)return!0}else{if(this.hiranagaFilter)return!0;if(this.katakanaFilter)return!0}for(var r=0;r<this.filterArray.length;r++)if(this.filterArray[r].IsValid(e)){if(!this.filterArray[r]._include)return!1;t=!0}else n||(t=!0);return t?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this.IsValidTwoByte(e)},t}(n),b=function(){function e(e){this.minLength=-1,this.maxLength=-1,this.text="",this.oldText="",this.fieldLabel=e}return e.prototype.Snap=function(){var e={};return e.text=this.text,e.oldText=this.oldText,e},e.prototype.Revert=function(e){this.text=e.text,this.oldText=e.oldText},e.prototype.GetFieldText=function(){return this.oldText==null?null:this.oldText},e.prototype.GetText=function(){return this.text},e.prototype.SetText=function(e){this.text=e},e.prototype.GetFillingString=function(e){if(!e)return null;var t="";for(var n=0;n<this.minLength;n++)t+=e;return t},e.prototype.GetFieldStatus=function(){return 0},e.prototype.GetTextExcludeLiterals=function(e,t){var n=this.text.GetLength();n<t&&(t=n);var r=this.text.Substring(e,t);return r=r.replace(/[^\d]/g,""),r},e.prototype.SaveOldState=function(){},e.prototype.RollBack=function(){},e.prototype.PerformSpin=function(e,t,n){return 0},e.prototype.Insert=function(e,t,n,r){},e.prototype.Replace=function(e,t,n){},e.prototype.Delete=function(e,t){},e.prototype.SaveUndoState=function(){},e.prototype.Clear=function(){this.text=null},e.prototype.Undo=function(){},e.prototype.SetTextInternal=function(e,t,n,r){},e.prototype.GetLength=function(){return this.text.GetLength()>this.minLength?this.text.GetLength():this.minLength},e}();e.Field=b;var w=function(e){function t(t){e.call(this,"PromptField"),this.text=t,this.minLength=this.text.GetLength(),this.maxLength=this.text.GetLength()}return __extends(t,e),t.prototype.GetFillingString=function(){return this.text},t.prototype.SetText=function(e){var t={};return e===this.promptText?(t.existInvalid=!1,e=e.Substring(this.text.GetLength())):t.existInvalid=!0,t.text=e,t},t.prototype.GetLength=function(){return this.text.GetLength()},t}(b),E=function(t){function r(e){t.call(this,"FilterField"),this._minLength=0,this._maxLength=0,this._filter=new n,this._bitStates=null,this._oldBitState=null,this.undoText="",this.undoTempText="",this._undoBitState=null,this._trueLength=0,this._bitState=null,this._owner=e}return __extends(r,t),r.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},r.prototype.GetAutoConvert=function(){return this._owner.GetAutoConvert()},r.prototype.FilterField=function(e,t,n,r){if(e>t)return!1;if(!n)return!1;this._minLength=e,this._maxLength=t,this._filter=n,this._bitState=r,this._oldBitState=r,this._undoBitState=r,this._trueLength=0;if(this._bitState!=null){var i=0;while(this._bitState[i]!=null)i++;for(var s=i;s>=0;s--)if(this._bitState[s]!=null)this._bitState[s]===!1&&this._trueLength--;else{if(this._bitState[s]!=null)break;this._trueLength--}}return this.Clear(),!0},r.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!=-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!=-1)e=e.replace("@#GCM#@",'"');this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},r.prototype.GetFieldStatus=function(){return this._trueLength>=this._minLength&&this._trueLength>0?2:this._trueLength>0&&this._trueLength<this._minLength?1:0},r.prototype.GetFieldIsFull=function(){if(this._trueLength>=this._minLength&&this._trueLength>0){for(var e=0;e<this._trueLength;e++)if(this._bitState[e]===!1)return!1;return!0}return!1},r.prototype.SetTextInternal=function(t,n,r,i){var s={};s.offset=n,s.text=t,s.existInvalid=!1,s.exception=!1;var o=!1;if(n>this._maxLength||t===""||t.GetLength()===0)return s;var u="",a=0,f=[],l=n;for(var c=0;c<n;c++)f[c]=this._bitState[c];while(a<t.GetLength()){var h=this._filter.Check(t,a),p=h.strValue;a=h.index;if(p===""&&t.Substring(a,a+1)!==this.GetPromptChar()){if(!r&&n+u.GetLength()>=this._minLength&&n+u.GetLength()===this._trueLength+u.GetLength())break;o=!0,a++;break}p!==""?(i&&i!==""&&i.Substring(l,l+1)===e.Utility.MaskValChar?(u+=this.GetPromptChar(),f[l]=!1):p==="\r"||p==="\n"?(u+=this.GetPromptChar(),f[l]=!1):(u+=p,f[l]=!0),l++,p.GetLength()===2&&(f[l]=!0,l++)):(u+=this.GetPromptChar(),a++,f[l]=!1,l++);if(n+u.GetLength()===this._maxLength)break;if(n+u.GetLength()>this._maxLength){u=u.Substring(0,u.GetLength()-1);break}}n+u.GetLength()<this._minLength&&(t=t.Substring(a,t.GetLength()-a),s.existInvalid=o,s.exception=!0);var d=this.text.Substring(0,n)+u+this.text.Substring(n,this.text.GetLength());d.GetLength()>this._maxLength&&(d=d.Substring(0,this._maxLength));if(d.GetLength()>n+u.GetLength())for(var v=1;v<=d.GetLength()-n-u.GetLength();v++)this._bitState[n+v]!=null&&(f[l]=this._bitState[n+v],l++);this._bitState=new Array(l),this._bitState=f,this._trueLength=l;for(var v=l-1;v>=0;v--){if(this._bitState[v]!==!1)break;this._trueLength--}if(d.GetLength()<this._minLength)for(var v=0;v<this._minLength-d.GetLength();v--)d+=this.GetPromptChar();for(var v=d.GetLength();v>this._minLength;v--){if(!(d.Substring(v-1,v)===this.GetPromptChar()&&v>this._trueLength))break;d=d.Substring(0,v-1)}return this.text=d,a===t.GetLength()?t="":t=t.Substring(a,t.GetLength()),n+=u.GetLength(),s.offset=n,s.text=t,s},r.prototype.SaveOldState=function(){this.oldText=this.text,this._oldBitState=this._bitState},r.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoBitState=this._bitState},r.prototype.GetValue=function(){},r.prototype.GetText=function(){return this._text},r.prototype.UpdateState=function(e){},r.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this.oldText;this.text=e,this._bitState=this._oldBitState,this._trueLength=e.GetLength();for(var t=e.GetLength()-1;t>=0;t--){if(this._bitState[t]!==!1)break;this._trueLength--}},r.prototype.Undo=function(){if(this.undoTempText===this.text)return!1;var e=this.undoTempText;this.undoTempText=this.text;var t=this._bitState;this.text=e,this._bitState=this._undoBitState,this._trueLength=e.GetLength();if(this._bitState.length===0)this._trueLength=0;else for(var n=e.GetLength()-1;n>=0;n--){if(this._bitState[n]!==!1)break;this._trueLength--}return this._undoBitState=t,!0},r.prototype.Clear=function(){this._trueLength=0;var e="",t=[];if(this._minLength>0){for(var n=0;n<this._minLength;n++)t[n]=!1;this._bitState=new Array(this._minLength),this._bitState=t;if(this.GetPromptChar()!=="")for(var n=0;n<this._minLength;n++)e+=this.GetPromptChar();else for(var n=0;n<this._minLength;n++)e+=" ";this.text=e}else this.text="",this._bitStates=null},r.prototype.Insert=function(e,t,n,r){r||(r=!0);var i={};i.offset=e,i.text=t,i.existInvalid=!1,i.exception=!1;var s=!1;if(e>this._maxLength||t===""||t.GetLength()===0)return i;var o=[],u=e;for(var a=0;a<e;a++)o[a]=this._bitState[a];var f="",l=0;while(l<t.GetLength()){var c=this._filter.Check(t,l),h=c.strValue;l=c.index;if(!(h!==""||!r&&t.CharAt(l)===" ")){if(!n&&e+f.GetLength()>=this._minLength&&e+f.GetLength()>=this._trueLength+f.GetLength())break;s=!0,l++;continue}h===""&&!r&&t.CharAt(l)===" "?(f+=this.GetPromptChar(),o[u]=!1,u++,l++):h==="\r"||h==="\n"?(f+=this.GetPromptChar(),o[u]=!1,u++):(f+=h,o[u]=!0,u++,h.GetLength()===2&&(o[u]=!0,u++));if(e+f.GetLength()===this._maxLength)break;if(e+f.GetLength()>this._maxLength){f=f.Substring(0,f.GetLength()-1);break}}if(f.GetLength()===0)return t=t.Substring(l,t.GetLength()-l),i.existInvalid=s,i.exception=!0,i;var p=this.text.Substring(0,e)+f+this.text.Substring(e,this.text.GetLength());p.GetLength()>this._maxLength&&(p=p.Substring(0,this._maxLength));if(p.GetLength()>e+f.GetLength())for(var d=0;d<p.GetLength()-e-f.GetLength();d++)this._bitState[e+d]!=null?o[u]=this._bitState[e+d]:o[u]=!1,u++;this._bitState=new Array(u),this._bitState=o,this._trueLength=u;for(var d=u-1;d>=0;d--){if(this._bitState[d]!==!1)break;this._trueLength--}if(p.GetLength()<this._minLength)for(var d=0;d<this._minLength-p.GetLength();d--)p+=this.GetPromptChar();for(var d=p.GetLength();d>this._minLength;d--){if(!(p.Substring(d-1,d)===this.GetPromptChar()&&d>this._trueLength))break;p=p.Substring(0,d-1)}return this.text=p,l===t.GetLength()?t="":t=t.Substring(l,t.GetLength()),e+=f.GetLength(),i.offset=e,i.text=t,i},r.prototype.Replace=function(t,n,r,i){var s={};s.offset=t,s.text=r;if(n===0)return s;var o=r.charCodeAt(0),u=[12364,12460,12366,12462,12376,12472];if(e.Utility.ArrayIndexOf(u,o)!==-1&&n===1){var a=this._filter.Check(r,0);a.strValue&&a.strValue.length===2&&(n=2)}return t=this.Delete(t,n),s=this.Insert(t,r,i),s},r.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e+t>this.text.GetLength()&&(t=this.text.GetLength()-e);var n=[],r=e;for(var i=0;i<e;i++)n[i]=this._bitState[i];var s=this.text.Substring(0,e)+this.text.Substring(e+t,this.text.GetLength());if(e+t<this.text.GetLength())for(var o=0;o<this.text.Substring(e+t,this.text.GetLength()).GetLength();o++)this._bitState[e+t+o]!=null?n[r]=this._bitState[e+t+o]:n[r]=!1,r++;if(r<this._minLength)for(var o=r;o<this._minLength;o++)n[o]=!1;this._bitState=new Array(r),this._bitState=n,this._trueLength=r;for(var o=r-1;o>=0;o--){if(this._bitState[o]!==!1)break;this._trueLength--}if(s.GetLength()<this._minLength){var u=this._minLength-s.GetLength();for(var o=0;o<u;o++)s+=this.GetPromptChar()}return this.text=s,e},r}(b),S=function(t){function n(e){t.call(this,"EnumField"),this._activeItem=-1,this._trueLength=0,this._lastActiveItem=-1,this.undoText="",this.undoTempText="",this._undoItem=-1,this._minLength=0,this._maxLength=0,this._itemCount=0,this._owner=e}return __extends(n,t),n.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},n.prototype.GetText=function(){var t="";return this._activeItem<0?t=e.Utility.ToString(this.GetPromptChar(),this._minLength):t+=this._items[this._activeItem],t},n.prototype.GetFieldStatus=function(){return this._activeItem===-1?0:2},n.prototype.GetFieldIsFull=function(){return this._activeItem===-1?!1:!0},n.prototype.IsOver=function(){return this._activeItem!==-1},n.prototype.Init=function(e){var t=Number.MAX_VALUE,n=Number.MIN_VALUE;for(var r=0;r<e.length;r++)t=Math.min(t,e[r].length),n=Math.max(n,e[r].length);this.EnumField(t,n,e,e.length,-1)},n.prototype.EnumField=function(e,t,n,r,i){this._minLength=e,this._maxLength=t;if(!n)return!1;this._itemCount=r,this._activeItem=i,this._lastActiveItem=i,this._undoItem=i,this.InitialItems(n),i!==-1?this._trueLength=n[i].toString().GetLength():this._trueLength=0,this.text=this.GetText()},n.prototype.InitialItems=function(e){this._items=new Array(e.length);for(var t=0;t<e.length;t++){var n=e[t];while(n.IndexOf("@#GCD#@")!==-1)n=n.replace("@#GCD#@","'");while(n.IndexOf("@#GCM#@")!==-1)n=n.replace("@#GCM#@",'"');n&&(n=n.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this._items[t]=n}},n.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!==-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!==-1)e=e.replace("@#GCM#@",'"');e&&(e=e.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},n.prototype.Insert=function(e,t,n){var r={};r.offset=e,r.text=t,r.existInvalid=!1,r.exception=!1;var i=e,s="";this._activeItem===-1&&(i=0),i!==0&&(s=this._items[this._activeItem].toString().Substring(0,i));var o=new Array(this._itemCount),u=new Array(this._itemCount),a=new Array(this._itemCount),f=new Array(this._itemCount);for(var l=0;l<this._itemCount;l++)o[l]=i,u[l]=0,a[l]=99999,f[l]=new Array;for(var l=0;l<this._itemCount;l++){var c=this._items[l].toString();if(s.GetLength()>0&&c.Substring(0,s.GetLength())!==s)continue;while(u[l]<t.GetLength()){if(o[l]>=c.length)break;var h=this.JudgeIfValid(c,o[l],t,u[l]);o[l]=h.index1,u[l]=h.index2,h.isValid?a[l]===99999&&(a[l]=u[l]):u[l]++}}var p=0,d=0,v=!1,m=o[p];for(var g=0;g<this._itemCount;g++){var c=this._items[g].toString();if(o[g]===t.GetLength()+i&&t.GetLength()===c.length){p=g,m=o[p],v=!0;break}if(a[g]===99999)continue;if(a[p]>=a[g])if(a[p]===a[g]){var y=o[g];m<y?(p=g,m=y,d=1):m===y&&d++}else p=g,m=o[p],d=1}var b;if(v)return u[p]===0?(b=!0,r.existInvalid=!0,r):(t=t.Substring(u[p]+1,t.GetLength()),e=this._items[p].toString().GetLength(),b=f[p].Count===0?!1:!0,this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r.existInvalid=b,r);if(m===i)return n===!1&&this._activeItem!==-1&&e===this._items[this._activeItem].toString().GetLength()?(t=t.Substring(u[p],t.GetLength()),b=!1,r.offset=e,r.text=t,r):(b=!0,r.exception=!0,r.existInvalid=!0,r);var w=-1;for(var l=0;l<f[p].Count;l++)w=0;return d===1?e=this._items[p].toString().GetLength():e=m,w===-1?(t=t.Substring(u[p],t.GetLength()),b=!1):(t=t.Substring(u[p],t.GetLength()),b=!0),this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r},n.prototype.Replace=function(e,t,n,r){return this.Insert(e,n,r)},n.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e=0,this._activeItem=-1,this.text="";if(this._minLength>0)for(var n=0;n<this._minLength;n++)this.text+=this.GetPromptChar();return this._trueLength=0,e},n.prototype.SaveOldState=function(){this._lastActiveItem=this._activeItem,this.oldText=this.text},n.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this._lastActiveItem;this._activeItem=e;if(e>=0&&e<this._itemCount)this.text=this._items[e].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoItem=this._activeItem},n.prototype.Undo=function(){if(this.undoTempText===this.text)return;this.undoTempText=this.text;var e=this._activeItem;this._activeItem=this._undoItem,this._undoItem=e;if(this._activeItem>=0&&this._activeItem<this._itemCount)this.text=this._items[this._activeItem].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SetTextInternal=function(e,t,n,r){var i,s=new Array(this._itemCount),o=new Array(this._itemCount),u=new Array(this._itemCount);for(i=0;i<this._itemCount;i++)s[i]=0,o[i]=0,u[i]=!1;for(i=0;i<this._itemCount;i++){var a=this._items[i].toString();while(s[i]<e.GetLength()){var f=this.JudgeIfValid(a,o[i],e,s[i]);o[i]=f.index1,s[i]=f.index2;if(!f.isValid&&n===!0){u[i]=!0;break}if(!f.isValid&&a.GetLength()===s[i])break;if(!f.isValid&&a.GetLength()>s[i]){u[i]=!0;break}if(o[i].toString().GetLength()===a.GetLength()&&s[i].toString().GetLength()<e.GetLength()&&n===!0){u[i]=!0;break}if(s[i].toString().GetLength()===e.GetLength()&&o[i].toString().GetLength()<a.GetLength()){u[i]=!0;break}}}var l=this._itemCount;for(i=0;i<this._itemCount;i++)if(u[i]===!1){l===this._itemCount&&(l=i);var a=this._items[i].toString();if(a.GetLength()===this._maxLength&&e.GetLength()>=this._maxLength){l=i;break}}var c=l,h={};h.existInvalid=!1,h.exception=!1;if(c>=this._itemCount){var p="";h.exception=!0;for(i=0;i<this._minLength;i++)p+=this.GetPromptChar();return e.Substring(0,this._minLength)===p?(e=e.Substring(this._minLength,e.GetLength()),h.offset=this._minLength,h.text=e,h.existInvalid=!1,h.exception=!0,this.Clear(),h):(h.text=e,this.text=p,this._activeItem=-1,h.existInvalid=!0,h.exception=!0,h)}return this._activeItem=c,this.text=this._items[c].toString(),this._trueLength=this._items[c].toString().GetLength(),h.offset=this._trueLength,h.text=e.Substring(this._trueLength,e.GetLength()),h},n.prototype.PerformSpin=function(e,t,n){var r=this._itemCount;if(r<t)if(r>1)while(r<t)t-=r;else t=1;else if(r<-t)if(r>1)while(r<-t)t+=r;else t=-1;if(t===0)return e;var i;if(this._activeItem===-1)i=t>0?0:r-1;else{i=this._activeItem+t;if(i<0||i>=r)n?(i=t>0?i-r:i+r,t>0&&i<this._activeItem?this._activeItem<r-1?i=r-1:i=0:t<0&&i>this._activeItem&&(this._activeItem>0?i=0:i=r-1)):i=t>0?r-1:0}var s=this._items[i].toString().GetLength();return e=Math.min(e,s),this._activeItem=i,this.text=this._items[i].toString(),this._trueLength=this._activeItem===-1?0:this.text.GetLength(),e},n.prototype.Clear=function(){this._activeItem=-1},n.prototype.JudgeIfValid=function(t,n,r,i){var s=e.CharProcess.CharEx,o={};o.index1=n,o.index2=i,o.isValid=!1;if(n>=t.GetLength())return o;if(t.Substring(n,n+1)===r.Substring(i,i+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(this._owner.GetAutoConvert()===!1)return o;if(r.Substring(i,i+1).charCodeAt(0)>=65345&&r.Substring(i,i+1).charCodeAt(0)<=65370){var u=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(r.Substring(i,i+1));if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(u);return f===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(r.Substring(i,i+1).charCodeAt(0)>=65313&&r.Substring(i,i+1).charCodeAt(0)<=65338){var l=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(r.Substring(i,i+1));if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(l);return a===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsUpper(r.Substring(i,i+1))){var a=r.Substring(i,i+1).toLowerCase();if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(r.Substring(i,i+1)).text;if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(a).text;return l===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsLower(r.Substring(i,i+1))){var f=r.Substring(i,i+1).toUpperCase();if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(r.Substring(i,i+1)).text;if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(l).text;return u===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsHiragana(r.Substring(i,i+1))){var c=s.ToKatakana(r.Substring(i,i+1));if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var h=s.ToKatakana(c),p=s.ToHalfWidthEx(h);return p.length===1&&p===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2)?(n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&s.IsFullWidth(r.Substring(i,i+1))){var h=s.ToKatakana(r.Substring(i,i+1)),p=s.ToHalfWidthEx(h);if(p.length===1&&p===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2))return n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(r.Substring(i,i+1));return d==="ゔ"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&!s.IsFullWidth(r.Substring(i,i+1))){var v;i+1<r.GetLength()&&s.IsKatakana(r.Substring(i+1,i+2))&&!s.IsFullWidth(r.Substring(i+1,i+2))?v=r.Substring(i+1,i+2):v=" ";if(v===" "){var c=s.ToFullWidth(r.Substring(i,i+1)).text;if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="ゔ"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var m=s.ToFullWidth(r.Substring(i,i+2)),c=m.text,g=m.processedAll;if(c===t.Substring(n,n+1))return n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="ゔ"?g?"う゛"===t.Substring(n,n+2)?(n+=2,i+=2,o.index1=n,o.index2=i,o.isValid=!0,o):o:o:d===t.Substring(n,n+1)?(n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsFullWidth(r.Substring(i,i+1))){var y=s.ToHalfWidth(r.Substring(i,i+1));return y===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var b=s.ToFullWidth(r.Substring(i,i+1)).text;return b===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o},n}(b),x=function(){function e(e){this.fieldArray=[],this.fieldCount=0,this.fieldCount=e}return e.prototype.GetLength=function(){var e=0;for(var t=0;t<this.fieldCount;t++){var n=this.GetFieldByIndex(t);e+=n.GetLength()}return e},e.prototype.Add=function(e){e&&this.fieldArray.push(e)},e.prototype.AddRange=function(e){if(!e||e.length===0||this.fieldCount!==e.length)return;var t=new Array;for(var n=0;n<e.length;n++)t[n]=e[n];this.fieldArray=t},e.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},e.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++)e+=this.GetFieldByIndex(t).GetText();return e},e.prototype.GetFillingString=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField")t+=r.GetText();else for(var i=0;i<r._minLength;i++)t+=e}return t},e.prototype.SetText=function(e,t){},e.prototype.Insert=function(e,t,n){},e.prototype.Replace=function(e,t,n,r){},e.prototype.Delete=function(e,t){},e.prototype.PerformSpin=function(e,t,n){},e.prototype.GetFieldIndex=function(e,t){var n={},r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i],o=s.GetLength();if(e===r&&o===0||e>=r&&e<r+o)return n.index=i,n.offset=e-r,n;r+=o}if(e>=r){var s=this.fieldArray[this.fieldCount-1];return n.index=this.fieldCount-1,n.offset=s.GetLength(),n}},e.prototype.GetFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0;for(var r=0;r<e;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}var s=this.GetFieldByIndex(e);return s?(t.start=n,t.length=s.GetLength(),t):t},e}();e.FieldCollection=x;var T=function(){function n(){this.KeyActionList=null,this.Text="",this.Value=null,this.DroppedDown=!1,this.SelectionLength=0,this.SelectionStart=0,this.SelectionEnd=0,this.IsMouseDown=!1,this.OldSelectionStart=0,this.OldSelectionEnd=0,this._acceptCrlf=e.CrLfMode.NoControl,this._clipContent=e.ClipContent.IncludeLiterals,this._editMode=e.EditMode.Insert,this.__editModeInternal=e.EditMode.Insert,this._useClipboard=!0,this._readOnly=!1,this._autoPostBack=!1,this._highlightText=e.HighlightText.None,this._exitOnLeftRightKey=e.ExitOnLeftRightKey.None,this.FocusType=e.FocusType.None,this.IsInUpdatePanelAndAsyncPostBack=!1,this.NeedResetFocus=!1,this.NeedReCalCursorPos=!0,this.SpinBtnPressed=!1,this.DropDownBtnPressed=!1,this.OldValue="",this.ValueBeforeUndo="",this.FocusExit=!1,this.Delay=0,this.SpinOnKeys=!0,this.Wrap=!0,this.SpinEnabled=!0,this.Increment=1,this.Visible=!1,this.MouseButton=e.MouseButton.Default,this.TouchDropDownScale=1,this.UIUpdate=new e.InputUIUpdate(this),this.Format={Fields:null}}return n.prototype.Snap=function(){var e={Text:this.Text,Value:this.Value,SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd};return e},n.prototype.Revert=function(e){this.Text=e.Text,this.Value=e.Value,this.SelectionStart=e.SelectionStart,this.SelectionEnd=e.SelectionEnd},n.prototype.ReLoadData=function(){},n.prototype.GetOverwrite=function(){return this.GetEditMode()===e.EditMode.FixedInsert||this.GetEditMode()===e.EditMode.FixedOverwrite?this.GetEditMode()===e.EditMode.FixedOverwrite:this._getEditModeInternal()!==e.EditMode.Insert&&this._getEditModeInternal()!==e.EditMode.FixedInsert},n.prototype.GetImeMode=function(){return this.InputElement.style.imeMode||"auto"},n.prototype.SetImeMode=function(e){this.GetInputElement().style.imeMode=e},n.prototype.GetEnabled=function(){return this.GetInputElement().disabled},n.prototype.SetEnabled=function(e){e?t(this.GetInputElement()).removeAttr("diabled"):t(this.GetInputElement()).attr("diabled","true")},n.prototype.SetFocus=function(){t(this.GetInputElement()).focus()},n.prototype.GetDroppedDown=function(){return this.DroppedDown},n.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},n.prototype.SetSelectionStart=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),t=Math.min(t,this.Text.GetLength()),this.SetInnerSelectionStart(t),this.SetInnerSelectionEnd(t+this.SelectionLength),this.NeedReCalCursorPos=!0},n.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},n.prototype.SetSelectionLength=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),this.SelectionStart+t>this.Text.GetLength()&&(t=this.Text.GetLength()-this.SelectionStart),this.SelectionLength=t,this.SetInnerSelectionEnd(this.SelectionStart+t),this.NeedReCalCursorPos=!0},n.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e},n.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e},n.prototype.SetDroppedDown=function(e){if(!this.Enabled)return;this.DroppedDown=e},n.prototype.DoSpinUp=function(e,t){t==null&&(t=this.Increment),this.DoSpin("up",this.SelectionEnd,t)},n.prototype.DoSpinDown=function(e,t){t==null&&(t=this.Increment),this.DoSpin("down",this.SelectionEnd,t)},n.prototype.DoSpin=function(e,t,n){e==="down"&&(n*=-1);if(typeof t=="number"&&isNaN(t)||typeof n=="number"&&isNaN(n))return;var r=this.UIProcess.PerformSpin(t,n,this.Wrap);if(!r)return;typeof r.SelectionStart=="number"&&!isNaN(r.SelectionStart)&&(this.SelectionStart=r.SelectionStart),typeof r.SelectionEnd=="number"&&!isNaN(r.SelectionEnd)&&(this.SelectionEnd=r.SelectionEnd);if(r.Text!=null&&!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),e==="up"?this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")},n.prototype.GetExitOnLeftRightKey=function(){return this._exitOnLeftRightKey},n.prototype.SetExitOnLeftRightKey=function(e){this._exitOnLeftRightKey=e},n.prototype.GetAcceptsCrlf=function(){return this._acceptCrlf},n.prototype.SetAcceptsCrlf=function(e){this._acceptCrlf=e},n.prototype.SetInnerFocus=function(){this.FocusType=e.FocusType.ClientEvent,this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},n.prototype.UpdateDisplayText=function(e){this.UIUpdate.SetText(e),this.SetHideValue()},n.prototype.SetHideText=function(e){},n.prototype.SetSelection=function(t,n,r){if(t==null||n==null||isNaN(t)||isNaN(n))return;if(r&&e.Utility.IsIE10OrLater()){var i=this;setTimeout(function(){e.Utility.SetSelection(i.InputElement,t,n)},0)}else e.Utility.SetSelection(this.InputElement,t,n);this.SelectionStart=t,this.SelectionEnd=n,t===n&&(this.UIProcess.isMulSelected=!1)},n.prototype._getAutoPostBack=function(){return this._autoPostBack},n.prototype._setAutoPostBack=function(t){t=e.Utility.CheckBool(t),this._autoPostBack=t},n.prototype.GetUseClipboard=function(){return this._useClipboard},n.prototype.SetUseClipboard=function(e){this._useClipboard=e},n.prototype.GetClipContent=function(){return this._clipContent},n.prototype.SetClipContent=function(e){this._clipContent=e},n.prototype.GetTextHAlign=function(){return this.UIUpdate.GetTextHAlign()},n.prototype.SetTextHAlign=function(e){this.UIUpdate.SetTextHAlign(e)},n.prototype.GetEditMode=function(){return this._editMode},n.prototype.SetEditMode=function(e){if(e!==this._editMode){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this._editMode)?t=!0:this._isinsertGroup(this._editMode)&&this._isOverwriteGroup(e)&&(t=!0),this._editMode=e,this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._getEditModeInternal=function(){return this.__editModeInternal},n.prototype._setEditModeInternal=function(e){if(e!==this.__editModeInternal){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this.__editModeInternal)?t=!0:this._isinsertGroup(this.__editModeInternal)&&this._isOverwriteGroup(e)&&(t=!0),this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._isinsertGroup=function(t){return t===e.EditMode.Insert||t===e.EditMode.FixedInsert},n.prototype._isOverwriteGroup=function(t){return t===e.EditMode.Overwrite||t===e.EditMode.FixedOverwrite},n.prototype.GetHighlightText=function(){return this._highlightText},n.prototype.SetHighlightText=function(e){this._highlightText=e},n.prototype.GetReadOnly=function(){return this._readOnly},n.prototype.SetReadOnly=function(e){this._readOnly=e},n.prototype.GetTextboxValue=function(){return this.UIUpdate.GetText()},n.prototype.GetOldValue=function(){return this.OldValue},n.prototype.CanUndo=function(){return this.GetValue()===this.GetOldValue()?!1:!0},n.prototype.GetValue=function(){return""},n.prototype.DragStart=function(){this.DragStartElementID=this.ID},n.prototype.DragEnd=function(t){return this.DragStartElementID="",e.Utility.PreventDefault(t),!1},n.prototype.MouseOut=function(){if(this.IsMouseDown!==!0)return;if(this.MouseUpPointerType!==undefined&&this.MouseUpPointerType!==4&&this.MouseUpPointerType!=="mouse")return;var t=Math.min(this.OldSelectionStart,this.OldSelectionEnd),n=Math.max(this.OldSelectionStart,this.OldSelectionEnd),r=this.GetText().Substring(t,n);r!==""&&(this.SetSelection(this.OldSelectionStart,this.OldSelectionEnd),e.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},n.prototype.GetText=function(){return""},n.prototype.Focus=function(t){t.SelectionStart=this.SelectionStart;var n=this.UIProcess.Focus(t);e.Utility.CurrentActiveControlId=this.ID;if(!n)return;return n.Text!=null&&(this.Text=n.Text),n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.GetReadOnly()&&this.FocusType===e.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),n},n.prototype.LoseFocus=function(t){this.FireKeyExit();if((this.SpinBtnPressed||this.DropDownBtnPressed||this.DropDownObj&&this.DropDownObj.IsMouseOver)&&this.FocusType!==e.FocusType.KeyExit)return;return this.DroppedDown&&(this.DropDownBtnPressed=!1,this.CloseDropDown()),this.SetLastClientValues(),this.UIProcess.LoseFocus(t)},n.prototype.FireKeyExit=function(){},n.prototype.SetLastClientValues=function(){},n.prototype.MouseDown=function(t){var n=e.Utility.GetMouseButton(t);this.MouseButton=n,this.FocusType=e.FocusType.Click,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.IsMouseDown=!0,this.MouseDownX=t.x,this.MouseButton===e.MouseButton.Left&&(e.Utility.IsIE()||e.Utility.firefox)&&e.Utility.ClearSelection(this.GetInputElement()),this.DroppedDown&&this.CloseDropDown();if(this.IsNullFormat())return;var r=this.UIProcess.MouseDown(n);if(!r)return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.GetInputElement=function(){return this.InputElement},n.prototype.MouseUp=function(t){this.IsMouseDown=!1,this.MouseUpX=t.x,this.IsNullFormat();var n=this.UIProcess.MouseUp(this.InputElement,this.SelectionStart,this.SelectionEnd,this.MouseButton);if(!n)return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd);if(e.Utility.GetMouseButton(t)===e.MouseButton.Left&&this.MouseDownX!=null&&this.MouseDownX>this.MouseUpX){var r=this.SelectionStart;this.SelectionStart=this.SelectionEnd,this.SelectionEnd=r}this.MouseDownX=null,this.MouseButton=e.MouseButton.Default},n.prototype.MouseWheel=function(t){if(this.ImeMode===!0)return!1;if(this.GetSpinEnabled()){var n=e.Utility.GetMouseWheelValue(0,t);return n>0?this.PerformSpin("up"):n<0&&this.PerformSpin("down"),e.Utility.PreventDefault(t),!1}},n.prototype.PreProcessContextMenu=function(e){return!1},n.prototype.ProcessReservedKey=function(e){switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 112:case 114:case 115:case 116:case 117:case 121:case 122:case 123:case 65657:case 131081:case 196617:case 131179:case 131181:case 131120:case 131259:case 131261:case 131146:case 196680:case 196681:case 196682:case 131153:case 131156:case 196689:case 262157:return!0}return!1},n.prototype.IsNullFormat=function(){return!1},n.prototype.SetHideValue=function(){var e="";this.GetValue()!=null&&(e=this.GetValue().toString()),this.SetHideText(e)},n.prototype.KeyDown=function(t){var n={},r=t.FuncKeysPressed,i=t.KeyCode;if(this.PreProcessContextMenu(i))return n.System=!1,n;if(i===229)return n.System=!0,n;r.Shift&&(i|=65536),r.Ctrl&&(i|=131072);if(r.Alt){if(this.AccessKey!=null&&this.AccessKey.toLowerCase()===String.fromCharCode(i).toLowerCase())return this.SelectionStart=0,this.SelectionEnd=this.Text.GetLength(),n.System=!0,n;i|=262144}if(this.ProcessReservedKey(i))return n.System=!0,n;var s=i|524288;if(i!==s){var o=this.UIProcess.GetKeyActionName(s,this.Shortcuts);if(o!=null){var u=!0,a=!1;if(u)return n.System=!1,n}}var f=this.UIProcess.GetKeyActionName(i,this.Shortcuts);switch(f){case"DropDown":return this.GetDropDownEnabled()&&(this.PerformDropDown(),n.System=!1),n;case"SpinUp":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("up"),n.System=!1),n;case"SpinDown":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("down"),n.System=!1),n}var l=!1;if(this.KeyActionList)for(var c=0;c<this.KeyActionList.length;c++)if(this.KeyActionList[c]===i.toString()){l=!0;break}if(this.DroppedDown&&this.DropDownObj&&i!=262182&&i!=262184&&i!=27&&i!=118&&i!=9&&i!=65545){f!=null&&this.DropDownObj.IsShortcut(i)&&(f=null);if(!f){if(i===93)return this.CloseDropDown(),!0;n.System=!1;if(!l){var h={keyCode:0,shiftKey:!1,ctrlKey:!1,altKey:!1};return h.keyCode=t.KeyCode,h.shiftKey=r.Shift,h.ctrlKey=r.Ctrl,h.altKey=r.Alt,this.DropDownObj.KeyDown(h),n}}}t.KeyAction=f,t.KeyCode=i;var p=this.UIProcess.KeyDown(t);if(!p){switch(i){case 27:return this.DroppedDown&&(this.CloseDropDown(),this.SetInnerFocus()),n.System=!1,n;case 262182:case 262184:return l||(this.PerformDropDown(),n.System=!0),n;case 262152:return n.KeyCode=10,n;case 38:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("up"),n.System=!1),n;case 40:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("down"),n.System=!1),n;case 13:return n.System=!0,n}if(this.IsNullFormat()||i===20||r&&(r.Ctrl||r.Alt)||i===91||i===144||i===145||i===93||i===92)return n.System=!0,n;if(r&&r.Shift&&i===65552)return n.System=!0,n;if(this.Type==="Number")return n.System=!0,n;if(i===120||i===123||i===113||i===118||i===119)return n;var d=this.UIProcess.FireEvent(this,this.InvalidInputEvent,null,"InvalidInput");return d!=null&&(this.FocusType=d),n}p.Overwrite!=null&&this.GetOverwrite()!==p.Overwrite&&(this._getEditModeInternal()===e.EditMode.Insert?this._setEditModeInternal(e.EditMode.Overwrite):this._getEditModeInternal()===e.EditMode.Overwrite&&this._setEditModeInternal(e.EditMode.Insert));if(p.Text!=null&&!this.UpdateText(p))return n.System=!1,n;var v=this.GetSelectionLength();p.SelectionStart!=null&&(this.SelectionStart=p.SelectionStart),p.SelectionEnd!=null&&(this.SelectionEnd=p.SelectionEnd);var m=this.GetSelectionLength();p.System||(p.FocusExit?(this.SetHideValue(),p.System=!1):(this.UpdateDisplayText(this.Text),v===0&&m!==0?e.Utility.ShouldFireOnSelectStart=!0:e.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),e.Utility.ShouldFireOnSelectStart=!1,p.HasSetSelection=!0));if(p.EventInfo)if(p.EventInfo.Type==="KeyExit")this.EventInfo=p.EventInfo;else{var d=this.UIProcess.FireEvent(this,p.EventInfo.Name,p.EventInfo.Args,p.EventInfo.Type);d!=null&&(this.FocusType=d)}return p.FocusType!=null&&(this.FocusType=p.FocusType),n=p,n.KeyAction=f,n},n.prototype.GetImeInputText=function(t){var n=this.GetTextboxValue();if(n===this.Text)return"";var r;if(this.Text!==""){var i=Math.min(this.SelectionStart,this.SelectionEnd),s=Math.max(this.SelectionStart,this.SelectionEnd);if(s<this.Text.GetLength()){var o=this.Text.Substring(s,this.GetText().GetLength()),u=n.IndexOf(o);u!==-1?r=n.Substring(i,n.GetLength()-o.GetLength()):r=""}else r=n.Substring(i,n.GetLength())}else r=n;t==="ReInput"&&(r=r.Substring(0,r.GetLength()));if(t==="Record")return r;if(t==="LoseFocusInput"&&r==="")return"";this.ImeMode=!1,this.ImeSelect=!1;if(t==="ReInput"||t==="ClickInput")this.FocusType=e.FocusType.ImeInput,this.InputElement.blur(),this.InputElement.focus();return r},n.prototype.KeyUp=function(e){},n.prototype.GetVisible=function(){return!0},n.prototype.PerformDropDown=function(){if(!this.Enabled||!this.GetDropDownEnabled())return;if(!this.GetVisible())return;if(!this.DroppedDown){if(this.DropDownObj&&this.DropDownObj.GetDropDownContainer!==undefined){var t=this.DropDownObj.GetDropDownContainer();e.Utility.IsTouchMouseDown?e.Utility.SetZoomStyle(t,this.TouchDropDownScale,this.DropDownObj.GetAlign()):e.Utility.SetZoomStyle(t,"")}this.ShowDropDown()}else this.CloseDropDown()},n.prototype.DropDownBtnMouseDown=function(t){this.DropDownBtnPressed=!0;if(t!==e.MouseButton.Left&&t!=null)return;this.PerformDropDown(),this.SetInnerFocus(),this.DroppedDown&&this.ResetLocation()},n.prototype.DropDownBtnMouseUp=function(){this.DropDownBtnPressed=!1,this.SetInnerFocus()},n.prototype.ResetLocation=function(){},n.prototype.DropDownBtnMouseOut=function(){this.DropDownBtnPressed&&(this.SetInnerFocus(),this.DropDownBtnPressed=!1)},n.prototype.ShowDropDown=function(e){e!=null&&this.UIUpdate.WriteCssStyle(e)},n.prototype.CloseDropDown=function(){this.DroppedDown=!1,this.DropDownObj.Close(),this.UIUpdate.ClearCssStyle();var e=this.UIProcess.FireEvent(this,this.DropDownCloseEvent,null,"DropDownClose");e!=null&&(this.FocusType=e)},n.prototype.PerformSpin=function(t){var n=this.Increment;if(this.IsNullFormat())this.SetSelection(this.SelectionStart,this.SelectionEnd);else if(!this.GetReadOnly()){t==="down"&&(n*=-1);var r=this.UIProcess.PerformSpin(this.SelectionEnd,n,this.Wrap);if(!r)return;if(r.Text!=null&&!this.UpdateText(r))return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.SelectionEnd=r.SelectionStart),this.UpdateDisplayText(this.Text),this.SetInnerFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)}var i=e.FocusType.ClientEvent;t==="up"?i=this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):t==="down"&&(i=this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")),i!=null&&(this.FocusType=i)},n.prototype.SpinBtnMouseDown=function(t,n){this.SpinBtnPressed=!0;if(this.DroppedDown){this.CloseDropDown(),this.SetInnerFocus();return}if(t!=e.MouseButton.Left&&t!=null)return;var r=n===!0?"up":"down";this.PerformSpin(r),this.SetInnerFocus();if(e.Utility.SpinTimer==null){var i=this;e.Utility.SpinTimer=setInterval(function(){i.PerformSpin(r)},this._getRealSpinDelay())}},n.prototype._getRealSpinDelay=function(){return this.Delay===0?150:this.Delay},n.prototype.SpinBtnMouseUp=function(){this.SpinBtnPressed&&(this.SetInnerFocus(),this.SpinBtnPressed=!1),e.Utility.SpinTimer!=null&&(clearInterval(e.Utility.SpinTimer),e.Utility.SpinTimer=null)},n.prototype.SelectStart=function(e){if(this.IsNullFormat())return!0;var t=this.UIProcess.SelectStart(this.InputElement,e,this.MouseButton);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart);if(t.SetFalse!=null)return t.SetFalse},n.prototype.DoubleClick=function(){if(this.IsNullFormat())return!0;var e=this.UIProcess.DoubleClick(this.SelectionStart);e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.Undo=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Undo();if(!e)return;if(e.Text!=null){if(!this.UpdateText(e))return;this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)}},n.prototype.Cut=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Cut(this.GetClipContent(),this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),e.Color!==null&&this.UIUpdate.SetForeColor(e.Color)},n.prototype.Copy=function(){this.UIProcess.Copy(this.GetClipContent(),this.SelectionStart,this.SelectionEnd)},n.prototype.Paste=function(t){if(this.GetReadOnly())return!1;if(this.IsNullFormat())return!1;var n=e.Utility.GetPasteData(this.GetUseClipboard());t&&(n=t);var r=this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,n);return r?r.Text!=null&&!this.UpdateText(r)?!1:(r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type),r.FocusExit!=null&&(this.FocusExit=r.FocusExit),!0):!1},n.prototype.Delete=function(){if(this.GetReadOnly())return;var e=this.UIProcess.ProcessDelete(this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.DoDeleteExtraWork())},n.prototype.DoDeleteExtraWork=function(){},n.prototype.SelectAll=function(){var t=this.UIProcess.SelectAll();t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.FocusType=e.FocusType.ContextMenu},n.prototype.DragDrop=function(t){if(!e.Utility.IsIE()&&this.GetReadOnly())return!1;if(this.DragStartElementID===this.ID)return this.DragStartElementID="",!1;var n=this.UIProcess.Paste(0,0,t);if(!n)return;if(n.Text!=null){if(!this.UpdateText(n))return;e.Utility.IsIE()||this.SetInnerFocus()}n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),n.EventInfo!=null&&this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type)},n.prototype.SetInnerText=function(e){this.SetText(e)},n.prototype.SetText=function(e){},n.prototype.GetInnerText=function(){return this.Text},n.prototype.UpdateText=function(e){return e!=null&&e.Text!=null&&(this.Text=e.Text),!0},n.prototype.RollBack=function(){},n.prototype.AddAllEventsHandler=function(){var n=this,r=this.GetInputElement();r!=null&&(t(r).bind("mousedown.wijinput",function(t){e.GlobalEventHandler.OnMouseDown(n,t)}),t(r).bind("mouseup.wijinput",function(t){e.GlobalEventHandler.OnMouseUp(n,t)}),t(r).bind("selectstart.wijinput",function(t){e.GlobalEventHandler.OnSelectStart(n,t)}),t(r).bind("keydown.wijinput",function(t){e.GlobalEventHandler.OnKeyDown(n,t)}),t(r).bind("keypress.wijinput",function(t){e.GlobalEventHandler.OnKeyPress(n,t)}),t(r).bind("keyup.wijinput",function(t){e.GlobalEventHandler.OnKeyUp(n,t)}),t(r).bind("dblclick.wijinput",function(t){e.GlobalEventHandler.OnDblClick(n,t)}),t(r).bind("beforecopy.wijinput",function(t){e.GlobalEventHandler.OnHTML5BeforeCopy(n,t)}),t(r).bind("cut.wijinput",function(t){e.GlobalEventHandler.OnHTML5Cut(n,t)}),t(r).bind("paste.wijinput",function(t){e.GlobalEventHandler.OnHTML5Paste(n,t)}),t(r).bind("focus.wijinput",function(t){e.GlobalEventHandler.OnFocus(n,t)}),t(r).bind("blur.wijinput",function(t){e.GlobalEventHandler.OnLostFocus(n,t)}),t(r).bind("mousewheel.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("DOMMouseScroll.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("dragstart.wijinput",function(t){e.GlobalEventHandler.OnDragStart(n,t)}),t(r).bind("dragend.wijinput",function(t){e.GlobalEventHandler.OnDragEnd(n,t)}),t(r).bind("mouseout.wijinput",function(t){e.GlobalEventHandler.OnMouseOut(n,t)}),t(r).bind("drop.wijinput",function(t){e.GlobalEventHandler.OnDrop(n,t)}),t(r).bind("touchstart.wijinput",function(t){e.GlobalEventHandler.OnTouchStart(n,t)}),t(r).bind("touchend.wijinput",function(t){e.GlobalEventHandler.OnTouchEnd(n,t)}),t(r).bind("select.wijinput",function(t){e.GlobalEventHandler.OnSelect(n,t)}),e.Utility.safari&&(t(r).bind("dragenter.wijinput",function(e){n._safariDropText=getSelection().toString()}),t(r).bind("dragleave.wijinput",function(e){n._safariDropText=null})),t(r).bind("compositionstart.wijinput",function(t){e.GlobalEventHandler.OnCompositionStart(n,t)}),t(r).bind("compositionupdate.wijinput",function(t){e.GlobalEventHandler.OnCompositionUpdate(n,t)}),t(r).bind("compositionend.wijinput",function(t){e.GlobalEventHandler.OnCompositionEnd(n,t)}),e.Utility.GetClientOS()==="Android"&&t(r).bind("webkitEditableContentChanged.wijinput",function(t){e.GlobalEventHandler.OnWebkitEditableContentChanged(n,t)}))},n.prototype.ResetData=function(e){this.SetText(e.ResetData)},n.prototype._createElementForNoSpinAndNoDropDown=function(e){return e},n.prototype._addControlEventHandler=function(){},n.prototype._reCreate=function(){},n.prototype._onSpinPropertyChanged=function(e){e=e.toLowerCase(),e==="alignment"||e==="position"?this._getRealSpinVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="spinupimage"||e==="spindownimage"||e==="pressedspinupimage"||e==="pressedspindownimage")},n.prototype._onDropDownPropertyChanged=function(e){e=e.toLowerCase(),e==="position"?this._getRealDropDownVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="buttonimage"||e==="pressedbuttonimage")},n.prototype._isSupportClipBoard=function(){return this.GetUseClipboard()?e.Utility.IsIE()?!0:!1:!0},n.prototype._onpropertyChanged=function(){},n.prototype.GetSpinDelay=function(){return this.Delay},n.prototype.SetSpinDelay=function(e){this.Delay=e},n.prototype.GetSpinEnabled=function(){return this.SpinEnabled&&this.Enabled},n.prototype.SetSpinEnabled=function(e){this.SpinEnabled=e},n.prototype.GetSpinIncrement=function(){return this.Increment},n.prototype.SetSpinIncrement=function(e){this.Increment=e},n.prototype.GetSpinOnKeys=function(){return this.SpinOnKeys},n.prototype.SetSpinOnKeys=function(e){this.SpinOnKeys=e},n.prototype.GetSpinVisible=function(){return this.Visible},n.prototype._getRealSpinVisible=function(){return this.GetSpinVisible()},n.prototype.SetSpinVisible=function(e){this.Visible=e},n.prototype.GetSpinWrap=function(){return this.Wrap},n.prototype.SetSpinWrap=function(e){this.Wrap=e},n.prototype.GetAutoDropDown=function(){return this._dropDown.AutoDropDown},n.prototype.SetAutoDropDown=function(e){this._dropDown.SetAutoDropDown(e)},n.prototype.GetDropDownButtonImageUrl=function(){return this._dropDown.GetButtonImage()},n.prototype.SetDropDownButtonImageUrl=function(e){this._dropDown.SetButtonImage(e)},n.prototype.GetDropDownClosingAnimation=function(){return this._dropDown.ClosingAnimation},n.prototype.SetDropDownClosingAnimation=function(e){this._dropDown.SetClosingAnimation(e)},n.prototype.GetDropDownShadow=function(){return this._dropDown.DropDownShadow},n.prototype.SetDropDownShadow=function(e){this._dropDown.SetDropDownShadow(e)},n.prototype.GetDropDownEnabled=function(){return this._dropDown.GetEnabled()&&this.Enabled},n.prototype.SetDropDownEnabled=function(e){this._dropDown.SetEnabled(e)},n.prototype.GetDropDownOpeningAnimation=function(){return this._dropDown.OpeningAnimation},n.prototype.SetDropDownOpeningAnimation=function(e){this._dropDown.SetOpeningAnimation(e)},n.prototype.GetDropDownPosition=function(){return this._dropDown.Position},n.prototype.SetDropDownPosition=function(e){this._dropDown.SetPosition(e)},n.prototype.GetPressedDropDownButtonImageUrl=function(){return this._dropDown.GetPressedButtonImage()},n.prototype.SetPressedDropDownButtonImageUrl=function(e){this._dropDown.SetPressedButtonImage(e)},n.prototype.GetDropDownVisible=function(){return this._dropDown.Visible},n.prototype._getRealDropDownVisible=function(){return this.GetDropDownVisible()},n.prototype.SetDropDownVisible=function(e){this._dropDown.SetVisible(e)},n}();e.BaseInputControl=T;var N;(function(e){e._map=[],e.OctalAscII=0,e.HexAscII=1,e.HexUnicode=2,e.DefinedCharBase=3,e.DefinedCharAddition=4,e.CharSubset=5,e.EnumGroup=6,e.Quantifier=7,e.PromptChar=8,e.Unknow=9})(N||(N={}));var C=function(){function t(){}return t.DBCS_A=e.CharProcess.CharEx.ToFullWidth("A").text,t.DBCS_a=e.CharProcess.CharEx.ToFullWidth("a").text,t.DBCS_B=e.CharProcess.CharEx.ToFullWidth("B").text,t.DBCS_D=e.CharProcess.CharEx.ToFullWidth("D").text,t.DBCS_J=e.CharProcess.CharEx.ToFullWidth("J").text,t.DBCS_K=e.CharProcess.CharEx.ToFullWidth("K").text,t.DBCS_W=e.CharProcess.CharEx.ToFullWidth("W").text,t.DBCS_X=e.CharProcess.CharEx.ToFullWidth("X").text,t.DBCS_Z=e.CharProcess.CharEx.ToFullWidth("Z").text,t.DBCS_T=e.CharProcess.CharEx.ToFullWidth("T").text,t.DBCS_M=e.CharProcess.CharEx.ToFullWidth("M").text,t.DBCS_I=e.CharProcess.CharEx.ToFullWidth("I").text,t.DBCS_N=e.CharProcess.CharEx.ToFullWidth("N").text,t.DBCS_G=e.CharProcess.CharEx.ToFullWidth("G").text,t.DBCS_E=e.CharProcess.CharEx.ToFullWidth("E").text,t.DBCS_V=e.CharProcess.CharEx.ToFullWidth("V").text,t.DBCS_z=e.CharProcess.CharEx.ToFullWidth("z").text,t.DBCS_0=e.CharProcess.CharEx.ToFullWidth("0").text,t.DBCS_1=e.CharProcess.CharEx.ToFullWidth("1").text,t.DBCS_9=e.CharProcess.CharEx.ToFullWidth("9").text,t.DBCS_F=e.CharProcess.CharEx.ToFullWidth("F").text,t.DBCS_f=e.CharProcess.CharEx.ToFullWidth("f").text,t.DBCS__=e.CharProcess.CharEx.ToFullWidth("_").text,t.ParseFormat=function(d,v){t.Owner=v;var m=new k(t.Owner,0,!1);if(d===null||d.length===0){var g=new E(t.Owner),b=new Array;g._bitState=b;var x=new y(t.Owner,!0),T=new i(t.Owner,!0);x.Add(T);var C=new r(t.Owner,!0);x.Add(C);var L=new c(t.Owner,!0);return x.Add(L),g.FilterField(0,2147483647,x,b),g.InitialText(""),g._trueLength=0,m.PushBack(g),m.formatIsNull=!0,m}var A=0,O="",M=N.PromptChar,_=N.CharSubset,D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen,j;while(d.length>A){switch(H){case N.Unknow:throw"InvalidParameter";case N.CharSubset:var F=t.AnalyseCharSubset(P),x=F.uf;if(!F.Result)throw"Invalid parameter";j=x,M=N.CharSubset;break;case N.DefinedCharAddition:if(P==="\\K")j=new h(t.Owner,!0);else if(P==="\\H")j=new r(t.Owner,!0);else if(P==="\\N")j=new l(t.Owner,!0);else if(P==="\\"+t.DBCS_K)j=new p(t.Owner,!0);else if(P==="\\"+t.DBCS_J)j=new s(t.Owner,!0);else if(P==="\\"+t.DBCS_M)j=new o(t.Owner,!0);else if(P==="\\"+t.DBCS_I)j=new u(t.Owner,!0);else if(P==="\\"+t.DBCS_G)j=new a(t.Owner,!0);else if(P==="\\"+t.DBCS_N)j=new f(t.Owner,!0);else if(P==="\\"+t.DBCS_Z)j=new i(t.Owner,!0);else{if(P!=="\\"+t.DBCS_T)throw"argument null";j=new c(t.Owner,!0)}M=N.CharSubset;break;case N.EnumGroup:var I=[];if(t.AnalyseEnumGroup(P,I)){var q=new S(t.Owner);q.Init(I),m.PushBack(q),M=N.EnumGroup,A+=B;var R=t.GetKeyWord(d,A);P=R.KeyWord,H=R.KeyType,B=R.KeyLen;continue}throw"invalid parameter";case N.OctalAscII:try{var U=P.Substring(1);U=parseInt(U,8);if(U===0)throw"argument exception";var z=String.fromCharCode(U);M===N.PromptChar?O+=z:(O=z,M=N.PromptChar)}catch(W){throw"invalid parameter"}break;case N.HexAscII:case N.HexUnicode:try{var U=P.Substring(2);U=parseInt(U,16);if(U===0)throw"argument exception";var z=String.fromCharCode(U);M===N.PromptChar?O+=z:(O=z,M=N.PromptChar)}catch(W){throw"invalid parameter"}break;case N.PromptChar:M===N.PromptChar?O+=P:(O=P,M=N.PromptChar);break;case N.Quantifier:throw"invalid parameter";default:throw"invalid parameter"}A+=B;var X=1,V=1;if(A<d.length){D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen;switch(H){case N.Unknow:throw"invalid parameter";case N.CharSubset:case N.DefinedCharAddition:case N.EnumGroup:_=N.CharSubset;break;case N.Quantifier:var $=t.AnalyseQuantifier(P);V=$.Min,X=$.Max;if(!$.Result)throw"invalid parameter";A+=B,D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen,_=N.Quantifier;break;case N.OctalAscII:case N.HexUnicode:case N.HexAscII:case N.PromptChar:_=N.PromptChar}if(M===N.PromptChar){if(_!==N.PromptChar){if(_===N.Quantifier)throw"invalid parameter";m.PushBack(new w(O))}}else{var J=new E(t.Owner);J.FilterField(V,X,j,[!1,!1,!1]),J.InitialText(e.Utility.ToString(J.GetPromptChar(),V)),J._trueLength=0,m.PushBack(J)}}else if(M===N.PromptChar)m.PushBack(new w(O));else{var J=new E(t.Owner);J.FilterField(1,1,j),m.PushBack(J)}}for(var K=0;K<m.fieldCount;K++)if(!(m.GetFieldByIndex(K)instanceof w))break;if(K===m.fieldCount)throw"invalid parameter";return m},t.ParseFillExpression=function(n,r){var i={};i.Expression="",i.Result=!0;if(n==="{}")return i.Expression="{}",i.Result=!0,i;if(n!==undefined&&n!==null&&n.length>0)try{var s=n,o="\0",u=t.ParseFillingString(s);s=u.Format,o=u.FillingChar;if(o!=="\0"){if(!t.NullParse(s))throw"argument exception";r!==undefined&&r!==null&&r.fieldCount>0?i.Expression=r.GetFillingString(o):i.Expression=n}else i.Expression=s}catch(a){throw"argument exception"}else i.Expression=null;return i},t.ParseFillingString=function(n){var r={};r.Format=n,r.FillingChar="\0",r.Result=!1;if(n===undefined||n===null||n.length===0)return r.Result=!1,r;var i=n.indexOf("{"),s=n.indexOf("}");if(i===-1&&s===-1)return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r;while(i>0&&n.charAt(i-1)==="\\")i=n.indexOf("{",i+1);while(s>0&&n.charAt(s-1)==="\\")s=n.indexOf("}",s+1);if(i<s){if(i===-1)return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r;if(s-i===1)r.Format="";else{if(n.charAt(i+1)==="{")throw"argument exception";if(n.charAt(i+1)==="\\"){if(!(i+2<s))throw"arugment exception";i++}r.FillingChar=n.charAt(i+1)}return r.Result=!0,r}return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r},t.RemoveEscapeChar=function(t){if(t.indexOf("\\")!==-1){var n="",r=t.length;for(var i=0;i<r;i++){if(t.charAt(i)==="\\"){i+1<r&&(n+=t.charAt(++i));continue}n+=t.charAt(i)}return n}return t},t.NullParse=function(n){var r=t.FindSpecialCh(n,"{",0),i=t.FindSpecialCh(n,"}",0);if(r>-1&&i>-1&&i>r){if(t.FindSpecialCh(n,"{",r+1)>-1)return!1;if(t.FindSpecialCh(n,"}",i+1)>-1)return!1}return!0},t.FindSpecialCh=function(t,n,r){var i=0,s=r-1;do{s=t.indexOf(n,s+1);if(s===0||s===-1)return s;for(var o=s-1;o>0;o--){if(t.charAt(o)!=="\\")break;i++}}while(t.charAt(s-1)==="\\"&&i%2!==0);return s},t.GetKeyWord=function(n,r){var i={};i.KeyLen=0,i.KeyType=N.Unknow,i.KeyWord=null;if(r>=n.length)return i;var s=n.charAt(r);switch(s){case"\\":var o=t.GetEscapeCharLength(n.Substring(r),i.KeyType,i.KeyLen);if(o.Result)return i.KeyLen=o.KeyLen,i.KeyType=o.KeyType,i.KeyWord=n.substr(r,i.KeyLen),i;var u=n.charAt(r+1);return u==="A"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[A-Z]",i):u===t.DBCS_A?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_A+"-"+t.DBCS_Z+"]",i):u==="a"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[a-z]",i):u===t.DBCS_a?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+"]",i):u==="D"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-9]",i):u===t.DBCS_D?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+"]",i):u==="B"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-1]",i):u===t.DBCS_B?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_1+"]",i):u==="X"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-9A-Fa-f]",i):u===t.DBCS_X?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+t.DBCS_A+"-"+t.DBCS_F+t.DBCS_a+"-"+t.DBCS_f+"]",i):u==="W"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[a-zA-Z_0-9]",i):u===t.DBCS_W?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+t.DBCS_A+"-"+t.DBCS_Z+t.DBCS__+t.DBCS_0+"-"+t.DBCS_9+"]",i):u==="K"||u===t.DBCS_K||u===t.DBCS_J||u===t.DBCS_Z||u==="H"||u===t.DBCS_T||u===t.DBCS_M||u===t.DBCS_I||u===t.DBCS_G||u===t.DBCS_N||u==="N"||u===t.DBCS_E||u===t.DBCS_V?(i.KeyLen=2,i.KeyType=N.DefinedCharAddition,i.KeyWord=n.substr(r,2),i):t.IsSpecialChar(u)?(i.KeyLen=2,i.KeyType=N.PromptChar,i.KeyWord=n.substr(r+1,1),i):(i.KeyWord="",i);case"{":var a=n.indexOf("}",r+1);return a===-1?(i.KeyWord="",i):(i.KeyType=N.Quantifier,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i);case"[":var a=r,f=0;do{a=n.indexOf("]",a+1);if(a===-1)return"";for(var l=a-1;l>0;l--){if(n.charAt(l)!=="\\")break;f++}}while(n.charAt(a-1)==="\\"&&f%2!==0);return i.KeyType=N.CharSubset,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i;case"(":var a=r;do{a=n.indexOf(")",a+1);if(a===-1)return""}while(n.charAt(a-1)==="\\");return i.KeyType=N.EnumGroup,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i;case"*":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{0,}",i;case"+":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{1,}",i;case"?":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{0,1}",i;default:var c=r+1;for(;c<n.length;c++)if(t.IsSpecialChar(n.charAt(c)))break;return i.KeyType=N.PromptChar,i.KeyLen=c-r,i.KeyWord=n.substr(r,i.KeyLen),i}},t.IsSpecialChar=function(t){return t==="\\"||t==="{"||t==="}"||t==="["||t==="]"||t==="("||t===")"||t==="."||t==="*"||t==="+"||t==="?"},t.GetEscapeCharLength=function(n,r,i){var s={};s.Result=!1,s.KeyType=r,s.Length=i;if(n.charAt(0)!=="\\")return s;var o=1,u=n.charAt(1);return u==="x"?n.length<o+3?s:(s.Length=4,s.KeyType=N.HexAscII,s.Result=!0,s):u==="u"?n.length<o+5?s:(s.Length=6,s.KeyType=N.HexUnicode,s.Result=!0,s):t.IsOctalChar(u)?n.length<o+3?s:(s.Length=4,s.KeyType=N.OctalAscII,s.Result=!0,s):s},t.IsOctalChar=function(t){return t>="0"&&t<="7"},t.AnalyseQuantifier=function(t){var n={};n.Min=-1,n.Max=-1,n.Result=!1;var r=t.indexOf(",",1);if(r===-1)try{return n.Min=parseInt(t.substr(1,t.length-2)),n.Max=n.Min,n.Result=n.Max>0,n}catch(i){return n.Result=!1,n}try{return n.Min=parseInt(t.substr(1,r-1)),r===t.length-2?n.Max=Math.pow(2,31):n.Max=parseInt(t.substr(r+1,t.length-r-2)),n.Min<0||n.Min>n.Max||n.Max===0?(n.Result=!1,n):(n.Result=!0,n)}catch(i){return n.Result=!1,n}},t.AnalyseCharSubset=function(n,d){var v={};v.uf=d,v.Result=!1;var b=[],w=1,E=!0,S="";if(n==="[]"){b.push(new i(t.Owner,!0)),b.push(new r(t.Owner,!0)),b.push(new c(t.Owner,!0));if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<d.filterArray.length;x++)b.push(d.filterArray[x]);return v.uf=new y(t.Owner,!0),v.uf.AddRange(b),v.Result=!0,v}if(n==="[^]"){b.push(new i(t.Owner,!1)),b.push(new r(t.Owner,!1)),b.push(new c(t.Owner,!1));if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<d.filterArray.length;x++)b.push(d.filterArray[x]);return v.uf=new y(t.Owner,!0),v.uf.AddRange(b),v.uf.filterArray[0]._include=!1,v.uf.filterArray[1]._include=!1,v.uf.filterArray[2]._include=!1,v.Result=!0,v}n.charAt(w)==="^"&&(E=!1,w++);while(w<n.length-1){var T=n.charAt(w),C=N.HexAscII,k=0;switch(T){case"-":return v.Result=!1,v;case"^":if(E===!1)throw"invalid fromat";if(S.length>0){var L=new m(S,"");L._include=E,b.push(L)}if(b.length>0){v.uf=new y(t.Owner,!0),v.uf.AddRange(b);for(var x=0;x<v.uf.filterArray.length;x++)if(!v.uf.filterArray[x]._include)return v.Result=!1,v;var A=t.AnalyseCharSubset("["+n.substr(w,n.length-w),v.uf);return v.uf=A.uf,v.Result=A.Result,v}return v.Result=!1,v;case"\\":var O=t.GetEscapeCharLength(n.substr(w),C,k);C=O.KeyType,k=O.Length;if(O.Result){var M=16,_=null;C===N.OctalAscII?(M=8,_=n.substr(w+1,k-1)):_=n.substr(w+2,k-2),n=n.substring(0,w)+n.substr(w+k);var D=String.fromCharCode(parseInt(_,M));n=n.substring(0,w)+D+n.substr(w);continue}var P=n.charAt(w+1);if(P==="A")b.push(new g("A","Z",t.Owner,!0)),w++;else if(P===t.DBCS_A)b.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),w++;else if(P==="a")b.push(new g("a","z",t.Owner,!0)),w++;else if(P===t.DBCS_a)b.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),w++;else if(P==="D")b.push(new g("0","9",t.Owner,!0)),w++;else if(P===t.DBCS_D)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),w++;else if(P==="B")b.push(new g("0","1",t.Owner,!0)),w++;else if(P===t.DBCS_B)b.push(new g(t.DBCS_0,t.DBCS_1,t.Owner,!0)),w++;else if(P==="X")b.push(new g("0","9",t.Owner,!0)),b.push(new g("A","F",t.Owner,!0)),b.push(new g("a","f",t.Owner,!0)),w++;else if(P===t.DBCS_X)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),b.push(new g(t.DBCS_A,t.DBCS_F,t.Owner,!0)),b.push(new g(t.DBCS_a,t.DBCS_f,t.Owner,!0)),w++;else if(P==="W")b.push(new g("0","9",t.Owner,!0)),b.push(new g("A","Z",t.Owner,!0)),b.push(new g("a","z")),S+="_",w++;else if(P===t.DBCS_W)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),b.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),b.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),S+=t.DBCS__,w++;else if(P==="K")b.push(new h(t.Owner,!0)),w++;else if(P==="H")b.push(new r(t.Owner,E)),w++;else if(P===t.DBCS_K)b.push(new p(t.Owner,!0)),w++;else if(P===t.DBCS_J)b.push(new s(t.Owner,!0)),w++;else if(P===t.DBCS_M)b.push(new o(t.Owner,!0)),w++;else if(P===t.DBCS_I)b.push(new u(t.Owner,!0)),w++;else if(P==="N")b.push(new l(t.Owner,!0)),w++;else if(P===t.DBCS_N)b.push(new f(t.Owner,!0)),w++;else if(P===t.DBCS_G)b.push(new a(t.Owner,!0)),w++;else if(P===t.DBCS_Z)b.push(new i(t.Owner,!0)),w++;else if(P===t.DBCS_T)b.push(new c(t.Owner,!0)),w++;else{if(P!=="\\"&&P!=="]"&&P!=="["&&P!=="-"&&P!=="^")return!1;if(S.indexOf(P)!==-1){w++;continue}S+=P,w++}break;default:if(n.length>w+2&&n.charAt(w+1)==="-"){var H=t.GetEscapeCharLength(n.substr(w+2),C,k);C=H.KeyType,k=H.Length;if(H.Result){var _=null,M=16;C===N.OctalAscII?(M=8,_=n.substr(w+2+1,k-1)):_=n.substr(w+2+2,k-2);var B=w+2;n=n.substring(0,B)+n.substr(B+k);var D=String.fromCharCode(parseInt(_,M));n=n.substring(0,B)+D+n.substr(B)}var j,F;n.charAt(w)>n.charAt(w+2)?(j=n.charAt(w+2),F=n.charAt(w)):(j=n.charAt(w),F=n.charAt(w+2));var I=new g(j,F,t.Owner,!0);b.push(I),w+=2;break}if(S.indexOf(T)!==-1){w++;continue}S+=T}w++}S.length>0&&b.push(new m(S,"",t.Owner,!0));var q=b.length;if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<v.uf.filterArray.length;x++)b.push(d.filterArray[x]);v.uf=new y(t.Owner,!0),v.uf.AddRange(b);for(var x=0;x<q;x++)v.uf.filterArray[x]._include=E;return v.Result=!0,v},t.AnalyseEnumGroup=function(n,r){n=n.Substring(1,1+n.length-2);var i=0,s=0;while(i<n.length){var o=e.Utility.IndexOfAny(n,["|",")","\\","("],i);if(o===-1){var u=n.Substring(s);if(u.length===0)return!1;r.push(u),i=n.length;continue}if(n.charAt(o)==="\\"){var a=n.charAt(o+1);if(a==="\\"||a===")"||a==="|"||a==="("){n=n.Substring(0,o)+n.Substring(o+1,n.length),i=o+1;if(i===n.length){var u=n.Substring(s);if(u.length===0)return!1;r.push(u)}continue}return!1}if(n.charAt(o)==="|"){var u=n.Substring(s,o);if(u.length===0)return!1;r.push(u),i=o+1,s=i;continue}return!1}return!0},t}(),k=function(t){function n(e,n,r){t.call(this,n),this._focusNull="",this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this._owner=e,this.formatIsNull=r}return __extends(n,t),n.prototype.GetShowLiterals=function(){return this._owner.GetShowLiterals()},n.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},n.prototype.GetLength=function(){var e=this.ValueIsNull();if(e&&this._focusNull!==""&&!this.formatIsNull)return this._focusNull.GetLength();if(e===!0&&this._focusNull!=="")return 0;var t=this.GetLastVisibleFieldIndex(this.GetShowLiterals()),n=0;for(var r=0;r<=t;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}return n},n.prototype.GetInputFieldIndexByPos=function(e){var t=null,n=0,r,i=this.GetFieldIndex(e,n);r=i.index,n=i.offset,r!==0&&n===0&&this.fieldArray[r-1].fieldLabel!=="PromptField"&&(r--,n=this.fieldArray[r].text.GetLength());var s=this.fieldArray[r];if(n===s.text.GetLength()){var o;if(n<s._maxLength){t=r;if(t!==this.fieldCount-1)for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField")break}else for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField"){t=o;break}}else t=r;var u={},a={};if(t){var f=!1;while(f===!1){s=this.fieldArray[t];if(s.fieldLabel==="FilterField")a.fieldMark=s._filter.filterLabel,f=!0;else if(s.fieldLabel==="EnumField")a.fieldMark="Enum",f=!0;else{if(t===this.fieldCount-1){a=null;break}t++}a.fieldIndex=t}}else a=null;return a!=null?(u.currentField=a,u):null},n.prototype.GetCurrentField=function(e){var t={},n=0,r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i];s.fieldLabel==="PromptField"&&r++;var o=s.GetLength();n+=o;if(e<=n)return s.fieldLabel==="PromptField"?e===n-o?t.index=i-r:e===n?t.index=i-r+1:t.index=-1:t.index=i-r,t}},n.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];e+=n.text}return e},n.prototype.GetTextSimpleMode=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField"&&!e)continue;t+=r.text}return t},n.prototype.GetExistLength=function(){var e=this.fieldCount,t,n;for(t=this.fieldCount-1;t>=0;t--){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;e=t;break}var r=0;for(t=0;t<=e;t++)n=this.fieldArray[t],t===e?r>=21474e3?r=n._maxLength:r+=n._maxLength:r+=n.text.GetLength();return r},n.prototype.GetNonLiteralsText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?(n=f.text.Substring(r,o),n.GetLength()>f._trueLength&&(n=n.Substring(0,f._trueLength))):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text.Substring(0,f.text.GetLength()))}return n},n.prototype.GetNonPromptText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?n=f.text.Substring(r,o):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text)}return n},n.prototype.ValueIsNull=function(){for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel==="PromptField")continue;if(t.GetFieldStatus()!==0)return!1}return!0},n.prototype.ValueIsFull=function(e){e=e?e:0;var t,n;if(e!=null&&e===1)for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(this.fieldCount===1&&n._minLength===0)return!0;if(n.fieldLabel==="PromptField")continue;if(!n.GetFieldIsFull())return!1}else for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;if(n.GetFieldStatus()!==2)return!1}return!0},n.prototype.GetShowText=function(t,n,r){if(!r){var i=this.ValueIsNull();if(i===!0&&this._focusNull!==""&&n=="")return this._focusNull;if(i===!0&&this._focusNull!==""&&n==null)return"";if(i===!0&&n==="LoseFocus")return this._owner._getDisplayNullExpression()!==null?this._owner._getDisplayNullExpression():this.GetText()}var s=this.GetLastVisibleFieldIndex(t);if(s<0)return"";var o="";for(var u=0;u<s;u++)o+=this.fieldArray[u].text;if(s<this.fieldCount){var a=this.fieldArray[s];a.fieldLabel==="PromptField"||t===e.ShowLiterals.Always?o+=this.fieldArray[s].text:o+=a.text.Substring(0,a._trueLength)}return o},n.prototype.GetLastVisibleFieldIndex=function(t){var n=this.fieldCount-1;if(t!==e.ShowLiterals.Always){var r=this.fieldCount-1,i=!0;for(n=r;n>=0;n--){var s=this.fieldArray[n];if(s.fieldLabel==="PromptField")continue;if(s._trueLength===0){i=!1;continue}if(s._trueLength>0&&s._trueLength<s._minLength)break;if(t===e.ShowLiterals.PostDisplay){i&&(n=r);break}while(n<r&&this.fieldArray[n+1].fieldLabel==="PromptField")n++;break}}return n},n.prototype.GetValue=function(){var e=this.fieldCount-1,t;for(;e>=0;e--){t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t._trueLength!==0)break}if(e<0)return"";var n="";for(var r=0;r<=e;r++){t=this.fieldArray[r];if(t.fieldLabel==="PromptField")continue;var i=t._trueLength,s=t.text,o=s;if(t.fieldLabel==="FilterField"){o=o.Substring(0,i);for(var u=0;u<i;u++)t._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));var a=s.GetLength(),f=o.GetLength();if(i===0&&a!==0){if(r!==e){var l="";for(var c=0;c<a;c++)l+=" ";o=l}}else if(a>f&&r!==e){var l="";for(var c=0;c<a-f;c++)l+=" ";o+=l}}else t._activeItem===-1&&(o=" ");n+=o}return n},n.prototype.GetOldValue=function(){var e="",t;for(var n=0;n<this.fieldCount;n++){t=this.fieldArray[n];if(t.fieldLabel==="PromptField")continue;var r;if(t.fieldLabel==="FilterField"){r=t.undoText;if(t._undoBitState&&t._undoBitState.length>0){var i=!0;for(var s=t._undoBitState.length-1;s>=0;s--)t._undoBitState[s]===!1?i?r=r.Substring(0,r.GetLength()-1):r=r.Substring(0,s)+" "+r.Substring(s+1,r.GetLength()):i=!1}else r=""}else t._undoItem!==-1?r=t.undoText:r="";e+=r}return e},n.prototype.SetValue=function(e,t){if(!e)return this.ClearContent(),!0;var n=!1;return t!=null&&(n=t),this.SetFieldCollectionValue(e,n)?!0:(this.RollBack(),!1)},n.prototype.SetFieldCollectionValue=function(e,t){this.ClearContent();var n=!1;return t!=null&&(n=t),e.GetLength()!==0&&this.Insert(0,e,n,!1),!0},n.prototype.ClearContent=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState();if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.oldText=t.text,t.Delete(0,t.text.GetLength())}},n.prototype.RollBack=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.RollBack()}},n.prototype.SaveOldState=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.SaveOldState()}},n.prototype.SaveUndoState=function(){if(this.formatIsNull){var e=this.fieldArray[0],t=-1;if(this.oldStart===-1)e.SaveUndoState(),t=this.newStart;else{var n=e.text.substr(this.newStart,this.newLength);t=e.undoText.IndexOf(n,this.oldStart),t!==this.oldStart+this.oldLength&&(t=this.newStart,t+this.newLength!==this.oldStart&&e.SaveUndoState())}this.oldStart>0?this.oldStart=Math.min(this.oldStart,t):this.oldStart=t,this.oldLength+=this.newLength}else if(this.fieldCount>0)for(var r=0;r<this.fieldCount;r++){var e=this.fieldArray[r];e.fieldLabel!=="PromptField"&&e.SaveUndoState()}},n.prototype.Undo=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0;if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.Undo()}},n.prototype.PerformSpin=function(e,t,n){var r,i=this.GetFieldIndex(e,r),s=i.index;r=i.offset,this.SaveOldState();if(r>0||this.fieldArray[s].fieldLabel==="EnumField"){r=this.fieldArray[s].PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}else{var a=s,f;for(;a<this.fieldCount;a++){f=this.fieldArray[a];if(f._minLength===0){if(f.text.GetLength()===0)continue;break}if(f.fieldLabel==="EnumField"){r=f.PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();return e=o+r,e}break}if(s>0){f=this.fieldArray[s-1],r=f.text.GetLength(),r<f._minLength&&(r=f._minLength),r=f.PerformSpin(r,t,n);if(f.fieldLabel==="EnumField"){var o=0;for(var u=0;u<s-1;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}}}return e},n.prototype.Delete=function(e,t){if(this.fieldCount===0)return e;var n=0;this.SaveOldState();var r=this.GetFieldIndex(e,n),i=r.index;n=r.offset,this.fieldArray[i].fieldLabel==="PromptField"&&t>this.fieldArray[i].text.GetLength()-n&&(e+=this.fieldArray[i].text.GetLength()-n,t-=this.fieldArray[i].text.GetLength()-n,i++,n=0),this.newStart=e,this.newLength=t,this.formatIsNull&&this.SaveUndoState();var s=0;r=this.GetFieldIndex(e+t,s);var o=r.index;s=r.offset;while(o!==0&&s===0){var u=this.fieldArray[o-1];if(u.fieldLabel==="PromptField")break;o--,s=this.fieldArray[o].text.GetLength()>this.fieldArray[o]._minLength?this.fieldArray[o].text.GetLength():this.fieldArray[o]._minLength}for(var a=i;a<=o;a++){var u=this.fieldArray[a],f=n;if(i===o)s>n?n=u.Delete(n,s-n):n-=n-s;else if(a===i){var l=u.text.GetLength()-n;l>0&&(n=u.Delete(n,u.text.GetLength()-n))}else a===o?n=u.Delete(n,s):n=u.Delete(n,u.text.GetLength());n!=null&&(e+=n-f),n=0}return e},n.prototype.Replace=function(e,t,n,r){var i={};i.cursorPos=e,i.text=n;var s=this.GetFieldIndex(e,o),o=0,s=0,u={};u=this.GetFieldIndex(e,o),s=u.index,o=u.offset,this.SaveOldState();var a;for(;s<this.fieldCount;s++){a=this.fieldArray[s];if(a._minLength>0||a.text.GetLength()>0)break}while(s!==0&&o===0){if(this.fieldArray[s].fieldLabel!=="PromptField")break;s--,a=this.fieldArray[s],o=a.text.GetLength(),o<a._minLength&&(o=a._minLength)}this.newStart=e,this.newLength=t;var f=0,l;u=this.GetFieldIndex(e+t,f),l=u.index,f=u.offset;var c=0;for(var h=s;h<l;h++)a=this.fieldArray[l-1],c+=a.text.GetLength();c+=f,-w;while(l!==0&&f===0){a=this.fieldArray[l-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;l--,f=this.fieldArray[l].text.GetLength()}var p=n,d=!1,v=e-o;for(var m=s;m<=this.fieldCount-1;m++){d=!1,a=this.fieldArray[m];var g=a.text.GetLength()>a._minLength?a.text.GetLength():a._minLength;if(a.fieldLabel==="PromptField"){g=a.GetLength();if(r){var y=a.text.Substring(o,a.text.GetLength()),b=n.GetLength();n.GetLength()>=y.GetLength()?(n.Substring(0,y.GetLength())!==y&&(d=!0),n=n.Substring(y.GetLength(),n.GetLength()),e+=y.GetLength()):(n.Substring(0,y.GetLength())!==y&&(d=!0),n="",e+=n.GetLength());if(d){T;if(b===n.GetLength())break}}else v+o===e&&(e+=g-o);v+=a.text.GetLength()-o}else{var w=o,E=m===this.fieldCount-1;if(m>l){var S={},E=m===this.fieldCount-1;S=a.Insert(o,n,E),o=S.offset,n=S.text,d=S.existInvalid}else if(s===l){var x={};x=a.Replace(o,f-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===s){var x={};x=a.Replace(o,g-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===l){var x={};f-o>0?x=a.Replace(o,f-o,n,E):t>0&&(x=a.Replace(o,t,n,E)),o=x.offset,n=x.text,d=x.existInvalid}else{var x={};x=a.Replace(o,g,n),o=x.offset,n=x.text,d=x.existInvalid}var T=a.GetFieldStatus()!==2;if(T&&d)break;e+=o-w,v+=a._minLength>a.text.GetLength()?a._minLength:a.text.GetLength()}o=0;if(n===""){if(m<l){m++;var h=m,N=0;for(;m<l;m++)this.fieldArray[m].fieldLabel!=="PromptField"&&this.fieldArray[m].Delete(o,this.fieldArray[m].text.GetLength());for(var C=0;C<h;C++){var a=this.fieldArray[C],g=a.GetLength();N+=g}if(e===N&&a._trueLength===a._maxLength)for(;h<=l;h++){if(this.fieldArray[h].fieldLabel!=="PromptField"||h===this.fieldCount-1)break;e+=this.fieldArray[h].text.GetLength()}if(f===0)break;this.fieldArray[l].fieldLabel!=="PromptField"&&this.fieldArray[l].Delete(o,f)}break}}return p===n?(this.RollBack(),i.success=!1):i.success=!0,i.cursorPos=e,i.text=n,i},n.prototype.SetText=function(e,t){var n=0,r={};r.cursorPos=n,r.text=e;if(this.fieldCount===0||!e||n<0)return r;var i=0,s=0,o={};o=this.GetFieldIndex(n,i),s=o.index,i=o.offset;if(i===this.fieldArray[s]._maxLength)return r;while(s!==0&&i===0){var u=this.fieldArray[s-1];if(!(u.fieldLabel!=="PromptField"&&u.text.GetLength()<u._maxLength))break;s--,i=this.fieldArray[s]._trueLength,i<this.fieldArray[s]._minLength&&(i=this.fieldArray[s]._minLength)}var a=!1,f=s,l=n-i;for(;f<this.fieldCount;f++){a=!1;var u=this.fieldArray[f];if(u.fieldLabel==="PromptField"){if(t){var c=u.text.Substring(i,u.text.GetLength()),h=e.GetLength();e.GetLength()>=c.GetLength()?e.Substring(0,c.GetLength())!==c?a=!0:(e=e.Substring(c.GetLength(),e.GetLength()),n+=c.GetLength()):(c.Substring(0,e.GetLength())!==e&&(a=!0),e="",n+=e.GetLength());if(a){m;if(e.GetLength()===h)return r.isValid=!1,r}}else l+i===n&&(n+=u.maxLength-i);l+=u.maxLength-i}else{var p=i,d={},v=f===this.fieldCount-1;d=u.SetTextInternal(e,i,v),this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),i=d.offset,e=d.text,a=d.existInvalid;var m=d.exception;if(a&&m)return r.isValid=!1,r;n+=i-p,l+=u._minLength<u._trueLength?u._trueLength:u._minLength}i=0;if(e.GetLength()===0&&(a||m)){if(!t)break;if(a)return r.isValid=!1,r}}if(f>=this.fieldCount&&e!==""&&e.GetLength()>0)return r.isValid=!1,r;var g=this.GetFieldIndex(n,i),y=g.index,b=g.offset;return f<this.fieldCount&&y===f+1&&b===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.fieldArray[f+1].fieldLabel==="PromptField"&&(n+=this.fieldArray[f+1].GetLength()),r.isValid=!0,r.cursorPos=n,r.text=e,r},n.prototype.Insert=function(e,t,n,r){var i={};i.cursorPos=e,i.text=t;if(this.fieldCount===0||!t||e<0)return i;var s=0,o=this.GetFieldIndex(e,s),u=o.index;s=o.offset;if(s===this.fieldArray[u]._maxLength)return i;while(u!==0&&s===0){var a=this.fieldArray[u-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;u--,s=this.fieldArray[u]._trueLength;if(s<this.fieldArray[u]._minLength){s=this.fieldArray[u]._minLength,i=this.InsertProcess(u,s,e,t,n);if(i.text==="")return i;if(e===s){u++,s=0;break}}}return this.InsertProcess(u,s,e,t,n,r)},n.prototype.InsertProcess=function(t,n,r,i,s,o){var u={},a=!1,f=t,l=r-n;this.SaveOldState();for(;f<this.fieldCount;f++){a=!1;var c=this.fieldArray[f];if(c.fieldLabel==="PromptField"){if(s){var h=c.text.Substring(n,c.text.GetLength()),p=i.GetLength();i.GetLength()>=h.GetLength()?(i.Substring(0,h.GetLength())!==h&&(a=!0),i=i.Substring(h.GetLength(),i.GetLength()),r+=h.GetLength()):(h.Substring(0,i.GetLength())!==i&&(a=!0),i="",r+=i.GetLength());if(a){g;if(i.GetLength()===p)break}}else r+=c.maxLength-n;l+=c.maxLength-n}else{var d=n,v=f===this.fieldCount-1,m=c.Insert(n,i,v,o);n=m.offset,i=m.text,a=m.existInvalid;var g=m.exception;if(a&&g){if(i===u.text)return u;break}r+=n-d,l+=c._minLength<c._trueLength?c._trueLength:c._minLength}n=0;if(i.GetLength()===0)break}if(f>=this.fieldCount&&i!==""&&i.GetLength()>0&&i===u.text)return u;var y=this.GetFieldIndex(r,n),b=y.index,w=y.offset;return f<this.fieldCount&&b===f+1&&w===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.GetShowLiterals()!==e.ShowLiterals.PostDisplay&&this.fieldArray[f+1].fieldLabel==="PromptField"&&f+1!==this.fieldCount-1&&(r+=this.fieldArray[f+1].GetLength()),u.cursorPos=r,u.text=i,u},n.prototype.MoveField=function(e,t){var n=this.GetFieldIndex(e),r=n.index,i=n.offset;if(r===-1)return-1;if(t){if(r===this.fieldCount-1)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r<this.fieldCount)r++;if(r===this.fieldCount-1)return-1;r++;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===this.fieldCount-1)return-1;r++}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s}if(r===0||r===1&&i===0)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r>0)r--;if(r===0)return-1;r--;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===0)return-1;r--}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s},n.prototype.GetPosByCurrentField=function(e){if(!e)return null;var t=0,n=-1,r=!1;for(;t<this.fieldCount;t++){var i=this.fieldArray[t];i.fieldLabel!=="PromptField"&&n++;if(n===e){r=!0;break}}if(r)return this.GetFieldRange(t);if(n===-1)return null;t>=this.fieldCount&&(t=this.fieldCount-1);while(this.fieldArray[t].fieldLabel==="PromptField")t--;return this.GetFieldRange(t)},n.prototype.GetFirstInputPosition=function(){var e=this.ValueIsNull();return e&&this._focusNull!==""&&!this.formatIsNull?0:this.fieldArray[0].fieldLabel==="PromptField"?this.GetFieldRange(1).start:0},n.prototype.GetTotalInputFieldCount=function(){var e=0;if(this.fieldCount>0)for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];n.fieldLabel!=="PromptField"&&e++}return e},n.prototype.GetFieldIndexByPos=function(e){return this.GetFieldIndex(e)},n.prototype.CanUndo=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t.undoTempText!==t.text)return!0}return!1},n.prototype.GetRealFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0,r=-1,i=-1;for(var s=0;s<this.fieldCount;s++){this.fieldArray[s].fieldLabel!=="PromptField"&&r++;if(r===e){i=s;break}}for(var s=0;s<i;s++){var o=this.GetFieldByIndex(s);n+=o.GetLength()}var u=this.GetFieldByIndex(i);return u?(t.start=n,t.length=u.GetLength(),t):t},n.prototype.PushBack=function(e){this.Add(e),this.fieldCount++},n}(x);e.MaskFieldCollection=k;var L=function(t){function n(e){t.call(this),this.OldPosition=0,this.IsFocus=!1,this.isSelectionDeterminedByHighlightText=!1,this.Format=null,e.HelpID!=null&&(this.HelpID=e.HelpID),e.Owner&&(this.Owner=e.Owner)}return __extends(n,t),n.prototype.GetCurrentField=function(e){var t=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&t!=null&&(this.Format.Fields._focusNull!==""&&t===this.Format.Fields._focusNull||t!=null&&t=="")){var n={};return n.index=-1,n}return this.Format.Fields.GetCurrentField(e)},n.prototype.FocusInternal=function(t,n,r,i,s){var o={},u=this.GetShowText(this.GetShowLiterals());this.OldValue=this.Format.Fields.GetText(),this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,o.SelectionStart=s,t===e.FocusType.Click&&(o.SelectionStart=e.Utility.GetCursorPosition(n),o.SelectionEnd=o.SelectionStart),o.Text=u,this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!==""&&o.Text===this.Format.Fields._focusNull&&(o.SelectionStart=0,o.SelectionEnd=0),this.Format.Fields.ValueIsNull()&&this.Format.Fields._owner._getDisplayNullExpression()!==null&&(o.SelectionStart=0,o.SelectionEnd=0);if(o.SelectionStart===-1||o.SelectionStart>o.Text.GetLength())o.SelectionStart=0,o.SelectionEnd=0;t===e.FocusType.Left?(o.SelectionStart=0,o.SelectionEnd=0):t===e.FocusType.Right&&(o.SelectionStart=o.Text.GetLength(),o.SelectionEnd=o.Text.GetLength());var a=o.SelectionStart;if(t!==e.FocusType.SpinButton&&t!==e.FocusType.ContextMenu&&t!==e.FocusType.ClientEvent&&t!==e.FocusType.ImeInput&&(r!==e.HighlightText.None||i!==-1))if(this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!=""&&o.Text===this.Format.Fields._focusNull)o.SelectionEnd=o.Text.GetLength();else{var f=this.SetCursorPositionAndSelection(r,"",i,a);f!=null&&(o.SelectionStart=f.SelectionStart,o.SelectionEnd=f.SelectionEnd)}return o.SelectionStart!=null&&(this.OldPosition=o.SelectionStart),this.IsFocus=!0,o},n.prototype.SetCursorPositionAndSelection=function(t,n,r,i){var s;if(t===e.HighlightText.All)this.isSelectionDeterminedByHighlightText=!0,s=this.SelectAll();else if(t===e.HighlightText.Field){this.isSelectionDeterminedByHighlightText=!0;if(r<=-1)if(i>0){var o=this.Format.Fields.GetFieldIndex(i).index,u=this.Format.Fields.fieldArray[o];u.fieldLabel==="PromptField"&&(o===this.Format.Fields.fieldCount-1?o--:o++);var a=this.Format.Fields.GetFieldRange(o);s={},s.SelectionStart=a.start,s.SelectionEnd=a.length+a.start}else s=this.GetPosByCurrentField(i);else s=this.GetPosByCurrentField(r)}else s=this.GetPosByCurrentField(r),s!=null&&(s.SelectionStart=s.SelectionStart,s.SelectionEnd=s.SelectionStart);return s},n.prototype.GetPosByCurrentField=function(e){var t={},n=this.Format.Fields.GetPosByCurrentField(e);return n!=null&&n!=-1?(t.SelectionStart=n.start,t.SelectionEnd=n.start+n.length,t):null},n.prototype.LoseFocus=function(){var e={};return this.Owner._getFormatIsNull()!=1&&this.Format.Fields.SaveUndoState(),e.Text=this.GetShowText(this.GetShowLiterals(),"LoseFocus"),e.Value=this.Format.Fields.GetValue(),this.IsFocus=!1,e},n.prototype.GetSepText=function(){if(this.Owner._getFormatIsNull())return this.Format.Fields.GetText();var t="",n=this.Format.Fields.fieldCount-1;for(var r=0;r<=n;r++){var i=this.Format.Fields.fieldArray[r];if(i.fieldLabel==="PromptField")continue;var s=i._trueLength,o=i.text;if(i.fieldLabel==="FilterField")for(var u=0;u<s;u++)i._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));else i._activeItem===-1&&(o="");if(r!=n){var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a+e.Utility.Hold+";"}else{var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a}}return t},n.prototype.SetSepText=function(t){if(!t){for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;r.Clear()}return!0}var i=e.Utility.Hold+";",s=t.split(i);for(var o=0;o<s.length;o++)s[o]=s[o].replace(/@#GCC#@/g,",").replace(/@#GCD#@/g,"'").replace(/@#GCM#@/g,'"');var u=!1,a=0;for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;if(a<s.length){var f=s[a].split(e.Utility.Hold+","),l=f[0],c="";if(f.length>1){c=f[1];if(c&&c!=""&&l!=c){var h=0,p=l.IndexOf(" ",h);while(p!=-1)c.Substring(p,p+1)===e.Utility.MaskValChar&&(l=l.Substring(0,p)+this.Owner.GetPromptChar()+l.Substring(p+1,l.GetLength())),h=p,p=l.IndexOf(" ",h)}}u=a===this.Format.Fields.fieldCount-1;var d=l.GetLength();if(d<r._minLength)for(var o=0;o<r._minLength-d;o++)l+=this.Owner.GetPromptChar(),c+=e.Utility.MaskValChar;var v;r.fieldLabel==="FilterField"?v=r.SetTextInternal(l,0,u,c):v=r.SetTextInternal(l,0,u);if(v.existInvalid&&v.exception)return!1;a++}else r.Clear()}return!0},n.prototype.ProcessShortcutKey=function(e,n,r){var i={};switch(e){case"Clear":return n||this.Format.Fields.ClearContent(),i.SelectionStart=this.Format.Fields.GetFirstInputPosition(),i.SelectionEnd=i.SelectionStart,i.Text=this.GetShowText(this.GetShowLiterals()),i;case"NextField":if(this.IsLastInputField(r,!0))return!0;break;case"PreviousField":if(this.IsLastInputField(r,!1))return!0}return i=t.prototype.ProcessShortcutKey.call(this,e,n,r),i},n.prototype.KeyDown=function(n){var r=n.KeyCode,i=t.prototype.KeyDown.call(this,n);r===27&&this.Owner.Clear();if(n.KeyAction!=null)return i;if(n.ReadOnly===!0)return i;if(r!=undefined&&r!=null){if(r>=48&&r<=57||r>=65&&r<=90||r>=96&&r<=105||r===0||r===229||r===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(r===32||r===106||r===107||r===109||r===110||r===111||r===219||r===220||r===221||r===222||r>=186&&r<=192||r===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.Utility.IsIE()&&(r===61||r===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;var s=r;n.FuncKeysPressed.Shift&&r!=65552&&(s=r-65536),r>65600&&r<65627&&(s=r-65536);if(s>=48&&s<=57||s>=65&&s<=90||s>=96&&s<=105||s===229||s===0||s===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(s===32||s===106||s===107||s===109||s===110||s===111||s===219||s===220||s===221||s===222||s>=186&&s<=192||s===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.Utility.IsIE()&&(s===61||s===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i}return i},n.prototype.KeyPressInternal=function(e,t,n,r,i){if(A.Mask_ImeResponse===!0){A.Mask_ImeResponse=!1;var s={};this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&(t=0,n=0);var o=this.ProcessCharKey(t,n,i,r);if(o.success){s.SelectionStart=o.start,s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1;if(this.moveFocusExitOnLastChar){var u=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");u!=null&&(s.EventInfo=u.EventInfo,s.FocusType=u.FocusType,s.FocusExit=!0),this.moveFocusExitOnLastChar=!1}}else s.SelectionStart=o.start,s.SelectionEnd=Math.max(t,n),s.Text=this.GetShowText(this.GetShowLiterals()),s.EventInfo=o.EventInfo,s.exception=!0,this.moveFocusExitOnLastChar&&(s.FocusExit=!0,this.moveFocusExitOnLastChar=!1);return s}return!1},n.prototype.ProcessCharKey=function(e,n,r,i){var s=t.prototype.ProcessCharKey.call(this,e,n,r,i),o=Math.min(e,n);return s.success&&(o=s.start),i&&(this.moveFocusExitOnLastChar=!1,o===this.Format.Fields.GetExistLength()&&(this.moveFocusExitOnLastChar=!0)),s},n.prototype.ContextMenu=function(){},n.prototype.Click=function(){},n.prototype.Undo=function(e){var t={};return this.Format.Fields.Undo(),t.SelectionStart=this.OldPosition,t.SelectionEnd=this.OldPosition,this.OldPosition=e,t.Value=this.Format.Fields.GetText(),t.Text=this.GetShowText(this.GetShowLiterals()),t},n.prototype.Paste=function(t,n,r,i,s){var o={};o.SelectionStart=t,o.SelectionEnd=n;var u;s!=null&&s===!0?u=r:this.Owner?(u=e.Utility.GetPasteData(this.Owner.GetUseClipboard()),u=this.UpdateCrLfString(u,this.Owner.GetAcceptsCrlf())):u=e.Utility.GetPasteData(!0);var a=null;u!=null&&(u.IndexOf("\r")!=-1&&(u=u.Substring(0,u.IndexOf("\r"))),u.IndexOf("\n")!=-1&&(u=u.Substring(0,u.IndexOf("\n"))));if(!u)return o;this.FireClientEvent("OnBeforePaste");var f=Math.min(t,n),l=Math.max(t,n),c=l-f;if(f===l)o.SelectionStart=this.Format.Fields.Insert(f,u,!1).cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),o.SelectionEnd=o.SelectionStart;else{var h=this.GetShowText(this.GetShowLiterals());h!=null&&this.Format.Fields._focusNull!=""&&h===this.Format.Fields._focusNull&&this.Format.Fields.fieldArray[0].text!=h?a=this.Format.Fields.Insert(0,u,!1):a=this.Format.Fields.Replace(f,c,u,!1),o.SelectionStart=a.cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),h===o.Text&&a.success===!1?(o.SelectionStart=f,o.SelectionEnd=l):o.SelectionEnd=o.SelectionStart}if(o.Text.Substring(f,f+u.GetLength())!=u&&o.SelectionStart-f<u.GetLength()&&this.InvalidInput!=""){var p={};p.Name=this.InvalidInput,p.Args=null,p.Type="InvalidInput",o.EventInfo=p}if(i)if(o.SelectionStart===this.Format.Fields.GetExistLength())this.moveFocusExitOnLastChar=!0;else{var d=this.Format.Fields.GetFieldIndex(o.SelectionStart),v=d.index,m=d.offset;v===this.Format.Fields.fieldCount-1&&m===0&&this.Format.Fields.GetFieldByIndex(v).fieldLabel==="PromptField"&&(this.moveFocusExitOnLastChar=!0)}if(this.moveFocusExitOnLastChar){var g=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");g!=null&&(o.EventInfo=g.EventInfo,o.FocusType=g.FocusType,o.FocusExit=!0),this.moveFocusExitOnLastChar=!1}return o.SelectionStart!=f&&this.FireClientEvent("OnPaste"),o},n.prototype.UpdateCrLfString=function(t,n){return n!==e.CrLfMode.NoControl?e.BaseUIProcess.UpdateCrLfString(t,n):e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Cut)},n.prototype.DragStart=function(){},n.prototype.DragEnd=function(){},n.prototype.DragOver=function(){},n.prototype.DragInit=function(){},n.prototype.SetValue=function(e){this.Format.Fields.SetValue(e)},n.prototype.GetShowText=function(e,t,n){var r="";return t?t==="LoseFocus"&&(r=this.Format.Fields.GetShowText(e,"LoseFocus",n)):r=this.Format.Fields.GetShowText(e,"",n),r},n.prototype.ProcessBackSpaceKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===0&&r===0)return i;var s,o,u=this.Format.Fields.GetFieldIndex(n);s=u.index,o=u.offset;if(s===-1)return i;if(r===0){var a=this.Format.Fields.GetFieldByIndex(s);if(s===0&&o===0)return i;while((o===0||a.fieldLabel==="PromptField")&&s>0)s--,r+=o,a=this.Format.Fields.GetFieldByIndex(s),o=a.GetLength(),a.fieldLabel==="PromptField"&&(r+=o,o=0);if(s===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;if(this.Format.Fields.GetFieldByIndex(s).GetLength()===0)return i}if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="FilterField")r+=1,n-=r,r=1;else{if(this.Format.Fields.GetFieldByIndex(s).fieldLabel!=="EnumField")return i;r+=this.Format.Fields.GetFieldByIndex(s).GetLength(),n-=r,n=n>0?n:0}n=this.Format.Fields.Delete(n,r),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var f;u=this.Format.Fields.GetFieldIndex(n+r),f=u.index;if(f===-1)return i;o===0&&s!=0&&s--;if(s===f&&this.Format.Fields.GetFieldByIndex(f).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.PerformSpinInternal=function(e,t,n,r,i){if(this.Format.Fields.fieldCount<=0)return null;var s={};s.SelectionStart=e,s.SelectionEnd=t,s.Text=this.GetShowText(this.GetShowLiterals());var o=this.Format.Fields.GetFieldIndex(t),u=o.index,a=o.offset;u!=0&&a===0&&(e===t?this.Format.Fields.fieldArray[u].fieldLabel!="EnumField"&&u--:e<t&&u--);if(this.Format.Fields.fieldArray[u].fieldLabel=="EnumField"||this.Format.Fields.fieldArray[u].text.GetLength()==0)i?s.SelectionStart=this.Format.Fields.PerformSpin(t,n,r):s.SelectionStart=this.Format.Fields.PerformSpin(t,-n,r),s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals());if(i){if(this.SpinUp!=""){var f={};f.Name=this.SpinUp,f.Args=null,f.Type="SpinUp",s.EventInfo=f}}else if(this.SpinDown!=""){var f={};f.Name=this.SpinDown,f.Args=null,f.Type="SpinDown",s.EventInfo=f}return s},n.prototype.ProcessBackSpace=function(e,t){var n=this.ProcessBackSpaceKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===this.Format.Fields.GetLength()&&r===0)return i;var s,o=this.Format.Fields.GetFieldIndex(n);s=o.index;if(s===-1)return i;if(r===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;n=this.Format.Fields.Delete(n,1),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndex(n+r),u=o.offset,a=o.index;if(a===-1)return i;u===0&&a--;if(s===a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.ProcessDelete=function(e,t){var n=this.ProcessDeleteKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.GetNullCasePosition=function(e,t){var n=this.Format.Fields;switch(t){case 36:case 65572:case 131109:case 196645:case 196644:case 131108:e=0;break;case 35:case 65571:e=n.GetLength();break;case 65573:case 37:e!=0&&e--;break;case 39:case 65575:e!=n.GetLength()&&e++;break;case 131111:case 196647:case 196643:case 131107:e=n.GetLength();break;case 131118:case 131080:case 196616:return e}return e},n.prototype.GetCaretPosition=function(n,r){if(this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!="")return this.GetNullCasePosition(n,r);var i=this.Format.Fields,s=i.GetFieldIndex(n),o=s.index,u,a,f=0,l=0;for(l=0;l<i.fieldCount;l++)if(i.GetFieldByIndex(l).fieldLabel!="PromptField"){a=i.GetFieldRange(l).start;break}var c=i.GetLastVisibleFieldIndex(this.GetShowLiterals());if(this.ShowLiterals===e.ShowLiterals.PreDisplay)for(l=c;l>=0;l--)i.GetFieldByIndex(l).fieldLabel!="PromptField"&&(f+=i.GetFieldByIndex(l)._trueLength);else for(l=c;l>=0;l--)if(i.GetFieldByIndex(l).fieldLabel!="PromptField"){u=i.GetFieldRange(l),f=u.start+u.length;break}var h=n;n=t.prototype.GetCaretPosition.call(this,n,r,a,f,"PromptField");var s=i.GetFieldIndexByPos(h),o=s.index,u;if(r===196647&&n===h){for(;o<c;o++){u=i.GetFieldRange(o+1),n=u.start;if(n>a)break}o===c&&(n+=u.length)}if(r===131111&&i.GetFieldByIndex(o).fieldLabel!="PromptField"&&i.GetFieldRange(o).length===0){while(i.GetFieldRange(o).length===0&&o<i.fieldCount-1)o++;for(l=o+1;l<i.fieldCount;l++)if(i.GetFieldByIndex(l).fieldLabel!="PromptField")return u=i.GetFieldRange(l),u.start}return n},n.prototype.ProcessTabKey=function(n,r,i){var s;return i!==e.TabAction.Field||!!this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&this.GetShowText(this.GetShowLiterals())===this.Format.Fields._focusNull?s=t.prototype.ProcessTabKey.call(this,n,r,i):s=this.MoveFieldAndControl(n,r),s},n.prototype.ProcessLeftDirection=function(e,t,n){var r={};!this.isMulSelected||n===36||n===131108?(r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart):(r.SelectionStart=Math.min(e,t),r.SelectionEnd=r.SelectionStart);if(n===37||n===131109){if(!this.Format.Fields.ValueIsNull()||this.Format.Fields._focusNull=="")if(r.SelectionStart>0){var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&this.isMulSelected===!1&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return this.isMulSelected=!1,r}this.isMulSelected=!1;if(!this.isMulSelected||n===36||n===131108)r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart;else{r.SelectionStart=Math.min(e,t);var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return r},n.prototype.ProcessRightDirection=function(e,t,n){var r={};if(!this.isMulSelected||n===35||n===131107)return r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;r.SelectionStart=Math.max(e,t);if(this.Format.Fields.ValueIsNull()===!0&&this.Format.Fields._focusNull!="")return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;var i,s,o=this.Format.Fields.GetFieldIndex(r.SelectionStart);i=o.index,s=o.offset;if(this.Format.Fields.GetFieldByIndex(i).fieldLabel==="PromptField"&&this.isMulSelected===!1){var u=this.Format.Fields.fieldArray[i];r.SelectionStart+=u.text.GetLength()-s}return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r},n.prototype.IsLastInputField=function(e,t){var n=this.Format.Fields.GetFieldIndex(e,0),r=n.index;if(t){while(r<this.Format.Fields.fieldCount-1&&this.Format.Fields.fieldArray[r+1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r+1].text.GetLength()===0)r++;var i=this.Format.Fields.fieldCount-1;for(;i>r;i--)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1}while(r>0&&this.Format.Fields.fieldArray[r-1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r-1].text.GetLength()===0)r--;var i=0;for(;i<r;i++)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1},n.prototype.DoubleClick=function(e){var n={},r=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&r!=null&&(this.Format.Fields._focusNull!=""&&r===this.Format.Fields._focusNull||r!=null&&r=="")){var r=this.GetShowText(this.GetShowLiterals());n.SelectionStart=0,n.SelectionEnd=r.GetLength()}else n=t.prototype.DoubleClick.call(this,e);return n},n}(e.BaseUIProcess);e.MaskUIProcess=L;var A=function(n){function r(){n.call(this),this.IMControlType="Mask",this._promptChar="_",this._autoConvert=!0,this._displayNull=null,this._null="",this._formatPattern="",this._exitOnLastChar=!1,this._displayNullExpresson=null,this._showLiterals=e.ShowLiterals.Always,this._tabAction=e.TabAction.Control,this._hideEnter=!1,this._hidePromptOnLeave=!1,this._textWithPromptChar=null,this.PerformSpin=function(e){var t=this.Spin.Increment,n=!0;e==="down"&&(n=!1),this.PerformSpinProcess(this.SelectionStart,this.SelectionEnd,t,this.Spin.Wrap,n,!0),this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},this.Init()}return __extends(r,n),r.Mask_ImeResponse=!1,r.prototype.AttachInput=function(e){this.InputElement=e,this.AddAllEventsHandler()},r.prototype.DetachInput=function(){t(this.InputElement).unbind(".wijinput"),this.InputElement=null},r.prototype.GetAutoConvert=function(){return this._autoConvert},r.prototype.SetAutoConvert=function(e){this._autoConvert=e},r.prototype.GetExitOnLastChar=function(){return this._exitOnLastChar},r.prototype.SetExitOnLastChar=function(t){t=e.Utility.CheckBool(t),this._exitOnLastChar=t},r.prototype.GetNull=function(){return this._null},r.prototype.SetNull=function(e){if(e!==this._null){var t=C.ParseFillExpression(e,this.Format.Fields);t.Expression===null?this.Format.Fields._focusNull=e:this.Format.Fields._focusNull=t.Expression,this._null=e}},r.prototype._getDisplayNullExpression=function(){return this._displayNullExpresson!==null?this._displayNullExpresson:this._displayNull},r.prototype.GetDisplayNull=function(){return this._displayNull},r.prototype.SetDisplayNull=function(t){t===undefined&&(t=null),t!==null&&(t=e.Utility.CheckString(t));if(t!==this._displayNull){var n=C.ParseFillExpression(t,this.Format.Fields);this._displayNullExpresson=n.Expression,this._displayNull=t;var r=this.GetValue();this.SetValue(r)}},r.prototype.GetFormatPattern=function(){return this._formatPattern},r.prototype.SetFormatPattern=function(t){t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter);if(t!==this._formatPattern)try{var n=C.ParseFormat(t,this);this.Clear(),this.Format.Fields=n,this.ResetNullAndDispalyNull(),this.FormatIsNull=this.Format.Fields.formatIsNull,this.Clear(),this.SetSelectionStart(0),this._formatPattern=t;var r=this.GetDisplayText();this.UpdateDisplayText(r)}catch(i){throw"Format pattern is invalid"}},r.prototype.ResetNullAndDispalyNull=function(){var e=C.ParseFillExpression(this.GetNull(),this.Format.Fields);e.Expression===null?this.Format.Fields._focusNull=this.GetNull():this.Format.Fields._focusNull=e.Expression,e=C.ParseFillExpression(this.GetDisplayNull(),this.Format.Fields),this._displayNullExpresson=e.Expression},r.prototype.GetPromptChar=function(){return this._promptChar},r.prototype.SetPromptChar=function(e){e||(e="_"),e.length>1&&(e=e.charAt(0));if(e!==this._promptChar){this._promptChar=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetShowLiterals=function(){return this._showLiterals},r.prototype.SetShowLiterals=function(e){if(e!=this._showLiterals){this._showLiterals=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetTabAction=function(){return this._tabAction},r.prototype.SetTabAction=function(e){this._tabAction=e},r.prototype.GetCursorPosition=function(){return this.CursorPosition},r.prototype.SetCursorPosition=function(t){t=e.Utility.CheckInt(t,-1,Math.pow(2,31)),t=Math.min(t,this.Format.Fields.GetTotalInputFieldCount()-1),t!==this.CursorPosition&&(this.CursorPosition=t)},r.prototype.Init=function(){this._autoConvert=!0,this.FormatIsNull=!0,this.CursorPosition=-1,this.truePosition=-1,this.japInput=!1,this.ImeMode=!1,this.IsImplementImeInput=!1,this.IsJapanConvertKeyPress=!1,this.HelpID="__"+this.ID+"_State",this.IsDragDrop=!1;var t={};t.ID=this.ID,t.HelpID=this.HelpID,t.Owner=this,this.UIProcess=this._createUIProcess(t),this.Format.Fields=C.ParseFormat("",this),this.FormatIsNull=this.Format.Fields.formatIsNull,this.UIProcess.Format=this.Format,this.NewSelectionStart=0,this.NewSelectionEnd=0,this.IsInUpdatePanelAndAsyncPostBack||this.UIUpdate&&(this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(this.UIUpdate.GetText(),!0)),this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.MouseButton=e.MouseButton.Default,this.FocusType=e.FocusType.None;if(this.IsInUpdatePanelAndAsyncPostBack){var n=this.UIUpdate.GetText();if(n!=this.UIProcess.GetShowText(this.GetShowLiterals(),null,true)&&n!=this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus",false))if(this.ShowLiterals===e.ShowLiterals.Always)this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(n,!0),this.SetHideValue();else{this.UIProcess.Format.Fields.ClearContent();var r=this.UIProcess.GetShowText("Always",null,!0);n.GetLength()<r.GetLength()&&(n+=r.Substring(n.GetLength(),r.GetLength())),this.UIProcess.Format.Fields.SetText(n,!0),this.SetHideValue()}this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()}this.UIUpdate&&(this.DisplayText=this.GetTextboxValue()),this.LastStart=0,this.LastEnd=0,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.Type="Mask",this.UIUpdate&&this.ReLoadData()},r.prototype._createUIProcess=function(e){return new L(e)},r.prototype.Clear=function(){this.SetValue(""),this.SelectionStart=this.SelectionEnd=this.Format.Fields.GetFirstInputPosition()},r.prototype.SetValue=function(t){t&&(typeof t!="string"&&(t=t.toString()),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter)),this.UIProcess.Format.Fields.SetValue(t,!1)&&this.AfterSetTextValue()},r.prototype.GetValue=function(){return this.Value},r.prototype.GetSelectedText=function(){var t=Math.min(this.SelectionStart,this.SelectionEnd),n=Math.max(this.SelectionStart,this.SelectionEnd),r=this.Text.Substring(t,n);if(this.GetClipContent()===e.ClipContent.ExcludeLiterals){var i=Math.min(this.SelectionStart,this.SelectionEnd),s=this.GetSelectionLength();r=this.UIProcess.Format.Fields.GetNonPromptText(i,s)}return r},r.prototype.SetSelectedText=function(e){if(!e)return;var t=this.Value,n=this.Text;this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,e,!1,!0);var r={};r.Text=this.GetDisplayText("Focus");if(!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),this.Value=this.UIProcess.Format.Fields.GetValue(),this.Text!=n&&this.FireClientEvent("TextChanged",null),this.Value!=t&&this.FireClientEvent("ValueChanged",null)},r.prototype.SetText=function(t){try{this.ShowPromptChar(),this.Value=this.UIProcess.Format.Fields.GetValue();if(!t){this.SetValue("");return}if(t===this.UIProcess.Format.Fields._focusNull&&!this.UIProcess.Format.Fields.formatIsNull){this.SetValue("");return}this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter),this.UIProcess.Format.Fields.SetText(t,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.AfterSetTextValue()}finally{this.HidePromptChar()}},r.prototype.AfterSetTextValue=function(){var e=this.Value,t=this.Text,n={};n.Text=this.GetDisplayText("Focus");if(!this.UpdateText(n))return;this.Value=this.UIProcess.Format.Fields.GetValue(),this.UpdateDisplayText(this.GetDisplayText()),this.Text!=t&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.FireClientEvent("TextChanged",null)),this.Value!=e&&this.FireClientEvent("ValueChanged",null)},r.prototype.GetText=function(){return this.GetDisplayText("Focus")},r.prototype.GetDisplayText=function(e){return e?e==="Focus"?this.UIProcess.GetShowText(this.GetShowLiterals()):"":this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus")},r.prototype.GetCurrentField=function(){return this.UIProcess.GetCurrentField(this.SelectionEnd)!=null?this.UIProcess.GetCurrentField(this.SelectionEnd).index:0},r.prototype.GetValueIsFull=function(){return this.UIProcess.Format.Fields.ValueIsFull(1)},r.prototype._getFormatIsNull=function(){return this.FormatIsNull},r.prototype.FireClientEvent=function(e,t){var n="";switch(e){case"TextChanged":this.TextChanged!=""&&(n=this.TextChanged);break;case"ValueChanged":this.ValueChanged!=""&&(n=this.ValueChanged);break;default:return}return this.UIProcess.FireEvent(this,n,t,e)},r.prototype.Focus=function(){this.ShowPromptChar(),!this.IsDragDrop&&this.FocusType!=e.FocusType.ClientEvent&&this.FocusType!=e.FocusType.SpinButton&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText());if(this.UIProcess.Format.Fields.fieldCount>0){var t=this.UIProcess.FocusInternal(this.FocusType,this.InputElement,this.GetHighlightText(),this.CursorPosition,this.SelectionStart);if(!t)return;t.Text!=null&&(this.Text=t.Text),t.SelectionStart!=null&&this.NeedReCalCursorPos&&(this.SelectionStart=t.SelectionStart),t.SelectionEnd!=null&&this.NeedReCalCursorPos&&(this.SelectionEnd=t.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),this.NeedReCalCursorPos||(this.NeedReCalCursorPos=!0),this.japInput===!0&&(this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition),this.japInput=!1),this.GetReadOnly()===!0&&this.FocusType===e.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),!this.IsDragDrop&&this.FocusType!=e.FocusType.ClientEvent&&this.FocusType!=e.FocusType.SpinButton&&this.FocusType!=e.FocusType.DropDown&&(this.OldValue=this.Value)}else this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.OldValue=this.Value;this.IsDragDrop=!1},r.prototype._shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.LoseFocus=function(){this.FireKeyExit();var t=this.ImeMode;e.Utility.IsIE()?this.ImeInput("LoseFocusInput"):this.ImeInput("ReInput",!0);if(this.SpinBtnPressed)return;this.SetLastClientValues();var n=this.UIProcess.LoseFocus();this.DisplayText=n.Text,this.Value=n.Value,this.Text=this.UIProcess.Format.Fields.GetText(),(e.Utility.IsIE()||!t)&&this.UpdateDisplayText(this.DisplayText),!e.Utility.IsIE()&&t&&this.UpdateDisplayText(this.DisplayText),this.FocusType=e.FocusType.None;var r;n.EventInfo!=null&&(r=this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type),r!=null&&(this.FocusType=r));var i=this;!e.Utility.IsIE()&&this.DisplayText!=this.UIUpdate.GetText()&&t&&window.setTimeout(function(){i.UpdateDisplayText(i.DisplayText)},0),this.GetHighlightText()===e.HighlightText.All&&(this.SelectionStart=0),this._shouldFireValueChangedEvent()&&(r=this.FireClientEvent("TextChanged",null),r!=null&&(this.FocusType=r),r=this.FireClientEvent("ValueChanged",null),r!=null&&(this.FocusType=r),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),e.Utility.FireSystemEvent(this.InputElement,"onchange"),this._getAutoPostBack()),window.setTimeout(function(){i.HidePromptChar()},50)},r.prototype.shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.MouseDown=function(t){var r=e.Utility.GetMouseButton(t);this.FocusedWhenMouseDown=document.activeElement===(t.srcElement||t.target),this.MouseDownOnClearButton=e.Utility.IsMouseDownOnClearButton(t),n.prototype.MouseDown.call(this,t),this.MouseButton===e.MouseButton.Right?this.FocusType=e.FocusType.ContextMenu:this.MouseButton=e.MouseButton.Left,this.UIProcess.isDblClick=!1,this.SelectionLength=this.GetSelectionLength(),!e.Utility.IsIE()&&this.ImeMode&&r===e.MouseButton.Left&&(this.IsImplementImeInput=!0)},r.prototype.MouseUp=function(t){if(!e.Utility.IsIE()&&this.ImeMode){if(!this.IsImplementImeInput)return;this.IsImplementImeInput=!1}this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,n.prototype.MouseUp.call(this,t);if(!this.ImeMode)this.SelectionLength=this.GetSelectionLength();else{this.SelectionStart=this.LastStart,this.SelectionEnd=this.LastEnd,this.SelectionLength=this.GetSelectionLength(),e.Utility.IsIE()?this.ImeInput("ClickInput"):this.ImeInput("ReInput",!0);if(!e.Utility.IsIE()&&this.Text!=this.UIUpdate.GetText()){var r=this;window.setTimeout(function(){r.UpdateDisplayText(r.Text)},0)}}this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=this.GetInputElement().value.length>0),this.HandleClearButton(t)},r.prototype.KeyDown=function(t){var r=t.keyCode,i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,t.shiftKey&&(i.Shift=!0),t.ctrlKey&&(i.Ctrl=!0),t.altKey&&(i.Alt=!0);var s={},o=this.ImeMode;this.ImeMode=!1;if(r===229)return e.Utility.IsIE8OrBelow()&&(this.ImeMode=!0),!0;!this.ImeMode&&o&&!i.Shift&&!i.Ctrl&&r!=9&&r!=65545&&(this.ImeInput("ReInput",!0),this.ImeSelectTimes=0),s.KeyCode=r,s.Text=this.Text,s.FuncKeysPressed=i,s.SelectionStart=this.SelectionStart,s.SelectionEnd=this.SelectionEnd,s.EditMode=this._getEditModeInternal(),s.ReadOnly=this.GetReadOnly(),s.ClipContent=this.GetClipContent(),s.ExitOnLastChar=this.GetExitOnLastChar(),s.ExitOnLeftRightKey=this.GetExitOnLeftRightKey(),s.TabAction=this.GetTabAction();var u=n.prototype.KeyDown.call(this,s);return u.inputChar!=null?!0:(i.Shift||i.Ctrl||i.Alt)&&!u?!0:this.GetHideEnter()&&r===13?!1:u.System},r.prototype.KeyPress=function(t,n){var r=n.keyCode||n.charCode,i=r===192&&n.altKey;if(!e.Utility.IsIE()&&this.ImeMode&&i)return this.ImeInput("ReInput",!0),!1;if(!e.Utility.IsIE()&&(r===229||i))return!1;var s=t,o=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),s);if(this.japInput!=1){o.SelectionStart!=null&&(this.NewSelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.NewSelectionEnd=o.SelectionEnd);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text)}var u=this._doExtraWorkForKeyPress(t);if(u===!0)return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),o.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.exception!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.EventInfo!=null&&(this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),this.FocusType=e.FocusType.ClientEvent);if(n.keyCode===13)return!0}else{if(n.keyCode===13)return!0;o.SelectionStart!=null&&(this.truePosition=o.SelectionStart),o.EventInfo!=null&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type)}},r.prototype._doExtraWorkForKeyPress=function(e){return!1},r.prototype.innerKeyPress=function(t,n,r){var i=t;n=!!n;var s=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),i);if(this.japInput!=1){if(s.Text!=null){if(!this.UpdateText(s))return!1;r||this.UpdateDisplayText(this.Text)}s.SelectionStart!=null&&(this.SelectionStart=s.SelectionStart),s.SelectionEnd!=null&&(this.SelectionEnd=s.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),s.FocusExit!=1&&!n&&!r&&s.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),s.exception!=null&&(r||this.UpdateDisplayText(this.Text),s.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),s.EventInfo!=null&&(this.UIProcess.FireEvent(this,s.EventInfo.Name,s.EventInfo.Args,s.EventInfo.Type),this.FocusType=e.FocusType.ClientEvent);if(window.event!=null&&event.keyCode===13)return!0}else{if(window.event!=null&&event.keyCode===13)return!0;s.SelectionStart!=null&&(this.truePosition=s.SelectionStart),s.EventInfo!=null&&this.UIProcess.FireEvent(this,s.EventInfo.Name,s.EventInfo.Args,s.EventInfo.Type)}},r.prototype.KeyUp=function(t){if(this.ImeMode===!0&&e.Utility.IsIE8OrBelow()){var n=t.keyCode,r=e.CharProcess.CharEx,i=this.GetTextboxValue(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength());if(n===13)this.ImeInput("DirectInput");else if(n>=48&&n<=57||n>=96&&n<=105)n>=96&&(n-=48),s=r.ToHalfWidth(s),s==String.fromCharCode(n)&&(s===String.fromCharCode(n)&&this.ImeSelectTimes<1||this.ImeSelect||this.ImeInput("ReInput")),this.ImeSelectTimes=0;else if(n===32){if(this.ImeSelect===!1)if(this.ImeSelectTimes===1)this.ImeSelect=!0;else if(r.ToHalfWidth(s)!=String.fromCharCode(n))this.ImeSelectTimes++;else{var u=i.Substring(this.SelectionStart,i.GetLength()-o);r.ToHalfWidth(u)===String.fromCharCode(n)&&this.ImeInput("DirectInput")}}else n>=65&&n<=90?this.ImeSelectTimes=0:n===32||n===106||n===107||n===109||n===110||n===111||n===219||n===220||n===221||n===222||n>=186&&n<=192?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput"),this.ImeSelectTimes=0):n===40||n===38?this.ImeSelect===!1&&this.ImeSelectTimes===1&&(this.ImeSelect=!0):n===8||n===46||n===27?this.ImeSelectTimes=0:n===244&&(this.IsJapanConvertKeyPress=!0)}if(t.keyCode!==13)return!1},r.prototype.PerformSpinProcess=function(t,n,r,i,s,o){if(this.GetReadOnly()&&o)return;var u=this.UIProcess.PerformSpinInternal(t,n,r,i,s);this.FocusType=e.FocusType.SpinButton;if(!u){this.UIUpdate.SetFocus();return}if(u.Text!=null&&!this.UpdateText(u))return;u.SelectionStart!=null&&(this.SelectionStart=u.SelectionStart),u.SelectionEnd!=null&&(this.SelectionEnd=u.SelectionEnd,this.SelectionLength=this.GetSelectionLength());if(u.EventInfo){var a=this.UIProcess.FireEvent(this,u.EventInfo.Name,u.EventInfo.Args,u.EventInfo.Type);a!=null&&(this.FocusType=a)}if(this.Text!==this.GetTextboxValue()){var f=this.Format.Fields.fieldArray;for(var l=0;l<f.length;l++)if(f[l].fieldLabel==="EnumField")break;if(l===f.length)return;this.UpdateDisplayText(this.Text)}},r.prototype.SelectStart=function(e){if(!!this.ImeMode)return!1;n.prototype.SelectStart.call(this,e)},r.prototype.Click=function(){},r.prototype.DragDrop=function(t){return!e.Utility.IsIE()&&this.GetReadOnly()?!1:(this.IsDragDrop=!0,this.Paste(t,!0,0,0),!1)},r.prototype.DragOver=function(){},r.prototype.DragInit=function(){},r.prototype.ImeInput=function(t,n){var i=this.UIUpdate.GetText();if(i===this.Text)return window.event&&e.Utility.PreventDefault(window.event),this.ImeMode=!1,!1;var s;if(this.Text!==""){var o=Math.min(this.SelectionStart,this.SelectionEnd),u=Math.max(this.SelectionStart,this.SelectionEnd);if(u<this.Text.GetLength()){var a=this.Text.Substring(u,this.Text.GetLength()),f=i.IndexOf(a);f!==-1?s=i.Substring(o,i.GetLength()-a.GetLength()):s=""}else s=i.Substring(o,i.GetLength())}else s=i;t==="ReInput"&&(n?s=s.Substring(0,s.GetLength()):s=s.Substring(0,s.GetLength()-1));if(t==="Record")return s;var l=!1;if(t==="LoseFocusInput"){if(s==="")return;r.Mask_ImeResponse=!0,l=!0}for(var c=0;c<s.GetLength();c++){c===s.GetLength()-1&&t==="LoseFocusInput"&&(this.japInput=!0),r.Mask_ImeResponse=!0;if(s.GetLength()>c+1){var h=s.Substring(c+1,c+2),p=new e.CharCategory,d=h.charCodeAt(0)-(p.KATAKANA_VOICED.charCodeAt(0)-1);d===1||d===2?(this.innerKeyPress(s.Substring(c,c+2),l),c++):t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}else t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}this.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(t==="ReInput"||t==="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=e.FocusType.ImeInput},r.prototype.SetInnerText=function(e){this.Clear(),this.UIProcess.Format.Fields.SetText(e,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.UIProcess.Format.Fields.SaveOldState();var t={};t.Text=this.GetDisplayText("Focus");if(!this.UpdateText(t))return;this.UpdateDisplayText(this.Text)},r.prototype.Copy=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Copy.call(this)},r.prototype.Cut=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Cut.call(this)},r.prototype.Paste=function(t,n,r,i){var s="";t!=null&&(s=t),r||(r=this.SelectionStart),i||(i=this.SelectionEnd);var o=this.UIProcess.Paste(r,i,s,this.GetExitOnLastChar(),n);if(!o)return!1;o.Value!=null&&(this.Value=o.Value);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text),e.Utility.IsIE()||this.SetInnerFocus()}return o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),(!o||o.FocusExit==null||!o.FocusExit)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),o.EventInfo&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),!0},r.prototype.SetHideValue=function(){},r.prototype.GetHideValue=function(){},r.prototype.CanUndo=function(){return this.Format.Fields.CanUndo()?!0:!1},r.prototype.DoSpinUp=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("up",e,t)},r.prototype.DoSpinDown=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("down",e,t)},r.prototype.DoSpin=function(t,n,r){if(typeof n=="number"&&isNaN(n)||typeof r=="number"&&isNaN(r))return;var i=this.SelectionStart,s=this.SelectionEnd,o=this.Increment;if(n!=undefined){n=e.Utility.CheckInt(n,0,Math.pow(2,31));var u={};u.start=0,u.length=0,u=this.Format.Fields.GetRealFieldRange(n),i=u.start,s=u.start+u.length}r!=undefined&&(o=r),o=e.Utility.CheckInt(o,-Math.pow(2,31),Math.pow(2,31)),t==="up"?this.PerformSpinProcess(i,s,o,this.Wrap,!0,!1):this.PerformSpinProcess(i,s,o,this.Wrap,!1,!1)},r.prototype.UpdateText=function(e){if(!e)return!1;var t="";e.Text!=null&&(t=e.Text);if(t!==this.Text&&this.TextChanging!=null&&this.TextChanging!=""){var n={},r={};r.Result=t,r.Cancel=!1,n.Name=this.TextChanging,n.Args=r,e.SelectionStart!=null&&(this.NewSelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.NewSelectionEnd=e.SelectionEnd);var i=this.UIProcess.GetSepText();this.RollBack(),typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&this.SetHideValue(),n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1&&(this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i));var s=this.UIProcess.FireEvent(this,n.Name,n.Args,"TextChanging");n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1,s!=null&&(this.FocusType=s),typeof this.TextChanging!="undefined"&&(this.NeedSetHideValue=!1);if(r.Cancel)return this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),!1;this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i)}return this.Text=t,this.Value=this.UIProcess.Format.Fields.GetValue(),!0},r.prototype.UpdateDisplayText=function(e){typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&(n.prototype.UpdateDisplayText.call(this,e),this.EditingTextChanged&&this.EditingTextChanged.call(this))},r.prototype.RollBack=function(){this.UIProcess.Format.Fields.RollBack()},r.prototype.ProcessReservedKey=function(e){var t=n.prototype.ProcessReservedKey.call(this,e);if(!t){switch(e){case 118:case 119:return!0}return!1}return!0},r.prototype.AddAllEventsHandler=function(){n.prototype.AddAllEventsHandler.call(this);var r=this;e.Utility.IsIE10OrLater()&&t(this.GetInputElement()).bind("MSPointerUp.wijinput",function(t){e.GlobalEventHandler.OnMSPointerUp(r,t)},!1)},r.prototype.CompositionStart=function(e){this.ImeMode=!0},r.prototype.CompositionUpdate=function(e){},r.prototype.CompositionEnd=function(t){var n=this,r=function(){try{n.ImeInput("DirectInput")}finally{n.ImeMode=!1}};e.Utility.IsIE9OrLater()?r():window.setTimeout(r,0)},r.prototype.Select=function(){if(this.ImeMode)return;this.SelectionStart=e.Utility.GetSelectionStartPosition(this.GetInputElement()),this.SelectionEnd=this.SelectionStart+e.Utility.GetSelectionText(this.GetInputElement()).GetLength()},r.prototype.MSPointerUp=function(e){e&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},r.prototype.HandleClearButton=function(t){if(e.Utility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&(t.srcElement||t.target)===this.InputElement){var n=document.activeElement===(t.srcElement||t.target),r=e.Utility.IsMouseDownOnClearButton(t);if(this.MouseUpHasValue&&n&&r){this.Clear();var i=this.GetText(),s=this;window.setTimeout(function(){s.UpdateDisplayText(i),s.SelectionStart=s.SelectionEnd=s.Format.Fields.GetFirstInputPosition(),s.SetSelection(s.SelectionStart,s.SelectionEnd)},0)}}},r.prototype.HidePromptChar=function(){if(this.GetHidePromptOnLeave()){var e=this.GetInputElement().value;this._textWithPromptChar=e,e=e.replace(new RegExp(this.GetPromptChar(),"g")," "),this.GetInputElement().value=e}},r.prototype.ShowPromptChar=function(){this._textWithPromptChar!==null&&(this.GetInputElement().value=this._textWithPromptChar,this._textWithPromptChar=null)},r.prototype.GetHideEnter=function(){return this._hideEnter},r.prototype.SetHideEnter=function(e){this._hideEnter=e},r.prototype.GetHidePromptOnLeave=function(){return this._hidePromptOnLeave},r.prototype.SetHidePromptOnLeave=function(e){e!==this._hidePromptOnLeave&&(this._hidePromptOnLeave=e,e&&document.activeElement!==this.GetInputElement()&&this.HidePromptChar(),!e&&document.activeElement!==this.GetInputElement()&&this.ShowPromptChar())},r.prototype.OnEditStatusChanged=function(t){t=e.Utility.CheckFunction(t),this.EditStatusChangedEvent=t},r.prototype.OnInvalidInput=function(t){t=e.Utility.CheckFunction(t),this.InvalidInputEvent=t},r.prototype.OnKeyExit=function(t){t=e.Utility.CheckFunction(t),this.KeyExit=t},r.prototype.OnSpinDown=function(t){t=e.Utility.CheckFunction(t),this.SpinDown=t},r.prototype.OnSpinUp=function(t){t=e.Utility.CheckFunction(t),this.SpinUp=t},r.prototype.OnTextChanged=function(t){t=e.Utility.CheckFunction(t),this.TextChanged=t},r.prototype.OnTextChanging=function(t){t=e.Utility.CheckFunction(t),this.TextChanging=t},r.prototype.OnValueChanged=function(t){t=e.Utility.CheckFunction(t),this.ValueChanged=t},r.prototype.OnMouseDownCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseDownEvent=t},r.prototype.OnMouseUpCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseUpEvent=t},r.prototype.OnEditingTextChanged=function(t){t=e.Utility.CheckFunction(t),this.EditingTextChanged=t},r.prototype.IsFocused=function(){try{return document.activeElement===this.GetInputElement()}catch(e){return!1}},r.prototype.GetTextOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!1),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r.prototype.GetPostValueOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!0),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r}(T);e.MaskControl=A})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),define("wijmo.wijinputmaskcore",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery;(function(e){e._map=[],e.editOptional=1,e.editRequired=2,e.separator=4,e.literal=8})(t.wijchartype||(t.wijchartype={}));var r=t.wijchartype,i=function(e){function r(){e.apply(this,arguments),this._imMask=null,this._advanceMode=!1}return __extends(r,e),r._imMaskAssociatedoptions=["disabled","disableUserInput","blurOnLastChar","imeMode","blurOnLeftRightKey","tabAction","nullText","placeholder","readonly","promptChar","autoConvert","showNullText","hideEnter","hidePromptOnLeave"],r.prototype._createTextProvider=function(){this._textProvider=new o(this,this.options.mask,!1)},r.prototype._checkMaskAndPassword=function(){var e=!this.options.mask||this.options.mask.length<0;if(e&&this._isPassword())throw'Option "passwordChar" requires a mask'},r.prototype._updateIsPassword=function(){var e=this.options.passwordChar.length>0&&this.element.attr("type")!=="password";this.element.data("isPassword",e),this._checkMaskAndPassword()},r.prototype._beginUpdate=function(){this.element.addClass(this.options.wijCSS.wijinputmask),this._updateIsPassword(),this.element.data("defaultText",this.options.text)},r.prototype._setOption=function(t,n){switch(t){case"maskFormat":this._super(t,n),t="mask"}e.prototype._setOption.call(this,t,n);if(this._advanceMode)if(r._imMaskAssociatedoptions.indexOf)r._imMaskAssociatedoptions.indexOf(t)!==-1&&this._syncProperties();else for(var i=0;i<r._imMaskAssociatedoptions.length;i++)if(r._imMaskAssociatedoptions[i]===t){this._syncProperties();break}switch(t){case"text":this.setText(n);break;case"mask":case"culture":if(typeof n=="undefined"||n.length<=0)n="";this._checkMaskAndPassword();var s=this.getText();t==="mask"&&(this._textProvider.mask=n),this._checkFormatPattern(n),this._advanceMode?this._imMask.SetText(s):(this._textProvider.initialize(),this._textProvider.setText(s),this._updateText());break;case"promptChar":case"nullText":this._textProvider&&(this._textProvider.updatePromptChar(),this._updateText());break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this._updateIsPassword(),this._updateText()}},r.prototype._checkFormatPattern=function(n){if(n instanceof RegExp||this.options.formatMode==="advanced"){this._advanceMode||(this._detachInputEvent(),this._imMask||(this._imMask=new t.MaskControl,this._addimMaskCustomEvent()),this._imMask.AttachInput(this.element.get(0)),this._attachKeyEventForDropDownList(),this._advanceMode=!0);if(n instanceof RegExp){var r=n;this._imMask.SetFormatPattern(r.source)}else this._imMask.SetFormatPattern(n);this._syncProperties()}else this._advanceMode&&(this._imMask.DetachInput(),this._detachEventForDropDownList(),e.prototype._attachInputEvent.call(this)),this._advanceMode=!1},r.prototype._attachKeyEventForDropDownList=function(){this.element.bind({"keydown.wijinput":n.proxy(this._onKeyDownForDropDownList,this)})},r.prototype._detachEventForDropDownList=function(){this.element.unbind(".wijinput")},r.prototype._onKeyDownForDropDownList=function(t){e.prototype._processKeyForDropDownList.call(this,t)},r.prototype._syncProperties=function(){this._imMask.SetEnabled(!this.options.disabled),this._imMask.SetReadOnly(!!this.options.disableUserInput),this._imMask.SetExitOnLastChar(!!this.options.blurOnLastChar),this._imMask.SetImeMode(this.options.imeMode),this._imMask.SetExitOnLeftRightKey(this._convertExistOnLeftRightKey(this.options.blurOnLeftRightKey)),this._imMask.SetTabAction(this._convertTabAction(this.options.tabAction)),this._imMask.SetDisplayNull(this.options.nullText),this._imMask.SetHideEnter(!!this.options.hideEnter),this._imMask.SetPromptChar(this.options.promptChar),this._imMask.SetAutoConvert(!!this.options.autoConvert),this._imMask.SetHidePromptOnLeave(!!this.options.hidePromptOnLeave)},r.prototype._convertExistOnLeftRightKey=function(e){e||(e="none"),e=e.toLowerCase();if(e==="none")return t.ExitOnLeftRightKey.None;if(e==="left")return t.ExitOnLeftRightKey.Left;if(e==="right")return t.ExitOnLeftRightKey.Right;if(e==="both")return t.ExitOnLeftRightKey.Both},r.prototype._convertTabAction=function(e){return e||(e="control"),e=e.toLowerCase(),e==="control"?t.TabAction.Control:t.TabAction.Field},r.prototype._addimMaskCustomEvent=function(){var e=this;this._imMask.OnInvalidInput(function(t){e._fireIvalidInputEvent("")}),this._imMask.OnTextChanged(function(t){e._raiseTextChanged()}),this._imMask.OnEditingTextChanged(function(t){e._updateText(!0)})},r.prototype._processClearButton=function(){this._textProvider.clear(new t.wijInputResult),this._updateText();var e=this._textProvider.findEditPositionFrom(0,!0);this.selectText(e,e)},r.prototype._resetData=function(){var e=this.element.data("defaultText");if(e===undefined||e===null)e=this.element.data("elementValue");if(e===undefined||e===null)e="";this.setText(e)},r.prototype._isPassword=function(){return!!this.element.data("isPassword")},r.prototype._getTextWithPrompts=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!1):this.element.val()},r.prototype._getTextWithLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},r.prototype._getTextWithPromptAndLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!0):this.element.val()},r.prototype._getTextWithPromptAndLiteralsAndPassword=function(){return this._isInitialized()?this._textProvider.toString(!1,!0,!0):this.element.val()},r.prototype._onChange=function(){if(!this.element)return;var e=this.element.val();this.getText()!==e&&this._getTextWithPrompts()!==e&&this._getTextWithPromptAndLiterals()!==e&&(this._textProvider.getPasswordChar()!==""?this._getTextWithPromptAndLiteralsAndPassword()!==e&&this.setText(e):this.setText(e))},r.prototype._afterFocused=function(){(this._isNullText()||!!this.options.hidePromptOnLeave)&&this._doFocus()},r.prototype._processTabKey=function(e){var t=this.options.tabAction;return t=t?t.toLowerCase():"control",t==="control"?!1:this._moveField(!e.shiftKey)},r.prototype._moveField=function(e){var t=this._textProvider._getFieldList(),n=this.element.wijtextselection(),r=n.start,i=-1;t.length>0&&r>t[t.length-1].end&&(i=t.length);if(i===-1)for(var s=0;s<t.length;s++){if(r>=t[s].start&&r<=t[s].end){i=s;break}if(r<t[s].start){s!=0?i=s:i=-1;break}}if(e){if(i===t.length-1)return!1;this.element.wijtextselection(t[i+1].start,t[i+1].start)}else{if(i<=0)return!1;this.element.wijtextselection(t[i-1].start,t[i-1].start)}return!0},r.prototype._processLeftRightKey=function(e){var t=this.element.wijtextselection(),n=this.options.blurOnLeftRightKey?this.options.blurOnLeftRightKey.toLowerCase():"none";if(e&&t.start===0){if(n==="both"||n==="left")return this._moveControl(this.element.get(0),!1,!0),!0}else{var r=n==="both"||n==="right",i=!1;this._textProvider.noMask&&t.start===this.options.text.length?i=!0:!this._textProvider.noMask&&t.start===this._textProvider.testString.length&&(i=!0);if(!e&&r&&i)return this._moveControl(this.element.get(0),!0,!0),!0}return!1},r.prototype._onKeyPress=function(t){if(!this._textProvider.noMask&&this.options.blurOnLastChar)var n=this._textProvider._isLastCharAssigned();e.prototype._onKeyPress.call(this,t);if(!this._textProvider.noMask&&this.options.blurOnLastChar){var r=this._textProvider._isLastCharAssigned();!n&&r&&this._moveControl(this.element.get(0),!0,!0)}},r.prototype.setText=function(t){if(t===undefined)return;this._advanceMode?this._imMask.SetValue(t):e.prototype.setText.call(this,t)},r.prototype.getText=function(){return this._advanceMode?this._imMask.GetTextOnSimpleMode():e.prototype.getText.call(this)},r.prototype.selectText=function(t,n){typeof t=="undefined"&&(t=0),typeof n=="undefined"&&(n=this.getText().length),isNaN(t)&&(t=0),isNaN(n)&&(n=0),this._advanceMode?(this._imMask.SetSelectionStart(t),this._imMask.SetSelectionLength(Math.abs(n-t)),this._imMask.SetFocus()):e.prototype.selectText.call(this,t,n)},r.prototype._attachInputEvent=function(){this._advanceMode?this._imMask.AttachInput(this.element.get(0)):e.prototype._attachInputEvent.call(this)},r.prototype._detachInputEvent=function(){this._advanceMode?this._imMask.DetachInput():e.prototype._detachInputEvent.call(this)},r.prototype.getPostValue=function(){return this._advanceMode?this._imMask.GetPostValueOnSimpleMode():e.prototype.getPostValue.call(this)},r.prototype._initialize=function(){this.options.maskFormat&&(this.options.mask=this.options.maskFormat),e.prototype._initialize.call(this)},r.prototype._init=function(){e.prototype._init.call(this);var t=this.options.text||this.element.val();this.options.mask&&this._setOption("mask",this.options.mask),t&&this._setOption("text",t)},r.prototype._updateText=function(t){typeof t=="undefined"&&(t=!1);if(!this.element.data("initialized"))if(this.options.mask instanceof RegExp||this.options.formatMode==="advanced")return;if(this._advanceMode){if(!this._isInitialized())return;if(this.element.is(":disabled"))return;var n=this._imMask.GetTextOnSimpleMode();n!==this.options.text&&(this.options.text=n,this._raiseTextChanged())}else e.prototype._updateText.call(this,t)},r.prototype.isFocused=function(){return this._advanceMode?this._imMask.IsFocused():e.prototype.isFocused.call(this)},r}(t.wijinputcore);t.wijinputmask=i;var s=function(){function e(){this.wijCSS={wijinputmask:t.wijinputcore.prototype.options.wijCSS.wijinput+"-mask"},this.autoConvert=!0,this.text=null,this.mask="",this.maskFormat="",this.promptChar="_",this.hidePromptOnLeave=!1,this.resetOnPrompt=!0,this.allowPromptAsInput=!1,this.passwordChar="",this.resetOnSpace=!0,this.skipLiterals=!0,this.blurOnLastChar=!1,this.tabAction="control",this.imeMode="auto"}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputmask",i.prototype);var o=function(i){function s(e,t,n){i.call(this),this.inputWidget=e,this.mask=t,this.asciiOnly=n,this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.noMask=!1,this._autoConvertPosition=0,this._needCheckNextChar=!1,this.descriptors=[],this.initialize()}return __extends(s,i),s.FK_K="K",s.FK_H="H",s.FK_DB_9=t.CharProcess.CharEx.ToFullWidth("9").text,s.FK_DB_K=t.CharProcess.CharEx.ToFullWidth("K").text,s.FK_DB_J=t.CharProcess.CharEx.ToFullWidth("J").text,s.FK_DB_Z=t.CharProcess.CharEx.ToFullWidth("Z").text,s.DBCS_0=t.CharProcess.CharEx.ToFullWidth("0").text,s.DBCS_9=t.CharProcess.CharEx.ToFullWidth("9").text,s.DBCS_A=t.CharProcess.CharEx.ToFullWidth("A").text,s.DBCS_a=t.CharProcess.CharEx.ToFullWidth("a").text,s.DBCS_Z=t.CharProcess.CharEx.ToFullWidth("Z").text,s.DBCS_z=t.CharProcess.CharEx.ToFullWidth("z").text,s.prototype.initialize=function(){this.noMask=!this.mask||this.mask.length<=0;if(this.noMask)return;this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.descriptors=[];var e="none",t=!1,n=r.literal,i="",o=this.inputWidget._getCulture();for(var a=0;a<this.mask.length;a++){var f=!1,l=this.mask.charAt(a);t&&(t=!1,f=!0);if(!f){var c=l;if(c<="C"){switch(c){case"#":case"9":case"?":case"C":l=this.getPromtChar(),n=r.editOptional,f=!0;break;case"$":i=o.numberFormat.currency.symbol,n=r.separator,f=!0;break;case"%":case"-":case";":case"=":case"@":n=r.literal,f=!0;break;case"&":case"0":case"A":l=this.getPromtChar(),n=r.editRequired,f=!0;break;case",":i=o.numberFormat[","],n=r.separator,f=!0;break;case".":i=o.numberFormat["."],n=r.separator,f=!0;break;case"/":i=o.calendars.standard["/"],n=r.separator,f=!0;break;case":":i=o.calendars.standard[":"],n=r.separator,f=!0;break;case"<":e="lower";continue;case">":e="upper";continue}f||(n=r.literal,f=!0)}if(!f){if(c<="\\"){switch(c){case s.FK_K:case s.FK_H:case"L":l=this.getPromtChar(),n=r.editRequired,f=!0;break;case"\\":t=!0,n=r.literal;continue}f||(n=r.literal,f=!0)}if(!f){c==="a"&&(l=this.getPromtChar(),n=r.editOptional,f=!0);switch(c){case s.FK_DB_K:case s.FK_DB_J:case s.FK_DB_9:case s.FK_DB_Z:l=this.getPromtChar(),n=r.editRequired,f=!0}if(!f){c!=="|"&&(n=r.literal,f=!0);if(!f){e="none";continue}}}}}if(f){var h=new u(a,n);this.isEditDesc(h)&&(h.caseConversion=e),n!==r.separator&&(i=l);for(var p=0;p<i.length;p++)this.testString=this.testString+i.charAt(p),this.descriptors[this.descriptors.length]=h}}},s.prototype.getAllowPromptAsInput=function(){return this.inputWidget?this.inputWidget.options.allowPromptAsInput:!1},s.prototype.getPasswordChar=function(){var e=this.inputWidget?this.inputWidget.options.passwordChar:"*";return e===""&&(e="*"),e.length>1?e.charAt(0):e},s.prototype.isPassword=function(){return this.inputWidget?this.inputWidget._isPassword():!1},s.prototype.getResetOnPrompt=function(){return this.inputWidget?this.inputWidget.options.resetOnPrompt:!0},s.prototype.getResetOnSpace=function(){return this.inputWidget?this.inputWidget.options.resetOnSpace:!0},s.prototype.getSkipLiterals=function(){return this.inputWidget?this.inputWidget.options.skipLiterals:!0},s.prototype.getHidePromptOnLeave=function(){return this.inputWidget?this.inputWidget.options.hidePromptOnLeave:!1},s.prototype._trueOR=function(e,t){return(e>>>1|t>>>1)*2+(e&1|t&1)},s.prototype.setValue=function(e){return!1},s.prototype.getValue=function(){return null},s.prototype.getPromtChar=function(){var e=this.inputWidget?this.inputWidget.options.promptChar:"_";return e===""&&(e="_"),e.length>1?e.charAt(0):e},s.prototype.getAutoConvert=function(){return this.inputWidget?this.inputWidget.options.autoConvert:!0},s.prototype.updatePromptChar=function(){if(this.noMask)return;for(var e=0;e<this.descriptors.length;e++){var t=this.descriptors[e];if(t.charType===r.editOptional||t.charType===r.editRequired)t.isAssigned||(this.testString=n.wij.charValidator.setChar(this.testString,this.getPromtChar(),e))}},s.prototype.resetChar=function(e){var t=this.descriptors[e];this.isEditPos(e)&&t.isAssigned&&(t.isAssigned=!1,this.testString=n.wij.charValidator.setChar(this.testString,this.getPromtChar(),e),this.assignedCharCount--,t.charType===r.editRequired&&this.requiredCharCount--)},s.prototype.getAdjustedPos=function(e){return this.noMask?e=Math.min(e,this.testString.length-1):e>=this.descriptors.length&&e--,Math.max(0,e)},s.prototype.findNonEditPositionInRange=function(e,t,n){var i=this._trueOR(r.literal,r.separator);return this.findPositionInRange(e,t,n,i)},s.prototype.findPositionInRange=function(e,t,n,r){e=Math.max(0,e),t=Math.min(t,this.testString.length-1);if(e<=t)while(e<=t){var i=n?e++:t--,s=this.descriptors[i];if((s.charType&4294967295&(r&4294967295))===s.charType)return i}return-1},s.prototype.findAssignedEditPositionInRange=function(e,t,n){return this.assignedCharCount===0?-1:this.findEditPositionInRange(e,t,n,r.editRequired)},s.prototype.findEditPositionInRange=function(e,t,n,i){do{var s=this._trueOR(r.editRequired,r.editOptional),o=this.findPositionInRange(e,t,n,s);if(o===-1)break;var u=this.descriptors[o];switch(i){case r.editOptional:if(!u.isAssigned)return o;break;case r.editRequired:if(u.isAssigned)return o;break;default:return o}n?e++:t--}while(e<=t);return-1},s.prototype.findAssignedEditPositionFrom=function(e,t){if(!this.assignedCharCount)return-1;var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findAssignedEditPositionInRange(n,r,t)},s.prototype.findEditPositionFrom=function(e,t){var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findEditPositionInRange(n,r,t,0)},s.prototype.setChar=function(t,i,s){if(this.getAutoConvert()){var o=new e.input.wijInputResult,u=this.testInternal(t,i,o);if(!u){var a=this._convert(t,0);if(t.length===0)debugger;t=a.strValue.charAt(0),a.strValue.length>1&&this.inputWidget.element.data("appendChar",a.strValue.charAt(1)),a.index===2&&this.inputWidget.element.data("skipNextChar",!0)}}i=Math.max(0,i),s||(s=this.descriptors[i]),this.testEscapeChar(t,i,s)?this.resetChar(i):(n.wij.charValidator.isLetter(t)&&(n.wij.charValidator.isUpper(t)?s.caseConversion==="lower"&&(t=t.toLowerCase()):s.caseConversion==="upper"&&(t=t.toUpperCase())),this.testString=n.wij.charValidator.setChar(this.testString,t,i),s.isAssigned||(s.isAssigned=!0,this.assignedCharCount++,s.charType===r.editRequired&&this.requiredCharCount++))},s.prototype.internalInsertAt=function(e,n,r,i){if(e.length===0)return r.testPosition=n,r.hint=r.noEffect,!0;if(!this._testString(e,n,r))return!1;var s=this.findEditPositionFrom(n,!0),o=this.findAssignedEditPositionInRange(s,r.testPosition,!0)!==-1;if(o&&r.testPosition===this.testString.length-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;var u=this.findEditPositionFrom(r.testPosition+1,!0);if(o){var a=new t.wijInputResult;a.hint=a.unknown;var f=!0,l=this.findAssignedEditPositionFrom(this.testString.length-1,!1);while(f){f=!1;if(u===-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;var c=this.testChar(this.testString.charAt(s),u,a);if(this.descriptors[s].isAssigned&&!c)return r.hint=a.hint,r.testPosition=u,!1;if(s!==l){s=this.findEditPositionFrom(s+1,!0),u=this.findEditPositionFrom(u+1,!0),f=!0;continue}}r.hint=Math.max(r.hint,a.hint)}if(!i){if(o)while(s>=n)this.descriptors[s].isAssigned?this.setChar(this.testString.charAt(s),u):this.resetChar(u),u=this.findEditPositionFrom(u-1,!1),s=this.findEditPositionFrom(s-1,!1);this.setString(e,n)}return!0},s.prototype.insertAt=function(e,n,r){typeof r=="undefined"&&(r=new t.wijInputResult);if(e===undefined)throw"InsertAt: input";return this.noMask?(this.testString=this.testString.substring(0,n)+e+this.testString.substring(n,this.testString.length),r.testPosition=n+e.length-1,!0):n>=0&&n<this.testString.length?this.internalInsertAt(e,n,r,!1):(r.testPosition=n,r.hint=r.positionOutOfRange,!1)},s.prototype.clear=function(e){if(this.noMask){this.testString="",e.hint=e.success;return}if(!this.assignedCharCount)e.hint=e.noEffect;else{e.hint=e.success;for(var t=0;t<this.testString.length;t++)this.resetChar(t)}},s.prototype.isLiteral=function(e){return e?e.charType===r.literal||e.charType===r.separator:!1},s.prototype.testEscapeChar=function(e,t,n){t=Math.max(0,t),n||(n=this.descriptors[t]);if(this.isLiteral(n))return this.getSkipLiterals()?e===this.testString.charAt(t):!1;var r=this.getResetOnPrompt()&&e===this.getPromtChar(),i=this.getResetOnSpace()&&e===" ";return r||i},s.prototype.testChar=function(e,t,n){var r=this.testInternal(e,t,n);if(!r&&this.getAutoConvert()){this._autoConvertPosition=t;var i=this._convert(e,0);r=i.strValue.length>0,i.strValue.length>1&&this.inputWidget.element.data("appendChar",i.strValue.charAt(1)),i.index===2&&this.inputWidget.element.data("skipNextChar",!0)}return r},s.prototype.testInternal=function(e,r,i){if(!n.wij.charValidator.isPrintableChar(e))return i.hint=i.invalidInput,!1;var o=this.descriptors[r];if(!o)return!1;if(this.isLiteral(o))return this.getSkipLiterals()&&e===this.testString.charAt(r)?(i.hint=i.characterEscaped,!0):(i.hint=i.nonEditPosition,!1);if(e===this.getPromtChar()){if(this.getResetOnPrompt())return this.isEditDesc(o)&&o.isAssigned?i.hint=i.sideEffect:i.hint=i.characterEscaped,!0;if(!this.getAllowPromptAsInput())return i.hint=i.promptCharNotAllowed,!1}if(e===" "&&this.getResetOnSpace())return this.isEditDesc(o)&&o.isAssigned?i.hint=i.sideEffect:i.hint=i.characterEscaped,!0;switch(this.mask.charAt(o.maskPosition)){case"L":if(!n.wij.charValidator.isLetter(e))return i.hint=i.letterExpected,!1;if(!n.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"?":if(!n.wij.charValidator.isLetter(e)&&e!==" ")return i.hint=i.letterExpected,!1;if(!n.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"A":if(!n.wij.charValidator.isAlphanumeric(e))return i.hint=i.alphanumericCharacterExpected,!1;if(!n.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"a":if(!n.wij.charValidator.isAlphanumeric(e)&&e!==" ")return i.hint=i.alphanumericCharacterExpected,!1;if(!n.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"&":if(!n.wij.charValidator.isAscii(e)&&this.asciiOnly)return i.hint=i.asciiCharacterExpected,!1;break;case"C":if(!n.wij.charValidator.isAscii(e)&&this.asciiOnly&&e!==" ")return i.hint=i.asciiCharacterExpected,!1;break;case"0":if(!n.wij.charValidator.isDigit(e))return i.hint=i.digitExpected,!1;break;case"9":if(!n.wij.charValidator.isDigit(e)&&e!==" ")return i.hint=i.digitExpected,!1;break;case s.FK_DB_9:if(!(e>=s.DBCS_0&&e<=s.DBCS_9)&&e!==" ")return!1;break;case"#":if(!n.wij.charValidator.isDigit(e)&&e!=="-"&&e!=="+"&&e!==" ")return i.hint=i.digitExpected,!1;break;case s.FK_K:if(!!t.CharProcess.CharEx.IsFullWidth(e)||!t.CharProcess.CharEx.IsKatakana(e))return!1;break;case s.FK_H:if(t.CharProcess.CharEx.IsFullWidth(e))return!1;break;case s.FK_DB_K:if(!t.CharProcess.CharEx.IsFullWidth(e)||!t.CharProcess.CharEx.IsKatakana(e))return!1;break;case s.FK_DB_J:if(!t.CharProcess.CharEx.IsHiragana(e))return!1;break;case s.FK_DB_Z:if(!t.CharProcess.CharEx.IsFullWidth(e))return!1}return e===this.testString.charAt(r)&&o.isAssigned?i.hint=i.noEffect:i.hint=i.success,!0},s.prototype._convert=function(e,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=e.Substring(n,n+1),s,o=t.CharProcess.CharEx,u=!0;if(o.IsAlphabet(i)){var a=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this._isValid(a),s&&u||!s&&!u?(n++,r.index=n,r.strValue=a,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this._isValid(i),s&&u||!s&&!u?(n++,r.index=n,r.strValue=i,r):(a=o.IsFullWidth(a)?o.ToHalfWidth(a):o.ToFullWidth(a).text,s=this._isValid(a),s&&u||!s&&!u?(n++,r.index=n,r.strValue=a,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}i=o.ToKatakana(i),s=this._isValid(i);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}var c=o.ToHalfWidthEx(i);s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r;if(o.IsLowerKana(c)){c=o.ToUpperKana(c),s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r}else if(o.HasLowerKana(c)){c=o.ToLowerKana(c),s=this._isValid(c);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=c,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var f=o.ToUpperKana(i);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(i)){var l=o.ToLowerKana(i);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}var a=i,h=!1;if(o.IsFullWidth(i)){var p=o.ToHalfWidthEx(i);if(p.GetLength()>0){s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}if(o.IsLowerKana(p)){p=o.ToUpperKana(p),s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}else if(o.HasLowerKana(p)){p=o.ToLowerKana(p),s=this._isValid(p);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=p,r}}else{if(n==null){a=o.ToFullWidth(i).text;if(!o.IsKatakana(a))return r;s=this._isValid(a);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=a,r}else{var d=this.inputWidget.element.data("nextChar");if(this._needCheckNextChar&&d&&d.length>0){var v=o.ToFullWidth(e+d);a=v.text,h=v.processedAll}else a=o.ToFullWidth(i).text;if(!o.IsKatakana(a))return r;s=this._isValid(a);if(s&&u||!s&&!u)return n++,h&&n++,r.index=n,r.strValue=a,r}if(o.IsLowerKana(a)){var f=o.ToUpperKana(a);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(a)){var l=o.ToLowerKana(a);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}}a=o.ToHiragana(a),s=this._isValid(a);if(s&&u||!s&&!u)return n++,h&&n++,r.index=n,r.strValue=a,a=="ゔ"&&(h?r.strValue="う゛":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(a)){var f=o.ToUpperKana(a);s=this._isValid(f);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=f,r}else if(o.HasLowerKana(a)){var l=o.ToLowerKana(a);s=this._isValid(l);if(s&&u||!s&&!u)return n++,r.index=n,r.strValue=l,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this._isValid(i),s&&u||!s&&!u?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},s.prototype._isValid=function(t){var n=new e.input.wijInputResult;return this.testInternal(t,this._autoConvertPosition,n)},s.prototype._testString=function(e,n,r){r.hint=r.unknown,r.testPosition=n;if(e.length){var i=new t.wijInputResult;i.testPosition=r.testPosition,i.hint=r.hint;for(var s=0;s<e.length;s++){if(r.testPosition>this.testString.length)return r.hint=r.unavailableEditPosition,!1;var o=e.charAt(s);if(!this.testEscapeChar(o,r.testPosition)){r.testPosition=this.findEditPositionFrom(r.testPosition,!0);if(r.testPosition===-1)return r.testPosition=this.testString.length,r.hint=r.unavailableEditPosition,!1}this._needCheckNextChar=!0,this.inputWidget.element.data("batchKeyPress")||this.inputWidget.element.data("nextChar",s===e.length-1?"":e.charAt(s+1));if(!this.testChar(o,r.testPosition,i))return r.hint=i.hint,this._needCheckNextChar=!1,this.inputWidget.element.data("batchKeyPress")||this.inputWidget.element.data("nextChar",""),!1;this._needCheckNextChar=!1;if(!this.inputWidget.element.data("batchKeyPress")){this.inputWidget.element.data("nextChar","");var u=this.inputWidget.element.data("appendChar");if(u&&u.length>0){this.inputWidget.element.data("appendChar",""),r.testPosition++;if(!this.testChar(u,r.testPosition,i))return r.hint=i.hint,this._needCheckNextChar=!1,!1}this.inputWidget.element.data("skipNextChar")&&(s++,this.inputWidget.element.data("skipNextChar",!1))}r.hint=Math.max(i.hint,r.hint),r.testPosition++;if(r.testPosition===this.testString.length)break}r.testPosition--}return!0},s.prototype.setText=function(e,n){typeof n=="undefined"&&(n=new t.wijInputResult);if(e===undefined)throw"SetFromPos: input parameter is null or undefined.";n.hint=n.unknown,n.testPosition=0;if(!e.length)return this.clear(n),!0;if(this.noMask)return this.testString=e,!0;if(!this.testSetString(e,n.testPosition,n))return!1;var r=this.findAssignedEditPositionFrom(n.testPosition+1,!0);return r!==-1&&this.resetString(r,this.testString.length-1),!0},s.prototype.resetString=function(e,t){if(this.noMask){this.testString="";return}e=this.findAssignedEditPositionFrom(e,!0);if(e!==-1){t=this.findAssignedEditPositionFrom(t,!1);while(e<=t)e=this.findAssignedEditPositionFrom(e,!0),this.resetChar(e),e++}},s.prototype.setString=function(e,t){for(var n=0;n<e.length;n++){var r=e.charAt(n);this.testEscapeChar(r,t)||(t=this.findEditPositionFrom(t,!0));if(t<0||t>=this.testString.length)return;this.inputWidget.element.data("batchKeyPress")||this.inputWidget.element.data("nextChar",n===e.length-1?"":e.charAt(n+1)),this._needCheckNextChar=!0,this.setChar(r,t),t++,this._needCheckNextChar=!1;if(!this.inputWidget.element.data("batchKeyPress")){this.inputWidget.element.data("nextChar","");var i=this.inputWidget.element.data("appendChar");i&&i.length>0&&(this.inputWidget.element.data("appendChar",""),this.inputWidget.element.data("nextChar",""),this.testEscapeChar(i,t)||(t=this.findEditPositionFrom(t,!0)),this.setChar(i,t),t++),this.inputWidget.element.data("skipNextChar")&&(n++,this.inputWidget.element.data("skipNextChar",!1))}}},s.prototype.testSetString=function(e,t,n){return e.length>this.testString.length&&(e=e.substring(0,this.testString.length)),this._testString(e,t,n)?(this.setString(e,t),!0):!1},s.prototype.isAllDecriptorUnAssigned=function(){for(var e=0;e<this.testString.length;e++){var t=this.descriptors[e];if(t&&(t.charType===r.editOptional||t.charType===r.editRequired)&&t.isAssigned)return!1}return!0},s.prototype.toString=function(e,t,n,i,s){var o=this.inputWidget._showNullText(),u=!this.inputWidget.isFocused(),a=this.isAllDecriptorUnAssigned();if(o&&u&&a)return this.inputWidget.options.nullText;e=e===undefined?!this.isPassword():e;var f=this.getHidePromptOnLeave()?this.inputWidget.isFocused():!0;t=t===undefined?f:t,n=n===undefined?!0:n;if(this.noMask){if(!e){var l="";for(var c=0;c<this.testString.length;c++)l+=this.getPasswordChar();return l}return this.testString}i=i===undefined?0:i,s=s===undefined?this.testString.length:s;if(s<=0)return"";i=Math.max(0,i);if(i>=this.testString.length)return"";var h=this.testString.length-i;s=Math.min(s,h),o=!this.isPassword()||e,u=t&&n;if(o&&u)return this.testString.substring(i,s-i);var p="",d=i+s-1;for(var v=i;v<=d;v++){var m=this.testString.charAt(v),g=this.descriptors[v];switch(g.charType){case r.editOptional:case r.editRequired:if(!g.isAssigned)break;if(!this.isPassword()||e){p+=m;continue}p+=this.getPasswordChar();continue;case r.editRequired|r.editOptional:p+=m;continue;case r.separator:case r.literal:if(!n)continue;p+=m;continue;default:p+=m;continue}if(t){p+=m;continue}p+=" ";continue}return p},s.prototype.isEditDesc=function(e){return this.noMask?!0:e.charType===r.editRequired||e.charType===r.editOptional},s.prototype.isEditPos=function(e){if(this.noMask)return!0;if(e<0||e>=this.testString.length)return!1;var t=this.descriptors[e];return this.isEditDesc(t)},s.prototype.internalRemoveAt=function(e,n,r,i){typeof i=="undefined"&&(i=!1);if(this.noMask){try{this.testString=this.testString.substring(0,e)+this.testString.substring(n+1,this.testString.length),r.testPosition=e}catch(s){}return!0}var o=this.findAssignedEditPositionFrom(this.testString.length-1,!1),u=this.findEditPositionInRange(e,n,!0,0);r.hint=r.noEffect;if(u===-1||u>o)return r.testPosition=e,!0;r.testPosition=e,this.findAssignedEditPositionInRange(e,n,!0)!==-1&&(r.hint=r.success);if(n<o){var a=this.findEditPositionFrom(n+1,!0),f=a;e=u;var l=!0,c=new t.wijInputResult;while(l){l=!1;var h=this.testString.charAt(a),p=this.descriptors[a],d=h!==this.getPromtChar()||p.isAssigned,v=!this.testChar(h,u,c);if(d&&v)return r.hint=c.hint,r.testPosition=u,!1;if(a!==o){a=this.findEditPositionFrom(a+1,!0),u=this.findEditPositionFrom(u+1,!0),l=!0;continue}}r.sideEffect>r.hint&&(r.hint=r.sideEffect);if(i)return!0;a=f,u=e,l=!0;while(l){l=!1;var m=this.testString.charAt(a),g=this.descriptors[a];m===this.getPromtChar()&&!g.isAssigned?this.resetChar(u):(this.setChar(m,u),this.resetChar(a));if(a!==o){a=this.findEditPositionFrom(a+1,!0),u=this.findEditPositionFrom(u+1,!0),l=!0;continue}}e=u+1}return e<=n&&this.resetString(e,n),!0},s.prototype.removeAt=function(e,n,r){return typeof n=="undefined"&&(n=e),typeof r=="undefined"&&(r=new t.wijInputResult),n>=this.testString.length?(r.testPosition=n,r.hint=r.positionOutOfRange,!1):e>=0&&e<=n?this.internalRemoveAt(e,n,r,!1):(r.testPosition=e,r.hint=r.positionOutOfRange,!1)},s.prototype._isLastCharAssigned=function(){var e=this.findEditPositionFrom(this.testString.length,!1);return e>=0&&e<this.testString.length?this.descriptors[e].isAssigned:!1},s.prototype._getFieldList=function(){var e=[],t=this.findEditPositionFrom(0,!0);while(t>=0&&t<this.testString.length)e.push(t),t=this.findEditPositionFrom(t+1,!0);var n=[];if(e.length>0){var r=e[0],i=1,s=r;while(i<e.length)e[i]-r!=1&&(n.push({start:s,end:r}),s=e[i]),r=e[i],i++;n.push({start:s,end:r})}return n},s}(t.wijTextProvider);t.wijMaskedTextProvider=o;var u=function(){function e(e,t){this.maskPos=e,this.charType=t,this.caseConversion="none",this.isAssigned=!1,this.maskPosition=0,this.maskPosition=e,this.charType=t}return e}();t.wijCharDescriptor=u})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),define("wijmo.wijinputmask",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments),this._initialValue=0}return __extends(i,e),i.prototype._init=function(){e.prototype._init.call(this),this._initUserCultureOptions(),this._updateCultureRelatedOptions(),this._updateText()},i.prototype._initUserCultureOptions=function(){this.options.negativePrefix!==null&&(this._userNegativePrefix=this.options.negativePrefix),this.options.negativeSuffix!==null&&(this._userNegativeSuffix=this.options.negativeSuffix),this.options.positivePrefix!==null&&(this._userPositivePrefix=this.options.positivePrefix),this.options.positiveSuffix!==null&&(this._userPositiveSuffix=this.options.positiveSuffix),this.options.currencySymbol!==null&&(this._userCurrencySymbol=this.options.currencySymbol)},i.prototype._updateCultureRelatedOptions=function(){var e=this._getCulture().numberFormat,t=e[this.options.type]||e,n=t.pattern[0],r=t.pattern[1]||"n",i=n.split("n"),s=r.split("n"),o=this._getPercentSymbol(),u=this._getCulture().numberFormat.currency.symbol;this._userNegativePrefix===undefined&&(this.options.negativePrefix=i[0].replace(/%/g,o).replace(/\$/g,u)),this._userNegativeSuffix===undefined&&(this.options.negativeSuffix=i[1].replace(/%/g,o).replace(/\$/g,u)),this._userPositivePrefix===undefined&&(this.options.positivePrefix=s[0].replace(/%/g,o).replace(/\$/g,u)),this._userPositiveSuffix===undefined&&(this.options.positiveSuffix=s[1].replace(/%/g,o).replace(/\$/g,u)),this._userCurrencySymbol===undefined&&(this.options.currencySymbol=e.currency.symbol)},i.prototype._createTextProvider=function(){if(this._textProvider)return this._textProvider;this._textProvider=new o(this,this.options.type),this._textProvider.setNullValue(this.element.val()===""&&this.options.value===null)},i.prototype._beginUpdate=function(){this._initialValue=0;var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||this._initialValue})},i.prototype.focus=function(){e.prototype.focus.call(this);var t=this.element.data("prevCursorPos");this.element.wijtextselection(t,t)},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"minValue":this.element.attr("aria-valuemin",n),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",n),this._updateText();break;case"value":this.setValue(n),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._updateCultureRelatedOptions(),this._updateText();break;case"positivePrefix":this._userPositivePrefix=n,this._updateText();break;case"negativePrefix":this._userNegativePrefix=n,this._updateText();break;case"positiveSuffix":this._userPositiveSuffix=n,this._updateText();break;case"negativeSuffix":this._userNegativeSuffix=n,this._updateText();break;case"currencySymbol":this._userCurrencySymbol=n,this._updateCultureRelatedOptions(),this._updateText();break;case"type":this._updateCultureRelatedOptions(),this._updateText()}},i.prototype._setData=function(e){this.setValue(e)},i.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===0){var t=this.element.data("elementValue");t!==undefined&&t!==null&&t!==""&&(e=t)}(e!==this._textProvider.getValue()||this._textProvider._nullvalue&&e===0)&&this.setValue(e)},i.prototype._validateData=function(){!this._textProvider.checkAndRepairBounds(!0,!1)&&this.options.value!==null&&this._updateText()},i.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},i.prototype._onChange=function(){},i.prototype._getPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix:this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix},i.prototype._getInvertPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix:this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix},i.prototype._getSuffix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativeSuffix!==undefined?this._userNegativeSuffix:this.options.negativeSuffix:this._userPositiveSuffix!==undefined?this._userPositiveSuffix:this.options.positiveSuffix},i.prototype._getCurrencySymbol=function(){return this._userCurrencySymbol!==undefined?this._userCurrencySymbol:this._getCulture().numberFormat.currency.symbol},i.prototype._getPercentSymbol=function(){return this._getCulture().numberFormat.percent.symbol},i.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},i.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,e===null||typeof e=="undefined"||isNaN(e)?e=null:typeof e=="boolean"?e=e?1:0:typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n=this.getText();this.setText(e);var r=this.getText().trim();e=e.trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},i.prototype._isLastValueNull=function(){return e.prototype._isLastValueNull.call(this)&&!this._textProvider._nullvalue},i.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isValueNull())return"0";var t=this.options.value?this.options.value:0;return this.options.type==="percent"&&(t=(t/100).toFixed(10)),t.toString()},i.prototype._updateText=function(t){typeof t=="undefined"&&(t=!1);if(!this._isInitialized())return;this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),this._textProvider._nullvalue?this.options.value=null:this.options.value=this._textProvider.getValue(),e.prototype._updateText.call(this,t),this._textProvider.checkAndRepairBounds(!0,!1)||(this._trigger("valueBoundsExceeded"),this.isFocused()||(this._textProvider.setNullValue(!1),e.prototype._updateText.call(this,t)))},i.prototype._doSpin=function(e,r,i){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var s=this.element.wijtextselection(),o=new t.wijInputResult;this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevCursorPos",0)),this.element.data("prevCursorPos")===-1?this.element.data("prevCursorPos",s.start):s.start=this.element.data("prevCursorPos"),o.testPosition=s.start,this._textProvider.spinEnumPart(s.start,o,this.options.increment,e),e?this._trigger("spinUp",null):this._trigger("spinDown",null),this._updateText(),this.element.data("prevCursorPos",o.testPosition),i||this.selectText(o.testPosition,o.testPosition);if(r&&!this.element.data("breakSpinner")){var u=window.setTimeout(n.proxy(function(){this._doSpin(e,!0)},this),this._calcSpinInterval());this.element.data("spintimer",u)}return!0},i.prototype._deleteSelText=function(t){typeof t=="undefined"&&(t=!1);var n=this.element.wijtextselection(),r=n.start===0&&n.end===this.element.val().length,i;if(n.start===n.end&&!t){i=this._textProvider._stringFormat._currentText;if(i.charAt(n.end)===this._textProvider.getGroupSeparator()||i.charAt(n.end)===this._textProvider.getDecimalSeparator()){n.start++,n.end++,this.element.wijtextselection(n);return}}var s=this._textProvider.getEditingValue();e.prototype._deleteSelText.call(this,t),s===0&&(r||this._textProvider.getEditingValue()===0)&&(this._textProvider.setNullValue(!0),this._updateText(!0),this.options.value=null)},i.prototype._processClearButton=function(){this._setOption("value",null)},i.prototype._processLeftRightKey=function(e){if(e){if(this.element.wijtextselection().start===0&&(this.options.blurOnLeftRightKey.toLowerCase()==="left"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!1),!0}else if(this.element.wijtextselection().start===this.element.val().length&&(this.options.blurOnLeftRightKey.toLowerCase()==="right"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!0),!0;return!1},i.prototype._processTabKey=function(e){var t=e.keyCode||e.which;switch(t){case r.TAB:if(this.options.tabAction!=="field")break;var n=this.element.val().indexOf(".");n===-1&&(n=this.element.val().length);var i=this.element.wijtextselection();return e.shiftKey?i.start>n&&this._toPrevField():i.start<n&&this._toNextField(),!0}return!1},i.prototype._toPrevField=function(){var e=this._getPrefix();this.element.wijtextselection(e.length,e.length)},i.prototype._toNextField=function(){var e=this.element.val().indexOf(".");e===-1?this._toPrevField():this.element.wijtextselection(e+1,e+1)},i.prototype.spinUp=function(){this._doSpin(!0,!1,!0)},i.prototype.spinDown=function(){this._doSpin(!1,!1,!0)},i}(t.wijinputcore);t.wijinputnumber=i;var s=function(){function e(){this.wijCSS={wijinputnumber:t.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric",wijinputnumberNegative:"ui-state-negative"},this.type="numeric",this.value=0,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.currencySymbol=null,this.negativePrefix=null,this.negativeSuffix=null,this.positivePrefix=null,this.positiveSuffix=null,this.valueChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null,this.negativeClass=this.wijCSS.wijinputnumberNegative}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputnumber",i.prototype);var o=function(e){function r(t,n){e.call(this),this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=t,this._type=n,this._stringFormat=new u(this.inputWidget),this._stringFormat.setValueFromJSFloat(this.getValue())}return __extends(r,e),r.prototype.getEditingValue=function(){return this._stringFormat.tryParseValue(this._stringFormat._strippedText)},r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},r.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},r.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e)},r.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this.isValueNull()?"":this._stringFormat.getFormattedValue()},r.prototype.isValueNull=function(){var e=this.inputWidget.options;return null===e.value||undefined===e.value||this._nullvalue},r.prototype.setText=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},r.prototype.clear=function(){this._stringFormat.clear()},r.prototype.checkAndRepairBounds=function(e,t,n){typeof n=="undefined"&&(n=!1);if(this._nullvalue)return!0;var r=!0,i,s;typeof e=="undefined"&&(e=!1),i=this.inputWidget.options.minValue,s=this.inputWidget.options.maxValue;if(typeof t!="undefined"&&t)return this._stringFormat.checkMinValue(i,!1,!0);var o=!0;return this._stringFormat.checkMinValue(i,e,!1)||(r=!1,n&&(o=!1,this._stringFormat._currentValueInString=s.toString())),o&&!this._stringFormat.checkMaxValue(s,e)&&(r=!1,n&&(this._stringFormat._currentValueInString=i.toString())),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),r},r.prototype._countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},r.prototype._getAdjustedPositionFromLeft=function(e){var t=this._stringFormat._strippedText,r,i;for(r=0;r<t.length;r++){i=t.charAt(r);if(!(!n.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},r.prototype._getDecimalSeparatorPos=function(){var e=this._stringFormat._strippedText;return e.indexOf(this.getDecimalSeparator())},r.prototype._removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this.inputWidget.options.currencySymbol)&&t++;while(e.charAt(t)==="0"&&e.charAt(t+1)!==".")e=e.substr(0,t)+e.substr(t+1);return e},r.prototype.insertAt=function(e,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v=this._stringFormat._strippedText,m=this.inputWidget._getPrefix(),g=this.inputWidget._getInvertPrefix();r<m.length?r=m.length:r>m.length+v.length&&(r=m.length+v.length),r-=m.length,i||(i=new t.wijInputResult),this.setNullValue(!1);if(e.length===1){if(e==="+"){var y=this._stringFormat.isNegative();this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1);var b=y!==this._stringFormat.isNegative();return b?i.testPosition=g.length+r-1:i.testPosition=m.length+r-1,!0}if(e==="-"||e===")"||e==="("){var w=this._stringFormat.isNegative();return this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1),this._stringFormat.isNegative()===w?(i.testPosition=m.length+r-1,!0):(i.testPosition=g.length+r-1,!0)}if(!n.wij.charValidator.isDigit(e)){if(e===this.getDecimalSeparator()){o=this._getDecimalSeparatorPos()+m.length;if(o>=0)return i.testPosition=o,!0}if(e!==this.getGroupSeparator()&&e!==this.getDecimalSeparator()&&e!==")"&&e!=="+"&&e!=="-"&&e!=="("&&e!==this.getDecimalSeparator())return this._type==="percent"&&e===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&e===this.inputWidget.options.currencySymbol?(i.testPosition=r,!0):!1}}r=this._getAdjustedPositionFromLeft(r),u=r,u>v.length&&(u=v.length-1),a=this._removeLeadingZero(v.substring(0,u)),f=v.substring(u,v.length),this._stringFormat.isZero()&&(f=f.replace(/0/,""));var E=e,S="";while(E.charAt(0)==="+"||E.charAt(0)==="-"||E.charAt(0)===")"||E.charAt(0)==="(")S=E.charAt(0),E=E.substring(1);E=E.replace(/[^0-9\.]/gi,"");var x=E.indexOf(".");if(x!==-1){var T=E.split("."),N,C;N=T.shift();var k=T;C=k.join(""),E=N+"."+C}else E=E;S==="+"&&(this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1));if(S==="-"||S===")"||S==="(")this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1);i.testPosition=m.length+a.length+E.length-1,this._stringFormat.deFormatValue((this._stringFormat.isNegative()?"-":"")+a+E+f),l=this._stringFormat._strippedText;try{this.inputWidget.options.showGroup?(c=this._countSubstring(a,this._stringFormat._groupSeparator),h=this._countSubstring(l.substring(0,a.length+E.length),this._stringFormat._groupSeparator),i.testPosition+=h-c):E.length===1&&(p=a.charAt(a.length-1),d=l.charAt(a.length-1),d!==p&&i.testPosition--)}catch(L){}return!0},r.prototype.removeAt=function(e,n,r,i){typeof r=="undefined"&&(r=new t.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=e;try{o=this._stringFormat._currentText;if(e===n&&o.substring(e,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,e),a=u,f=o.slice(e,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a),a=this._stringFormat._currentText,this.setNullValue(!1);if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this._countSubstring(u,this._stringFormat._groupSeparator),c=this._countSubstring(a.substring(0,Math.max(0,e-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(this.inputWidget.options.currencySymbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},r.prototype.replaceWith=function(t,n){var r=!1;this._stringFormat.isNegative()&&n==="-"&&t.text.length===this._stringFormat._currentText.length&&(r=!0);var i=e.prototype.replaceWith.call(this,t,n);return r&&this.insertAt("-",this.inputWidget.element.wijtextselection().start,i),i},r.prototype.spinEnumPart=function(e,n,r,i){n||(n=new t.wijInputResult),r=parseInt(r.toString());var s=this.inputWidget._getPrefix(),o=this._stringFormat._currentText.indexOf(this._getCulture().numberFormat["."]),u=this._stringFormat._currentValueInString.replace("-",""),a=u.indexOf("."),f=!0;o===-1&&(f=!1,o=this._stringFormat._currentText.length),a===0?a=1:a===-1&&(a=o);var l=Math.pow(10,this.inputWidget.options.decimalPlaces);if(n.testPosition>o&&f){var c=r;r/=l,Math.abs(r)>=1&&(i?this._stringFormat.spinUp(parseInt(r),this._nullvalue):this._stringFormat.spinDown(parseInt(r),this._nullvalue),r=(c-parseInt(r)*l)/l)}i?this._stringFormat.spinUp(r,this._nullvalue):this._stringFormat.spinDown(r,this._nullvalue),this.setNullValue(!1);var h=this.inputWidget.options.allowSpinLoop;this.checkAndRepairBounds(!0,!1,h);var p=this._stringFormat._currentValueInString.replace("-",""),d=p.indexOf(".");d===-1&&(f=!1,d=p.length);var v=this.inputWidget._getPrefix();d!==a&&f?n.testPosition=n.testPosition-s.length+v.length+d-a:n.testPosition=n.testPosition-s.length+v.length},r.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},r.prototype.setValue=function(e){try{return e===null?(this.setNullValue(!0),e=this.inputWidget._initialValue):this.setNullValue(!1),this._stringFormat.setValueFromJSFloat(e),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},r.prototype.setNullValue=function(e){this._nullvalue=e},r}(t.wijTextProvider);t.wijNumberTextProvider=o;var u=function(){function e(e){this.inputWidget=e,this._currentValueInString="0",this._currentText="0",this._strippedText="0",this._groupSeparator=" "}return e.prototype._isNegtive=function(e){return e.indexOf("-")!==-1||e.indexOf("(")!==-1},e.prototype._stripValue=function(e){var t=this.inputWidget._getCulture().numberFormat,n=t[this.inputWidget.options.type]||t,r=this._isNegtive(e),i=n[","],s=n["."],o=new RegExp("["+i+t.percent.symbol+this.inputWidget.options.currencySymbol+" ]","g"),u;return this._groupSeparator=i,e=this._removeNegativeSign(e),e=e.replace(o,""),e=e.replace(s,"."),u=/([\d\.])+/.exec(e),u&&(e=u[0]),r&&(e="-"+e),e},e.prototype.tryParseValue=function(e){try{var t=parseFloat(this._stripValue(e));return isNaN(t)&&(t=null),t}catch(n){return null}},e.prototype.deFormatValue=function(e){e=this._stripValue(e),this._currentValueInString=e,this._currentText=this._formatValue(e)},e.prototype._formatValue=function(e){var t=this.inputWidget.options,n=this.inputWidget._getCulture().numberFormat,r=n[t.type]||n,i=t.decimalPlaces,s=r[","],o=r["."],u=i!==-2?i:r.decimals,a=t.showGroup?r.groupSizes:[0],f;return e=this._removeLeadingZero(e),f=this._formatDigit(e,s,o,u,a),f=this._removeLeadingZero(f,t.showGroup?s:""),f.indexOf(o)===0&&(f="0"+f),f===""&&(f="0"),this._currentValueInString=e,this._strippedText=f,this._currentText=this._getPrefix()+f+this._getSuffix(),this._currentText},e.prototype._getPrefix=function(){return this.isNegative()?this.inputWidget._userNegativePrefix!==undefined?this.inputWidget._userNegativePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.negativePrefix===null?"":this.inputWidget.options.negativePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget._userPositivePrefix!==undefined?this.inputWidget._userPositivePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.positivePrefix===null?"":this.inputWidget.options.positivePrefix.replace(/\$/g,this.inputWidget.options.currencySymbol)},e.prototype._getSuffix=function(){return this.isNegative()?this.inputWidget._userNegativeSuffix!==undefined?this.inputWidget._userNegativeSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.negativeSuffix===null?"":this.inputWidget.options.negativeSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget._userPositiveSuffix!==undefined?this.inputWidget._userPositiveSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol):this.inputWidget.options.positiveSuffix===null?"":this.inputWidget.options.positiveSuffix.replace(/\$/g,this.inputWidget.options.currencySymbol)},e.prototype.getFormattedValue=function(){return!this.inputWidget._showNullText()&&this.inputWidget.isValueNull()&&(this._currentValueInString=this.inputWidget._initialValue+""),this._formatValue(this._currentValueInString)},e.prototype.getJSFloatValue=function(){try{return this._currentValueInString===""||this._currentValueInString==="."?0:parseFloat(this._currentValueInString)}catch(e){return Number.NaN}},e.prototype.clear=function(){this._currentValueInString="0",this._currentText="0",this._strippedText="0"},e.prototype.setValueFromJSFloat=function(e){var t=e.toFixed(this.inputWidget.options.decimalPlaces+1);try{return this._currentValueInString=t,this._formatValue(t),!0}catch(n){return!1}},e.prototype.isZero=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=this._removeNegativeSign(e),n;return t?(n=parseFloat(t),!isNaN(n)&&!n):!0},e.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},e.prototype._removeNegativeSign=function(e){return e.replace(/[()\-]/g,"")},e.prototype._removeLeadingZero=function(e,t){typeof t=="undefined"&&(t="");var e=e.replace(/^0+/,"");while(t.length>0&&e.indexOf(t)===0){e=e.substr(t.length);var e=e.replace(/^0+/,"")}return e},e.prototype.isNegative=function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},e.prototype.invertSign=function(){var e=this.isNegative();e?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=e?"0":"-0"),this._formatValue(this._currentValueInString)},e.prototype._parseNumber=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=e.split(".",2),n={integer:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0,isNegative:t[0].indexOf("-")!==-1};return n.integer===0&&n.fraction===0&&(n.isNegative=!1),n},e.prototype._doSpin=function(e,t){var n=this._parseNumber(),r=e>=0?1:-1,i=Math.abs(e)>=1?"integer":"decimal",s=this.inputWidget.options.increment;s>=Math.pow(10,this.inputWidget.options.decimalPlaces)&&(i==="integer"?s=Math.abs(e):s=Math.abs(e)*Math.pow(10,this.inputWidget.options.decimalPlaces));var o=r*s,u="",a,f,l=n.integer,c=n.fraction;if(i==="integer")l=n.integer+o,l<0&&(u="-",l=-l);else if(i==="decimal"){var h=n.isNegative?-n.fraction:n.fraction;l=n.integer,h<0?(c=-Math.abs(h+o),h*(h+o)<0&&(l=Math.abs(l),u="-")):c=h+o,h===0&&n.isNegative&&(c=-Math.abs(c),u="-",r===1&&(l=Math.abs(l))),c<=0&&(l>0?(l-=1,c=Math.pow(10,this.inputWidget.options.decimalPlaces)+c):(l=Math.abs(n.integer),c=Math.abs(c),u="-"))}a=l.toString(),f=c.toString(),parseInt(this.inputWidget.options.decimalPlaces)>0&&f.length>parseInt(this.inputWidget.options.decimalPlaces)&&(l++,f=f.substring(1),a=l.toString());while(f.length<this.inputWidget.options.decimalPlaces)f="0"+f;a.indexOf("-")!==-1&&(u=""),parseInt(a)===0&&parseInt(f)===0&&(u=""),t?e>=0?this._currentValueInString=this.inputWidget.options.minValue.toString():this._currentValueInString=this.inputWidget.options.maxValue.toString():this._currentValueInString=u+a+"."+f},e.prototype.spinUp=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(e,t)},e.prototype.spinDown=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(-e,t)},e.prototype.checkDigitsLimits=function(e){var t=this._currentValueInString.split("."),n="";if(!t.length||t.length===1&&t[0]==="")return;t.length>1&&(n=t[1]),n=n.substring(0,e);while(n.length<e)n+="0";this._currentValueInString=t[0],n&&(this._currentValueInString+="."+n)},e.prototype.checkMinValue=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=!0,i,s,o,u,a;try{i=this._currentValueInString.split("."),s=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),o=0,i.length>1&&parseFloat(i[1])>=0&&(o=parseFloat("1."+i[1]));if(s<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")o*=-1;e=""+e.toFixed(12)+"",i=e.split("."),u=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),a=0,i.length>1&&parseFloat(i[1])>=0&&(a=parseFloat("1."+i[1]));if(u<0||i[0]==="-"||i[0].length>0&&i[0][0]==="-")a*=-1;if(s>u)return!0;s<u||n&&s===u&&o<=a?r=!1:s===u&&s<0&&o<a?r=!1:s===u&&s>=0&&o<a&&(r=!1),!r&&t&&(this._currentValueInString=""+e+"")}catch(f){}return r},e.prototype.checkMaxValue=function(e,t){var n=!0,r,i,s,o,u;try{r=this._currentValueInString.split("."),i=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),s=0,r.length>1&&parseFloat(r[1])>=0&&(s=parseFloat("1."+r[1]));if(i<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")s*=-1;e=""+e.toFixed(12)+"",r=e.split("."),o=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),u=0,r.length>1&&parseFloat(r[1])>=0&&(u=parseFloat("1."+r[1]));if(o<0||r[0]==="-"||r[0].length>0&&r[0][0]==="-")u*=-1;if(i<o)return!0;i>o&&(n=!1),i===o&&i>=0&&s>u&&(n=!1),i===o&&i<0&&s>u&&(n=!1),!n&&t&&(this._currentValueInString=""+e+"")}catch(a){}return n},e.prototype._formatDigit=function(e,t,n,r,i){var s=this._removeNegativeSign(e),o,u,a,f,l,c;o=s.indexOf("."),o===-1&&(o=s.length),u="",a=0,f=0;for(c=s.length-1;c>=0;c--)l=s.charAt(c),c<o&&(u=l+u,f++,f===i[a]*1&&i[a]*1&&c&&(u=t+u,f=0,i.length-1>a&&a++));if(r>0){u+=n;for(c=0;c<r;c++)l="0",c+o+1<s.length&&(l=s.charAt(c+o+1)),u+=l}return r===-1&&o<s.length-1&&(u+=n,u+=s.substr(o+1)),u},e}();t.wijNumberFormat=u})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),define("wijmo.wijinputnumber",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijinputtext",i;(function(e){e._map=[],e._map[0]="None",e.None=0,e._map[1]="EllipsisEnd",e.EllipsisEnd=1,e._map[2]="EllipsisPath",e.EllipsisPath=2})(i||(i={}));var s;(function(e){e._map=[],e._map[0]="Append",e.Append=0,e._map[1]="Replace",e.Replace=1})(s||(s={}));var o=function(){function e(){}return e.Auto="auto",e.Active="active",e.Disabled="disabled",e.Inactive="inactive",e}(),u=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype._getIMTextBox=function(){return this.imtextbox===undefined&&(this.imtextbox=new l(this.element[0],this.outerDiv)),this.imtextbox},r.prototype._create=function(){n.prototype._create.call(this);var e=this;e.imtextbox=e._getIMTextBox()},r.prototype._init=function(){n.prototype._init.call(this),this.options.disableUserInput&&this.imtextbox.SetReadOnly(!0),this.imtextbox.placeHolder=this.options.nullText?this.options.nullText:"";var e=this;this.imtextbox.readingImeStringOutputEvent=function(t,n){e._trigger("readingImeStringOutput",null,n)},this.imtextbox.InvalidInputEvent=function(t,n){e._fireIvalidInputEvent(n)},this.imtextbox.SetAutoConvert(this.options.autoConvert),this.imtextbox.SetExitOnLastChar(this.options.blurOnLastChar),this.imtextbox.SetExitOnLeftRightKey(this.options.blurOnLeftRightKey),this.imtextbox.SetFormat(this.options.format),this.imtextbox.SetLengthAsByte(this.options.lengthAsByte),this.imtextbox.SetMaxLength(this.options.maxLength),this.imtextbox.SetMaxLineCount(this.options.maxLineCount),this.imtextbox.SetCountWrappedLine(this.options.countWrappedLine),this.options.text===null&&(this.options.text=this.getText()),this.setText(this.options.text),this.options.invalidInput!==null&&this.imtextbox.OnInvalidInput(this.options.invalidInput),this.imtextbox.TextChangedEvent=function(t,n){e.options.text=n,e._trigger("textChanged",null,n)};var t=this.element,r=this.options.wijCSS,i={input:!0,textarea:!0},s={text:!0,password:!0,email:!0,url:!0},o=t.get(0).nodeName.toLowerCase();if(!i.hasOwnProperty(o))return;if(o==="input"&&this.element.attr("type")&&!s.hasOwnProperty(this.element.attr("type").toLowerCase()))return;if(o==="input"){this.imtextbox.SetMultiLine(!1);if(this.element.attr("type")==="password"){var u;this.options.passwordChar?u=this.options.passwordChar:u=this.imtextbox.SystemPasswordChar(),this.imtextbox.SetPasswordChar(u)}}else o==="textarea"&&this.imtextbox.SetMultiLine(!0);t.is(":disabled")?(this._setOption("disabled",!0),t.addClass(r.stateDisabled)):(this._setOption("disabled",!1),t.removeClass(r.stateDisabled)),this.options.passwordChar&&this.imtextbox.SetPasswordChar(this.options.passwordChar)},r.prototype.destroy=function(){var e=this,t=e.options.wijCSS;e.element.removeClass(t.widget).removeClass(t.stateDefault).removeClass(t.cornerAll).removeClass(t.stateHover).removeClass(t.stateActive).off("."+e.widgetName),e.element.off(".imtextbox"),n.prototype.destroy.call(this)},r.prototype._setOption=function(e,t){switch(e){case"nullText":case"placeholder":this.imtextbox.placeHolder=t}n.prototype._setOption.call(this,e,t);switch(e){case"autoConvert":this.imtextbox.SetAutoConvert(t);break;case"blurOnLastChar":this.imtextbox.SetExitOnLastChar(t);break;case"blurOnLeftRightKey":this.imtextbox.SetExitOnLeftRightKey(t);break;case"format":this.imtextbox.SetFormat(t);break;case"maxLineCount":this.imtextbox.SetMaxLineCount(t);break;case"countWrappedLine":this.imtextbox.SetCountWrappedLine(t);break;case"lengthAsByte":this.imtextbox.SetLengthAsByte(t);break;case"maxLength":this.imtextbox.SetMaxLength(t);break;case"readonly":case"disableUserInput":this.imtextbox.SetReadOnly(t);break;case"passwordChar":this.imtextbox.SetPasswordChar(t);break;case"text":this.setText(t);break;case"invalidInput":this.imtextbox.OnInvalidInput(t);break;case"":}},r.prototype._raiseTextChanged=function(){},r.prototype._updateTextOnLostFocus=function(){if(this.imtextbox.PasswordMode)return;n.prototype._updateTextOnLostFocus.call(this)},r.prototype._onMouseUp=function(e){},r.prototype._onCompositionStart=function(){},r.prototype._onCompositionEnd=function(){},r.prototype._onChange=function(){},r.prototype._onPaste=function(e){},r.prototype._onDrop=function(e){},r.prototype._onKeyDown=function(t){var n=this._getKeyCode(t),r=e.getKeyCodeEnum();if(this.options.disableUserInput){n===r.TAB?this._processTabKey(t)&&this._stopEvent(t):this._stopEvent(t);return}if(this._processKeyForDropDownList(t))return;n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyPress=function(t){if(this.options.disableUserInput)return;var n=this._getKeyCode(t),r=e.getKeyCodeEnum();n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyUp=function(e){if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}},r.prototype._createTextProvider=function(){this._textProvider=new f(this)},r.prototype.selectText=function(e,n){typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=this.getText().length),isNaN(e)&&(e=0),isNaN(n)&&(n=0);if(this.element.is(":disabled"))return;t.Utility.IsFireFox4OrLater()&&this.focus(),this.imtextbox.SetSelection(e,n)},r.prototype._updateText=function(){this.element.data("initialized")&&n.prototype._updateText.call(this)},r}(t.wijinputcore);t.wijinputtext=u;var a=function(){function e(){this.initSelector=":jqmData(role='wijinput')",this.wijCSS={},this.autoConvert=!0,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.format="",this.imeMode="auto",this.lengthAsByte=!1,this.maxLength=0,this.maxLineCount=0,this.countWrappedLine=!1,this.passwordChar="",this.text=null}return e}();u.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new a),n.wijmo.registerWidget(r,u.prototype);var f=function(e){function t(t){e.call(this),this.inputWidget=t}return __extends(t,e),t.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?(this.inputWidget.element.data("isShowNullText",!0),this.inputWidget.options.nullText):(!this.inputWidget._showNullText()||this.inputWidget.isFocused())&&this.inputWidget.element.data("isShowNullText")?(this.inputWidget.element.data("isShowNullText",!1),""):this.inputWidget.imtextbox&&this.inputWidget.imtextbox.GetPasswordChar()?this.inputWidget.imtextbox.GetText():this.inputWidget.imtextbox?this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.options.text!==undefined?this.inputWidget.options.text:this.inputWidget.element.val()},t.prototype.isValueNull=function(){return this.inputWidget.imtextbox?this.inputWidget.imtextbox.isNullText:!0},t.prototype.setText=function(e){this.inputWidget.imtextbox.SetText(e)},t}(t.wijTextProvider);t.wijInputTextProvider=f;var l=function(){function e(e,n){this.placeHolder="",this.Focused=!1,this.InputElement=e,this._container=n,this.InputElement.id===""&&(this.InputElement.id="wijmo_input_"+t.Utility.IdCounter++),this.ScrollBarMode=t.ScrollBarMode.Fixed,this.IsControlInPreview=null,this.AddressObj=null,this.KeyActionList=null,this.UseSystemPasswordChar=!1,this.Overwrite=!1,this.Format="",this.ShowHistory=!1,this.ReadOnly=!1,this.AutoConvert=!0,this.CausesValidation=!1,this.ValidationGroup="",this.LengthAsByte=!1,this.MaxLength=0,this.MaxHistoryCount=10,this.MultiLine=!1,this.AcceptsCrLf=t.CrLfMode.NoControl,this.AcceptReturn=!0,this.AcceptTab=!1,this.HighlightText=!1,this.Ellipsis=i.None,this.EllipsisString=String.fromCharCode(8230),this.ExitOnLastChar=!1,t.Utility.IPad?this.TouchDropDownScale=1:this.TouchDropDownScale=1.5,this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.None,this.EditMode=t.EditMode.Insert,this.__editModeInternal=t.EditMode.Insert,this.AutoPostBack=!1,this.PasswordMode=!1,this.PasswordChar="",this.OverflowTip=!1,this.MaxLineCount=0,this.CountWrappedLine=!1,this.IsInUpdatePanelAndAsyncPostBack=!1,this.UseClipboard=!0,this.ReadingImeStringOutput=new Object,this.ReadingImeStringOutput.OutputMode=s.Append,this.ReadingImeStringOutput.TargetControl=null,this.ScrollBars=t.ScrollBars.None,this.prevval="",this.RubyText="",this.FocusType=t.FocusType.None,this.SelectionStart=0,this.SelectionEnd=0,this.SelectionLength=0,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd;var r=this,u=r!=null;this.IsInUpdatePanelAndAsyncPostBack?u&&(this.OldText=r.GetOldValue()):this.OldText=this.Text,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,this.Text="",this.LastText=this.Text,this.BuffText="",this.IsUndoAfterDel=!1,this.MouseButton=t.MouseButton.Left,this.EnableOnSelectStartEvent=!0,this.isLeftMouseButtonPressed=!1,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.DragEdit=!1,this.DropEdit=!1,this.isFuncKeyPressed=!1,this.SystemChange=!0,this.ImeMode=!1,this.KeyDownAction=!1,this.FocusExit=!1,this.lastValue="",this.truePosition=-1,this.mouseupTimes=0,this.LastInputText="",this.BeforeDragSelectionStart=0,this.BeforeDragSelectionEnd=0,this.IsMouseDown=!1,this.Type="Edit",this.ToolTip=null;if(!this.MultiLine&&this.OverflowTip){var a=this;t.Utility.AttachEvent(document,"mousemove",function(e){t.GlobalEventHandler.OnMouseMove(a,e)},!1)}this.HasFocus=!1;var f={SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd,Text:this.Text,OldSelectionStart:this.OldSelectionStart,OldSelectionEnd:this.OldSelectionEnd,OldText:this.OldText,LastStart:this.LastStart,LastEnd:this.LastEnd,LastText:this.LastText,BuffText:this.BuffText};this.DropDownEditData=f,this.IsChangedByDropDownEdit=!1,this.DropText="",this.isTextEllipsis=!1,this.TextHeadLength=0,this.IsJapanConvertKeyPress=!1,this.NeedReCalCursorPos=!0,t.Utility.IsIE()||(this.IsActive=!1),this.HasValidatedImeInput=!0,this.IsFocusToDropDownEdit=!1,this.IsCausedByClickingDropDownBt=!1,this.IsCausedByImplementingDrop=!1,t.Utility.IsIE()||(this.MaxLineCount=0,this.Ellipsis=i.None,this.OverflowTip=!1,this.IsImplementImeInput=!1),this.Create(),this.AddAllEventsHandler(),this.EditStatusChangedEvent=null,this.InvalidInputEvent=null,this.KeyExitEvent=null,this.TextChangedEvent=null,this.DropDownCloseEvent=null,this.DropDownOpenEvent=null,this.readingImeStringOutputEvent=null,this.IsjQueryControl=!0,this.UIProcess=new c(this.AutoConvert,this.Format,this.PasswordMode,this.PasswordChar,this.IsjQueryControl,this),this.Text="",this.isPasting=!1,this.WordWrap=!0,this.Enabled=!0,this.AutoCompleteType="None",this.InputElement.style.imeMode===""&&this.SetImeMode(o.Auto),this._autoComplete=new h(this),this.IsFromServer=!1,this._historyList=[],this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled,this._lines=[],this.tempIMEMode="auto",this.HeightChangedBySet=!1,this.Width="",this.Height="",this.LastPassWordChar="",t.Utility.AttachFocusEventOfDocument(),this.ShouldShowClearButton=!0,this.switchPasswordChar=!1,this.InputElement.value===""?this.isNullText=!0:this.isNullText=!1}return e.prototype.GetId=function(){return this.InputElement.id},e.prototype.GetContainer=function(){return this._container},e.prototype.GetJQueryInputElement=function(){return n(this.InputElement)},e.prototype.GetInputElement=function(){return this.InputElement},e.prototype.Create=function(){t.Utility.IsIE10OrLater()&&this.CreateHideMSClearButtonForIE10Class()},e.prototype.CreateHideMSClearButtonForIE10Class=function(){if(e.HideMSClearButtonForIE10ClassName===undefined){e.HideMSClearButtonForIE10ClassName="gcsh_HideMSClearButtonForIE10";var n=t.Utility.CreateClassStyle(e.HideMSClearButtonForIE10ClassName+"::-ms-clear");n.style.display="none"}},e.prototype.IsNullFormat=function(){return!1},e.prototype.IsNeedFishEyeButton=function(){return t.Utility.IsIE10OrLater()&&!this.MultiLine&&this.PasswordMode},e.prototype.SetAddressObj=function(e){this.AddressObj=e},e.prototype.ShowClearButton=function(){this.InputElement.className=this.InputElement.className.replace(e.HideMSClearButtonForIE10ClassName,"")},e.prototype.HideClearButton=function(){this.InputElement.className!=null&&this.InputElement.className.indexOf(e.HideMSClearButtonForIE10ClassName)==-1&&(this.InputElement.className+=" "+e.HideMSClearButtonForIE10ClassName)},e.prototype.HandleClearButton=function(e){if(t.Utility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&e.target==this.InputElement&&!this.MultiLine){var n=document.activeElement==e.target,r=t.Utility.IsMouseDownOnClearButton(e);if(this.MouseUpHasValue&&n&&r&&!this.PasswordMode){var i=this;setTimeout(function(e){i.Clear()},0)}}},e.prototype.GetAcceptsTab=function(){return this.AcceptTab},e.prototype.SetAcceptsTab=function(e){e=t.Utility.CheckBool(e),this.AcceptTab=e},e.prototype.GetAcceptsCrlf=function(){return this.AcceptsCrLf},e.prototype.SetAcceptsCrlf=function(e){e=t.Utility.CheckEnum(t.CrLfMode,e),this.AcceptsCrLf=e},e.prototype.GetAutoConvert=function(){return this.AutoConvert},e.prototype.SetAutoConvert=function(e){e=t.Utility.CheckBool(e),this.AutoConvert=e,this.UIProcess.Reset()},e.prototype.GetCountWrappedLine=function(){return this.CountWrappedLine},e.prototype.SetCountWrappedLine=function(e){e=t.Utility.CheckBool(e),this.CountWrappedLine=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEditMode=function(){return this.EditMode},e.prototype.SetEditMode=function(e){var n=e;n=t.Utility.CheckEnum(t.EditMode,n),n===t.EditMode.Insert||n===t.EditMode.FixedInsert?this.Overwrite=!1:this.Overwrite=!0;if(n!==this.EditMode){var r=!1;this._isinsertGroup(n)&&this._isOverwriteGroup(this.EditMode)?r=!0:this._isinsertGroup(this.EditMode)&&this._isOverwriteGroup(n)&&(r=!0),this.EditMode=n,this.__editModeInternal=n,r&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},e.prototype._getEditModeInternal=function(){return this.__editModeInternal},e.prototype._setEditModeInternal=function(e){e=t.Utility.CheckEnum(t.EditMode,e),e===t.EditMode.Insert||e===t.EditMode.FixedInsert?this.Overwrite=!1:this.Overwrite=!0,e!==this.__editModeInternal&&(this.__editModeInternal=e)},e.prototype.GetEllipsis=function(){return this.Ellipsis},e.prototype.SetEllipsis=function(e){var n=e;n=t.Utility.CheckEnum(i,n),this.Ellipsis=n,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEllipsisString=function(){return this.EllipsisString},e.prototype.SetEllipsisString=function(e){e=t.Utility.CheckString(e),this.EllipsisString=e,this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetExitOnLastChar=function(){return this.ExitOnLastChar},e.prototype.SetExitOnLastChar=function(e){e=t.Utility.CheckBool(e),this.ExitOnLastChar=e},e.prototype.GetExitOnLeftRightKey=function(){switch(this.ExitOnLeftRightKey){case t.ExitOnLeftRightKey.None:return"none";case t.ExitOnLeftRightKey.Both:return"both";case t.ExitOnLeftRightKey.Left:return"left";case t.ExitOnLeftRightKey.Right:return"right";default:}},e.prototype.SetExitOnLeftRightKey=function(e){t.Utility.CheckString(e);switch(e.toLowerCase()){case"none":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.None;break;case"both":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Both;break;case"left":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Left;break;case"right":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Right;break;default:}},e.prototype.GetFormat=function(){return this.Format},e.prototype.SetFormat=function(e){e=t.Utility.CheckString(e),this.Format=e,this.UIProcess.Reset();var n=this.InternalSetText(this.GetText());this.Text=n,this.DropDownEditData.Text=n,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetHighlightText=function(){return this.HighlightText},e.prototype.SetHighlightText=function(e){e=t.Utility.CheckBool(e),this.HighlightText=e},e.prototype.GetHistoryList=function(){return this._historyList},e.prototype.SetHistoryList=function(e){if(e===null)return;var t;arguments[0]instanceof Array?t=arguments[0]:t=Array.prototype.slice.call(arguments);if(t.length===0||t.length===1&&t[0]==="")return;this.IsFromServer=!1,this._historyList=[];for(var n=0;n<t.length;n++)this._historyList.push(t[n])},e.prototype.GetImeMode=function(){return this.InputElement!==null?this.InputElement.style.imeMode||"auto":""},e.prototype.SetImeMode=function(e){t.Utility.CheckString(e),this.InputElement!==null&&(this.InputElement.style.imeMode=e)},e.prototype.GetLengthAsByte=function(){return this.LengthAsByte},e.prototype.SetLengthAsByte=function(e){e=t.Utility.CheckBool(e),this.LengthAsByte=e,this.SetText(this.UIProcess.Filter.CheckText(this.GetText()).CheckedText)},e.prototype.GetLines=function(){var e=new Array,n=this.GetText(),r="\r\n";if(!t.Utility.IsIE()||t.Utility.IsIE9OrLater())r="\n";var i=n.IndexOf(r),s=0;while(i!=-1)e[s++]=n.Substring(0,i),n=n.Substring(i+r.GetLength(),n.GetLength()),i=n.IndexOf(r);return e[s]=n,e},e.prototype.SetLines=function(e){if(e===null)return;var n;arguments[0]instanceof Array?n=arguments[0]:n=Array.prototype.slice.call(arguments);if(n.length===0||n.length===1&&n[0]==="")return;this._lines=[];for(var r=0;r<n.length;r++)this._lines.push(n[r]);var i="";if(this.MultiLine)for(var s=0;s<this._lines.length;s++)s>0&&(t.Utility.IsIE()?i+="\r\n":i+="\n"),i+=this._lines[s];else for(var s=0;s<this._lines.length;s++)i+=this._lines[s];this.SetText(i)},e.prototype.GetMaxHistoryCount=function(){return this.MaxHistoryCount},e.prototype.SetMaxHistoryCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxHistoryCount=e},e.prototype.GetMaxLength=function(){return this.MaxLength},e.prototype.SetMaxLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLength=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetMaxLineCount=function(){return this.MaxLineCount},e.prototype.SetMaxLineCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLineCount=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetMultiLine=function(){return this.MultiLine},e.prototype.SetMultiLine=function(e){e=t.Utility.CheckBool(e);if(e===this.MultiLine)return;this.MultiLine=e,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetOverflowTip=function(){return this.OverflowTip},e.prototype.SetOverflowTip=function(e){e=t.Utility.CheckBool(e),this.OverflowTip=e;if(!this.MultiLine&&this.OverflowTip){var n=this;t.Utility.AttachEvent(document,"mousemove",function(e){t.GlobalEventHandler.OnMouseMove(n,e)},!1)}},e.prototype.GetOverwrite=function(){return this.Overwrite},e.prototype.GetPasswordChar=function(){return this.PasswordChar},e.prototype.SetPasswordChar=function(e){if(e!==""){e=t.Utility.CheckChar(e);if(this.PasswordChar===this.SystemPasswordChar()&&this.GetUseSystemPasswordChar()){this.LastPassWordChar=e;return}this.LastPassWordChar=this.PasswordChar,this.PasswordChar=e,this.PasswordMode=!0,this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled)}else{this.UseSystemPasswordChar===!1&&(this.PasswordMode=!1,this.SetText(this.hideText),this.tempIMEMode!==""&&this.SetImeMode(this.tempIMEMode));if(this.PasswordChar===this.SystemPasswordChar()&&!this.GetUseSystemPasswordChar()&&this.LastPassWordChar!==""){this.PasswordChar=t.Utility.CheckChar(this.LastPassWordChar),this.PasswordMode=!0,this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);return}this.PasswordChar=e}this.switchPasswordChar=!0,this.UIProcess.Reset(),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetReadingImeStringOutputMode=function(){return this.ReadingImeStringOutput.OutputMode},e.prototype.SetReadingImeStringOutputMode=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.OutputMode=e},e.prototype.GetReadingImeStringOutputTargetControl=function(){return this.ReadingImeStringOutput.TargetControl},e.prototype.SetReadingImeStringOutputTargetControl=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.TargetControl=e},e.prototype.GetReadOnly=function(){return this.ReadOnly},e.prototype.SetReadOnly=function(e){e=t.Utility.CheckBool(e),this.InputElement!=null&&(this.InputElement.readOnly=e),this.ReadOnly=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&e:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&e},e.prototype.GetScrollBarMode=function(){return this.ScrollBarMode},e.prototype.SetScrollBarMode=function(e){e=t.Utility.CheckEnum(t.ScrollBarMode,e),this.ScrollBarMode=e,this._CheckScrollBar(this.GetScrollBars(),e)},e.prototype.GetScrollBars=function(){return this.ScrollBars},e.prototype.SetScrollBars=function(e){e=t.Utility.CheckEnum(t.ScrollBars,e),this.ScrollBars=e,this._CheckScrollBar(e,this.GetScrollBarMode());var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10)},e.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},e.prototype.SetSelectionStart=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";if(e==null)return;var n=e.toString(),r=parseInt(n);if(t.Utility.FilterText("0123456789",n)==n)if(r>this.GetText().GetLength())this.SelectionStart=this.GetText().GetLength(),this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.DropDownEditData.Text.GetLength(),this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength());else{var i=this.GetSelectionLength();this.SelectionStart=r,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,r)),r-0+i<=this.GetText().GetLength()?(this.SelectionEnd=r-0+i,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,r+i))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetSelectedText=function(){return this.GetText().Substring(Math.min(this.SelectionStart,this.SelectionEnd),Math.max(this.SelectionStart,this.SelectionEnd))},e.prototype.SetSelectedText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText();var n=this.SelectionStart,r=this.SelectionEnd,s=this.GetText();this.MultiLine||(this.DropDownEditData.OldText=this.DropDownEditData.Text,n=this.DropDownEditData.SelectionStart,r=this.DropDownEditData.SelectionEnd,s=this.DropDownEditData.Text);var o=this.UIProcess.TextBoxPaste(n,r,s,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!0);o==null,o.Text!=null&&(this.DirectSetText(o.Text),this.MultiLine||(this.DropDownEditData.Text=o.Text)),o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=o.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionStart))),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=o.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionEnd)));var u=this.OldText;this.OldText=this.GetText(),this.LastText=this.OldText,this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},e.prototype.SetSelectionLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";e==null,e=e.toString();if(t.Utility.FilterText("0123456789",e)==e){var n=this.GetSelectionStart();this.SelectionStart=n,n+(e-0)<=this.GetText().GetLength()?(this.SelectionEnd=n+(e-0),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,n+parseInt(e)))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetShowHistory=function(){return this.ShowHistory},e.prototype.SetShowHistory=function(e){e=t.Utility.CheckBool(e),this.ShowHistory=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled},e.prototype.GetText=function(){var e=this._getInputValueWithPlaceHolder();this.isTextEllipsis&&!this.DragEdit&&(e=this.Text);if(this.PasswordMode){var n=this.hideText,r=n.LastIndexOf(":true"),i;return r==-1?i=n:i=n.Substring(0,r),i}return!t.Utility.IsIE()&&this.FFDragFlag&&(e=this.Text),e},e.prototype.SetText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText(),this.switchPasswordChar=!1,this.InternalSetText(e,!1),this.GetText()!=this.OldText&&(this.OldText=this.GetText(),this.SetHideText(this.GetText())),this.LastText=this.GetText();var n=this.GetText().GetLength();this.SelectionStart=n,this.SelectionEnd=n,this.BuffText=this.LastText,this.DropDownEditData.Text=this.GetText(),this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=n,this.DropDownEditData.SelectionEnd=n,this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetTouchDropDownScale=function(){return this.TouchDropDownScale},e.prototype.SetTouchDropDownScale=function(e){e=t.Utility.CheckFloat(e,.25,4),this.TouchDropDownScale=e},e.prototype.GetUseClipboard=function(){return this.UseClipboard},e.prototype.SetUseClipboard=function(e){e=t.Utility.CheckBool(e),this.UseClipboard=e},e.prototype.GetUseSystemPasswordChar=function(){return this.UseSystemPasswordChar},e.prototype.SetUseSystemPasswordChar=function(e){e=t.Utility.CheckBool(e),this.UseSystemPasswordChar=e,e===!0?(this.PasswordMode=!0,this.SetPasswordChar(this.SystemPasswordChar())):this.SetPasswordChar(""),this.UIProcess.Reset()},e.prototype.GetWordWrap=function(){return this.WordWrap},e.prototype.SetWordWrap=function(e){e=t.Utility.CheckBool(e),this.WordWrap=e,e===!1?this.InputElement.style.wordWrap="normal":this.InputElement.style.wordWrap="break-word";var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10),this._CheckScrollBar(this.GetScrollBars(),this.GetScrollBarMode())},e.prototype.Drop=function(){},e.prototype.Clear=function(){this.SetText("")},e.prototype.SetFocus=function(){},e.prototype.OnDropDownClose=function(e){e=t.Utility.CheckFunction(e),this.DropDownCloseEvent=e},e.prototype.OnDropDownOpen=function(e){e=t.Utility.CheckFunction(e),this.DropDownOpenEvent=e},e.prototype.OnEditStatusChanged=function(e){e=t.Utility.CheckFunction(e),this.EditStatusChangedEvent=e},e.prototype.OnInvalidInput=function(e){e=t.Utility.CheckFunction(e),this.InvalidInputEvent=e,this.UIProcess.InvalidInputEvent=e},e.prototype.OnKeyExit=function(e){e=t.Utility.CheckFunction(e),this.KeyExitEvent=e},e.prototype.OnTextChanged=function(e){e=t.Utility.CheckFunction(e),this.TextChangedEvent=e},e.prototype.Undo=function(){var e=this.GetText(),t=this.BuffText,n=this.LastText,r=this.LastSelectionStart,i=this.LastSelectionEnd;this.MultiLine||(e=this.DropDownEditData.Text,t=this.DropDownEditData.BuffText,n=this.DropDownEditData.LastText,r=this.DropDownEditData.LastSelectionStart,i=this.DropDownEditData.LastSelectionEnd);var s=this.UIProcess.TextBoxUndo(e,t,n,r,i);if(s==null)return!1;s.Text!=null&&(s.DelInclude?(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)):(this.LastText=this.Text,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text)),this.InternalSetText(s.Text,!0)),s.SelectionStart!=null&&(this.LastSelectionStart=this.SelectionStart,this.SelectionStart=s.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(s.Text,s.SelectionStart))),s.SelectionEnd!=null&&(this.LastSelectionEnd=this.SelectionEnd,this.SelectionEnd=s.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(s.Text,s.SelectionEnd))),s.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Cut=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Cut(n,e,t);if(r==null)return!1;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.DelInclude&&(this.IsUndoAfterDel=!0,this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type)},e.prototype.Copy=function(){this.PasswordMode||this.UIProcess.Copy(this.GetText(),this.SelectionStart,this.SelectionEnd)},e.prototype.Delete=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Delete(this.MultiLine,n,e,t);if(r==null)return!1;r.DelInclude&&(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Paste=function(e){var t=this.SelectionStart,n=this.SelectionEnd,r=this.GetText();this.MultiLine||(t=this.DropDownEditData.SelectionStart,n=this.DropDownEditData.SelectionEnd,r=this.DropDownEditData.Text);var i=this.UIProcess.TextBoxPaste(t,n,r,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!1);if(i==null)return!1;i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(i.Text,i.SelectionStart))),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(i.Text,i.SelectionEnd))),i.Text!=null&&(this.DirectSetText(i.Text),this.MultiLine||(this.DropDownEditData.Text=i.Text)),i.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd);if(i.EventInfo!=null)for(var s=0;s<i.EventInfo.length;s++)i.EventInfo[s]!=null&&this.UIProcess.FireEvent(this,i.EventInfo[s].Name,i.EventInfo[s].Args,i.EventInfo[s].Type)},e.prototype.SelectAll=function(){var e=this.GetText();this.MultiLine||(e=this.DropDownEditData.Text);var t=this.UIProcess.TextBoxSelectAll(e);if(t==null)return!1;t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(e,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(e,t.SelectionEnd))),t.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype._CheckScrollBar=function(e,n){switch(e){case t.ScrollBars.Both:n==t.ScrollBarMode.Automatic?(this.InputElement.style.overflowX="auto",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll",this.InputElement.style.overflowY="scroll");break;case t.ScrollBars.None:this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="hidden";break;case t.ScrollBars.Vertical:n==t.ScrollBarMode.Automatic?(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="scroll");break;case t.ScrollBars.Horizontal:this.InputElement.style.overflowY="hidden",n==t.ScrollBarMode.Automatic?this.InputElement.style.overflowX="auto":this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll"}if(t.Utility.safari||t.Utility.chrome){var r=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-1+"px";var i=this;setTimeout(function(){i.InputElement.style.width=r},0)}t.Utility.IPad&&(this.InputElement.style.webkitOverflowScrolling="touch"),this.InternalSetText(this.GetText())},e.prototype.Select=function(){if(this._isInnerKeyPressCall){delete this._isInnerKeyPressCall;return}this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype._IMSetSelection=function(e,n,r,i){var s={start:n,end:r};if(n>r){var o=n;n=r,r=o}if(t.Utility.IsIE())try{var u=e.createTextRange();if(!i){var a=n;r=r,n=a,r=e.value.length-r,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}else{var f=e.value,l=0,c=0,h=0,p=f.lastIndexOf("\r\n");while(p!=-1)l++,p>=n&&c++,p>=r&&h++,f=f.substring(0,p),p=f.lastIndexOf("\r\n");c=l-c;var a=n;r=r,n=a-c,r=e.value.length-r-h,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}}catch(d){}else{var a=n;r=r,n=a;try{var v=parseInt(n),m=parseInt(r);(e.selectionStart!=v||e.selectionEnd!=m)&&e.setSelectionRange(v,m)}catch(d){}}var g=e.value.substring(0,v),y=t.Utility.MeasureText(g,e).Width,b=e.scrollHeight,w=e.clientWidth,E=e.currentStyle||window.getComputedStyle(e,null);w-=parseInt(E.paddingLeft)+parseInt(E.paddingRight);var S=e.clientHeight;return S-=parseInt(E.paddingTop)+parseInt(E.paddingBottom),t.Utility.IsIE10OrLater()&&(w-=S),e.scrollLeft>y?e.scrollLeft=y:y>e.scrollLeft+w&&(e.scrollLeft=y-w+parseInt(E.paddingLeft)),e.scrollTop>b?e.scrollTop=b:b>e.scrollTop+S&&(e.scrollTop=b-S+parseInt(E.paddingTop)),s},e.prototype.SetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):this._IMSetSelection(this.InputElement,e,t),this.SelectionStart=e,this.SelectionEnd=t},e.prototype.InternalSetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):(this._IMSetSelection(this.InputElement,e,t),this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,e),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t)),this.SelectionStart=e,this.SelectionEnd=t},e.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e,this.DropDownEditData.SelectionStart=e},e.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e,this.DropDownEditData.SelectionEnd=e},e.prototype.GetTrueSelection=function(e,t,n,r){var i=new Object;return i.SelectionStart=e,i.SelectionEnd=t,this.isTextEllipsis?(i.SelectionStart=this.GetTruePosition(e,n,r,this.TextHeadLength),e==t?i.SelectionEnd=i.SelectionStart:i.SelectionEnd=this.GetTruePosition(t,n,r,this.TextHeadLength),i):i},e.prototype.DropDownListValidate=function(e){var t=e,n=new Array;for(var r=0,i=0;r<t.length;r++){var s=t[r];if(this.UIProcess.ListValidateCheck(t[r])){this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(s,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);s==t[r]&&(n[i]=t[r],i++)}}return n},e.prototype.SystemPasswordChar=function(){var e=t.Utility.GetClientOS();switch(e.toLowerCase()){case"win2000":return"*";case"win2003":case"winxp":case"vista":case"win7":case"win8":return"●";default:return"*"}},e.prototype.InternalSetText=function(e,n,r){var i=this.UIProcess.FormatCheck(e,this.AcceptTab,this.AcceptReturn),s=i;this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(i,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);return r&&(t.Utility.firefox||t.Utility.chrome)?this.DirectSetText(s,!0):this.DirectSetText(s),!this.MultiLine&&n&&(this.DropDownEditData.Text=s),s},e.prototype.DirectSetText=function(e,n){this.SystemChange=!1;var r=e;this.PasswordMode&&(r=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),!this.MultiLine&&!t.Utility.IsIE()&&(r=r.replace(/\r\n/g,""),r=r.replace(/\n/g,""),r=r.replace(/\r/g,"")),this.Text!=e&&(this.Text=e,this.switchPasswordChar||(this.switchPasswordChar=!1),this.GetJQueryInputElement().data("preText",e)),n||this._setInputValueWithPlaceHolder(r),this.SetHideText(e)},e.prototype.InternalDirectSetText=function(e){var t=e;this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),this._setInputValueWithPlaceHolder(t)},e.prototype._setInputValueWithPlaceHolder=function(e){e===""?(this.isNullText=!0,this.Focused===!1&&(e=this.placeHolder)):this.isNullText=!1,this.InputElement.value=e},e.prototype._getInputValueWithPlaceHolder=function(){return this.isNullText?"":this.InputElement.value},e.prototype.SetHideText=function(e){this.hideText!==e&&this.TextChangedEvent!=""&&this.TextChangedEvent!=null&&this.UIProcess.FireEvent(this,this.TextChangedEvent,e,"textChanged"),this.hideText=e},e.prototype.GetSingleCurPosition=function(e,t){if(t<0)return-1;var n=t;t>=e.GetLength()&&(n=e.GetLength());var r=e.Substring(0,n);for(;;){var i=r.GetLength();r=r.replace(/\r/g,""),r=r.replace(/\n/g,"");if(i==r.GetLength())break}return r.GetLength()},e.prototype.GetSingleText=function(e){var t=e;for(;;){var n=t.GetLength();t=t.replace(/\r/g,""),t=t.replace(/\n/g,"");if(t.GetLength()==n)break}return t},e.prototype.GetMultiPosition=function(e,t){if(t<=0)return 0;if(t>=e.GetLength())return e.GetLength();var n=t;while(n<e.GetLength()){var r=e.Substring(0,n);r=this.GetSingleText(r);if(r.GetLength()==t)break;n+=1}return n},e.prototype.GetOldValue=function(){return this.OldText},e.prototype.GetValue=function(){return this.GetText()},e.prototype.SetInnerText=function(e){this.SetText(e)},e.prototype.GetDisPlayText=function(e){var t=e;return this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),t},e.prototype.Focus=function(){this.oldTextValue=this._getInputValueWithPlaceHolder();var e=this.oldTextValue;t.Utility.IsIE()||(this.IsActive=!0),this.HasFocus=!0;if(!this._autoComplete.GetIsFocusOnList()){this._autoComplete.HideDropdown();var n;this.AutoCompleteType!="None"?n=this.GetItem(this.AutoCompleteType):n=this.GetItem(this.GetId(),"focus");var r=n!=null?n.sort():null;t.Utility.LoadComplete==1&&this._autoComplete.SetDataList(r)}else this._autoComplete.SetIsFocusOnList(!1);var i=this.UIProcess.TextBoxFocus(this.FocusType,this.InputElement,this.GetText(),this.MultiLine,this.HighlightText,!1);t.Utility.CurrentActiveControlId=this.GetId();if(i==null)return;this.isTextEllipsis&&this.InternalDirectSetText(this.Text),i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart));if(i.SelectionStart!=null&&i.SelectionEnd!=null){var s=this.GetTrueSelection(this.SelectionStart,this.SelectionEnd,this.Text,e);this.isTextEllipsis&&(this.SelectionStart=s.SelectionStart,this.SelectionEnd=s.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionEnd))}if(this.UIProcess.japInput==1)this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),this.UIProcess.japInput=!1;else if(this.FocusType!=t.FocusType.ContextMenu&&this.FocusType!=t.FocusType.ClientEvent&&this.FocusType!=t.FocusType.DropDown&&this.FocusType!=t.FocusType.DragDrop){this.OldText=this.GetText(),this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.LastSelectionStart=this.OldSelectionStart,this.LastSelectionEnd=this.OldSelectionEnd;if(!this.MultiLine){this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.OldSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.OldSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.OldSelectionStart,this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.OldSelectionEnd;var o=this;setTimeout(function(){o.DropDownEditData.SelectionStart=o.SelectionStart,o.DropDownEditData.SelectionEnd=o.SelectionEnd},0)}}this.ReadOnly==1&&this.FocusType==t.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),(i.SetSelection==1||this.isTextEllipsis)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),this.IsCausedByImplementingDrop&&(this.IsCausedByImplementingDrop=!1),this.FocusExit&&(this.UIProcess.MoveControl(this.InputElement,!0),this.FocusExit=!1),this.isTextEllipsis&&(this.isTextEllipsis=!1)},e.prototype.SetInnerFocus=function(e){e!==null&&e!==undefined?this.FocusType=e:this.FocusType=t.FocusType.ClientEvent,this.InputElement.focus(),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype.LoseFocus=function(e){t.Utility.IsIE()||(this.IsActive=!1),t.Utility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),this.ImeMode&&this.InputElement.value!==""&&(this.isNullText=!1);if(t.Utility.IsIE())this.ImeMode?(this.ImeInput("LoseFocusInput",undefined,e),this.ImeSelectTimes=0):this.Text!=this.GetText()&&this.InternalSetText(this.Text,!0);else{this.ImeMode&&this.ImeInput("ReInput",!0,e);if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){var n=this.Text;n=n.replace(/\\/g,"\\\\"),this.MultiLine?(n=n.replace(/\r/g,"\\r"),n=n.replace(/\n/g,"\\n")):(n=n.replace(/\r\n/g,""),n=n.replace(/\r/g,""),n=n.replace(/\n/g,"")),this.InternalSetText(n,!0)}}this.HasFocus=!1;if(this._autoComplete.IsVisible()){if(this._autoComplete.GetIsMouseOnList())return;this._autoComplete.HideDropdown()}this.FocusType!=t.FocusType.DropDown&&(this.FocusType=t.FocusType.None);var r;t.Utility.IsIE()?r=this.GetText():r=this.hideText;if(this.OldText!=r&&!this.UIProcess.japInput){this.OldText=this.Text,t.Utility.IsIE()&&(this.Text=this.GetText(),this.SetHideText(this.GetText())),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);if(!this.SystemChange||this.oldTextValue!=this.GetText())this.SystemChange=!0}else this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.hideText!=this.GetText()&&t.Utility.IsIE()&&this.SetHideText(this.GetText())},e.prototype.GetTruePosition=function(e,t,n,r){var i=this.EllipsisString.GetLength();if(e<=r)return e;if(e>=r+i)return t.GetLength()-n.GetLength()+e;var s=t.GetLength()-n.GetLength()+i,o=Math.floor((e-r)*s/i)+r;return o},e.prototype.DealEllipsis=function(e,n,r,s){this.isTextEllipsis=!1;if(e||n==i.None)return;this.InternalDirectSetText(this.Text);var o=n,u=0,a=0,f=0,l=0,c=s.value,h=s.value,p="",d="",v=0,m=!0;s.value=c;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth){this.isTextEllipsis=!0,s.value=r;var g=r;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth)g="",c=r,h=r;else if(o==i.EllipsisPath){var y=h.LastIndexOf("\\");y!=-1&&(s.value=g+h.substr(y),t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)<=s.clientWidth&&(g=s.value,c=h.Substring(0,y),o=i.EllipsisEnd))}s.value=c+g;do u=s.value.GetLength(),a=Math.ceil(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)/u),f=t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)-s.clientWidth,l=Math.ceil(f/a),o==i.EllipsisEnd?(s.value=c.Substring(0,c.GetLength()-l)+g,c=c.Substring(0,c.GetLength()-l)):o==i.EllipsisPath&&(v=Math.ceil((c.GetLength()-l)/2),p=c.substr(0,v),d=c.substr(v+l),s.value=p+g+d,c=p+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth);var b=c.GetLength();do o==i.EllipsisEnd?(s.value=h.Substring(0,b+1)+g,b+=1):o==i.EllipsisPath&&(m?(d=h.substr(h.GetLength()-d.GetLength()-1),m=!1):(p=h.substr(0,p.GetLength()+1),m=!0),s.value=p+g+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)==s.clientWidth);o==i.EllipsisEnd?(s.value=h.Substring(0,b-1)+g,this.TextHeadLength=b-1):o==i.EllipsisPath&&(m?p=h.substr(0,p.GetLength()-1):d=h.substr(h.GetLength()-d.GetLength()+1),s.value=p+g+d,this.TextHeadLength=p.GetLength())}},e.prototype.ImeInput=function(e,n,r){var i;e=="DirectInput"&&!n?i=this.InputElement.value:e=="LoseFocusInput"&&this._getInputValueWithPlaceHolder()!=this.GetText()?i=this._getInputValueWithPlaceHolder():i=this.GetText();if(i==this.Text)return this.lastValue=this.Text,r!=null&&t.Utility.PreventDefault(r),this.ImeMode=!1,!1;if(t.Utility.IsIE()&&this.HasValidatedImeInput)return this.InternalSetText(i,!0),!1;var s;if(this.Text!=""){var o=Math.min(this.SelectionStart,this.SelectionEnd),u=Math.max(this.SelectionStart,this.SelectionEnd),a=this.Text;t.Utility.IsIE()||(a=this.GetDisPlayText(this.Text));if(u<a.GetLength()){var f=a.Substring(u,a.GetLength()),l=i.IndexOf(f);l!=-1?s=i.Substring(o,i.GetLength()-f.GetLength()):s=""}else s=i.Substring(o,i.GetLength())}else s=i;s!=""&&!this.MultiLine&&!this._autoComplete.IsDataListEmpty()&&this.EnableAutoComplete&&this._autoComplete.KeyUp(null,!0),e=="ReInput"&&(n?s=s.Substring(0,s.GetLength()):s=s.Substring(0,s.GetLength()-1));if(e=="Record")return s;var c=!1;e=="LoseFocusInput"&&(c=!0,this.UIProcess.japInput=!0),this.UIProcess.keypressResponse=!0,this.UIProcess.inputJap=!0,e=="ReInput"||!t.Utility.IsIE()&&e=="ClickInput"?this.InnerKeyPress(s,!0,c):this.InnerKeyPress(s,!1,c),this.HasValidatedImeInput=!0,this.UIProcess.inputJap=!1,this.UIProcess.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(e=="ReInput"||e=="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=t.FocusType.ImeInput},e.prototype.CanUndo=function(){return this.IsChangedByDropDownEdit?(this.IsUndoAfterDel?this.BuffText=this.GetText():this.LastText=this.GetText(),this.IsChangedByDropDownEdit=!1,!0):this.IsUndoAfterDel?this.GetText()!=this.BuffText:this.GetText()!=this.LastText},e.prototype.GetCookie=function(e){var t=document.cookie.split("; ");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(e==r[0]&&r[1]!=null)return window.unescape(r[1])}return null},e.prototype.SetCookie=function(e,t){var n=new Date(2020,8,20);if(document.cookie.IndexOf(e)==-1){if(t!="")while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");document.cookie=e+"="+window.escape(t)+"; expires="+n.toGMTString()}else{var r=document.cookie.split("; "),i="";for(var s=0;s<r.length;s++){var o=r[s].split("=");if(e==o[0]){if(o[1]!=null){i=window.unescape(o[1]);break}document.cookie=e+"="+window.escape(t.replace(",","@#GCD#@"))+"; expires="+n.toGMTString();return}}if(t!=""){while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");var u=i.split(","),a=!1;for(var f=0;f<u.length;f++)u[f]==t&&(a=!0);if(!a){i=t+","+i;var l=i.split(",");if(l.length>this.MaxHistoryCount){var c="";for(var h=0;h<this.MaxHistoryCount;h++)h!=this.MaxHistoryCount-1?c+=l[h]+",":c+=l[h];i=c}document.cookie=e+"="+window.escape(i)+"; expires="+n.toGMTString()}}}},e.prototype.DelCookie=function(e){document.cookie=e+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},e.prototype.DeleteItem=function(e){while(e.IndexOf("&nbsp;")!=-1)e=e.replace("&nbsp;"," ");var t=new Date(2020,8,20),n;this.AutoCompleteType!="None"?n=this.GetCookie(this.AutoCompleteType):n=this.GetCookie(this.GetId());if(n!=null)try{var r=n.split(","),i=n.split(",");if(r.length>0){var s;for(s=0;s<r.length;s++){while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(r[s].IndexOf("&")!=-1){var o=r[s],u="";while(o.IndexOf("&")!=-1){o=o.replace("&","&amp;");var a=o.IndexOf("&");u+=o.Substring(0,a+5),o=o.Substring(a+5,o.GetLength())}o.IndexOf("&")==-1&&o!=""&&(u+=o),r[s]=u}while(r[s].IndexOf("<")!=-1)r[s]=r[s].replace("<","&lt;");while(r[s].IndexOf(">")!=-1)r[s]=r[s].replace(">","&gt;");if(r[s]==e)break}if(s<i.length&&i.length>1){var f;for(f=s;f<i.length-1;f++)i[f]=i[f+1];i[r.length-1]=null;var l="";for(f=0;f<i.length-1;f++)f!=i.length-2?l+=i[f]+",":l+=i[f];if(this.AutoCompleteType!="None"){document.cookie=this.AutoCompleteType+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.AutoCompleteType).sort();for(var s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}else{document.cookie=this.GetId()+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.GetId()).sort();for(s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}}else this._autoComplete.SetDataList([]),this.AutoCompleteType!="None"?document.cookie=this.AutoCompleteType+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;":document.cookie=this.GetId()+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"}}catch(h){}},e.prototype.GetItem=function(e,t){if(this.IsFromServer){var n;this.AutoCompleteType!="None"&&(n=this.GetCookie(this.AutoCompleteType));if(n!=null)try{var r=n.split(","),i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;for(var s=0;s<i;s++)while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null}var r=this._historyList;r=r.sort();if(r!=null)try{var i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;t!==undefined&&t==="focus"&&(i=r.length);if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null},e.prototype.ResetData=function(e){this.SetText(e.ResetData)},e.prototype.ReadingImeOperation=function(){if(this.RubyText=="")return;t.Utility.FireEvent(this,this.readingImeStringOutputEvent,{readingString:this.RubyText},"readingImeStringOutput"),this.prevval="",this.RubyText=""},e.prototype.ReadingImeKeyUpProcess=function(e,n,r){var i=this.ImeMode?this.InputElement.value:this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}var u=s.Substring(this.SelectionStart,s.GetLength()),a=u,f;for(f=this.prevval.length;f>=0;f--)if(u.substring(0,f)==this.prevval.substring(0,f)){a=u.substring(f);break}this.prevval=u;if(i==this.Text&&e!=13&&!r.altKey)this.prevval="",this.RubyText="";else if(e!=32&&e!=229&&!(e>=112&&e<=123)&&e!=37&&e!=39&&e!=38&&e!=40&&e!=27&&e!=28&&e!=29&&e!=8){var l=this.ConvertReadingIMEString(a,n);t.Utility.IsIE()&&(this.ImeMode?((e==192||e==219||e==221)&&a.length==1&&l.length==2&&this.RubyText.charAt(this.RubyText.length-1)==l.charAt(0)&&(l=l.charAt(1)),this.RubyText+=l):this.ReadingImeOperation())}},e.prototype.IsValidReadingString=function(e){if(e===undefined||e===null||e.length===0)return!1;for(var t=0;t<e.length;t++)if(!this.IsValidCharacter(e[t]))return!1;return!0},e.prototype.IsValidCharacter=function(e){var n=t.CharProcess.CharEx;if(n.IsSpace(e))return!0;var r=n.GetCharType(e),i=r&~n.Ctype.FullWidth;return i==n.Ctype.Hiragana||i==n.Ctype.Katakana||i==n.Ctype.UpperCase||i==n.Ctype.LowerCase||i==n.Ctype.Numeric||i==n.Ctype.Symbol||i==n.Ctype.MathSymbol||i==n.Ctype.Punctuation||n.CharCategory._jpnMixed.indexOf(e)!==-1?!0:!1},e.prototype.UpdateReadingIME=function(e){this.RubyText=this.ConvertReadingIMEString(e),this.ReadingImeOperation()},e.prototype.ConvertReadingIMEString=function(e,n){n===undefined&&(n=t.CharProcess.CharEx);var r="";for(var i=0;i<e.length;i++){var s=e.charAt(i),o=n.ToHalfKatakana(s);s=="゛"&&(o="ﾞ"),s=="゜"&&(o="ﾟ"),o=="･"&&(o=""),r+=o}return r},e.prototype.AddAllEventsHandler=function(){var e=this;if(this.GetInputElement()!=null){var n=function(n){t.GlobalEventHandler.OnMouseDown(e,n)},r=function(n){t.GlobalEventHandler.OnMouseUp(e,n)},i=function(n){t.GlobalEventHandler.OnSelectStart(e,n)},s=function(n){t.GlobalEventHandler.OnKeyDown(e,n)},o=function(n){t.GlobalEventHandler.OnKeyPress(e,n)},u=function(n){t.GlobalEventHandler.OnKeyUp(e,n)},a=function(n){t.GlobalEventHandler.OnDblClick(e,n)},f=function(n){t.GlobalEventHandler.OnHTML5BeforeCopy(e,n)},l=function(n){t.GlobalEventHandler.OnHTML5Cut(e,n)},c=function(n){t.GlobalEventHandler.OnHTML5Paste(e,n)},h=function(n){t.GlobalEventHandler.OnDragStart(e,n)},p=function(n){t.GlobalEventHandler.OnDragEnd(e,n)},d=function(n){t.GlobalEventHandler.OnMouseOut(e,n)},v=function(n){t.GlobalEventHandler.OnDrop(e,n)},m=function(n){t.GlobalEventHandler.OnTouchStart(e,n)},g=function(n){t.GlobalEventHandler.OnTouchEnd(e,n)},y=function(n){t.GlobalEventHandler.OnSelect(e,n)};if(t.Utility.safari){var b=function(t){e._safariDropText=getSelection().toString()},w=function(t){e._safariDropText=null};this.GetJQueryInputElement().on({"dragenter.imtextbox":b,"dragleave.imtextbox":w})}var E=function(n){t.GlobalEventHandler.OnDragEnter(e,n)},S=function(n){t.GlobalEventHandler.OnDragLeave(e,n)};if(t.Utility.IsIE7OrLater()&&!t.Utility.IsIE11OrLater()){var x=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"onpropertychange.imtextbox":x})}else{var T=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"propertychange.imtextbox":T})}var N=function(n){t.GlobalEventHandler.OnCompositionStart(e,n)},C=function(n){t.GlobalEventHandler.OnCompositionUpdate(e,n)},k=function(n){t.GlobalEventHandler.OnCompositionEnd(e,n)};if(t.Utility.IsIE10OrLater()){var L=function(n){t.GlobalEventHandler.OnMSPointerUp(e,n)},A=function(n){t.GlobalEventHandler.OnMSPointerDown(e,n)},O=function(n){t.GlobalEventHandler.OnMSGestureTap(e,n)};this.GetJQueryInputElement().on({"MSPointerUp.imtextbox":L,"MSPointerDown.imtextbox":A,"MSGestureTap.imtextbox":O})}var M=function(n){t.GlobalEventHandler.OnEditFieldLoseFocus(e,n)},_=function(n){t.GlobalEventHandler.OnFocusOut(e,n)},D=function(n){t.GlobalEventHandler.OnEditFieldFocus(e,n)},P=function(n){t.GlobalEventHandler.OnActivate(e,n)},H=function(n){t.GlobalEventHandler.OnDeActivate(e,n)};if(t.Utility.GetClientOS()==="Android"){var B=function(n){t.GlobalEventHandler.OnWebkitEditableContentChanged(e,n)};this.GetJQueryInputElement().on({"webkitEditableContentChanged.imtextbox":B})}this.GetJQueryInputElement().on({"mousedown.imtextbox":n,"mouseup.imtextbox":r,"selectstart.imtextbox":i,"keydown.imtextbox":s,"keypress.imtextbox":o,"keyup.imtextbox":u,"dblclick.imtextbox":a,"beforecopy.imtextbox":f,"cut.imtextbox":l,"paste.imtextbox":c,"dragstart.imtextbox":h,"dragend.imtextbox":p,"mouseout.imtextbox":d,"drop.imtextbox":v,"touchstart.imtextbox":m,"touchend.imtextbox":g,"select.imtextbox":y,"dragenter.imtextbox":E,"dragleave.imtextbox":S,"compositionstart.imtextbox":N,"compositionupdate.imtextbox":C,"compositionend.imtextbox":k,"blur.imtextbox":M,"focusout.imtextbox":_,"focus.imtextbox":D,"activate.imtextbox":P,"deactivate.imtextbox":H})}},e.prototype.WebkitEditableContentChanged=function(e){var t=this,n=function(){try{t.ImeInput()}finally{t.ImeMode=!1}};setTimeout(n,0)},e.prototype.KeyDown=function(e){var n=this,r=e.keyCode,i=new Object;i.Shift=!1,i.Ctrl=!1,i.Alt=!1,e.shiftKey&&(i.Shift=!0),e.ctrlKey&&(i.Ctrl=!0),e.altKey&&(i.Alt=!0),this.LastInputText=this.GetText(),this.isFuncKeyPressed=!1;if(!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete){var s=this._autoComplete.KeyDown(e);if(s!=null&&s==0)return}this.KeyDownAction=!0;if(r==229&&!this.IsJapanConvertKeyPress||r==13&&this.GetText()!=this.Text)return this.ImeMode=!0,!0;if(this.ImeMode){var o=i.Shift||i.Ctrl||r==20||r>=112&&r<=123;o=o||r==8&&!t.Utility.IsIE(),o||(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1)}r==229&&this.IsJapanConvertKeyPress&&(this.IsJapanConvertKeyPress=!1);var u=new Object;i.Shift&&(r|=65536),i.Ctrl&&(r|=131072);if(i.Alt&&r===40)var a="DropDown";i.Alt&&(r|=262144);var f=!1,l;if(this.KeyActionList!=null)for(l=0;l<this.KeyActionList.length;l++)if(this.KeyActionList[l]==r.toString()){f=!0;break}if(a=="DropDown"||(r==262182||r==262184)&&!f)return!1;95<r&&r<106&&(r-=48);var c=this.SelectionStart,h=this.SelectionEnd,p=this.GetText(),d=this.BuffText,v=this.LastText,m=this.LastSelectionStart,g=this.LastSelectionEnd;this.MultiLine||(c=this.DropDownEditData.SelectionStart,h=this.DropDownEditData.SelectionEnd,p=this.DropDownEditData.Text,d=this.DropDownEditData.BuffText,v=this.DropDownEditData.LastText,m=this.DropDownEditData.LastSelectionStart,g=this.DropDownEditData.LastSelectionEnd),u=this.UIProcess.TextBoxKeyDown(r,i,this._getEditModeInternal(),this.Overwrite,c,h,this.ReadOnly,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.ExitOnLastChar,this.ExitOnLeftRightKey,this.MultiLine,this.PasswordMode,p,this.AcceptTab,this.AcceptReturn,d,v,m,g,a,e);if(u==null)return!1;if(u.inputChar!=null)return!0;u.InputTab==1&&(this.Text=this.GetText(),this.InnerKeyPress("	")),u.DelInclude&&(this.IsUndoAfterDel=!0,u.SerialDel||(this.BuffText=this.GetText(),this.LastSelectionStart=this.BuffText.GetLength(),this.LastSelectionEnd=this.BuffText.GetLength(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.BuffText.GetLength(),this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.BuffText.GetLength()))),u.Text!=null&&(u.Undo==1&&(this.LastText=this.Text,this.BuffText=this.LastText,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.BuffText=this.DropDownEditData.LastText)),this.DirectSetText(u.Text),this.MultiLine||(this.DropDownEditData.Text=u.Text));var y=this.GetSelectionLength();u.SelectionStart!=null&&(u.Undo==1&&(this.isFuncKeyPressed=!0,this.LastSelectionStart=this.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart)),this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionStart))),u.SelectionEnd!=null&&(u.Undo==1&&(this.LastSelectionEnd=this.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd)),this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionEnd)));var b=this.GetSelectionLength();if(u.KeyCode!=null){var w=new Object;return w.KeyCode=u.KeyCode,w}u.FocusType!=null&&(this.FocusType=u.FocusType),u.Overwrite!=null&&this.GetOverwrite()!=u.Overwrite&&(this._getEditModeInternal()==t.EditMode.Insert?this._setEditModeInternal(t.EditMode.Overwrite):this._getEditModeInternal()==t.EditMode.Overwrite&&this._setEditModeInternal(t.EditMode.Insert));if(u.EventInfo!=null)for(l=0;l<u.EventInfo.length;l++)u.EventInfo[l]!=null&&(u.EventInfo[l].Type=="KeyExit"?this.EventInfo=u.EventInfo[l]:this.UIProcess.FireEvent(this,u.EventInfo[l].Name,u.EventInfo[l].Args,u.EventInfo[l].Type));return u.System!=null?(setTimeout(function(){u.System&&n.InputElement.value===""&&n.Clear()},0),u.System):(u.SetSelection==1&&(y==0&&b!=0?t.Utility.ShouldFireOnSelectStart=!0:t.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),t.Utility.ShouldFireOnSelectStart=!1),!1)},e.prototype.KeyPress=function(e,n,r){var i=e;if(!t.Utility.IsIE()&&this.ImeMode){var s=n.keyCode==192&&n.altKey;if(s){this.ImeInput("ReInput",!0,n),this.ImeSelectTimes=0,this.ImeMode=!1;return}}if(!t.Utility.IsIE()&&n.charCode==0){var o=n.keyCode||n.charCode;if(o=!this.MultiLine||!this.AcceptReturn&&this.MultiLine&&!n.ctrlKey)return!0}return this.InnerKeyPress(i,r)},e.prototype.KeyUp=function(e){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&(e.keyCode!=8&&e.keyCode!=46&&e.keyCode!=9||this.GetText()!=""?this.isFuncKeyPressed?this._autoComplete.HideDropdown():this.LastInputText!=this.GetText()&&this.GetText()!=""&&this._autoComplete.KeyUp(e):this._autoComplete.GetIsDeleteItem()||this._autoComplete.HideDropdown(),this._autoComplete.SetIsDeleteItem(!1)),this.KeyDownAction=!1;var n=e.keyCode,r=t.CharProcess.CharEx;n==13&&this._getInputValueWithPlaceHolder()!=this.Text&&(t.Utility.IsIE()&&this.ImeMode?this.HasValidatedImeInput=!1:t.Utility.IsIE()||(this.ImeMode=!0));if(this.ImeMode==1){var i=this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength()),n==13?(this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0):n>=48&&n<=57||n>=96&&n<=105?(n>=96&&(n-=48),s=r.ToHalfWidth(s),s!=String.fromCharCode(n)&&!this.ImeSelect?this.HasValidatedImeInput=!1:s==String.fromCharCode(n)&&this.ImeSelectTimes<1?this.HasValidatedImeInput=!1:this.ImeSelect||(this.ImeInput("ReInput",undefined,e),this.HasValidatedImeInput=!1,this.ImeMode=!0),this.ImeSelectTimes=0):n==32?this.ImeSelect==0&&(this.ImeSelectTimes==1?this.ImeSelect=!0:r.ToHalfWidth(s)!=String.fromCharCode(n)?this.ImeSelectTimes++:this.HasValidatedImeInput&&(this.UIProcess.inputJap=!0,t.Utility.IsIE()&&(this.HasValidatedImeInput=!1),this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0)):n>=65&&n<=90?(this.ImeSelectTimes=0,this.HasValidatedImeInput=!1):n==32||n==106||n==107||n==109||n==173&&t.Utility.IsFireFox4OrLater()||n==110||n==111||n==219||n==220||n==221||n==222||n>=186&&n<=192||n==226?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput",undefined,e),this.ImeSelectTimes=0,t.Utility.IsIE()&&(this.HasValidatedImeInput=!1)):n==40||n==38?this.ImeSelect==0&&this.ImeSelectTimes==1&&(this.ImeSelect=!0):n==8||n==46?this.ImeSelectTimes=0:n==27?this.ImeSelectTimes=0:n==244?this.IsJapanConvertKeyPress=!0:!t.Utility.IsIE()&&n==243?(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1):t.Utility.IsIE()&&n==229&&(this.HasValidatedImeInput=!1)}n==242&&this.ImeInput("ReInput",!0,e),this.ReadingImeKeyUpProcess(n,r,e);if(this.UIProcess.keyupResponse==1){this.UIProcess.keyupResponse=!1;var u=this.UIProcess.TextBoxKeyUp(this.InputElement,this.MultiLine,this.SelectionStart,this.SelectionEnd,this.GetText()),a=this.SelectionStart,f=this.SelectionEnd,l=!1,c=!1;this.MultiLine||(a=this.DropDownEditData.SelectionStart,f=this.DropDownEditData.SelectionEnd),u.SelectionStart!=null&&this.SelectionStart!=u.SelectionStart&&(l=!0,this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),u.SelectionEnd!=null&&this.SelectionEnd!=u.SelectionEnd&&(this.SelectionEnd=u.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),c=!0,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)));var h=this._getInputValueWithPlaceHolder(),p=this.MultiLine?this.Text:this.GetSingleText(this.Text),d=p.GetLength()-h.GetLength(),v;this.MultiLine?this.PasswordMode?d!=0&&(v=this.Text,l&&c?p=v.Substring(0,this.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.SelectionStart+d,p=v.Substring(0,a)+v.Substring(f,v.GetLength()))):p=this.GetText():(d!=0&&(v=this.DropDownEditData.Text,l&&c?this.DropDownEditData.Text=v.Substring(0,this.DropDownEditData.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.GetMultiPosition(v,this.SelectionStart+d),this.DropDownEditData.Text=v.Substring(0,a)+v.Substring(f,v.GetLength()))),p=this.GetSingleText(this.DropDownEditData.Text)),u.SystemEdit==1&&(this.Text=p,this.SetHideText(p)),u.Text!=null&&this.InternalSetText(u.Text,!0),u.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}},e.prototype.PropertyChange=function(e){e!=null&&t.Utility.IsIE10OrLater()&&e.propertyName=="value";if(this.DragEdit)this.DragEdit=!1,this.MultiLine||this.Text!=this.GetText()&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionEnd,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart),this.OldText=this.Text,this.Text=this.GetText(),this.SetHideText(this.GetText()),this.SystemChange=!0,this.LastText=this.OldText,this.SetSelectionLength(0);else if(this.DropEdit){this.DropEdit=!1,this.FocusType=t.FocusType.DragDrop,this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength();var n=this._getInputValueWithPlaceHolder();if(!this.MultiLine){var r,i=this.GetSingleText(this.DropDownEditData.Text),s=n.GetLength()-i.GetLength();this.PasswordMode?r=this.DropText:r=n.Substring(this.SelectionEnd-s,this.SelectionEnd),s!=0&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd-s),this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+r+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionStart,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart+s),this.PasswordMode&&(n=this.GetSingleText(this.DropDownEditData.Text))}else if(this.PasswordMode){var o=this.SelectionEnd-this.DropText.GetLength();n=this.Text.Substring(0,o)+this.DropText+this.Text.Substring(o,this.Text.GetLength())}this.OldText=this.Text,this.Text=n,this.SetHideText(n),this.SystemChange=!0,this.LastText=this.OldText}else!this.MultiLine&&!this.isTextEllipsis&&!this.PasswordMode&&this.SetHideText(this.GetText());return!1},e.prototype.MouseDown=function(e){var n=t.Utility.GetMouseButton(e);this.FocusedWhenMouseDown=document.activeElement==e.target,this.MouseDownOnClearButton=t.Utility.IsMouseDownOnClearButton(e),t.Utility.IsIE()||(this.IsActive=!0,this.ImeMode&&n==t.MouseButton.Left&&(this.IsImplementImeInput=!0)),this.MouseButton=n,this.BeforeDragSelectionStart=this.SelectionStart,this.BeforeDragSelectionEnd=this.SelectionEnd;if(this.MouseButton==t.MouseButton.Right)this.FocusType!=t.FocusType.ClientEvent&&(this.FocusType=t.FocusType.Click);else{this.isLeftMouseButtonPressed=!0,this.FocusType!=t.FocusType.ClientEvent&&(this.FocusType=t.FocusType.Click);try{var r=t.Utility.GetSelectionText(this.InputElement);r!=""&&(this.IsMouseDown=!0,t.Utility.ClearSelection(this.InputElement))}catch(i){}}var s=this.UIProcess.TextBoxMouseDown(this.InputElement,n);if(s==null)return;s.SelectionStart!=null&&(this.SelectionStart=s.SelectionStart),s.SelectionEnd!=null&&(this.SelectionEnd=s.SelectionEnd)},e.prototype.MouseUp=function(e){var n=null;t.Utility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),this.IsMouseDown=!1;if(t.Utility.IsIE()&&(this.ImeMode||this.Text!=this.GetText()))this.ImeMode?(this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0):this.InternalSetText(this.Text,!0);else if(!t.Utility.IsIE()&&(this.ImeMode||this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder())){if(!this.IsImplementImeInput)return;this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0;if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){this.IsImplementImeInput=!1;var r=this.Text;this.MultiLine?(r=r.replace(/\r/g,"\\r"),r=r.replace(/\n/g,"\\n")):(r=r.replace(/\r\n/g,""),r=r.replace(/\r/g,""),r=r.replace(/\n/g,""));var i=this;window.setTimeout(function(){i.InternalSetText(r,!0)},0),this.Select()}}else{this.isLeftMouseButtonPressed=!1,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd;var s=this.SelectionStart,o=this.SelectionEnd,u=this.GetText(),a=null;n!=null&&n.Ctrl!=null&&(a=n.Ctrl);var f=this.UIProcess.TextBoxMouseUp(this.InputElement,s,o,this.MouseButton,this.MultiLine,u,a,this.HighlightText,e);if(f==null)return;f.SelectionStart!=null&&(this.SelectionStart=f.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),f.SelectionEnd!=null&&(this.SelectionEnd=f.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),f.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}this.MouseButton=t.MouseButton.Left,this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=e.target.value.length>0),this.HandleClearButton(e)},e.prototype.MouseWheel=function(e){},e.prototype.ShouldCancelMouseWheelDefaultBehavior=function(){return!1},e.prototype.MouseOut=function(){if(this.IsMouseDown!=1)return;if(this.MouseUpPointerType!==4&&this.MouseUpPointerType!=undefined&&this.MouseUpPointerType!=="mouse")return;var e=Math.min(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),n=Math.max(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),r=this.GetText().Substring(e,n);r!=""&&(this.SetSelection(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),t.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},e.prototype.DoubleClick=function(){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly&&this._autoComplete.ShowDropdown();var e=this.UIProcess.TextBoxDoubleClick(this.InputElement,this.SelectionStart,this.GetText());return e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)),this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),e.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),!0},e.prototype.DragStart=function(e){this.PasswordMode?e.dataTransfer.effectAllowed="none":this.DragEdit=!0},e.prototype.DragEnd=function(){this.DragEdit=!0},e.prototype.DragEnter=function(){this.isTextEllipsis&&this.InternalDirectSetText(this.GetText())},e.prototype.DragLeave=function(){this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.MouseMove=function(e){},e.prototype.MouseOver=function(){},e.prototype._isinsertGroup=function(e){return e==t.EditMode.Insert||e==t.EditMode.FixedInsert},e.prototype._isOverwriteGroup=function(e){return e==t.EditMode.Overwrite||e==t.EditMode.FixedOverwrite},e.prototype.InnerKeyPress=function(e,t,n){var r=e,i;this.ImeMode||this.isPasting?i=this.Text:(i=this._getInputValueWithPlaceHolder(),i!=""&&(i=this.GetText())),this.isPasting=!1;var s=this.SelectionStart,o=this.SelectionEnd;this.MultiLine||(s=this.DropDownEditData.SelectionStart,o=this.DropDownEditData.SelectionEnd);var u=this.UIProcess.TextBoxKeyPress(s,o,r,i,this.MaxLength,this.LengthAsByte,this.ExitOnLastChar,this.Overwrite,this.MultiLine,this.MaxLineCount,this.CountWrappedLine);u.Text!=null&&(u.DelInclude&&(this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),this.DirectSetText(u.Text,t),this.MultiLine||(this.DropDownEditData.Text=u.Text)),u.SelectionStart!=null&&(this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(u.Text,u.SelectionStart))),u.SelectionEnd!=null&&(this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(u.Text,u.SelectionEnd))),u.SetSelection==1&&!t&&!n&&(this._isInnerKeyPressCall=!0,this.SetSelection(this.SelectionStart,this.SelectionEnd));if(u.EventInfo!=null)for(var a=0;a<u.EventInfo.length;a++)u.EventInfo[a]!=null&&this.UIProcess.FireEvent(this,u.EventInfo[a].Name,u.EventInfo[a].Args,u.EventInfo[a].Type);return u.SystemEdit==1?!0:!1},e.prototype._isSupportClipBoard=function(){if(!this.GetUseClipboard())return!0;if(t.Utility.IsIE())return!0;if(t.Utility.IsFireFox4OrLater())try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return;var n=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!n)return;n.addDataFlavor("text/unicode"),e.getData(n,e.kGlobalClipboard);var r=new Object,i=new Object;try{n.getTransferData("text/unicode",r,i)}catch(s){return null}r&&(Components.interfaces.nsISupportsWString?r=r.value.QueryInterface(Components.interfaces.nsISupportsWString):Components.interfaces.nsISupportsString?r=r.value.QueryInterface(Components.interfaces.nsISupportsString):r=null);if(r)return r.data.substring(0,i.value/2)}catch(o){return!1}return!1},e.prototype.MSPointerUp=function(e){e!=null&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},e.prototype.CompositionStart=function(e){this.ImeMode=!0,this._lastCompositionText="",this._lastCompositionOffset=0,this._convertedOnLastUpdate=!1,this._cachedReadingString="",this._readingString="",this._compositionUpdateFired=!1},e.prototype.CompositionUpdate=function(e){this._compositionUpdateFired=!0;if(e.originalEvent.data===undefined||e.originalEvent.data.length===0)return;var t=this.InputElement.selectionStart-e.originalEvent.data.length;if(t>this._lastCompositionOffset){if(!this._convertedOnLastUpdate){var n=this._lastCompositionText.substring(0,t-this._lastCompositionOffset);this.IsValidReadingString(n)?this._cachedReadingString+=n:this._cachedReadingString+=this._readingString,this._readingString="",this._convertedOnLastUpdate=!0}}else this._convertedOnLastUpdate&&(this._convertedOnLastUpdate=!1);if(!this.IsValidReadingString(e.originalEvent.data))return;this._readingString=e.originalEvent.data},e.prototype.CompositionEnd=function(e){var n=this.HasValidatedImeInput;this.ImeMode=!0,this.HasValidatedImeInput=!1;var r=this,i=function(){try{r.ImeInput("DirectInput",undefined,e)}finally{r.ImeMode=!1}};t.Utility.IsIE9OrLater()?i():setTimeout(i,0),this._compositionUpdateFired||this.CompositionUpdate(e),this._convertedOnLastUpdate=!1;var s=this._cachedReadingString+this._readingString;this._cachedReadingString="",this._readingString="";if(e.originalEvent.data.length===0||s.length===0)return;this.UpdateReadingIME(s);if(t.Utility.IPad&&t.Utility.safari||t.Utility.chrome&&t.Utility.GetClientOS()==="Android")this.HasValidatedImeInput=n,this.ImeMode=!1},e.prototype.SelectStart=function(e){if(this.ImeMode)return!1;if(this.isLeftMouseButtonPressed){var t=this.UIProcess.SelectStart(this.InputElement,e,this.MultiLine);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionEnd)))}},e.prototype.DragDrop=function(e){if(!p.Utility.IsIE()&&this.ReadOnly)return!1;this.FFDragFlag=!1,p.Utility.IsIE()||(this.FFDragFlag=!0),!p.Utility.IsIE()&&!p.Utility.safari&&this.SetInnerFocus();var t=p.Utility.GetSelectionStartPosition(this.InputElement),n=t,r=this.UIProcess.DragDrop(e,this.ExitOnLastChar,t,n,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,this.GetText());if(r==null)return;if(r.DropText!=null){var i,s;if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(r.DropText,this.PasswordChar,this.MultiLine);p.Utility.IsIE()?(window.event.dataTransfer.setData("Text",o),o!=window.event.dataTransfer.getData("Text")&&(i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0),p.Utility.PreventDefault(window.event))):(i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0,!0)),this.DropText=r.DropText}else if(p.Utility.IsIE()){event.dataTransfer.setData("Text",r.DropText);if(r.DropText!=event.dataTransfer.getData("Text"))i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0),p.Utility.PreventDefault(event);else{var u=this;setTimeout(function(){var e=u.GetText();u.InternalSetText(e,!0)},0)}}else i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0,!0);this.DropEdit=!0}if(r.EventInfo!=null)for(var a=0;a<r.EventInfo.length;a++)r.EventInfo[a]!=null&&r.EventInfo[a].Name!=null&&(this.UIProcess.FireEvent(this,r.EventInfo[a].Name,r.EventInfo[a].Args,r.EventInfo[a].Type),r.EventInfo[a].Name==this.KeyExitEvent&&(this.FocusExit=!0));this.FFDragFlag=!1;var f=this,l=this.MultiLine,c=this.Ellipsis,h=this.EllipsisString,p=this.InputElement;return setTimeout(function(){f.InternalSetText(f.GetText()),f.DealEllipsis(l,c,h,p)},0),!0},e.prototype.MSGestureTap=function(e){if(this.Focused&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=this;setTimeout(function(){t.Focused&&t._autoComplete.ShowDropdown()},400)}},e.prototype.MSPointerDown=function(e){if(this.Focused&&(e.pointerType===e.MSPOINTER_TYPE_TOUCH||e.pointerType==="touch")&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=new MSGesture;t.target=e.target,t.addPointer(e.pointerId)}},e.prototype.GetShowLiterals=function(){return t.ShowLiterals.Always},e}();t.IMTextBox=l;var c=function(e){function r(t,n,r,i,s,o){e.call(this),this.isMulSelected=!1,this.isOverWrite=!1,this.ForwardSelection="None",this.isCtrlPress=!1,this.isCtrlClick=!1,this.isDblClick=!1,this.isTriClick=!1,this.isInputValid=!0,this.ctrlDelete=!1,this.ctrlBackspace=!1,this.IsDelInclude=!1,this.IsSerialDel=!1,this.StartPos=null,this.LastKey=null,this.keypressResponse=!1,this.systemEdit=!1,this.keyupResponse=!1,this.japInput=!1,this.inputJap=!1,this.IsKeyDown=!1,this.CurStart=0,this.CurEnd=0,this.control=o,this.Owner=o,this.Filter=new d(t,n),this.IsjQueryControl=s,this.PasswordMode=r,this.PasswordChar=i}return __extends(r,e),r.prototype.Reset=function(){this.Filter=new d(this.control.AutoConvert,this.control.Format),this.PasswordMode=this.control.PasswordMode,this.PasswordChar=this.control.GetPasswordChar()},r.prototype.TextBoxKeyDown=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){n.Ctrl?this.isCtrlPress=!0:this.isCtrlPress=!1;var N=new Object;switch(r){case t.EditMode.Insert:this.isOverWrite=!1;break;case t.EditMode.Overwrite:this.isOverWrite=!0;break;case t.EditMode.FixedInsert:this.isOverWrite=!1;break;case t.EditMode.FixedOverwrite:this.isOverWrite=!0}s!=o?this.isMulSelected=!0:this.isMulSelected=!1;var C;switch(x){case"Clear":return u||(N.SelectionStart=0,N.SelectionEnd=0,N.Text="",N.DelInclude=!0,this.IsDelInclude=!0),N;case"NextControl":return C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N;case"PreviousControl":return C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N}if(u&&e!=131117&&e!=131139&&e!=9&&e!=65545&&e!=131081&&e!=196617&&e!=131137&&e!=37&&e!=39&&e!=38&&e!=40)return N;var k;switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 117:case 65657:case 116:case 121:case 123:N.System=!0;break;case 45:var L;if(r===t.EditMode.FixedInsert)L=!1;else if(r===t.EditMode.FixedOverwrite)L=!0;else{L=!i;if(this.EditStatusChangedEvent!=""&&this.EditStatusChangedEvent!=null){var A=new Object;A.Name=this.EditStatusChangedEvent,A.Args=null,A.Type="EditStatusChanged",N.EventInfo=new Array,N.EventInfo[0]=A}}N.Overwrite=L;break;case 13:d&&y?(this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0):d&&!y?(N.System=!1,N.IsDoPostBack=!0):(this.keypressResponse=!0,this.keyupResponse=!1,N.System=!0);break;case 131085:d&&(this.systemEdit=!0,this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0);break;case 9:case 65545:d&&g&&!u?(this.keypressResponse=!0,N.InputTab=!0):(N.System=!0,C=new Object,this.KeyExitEvent!=""&&this.KeyExitEvent!=null&&(C.Name=this.KeyExitEvent,C.Args={Key:e==9?t.ExitKeys.Tab:t.ExitKeys.ShiftTab},C.Type="KeyExit"),N.EventInfo=new Array,N.EventInfo[0]=C,d&&(N.SelectionStart=m.GetLength(),N.SelectionEnd=m.GetLength()));break;case 131081:C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 196617:C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 8:case 65544:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 46:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 131080:case 196616:this.isMulSelected?(this.keyupResponse=!0,this.ctrlBackspace=!0):(this.systemEdit=!0,this.keyupResponse=!0,N.System=!0),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131118:this.keyupResponse=!0,N.System=!0,this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0,N.KeyCode=39,this.ctrlDelete=!0;break;case 131139:case 131117:if(!v){var O;this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?this.Copy(m,s,o):N.System=!0}else N.System=!1;break;case 65581:case 131158:this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.TextBoxPaste(s,o,m,h,g,y,a,f,l,c,d):N.System=!0;break;case 131160:v?N.System=!1:(this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.Cut(m,s,o):N.System=!0);break;case 65582:s!=o?N=this.Cut(m,s,o):(this.systemEdit=!0,this.keyupResponse=!0,N.KeyCode=8),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131137:N=this.TextBoxSelectAll(m);break;case 131162:N=this.TextBoxUndo(m,b,w,E,S,s,o);break;case 65573:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65575:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65574:d?(this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0):(o>0&&(N.SelectionEnd=o-1),N.SetSelection=!0);break;case 65576:d?(this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0):(o<m.GetLength()&&(N.SelectionEnd=o+1),N.SetSelection=!0);break;case 65569:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65570:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 196645:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 196647:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65572:case 196644:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65571:case 196643:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 37:case 131109:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===0&&this.CurEnd==0&&(p===t.ExitOnLeftRightKey.Both||p===t.ExitOnLeftRightKey.Left)){var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart-=1,this.CurEnd=this.CurStart;if(s!==0||o!==0||p!==t.ExitOnLeftRightKey.Both&&p!==t.ExitOnLeftRightKey.Left)u||(this.keyupResponse=!0),N.System=!0;else{var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 39:case 131111:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===m.GetLength()&&this.CurEnd===m.GetLength()&&(p===t.ExitOnLeftRightKey.Both||p===t.ExitOnLeftRightKey.Right)){var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart+=1,this.CurEnd=this.CurStart;if(s!==m.GetLength()||o!==m.GetLength()||p!==t.ExitOnLeftRightKey.Both&&p!==t.ExitOnLeftRightKey.Right)u||(this.keyupResponse=!0),N.System=!0;else{var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 33:case 131105:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 34:case 131106:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 38:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 40:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 131108:case 36:this.keyupResponse=!0,N.System=!0;break;case 131107:case 35:this.keyupResponse=!0,N.System=!0;break;case 131112:case 131110:this.keyupResponse=!0,N.System=!0;break;case 27:this.control.Clear();break;default:}if(e!==undefined&&e!==null){if(e>=48&&e<=57||e>=65&&e<=90||e>=96&&e<=105||e==229||e==0||e==231)return this.keypressResponse=!0,N==null&&(N={}),N.System=!0,N.inputChar=!0,N;if(e==32||e==106||e==107||e==109||e==173&&t.Utility.IsFireFox4OrLater()||e==110||e==111||e==219||e==220||e==221||e==222||e>=186&&e<=192||e==226||e==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.Utility.IsIE()&&(e===61||e===59))return this.keypressResponse=!0,N.System=!0,N;if(T.shiftKey)var _=e-65536;if(_>=48&&_<=57||_>=65&&_<=90||_>=96&&_<=105||_==229)return this.keypressResponse=!0,N.System=!0,N;if(_==32||_==106||_==107||_==109||e==173&&t.Utility.IsFireFox4OrLater()||_==110||_==111||_==219||_==220||_==221||_==222||_>=186&&_<=192||_==226||_==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.Utility.IsIE()&&(_==61||_==59))return this.keypressResponse=!0,N.System=!0,N}return N},r.prototype.TextBoxKeyPress=function(e,r,i,s,o,u,a,f,l,c,h){if(this.keypressResponse==1){this.keypressResponse=!1,this.isInputValid=!0;var p=new Object,d=new Object,v="\r\n";if(!t.Utility.IsIE()||parseInt(n.browser.version)>=9)v="\n";var m="";if(i=="	")m=i;else if(i=="\r"||i=="\n"){if(!l)return p.SystemEdit=!0,p;m=v}else if(i.GetLength()==1)m=this.Filter.Check(i);else{var g=this.Filter.CheckText(i);m=g.CheckedText,this.isInputValid=g.IsInputValid}if(e==r){if(o!=0){var y=o-this.GetLength(s,u);if(m==v)y<v.GetLength()&&o!=0&&(m="");else if(!f||f&&e==s.GetLength())o>this.GetLength(s,u)?m=this.MaxLengthCheck(m,y,u):m="";else if(f){var b=s.Substring(0,e),w=s.Substring(e,s.GetLength()),E=w.IndexOf(v);E!=-1&&(b+=w.Substring(E,w.GetLength())),y=o-this.GetLength(b,u),m=this.MaxLengthCheck(m,y,u)}}}else{var S=s.Substring(Math.min(e,r),Math.max(e,r));if(o!=0){var y=o-this.GetLength(s,u)+this.GetLength(S,u);m==v?y<v.GetLength()&&(m=""):m=this.MaxLengthCheck(m,y,u)}}if(c!=0&&l)if(c>=this.GetLinesCount(s,h)){var x=s.Substring(0,e),T=s.Substring(r,s.GetLength());if(this.PasswordMode){x=this.GetPasswordText(x,this.PasswordChar,l),T=this.GetPasswordText(T,this.PasswordChar,l);var N=this.GetPasswordText(m,this.PasswordChar,l);N=this.MaxLineCheck(x,T,N,c,h),m=m.Substring(0,N.GetLength())}else m=this.MaxLineCheck(x,T,m,c,h)}else m="";i!=""&&m==""&&(this.isInputValid=!1);var C=s;if(!f||m==v||e!=r){if(e>r){var k=e;e=r,r=k}e!=r&&(p.DelInclude=!0,this.IsDelInclude=!0),C=s.Substring(0,e)+m+s.Substring(r,s.GetLength())}else if(m!="")if(e==s.GetLength())C=s+m;else if(e+v.GetLength()<=s.GetLength()&&s.Substring(e,e+v.GetLength())==v)C=s.Substring(0,e)+m+s.Substring(e,s.GetLength());else{var L;if(o==0||!u)L=s.Substring(e,e+m.GetLength());else{var A=m.GetLength(),O=s.Substring(e,e+A),M=this.GetLength(O,u),_=this.GetLength(m,u);while(_>M&&A<=s.GetLength())A+=1,O=s.Substring(e,e+A),M=this.GetLength(O,u);L=s.Substring(e,e+A)}var E=L.IndexOf(v);E!=-1?C=s.Substring(0,e)+m+s.Substring(e+E,s.GetLength()):C=s.Substring(0,e)+m+s.Substring(e+L.GetLength(),s.GetLength())}p.Text=C,p.SetSelection=!0;if(this.isInputValid!=0||m.GetLength()>0)p.SelectionStart=e+m.GetLength(),p.SelectionEnd=p.SelectionStart;p.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=i,g.Type="invalidInput",p.EventInfo[0]=g}if(p.Text!=null&&a&&o!=0){var D=this.GetLength(p.Text.Substring(0,p.SelectionStart),u);if(D==o&&m!=""){var g=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");g!=null&&(p.EventInfo[1]=g.EventInfo,p.FocusType=g.FocusType,p.FocusExit=!0,p.SetSelection=!1)}}return p}return!1},r.prototype.TextBoxKeyUp=function(e,n,r,i,s){var o=new Object;this.IsKeyDown=!1,o.SelectionStart=t.Utility.GetSelectionStartPosition(e),o.SelectionEnd=o.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),this.systemEdit==1&&(this.systemEdit=!1,o.SystemEdit=!0);if(this.ctrlDelete||this.ctrlBackspace){var u;this.ctrlDelete?(u=o.SelectionStart,this.ctrlDelete=!1):this.ctrlBackspace&&(u=i,this.ctrlBackspace=!1),o.Text=s.Substring(0,r)+s.Substring(u,s.GetLength()),o.SelectionStart=o.SelectionEnd=r,o.SetSelection=!0}return o},r.prototype.TextBoxMouseDown=function(e,t){return this.isFocusing=!1,new Object},r.prototype.TextBoxMouseUp=function(e,n,r,i,s,o,u,a,f){var l=new Object;if(this.isFocusing){this.isFocusing=!1;if(a)return l}if(i==t.MouseButton.Left){if(this.isDblClick&&!t.Utility.GrapeCityTimeout){this.isDblClick=!1,this.isTriClick=!0;if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength()}else t.Utility.GetSelectionText(this.control.InputElement)!=""||!s?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):t.Utility.GetSelectionText(this.control.InputElement)==""?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),document.selection&&f.y<document.selection.createRange().offsetTop&&(l.SelectionStart-=2),l.SelectionEnd=l.SelectionStart);if(!t.Utility.IsIE()&&t.Utility.FuncKeysPressed.Ctrl)if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength();l.SelectionStart!=l.SelectionEnd&&(l.SetSelection=!0)}return l},r.prototype.GetLineEnds=function(e,r){var i=r,s=0,o="\r\n";if(!t.Utility.IsIE()||parseInt(n.browser.version)>=9)o="\n";var u=i.IndexOf(o),a=new Object;while(u!=-1){if(e>=s&&e<s+u+o.GetLength())return a.start=s,a.end=s+u,a;s=s+u+o.GetLength(),i=i.Substring(u+o.GetLength(),i.GetLength()),u=i.IndexOf(o)}return a.start=s,a.end=r.GetLength(),a},r.prototype.ShowContextMenu=function(e,n){var r=new Object;return r.SelectionStart=t.Utility.GetSelectionStartPosition(e),r.SelectionEnd=r.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),r},r.prototype.TextBoxDoubleClick=function(e,n,r){this.isDblClick=!0,t.Utility.GrapeCityTimeout=!1,window.setTimeout(function(){t.Utility.GrapeCityTimeout=!0},500);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),i},r.prototype.SelectStart=function(e,n,r){this.isTriClick&&(this.isTriClick=!1);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart,i},r.prototype.Copy=function(e,n,r){if(n!=r){if(n>r){var i=n;n=r,r=i}var s=e.Substring(n,r),o=!0;this.Owner&&(this.Owner.MultiLine===!1&&(s=t.BaseUIProcess.UpdateCrLfString(s,this.Owner.AcceptsCrLf)),o=this.Owner.UseClipboard),t.Utility.IsIE()?t.Utility.SetCopy(s,o):t.Utility.SetCopy(s,!1)}},r.prototype.TextBoxPaste=function(e,n,r,i,s,o,u,a,f,l,c,h,p){this.isInputValid=!0;var d=new Object,v=this.Owner?this.Owner.UseClipboard:!0;t.Utility.IsIE()||(v=!1);var m=h==null?t.Utility.GetPasteData(v):h;!p&&this.Owner&&this.Owner.MultiLine===!1&&(m=t.BaseUIProcess.UpdateCrLfString(m,this.Owner.AcceptsCrLf)),t.Utility.IsIE9OrLater()&&this.Owner&&this.Owner.MultiLine===!0&&(m=t.BaseUIProcess.FilterReturnChar(m));if(m==null)return d;this.FireClientEvent("OnBeforePaste");var g=this.FormatCheck(m,s,o),y=g,b;if(u!=0){var w=this.GetLength(r.Substring(Math.min(e,n),Math.max(e,n)),a);b=u-this.GetLength(r,a)+w,y=this.MaxLengthCheck(g,b,a)}if(f!=0&&c)if(f>=this.GetLinesCount(r,l)){var E=r.Substring(0,e),S=r.Substring(n,r.GetLength());if(this.PasswordMode){E=this.GetPasswordText(E,this.PasswordChar,c),S=this.GetPasswordText(S,this.PasswordChar,c);var x=this.GetPasswordText(y,this.PasswordChar,c);x=this.MaxLineCheck(E,S,x,f,l),y=y.Substring(0,x.GetLength())}else y=this.MaxLineCheck(E,S,y,f,l)}else y="";var T=Math.min(e,n),N=Math.max(e,n);if(y!=""||p===!0)d.Text=r.Substring(0,T)+y+r.Substring(N,r.GetLength()),d.SelectionStart=T+y.GetLength(),d.SelectionEnd=d.SelectionStart;d.SetSelection=!0,e!=n&&(d.DelInclude=!0,this.IsDelInclude=!0),d.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var C=new Object;C.Name=this.control.InvalidInputEvent,C.Args=m,C.Type="invalidInput",d.EventInfo[0]=C}if(d.Text!=null)var k=this.GetLength(d.Text.Substring(0,d.SelectionStart),a);else var k=0;if(u!=0&&k==u&&i&&y!=""){var C=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");C!=null&&(d.EventInfo[1]=C.EventInfo,d.FocusType=C.FocusType,d.FocusExit=!0,d.SetSelection=!1)}return this.FireClientEvent("OnPaste"),d},r.prototype.Cut=function(e,t,n){var r=new Object;return t!=n&&this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),t<n?(r.SelectionStart=t,r.Text=e.Substring(0,t)+e.Substring(n,e.GetLength())):(r.SelectionStart=n,r.Text=e.Substring(0,n)+e.Substring(t,e.GetLength())),r.SelectionEnd=r.SelectionStart,r.SetSelection=!0,r.Text!=e&&(r.DelInclude=!0,this.IsDelInclude=!0),t!=n&&this.FireClientEvent("OnCut"),r},r.prototype.TextBoxUndo=function(e,t,n,r,i,s,o){var u=new Object;return this.IsDelInclude?e!=t&&(u.Text=t,u.SelectionStart=s,u.SelectionEnd=o,u.SetSelection=!0,u.DelInclude=!0,u.Undo=!0):e!=n&&(u.Text=n,u.SelectionStart=r,u.SelectionEnd=i,u.SetSelection=!0,u.Undo=!0),this.StartPos=null,this.LastKey=null,u},r.prototype.Delete=function(e,t,n,r){var i=new Object;return n<r?(i.SelectionStart=n,i.Text=t.Substring(0,n)+t.Substring(r,t.GetLength())):(i.SelectionStart=r,i.Text=t.Substring(0,r)+t.Substring(n,t.GetLength())),i.SelectionEnd=i.SelectionStart,i.SetSelection=!0,i.Text!=t&&(i.DelInclude=!0,this.IsDelInclude=!0),i},r.prototype.TextBoxSelectAll=function(e){var t=new Object;return t.SelectionStart=0,t.SelectionEnd=e.GetLength(),t.SetSelection=!0,t},r.prototype.DragDrop=function(e,t,n,r,i,s,o,u,a,f){this.isInputValid=!0;var l=new Object,c=this.FormatCheck(e),h=c,p=0;i!=0&&(p=i-this.GetLength(f,s),h=this.MaxLengthCheck(c,p,s));if(o!=0&&a)if(o>=this.GetLinesCount(f,u)){var d=f.Substring(0,n),v=f.Substring(r,f.GetLength());if(this.PasswordMode){d=this.GetPasswordText(d,this.PasswordChar,a),v=this.GetPasswordText(v,this.PasswordChar,a);var m=this.GetPasswordText(h,this.PasswordChar,a);m=this.MaxLineCheck(d,v,m,o,u),h=m.Substring(0,h.GetLength())}else h=this.MaxLineCheck(d,v,h,o,u)}else h="";l.DropText=h,l.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=c,g.Type="invalidInput",l.EventInfo[0]=g}if(this.GetLength(c,s)>=p&&i!=0&&t&&h!=""){var g=new Object;this.KeyExitEvent!=""&&this.KeyExitEvent!=null&&(g.Name=this.KeyExitEvent,g.Args=new Object,g.Args.Key=9,g.Type="KeyExit"),l.EventInfo[1]=g}return l},r.prototype.TextBoxFocus=function(e,n,r,i,s,o){var u=new Object;this.isFocusing=!0,e===t.FocusType.Left?(u.SelectionStart=0,u.SelectionEnd=0):e===t.FocusType.Right&&(u.SelectionStart=r.GetLength(),u.SelectionEnd=r.GetLength());if(!s){if(e===t.FocusType.Click||e==t.FocusType.DragDrop)u.SelectionStart=t.Utility.GetSelectionStartPosition(n),u.SelectionEnd=u.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()}else o||(u.SelectionStart=0,u.SelectionEnd=r.GetLength());if(e!==t.FocusType.Click||s)u.SetSelection=!0;return u},r.prototype.MaxLengthCheck=function(e,t,n){var r="",i=0;if(e=="\r\n")t>=2&&(r=e);else if(n)for(var s=0;s<e.GetLength();s++){var o=e.Substring(s,s+1);o.length>=2?i+=2*o.length:this.Filter.IsFullWidth(o)?i+=2:i++;if(!(i<=t))break;r+=e.Substring(s,s+1)}else e.GetLength()<=t?r=e:r=e.Substring(0,t);var u=r.GetLength();return u!=0&&r.Substring(u-1,u)=="\r"&&(r=r.Substring(0,u-1)),r!=e&&(this.isInputValid=!1),r},r.prototype.MaxLineCheck=function(e,t,n,r,i){var s="",o=e+n+t,u=this.GetLinesCount(o,i);if(u<=r)s=n;else{var a=0,f=n.GetLength();do{var l=Math.floor((a+f)/2),c=n.Substring(0,l);o=e+c+t,u=this.GetLinesCount(o,i);if(u>r)f=l;else if(u<r)a=l;else if(u==r&&f>a+1)a=l;else if(u==r&&f==a+1)break}while(a<f);s=n.Substring(0,a)}return s!=n&&(this.isInputValid=!1),s},r.prototype.GetLinesCount=function(e,t){var r=1,i=t;if(e=="")return r;var s=this._testTextArea;if(this._testTextArea===undefined||this._testTextArea===null)this._testTextArea=n("<textarea/>"),this._testTextArea.css("visibility","hidden"),this._testTextArea.css("position","absolute"),this._testTextArea.css("left","-100000000px"),this._testTextArea.css("top","-100000000px"),this._testTextArea.attr("rows",1),this._testTextArea.appendTo(n(document.body)),s=this._testTextArea,i=!1;if(!i){var o=e,u=o,a=o.IndexOf("\r\n");r=1;while(a!=-1)u=u.replace("\r\n",""),r+=1,o=o.Substring(a+2,o.GetLength()),a=o.IndexOf("\r\n");o=u,a=o.IndexOf("\r");while(a!=-1)u=u.replace("\r",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\r");o=u,a=o.IndexOf("\n");while(a!=-1)u=u.replace("\n",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\n");return r}var f=e;f=f.replace(/\r\n/g,"\r"),f=f.replace(/\n/g,"\r");var a=f.IndexOf("\r");if(a!=-1){r=0;var l=f.Substring(0,a);return r+=this.GetLinesCount(l,t),f=f.Substring(a+1,f.GetLength()),r+=this.GetLinesCount(f,t),r}var c=n(this.control.InputElement);s.css("fontSize",c.css("fontSize")),s.css("fontFamily",c.css("fontFamily")),s.css("width",c.css("width")),s.css("borderWidth",c.css("borderWidth")),s.css("padding",c.css("padding")),s.css("wordWrap",c.css("wordWrap")),s.css("overflowY",c.css("overflowY"));if(s!=null){s.val(e),s=s.get(0);while(s.scrollHeight-s.clientHeight>1)s.rows++;return s.scrollTop=0,r=s.rows,s.rows>1&&(s.rows=1),r}},r.prototype.FormatCheck=function(e,t,n){this.Owner&&!this.Owner.MultiLine&&e&&(typeof e!="string"&&(e=e.toString()),e=e.replace(/[\r\n]/g,""));var r=this.Filter.CheckText(e),i=r.CheckedText;return this.isInputValid=r.IsInputValid,i},r.prototype.ListValidateCheck=function(e){var t=this.Filter.autoConvert;this.Filter.autoConvert=!1;var n=this.Filter.CheckText(e);return this.Filter.autoConvert=t,n.IsInputValid},r.prototype.GetLength=function(e,t){var n=0;if(t)for(var r=0;r<e.GetLength();r++){var i=e.Substring(r,r+1);i.length>=2?n+=2*i.length:this.Filter.IsFullWidth(i)?n+=2:n++}else n=e.GetLength();return n},r.prototype.TextBoxProcessBackSpace=function(e,t,n,r){var i=new Object;return this.systemEdit=!0,this.keyupResponse=!0,i.System=!0,i},r.prototype.GetRightWordPosition=function(e,t){if(e<t.GetLength()){var n=e,r=t.Substring(e,e+1),i=r;while(!(this.Filter.IsFormatSpace(i)&&!this.Filter.IsFormatSpace(r)||(r=="\r"||i=="\n")&&e!=n||(r=="	"||i=="	")&&e!=n)){n+=1;if(!(n<t.GetLength()))break;i=r,r=t.Substring(n,n+1)}return n}return e},r.prototype.DelOperation=function(e,t,n){this.IsDelInclude=!0;var r=Math.abs(n-t);switch(e){case 8:var i=!1;this.IsKeyDown?i=!0:(this.IsKeyDown=!0,this.CurStart=t-1);if(i){this.IsSerialDel=!0;break}this.CurStart==this.StartPos&&(this.IsSerialDel=!0,this.CurStart-=1);if(t!=n){if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}}else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}t-=1,this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 131080:case 196616:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65544:t!=n&&t<this.StartPos&&(this.StartPos-=r),this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65582:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}this.StartPos==t||this.StartPos==n?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 46:var s=null;this.LastKey==8&&(s=t,t-=1);if(this.StartPos==t||this.StartPos!=null&&Math.abs(this.StartPos-t)==1||this.StartPos==n)this.IsSerialDel=!0;else{this.IsSerialDel=!1;if(s!=null){this.StartPos=s;break}}this.StartPos=t;break;case 131118:if(t!=n)if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}t-=1,this.StartPos==t||t-this.StartPos==1?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t}this.LastKey=e},r.prototype.GetPasswordText=function(e,t,n){var r="";for(var i=0;i<e.GetLength();i++){var s=e.Substring(i,i+1);s!="\r"&&s!="\n"?r+=t:n&&(r+=s)}return r},r}(t.BaseUIProcess);t.GcTextBoxUIProcess=c;var h=function(){function e(e){this._hightlightIndex=-1,this._dataList=[],this._isDeleteItem=!1,this._isFocusOnList=!1,this._isMouseOnList=!1,this._owner=e;var t=5;this._maxItems=t,this._firstItemShowing=0,this._lastItemShowing=t-1,this._refreshElement(),this._createDropdown()}return e.prototype._refreshElement=function(){this._controlContainer=this._owner.GetContainer(),this._inputElement=this._owner.GetJQueryInputElement(),this._maxItems=this._owner.GetMaxHistoryCount(),this._inputElement&&this._inputElement.attr("autocomplete","off")},e.prototype._createDropdown=function(){var e=n("<div>");e.css({position:"absolute",zIndex:"999999",display:"none",backgroundColor:"white",border:"solid 1px black",overflowX:"hidden",overflowY:"auto"});var r=this;e.bind("focus",function(){r._isFocusOnList=!0,e.blur(),r._owner.SetInnerFocus(t.FocusType.ContextMenu)}),e.bind("mouseover",function(){r._isMouseOnList=!0}),e.bind("mouseout",function(){r._isMouseOnList=!1}),e.bind("contextmenu",function(e){e.preventDefault()}),this._dropDownElement=e},e.prototype.GetIsDeleteItem=function(){return this._isDeleteItem},e.prototype.SetIsDeleteItem=function(e){this._isDeleteItem=e},e.prototype.GetIsFocusOnList=function(){return this._isFocusOnList},e.prototype.SetIsFocusOnList=function(e){this._isFocusOnList=e},e.prototype.GetIsMouseOnList=function(){return this._isMouseOnList},e.prototype.ShowDropdown=function(){this._refreshElement(),this.IsVisible()&&this.HideDropdown(),this._dropDownElement.empty();var e;e=this._addDisplayItems();if(e===0)return;var r=t.Utility.GetElementPosition(this._controlContainer.get(0)).Left,i=t.Utility.GetElementPosition(this._controlContainer.get(0)).Top+this._controlContainer.outerHeight(),s=this._controlContainer.outerWidth(),o="";if(e>this._maxItems){var u=t.Utility.MeasureText("WHQ",this._dropDownElement.get(0).firstChild).Height;o=this._maxItems*(u+2)+"px"}var a="";t.Utility.IsTouchMouseDown==1&&(a=this._owner.GetTouchDropDownScale()+""),s-=2,this._dropDownElement.css("left",r+"px"),this._dropDownElement.css("top",i+"px"),this._dropDownElement.css("width",s+"px"),this._dropDownElement.css("display",""),t.Utility.SetZoomStyle(this._dropDownElement,a),this._dropDownElement.css("height",o),n("body").append(this._dropDownElement);var f=this;this._docClickListerner=function(){f.HideDropdown()},n(document).bind("click",this._docClickListerner)},e.prototype._addDisplayItems=function(){var e=this._inputElement.val(),r=[];for(var i=0;i<this._dataList.length;++i)this._dataList[i].substr(0,e.GetLength())==e&&this._dataList[i].GetLength()>e.GetLength()&&r.push(this._dataList[i]);var s=this,o=r.length>this._maxItems?this._maxItems:r.length;for(i=0;i<o;++i){var u=n("<div>");u.attr("index",i),u.css({fontFamily:t.Utility.GetOSDefaultFontFamily(),fontSize:"10pt",whiteSpace:"nowrap",padding:"1px"}),u.bind("mouseover",function(e){var t=e.target||e.srcElement;s.HighlightItem(parseInt(t.getAttribute("index").toString()))}),u.bind("click",function(){s._isFocusOnList=!1,s.SetValue(),s.HideDropdown()}),u.html(t.Utility.EncodingToHTML(r[i])),this._dropDownElement.append(u)}return o},e.prototype.HideDropdown=function(){this.IsVisible()&&(this._dropDownElement.remove(),this._dropDownElement.css("display","none"),n("document").unbind("click",this._docClickListerner),this._dropDownElement.empty(),this._isMouseOnList=!1,this._hightlightIndex=-1)},e.prototype.SetDataList=function(e){if(e===null||e===undefined)e=[];this._dataList=e},e.prototype.IsDataListEmpty=function(){return this._dataList.length===0},e.prototype.HighlightItem=function(e){this.SetHighlighItem(e)},e.prototype.SetHighlighItem=function(e){this._hightlightIndex!==-1&&(this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.backgroundColor="",this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.color=""),this._hightlightIndex=e,this._hightlightIndex!==-1&&(this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.color="white")},e.prototype.Highlight=function(e){var t=!1;e>0&&this._hightlightIndex==this._dropDownElement.get(0).childNodes.length-1?(this.SetHighlighItem(-1),t=!0):e<0&&this._hightlightIndex==0&&(this.SetHighlighItem(-1),t=!0);if(this._hightlightIndex===-1)t==0&&(e>0&&this.SetHighlighItem(0),e<0&&this.SetHighlighItem(this._dropDownElement.get(0).childNodes.length-1));else{var n;e>1&&this._firstItemShowing+this._maxItems-1!==this._hightlightIndex&&(e=this._firstItemShowing+this._maxItems-this._hightlightIndex),e<-1&&this._firstItemShowing!=this._hightlightIndex&&(e=this._firstItemShowing-this._hightlightIndex),e>0?n=this._hightlightIndex+e>=this._dropDownElement.get(0).childNodes.length?this._dropDownElement.get(0).childNodes.length-1:this._hightlightIndex+e:n=this._hightlightIndex+e<0?0:this._hightlightIndex+e,e>1&&(n-=1),this.SetHighlighItem(n)}},e.prototype.SetValue=function(){var e=this._dropDownElement.get(0).childNodes[this._hightlightIndex].innerHTML;e=t.Utility.DecodingFromHTML(e),this._owner.InternalSetText(e,!0),this._owner.SetInnerFocus(t.FocusType.ContextMenu);var n=this._inputElement.val().GetLength(),r=Math.abs(this._owner.SelectionEnd-this._owner.SelectionStart);r!=0?this._owner.InternalSetSelection(0,n):this._owner.InternalSetSelection(n,n)},e.prototype.ScrollCheck=function(){if(this._hightlightIndex!==-1){this._hightlightIndex>this._lastItemShowing&&(this._firstItemShowing=this._hightlightIndex-(this._maxItems-1),this._lastItemShowing=this._hightlightIndex),this._hightlightIndex<this._firstItemShowing&&(this._firstItemShowing=this._hightlightIndex,this._lastItemShowing=this._hightlightIndex+(this._maxItems-1));var e=t.Utility.MeasureText("WQH",this._dropDownElement.get(0).firstChild).Height+2;this._dropDownElement.get(0).scrollTop=this._firstItemShowing*e}},e.prototype.KeyDown=function(e){var n=e.keyCode,r={Shift:!1,Ctrl:!1,Alt:!1};e.shiftKey&&(r.Shift=!0),e.ctrlKey&&(r.Ctrl=!0),e.altKey&&(r.Alt=!0);var i=t.Key;switch(n){case i.Enter:if(this._hightlightIndex!==-1)return this.SetValue(),this.HideDropdown(),e.stopPropagation(),e.preventDefault(),!1;break;case i.Delete:if(this._hightlightIndex!==-1){var s=this._dropDownElement.get(0).childNodes[this._hightlightIndex].innerHTML;return this.HideDropdown(),this._owner.DeleteItem(s),this._isDeleteItem=!0,this._inputElement.focus(),this.IsVisible()||this.ShowDropdown(),e.stopPropagation(),e.preventDefault(),!1}break;case i.Escape:this.HideDropdown(),e.stopPropagation(),e.preventDefault();break;case i.Up:if(r.Alt)break;return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1),this.ScrollCheck()):this.ShowDropdown(),!1;case i.PageUp:return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1*this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1;case i.Tab:this.HideDropdown();break;case i.Down:if(r.Alt)break;return this.IsVisible()?(this.Highlight(1),this.ScrollCheck()):this.ShowDropdown(),!1;case i.PageDown:return this.IsVisible()?(this.Highlight(this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1}},e.prototype.KeyUp=function(e,n){if(n===!0){this.ShowDropdown();return}var r=e.keyCode,i=t.Key;switch(r){case i.Enter:break;case i.Escape:this.HideDropdown();break;case i.Up:case i.Down:break;default:this.ShowDropdown()}},e.prototype.IsVisible=function(){return this._dropDownElement.css("display")===""},e}();t.AutoComplete=h;var p=function(){function e(){this.DBCS_UpperAlphabet=2147483650,this.SBCS_UpperAlphabet=1073741825,this.DBCS_LowerAlphabet=2147483656,this.SBCS_LowerAlphabet=1073741828,this.DBCS_Number=2147483680,this.SBCS_Number=1073741840,this.DBCS_Binary=2147483776,this.SBCS_Binary=1073741888,this.DBCS_Hexadecimal=2147484160,this.SBCS_Hexadecimal=1073742080,this.DBCS_Symbol=2147485696,this.SBCS_Symbol=1073742848,this.DBCS_NumberSymbol=2147491840,this.SBCS_NumberSymbol=1073745920,this.DBCS_Katakana=2147516416,this.SBCS_Katakana=1073758208,this.DBCS_Space=2147614720,this.SBCS_Space=1073807360,this.TwoBytes=2148007936,this.FourBytes=2147745792,this.DBCS_ShiftJIS=2148532224,this.DBCS_JISX0208=2149580800,this.Emoji=4194304,this.IVS=8388608,this.DBCS_Hiragana=2164260864,this.Upper_SBCS_Katakana=1207959552,this.Upper_DBCS_Katakana=2415919104,this.Upper_DBCS_Hiragana=2684354560,this.All=3321888768,this.DBCS_All=2214592512,this.SBCS_All=1107296256,this.DBCS=2147483648,this.SBCS=1073741824}return e}(),d=function(){function e(e,n){this.charType=new p,this.format=n,this.includeFormat="",this.excludeFormat="",this.includeNormalChar="",this.excludeNormalChar="",this.allowTypes=this.charType.All,this.excludeTypes=this.charType.All,this.include=!0,this.autoConvert=e,this.charExInstance=t.CharProcess.CharEx,this.isInputValid=!0,this.ParseFormat(this.format)}return e.prototype.allowDBCS=function(){return!((this.allowTypes&this.charType.DBCS_All)!=0^this.include)},e.prototype.allowSBCS=function(){return!((this.allowTypes&this.charType.SBCS_All)!=0^this.include)},e.prototype.GetIncludeFormat=function(e){if(e==null||e.GetLength()==0)return"";var t="";for(var n=0;n<e.GetLength();n++){var r=e.Substring(n,n+1);if(r=="\\"){if(n==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";t+=r,t+=e.Substring(n+1,n+2),n++}else{if(r=="^")return t;t+=r}}return t},e.prototype.GetExcludeFormat=function(e){if(e==null||e.GetLength()==0)return"";var t=0,n="";for(var r=0;r<e.GetLength();r++){var i=e.Substring(r,r+1);if(i=="\\"){if(r==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";t!=0&&(n+=i,n+=e.Substring(r+1,r+2)),r++}else if(i=="^"){t++;if(t>1)throw"Exception.TextFilter.Format.DuplicatedChar"}else t!=0&&(n+=i)}return t==1&&(n="^"+n),n},e.prototype.ParseIncludeFormat=function(e){if(e==null||e.GetLength()==0){this.allowTypes=this.charType.All,this.includeNormalChar="",this.includeFormat="";return}this.allowTypes=0,this.includeNormalChar="";for(var t=0;t<e.GetLength();t++)switch(e.charCodeAt(t)){case 94:break;case 92:if(t==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.includeNormalChar=this.includeNormalChar+e.Substring(t+1,t+2),t++;break;case 65313:(this.allowTypes&this.charType.DBCS_UpperAlphabet)!=(this.charType.DBCS_UpperAlphabet|0)&&(this.allowTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.allowTypes&this.charType.SBCS_UpperAlphabet)!=this.charType.SBCS_UpperAlphabet&&(this.allowTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.allowTypes&this.charType.DBCS_LowerAlphabet)!=(this.charType.DBCS_LowerAlphabet|0)&&(this.allowTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.allowTypes&this.charType.SBCS_LowerAlphabet)!=this.charType.SBCS_LowerAlphabet&&(this.allowTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.allowTypes&this.charType.DBCS_Katakana)!=(this.charType.DBCS_Katakana|0)&&(this.allowTypes|=this.charType.DBCS_Katakana);break;case 75:(this.allowTypes&this.charType.SBCS_Katakana)!=this.charType.SBCS_Katakana&&(this.allowTypes|=this.charType.SBCS_Katakana);break;case 65305:(this.allowTypes&this.charType.DBCS_Number)!=(this.charType.DBCS_Number|0)&&(this.allowTypes|=this.charType.DBCS_Number);break;case 57:(this.allowTypes&this.charType.SBCS_Number)!=this.charType.SBCS_Number&&(this.allowTypes|=this.charType.SBCS_Number);break;case 65283:(this.allowTypes&this.charType.DBCS_NumberSymbol)!=(this.charType.DBCS_NumberSymbol|0)&&(this.allowTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.allowTypes&this.charType.SBCS_NumberSymbol)!=this.charType.SBCS_NumberSymbol&&(this.allowTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.allowTypes&this.charType.DBCS_Symbol)!=(this.charType.DBCS_Symbol|0)&&(this.allowTypes|=this.charType.DBCS_Symbol);break;case 64:(this.allowTypes&this.charType.SBCS_Symbol)!=this.charType.SBCS_Symbol&&(this.allowTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.allowTypes&this.charType.DBCS_Binary)!=(this.charType.DBCS_Binary|0)&&(this.allowTypes|=this.charType.DBCS_Binary);break;case 66:(this.allowTypes&this.charType.SBCS_Binary)!=this.charType.SBCS_Binary&&(this.allowTypes|=this.charType.SBCS_Binary);break;case 65336:(this.allowTypes&this.charType.DBCS_Hexadecimal)!=(this.charType.DBCS_Hexadecimal|0)&&(this.allowTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.allowTypes&this.charType.SBCS_Hexadecimal)!=this.charType.SBCS_Hexadecimal&&(this.allowTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.allowTypes&this.charType.DBCS_Hiragana)!=(this.charType.DBCS_Hiragana|0)&&(this.allowTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.allowTypes&this.charType.DBCS_All)!=(this.charType.DBCS_All|0)&&(this.allowTypes|=this.charType.DBCS_All);break;case 65325:(this.allowTypes&this.charType.DBCS_ShiftJIS)!=(this.charType.DBCS_ShiftJIS|0)&&(this.allowTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.allowTypes&this.charType.DBCS_JISX0208)!=(this.charType.DBCS_JISX0208|0)&&(this.allowTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.allowTypes&this.charType.SBCS_All)!=this.charType.SBCS_All&&(this.allowTypes|=this.charType.SBCS_All);break;case 78:(this.allowTypes&this.charType.Upper_SBCS_Katakana)!=this.charType.Upper_SBCS_Katakana&&(this.allowTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.allowTypes&this.charType.Upper_DBCS_Katakana)!=this.charType.Upper_DBCS_Katakana&&(this.allowTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.allowTypes&this.charType.Upper_DBCS_Hiragana)!=this.charType.Upper_DBCS_Hiragana&&(this.allowTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.allowTypes&this.charType.DBCS_Space)!=this.charType.DBCS_Space&&(this.allowTypes|=this.charType.DBCS_Space);break;case 83:(this.allowTypes&this.charType.SBCS_Space)!=this.charType.SBCS_Space&&(this.allowTypes|=this.charType.SBCS_Space);break;case 65332:(this.allowTypes&this.charType.FourBytes)!=this.charType.FourBytes&&(this.allowTypes|=this.charType.FourBytes);break;case 65316:(this.allowTypes&this.charType.TwoBytes)!=this.charType.TwoBytes&&(this.allowTypes|=this.charType.TwoBytes);break;case 65317:this.allowTypes|=this.charType.Emoji;break;case 65334:this.allowTypes|=this.charType.IVS;break;default:this.includeNormalChar=this.includeNormalChar+e.Substring(t,t+1)}},e.prototype.ParseExcludeFormat=function(e){if(e==null||e.GetLength()==0){this.excludeTypes=this.excludeTypes.All,this.excludeNormalChar="",this.excludeFormat="";return}if(e=="^"){this.excludeTypes=this.charType.All,this.excludeNormalChar="",this.excludeFormat="^";return}this.excludeTypes=0,this.excludeNormalChar="";for(var t=0;t<e.GetLength();t++)switch(e.charCodeAt(t)){case 94:break;case 92:if(t==e.GetLength()-1)throw"Exception.TextFilter.Format.Invalid";this.excludeNormalChar=this.excludeNormalChar+e.Substring(t+1,t+2),t++;break;case 65313:(this.excludeTypes&this.charType.DBCS_UpperAlphabet)!=(this.charType.DBCS_UpperAlphabet|0)&&(this.excludeTypes|=this.charType.DBCS_UpperAlphabet);break;case 65:(this.excludeTypes&this.charType.SBCS_UpperAlphabet)!=this.charType.SBCS_UpperAlphabet&&(this.excludeTypes|=this.charType.SBCS_UpperAlphabet);break;case 65345:(this.excludeTypes&this.charType.DBCS_LowerAlphabet)!=(this.charType.DBCS_LowerAlphabet|0)&&(this.excludeTypes|=this.charType.DBCS_LowerAlphabet);break;case 97:(this.excludeTypes&this.charType.SBCS_LowerAlphabet)!=this.charType.SBCS_LowerAlphabet&&(this.excludeTypes|=this.charType.SBCS_LowerAlphabet);break;case 65323:(this.excludeTypes&this.charType.DBCS_Katakana)!=(this.charType.DBCS_Katakana|0)&&(this.excludeTypes|=this.charType.DBCS_Katakana);break;case 75:(this.excludeTypes&this.charType.SBCS_Katakana)!=this.charType.SBCS_Katakana&&(this.excludeTypes|=this.charType.SBCS_Katakana);break;case 65305:if((this.excludeTypes&this.charType.DBCS_Number)==(this.charType.DBCS_Number|0))return;this.excludeTypes|=this.charType.DBCS_Number;break;case 57:(this.excludeTypes&this.charType.SBCS_Number)!=this.charType.SBCS_Number&&(this.excludeTypes|=this.charType.SBCS_Number);break;case 65283:(this.excludeTypes&this.charType.DBCS_NumberSymbol)!=(this.charType.DBCS_NumberSymbol|0)&&(this.excludeTypes|=this.charType.DBCS_NumberSymbol);break;case 35:(this.excludeTypes&this.charType.SBCS_NumberSymbol)!=this.charType.SBCS_NumberSymbol&&(this.excludeTypes|=this.charType.SBCS_NumberSymbol);break;case 65312:(this.excludeTypes&this.charType.DBCS_Symbol)!=(this.charType.DBCS_Symbol|0)&&(this.excludeTypes|=this.charType.DBCS_Symbol);break;case 64:(this.excludeTypes&this.charType.SBCS_Symbol)!=this.charType.SBCS_Symbol&&(this.excludeTypes|=this.charType.SBCS_Symbol);break;case 65314:(this.excludeTypes&this.charType.DBCS_Binary)!=(this.charType.DBCS_Binary|0)&&(this.excludeTypes|=this.charType.DBCS_Binary);break;case 66:(this.excludeTypes&this.charType.SBCS_Binary)!=this.charType.SBCS_Binary&&(this.excludeTypes|=this.charType.SBCS_Binary);break;case 65336:(this.excludeTypes&this.charType.DBCS_Hexadecimal)!=(this.charType.DBCS_Hexadecimal|0)&&(this.excludeTypes|=this.charType.DBCS_Hexadecimal);break;case 88:(this.excludeTypes&this.charType.SBCS_Hexadecimal)!=this.charType.SBCS_Hexadecimal&&(this.excludeTypes|=this.charType.SBCS_Hexadecimal);break;case 65322:(this.excludeTypes&this.charType.DBCS_Hiragana)!=(this.charType.DBCS_Hiragana|0)&&(this.excludeTypes|=this.charType.DBCS_Hiragana);break;case 65338:(this.excludeTypes&this.charType.DBCS_All)!=(this.charType.DBCS_All|0)&&(this.excludeTypes|=this.charType.DBCS_All);break;case 65325:(this.excludeTypes&this.charType.DBCS_ShiftJIS)!=(this.charType.DBCS_ShiftJIS|0)&&(this.excludeTypes|=this.charType.DBCS_ShiftJIS);break;case 65321:(this.excludeTypes&this.charType.DBCS_JISX0208)!=(this.charType.DBCS_JISX0208|0)&&(this.excludeTypes|=this.charType.DBCS_JISX0208);break;case 72:(this.excludeTypes&this.charType.SBCS_All)!=this.charType.SBCS_All&&(this.excludeTypes|=this.charType.SBCS_All);break;case 78:(this.excludeTypes&this.charType.Upper_SBCS_Katakana)!=this.charType.Upper_SBCS_Katakana&&(this.excludeTypes|=this.charType.Upper_SBCS_Katakana);break;case 65326:(this.excludeTypes&this.charType.Upper_DBCS_Katakana)!=this.charType.Upper_DBCS_Katakana&&(this.excludeTypes|=this.charType.Upper_DBCS_Katakana);break;case 65319:(this.excludeTypes&this.charType.Upper_DBCS_Hiragana)!=this.charType.Upper_DBCS_Hiragana&&(this.excludeTypes|=this.charType.Upper_DBCS_Hiragana);break;case 65331:(this.excludeTypes&this.charType.DBCS_Space)!=this.charType.DBCS_Space&&(this.excludeTypes|=this.charType.DBCS_Space);break;case 83:(this.excludeTypes&this.charType.SBCS_Space)!=this.charType.SBCS_Space&&(this.excludeTypes|=this.charType.SBCS_Space);break;case 65332:(this.excludeTypes&this.charType.FourBytes)!=this.charType.FourBytes&&(this.excludeTypes|=this.charType.FourBytes);break;case 65316:(this.excludeTypes&this.charType.TwoBytes)!=this.charType.TwoBytes&&(this.excludeTypes|=this.charType.TwoBytes);break;case 65317:this.excludeTypes|=this.charType.Emoji;break;case 65334:this.excludeTypes|=this.charType.IVS;break;default:this.excludeNormalChar=this.excludeNormalChar+e.Substring(t,t+1)}},e.prototype.ParseFormat=function(e){this.includeFormat=this.GetIncludeFormat(e),this.excludeFormat=this.GetExcludeFormat(e),this.ParseIncludeFormat(this.includeFormat),this.ParseExcludeFormat(this.excludeFormat)},e.prototype.IsValidProcess=function(e,t,n){if(n.IndexOf(e)!=-1)return!0;if(e=="	"||e=="\r"||e=="\n")return!0;if(t==0)return!1;var r=!1;if(t==this.charType.All)return!0;if((t&this.charType.Emoji)==(this.charType.Emoji|0)&&this.IsEmoji(e))return!0;if((t&this.charType.IVS)==(this.charType.IVS|0)&&this.IsIVS(e))return!0;if((t&this.charType.FourBytes)==(this.charType.FourBytes|0)&&this.IsFourBytes(e))return!0;if(e.GetLength()==1&&e.length>1)return!1;if((t&this.charType.DBCS_ShiftJIS)==(this.charType.DBCS_ShiftJIS|0)&&this.IsShiftJIS(e))return!0;if(this.charExInstance.IsFullWidth(e)){if((t&this.charType.DBCS)!=(this.charType.DBCS|0))return!1;if((t&this.charType.DBCS_All)==(this.charType.DBCS_All|0)&&e!="　")r=!0;else if((t&this.charType.DBCS_LowerAlphabet)==(this.charType.DBCS_LowerAlphabet|0)&&this.IsLower(e))r=!0;else if((t&this.charType.DBCS_UpperAlphabet)==(this.charType.DBCS_UpperAlphabet|0)&&this.IsUpper(e))r=!0;else if((t&this.charType.DBCS_Number)==(this.charType.DBCS_Number|0)&&this.IsNumber(e))r=!0;else if((t&this.charType.DBCS_Binary)==(this.charType.DBCS_Binary|0)&&this.IsBinary(e))r=!0;else if((t&this.charType.DBCS_Hexadecimal)==(this.charType.DBCS_Hexadecimal|0)&&this.IsHex(e))r=!0;else if((t&this.charType.DBCS_Symbol)==(this.charType.DBCS_Symbol|0)&&this.IsSymbol(e))r=!0;else if((t&this.charType.DBCS_NumberSymbol)==(this.charType.DBCS_NumberSymbol|0)&&this.IsNumberSymbol(e))r=!0;else if((t&this.charType.DBCS_Katakana)==(this.charType.DBCS_Katakana|0)&&this.IsKatakana(e)){var i=this.IsHiragana(e);i?this.include?r=!0:r=(t&this.charType.DBCS_Hiragana)==(this.charType.DBCS_Hiragana|0):r=!0}else if((t&this.charType.DBCS_Hiragana)==(this.charType.DBCS_Hiragana|0)&&this.IsHiragana(e)){var i=this.IsKatakana(e);i?this.include?r=!0:r=(t&this.charType.DBCS_Katakana)==(this.charType.DBCS_Katakana|0):r=!0}else(t&this.charType.DBCS_JISX0208)==(this.charType.DBCS_JISX0208|0)&&this.IsJISX0208(e)?r=!0:(t&this.charType.Upper_DBCS_Katakana)==(this.charType.Upper_DBCS_Katakana|0)&&this.IsKatakana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.Upper_DBCS_Hiragana)==(this.charType.Upper_DBCS_Hiragana|0)&&this.IsHiragana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.DBCS_Space)==(this.charType.DBCS_Space|0)&&this.IsFormatSpace(e)?r=!0:(t&this.charType.FourBytes)==(this.charType.FourBytes|0)&&this.IsFourBytes(e)?r=!0:(t&this.charType.TwoBytes)==(this.charType.TwoBytes|0)&&!this.IsFourBytes(e)&&e!="　"&&(r=!0)}else{if((t&this.charType.SBCS)!=this.charType.SBCS)return!1;(t&this.charType.SBCS_All)==this.charType.SBCS_All&&e!=" "?r=!0:(t&this.charType.SBCS_LowerAlphabet)==this.charType.SBCS_LowerAlphabet&&this.IsLower(e)?r=!0:(t&this.charType.SBCS_UpperAlphabet)==this.charType.SBCS_UpperAlphabet&&this.IsUpper(e)?r=!0:(t&this.charType.SBCS_Number)==this.charType.SBCS_Number&&this.IsNumber(e)?r=!0:(t&this.charType.SBCS_Binary)==this.charType.SBCS_Binary&&this.IsBinary(e)?r=!0:(t&this.charType.SBCS_Hexadecimal)==this.charType.SBCS_Hexadecimal&&this.IsHex(e)?r=!0:(t&this.charType.SBCS_Symbol)==this.charType.SBCS_Symbol&&this.IsSymbol(e)?r=!0:(t&this.charType.SBCS_NumberSymbol)==this.charType.SBCS_NumberSymbol&&this.IsNumberSymbol(e)?r=!0:(t&this.charType.SBCS_Katakana)==this.charType.SBCS_Katakana&&this.IsKatakana(e)?r=!0:(t&this.charType.Upper_SBCS_Katakana)==this.charType.Upper_SBCS_Katakana&&this.IsKatakana(e)&&this.IsUpperKana(e)?r=!0:(t&this.charType.SBCS_Space)==this.charType.SBCS_Space&&this.IsFormatSpace(e)&&(r=!0)}return r},e.prototype.IsIncludeValid=function(e){return this.IsValidProcess(e,this.allowTypes,this.includeNormalChar)},e.prototype.IsExcludeValid=function(e){return this.IsValidProcess(e,this.excludeTypes,this.excludeNormalChar)},e.prototype.IsValid=function(e){if(this.excludeFormat!=""){if(!!this.IsExcludeValid(e))return!1;if(this.includeFormat!="")return this.IsIncludeValid(e)}else if(this.includeFormat!="")return this.IsIncludeValid(e);return!0},e.prototype.IsFormatSpace=function(e){return e==" "||e=="　"?!0:!1},e.prototype.IsFourBytes=function(e){var n=t.CharProcess.CharEx,r=e.Substring(0,1);if(r.length>1)for(var i=0;i<r.length;i++)if(n.IsSurrogate(r[i]))return!0;return!1},e.prototype.IsUpper=function(e){return this.charExInstance.IsUpper(e)},e.prototype.IsLower=function(e){return this.charExInstance.IsLower(e)},e.prototype.IsNumber=function(e){return this.charExInstance.IsDigit(e)},e.prototype.IsBinary=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,e=="0"||e=="1"},e.prototype.IsHex=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,e=="A"||e=="B"||e=="C"||e=="D"||e=="E"||e=="F"||e=="a"||e=="b"||e=="c"||e=="d"||e=="e"||e=="f"||this.IsDigit(e)},e.prototype.IsSymbol=function(e){return this.charExInstance.IsHalfWidthSymbol(e)||this.charExInstance.IsFullWidthSymbol(e)},e.prototype.IsNumberSymbol=function(e){return e=this.IsFullWidth(e)?this.ToHalfWidth(e):e,this.IsDigit(e)||e=="+"||e=="-"||e=="$"||e=="%"||e=="\\"||e==","||e=="."},e.prototype.IsKatakana=function(e){return this.charExInstance.IsKatakana(e)},e.prototype.IsHiragana=function(e){return this.charExInstance.IsHiragana(e)},e.prototype.IsShiftJIS=function(e){return this.charExInstance.IsShiftJIS(e)},e.prototype.IsJISX0208=function(e){return this.charExInstance.IsJISX0208(e)},e.prototype.IsEmoji=function(e){var t={};return!1},e.prototype.IsIVS=function(e){var t={};return!1},e.prototype.IsDBCS=function(e){return this.IsFullWidth(e)},e.prototype.IsSBCS=function(e){return!this.IsFullWidth(e)},e.prototype.IsFullWidth=function(e){return this.charExInstance.IsFullWidth(e)},e.prototype.IsSurrogatePair=function(e){return this.charExInstance.IsSurrogatePair(e)},e.prototype.ToHalfWidth=function(e){return this.charExInstance.ToHalfWidth(e)},e.prototype.IsDigit=function(e){return this.charExInstance.IsDigit(e)},e.prototype.IsUpperKana=function(e){return this.charExInstance.IsUpperKana(e)},e.prototype.CheckValidSpace=function(e){return e==" "&&(this.allowTypes&this.charType.SBCS_Space)==(this.charType.SBCS_Space|0)?!0:e=="　"&&(this.allowTypes&this.charType.DBCS_Space)==(this.charType.DBCS_Space|0)?!0:!1},e.prototype.Check=function(e,t){var n;t!=null?n=e.Substring(t,t+1):n=e;var r=this.IsValid(n);return r?n:this.autoConvert?t!=null?this.Convert(e,t):this.Convert(n):""},e.prototype.CheckText=function(e){var t=e.GetLength(),n={IsInputValid:!0,CheckedText:""};for(var r=0;r<t;){var i=e.Substring(r,r+1);if(i!="	"&&i!="\r"&&i!="\n"){var s=this.Check(e,r);s.index!=null?(r=s.index,i=s.strValue):(i=s,r++),i==""&&(n.IsInputValid=!1)}else r++;n.CheckedText+=i}return n},e.prototype.Convert=function(e,t){var n;t==null?n=e:n=e.Substring(t,t+1);var r=!1;if(this.charExInstance.IsAlphabet(n)){var i=this.charExInstance.IsLower(n)?n.toUpperCase():n.toLowerCase();return r=this.IsValid(i),r?i:(n=this.charExInstance.IsFullWidth(n)?this.charExInstance.ToHalfWidth(n):this.charExInstance.ToFullWidth(n).text,r=this.IsValid(n),r?n:(i=this.charExInstance.IsFullWidth(i)?this.charExInstance.ToHalfWidth(i):this.charExInstance.ToFullWidth(i).text,r=this.IsValid(i),r?i:""))}if(this.charExInstance.IsHiragana(n)){if(this.charExInstance.IsLowerKana(n)){var s=this.charExInstance.ToUpperKana(n);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(n)){var o=this.charExInstance.ToLowerKana(n);r=this.IsValid(o);if(r)return o}var i=this.charExInstance.ToKatakana(n);r=this.IsValid(i);if(r)return i;if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}var u=this.charExInstance.ToHalfWidthEx(i);r=this.IsValid(u);if(r)return u;if(this.charExInstance.IsLowerKana(u)){u=this.charExInstance.ToUpperKana(u),r=this.IsValid(u);if(r)return u}else if(this.charExInstance.HasLowerKana(u)){u=this.charExInstance.ToLowerKana(u),r=this.IsValid(u);if(r)return u}return""}if(this.charExInstance.IsKatakana(n)){if(this.charExInstance.IsLowerKana(n)){var s=this.charExInstance.ToUpperKana(n);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(n)){var o=this.charExInstance.ToLowerKana(n);r=this.IsValid(o);if(r)return o}var a=!1,i=n;if(this.charExInstance.IsFullWidth(n)){var f=this.charExInstance.ToHalfWidthEx(n);if(f.GetLength()>0){r=this.IsValid(f);if(r)return f}if(this.charExInstance.IsLowerKana(f)){f=this.charExInstance.ToUpperKana(f),r=this.IsValid(f);if(r)return f}else if(this.charExInstance.HasLowerKana(f)){f=this.charExInstance.ToLowerKana(f),r=this.IsValid(f);if(r)return f}}else{if(t==null){i=this.charExInstance.ToFullWidth(n).text;if(!this.charExInstance.IsKatakana(i))return"";r=this.IsValid(i);if(r)return i}else{if(t+1<e.GetLength()){var l=this.charExInstance.ToFullWidth(e.Substring(t,t+2));i=l.text,a=l.processedAll}else i=this.charExInstance.ToFullWidth(n).text;if(!this.charExInstance.IsKatakana(i))return"";r=this.IsValid(i);if(r)return t++,a&&t++,{index:t,strValue:i}}if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}}i=this.charExInstance.ToHiragana(i),r=this.IsValid(i);if(r){if(t!=null){t++,a&&t++;var c={index:t,strValue:i};return i=="ゔ"&&(a?c.strValue="う゛":c.strValue=""),c}return i=="ゔ"?"":i}if(this.charExInstance.IsLowerKana(i)){var s=this.charExInstance.ToUpperKana(i);r=this.IsValid(s);if(r)return s}else if(this.charExInstance.HasLowerKana(i)){var o=this.charExInstance.ToLowerKana(i);r=this.IsValid(o);if(r)return o}}return n=this.charExInstance.IsFullWidth(n)?this.charExInstance.ToHalfWidth(n):this.charExInstance.ToFullWidth(n).text,r=this.IsValid(n),r?n:""},e}();t.TextFilter=d})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={})),define("wijmo.wijinputtext",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(){function e(){this.wijCSS={superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.initSelector=":jqmData(role='wijsuperpanel')",this.allowResize=!1,this.autoRefresh=!1,this.animationOptions={queue:!1,disabled:!1,duration:250,easing:undefined},this.hScrollerActivating=null,this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.keyboardSupport=!1,this.keyDownInterval=100,this.mouseWheelSupport=!0,this.bubbleScrollingEvent=!0,this.resizableOptions={handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},this.resized=null,this.dragStop=null,this.painted=null,this.scrolling=null,this.scroll=null,this.scrolled=null,this.showRounder=!0,this.vScrollerActivating=null,this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.customScrolling=!1,this.listenContentScroll=!1}return e}(),i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.destroy=function(){},t.prototype.needToScroll=function(e){},t.prototype.scrollChildIntoView=function(e){},t.prototype.hScrollTo=function(e,t){},t.prototype.vScrollTo=function(e,t){},t.prototype.scrollPxToValue=function(e,t){},t.prototype.scrollTo=function(e,t,n){},t.prototype.refresh=function(){},t.prototype.paintPanel=function(e){},t.prototype.getContentElement=function(){},t}(e.wijmoWidget);t.wijsuperpanel=i;var s;if(!n.support.isTouchEnabled||!n.support.isTouchEnabled()){var o="wijmo-wijsuperpanel-handle",u="wijmo-wijsuperpanel-hbarcontainer",a="wijmo-wijsuperpanel-vbarcontainer",f="",l="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",c="<div class='wijmo-wijsuperpanel-hbarcontainer {superpanelHBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {superpanelHBarbuttonLeft} {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {superpanelHBarbuttonRight} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",h="<div class='wijmo-wijsuperpanel-vbarcontainer {superpanelVBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {superpanelVBarbuttonTop} {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {superpanelVBarbuttonBottom} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",p="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonleft {superpanelButtonLeft}'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonright {superpanelButtonRight}'><span class='{icon} {iconCaratRight}'></span></div>",d="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton}  wijmo-wijsuperpanel-buttontop {superpanelButtonTop}'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonbottom {superpanelButtonBottom}'><span class='{icon} {iconCaratDown}'> </span></div>";i.prototype=n.extend(!0,{},n.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(e,t){var r=this,i=r.options,s=r._fields(),o=s.hbarDrag,u=s.vbarDrag,a=s.resizer;e==="animationOptions"?t=n.extend(i.animationOptions,t):e==="hScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoHLarge=!1),t=n.extend(i.hScroller,t),r.refresh()):e==="vScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoVLarge=!1),t=n.extend(i.vScroller,t),r.refresh()):e==="resizableOptions"&&(t=n.extend(r.resizableOptions,t)),n.Widget.prototype._setOption.apply(r,arguments),n.isPlainObject(t)&&(r.options[e]=t);switch(e){case"allowResize":r._initResizer();break;case"disabled":t?(o!==undefined&&o.draggable("disable"),u!==undefined&&u.draggable("disable"),a!==undefined&&a.resizable("disable")):(o!==undefined&&o.draggable("enable"),u!==undefined&&u.draggable("enable"),a!==undefined&&a.resizable("enable"));break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,s,r.element,i)}return r},_create:function(){var e=this,t=e.options;t.vScroller.dir="v",t.hScroller.dir="h",e._initMarkup(),e.paintPanel(),e._initResizer(),e.options.disabled&&e.disable(),e._detectAutoRefresh(),t.listenContentScroll&&e._listenContentScroll(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver(),e.refresh()},"wijsuperpanel")},_initMarkup:function(){var e=this.options.wijCSS,t=/\{(\w+?)\}/ig,n=function(t,n){return e[n]};f=e.stateActive,c=c.replace(t,n),h=h.replace(t,n),p=p.replace(t,n),d=d.replace(t,n)},_detectAutoRefresh:function(){var e=this,t=n.wijmo.wijsuperpanel.panels;t===undefined&&(t=[],n.wijmo.wijsuperpanel.panels=t),t.push(e),e.options.autoRefresh&&(n.wijmo.wijsuperpanel.setAutoRefreshInterval||(n.wijmo.wijsuperpanel.setAutoRefreshInterval=e._setAutoRefreshInterval,n.wijmo.wijsuperpanel.setAutoRefreshInterval()))},_setAutoRefreshInterval:function(){var e=n.wijmo.wijsuperpanel.autoRereshInterval,t=n.wijmo.wijsuperpanel.panels,r;r=window.setInterval(function(){window.clearInterval(r);var e=t.length,i=!1,s,o,u,a,f,l;for(s=0;s<e;s++)o=t[s],u=o.element[0],a=o.options.autoRefresh,a&&(i=!0),f=o.getContentElement(),l=o._paintedMark,a&&f.is(":visible")&&(l===undefined||l.width!==f[0].offsetWidth||l.height!==f[0].offsetHeight||l.mainWidth!==u.offsetWidth||l.mainHeight!==u.offsetHeight)&&o.paintPanel();i&&window.setTimeout(n.wijmo.wijsuperpanel.setAutoRefreshInterval,0)},e===undefined?500:e)},destroy:function(){var e=this,t=e._fields(),r=e.element,i,s,o=e.options.wijCSS;n.wijmo.wijsuperpanel.panels=n.grep(n.wijmo.wijsuperpanel.panels,function(t){return t!==e},!1);if(!t.initialized)return;e._radiusKey&&e.element.css(e._radiusKey,""),t.intervalID!==undefined&&(window.clearInterval(t.intervalID),t.intervalID=undefined),t.resizer!==undefined&&t.resizer.resizable("destroy"),t.hbarContainer!==undefined&&(t.hbarDrag.remove(),t.hbarContainer.unbind("."+e.widgetName)),t.vbarContainer!==undefined&&(t.vbarDrag.remove(),t.vbarContainer.unbind("."+e.widgetName)),r.unbind("."+e.widgetName),t.contentWrapper.unbind("."+e.widgetName),i=t.stateContainer.find(">.wijmo-wijsuperpanel-button"),i.unbind("."+e.widgetName),s=t.templateWrapper,s.contents().each(function(e,t){r.append(t)}),t.stateContainer.remove(),t.tabindex&&r.removeAttr("tabindex"),r.removeClass(["wijmo-wijsuperpanel",o.widget,o.content,o.cornerAll].join(" ")),n.Widget.prototype.destroy.apply(e,arguments)},_fields:function(){var e=this,t=e.element,n=e.widgetName+"-fields",r=e._fieldsStore;return r===undefined&&(r={},t.data(n,r),e._fieldsStore=r),r},_hasMode:function(e,t){var r=e.scrollMode.split(",");return r=n.map(r,function(e){return n.trim(e).toLowerCase()}),n.inArray(t.toLowerCase(),r)>-1},_bindElementEvents:function(e,t,n,r){var i=e._hasMode(r.hScroller,"edge"),s=e._hasMode(r.vScroller,"edge"),o=e.widgetName;i||s?e._mousemoveBind===undefined&&(e._mousemoveBind=!0,n.bind("mousemove."+o,e,e._contentMouseMove),n.bind("mouseleave."+o,null,function(){e._clearInterval()})):(n.unbind("mousemove",e._contentMouseMove),e._mousemoveBind=undefined),r.mouseWheelSupport?e._mouseWheelBind===undefined&&(e._mouseWheelBind=!0,n.bind("mousewheel."+o,e,e._panelMouseWheel)):(n.unbind("mousewheel",e._panelMouseWheel),e._mouseWheelBind=undefined),r.keyboardSupport?e._keyboardBind===undefined&&(e._keyboardBind=!0,n.bind("keydown."+o,e,e._panelKeyDown)):(n.unbind("keydown",e._panelKeyDown),e._keyboardBind=undefined)},_dragStop:function(e,t,n){var r={dragHandle:n};t._trigger("dragStop",e,r)},_contentMouseMove:function(e){if(e.data.options.disabled)return;var t=e.data,r=t.options,i=r.hScroller,s=r.vScroller,o=n(e.currentTarget),u=t._fields(),a=t._hasMode(i,"edge"),f=t._hasMode(s,"edge"),l={X:e.pageX,Y:e.pageY},c=o.offset(),h=c.left,p=c.top,d=i.hoverEdgeSpan,v=s.hoverEdgeSpan,m=o.innerHeight(),g=o.innerWidth(),y="";h=l.X-h,p=l.Y-p,t._clearInterval(),a&&(h<d&&(y="left"),h>g-d&&(y="right")),f&&(p<v&&(y="top"),p>m-v&&(y="bottom")),t._setScrollingInterval(u,y,t,!1)},_setScrollingInterval:function(e,t,n,r){var i=n.options;t.length>0&&(e.internalFuncID=window.setInterval(function(){n._doScrolling(t,n,r)},i.keyDownInterval))},_scrollButtonMouseOver:function(e){var t=e.data,r=t.options,i=n(e.currentTarget);if(r.disabled)return;i.hasAllClasses(r.wijCSS.stateDisabled)||(i.bind("mouseout."+t.widgetName,t,t._buttonMouseOut).bind("mousedown."+t.widgetName,t,t._buttonMouseDown).bind("mouseup."+t.widgetName,t,t._buttonMouseUp).addClass(r.wijCSS.stateHover),t._buttonScroll(i,t,"buttonshover"))},_buttonScroll:function(e,t,n){var r="",i=t.options,s=t._fields(),o=t._hasMode(i.hScroller,n),u=t._hasMode(i.vScroller,n);e.hasClass("wijmo-wijsuperpanel-buttonleft")&&o?r="left":e.hasClass("wijmo-wijsuperpanel-buttonright")&&o?r="right":e.hasClass("wijmo-wijsuperpanel-buttontop")&&u?r="top":e.hasClass("wijmo-wijsuperpanel-buttonbottom")&&u&&(r="bottom"),r.length>0&&(t._clearInterval(),t._doScrolling(r,t,!0),t._setScrollingInterval(s,r,t,!0))},_listenContentScroll:function(){var e=this,t=e.options,n=e._fields(),r=n.hbarContainer,i=n.hbarDrag,s=n.vbarContainer,o=n.vbarDrag,u=n.templateWrapper,a=n.contentWrapper,f=a.width(),l=a.height(),c=u&&u.offset(),h=c&&c.left,p=c&&c.top,d=n.contentWidth,v=n.contentHeight;a.bind("scroll",function(n){var c=u.position(),h=c.left,p=c.top;a.scrollTop(0).scrollLeft(0),u.css({left:h,top:p}),h<=0&&h>f-d&&(e._updateScrollValue(e.scrollPxToValue(-h,"h"),t.hScroller),e._scrollDrag("h",r,i,!0)),p<=0&&p>l-v&&(e._updateScrollValue(e.scrollPxToValue(-p,"v"),t.vScroller),e._scrollDrag("v",s,o,!0))})},_buttonMouseDown:function(e){var t=e.data,r=n(e.currentTarget),i=t.options.wijCSS;if(t.options.disabled)return;r.hasAllClasses(i.stateDisabled)||(r.addClass(i.stateActive),t._buttonScroll(r,t,"buttons"))},_buttonMouseUp:function(e){var t=e.data,r=n(e.currentTarget);r.removeClass(t.options.wijCSS.stateActive),t._clearInterval()},_buttonMouseOut:function(e){var t=e.data,r=t.options.wijCSS,i=n(e.currentTarget);i.unbind("mouseout",t._buttonMouseOut).unbind("mousedown",t._buttonMouseDown).unbind("mouseup",t._buttonMouseUp).removeClass(r.stateHover).removeClass(r.stateActive),t._clearInterval()},_updateScrollValue:function(e,t){var r=n.Event("scrollValueChanged");t.scrollValue=e,this._trigger("scrollValueChanged",r,t)},_panelKeyDown:function(t){var n=t.data,r=n.options,i=t.shiftKey,s=t.keyCode,o=e.getKeyCodeEnum();if(!r.keyboardSupport||r.disabled)return;s===o.LEFT?n._doScrolling("left",n,i):s===o.RIGHT?n._doScrolling("right",n,i):s===o.UP?n._doScrolling("top",n,i):s===o.DOWN&&n._doScrolling("bottom",n,i),t.stopPropagation(),t.preventDefault()},_draggingInternal:function(e,t,n,r){var i=n.dir,s=i==="h",o=s?"left":"top",u=e.position[o]-t._getScrollContainerPadding(o),a=t._getTrackLen(i)-r[s?"outerWidth":"outerHeight"](!0),f=u/a,l=n.scrollMax-n.scrollLargeChange+1,c=f*l,h,p,d;c<n.scrollMin&&(c=n.scrollMin),c>l&&(c=l),h={oldValue:n.scrollValue,newValue:c,dir:i};if(!t._scrolling(!0,t,h))return;t.customScroll&&(d=Math.abs(t.customScroll),p=t.scrollPxToValue(d,n.dir)),t._updateScrollValue(p||c,n),t.customScroll=undefined,t._setDragAndContentPosition(!0,!1,i,"dragging")},_dragging:function(e,t,r){var i=r.options,s=n(e.target),o=s.parent();o.hasAllClasses(u)?r._draggingInternal(t,r,i.hScroller,s):r._draggingInternal(t,r,i.vScroller,s)},_panelMouseWheel:function(e,t){var r=e.data,i=r.options,s,o="",a,f=i.hScroller,l=i.vScroller,c;if(!i.mouseWheelSupport||i.disabled)return;s=n(e.srcElement||e.originalEvent.target),a=s.closest("."+u,r.element).size()>0,t>0?o=a?"left":"top":o=a?"right":"bottom",o.length>0&&r._doScrolling(o,r),c=!1,o==="left"&&(c=!r.hNeedScrollBar||Math.abs(f.scrollValue-f.scrollMin)<.001),o==="right"&&(c=!r.hNeedScrollBar||Math.abs(f.scrollValue-(f.scrollMax-r._getHScrollBarLargeChange()+1))<.001),o==="top"&&(c=!r.vNeedScrollBar||Math.abs(l.scrollValue-l.scrollMin)<.001),o==="bottom"&&(c=!r.vNeedScrollBar||Math.abs(l.scrollValue-(l.scrollMax-r._getVScrollBarLargeChange()+1))<.001);if(!c||!i.bubbleScrollingEvent||o==="left"||o==="right")e.stopPropagation(),e.preventDefault()},_documentMouseUp:function(e){var t=e.data.self,r=e.data.ele;r.removeClass(t.options.wijCSS.stateActive),t._clearInterval(),n(document).unbind("mouseup",t._documentMouseUp)},_scrollerMouseOver:function(e){var t=e.data,r=t.options,i,s=null,o=!1;if(r.disabled)return;i=n(e.srcElement||e.originalEvent.target||e.originalEvent.srcElement);if(i.hasAllClasses(r.wijCSS.stateDefault))s=i,o=!0;else if(i.parent().hasAllClasses(r.wijCSS.stateDefault))s=i.parent(),o=!0;else if(i.hasAllClasses(a)||i.hasAllClasses(u))s=i;s&&(o&&s.addClass(r.wijCSS.stateHover),s.bind("mouseout."+t.widgetName,t,t._elementMouseOut),s.bind("mousedown."+t.widgetName,t,t._elementMouseDown),s.bind("mouseup."+t.widgetName,t,t._elementMouseUp))},_elementMouseUp:function(e){var t=n(e.currentTarget);t.removeClass(f)},_elementMouseDown:function(e){var t=n(e.currentTarget),r=e.data,i,s,l="",c=!1,h=!1,p,d,v;if(r.options.disabled||e.which!==1)return;if(t.hasClass("wijmo-wijsuperpanel-vbar-buttontop"))l="top",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom"))l="bottom",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-hbar-buttonleft"))l="left",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-hbar-buttonright"))l="right",h=!0;else{if(t.hasAllClasses(o)){t.addClass(f);return}t.hasAllClasses(u)?(i=t.find("."+o),p=i.offset(),e.pageX<p.left?l="left":l="right",c=!0):t.hasAllClasses(a)&&(s=t.find("."+o),d=s.offset(),e.pageY<d.top?l="top":l="bottom",c=!0)}r._clearInterval(),r._doScrolling(l,r,c),v=r._fields(),r._setScrollingInterval(v,l,r,c),h&&t.addClass(f),n(document).bind("mouseup."+r.widgetName,{self:r,ele:t},r._documentMouseUp)},doScrolling:function(e,t){this._doScrolling(e,this,t)},_setScrollerValue:function(e,t,n,r,i,s,o){var u=t.scrollMin,a=s?r:n,f=t.scrollValue,l=0,c,h,p,d,v;f||(f=u);if(i){c=t.scrollMax-r+1;if(Math.abs(f-c)<.001)return o._clearInterval(),!1;h=t.firstStepChangeFix,l=f+a,!s&&Math.abs(f-u)<1e-4&&!isNaN(h)&&(l+=h),l>c&&(l=c)}else{if(Math.abs(f-u)<.001)return o._clearInterval(),!1;l=f-a,l<0&&(l=u)}return p={oldValue:t.scrollValue,newValue:l,direction:e,dir:t.dir},o._scrolling(!0,o,p)?(o.customScroll&&(v=Math.abs(o.customScroll),d=o.scrollPxToValue(v,t.dir)),o._updateScrollValue(d||l,t),o.customScroll=undefined,!0):!1},_doScrolling:function(e,t,n){var r=t.options,i=r.vScroller,s=r.hScroller,o=t._getVScrollBarSmallChange(),u=t._getVScrollBarLargeChange(),a=t._getHScrollBarLargeChange(),f=t._getHScrollBarSmallChange();if(e==="top"||e==="bottom"){if(!t._setScrollerValue(e,i,o,u,e==="bottom",n,t))return;e="v"}else if(e==="left"||e==="right"){if(!t._setScrollerValue(e,s,f,a,e==="right",n,t))return;e="h"}t._setDragAndContentPosition(!0,!0,e)},_disableButtonIfNeeded:function(e){var t=e._fields(),n=e.options,r=t.buttonLeft,i=t.buttonRight,s=t.buttonTop,o=t.buttonBottom,u,a,f,l,c,h,p,d;t.intervalID>0&&window.clearInterval(t.intervalID),r!==undefined&&(u=e._getHScrollBarLargeChange(),a=n.hScroller.scrollMax-u+1,f=n.hScroller.scrollValue,l=n.hScroller.scrollMin,f===undefined&&(f=l),Math.abs(f-l)<.001||!t.hScrolling?r.addClass(n.wijCSS.stateDisabled):r.removeClass(n.wijCSS.stateDisabled),Math.abs(f-a)<.001||!t.hScrolling?i.addClass(n.wijCSS.stateDisabled):i.removeClass(n.wijCSS.stateDisabled)),s!==undefined&&(c=e._getVScrollBarLargeChange(),h=n.vScroller.scrollMax-c+1,p=n.vScroller.scrollValue,d=n.vScroller.scrollMin,p===undefined&&(p=d),Math.abs(p-d)<.001||!t.vScrolling?s.addClass(n.wijCSS.stateDisabled):s.removeClass(n.wijCSS.stateDisabled),Math.abs(p-h)<.001||!t.vScrolling?o.addClass(n.wijCSS.stateDisabled):o.removeClass(n.wijCSS.stateDisabled))},_clearInterval:function(){var e=this._fields(),t=e.internalFuncID;t>0&&(window.clearInterval(t),e.internalFuncID=-1)},_elementMouseOut:function(e){var t=n(e.currentTarget),r=e.data;t.unbind("mouseout",r._elementMouseOut),t.unbind("mousedown",r._elementMouseDown),t.unbind("mouseup",r._elementMouseUp),t.removeClass(r.options.wijCSS.stateHover)},_getScrollOffset:function(e){var t=n(e),r=this._fields(),i=r.contentWrapper,s=r.templateWrapper,o,u,a,f,l,c,h,p={left:null,top:null};return t.length===0?p:(o=t.offset(),u=s.offset(),o.leftWidth=o.left+t.outerWidth(),o.topHeight=o.top+t.outerHeight(),a=i.offset(),a.leftWidth=a.left+i.outerWidth(),a.topHeight=a.top+i.outerHeight(),c=o.left-u.left,o.left<a.left?p.left=c:o.leftWidth>a.leftWidth&&(h=o.leftWidth-u.left-i.innerWidth(),c<h?p.left=c:p.left=h),f=o.top-u.top,o.top<a.top?p.top=f:o.topHeight>a.topHeight&&(l=o.topHeight-u.top-i.innerHeight(),f<l?p.top=f:p.top=l),p)},_scrollDrag:function(e,t,n,r){var i=this,s=i.options,o=e==="v",u=o?s.vScroller:s.hScroller,a=u.scrollMin,f=u.scrollMax,l=u.scrollValue===undefined?a:u.scrollValue-a,c=i._getLargeChange(e),h=f-a-c+1,p=-1,d,v,m;l>h&&(l=h),t!==undefined&&(d=i._getTrackLen(e),v=n[o?"outerHeight":"outerWidth"](),m=i._getScrollContainerPadding(o?"top":"left"),p=l/h*(d-v)+m),p>=0&&n.css(o?"top":"left",p+"px"),i._scrollEnd(r,i,e)},needToScroll:function(e){var t=this._getScrollOffset(e);return t.top!==null||t.left!==null},scrollChildIntoView:function(e){var t=this._getScrollOffset(e),n=t.left,r=t.top;n!==null&&this.hScrollTo(n),r!==null&&this.vScrollTo(r)},hScrollTo:function(e,t){var n=this.options;this._updateScrollValue(t?e:this.scrollPxToValue(e,"h"),n.hScroller),this._setDragAndContentPosition(!0,!0,"h","nonestop")},vScrollTo:function(e,t){var n=this.options;this._updateScrollValue(t?e:this.scrollPxToValue(e,"v"),n.vScroller),this._setDragAndContentPosition(!0,!0,"v","nonestop")},scrollPxToValue:function(e,t){var n=this.options,r=t==="h"?"outerWidth":"outerHeight",i=t==="h"?"contentWidth":"contentHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.contentWrapper,a=o[i],f=u[r](),l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=t==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange(),d=h-p+1,v=d*(e/(a-f));return v<l&&(v=l),v>d&&(v=d),v},scrollTo:function(e,t,n){this.hScrollTo(e,n),this.vScrollTo(t,n)},refresh:function(){this.paintPanel()},paintPanel:function(e){var t=this,r=t.element,i,s,o,u;return r.is(":visible")?(i=typeof document.activeElement!="unknown"?document.activeElement:undefined,s=t.options,o=t._fields(),o.initialized||t._initialize(o,r,t),t._resetLargeChange(t,o,s),t._bindElementEvents(t,o,r,s),u=o.templateWrapper,u.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"}),u.hide(),u.show(),o.contentWidth=u.width(),o.contentHeight=u.height(),u.css("float",""),t._setRounder(t,r),t._setInnerElementsSize(o,r),t._testScroll(t,o,s)===!1?!1:(t._initScrollBars(t,o,s),t._initScrollButtons(t,o,s),t._trigger("painted"),t._paintedMark={date:new Date,mainWidth:r[0].offsetWidth,mainHeight:r[0].offsetHeight,width:o.contentWidth,height:o.contentWidth},i!==undefined&&!e&&n(i).focus(),!0)):!1},_resetLargeChange:function(e,t,n){var r;e._autoVLarge&&(n.vScroller.scrollLargeChange=null),e._autoHLarge&&(n.hScroller.scrollLargeChange=null),t.vTrackLen=undefined,t.hTrackLen=undefined,t.vbarContainer&&(r=t.vbarContainer.children("."+o+":eq(0)"),r.detach(),t.vbarContainer.remove(),t.vbarContainer=undefined),t.hbarContainer&&(r=t.hbarContainer.children("."+o+":eq(0)"),r.detach(),t.hbarContainer.remove(),t.hbarContainer=undefined)},_initialize:function(e,t,n){var r=n.options.wijCSS;e.initialized=!0,t.addClass(["wijmo-wijsuperpanel",r.widget,r.content].join(" ")),e.oldHeight=t.css("height");var i=t.css("overflow");t.css("overflow",""),t.height(t.height()),t.css("overflow",i),n._createAdditionalDom(n,e,t)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(e,t,r,i,s,o,u){var a=i==="h",f="mouseover."+e.widgetName,l=a?"buttonLeft":"buttonTop",c=a?"buttonRight":"buttonBottom",h=o[l],v=o[c],m,g,y;e._hasMode(r,"buttons")||e._hasMode(r,"buttonshover")?(m=a?p:d,h===undefined&&(g=n(m).appendTo(u),g.bind(f,e,e._scrollButtonMouseOver),o[l]=h=u.children(a?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop"),o[c]=v=u.children(a?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")),y={my:a?"left":"top",of:s,at:a?"left":"top",collision:"none"},n.extend(y,r.decreaseButtonPosition),h.position(y),y={my:a?"right":"bottom",of:s,at:a?"right":"bottom",collision:"none"},n.extend(y,r.increaseButtonPosition),v.position(y)):h!==undefined&&(h.remove(),v.remove(),o[l]=o[c]=undefined)},_initScrollButtons:function(e,t,n){var r=t.contentWrapper,i=t.stateContainer;e._setButtonPosition(e,n,n.hScroller,"h",r,t,i),e._setButtonPosition(e,n,n.vScroller,"v",r,t,i)},_getVScrollBarSmallChange:function(){var e=this.options,t;return e.vScroller.scrollSmallChange||(t=this._getVScrollBarLargeChange(),e.vScroller.scrollSmallChange=t/2),e.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(e){var t=this,n=t.options,r=t._fields(),i=e==="v",s=i?n.vScroller:n.hScroller,o=i?"innerHeight":"innerWidth",u=i?"contentHeight":"contentWidth",a=i?"_autoVLarge":"_autoHLarge",f,l,c,h,p,d,v,m;return s.scrollLargeChange?s.scrollLargeChange:(f=s.scrollMax,l=s.scrollMin,c=f-l,h=r.contentWrapper,p=h[o](),d=r[u],v=p/(d-p),m=(c+1)*v/(1+v),isNaN(m)&&(m=0),s.scrollLargeChange=m,t[a]=!0,s.scrollLargeChange)},_getHScrollBarSmallChange:function(){var e=this.options,t;return e.hScroller.scrollSmallChange||(t=this._getHScrollBarLargeChange(),e.hScroller.scrollSmallChange=t/2),e.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(e,t,r){var i=r.hScroller,s=i.scrollMax,o=i.scrollMin,u=s-o,a=r.vScroller,f=a.scrollMax,l=a.scrollMin,c=f-l,h=t.hbarDrag,p=t.vbarDrag,d,v,m,g,y,b,w,E,S,x;e.hNeedScrollBar&&h.is(":visible")&&(d=e._getHScrollBarLargeChange(),v=e._getTrackLen("h"),m=e._getDragLength(u,d,v,r.hScroller.scrollMinDragLength),h.width(m),g=h.outerWidth(!0)-h.width(),h.width(m-g),y=h.children("span"),y.css("margin-left",(h.width()-y[0].offsetWidth)/2),v<=h.outerWidth(!0)?h.hide():h.show(),e._isDragging==1&&(n(document).trigger("mouseup"),e._isDragging=!1)),e.vNeedScrollBar&&p.is(":visible")&&(b=e._getVScrollBarLargeChange(),w=e._getTrackLen("v"),E=e._getDragLength(c,b,w,r.vScroller.scrollMinDragLength),p.height(E),S=p.outerHeight(!0)-p.height(),p.height(E-S),x=p.children("span"),x.css("margin-top",(p.height()-x[0].offsetHeight)/2),w<=p.outerHeight(!0)?p.hide():p.show(),e._isDragging==1&&(n(document).trigger("mouseup"),e._isDragging=!1)),e._setDragAndContentPosition(!1,!1,"both")},_getTrackLen:function(e){var t=this,n=t._fields(),r=e+"TrackLen",i=n.hbarContainer,s=n.vbarContainer,o=0,u=0;return n[r]!==undefined?n[r]:(e==="h"&&(u=t._getScrollContainerPadding("h"),o=i.innerWidth()),e==="v"&&(u=t._getScrollContainerPadding("v"),o=s.innerHeight()),n[r]=o-u,n[r])},_getScrollContainerPadding:function(e){var t=this,n=t._fields(),r=0,i,s;if(e==="h")r=t._getScrollContainerPadding("left")+t._getScrollContainerPadding("right");else if(e==="v")r=t._getScrollContainerPadding("top")+t._getScrollContainerPadding("bottom");else{e==="left"||e==="right"?i=n.hbarContainer:i=n.vbarContainer,s=e+"Padding";if(n[s]!==undefined)return r=n[s],r;i&&i.css&&(r=parseFloat(i.css("padding-"+e))),n[s]=r}return r},_triggerScroll:function(e,t,n){var r={position:e,dir:t,animationOptions:n};this._trigger("scroll",null,r)},_contentDragAnimate:function(e,t,r,i,s,o,u){var a=this,f=a.options,l=e==="v",c=l?f.vScroller:f.hScroller,h=l?"outerHeight":"outerWidth",p=l?"innerHeight":"innerWidth",d=l?"contentHeight":"contentWidth",v=l?"top":"left",m=c.scrollMin,g=c.scrollMax,y=g-m,b=c.scrollValue===undefined?m:c.scrollValue-m,w=a._getLargeChange(e),E=y-w+1,S=a._fields(),x=S.contentWrapper,T=S.templateWrapper,N,C,k,L,A,O,M,_,D,P,H,B;b>E&&(b=E),N=(S[d]-x[p]())*(b/E),Math.abs(N)<.001&&(N=0),N=Math.round(N),C=-1,r!==undefined&&(t&&i.is(":animated")&&s!=="nonestop"&&i.stop(!0,!1),k=a._getTrackLen(e),L=i[h](!0),A=k-L,O=a._getScrollContainerPadding(v),C=b/E*A+O),t&&f.animationOptions&&!f.animationOptions.disabled?(C>=0&&u!=="dragging"&&(M=n.extend({},f.animationOptions),M.complete=undefined,l?_={top:C}:_={left:C},i.animate(_,M)),D=n.extend({},f.animationOptions),P=f.animationOptions.complete,D.complete=function(){a._scrollEnd(o,a,e),n.isFunction(P)&&P(arguments)},t&&T.is(":animated")&&s!=="nonestop"&&T.stop(!0,!1),l?H={top:-N}:H={left:-N},f.customScrolling?a._scrollEnd(o,a,e,b):T.animate(H,D),a._triggerScroll(N,e,D)):(B=l?"top":"left",C>=0&&u!=="dragging"&&(i[0].style[B]=C+"px"),f.customScrolling||(T[0].style[B]=-N+"px"),a._triggerScroll(N,e),a._scrollEnd(o,a,e,b))},_setDragAndContentPosition:function(e,t,n,r,i){var s=this,o=s._fields(),u=o.hbarContainer,a=o.hbarDrag,f=o.vbarContainer,l=o.vbarDrag;(n==="both"||n==="h")&&o.hScrolling&&s._contentDragAnimate("h",t,u,a,r,e,i),(n==="both"||n==="v")&&o.vScrolling&&s._contentDragAnimate("v",t,f,l,r,e,i),o.intervalID>0&&window.clearInterval(o.intervalID),o.intervalID=window.setInterval(function(){s._disableButtonIfNeeded(s)},500)},_scrolling:function(e,t,n){var r=!0;return e&&(n.beforePosition=t.getContentElement().position(),t._beforePosition=n.beforePosition,r=t._trigger("scrolling",null,n),t.customScroll=n.customScroll),r},_scrollEnd:function(e,t,n,r){e&&window.setTimeout(function(){var e=t.getContentElement(),i,s;if(!e.is(":visible"))return;i=t.getContentElement().position(),s={dir:n,beforePosition:t._beforePosition,afterPosition:i},isNaN(r)||(s.newValue=r),t._trigger("scrolled",null,s)},0)},_getDragLength:function(e,t,n,r){var i=e/t,s=n/i,o=r;return s<o?s=o:s+1>=n&&(s=n-1),Math.round(s)},_needScrollbar:function(e,t){var n=this._hasMode(e,"scrollbar"),r=e.scrollBarVisibility,i=n&&(r==="visible"||r==="auto"&&t);return i},_bindBarEvent:function(e,t,r){var i=this;e.bind("mouseover."+i.widgetName,i,i._scrollerMouseOver);if(!n.fn.draggable)return;t.draggable({axis:r==="h"?"x":"y",start:function(e,t){if(i.options.disabled)return!1;i._isDragging=!0},drag:function(e,t){i._dragging(e,t,i)},containment:"parent",stop:function(e){i._dragStop(e,i,r),n(e.target).removeClass(f),i._isDragging=!1}})},_createBarIfNeeded:function(e,t,r,i,s){if(e){var u=this,a,f=u._fields(),l=r+"barContainer",c=r+"barDrag",h=r==="h",p=s[h?"innerHeight":"innerWidth"](),d=f[l]=n(i),v,m;t.append(d),v=d[0][h?"offsetHeight":"offsetWidth"],p-=v,a={direction:h?"horizontal":"vertical",targetBarLen:v,contentLength:p};if(u._trigger(h?"hScrollerActivating":"vScrollerActivating",null,a)===!1)return!1;m=f[c]=d.find("."+o),u._bindBarEvent(d,m,r),s[h?"height":"width"](p)}},_setScrollbarPosition:function(e,t,n,r,i,s,o,u,a,f,l){var c=f==="h",h,p,d,v,m,g,y,b,w,E=t.options.wijCSS;s?(h=r[0][c?"offsetHeight":"offsetWidth"],p=t._getScrollContainerPadding(f),d=c?"top":"left",v=c?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"},m=c?{top:h+"px",left:null}:{left:h+"px"},g=c?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"},y=c?{top:"",left:null}:{left:""},b=n[c?"innerWidth":"innerHeight"](),u===d?(r.css(v),n.css(m),c?(r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerBL).addClass(E.cornerTL),r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBR).addClass(E.cornerTR),r.removeClass(E.cornerBottom).addClass(E.cornerTop)):(r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTR).addClass(E.cornerTL),r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBR).addClass(E.cornerBL),r.removeClass(E.cornerRight).addClass(E.cornerLeft))):(r.css(g),n.css(y),c?(r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerTL).addClass(E.cornerBL),r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBL).addClass(E.cornerBR),r.removeClass(E.cornerTop).addClass(E.cornerBottom)):(r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTL).addClass(E.cornerTR),r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBL).addClass(E.cornerBR),r.removeClass(E.cornerLeft).addClass(E.cornerRight))),w=0,o&&(w=i[0][c?"offsetWidth":"offsetHeight"],a==="left"?r.css("right","0px"):a==="right"?r.css("left","0px"):a==="top"?r.css("bottom","0px"):a==="bottom"&&r.css("top","0px")),!c&&o&&(w=0),r[c?"width":"height"](b-p),t._enableDisableScrollBar(f,r,!l)):e.css(c?"left":"top","")},_testScroll:function(e,t,n){var r=t.templateWrapper,i=t.contentWrapper,s=t.stateContainer,o=i.innerWidth(),u=i.innerHeight(),a=t.contentWidth,f=t.contentHeight,l,p,d,v,m,g;t.hScrolling=a>o,t.vScrolling=f>u,l=e.hNeedScrollBar=e._needScrollbar(n.hScroller,t.hScrolling);if(e._createBarIfNeeded(l,s,"h",c,i)===!1)return!1;l&&!t.vScrolling&&(r.css("float","left"),t.contentHeight=r.height(),t.vScrolling=t.contentHeight>u-t.hbarContainer[0].offsetHeight,r.css("float","")),p=e.vNeedScrollBar=e._needScrollbar(n.vScroller,t.vScrolling);if(e._createBarIfNeeded(p,s,"v",h,i)===!1)return!1;if(p&&!t.hScrolling){r.css("float","left"),t.contentWidth=r.width(),t.hScrolling=t.contentWidth>o-t.vbarContainer[0].offsetWidth,r.css("float","");if(t.hScrolling&&!l){l=e.hNeedScrollBar=e._needScrollbar(n.hScroller,t.hScrolling);if(e._createBarIfNeeded(l,s,"h",c,i)===!1)return!1}}d=t.hbarContainer,v=t.vbarContainer,m=n.hScroller.scrollBarPosition,g=n.vScroller.scrollBarPosition,e._setScrollbarPosition(r,e,i,d,v,l,p,m,g,"h",t.hScrolling),e._setScrollbarPosition(r,e,i,v,d,p,l,g,m,"v",t.vScrolling)},_enableDisableScrollBar:function(e,t,n){var r=this.options;e==="v"?(t[n?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled"),t.find("."+r.wijCSS.stateDefault)[n?"addClass":"removeClass"](r.wijCSS.stateDisabled)):e==="h"&&(t[n?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled"),t.find("."+r.wijCSS.stateDefault)[n?"addClass":"removeClass"](r.wijCSS.stateDisabled)),t.children("."+o)[n?"hide":"show"]()},_initResizer:function(){var e=this,t=e.options,r=e._fields(),i=r.resizer,s,o;if(!n.fn.resizable)return;!i&&t.allowResize&&(s=t.resizableOptions,o=s.stop,s.stop=function(t){e._resizeStop(t,e),n.isFunction(o)&&o(t)},r.resizer=i=e.element.resizable(s)),!t.allowResize&&r.resizer&&(i.resizable("destroy"),r.resizer=null)},_resizeStop:function(e,t){this.options.autoRefresh||t.paintPanel(!0),t._trigger("resized")},_createAdditionalDom:function(e,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var i=t.stateContainer=n(l),s,o=e.options.wijCSS;t.contentWrapper=i.children(),s=t.templateWrapper=t.contentWrapper.children(),r.contents().each(function(e,r){var i=n(r);if(i.hasAllClasses(o.superpanelHeader)){t.header=i;return}if(i.hasAllClasses(o.superpanelFooter)){t.footer=i;return}s[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(i[0]),t.footer!==undefined&&t.footer.insertAfter(i)},_setRounder:function(e,t){if(this.options.showRounder){t.addClass(this.options.wijCSS.cornerAll);if(e._rounderAdded)return;if(n.browser.msie)return;var r="",i="",s,o;n.browser.webkit?(i="WebkitBorderTopLeftRadius",r="WebkitBorderRadius"):n.browser.mozilla?(i="MozBorderRadiusBottomleft",r="MozBorderRadius"):(i="border-top-left-radius",r="border-radius"),s=t.css(i),o=parseInt(s,10),t.css(r,o+1),e._rounderAdded=!0,e._radiusKey=r}else t.removeClass(this.options.wijCSS.cornerAll)},_setInnerElementsSize:function(e,t){var n=e.stateContainer,r=e.contentWrapper,i=0,s,o,u,a;e.header!==undefined&&(i+=e.header.outerHeight()),e.footer!==undefined&&(i+=e.footer.outerHeight()),s=n[0].style,o=t.innerHeight()-i,u=t.innerWidth(),s.display="none",s.height=o+"px",s.width=u+"px",a=r[0].style,a.height=o+"px",a.width=u+"px",s.display=""}}),i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new r),n.wijmo.registerWidget("wijsuperpanel",i.prototype)}else{var o="wijmo-wijsuperpanel-handle",l="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>";i.prototype=n.extend(!0,{},n.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(e,t){var r=this,i=r.options,s=r._fields();if(e==="animationOptions"||e==="resizableOptions")t=n.extend(i[e],t);else if(e==="hScroller"||e==="vScroller")t=n.extend(i[e],t),r.refresh();n.Widget.prototype._setOption.apply(r,arguments);switch(e){case"allowResize":r._initResizer();break;case"disabled":r._handleDisabledOption(t,r.element);break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,s,r.element,i)}},_create:function(){var e=this,t=e.options;t.vScroller.dir="v",t.hScroller.dir="h",e._createDom(),e.options.disabled&&e.disable(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijsuperpanel")},_handleDisabledOption:function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},_createDisabledDiv:function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return n("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top})},_createDom:function(){var e=this,t=e.element;e.paintPanel(),e._initResizer(),e._bindElementEvents()},_applyOverflow:function(e){var t={},r=this.options,i=r.hScroller.scrollBarVisibility,s=r.vScroller.scrollBarVisibility;t["overflow-x"]=i,t["overflow-y"]=s,n.support.isTouchEnabled&&n.support.isTouchEnabled()&&i==="visible"&&s==="visible"&&(t["overflow-x"]="auto",t["overflow-y"]="auto"),e.css(t)},_createAdditionalDom:function(e,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var i=t.stateContainer=n(l),s,o=e.options.wijCSS;e._applyOverflow(t.stateContainer),t.contentWrapper=i.children(),r.contents().each(function(e,r){var i=n(r);if(i.hasAllClasses(o.superpanelHeader)){t.header=i;return}if(i.hasAllClasses(o.superpanelFooter)){t.footer=i;return}t.contentWrapper[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(i[0]),t.footer!==undefined&&t.footer.insertAfter(i),e._resetDom(),t.contentWrapper.css("float","left"),t.contentWidth=t.contentWrapper.width(),t.contentHeight=t.contentWrapper.height(),t.contentWrapper.css("float","")},_bindElementEvents:function(){var e=this,t=e.element,r=e.options,i=e.widgetName,s=t.find(".wijmo-wijsuperpanel-statecontainer"),o=s.scrollTop(),u=s.scrollLeft();s.bind("scroll",function(t,i){var s=n(this).scrollTop(),a=n(this).scrollLeft(),f,l,c,h,p;if(s===o&&a===u)return;s===o?(l="h",a>u?f="right":f="left",c=r.hScroller.scrollValue,p=a):(l="v",s>o?f="bottom":f="top",c=r.vScroller.scrollValue,p=s),h=e.scrollPxToValue(p,l),e._trigger("scrolling",null,{dir:l,direction:f,oldValue:c,newValue:h,beforePosition:{left:-u,top:-o}}),e._triggerScroll(p,l),e._updateScrollValue(p,l),e._trigger("scrolled",null,{dir:l,beforePosition:{left:-u,top:-o},afterPosition:{left:-a,top:-s},newValue:h}),u=a,o=s}),r.keyboardSupport?e._keyboardBind===undefined&&(e._keyboardBind=!0,t.bind("keydown."+i,e,e._panelKeyDown)):(t.unbind("keydown."+i,e._panelKeyDown),e._keyboardBind=undefined),r.mouseWheelSupport||t.bind("mousewheel",function(e){return e.stopPropagation(),!1})},_setScrollingInterval:function(e,t,n,r){var i=n.options;t.length>0&&(e.internalFuncID=window.setInterval(function(){n._doScrolling(t,n,r)},i.keyDownInterval))},_triggerScroll:function(e,t){var n={position:e,dir:t};this._trigger("scroll",null,n)},_panelKeyDown:function(t){var n=t.data,r=n.options,i,s,o=e.getKeyCodeEnum();if(!r.keyboardSupport||r.disabled)return;i=t.shiftKey,s=t.keyCode,s===o.LEFT?n._doScrolling("left",n,i):s===o.RIGHT?n._doScrolling("right",n,i):s===o.UP?n._doScrolling("top",n,i):s===o.DOWN&&n._doScrolling("bottom",n,i),t.stopPropagation(),t.preventDefault()},_doScrolling:function(e,t,n){var r,i,s,o=t._fields(),u=o.stateContainer[0],a={},f;if(e==="top"||e==="bottom")i="v",s="scrollTop";else if(e==="left"||e==="right")i="h",s="scrollLeft";n?r=t._getLargeChange(i):r=t._getSmallChange(i),f=u[s],e==="top"||e==="left"?a[s]=f-r:a[s]=f+r,t._animateTo(a)},_getLargeChange:function(e){var t=this,n=t._fields(),r,i=e=="h"?n.clientWidth:n.clientHeight;return i?r=i:r=n.stateContainer[e=="h"?"width":"height"](),r},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(e,t){var r=this.options.wijCSS.cornerAll;if(this.options.showRounder){t.addClass(r);if(e._rounderAdded)return;if(n.browser.msie)return;var i="",s="",o,u;n.browser.webkit?(s="WebkitBorderTopLeftRadius",i="WebkitBorderRadius"):n.browser.mozilla?(s="MozBorderRadiusBottomleft",i="MozBorderRadius"):(s="border-top-left-radius",i="border-radius"),o=t.css(s),u=parseInt(o,10),t.css(i,u+1),e._rounderAdded=!0,e._radiusKey=i}else t.removeClass(r)},_initResizer:function(){var e=this,t=e.options,r=e._fields(),i=r.resizer,s,o;if(!n.fn.resizable)return;!i&&t.allowResize&&(s=t.resizableOptions,o=s.stop,s.stop=function(t){e._resetDom(),e._trigger("resized"),n.isFunction(o)&&o(t)},r.resizer=i=e.element.resizable(s)),!t.allowResize&&r.resizer&&(i.resizable("destroy"),r.resizer=null)},_resetDom:function(){var e=this,t=e.options,n=e.element,r=e._fields(),i=n.width(),s=n.height();r.header!==undefined&&(s-=r.header.outerHeight()),r.footer!==undefined&&(s-=r.footer.outerHeight()),r.stateContainer.length&&(r.stateContainer.css({width:i,height:s}),r.clientWidth=r.stateContainer[0].clientWidth,r.clientHeight=r.stateContainer[0].clientHeight)},_fields:function(){var e=this,t=e.element,n=e.widgetName+"-fields",r=e._fieldsStore;return r===undefined&&(r={},t.data(n,r),e._fieldsStore=r),r},_getScrollOffset:function(e){var t=n(e),r,i,s,o,u,a,f,l,c,h={left:null,top:null};return t.length===0?h:(r=this._fields(),i=r.contentWrapper,s=t.offset(),s.leftWidth=s.left+t.outerWidth(),s.topHeight=s.top+t.outerHeight(),u=i.offset(),u.leftWidth=u.left+r.clientWidth,u.topHeight=u.top+r.clientHeight,l=s.left-u.left,s.left<u.left?h.left=l:s.leftWidth>u.leftWidth&&(c=s.leftWidth-u.left-r.clientWidth,l<c?h.left=l:h.left=c),a=s.top-u.top,s.top<u.top?h.top=a:s.topHeight>u.topHeight&&(f=s.topHeight-u.top-r.clientHeight,a<f?h.top=a:h.top=f),h)},_initialize:function(e,t,n){var r=n.options.wijCSS;e.initialized=!0,t.addClass(["wijmo-wijsuperpanel",r.widget,r.content].join(" ")),n._setRounder(n,t),n._createAdditionalDom(n,e,t),n._trigger("painted"),n._initScrollPosition()},_initScrollPosition:function(){var e=this.options,t=e.hScroller,n=e.vScroller,r=t.scrollValue,i=n.scrollValue,s=this._fields(),o=r?this._scrollValueToPx(r,"h"):0,u=i?this._scrollValueToPx(i,"v"):0;r&&s.stateContainer.prop("scrollLeft",o),i&&s.stateContainer.prop("scrollTop",u)},_updateScrollValue:function(e,t){var r=this.scrollPxToValue(e,t),i=this.options,s=t==="h"?"hScroller":"vScroller",o=n.Event("scrollValueChanged");i[s].scrollValue=r,this._trigger("scrollValueChanged",o,i[s])},scrollPxToValue:function(e,t){var n=this.options,r=t==="h"?"clientWidth":"clientHeight",i=t==="h"?"scrollWidth":"scrollHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.stateContainer[0],a=u[r],f=u[i],l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=h*e/(f-a)+l;return p},_scrollValueToPx:function(e,t){var n=this.options,r=t==="h"?"clientWidth":"clientHeight",i=t==="h"?"scrollWidth":"scrollHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.stateContainer[0],a=u[r],f=u[i],l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=(e-l)*(f-a)/h;return p},_animateTo:function(e){var t=this,n=t.element,r=t.options,i=r.animationOptions,s=t._fields();s.stateContainer.animate(e,i)},destroy:function(){var e=this,t=e.element,r=e.options,i=e._fields(),s,o=r.wijCSS;e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),i.resizer!==undefined&&i.resizer.resizable("destroy"),t.unbind("."+e.widgetName),t.removeClass(["wijmo-wijsuperpanel",o.widget,o.content,o.cornerAll].join(" ")),s=i.contentWrapper,s.contents().each(function(e,n){t.append(n)}),i.stateContainer.remove(),n.Widget.prototype.destroy.apply(e,arguments)},doScrolling:function(e,t){this._doScrolling(e,this,t)},paintPanel:function(e){var t=this,n=t.element,r=t._fields();r.initialized||this._initialize(r,n,t)},needToScroll:function(e){var t=this._getScrollOffset(e);return t.top!==null||t.left!==null},scrollChildIntoView:function(e){var t=this._getScrollOffset(e),n=t.left,r=t.top;this.scrollTo(n,r)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(e,t){var n=t?this._scrollValueToPx(e):e;this._animateTo({scrollLeft:n})},vScrollTo:function(e,t){var n=t?this._scrollValueToPx(e):e;this._animateTo({scrollTop:n})},refresh:function(){var e=this,t=e._fields();e._applyOverflow(t.stateContainer),e._resetDom()},scrollTo:function(e,t,n){var r=n?this._scrollValueToPx(e):e,i=n?this._scrollValueToPx(t):t;this._animateTo({scrollTop:i}),this._animateTo({scrollLeft:r})}}),i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{wijCSS:{superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:!1,animationOptions:{queue:!1,disabled:!1,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:!1,keyDownInterval:100,mouseWheelSupport:!0,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:!0,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}}),n.wijmo.registerWidget("wijsuperpanel",i.prototype)}})(e.superpanel||(e.superpanel={}));var t=e.superpanel})(wijmo||(wijmo={})),define("wijmo.wijsuperpanel",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijlist",i="wijmo-wijlist-item",s=i+"-alternate",o=i+"-selected",u=i+"-first",a=i+"-last",f="wijmo-wijlistitem-active",l="item.wijlist",c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.removeAll=function(){var e=this;e.items=[],e._refresh()},t.prototype.addItem=function(e,t){var n=this;n._checkData(),t===null||t===undefined?n.items.push(e):n.items&&n.items.splice(t,0,e),n._refresh(),n._trigger("added",null,{item:e,index:t})},t.prototype.removeItem=function(e){var t=this,n;t._checkData(),n=t.indexOf(e),n>=0&&t.removeItemAt(n)},t.prototype.indexOf=function(e){var t=this,n=-1,r=0,i;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e.label&&i.value===e.value){n=r;break}}return n},t.prototype.findIndexByLabel=function(e){var t=this,n=-1,r=0,i;if(e===null||e===undefined)return n;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e){n=r;break}}return n},t.prototype.removeItemAt=function(e){var t=this;t._checkData(),t.items.splice(e,1),t._refresh()},t.prototype._checkData=function(){var e=this;e.items||(e.items=[])},t.prototype._refresh=function(){var e=this;e.renderList(),e.refreshSuperPanel()},t.prototype._setOption=function(t,r){var i=this,s,u=o+" "+i.options.wijCSS.stateActive,a,f,l;e.prototype._setOption.call(this,t,r);if(t==="disabled")i._handleDisabledOption(r,i.element);else if(t==="selectionMode")s=i.selectedItem,s&&(s.selected=!1,s.element&&s.element.removeClass(u),i.selectedItem=undefined),i.selectedItems&&n.each(i.selectedItems,function(e,t){t.selected=!1,t.element.removeClass(u)}),i.selectedItem=[];else if(t==="listItems")f=i._isBind(),f?(l=i._getRenderItems(),i.setItems(l)):i.setItems(r),i.renderList(),i.refreshSuperPanel();else if(t==="dataSource")f=i._isBind(),f&&(l=i._getRenderItems(),i.setItems(l),i.renderList(),i.refreshSuperPanel());else if(t==="autoSize"||t==="maxItemsCount")!i.options.autoSize&&i.element.is(":visible")&&(i._oriHeight!==0?i.element.height(i._oriHeight):(a=i.ul.outerHeight(),i.element.height(a),n(".wijmo-wijsuperpanel-statecontainer",i.element).height(a),n(".wijmo-wijsuperpanel-contentwrapper",i.element).height(a))),i.refreshSuperPanel()},t.prototype._create=function(){var e=this,t=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist",o;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._oriHeight=parseInt(t.css("height"),10),t.addClass(s).attr({role:"listbox","aria-activedescendant":f,"aria-multiselectable":r.selectionMode==="multiple"}).bind("click."+e.widgetName,e,e._onListClick),t.is("div")&&t.children().is("ul")&&(e._isInnerData=!0,e._templates=[],n.each(n("ul > li",t),function(t,n){e._templates.push({templateHtml:n.innerHTML})}),e._oriChildren=t.children().hide()),e.ul=n("<ul class='"+i.listul+"'></ul>").appendTo(t),r.listItems!==null&&(o=e._getRenderItems(),o&&(e.setItems(o),e.renderList(),e.refreshSuperPanel())),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refreshSuperPanel(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijlist"),r.disabled&&(e.disable(),e._handleDisabledOption(!0,e.element))},t.prototype._isBind=function(){var e=this.options,t=e.listItems;return t!==null&&t.label&&t.label.bind?!0:!1},t.prototype._getRenderItems=function(){var e=this.options,t=e.listItems;return t!==null?n.isArray(t)&&t.length>0&&typeof t[0].label=="string"?t:t.label&&t.label.bind?this._getMappingItems():null:null},t.prototype._getMappingItems=function(){var e=this.options,t=e.dataSource,r=e.listItems,i,s,o;return!t||!r?null:!r.label||!r.label.bind||!r.value||!r.value.bind?null:(s=r.label.bind,o=r.value.bind,t&&t.length!==0?(i=[],n.each(t,function(e,t){i.push({label:t[s],value:t[o]})}),i):null)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=e||t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return n("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top,"pointer-events":"auto"})},t.prototype.setTemplateItems=function(e){this._setItemsByExtend(e,!0)},t.prototype.setItems=function(e){this._setItemsByExtend(e,!1)},t.prototype._setItemsByExtend=function(e,t){var r=this,i,s=[];n.each(e,function(e,t){s[e]=n.extend(!0,{label:"",value:""},t)});if(t){if(r._templates&&s&&s.length!==r._templates.length)return;r.items=s,r.items||(r.items=[]),n.each(r._templates,function(e){r.items[e]?r.items[e].templateHtml=r._templates[e].templateHtml:r.items.push({templateHtml:r._templates[e].templateHtml,label:s[e].label,value:s[e].value})})}else r.items=s;if(!s)return null;i=n.grep(s,function(e){return e.selected},undefined),r.options.selectionMode==="single"?(r.selectedItems=[],r.selectedItem=i.length>0?i[0]:undefined):r.selectedItems=i},t.prototype.filterItems=function(e,t,r,s){var u=this,a=u._escapeRegex(e),f,l=o+" "+u.options.wijCSS.stateActive,c=u.options.wijCSS.priorityPrimary,h="highlight-filter",p,d="",v=!1,m=null;if(!this.items)return null;n("li[wijhidden]."+i,u.element)&&n("li[wijhidden]."+i,u.element).length>0&&(v=!0),n("span."+h,u.element)&&n("span."+h,u.element).length>0&&(v=!0);if(!v&&(!e||e.length===0)){n.each(this.items,function(e,t){t.selected?(u.activate(null,t,!1),t.element&&t.element.addClass(l),u.selectedItem=t):t.element&&t.element.hasAllClasses(l)&&t.element.removeClass(l)});return}return f=new RegExp(a,"i"),n.each(this.items,function(e,i){p=i.label,i.templateHtml?p=i.templateHtml:i.text!==undefined&&(p=i.text),n("span."+h,i.element).length>0&&i.element.empty().append(p);var s=f.exec(i.label);s===null&&t?i.element&&(i.element.hide(),i.element.attr("wijhidden","wijhidden")):(i.selected?(u.activate(null,i,!1),i.element&&i.element.addClass(l),u.selectedItem=i):i.element&&i.element.hasAllClasses(l)&&i.element.removeClass(l),r&&(d=p.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+a+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class='"+c+" "+h+"'>$1</span>"),i.element&&i.element.html(d)),i.element&&!i.element.is(":visible")&&(i.element.show(),i.element.removeAttr("wijhidden")),a!==undefined&&a.length!==0&&m===null&&s&&s.index===0&&(m=i))}),m},t.prototype.popItem=function(){var e=this;e._checkData(),e.items.pop(),e._refresh()},t.prototype.getList=function(){return this.ul},t.prototype._onListClick=function(e){var t=e.data;if(t.options.disabled)return;if(!n(e.target).closest("."+i).length)return;t.select(e)},t.prototype.destroy=function(){var t=this,n=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist";t.superPanel!==undefined&&t.superPanel.destroy(),n.removeClass("wijmo-wijobserver-visibility").removeClass(s).removeAttr("role").removeAttr("aria-activedescendant").unbind("."+t.widgetName),t.ul.remove(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),t._isInnerData&&t._oriChildren.show(),e.prototype.destroy.call(this)},t.prototype.activate=function(e,t,n){var r=this,i,s;r.deactivate();if(t===null||t===undefined)return;if(r._trigger("focusing",e,t)===!1)return;i=r.active=t,s=i&&i.element,s&&(r.options.addHoverItemClass&&s.addClass(r.options.wijCSS.stateHover),s.attr("id",f)),n&&r.superPanel!==undefined&&r.superPanel.scrollChildIntoView(s),r.element.is(":visible")&&r._trigger("focus",e,t)},t.prototype.deactivate=function(){var e=this,t=e.active,n;if(!t)return;n=t.element,e._trigger("blur",null,t),n&&n.removeClass(e.options.wijCSS.stateHover).removeAttr("id"),e.active=undefined},t.prototype.next=function(e){this.move("next","."+i+":first",e)},t.prototype.nextPage=function(){this.superPanel.doScrolling("bottom",!0)},t.prototype.previous=function(e){this.move("prev","."+i+":last",e)},t.prototype.previousPage=function(){this.superPanel.doScrolling("top",!0)},t.prototype.first=function(){return this.active&&!this.active.element.prev().length},t.prototype.last=function(){return this.active&&!this.active.element.next().length},t.prototype.move=function(e,t,n){var r=this,s,o;if(!r.active){s=r.ul.children(":visible"+t).data(l),r.activate(n,s,!0);return}o=r.active.element[e+"All"](":visible."+i).eq(0),o.length?r.activate(n,o.data(l),!0):r.activate(n,r.element.children(t).data(l),!0)},t.prototype.select=function(e,t){var r=this,s,u,a=o+" "+r.options.wijCSS.stateActive,f,c,h;if(!r.active){r.active=n(n(e.target).closest("."+i)).data(l);if(!r.active)return}s=r.active.element;if(s===undefined||s.attr("wijhidden"))return;f=s.data(l);if(!f)return;c=r.options.selectionMode==="single",c?(h=r.selectedItem,s.addClass(a).attr("aria-selected","true"),f.selected=!0,h!==undefined&&f!==h&&(h.selected=!1,h.element&&h.element.removeClass(a).removeAttr("aria-selected")),r.selectedItem=f,u=n.inArray(f,r.items),r._trigger("selected",e,{item:f,previousItem:h,selectedIndex:u,data:t})):(f.selected=!f.selected,f.selected?s.addClass(a).attr("aria-selected","true"):s.removeClass(a).removeClass("wijmo-wijcombobox-selecteditem").removeAttr("aria-selected","true"),u=[],r.selectedItems=n.grep(r.items,function(e,t){return e.selected&&u.push(t),e.selected===!0},undefined),r._trigger("selected",e,{selectedIndex:u,item:f,selectedItems:r.selectedItems}))},t.prototype._findItemsByValues=function(e){var t,r=[];return r=n.grep(this.items,function(n,r){t=!1;for(var i=0;i<e.length;i++)n.value===e[i]&&(t=!0);return t},undefined),r},t.prototype._findItemsByIndices=function(e){var t=this,r=this.items.length,i=[];return n.each(e,function(e,n){n>=0&&n<r&&i.push(t.items[n])}),i},t.prototype.getItems=function(e,t){var r=this,i,s,o,u;s=n.isArray(e),i=!s&&typeof e=="number"||s&&typeof e[0]=="number",o=s?e:[e];if(!t)u=r._findItemsByValues(o);else{if(!i)return null;u=r._findItemsByIndices(o)}return u},t.prototype.selectItems=function(e,t,r){var i=this,s=this.options.selectionMode==="single",u=o+" "+i.options.wijCSS.stateActive,a,f,l;l=i.getItems(e,r),s?(l.length>0&&(a=l[0],a.selected=!0,a.element.addClass(u)),f=i.selectedItem,f&&(f.selected=!1,f.element.removeClass(u)),i.selectedItem=a,t&&i._trigger("selected",null,{item:a,previousItem:f})):(n.each(l,function(e,t){t.selected=!0,t.element.addClass(u)}),i.selectedItems=n.grep(i.items,function(e){return e.selected},undefined),t&&i._trigger("selected",null,{selectedItems:i.selectedItems}))},t.prototype.unselectItems=function(e){var t=this,r=this.options.selectionMode,i=o+" "+t.options.wijCSS.stateActive,s,u;if(r==="single")s=t.selectedItem,s&&(s.selected=!1,s.element.removeClass(i).removeClass("wijmo-wijcombobox-selecteditem"),t.selectedItem=undefined);else{u=t.getItems(e,!0);if(!u||u.length===0)return;n.each(u,function(e,t){t.selected=!1,t.element.removeClass(i).removeClass("wijmo-wijcombobox-selecteditem")}),t.selectedItems=n.grep(t.items,function(e){return e.selected},undefined)}},t.prototype.renderList=function(){var e=this,t=this.ul,n=this.options,r,i,s,o,f;t.empty(),r=e.items;if(r===undefined||r===null)return;i=r.length;if(i===0)return;s=n.selectionMode==="single";for(o=0;o<i;o++)f=r[o],e._renderItem(t,f,o,s);i>0&&(r[0].element&&r[0].element.addClass(u),r[i-1].element&&r[i-1].element.addClass(a)),e._trigger("listRendered",null,e)},t.prototype._renderItem=function(e,t,r,u){var a=this,f=n("<li role='option' class='"+a.options.wijCSS.listItem+" "+i+" "+a.options.wijCSS.cornerAll+"'></li>"),c=o+" "+a.options.wijCSS.stateActive,h,p;t.element=f,t.list=a;if(a._trigger("itemRendering",null,t)===!1)return;return h=t.label,t.title&&f.attr("title",t.title),t.templateHtml?h=t.templateHtml:t.text!==undefined&&(h=t.text),f.bind("mouseover",function(e){if(a.options.disabled)return;a.activate(e,t,!1)}).bind("mouseout",function(){if(a.options.disabled)return;a.options.keepHightlightOnMouseLeave||a.deactivate()}).data(l,t),t.templateHtml?f.append(h):f.text(h),f.appendTo(e),a._isInnerData||(p=t.imageUrl,p!==undefined&&p.length>0&&f.prepend("<img src='"+t.imageUrl+"'>")),t.selected&&(a.activate(null,t,!1),f.addClass(c)),r%2===1&&f.addClass(s),a._trigger("itemRendered",null,t),f},t.prototype._escapeRegex=function(e){return e===undefined?e:e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},t.prototype.adjustOptions=function(){var e=this.options,t;if(e.data!==null)for(t=0;t<e.listItems.length;t++)delete e.listItems[t].element,delete e.listItems[t].list;return e},t.prototype.refreshSuperPanel=function(){var e=this,t=this.element,r=this.options,s=this.ul,o=s.children("."+i+":first"),u,a,f,l=t.find(".wijmo-wijsuperpanel-header"),c=t.find(".wijmo-wijsuperpanel-footer"),h=null,p,d,v,m,g,y,b;if(!t.is(":visible"))return!1;a=s.outerHeight(),f=t.innerWidth(),r.autoSize&&(h=o.outerHeight(!0)*r.maxItemsCount),h!==null&&t.height(Math.min(h,a)),p=t.innerHeight(),l.length&&(p-=l.height()),c.length&&(p-=c.height()),d=p/(a-p),g=101*d/(1+d),v=o.outerHeight()/(a-p)*(101-g),e.superPanel===undefined?(y={allowResize:!1,keyboardSupport:!1,bubbleScrollingEvent:!0,hScroller:{scrollBarVisibility:"hidden"},vScroller:{scrollSmallChange:v,scrollLargeChange:g}},n.extend(y,r.superPanelOptions),e.superPanel=t.wijsuperpanel(y).data("wijmoWijsuperpanel"),e.superPanel&&e.superPanel.vNeedScrollBar&&(s.setOutWidth(f-18),e.superPanel.refresh())):(m=e.superPanel.options.vScroller,m.scrollLargeChange=g,m.scrollSmallChange=v,e.superPanel.paintPanel(),e.superPanel.vNeedScrollBar||n.support.isTouchEnabled&&n.support.isTouchEnabled()?(s.setOutWidth(f-18),e.superPanel.refresh()):(s.setOutWidth(t.outerWidth()),u=t.children(".wijmo-wijsuperpanel-header").outerHeight(),u!==null&&u!==undefined&&t.height(a+u),e.superPanel.refresh())),b=s.css("padding-top"),b.length>0?(m=e.superPanel.options.vScroller,m.firstStepChangeFix=e.superPanel.scrollPxToValue(parseFloat(b),"v")):m.firstStepChangeFix=0,s.setOutWidth(s.parent().parent().innerWidth()),r.disabled&&e.disabledDiv&&e.disabledDiv.css("left",t.offset().left).css("top",t.offset().top).css("width",t.outerWidth()).css("height",t.outerHeight())},t}(e.wijmoWidget);t.wijlist=c;var h=function(){function e(){this.wijCSS={listul:"wijmo-wijlist-ul",listItem:"wijmo-wijlist-item"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-up-b",stateActive:"ui-btn-down-b"},this.initSelector=":jqmData(role='wijlist')",this.dataSource=null,this.listItems=[],this.selected=null,this.selectionMode="single",this.autoSize=!1,this.maxItemsCount=5,this.addHoverItemClass=!0,this.superPanelOptions=null,this.disabled=!1,this.focusing=null,this.focus=null,this.blur=null,this.itemRendering=null,this.itemRendered=null,this.listRendered=null,this.added=null,this.keepHightlightOnMouseLeave=!1}return e}();c.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new h),n.wijmo.registerWidget("wijlist",c.prototype)})(e.list||(e.list={}));var t=e.list})(wijmo||(wijmo={})),define("wijmo.wijlist",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=0,i=0,s=n.effects?n.effects:n,o=s.save,u=s.restore,a=s.createWrapper,f=s.removeWrapper,l=function(){return++r},c=function(){return++i},h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"selected":if(this.options.collapsible&&n===this.options.selected)return;this.select(n);break;case"alignment":this._innerDestroy(!0),this._tabify(!0);break;default:this._tabify(!1)}},t.prototype._create=function(){var t=this,n=this.options;this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){t.element.wijRemoveVisibilityObserver&&t.element.wijRemoveVisibilityObserver();var e=t.element.data("wijtabs"),n=t.element.data("wijmoWijtabs");t._innerDestroy(!0),t.element.data("wijtabs",e),t.element.data("wijmoWijtabs",n),t._tabify(!0)},"wijtabs"),this._tabify(!0),(n.disabledstate||n.disabled)&&this.disable(),e.prototype._create.call(this)},t.prototype.destroy=function(){this._innerDestroy(),e.prototype.destroy.call(this)},t.prototype._tabify=function(e){this.list=this.element.children("ol,ul").eq(0),this.lis=n("li:has(a)",this.list),this.anchors=this.lis.map(function(){return n("a",this)[0]}),this.panels=n([]);var t=this,r=t.options,i=/^#.+/,s,o,u,a,f,l,c,h,p;n.each(t.anchors,function(e,s){var o=n(s).attr("href")||"",u=o.split("#")[0],a,f,l;u&&(u===location.toString().split("#")[0]||(a=n("base")[0])&&u===a.href)&&(o=s.hash,s.href=o),i.test(o)?t.panels=t.panels.add(t._sanitizeSelector(o),t.element):o!=="#"?(n.data(s,"href.tabs",o),n.data(s,"load.tabs",o.replace(/#.*$/,"")),f=t._tabId(s),s.href="#"+f,l=n("#"+f),l.length||(l=n(r.panelTemplate||t._defaults.panelTemplate).attr("id",f).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerBottom).insertAfter(t.panels[e-1]||t.list),l.data("destroy.tabs",!0)),t.panels=t.panels.add(l)):r.disabledIndexes.push(e),n(s).prop("tabindex","-1")}),s=this._getAlignment(!0),o=this._getAlignment(!1);if(e){this.list.attr("role","tablist"),this.lis.attr("role","tab"),this.panels.attr("role","tabpanel"),this.element.addClass(r.wijCSS.tabs).addClass(r.wijCSS.wijtabs).addClass(r.wijCSS.widget).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS["tabs"+s]),this.list.addClass(r.wijCSS.tabsNav).addClass(r.wijCSS.helperReset).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.header).addClass(r.wijCSS.cornerAll),this.lis.addClass(r.wijCSS.stateDefault).addClass(r.wijCSS["corner"+s]),this.panels.addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS["corner"+o]);switch(s){case"Bottom":this.list.appendTo(this.element);break;case"Left":u=n("<div/>").addClass(r.wijCSS.wijtabsContent).appendTo(this.element),this.panels.appendTo(u);break;case"Right":u=n("<div/>").addClass(r.wijCSS.wijtabsContent).insertBefore(this.list),this.panels.appendTo(u);break;case"Top":this.list.prependTo(this.element)}r.sortable&&this.list.sortable&&this.list.sortable({axis:s==="Top"||s==="Bottom"?"x":"y"}),r.selected===undefined?(location.hash&&n.each(this.anchors,function(e,t){if(t.hash===location.hash)return r.selected=e,!1}),typeof r.selected!="number"&&r.cookie&&(r.selected=parseInt(t._cookie(undefined,undefined),10)),typeof r.selected!="number"&&this.lis.filter("."+r.wijCSS.tabsActive).length&&(r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive))),r.selected=r.selected||(this.lis.length?0:-1)):r.selected===null&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabledIndexes=n.unique(r.disabledIndexes.concat(n.map(this.lis.filter("."+r.wijCSS.stateDisabled),function(e,n){return t.lis.index(e)}))).sort(),n.inArray(r.selected,r.disabledIndexes)!==-1&&r.disabledIndexes.splice(n.inArray(r.selected,r.disabledIndexes),1),this.panels.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),this.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),r.selected>=0&&this.anchors.length&&(this.panels.eq(r.selected).removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),this.lis.eq(r.selected).addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t.element.queue("tabs",function(){t.element.wijTriggerVisibility&&n(t.panels[r.selected]).wijTriggerVisibility(),t._trigger("show",null,t._ui(t.anchors[r.selected],t.panels[r.selected]))}),this.load(r.selected)),n(window).bind("unload",function(){t.lis&&t.lis.add(t.anchors).unbind(".tabs"),t.lis=t.anchors=t.panels=null})}else r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive));this.element[r.collapsible?"addClass":"removeClass"](r.wijCSS.tabsCollapsible),r.cookie&&this._cookie(r.selected,r.cookie);for(a=0;a<this.lis.length;a++)f=this.lis[a],n(f)[n.inArray(a,r.disabledIndexes)!==-1&&!n(f).hasAllClasses(r.wijCSS.tabsActive)?"addClass":"removeClass"](r.wijCSS.stateDisabled),n(f).hasAllClasses(r.wijCSS.stateDisabled)&&n(f).attr("aria-disabled",!0);r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),!r.disabledState&&!r.disabled&&r.event!=="mouseover"&&(l=function(e,t){t.is(":not(."+r.wijCSS.stateDisabled+")")&&t.addClass(e)},c=function(e,t){t.removeClass(e)},this.lis.bind("mouseover.tabs",function(){l(r.wijCSS.stateHover,n(this))}),this.lis.bind("mouseout.tabs",function(){c(r.wijCSS.stateHover,n(this))}),this.anchors.bind("focus.tabs",function(){t.lis.filter("."+r.wijCSS.stateFocus).removeClass(r.wijCSS.stateFocus),l(r.wijCSS.stateFocus,n(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c(r.wijCSS.stateFocus,n(this).closest("li"))}));if(r.showOption===undefined||r.showOption===null)r.showOption={};this._normalizeBlindOption(r.showOption);if(r.hideOption===undefined||r.hideOption===null)r.hideOption={};this._normalizeBlindOption(r.hideOption),h=(r.showOption.blind||r.showOption.fade)&&r.showOption.duration>0?function(e,i){n(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1);if(s==="Top"||s==="Bottom"){var o={duration:r.showOption.duration,height:"toggle",opacity:"toggle"};r.showOption.blind||delete o.height,r.showOption.fade||delete o.opacity,i.hide().removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1).animate(o,r.showOption.duration||"normal",function(){t._resetStyle(i),i.wijTriggerVisibility&&i.wijTriggerVisibility(),t._trigger("show",null,t._ui(e,i[0]))})}else t._showContent(),t._blindPanel(i,"show")}:function(e,i){n(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.wijTriggerVisibility&&i.wijTriggerVisibility(),t._trigger("show",null,t._ui(e,i[0]))},p=(r.hideOption.blind||r.hideOption.fade)&&r.hideOption.duration>0?function(e,n){if(s==="Top"||s==="Bottom"){var i={duration:r.hideOption.duration,height:"toggle",opacity:"toggle"};r.hideOption.blind||delete i.height,r.hideOption.fade||delete i.opacity,n.animate(i,r.hideOption.duration||"normal",function(){t.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),n.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),t._resetStyle(n),t.element.dequeue("tabs")})}else t._saveLayout(),t._blindPanel(n,"hide")}:function(e,n,i){t.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),t._hideContent(),n.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),t.element.dequeue("tabs")},!r.disabledState&&!r.disabled&&this.anchors.bind(r.event+".tabs",function(){var e=this,i=n(this).closest("li"),s=t.panels.filter(":not(."+r.wijCSS.wijtabsHide+")"),o=n(t._sanitizeSelector(this.hash),t.element);if(i.hasAllClasses(r.wijCSS.tabsActive)&&!r.collapsible||i.hasAllClasses(r.wijCSS.stateDisabled)||i.hasAllClasses(r.wijCSS.tabsLoading)||t._trigger("select",null,t._ui(this,o[0]))===!1)return this.blur(),!1;r.selected=t.anchors.index(this),t.abort();if(r.collapsible){if(i.hasAllClasses(r.wijCSS.tabsActive))return r.selected=-1,r.cookie&&t._cookie(r.selected,r.cookie),t.element.queue("tabs",function(){p(e,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return r.cookie&&t._cookie(r.selected,r.cookie),t.element.queue("tabs",function(){h(e,o)}),t.load(t.anchors.index(this)),this.blur(),!1}r.cookie&&t._cookie(r.selected,r.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&t.element.queue("tabs",function(){p(e,s)}),t.element.queue("tabs",function(){h(e,o)}),t.load(t.anchors.index(this)),n.browser.msie&&this.blur()}),this._initScroller(),this.anchors.bind("click.tabs",function(){return!1})},t.prototype._blindPanel=function(e,t){var r=this,i=r.options,s=e.parent("."+i.wijCSS.wijtabsContent),u=["position","top","left","width"],l=t==="show"?i.showOption:i.hideOption,c,h,p;if(!s.length)return;r.list.width(r.list.width()),o&&o(e,u),e.show(),t==="show"?(e.removeClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!1),e.width(r.element.data("panel.width"))):e.width(e.width()),a?c=a(e).css({overflow:"hidden"}):c=n("<div></div>"),t==="show"&&c.css(n.extend({width:0},l.fade?{opacity:0}:{})),h=n.extend({width:t==="show"?r.element.data("panel.outerWidth"):0},l.fade?{opacity:t==="show"?1:0}:{}),p=r.list.outerWidth(!0),c.animate(h,{duration:l.duration,step:function(){var e=c.outerWidth(!0);r.element.width(p+e),s.width(Math.max(0,r.element.innerWidth()-p-6))},complete:function(){t==="hide"?(r.lis.removeClass(i.wijCSS.tabsActive).removeClass(i.wijCSS.stateActive).attr("aria-selected",!1),e.addClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!0)):e.css("width",""),f&&f(e),t==="show"&&r._restoreLayout(),r._resetStyle(e),e.dequeue(),r.element.dequeue("tabs")}})},t.prototype._hideContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._saveLayout(),t.addClass(e.wijtabsHide).attr("aria-hidden",!0),this.element.width(this.list.outerWidth(!0)))},t.prototype._showContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._restoreLayout(),t.removeClass(e.wijtabsHide).attr("aria-hidden",!1))},t.prototype._saveLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"],n=this.panels.filter(":not(."+e.wijtabsHide+")");o&&(o(this.element,t),o(this.list,t),o(this.element.find("."+e.wijtabsContent),t)),this.list.width(this.list.width()),this.element.data("panel.width",n.width()),this.element.data("panel.outerWidth",n.outerWidth(!0))},t.prototype._restoreLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"];u&&(u(this.element,t),u(this.list,t),u(this.element.find("."+e.wijtabsContent),t))},t.prototype._resetStyle=function(e){e.css({display:""}),n.support.opacity||e[0].style.removeAttribute("filter")},t.prototype._normalizeBlindOption=function(e){e.blind===undefined&&(e.blind=!1),e.fade===undefined&&(e.fade=!1),e.duration===undefined&&(e.duration=200);if(typeof e.duration=="string")try{e.duration=parseInt(e.duration,10)}catch(t){e.duration=200}},t.prototype._initScroller=function(){var e=this,t=n.inArray(this._getAlignment(!0),["Top","Bottom"])!==-1,r=0;if(!t)return;n.each(this.lis,function(t,i){var s=n(i),o,u=0,a=0;n.browser.msie&&!!e.options.scrollable&&(n.each(s.children(),function(e,t){var r=n(t);r.is("a")&&r.width(r.width()),u+=r.outerWidth(!0)}),a=u-s.width(),s.width(u)),r+=e._getLiWidth(n(i))+a}),!!this.options.scrollable&&this.element.innerWidth()<r?(this.scrollWrap===undefined&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),o&&o(this.list,["width","height","overflow"])),this.list.width(Math.ceil(r)+2),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.wijsuperpanel({allowResize:!1,hScroller:{scrollMode:"edge"},vScroller:{scrollBarVisibility:"hidden"}})):this._removeScroller()},t.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},t.prototype._tabId=function(e){var t=n(e),r,i;if(t.data&&t.data("tabid"))return t.data("tabid");if(e.href&&e.href.length){i=this._getURLParameters(e.href);if(i.tabId)return r=i.tabId,t.data("tabid",r),r}return r=e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+l(),t.data("tabid",r),r},t.prototype._getURLParameters=function(e){var t={},r,i;return e.indexOf("?")>-1&&(r=e.split("?")[1],i=r.split("&"),n.each(i,function(e,n){var r=n.split("=");r.length>1&&(t[r[0]]=r[1])})),t},t.prototype._getAlignment=function(e){var t=this.options.alignment||"top";if(e)return t.charAt(0).toUpperCase()+t.substr(1);switch(t){case"top":t="Bottom";break;case"bottom":t="Top";break;case"left":t="Right";break;case"right":t="Left"}return t},t.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},t.prototype._innerDestroy=function(e){var t=this.options,r=n("."+t.wijCSS.wijtabsContent);return this.abort(),this._removeScroller(),this.element.unbind(".tabs").removeClass(t.wijCSS.wijtabs).removeClass(t.wijCSS.tabsTop).removeClass(t.wijCSS.tabsBottom).removeClass(t.wijCSS.tabsLeft).removeClass(t.wijCSS.tabsRight).removeClass(t.wijCSS.tabs).removeClass(t.wijCSS.widget).removeClass(t.wijCSS.content).removeClass(t.wijCSS.cornerAll).removeClass(t.wijCSS.tabsCollapsible).removeClass(t.wijCSS.helperClearFix).removeData("tabs").removeAttr("role"),this.list.removeClass(t.wijCSS.tabsNav).removeClass(t.wijCSS.helperReset).removeClass(t.wijCSS.helperClearFix).removeClass(t.wijCSS.header).removeClass(t.wijCSS.cornerAll).removeAttr("role"),n.each(this.anchors,function(e,t){var r=n(t),i=r.data("href.tabs");i&&(t.href=i),r.unbind(".tabs"),n.each(["href","load","cache"],function(e,t){r.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(r,i){var s=n(i);s.data("destroy.tabs")&&!e?s.remove():s.removeClass(t.wijCSS.stateDefault).removeClass(t.wijCSS.cornerTop).removeClass(t.wijCSS.cornerBottom).removeClass(t.wijCSS.cornerLeft).removeClass(t.wijCSS.cornerRight).removeClass(t.wijCSS.tabsActive).removeClass(t.wijCSS.stateActive).removeClass(t.wijCSS.stateHover).removeClass(t.wijCSS.stateFocus).removeClass(t.wijCSS.stateDisabled).removeClass(t.wijCSS.tabsPanel).removeClass(t.wijCSS.content).removeClass(t.wijCSS.wijtabsHide).css({position:"",left:"",top:""}).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-selected").removeAttr("aria-disabled")}),r.length&&r.replaceWith(r.contents()),t.cookie&&this._cookie(null,t.cookie),this},t.prototype._cleanup=function(){var e=this.options.wijCSS;this.lis.filter("."+e.tabsLoading).removeClass(e.tabsLoading).find("span:data(label.tabs)").each(function(){var e=n(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},t.prototype._removeScroller=function(){if(!this.scrollWrap)return;this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=undefined,u&&u(this.list,["width","height","overflow"])},t.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+c());return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},t.prototype._getLiWidth=function(e){return this._parsePxToNumber(e.css("margin-left"))+this._parsePxToNumber(e.css("border-left-width"))+this._parsePxToNumber(e.css("padding-left"))+this._parsePxToNumber(e.css("width"))+this._parsePxToNumber(e.css("margin-right"))+this._parsePxToNumber(e.css("border-right-width"))+this._parsePxToNumber(e.css("padding-right"))},t.prototype._parsePxToNumber=function(e){var t=e.indexOf("px");return!t||t===-1?0:parseFloat(e.substr(0,t))},t.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},t.prototype.select=function(e){return typeof e=="string"?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):e===null&&(e=-1),e===-1&&this.options.collapsible&&(e=this.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs"),this},t.prototype.load=function(e){var t=this,r=t.options,i=t.anchors.eq(e)[0],s=n.data(i,"load.tabs"),o=n("span",i);t.abort();if(!1===t._trigger("beforeShow",null,t._ui(t.anchors[e],t.panels[e]))){t.element.dequeue("tabs");return}if(!s||t.element.queue("tabs").length!==0&&n.data(i,"cache.tabs")){t.element.dequeue("tabs");return}return t.lis.eq(e).addClass(r.wijCSS.tabsLoading),(r.spinner||t._defaults.spinner)&&o.data("label.tabs",o.html()).html(r.spinner||t._defaults.spinner),t.xhr=n.ajax(n.extend({},r.ajaxOptions,{url:s,success:function(s,o){n(t._sanitizeSelector(i.hash),t.element).html(s),t._cleanup(),r.cache&&n.data(i,"cache.tabs",!0),t._trigger("load",null,t._ui(t.anchors[e],t.panels[e]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(n,s,o){t._cleanup(),t._trigger("load",null,t._ui(t.anchors[e],t.panels[e]));try{r.ajaxOptions.error(n,s,e,i)}catch(u){}}})),t.element.dequeue("tabs"),t},t.prototype.add=function(e,t,r){r===undefined&&(r=this.anchors.length);var i=this,s=i.options,o=n((s.tabTemplate||i._defaults.tabTemplate).replace(/#\{href\}/g,e).replace(/#\{label\}/g,t)),u=e.indexOf("#")?i._tabId(n("a",o)[0]):e.replace("#",""),a=i._getAlignment(!0),f=i._getAlignment(!1),l=n("#"+u),c;return o.addClass(s.wijCSS.stateDefault).addClass(s.wijCSS["corner"+a]).data("destroy.tabs",!0).attr("role","tab").attr("aria-selected",!1),l.length||(l=n(s.panelTemplate||i._defaults.panelTemplate).attr("id",u).data("destroy.tabs",!0).attr("role","tabpanel")),l.addClass(s.wijCSS.tabsPanel).addClass(s.wijCSS.content).addClass(s.wijCSS["corner"+f]+" "+s.wijCSS.wijtabsHide).attr("aria-hidden",!0),r>=i.lis.length?(o.appendTo(i.list),i.panels.length>0?l.insertAfter(i.panels[i.panels.length-1]):(c=i.element.find("."+s.wijCSS.wijtabsContent),c.length===0&&(c=i.element),l.appendTo(c))):(o.insertBefore(i.lis[r]),l.insertBefore(i.panels[r])),s.disabledIndexes=n.map(s.disabledIndexes,function(e,t){return e>=r?++e:e}),i._removeScroller(),i._tabify(!1),i.anchors.length===1&&(s.selected=0,o.addClass(s.wijCSS.tabsActive).addClass(s.wijCSS.stateActive).attr("aria-selected",!0),l.removeClass(s.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.element.queue("tabs",function(){i.element.wijTriggerVisibility&&n(i.panels[0]).wijTriggerVisibility(),i._trigger("show",null,i._ui(i.anchors[0],i.panels[0]))}),i.load(0)),i._trigger("add",null,i._ui(i.anchors[r],i.panels[r])),i},t.prototype.remove=function(e){var t=this.options,r=this.lis.eq(e).remove(),i=this.panels.eq(e).remove();return r.hasAllClasses(t.wijCSS.tabsActive)&&this.anchors.length>1&&this.select(e+(e+1<this.anchors.length?1:-1)),t.disabledIndexes=n.map(n.grep(t.disabledIndexes,function(t,n){return t!==e},!1),function(t,n){return t>=e?--t:t}),this._removeScroller(),this._tabify(!1),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},t.prototype.enableTab=function(e){var t=this.options;if(n.inArray(e,t.disabledIndexes)===-1)return;return this.lis.eq(e).removeClass(t.wijCSS.stateDisabled).removeAttr("aria-disabled"),t.disabledIndexes=n.grep(t.disabledIndexes,function(t,n){return t!==e},!1),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},t.prototype.disableTab=function(e){var t=this.options;return e!==t.selected&&(this.lis.eq(e).addClass(t.wijCSS.stateDisabled).attr("aria-disabled",!0),t.disabledIndexes.push(e),t.disabledIndexes.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},t.prototype.url=function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},t.prototype.length=function(){return this.anchors.length},t}(e.wijmoWidget);t.wijtabs=h,h.prototype._defaults={panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'};var p=function(){function e(){this.wijCSS={wijtabs:"wijmo-wijtabs",wijtabsContent:"wijmo-wijtabs-content",wijtabsHide:"wijmo-wijtabs-hide"},this.wijMobileCSS={header:"ui-header ui-bar-c",content:"ui-content ui-body ui-body-c",stateDefault:"ui-btn-up-a",stateActive:"ui-btn-down-b"},this.alignment="top",this.sortable=!1,this.scrollable=!1,this.ajaxOptions=null,this.cache=!1,this.cookie=null,this.collapsible=!1,this.hideOption=null,this.showOption=null,this.disabledIndexes=[],this.event="click",this.idPrefix="ui-tabs-",this.panelTemplate="",this.spinner="",this.tabTemplate="",this.add=null,this.remove=null,this.select=null,this.beforeShow=null,this.show=null,this.load=null,this.disable=null,this.enable=null}return e}();h.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new p),n.wijmo.registerWidget("wijtabs",h.prototype)})(e.tabs||(e.tabs={}));var t=e.tabs})(wijmo||(wijmo={})),define("wijmo.wijtabs",function(){});var wijmo;(function(e){(function(e){var t=jQuery,n,r,i;n=function(e){var t=this;t.data={},t.reader=null,t.proxy=null,t.items=[],t.loading=null,t.loaded=null,t._constructor(e)},window.wijdatasource=n,t.extend(n.prototype,{_constructor:function(e){t.extend(this,e)},load:function(e,n){var r=this,i=r.proxy;if(t.isFunction(r.loading)&&r.loading(r,e)===!1)return;i?i.request(r,r.loaded,e):((r.items.length===0||n)&&this.read(),t.isFunction(r.loaded)&&r.loaded(r,e))},read:function(){var e=this,t=e.data;t&&e.reader?e.reader.read(e):e.items=e.data}}),r=function(e){t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e),t.isArray(e)&&(this.fields=e)},window.wijarrayreader=r,t.extend(r.prototype,{read:function(e){t.isArray(e.data)?e.items=this._map(e.data):e.items=[]},_map:function(e){var n=this,r=[];return n.fields===undefined||n.fields.length===0?(t.extend(!0,r,e),r):(t.each(e,function(e,i){var s={};t.each(n.fields,function(e,n){n.mapping&&typeof n.mapping&&window[n.mapping]&&(n.mapping=window[n.mapping]);if(t.isFunction(n.mapping))return s[n.name]=n.mapping(i),!0;var r=n.mapping!==undefined?n.mapping:n.name,o=i[r];o===undefined&&(n.defaultValue!==undefined?o=n.defaultValue:o=i),s[n.name]=o}),r.push(s)}),r)}}),i=function(e){this.options=e,t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e)},window.wijhttpproxy=i,t.extend(i.prototype,{request:function(e,n,r){var i=this,s,o;return s=t.extend({},this.options),o=s.success,s.success=function(u){t.isFunction(o)&&o(u),i._complete(u,e,n,s,r)},t.ajax(s)},_complete:function(e,n,r,i,s){n.data=i.key!==undefined?e[i.key]:e,n.read(),t.isFunction(r)&&r(n,s)}})})(e.checkbox||(e.checkbox={}));var t=e.checkbox})(wijmo||(wijmo={})),define("wijmo.wijdatasource",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijsplitter",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setFullSplit=function(e){var t=this,n=t._fields,r=e?"100%":n.width,i=e?"100%":n.height;t.element.css("width",r).css("height",i)},t.prototype._setOption=function(e,t){var r=this,i=r.options,s,o=n.extend({},i[e]);if(e==="fullSplit")r._setFullSplit(t);else if(n.isPlainObject(i[e])){e==="panel1"&&t.collapsed!==undefined?r._setPanel1Collapsed(t.collapsed):e==="panel2"&&t.collapsed!==undefined&&r._setPanel2Collapsed(t.collapsed),i[e]=n.extend(!0,i[e],t),e==="resizeSettings"&&r._initResizer();return}n.Widget.prototype._setOption.apply(r,arguments),o!==t&&(e==="orientation"?r.refresh():e==="collapsingPanel"?r.refresh():e==="fullSplit"?r.refresh(!0,!1):e==="splitterDistance"?(r.refresh(!1,!1),r._trigger("sized")):e==="showExpander"&&(s=r._fields.expander,s&&s.length&&s.css("display",t?"":"none"))),e==="disabled"&&r._handleDisabledOption(t,r.element)},t.prototype._create=function(){var e=this,t=e.element,r=e.options,i;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),r.splitterDistance==100&&(i=this.element.width()-r.panel2.minSize,r.panel1.minSize>r.splitterDistance?r.splitterDistance=r.panel1.minSize:i<r.splitterDistance&&(r.splitterDistance=i)),e._fields={width:t.width(),height:t.height()},r.fullSplit&&e._setFullSplit(!0),e._splitterify(),e._updateElementsCss(),e._updateElements(),e._bindEvents(),e._initResizer(),r.disabled&&e.disable(),e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){r.fullSplit&&(e.refresh(),e._updateElements(),e._initResizer())},"wijsplitter"),e._trigger("load",null,e)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype.destroy=function(){var e=this,t=e.options,r=e.element,i=e._fields,s=i.wrapper,o=i.expander,u=i.bar,a=i.panel1,f=i.panel2,l=i.originalStyle,c=e.widgetName,h=i.oriPnl1Content,p=i.oriPnl2Content,d=i.oriPnl1ContentStyle,v=i.oriPnl2ContentStyle,m=t.wijCSS,g=m.vSplitterCss,y=m.vSplitterCssPrefix,b=m.hSplitterCss,w=m.hSplitterCssPrefix,E=m.panelCss;n.fn.resizable&&a&&a.n.is(":ui-resizable")&&a.n.resizable("destroy"),h&&(h.removeClass(y+a.contentCss).removeClass(m.hSplitterCssPrefix+a.contentCss).removeClass(m.content),d===undefined?h.removeAttr("style"):h.attr("style",d),h.appendTo(r)),p&&(p.removeClass(y+f.contentCss).removeClass(m.hSplitterCssPrefix+f.contentCss).removeClass(m.content),v===undefined?p.removeAttr("style"):p.attr("style",v),p.appendTo(r)),a.n.unbind("."+c),o.unbind("."+c),u.unbind("."+c),n(window).unbind("."+c),s.remove(),r.removeClass(g).removeClass(b),l===undefined?r.removeAttr("style"):r.attr("style",l),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),e._fields=null},t.prototype.refresh=function(e,t){var r=this,i=r._fields,s=i.panel1;if(i._isResizing)return;(t||t===undefined)&&r._updateElementsCss(),r._updateElements();if(e||e===undefined){if(!n.fn.resizable)return;s&&s.n.is(":ui-resizable")&&s.n.resizable("destroy"),r._initResizer()}},t.prototype._createDisabledDiv=function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return n.browser.msie&&n.extend(u,{"background-color":"#fff",opacity:.1}),n("<div></div>").addClass("ui-disabled").css(u)},t.prototype._splitterify=function(){var e=this,t=e.element,r=e.options,i=e._fields,s,o,u,a,f={n:undefined,content:t.find(">div:eq(0)")},l={n:undefined,content:t.find(">div:eq(1)")};i.originalStyle=t.attr("style"),s=n("<div></div>").appendTo(t),f.n=n("<div></div>").appendTo(s),f.content.length===0?f.content=n("<div></div>"):(i.oriPnl1Content=f.content,i.oriPnl1ContentStyle=f.content.attr("style")),f.content.appendTo(f.n),o=n("<div></div>").appendTo(s),r.barZIndex!==-1&&o.css("z-index",r.barZIndex),u=n("<div></div>").appendTo(o).attr("role","button"),a=n("<span></span>").appendTo(u),l.n=n("<div></div>").appendTo(s),l.content.length===0?l.content=n("<div></div>"):(i.oriPnl2Content=l.content,i.oriPnl2ContentStyle=l.content.attr("style")),l.content.appendTo(l.n),i.wrapper=s,i.panel1=f,i.panel2=l,i.bar=o,i.expander=u,i.icon=a},t.prototype._updateElementsCss=function(){var e=this,t=e.element,n=e.options,r=n.orientation==="vertical",i=e._fields,s=i.wrapper,o=n.collapsingPanel,u=n.collapsingPanel==="panel1"?"panel2":"panel1",a=i.bar,f=i.expander,l=i.icon,c=n.wijCSS,h=c.vSplitterCss,p=c.vSplitterCssPrefix,d=c.hSplitterCss,v=c.hSplitterCssPrefix,m=c.panelCss;t.removeClass(h).removeClass(d).addClass(r?h:d),s.attr("class",c.wrapperCss),i[o].n.removeClass(p+m[o].n).removeClass(v+m[o].n).addClass((r?p:v)+m[o].n),i[o].content.removeClass(p+m[o].content).removeClass(v+m[o].content).removeClass(c.content).addClass((r?p:v)+m[o].content).addClass(c.content),a.attr("class",(r?p:v)+c.barCss+" "+c.header).css("width","").css("height",""),f.attr("class",c.cornerCssPrefix+(r?"bl "+p:"tr "+v)+c.expanderCss+" "+c.stateDefault).css("left","").css("top",""),l.attr("class",c.icon+" "+(r?c.iconArrowLeft:c.iconArrowUp)),i[u].n.removeClass(p+m[u].n).removeClass(v+m[u].n).addClass((r?p:v)+m[u].n),i[u].content.removeClass(p+m[u].content).removeClass(v+m[u].content).removeClass(c.content).addClass((r?p:v)+m[u].content).addClass(c.content),e._updateExpanderCss()},t.prototype._updateExpanderCss=function(){var e=this,t=e.options,n=e._fields,r=n.expander,i=n.icon,s=t.wijCSS,o=s.cornerCssPrefix,u=t.orientation==="vertical",a=t.collapsingPanel!=="panel1",f=u?s.vSplitterCssPrefix:s.hSplitterCssPrefix,l=(u?1:0)*2+(a?1:0),c=["bl","tr","tr","bl"][l],h=["br","tl"][+a],p=[s.iconArrowDown,s.iconArrowUp,s.iconArrowRight,s.iconArrowLeft][l],d=["tr","bl","bl","tr"][l],v=["tl","br"][+a],m=[s.iconArrowUp,s.iconArrowDown,s.iconArrowLeft,s.iconArrowRight][l];r.removeClass(f+t.collapsingPanel+"-"+s.expandedCss).removeClass(f+t.collapsingPanel+"-"+s.collapsedCss).removeClass(o+c).removeClass(o+h).removeClass(o+d).removeClass(o+v),i.removeClass(p).removeClass(m),t.panel1.collapsed||t.panel2.collapsed?(r.addClass(o+c).addClass(o+h).addClass(f+t.collapsingPanel+"-"+s.collapsedCss),i.addClass(p)):(r.addClass(o+d).addClass(o+v).addClass(f+t.collapsingPanel+"-"+s.expandedCss),i.addClass(m))},t.prototype._AddVisiblity=function(e){e.wijTriggerVisibility&&e.wijTriggerVisibility()},t.prototype._updateElements=function(){var e=this,t=e.element,n=e.options,r=n.splitterDistance,i=n.collapsingPanel,s=n.collapsingPanel==="panel1"?"panel2":"panel1",o=e._fields,u=o.wrapper,a=o.panel1,f=o.panel2,l=o.bar,c=o.expander,h=t.width(),p=t.height(),d,v;u.height(p),e._setPanelsScrollMode(),n.orientation==="vertical"?(d=l.outerWidth(!0),r>h-d&&(r=h-d),u.width(h*2),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?h-d:h):(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),!n.panel1.collapsed&&!n.panel2.collapsed&&c.addClass(n.wijCSS.vSplitterCssPrefix+n.collapsingPanel+"-"+n.wijCSS.expandedCss),i==="panel1"?(o.panel1.n.height(p).width(r),o.panel2.n.height(p).width(h-r-d)):(o.panel1.n.height(p).width(r-d),o.panel2.n.height(p).width(h-r)),o.panel1.content.outerHeight(p,!0),l.outerHeight(p,!0),o.panel2.content.outerHeight(p,!0),c.css("cursor","pointer").css("top",p/2-c.outerHeight(!0)/2)):(v=l.outerHeight(!0),r>p-v&&(r=p-v),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?p-v:p):(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),i==="panel1"?(o.panel1.n.width(h).height(r),o.panel2.n.width(h).height(p-r-v),o.panel1.content.outerHeight(r,!0),o.panel2.content.outerHeight(p-r-v,!0)):(o.panel1.n.width(h).height(r-v),o.panel2.n.width(h).height(p-r),o.panel1.content.outerHeight(r-v,!0),o.panel2.content.outerHeight(p-r,!0)),c.css("cursor","pointer").css("left",h/2-c.outerWidth(!0)/2)),c.css("display",n.showExpander?"":"none")},t.prototype._bindEvents=function(){var e=this,t=e.options,r=e._fields,i=r.bar,s=r.expander,o=e.widgetName;s.bind("mouseover."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;s.removeClass(t.wijCSS.stateHover).removeClass(t.wijCSS.stateActive)}).bind("mousedown."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateActive)}).bind("mouseup."+o,function(n){if(t.disabled)return;s.removeClass(t.wijCSS.stateActive),t.collapsingPanel==="panel1"?e._setPanel1Collapsed(!t.panel1.collapsed,n):e._setPanel2Collapsed(!t.panel2.collapsed,n)}),i.bind("mouseover."+o,function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),r.panel1.n.bind("animating."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sizing",n,null)}).bind("animated."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sized",n,null)}),e.element.on("mouseover."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).on("mouseout."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),n(window).bind("resize."+o,function(n){if(t.disabled)return;t.fullSplit&&e.element.is(":visible")&&(e._updateElements(),e._initResizer())})},t.prototype._setPanel1Collapsed=function(e,t){var r=this,i=r.options,s=i.panel1.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel1"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel1.collapsed=e,e?(i.panel2.collapsed=!1,i.collapsingPanel==="panel2"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel1"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._setPanel2Collapsed=function(e,t){var r=this,i=r.options,s=i.panel2.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel2"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel2.collapsed=e,e?(i.panel1.collapsed=!1,i.collapsingPanel==="panel1"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel2"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._initResizer=function(){var e=this,t=e.element,r=e.options,i=e._fields,s=i.bar,o=r.collapsingPanel,u=r.collapsingPanel==="panel1"?"panel2":"panel1",a=r.resizeSettings,f=a.animationOptions,l=f.disabled?0:f.duration,c=t.width(),h=t.height(),p,d,v,m,g,y,b;if(!n.fn.resizable)return;r.orientation==="vertical"?(p=s.outerWidth(!0),d=c-p-r[u].minSize,v=r[o].minSize,v<2&&(v=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minWidth:v,maxWidth:d,handles:"e",helper:r.wijCSS.vSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})):(m=s.outerHeight(!0),g=h-m-r[u].minSize,y=r[o].minSize,y<2&&(y=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minHeight:y,maxHeight:g,handles:"s",helper:r.wijCSS.hSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0;var t=i.panel1.content.find("iframe")[0];t&&e._addTransparentDivForIframe(t,i.panel1);var n=i.panel2.content.find("iframe")[0];n&&e._addTransparentDivForIframe(n,i.panel2)},stop:function(){i._isResizing=!1;var e=i.panel1.content.find("iframe")[0];if(e){var t=n(e).parent().children()[0];n(t).remove()}var r=i.panel2.content.find("iframe")[0];if(r){var s=n(r).parent().children()[0];n(s).remove()}}})),b=n(".ui-resizable-handle",t),r[u].collapsed?b.hide():b.show(),n.browser.msie&&parseInt(n.browser.version)<7&&r.orientation==="vertical"&&b.height(t.height())},t.prototype._addTransparentDivForIframe=function(e,t){var r=t.content.width()-20,i=t.content.height(),s=n("<div style='width:"+r+"px; height:"+i+"px; background-color:gray; position:absolute; z-index:1000; filter:alpha(Opacity=0); opacity: 0'>");s.prependTo(t.content)},t.prototype._adjustLayout=function(e){var t=e.options,n=e._fields,r=n.panel1,i=t.orientation==="vertical"?r.n.width():r.n.height();if(t.splitterDistance===i)return;t.splitterDistance=i,e._updateElements()},t.prototype._setPanelsScrollMode=function(){var e=this,t=e._fields,r=e.options,i=[r.panel1.scrollBars,r.panel2.scrollBars];n.each([t.panel1,t.panel2],function(e,t){i[e]==="auto"?t.content.css("overflow","auto"):i[e]==="both"?t.content.css("overflow","scroll"):i[e]==="none"?t.content.css("overflow","hidden"):i[e]==="horizontal"?t.content.css("overflow-x","scroll").css("overflow-y","hidden"):i[e]==="vertical"&&t.content.css("overflow-x","hidden").css("overflow-y","scroll")})},t}(e.wijmoWidget);t.wijsplitter=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijsplitter')",this.sizing=null,this.sized=null,this.expand=null,this.collapse=null,this.expanded=null,this.collapsed=null,this.barZIndex=-1,this.showExpander=!0,this.splitterDistance=100,this.orientation="vertical",this.fullSplit=!1,this.resizeSettings={animationOptions:{duration:100,easing:"swing",disabled:!1},ghost:!1},this.panel1={minSize:1,collapsed:!1,scrollBars:"auto"},this.panel2={minSize:1,collapsed:!1,scrollBars:"auto"},this.collapsingPanel="panel1",this.wijCSS={cornerCssPrefix:"ui-corner-",arrowCssPrefix:"ui-icon-triangle-1-",panelCss:{panel1:{n:"panel1",content:"panel1-content"},panel2:{n:"panel2",content:"panel2-content"}},wrapperCss:"wijmo-wijsplitter-wrapper",hSplitterCss:"wijmo-wijsplitter-horizontal",vSplitterCss:"wijmo-wijsplitter-vertical",hSplitterCssPrefix:"wijmo-wijsplitter-h-",vSplitterCssPrefix:"wijmo-wijsplitter-v-",collapsedCss:"collapsed",expandedCss:"expanded",resizeHelperCss:"resize-helper",barCss:"bar",expanderCss:"expander"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"}}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijsplitter",i.prototype),n.ui!=null&&n.ui.plugin!=null&&n.ui.plugin.add("resizable","wijanimate",{stop:function(e,t){var r=n(this).data("uiResizable"),i=r.options,s=r.element,o=r._proportionallyResizeElements,u=o.length&&/textarea/i.test(o[0].nodeName),a=u&&n.ui.hasScroll(o[0],"left")?0:r.sizeDiff.height,f=u?0:r.sizeDiff.width,l,c,h;s.css("width",r.originalSize.width).css("height",r.originalSize.height),l={width:r.size.width-f,height:r.size.height-a},c=parseInt(s.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(s.css("top"),10)+(r.position.top-r.originalPosition.top)||null,i.disabledAnimate?(s.css(n.extend(l,h&&c?{top:h,left:c}:{})),s.trigger("animated")):s.animate(n.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var t={width:parseInt(s.css("width"),10),height:parseInt(s.css("height"),10),top:parseInt(s.css("top"),10),left:parseInt(s.css("left"),10)};o&&o.length&&n(o[0]).css({width:t.width,height:t.height}),r._updateCache(t),r._propagate("resize",e),s.trigger("animating")},complete:function(){s.trigger("animated")}})}})})(e.splitter||(e.splitter={}));var t=e.splitter})(wijmo||(wijmo={})),define("wijmo.wijsplitter",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijmenu",i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r._itemWidgetName="wijmenuitem",r.prototype._preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},r.prototype._initState=function(){var e=this;e.options.items||(e.options.items=[])},r.prototype._create=function(){var t=this,i=t.options,s=i.direction,o=i.mode,u,a=t.element,f,l=e.getKeyCodeEnum(),c=i.disabled;t._initState(),a.is(":hidden")&&a.wijAddVisibilityObserver&&a.wijAddVisibilityObserver(function(){t.refresh(),a.wijRemoveVisibilityObserver&&a.wijRemoveVisibilityObserver()},"wijmenu"),a.data("wijmomenu",n.camelCase(t.widgetFullName)),t.clickNameSpace="click.wijmenudoc"+t._newId(),a.hide(),t.cssPre="wijmo-wijmenu",t.nowIndex=9999,t.activeItem=null,t.refresh(),a.attr("tabIndex",0),t._getDisabled()&&(t.disable(),i.disabledState===!0&&(i.disabled=c)),a.bind("keydown.wijmenuEvent",function(e){if(t._getDisabled())return;o==="sliding"&&t._getSublist().stop(!0,!0);var n=t.activeItem,a,c,h=i.orientation;n?(a=n._isRoot(),f=n._getSublist()):a=!0;switch(e.keyCode){case l.PAGE_UP:t.previousPage(e),t._preventEvent(e);break;case l.PAGE_DOWN:t.nextPage(e),t._preventEvent(e);break;case l.UP:if(h==="vertical"||o==="sliding"||!a)t.previous(e),t._preventEvent(e);break;case l.DOWN:h==="vertical"||o==="sliding"||!a?(t.next(e),t._preventEvent(e)):n&&o==="flyout"&&r._hasVisibleSubMenus(n)&&f.is(":hidden")&&n._showFlyoutSubmenu(e,function(){t.activate(e,n._getFirstSelectableSubItem())});break;case l.RIGHT:h==="horizontal"&&a&&o==="flyout"?(s==="rtl"?t.previous(e):t.next(e),t._preventEvent(e)):n&&(u=n.getParent(),s==="rtl"?t._keyDownToCloseSubmenu(o,e,u):t._keyDownToOpenSubmenu(n,o,e,f));break;case l.LEFT:h==="horizontal"&&a&&o==="flyout"?(s==="rtl"?t.next(e):t.previous(e),t._preventEvent(e)):(n&&(u=n.getParent()),s==="rtl"?t._keyDownToOpenSubmenu(n,o,e,f):t._keyDownToCloseSubmenu(o,e,u));break;case l.ENTER:if(!n)return;c=n._getLink();if(o==="flyout")break;t.select(),c.is("a")&&c.attr("href")==="#"&&t._preventEvent(e);break;case l.TAB:t.next(e),t._preventEvent(e)}})},r.prototype._keyDownToOpenSubmenu=function(e,t,n,i){var s=this;t==="flyout"&&r._hasVisibleSubMenus(e)?i.is(":hidden")&&e._showFlyoutSubmenu(n,function(){s.activate(n,e._getFirstSelectableSubItem())}):t==="sliding"&&i.length>0&&e._getLink().trigger("click",e._getFirstSelectableSubItem())},r.prototype._keyDownToCloseSubmenu=function(e,t,r){var i=this,s=i.options,o;e==="flyout"?r&&(r._hideCurrentSubmenu(t),i.activate(t,r)):(s.backLink&&i._backLink&&i._backLink.is(":visible")&&i._backLink.trigger("click",function(){r&&i.activate(t,r)}),o=n("."+s.wijCSS.wijmenuBreadcrumb,i.domObject.menucontainer).find("li a"),o.length>0&&o.eq(o.length-2).trigger("click",function(){r&&i.activate(t,r)}))},r.prototype._createMenuItems=function(){var e=this,t=[],i=e.options,s=e.options.items.length,o=e._getSublist().children("li").length,u,a,f;for(u=0;u<s-o;u++)e._getSublist().append("<li>");return i.ensureSubmenuOnBody&&i.mode==="flyout"&&(e._submenuContainer=n("<div>").addClass(i.wijCSS.helperReset).addClass(i.wijCSS.widget).addClass(i.wijCSS.header).addClass(i.wijCSS.wijmenu).addClass(i.wijCSS.wijmenuSubmenuContainer),i.orientation==="horizontal"&&i.mode==="flyout"&&e._submenuContainer.addClass(i.wijCSS.wijmenuHorizontal),f=n("<ul>").addClass(i.wijCSS.wijmenuList).addClass(i.wijCSS.helperReset).data(n.camelCase(e.widgetFullName),e).data("wijmomenu",n.camelCase(e.widgetFullName))),n(">li",e._getSublist()).each(function(s,o){var u=n(this),l=r._getMenuItemOptions(e.options,s),c,h;return a=e._createItemWidget(u,l),t.push(a),e.options.items[s]=a.options,i.ensureSubmenuOnBody&&i.mode==="flyout"&&(h=a._getSublist(),e._bindMousehoverEvent(h),h.children().length>0&&(c=n("<li>").addClass(i.wijCSS.widget).addClass(i.wijCSS.wijmenuItem).addClass(i.wijCSS.stateDefault).addClass(i.wijCSS.cornerAll).addClass(i.wijCSS.wijmenuParent).addClass(i.wijCSS.header).append(h),n(c).appendTo(f))),i.ensureSubmenuOnBody&&i.mode==="flyout"&&n(e._submenuContainer).append(f).appendTo("body"),this}),t},r.prototype._createItemWidget=function(e,t){var i=r._itemWidgetName;return n.fn[i]&&e[i](t),r._getItemWidget(e)},r.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo(n.domObject.menucontainer)):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},r.prototype._getDisabled=function(){var e=this,t=e.options;return t.disabledState===!0||t.disabled===!0},r.prototype._createDisabledDiv=function(e){return n("<div></div>").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},r.prototype._innerDestroy=function(){var e=this,t=e.options;e.destroying=!0,e[t.mode==="flyout"?"_killFlyout":"_killDrilldown"](),e._killMenuItems(),e._killtrigger(),e._killElement(),t.ensureSubmenuOnBody&&t.mode==="flyout"&&e._submenuContainer&&e._submenuContainer.remove(),e.destroying=!1},r.prototype.destroy=function(){var e=this;this._innerDestroy(),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),t.prototype.destroy.call(this)},r.prototype.activate=function(e,t){if(!t)return;var n=this,i=n.options,s=n.domObject.scrollcontainer,o,u,a=!1,f=!0;o=(t.jquery?t:t.element).eq(0);if(n.activeItem&&n.activeItem.element.get(0)===o.get(0))return;n.deactivate(e),n.activeItem=r._getItemWidget(o),u=o.children(":first"),n._trigger("focus",e,{item:n.activeItem}),n.options.mode==="sliding"&&(f=o.parent().is("."+i.wijCSS.wijmenuCurrent),a=f&&n._hasScroll()&&s.wijsuperpanel("needToScroll",o),a&&(n._linkContainer.link=u,n._linkContainer.needToFocus=!0,s.wijsuperpanel("scrollChildIntoView",o))),u.addClass(i.wijCSS.stateFocus).end(),n.element.removeAttr("aria-activedescendant"),n.element.attr("aria-activedescendant",o.attr("id")),f&&!a&&u.is("a")&&u.focus()},r.prototype.deactivate=function(e){var t=this,n=t.options,r=t.activeItem;if(!r)return;setTimeout(function(){r._getLink().removeClass(n.wijCSS.stateFocus).removeAttr("id"),t._trigger("blur")},0),t.activeItem=null},r.prototype.next=function(e){this._move("next",function(e){return e._getFirstSelectableSubItem()},e)},r.prototype.previous=function(e){this._move("previous",function(e){return e._getLastSelectableSubItem()},e)},r.prototype.first=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getFirstSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.last=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getLastSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.nextPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.last()){t.activate(e,a._getFirstSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=o-(t.offset().top-s+t.height()),i=t.height();return r<i&&r>-i}),u.length?u=u[u.length-1]:u=a._getLastSelectableSubItem(),t.activate(e,u)}else!i||t.last()?f=a._getFirstSelectableSubItem():f=a._getLastSelectableSubItem(),t.activate(e,f)},r.prototype.previousPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.first()){t.activate(e,a._getLastSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=t.offset().top-s+o-t.height(),i=t.height();return r<i&&r>-i}),u.length?u=u[0]:u=a._getFirstSelectableSubItem(),t.activate(e,u)}else!i||t.first()?f=a._getLastSelectableSubItem():f=a._getFirstSelectableSubItem(),t.activate(e,f)},r.prototype.select=function(e){var t=this,n=t.activeItem,r;t._trigger("select",e,{item:n}),t.options.checkable&&(r=!n.options.selected,n._setOption("selected",r))},r.prototype._getActiveItemElement=function(){return this.activeItem?this.activeItem.element:null},r.prototype.setItemDisabled=function(e,t){var r=n(e,this.element),i=this.options;r.find("."+i.wijCSS.wijmenuItem+">a").attr("disabled",t),r.find(">a").toggleClass(i.wijCSS.stateDisabled,t)},r.prototype._setOption=function(e,t){var n=this;if(n.destroying)return;n["_set_"+e]&&n["_set_"+e](t),n.options[e]=t,e==="disabled"&&n._handleDisabledOption(t,n.domObject.menucontainer)},r.prototype._set_items=function(e){var t=this;t._getSublist().children().remove(),t.options.items=e,t.refresh()},r.prototype._set_mode=function(e){var t=this;t._innerDestroy(),t.options.mode=e,t.refresh()},r.prototype._set_backLink=function(e){var t=this,r=t.options,i;this.options.backLink=e,t.options.mode==="sliding"&&(t._killDrilldown(),t._drilldown(),i=n("."+r.wijCSS.wijmenuBreadcrumb,t.domObject.menucontainer),t._resetDrilldownMenu(i))},r.prototype._set_direction=function(e){var t=this;t._innerDestroy(),t.refresh()},r.prototype._set_orientation=function(e){var t=this,r=t.domObject.menucontainer,i=t.options.direction,s="ui-icon-triangle-1-",o=i==="rtl"?"w":"e",u=e==="horizontal"?o:"s",a=e==="horizontal"?"s":o;r.removeClass(t.cssPre+"-vertical "+t.cssPre+"-horizontal"),t.options.mode==="flyout"?(r.addClass(t.cssPre+"-"+e),n.each(t.getItems(),function(e,t){if(t.getItems().length===0)return;t._getLink().find("."+s+u).removeClass(s+u+" "+s+a).addClass(s+a)})):r.addClass(t.cssPre+"-vertical")},r.prototype._getTriggerEle=function(){return r._getOuterElement(this.options.trigger,"."+this.options.wijCSS.wijmenu)},r.prototype._set_triggerEvent=function(e){var t=this,n=t.options,r=t._getTriggerEle();t._killtrigger(),n.triggerEvent=e,r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._set_trigger=function(e){var t=this,n=t.options,r;t._killtrigger(),n.trigger=e,r=t._getTriggerEle(),r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._initTrigger=function(e){var t=this.options,r=t.triggerEvent,i=this,s=i.domObject.menucontainer,o=".wijmenuEvent";e.is("iframe")&&(e=n(e.get(0).contentWindow.document));switch(r){case"click":e.bind(r+o,function(e){t.mode!=="popup"&&i._displayMenu(e),e.stopPropagation()});break;case"mouseenter":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"dblclick":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"rtclick":e.bind("contextmenu"+o,function(e){s.hide(),i._displayMenu(e),e.preventDefault(),e.stopPropagation()})}},r.prototype._killtrigger=function(){var e=this.options,t;e.trigger!==""&&(t=n(e.trigger),t.is("iframe")&&(t=n(t.get(0).contentWindow.document)),t&&t.length>0&&t.unbind(".wijmenuEvent").unbind("wijmenuEvent"))},r.prototype._move=function(e,t,n){var i=this,s=i._getActiveItemElement(),o,u,a;if(!s||!s.length){i.activate(n,t(i));return}a=r._getItemWidget(s),o=a[e](),u=a._getParentOrMenu(),o?i.activate(n,o):i.activate(n,t(u))},r.prototype._bindMousehoverEvent=function(e){var t=this,r=t.options;e.delegate("li>."+r.wijCSS.wijmenuLink,"mouseenter.wijmenuEvent",function(){var e=n(this).hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||e)return;n(this).addClass(r.wijCSS.stateHover).addClass(r.wijCSS.stateDefault)}).delegate("li>."+r.wijCSS.wijmenuLink,"mouseleave.wijmenuEvent",function(){var e=n(this).hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||e)return;n(this).removeClass(r.wijCSS.stateHover).removeClass(r.wijCSS.stateDefault),n(this).data("subMenuOpened")&&n(this).addClass(r.wijCSS.stateActive)})},r.prototype.refresh=function(){var e=this,t=e.element,r=e.options,i=r.direction,s,o,u,a,f;e.domObject&&e._innerDestroy();if(t.is("ul"))e._rootMenu=t,s=t.wrap("<div></div>").parent(),o=s.wrap("<div></div>").parent();else{if(!t.is("div"))return;e._rootMenu=n("ul:first",t),s=t,o=t.wrap("<div></div>").parent()}i==="rtl"&&e._rootMenu.addClass(r.wijCSS.wijmenuRtl),s.addClass("scrollcontainer checkablesupport"),o.addClass(r.wijCSS.widget).addClass(r.wijCSS.header).addClass(r.wijCSS.wijmenu).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).attr("aria-activedescendant",r.wijCSS.activeMenuitem),r.orientation==="horizontal"&&r.mode==="flyout"&&o.addClass(r.wijCSS.wijmenuHorizontal),u={scrollcontainer:s,menucontainer:o},e.domObject=u,e._getSublist().data("topmenu",!0),e._getSublist().hasAllClasses(r.wijCSS.wijmenuList)||e._getSublist().addClass(r.wijCSS.wijmenuList).addClass(r.wijCSS.helperReset),e._items=e._createMenuItems(),t.show(),e._bindMousehoverEvent(t),this[r.mode==="flyout"?"_flyout":"_drilldown"](),r.trigger!==""&&(a=e._getTriggerEle(),a.length>0&&(o.hide(),e._initTrigger(a))),n(document).bind(e.clickNameSpace,function(t){var i=r.trigger;if(n(t.target).parent().is("."+r.wijCSS.wijmenuAllLists))return;if(n(t.target).closest(r.trigger).is(r.trigger))return;var s=n(t.target).closest("."+r.wijCSS.wijmenu);if(s.length===0){if(r.mode==="sliding"){f=n("."+r.wijCSS.wijmenuBreadcrumb,o);if(r.trigger==="")return;e._resetDrilldownMenu(f)}else if(r.mode==="flyout"&&r.triggerEvent!=="mouseenter"){e._hideAllMenus(t);return}a&&a.length>0&&e._hideMenu(t)}})},r.prototype._flyout=function(){var e=this.domObject.menucontainer,t=this.options,r=this.getItems();e.attr("role","menu"),t.orientation==="horizontal"&&e.attr("role","menubar"),n.each(r,function(e,t){t._flyout()})},r.prototype._hideAllMenus=function(e){var t=this,r,i,s=function(t){t.getItems().length>0&&(n.each(t.getItems(),function(e,t){s(t)}),t._hideSubmenu(!1,e))};n.each(t._items,function(e,t){s(t)});if(t.options.trigger!==""){r=t.domObject.menucontainer;if(r.data("isAnimated"))return;i=t._getTriggerEle();if(i.length===0)return;t._hideMenu(e)}},r.prototype.hideAllMenus=function(e){this._hideAllMenus(e)},r.prototype._killFlyout=function(){n.each(this.getItems(),function(){this._killFlyout()})},r.prototype._killElement=function(){var e=this,t=e.options,r=e._getSublist();r.removeClass(t.wijCSS.wijmenuList).removeClass(t.wijCSS.helperReset).removeClass(t.wijCSS.wijmenuContent).removeClass(t.wijCSS.helperClearFix),n(document).unbind(e.clickNameSpace),e.element.is("ul")?e.element.unwrap().unwrap():e.element.unwrap(),e.domObject=null,e.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject"),r.undelegate(".wijmenuEvent")},r.prototype._killMenuItems=function(){var e=this,t=e.getItems(),n;for(n=t.length-1;n>=0;n--)t[n].destroy(!0);e._items.length=0},r.prototype._sroll=function(){var e=this.domObject.scrollcontainer,t=n.extend({hScroller:{scrollBarVisibility:"hidden"}},this.options.superPanelOptions);e.height(this.options.maxHeight),e.wijsuperpanel(t)},r.prototype._initScrollCallback=function(){var e=this,t=e.domObject.scrollcontainer;e._linkContainer={link:null,needToFocus:!1},t.wijsuperpanel({scrolled:function(){var t=e._linkContainer.link;e._linkContainer.needToFocus&&t&&t.is("a")&&(t.focus(),e._linkContainer.needToFocus=!1)}})},r.prototype._resetScroll=function(e){var t=this,n=t._rootMenu.parent(),r=5,i=t.domObject.scrollcontainer,s=e._getSublist();n.height(s.height()),i.wijsuperpanel("option","hScroller",{scrollValue:0}),i.wijsuperpanel("option","vScroller",{scrollValue:0}),i.wijsuperpanel("paintPanel"),t._hasScroll()&&(s.prev().length>0&&(r=s.prev().css("padding-left").replace(/px/g,"")),s.width(i.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-r),n.height(s.height()),i.wijsuperpanel("paintPanel"))},r.prototype._hasScroll=function(){var e=this.domObject.scrollcontainer;return e.data("wijmoWijsuperpanel").vNeedScrollBar},r.prototype._resetDrillChildMenu=function(e){var t=this.options;e.removeClass(t.wijCSS.wijmenuScroll).removeClass(t.wijCSS.wijmenuCurrent).height("auto")},r.prototype._resetDrilldownMenu=function(e,t){var r=this,i=r.options,s=r._getSublist(),o=r.domObject.menucontainer,u=n("<li>"+i.crumbDefaultText+"</li>").addClass(i.wijCSS.wijmenuBreadcrumbText),a=function(e){n.each(e,function(e,t){var n=t._getSublist(),i=t.getItems();n.hide(),r._resetDrillChildMenu(n),i.length>0&&a(i)})};n("."+i.wijCSS.wijmenuCurrent,o).removeClass(i.wijCSS.wijmenuCurrent),s.animate({left:0},i.showDuration,null,function(){a(r.getItems()),s.addClass(i.wijCSS.wijmenuCurrent),t&&t()}),n("."+i.wijCSS.wijmenuAllLists,o).find("span").remove(),e.empty().append(u),n("."+i.wijCSS.wijmenuFooter,o).empty().hide(),r._resetScroll(r)},r.prototype._drilldown=function(){var e=this,t=e._getSublist(),i=e.domObject.menucontainer.attr("role","menu"),s,o=e.options,u=o.direction,a=n("<ul></ul>").addClass(o.wijCSS.wijmenuBreadcrumb).addClass(o.wijCSS.stateDefault).addClass(o.wijCSS.cornerAll).addClass(o.wijCSS.helperClearFix),f=n("<li>"+o.crumbDefaultText+"</li>").addClass(o.wijCSS.wijmenuBreadcrumbText),l=n('<li><a href="#">'+o.topLinkText+"</a></li>").addClass(o.wijCSS.wijmenuAllLists);t.wrap("<div>").parent().css("position","relative"),i.addClass(o.wijCSS.wijmenuIpod).addClass(o.wijCSS.wijmenuContainer),o.backLink?a.addClass(o.wijCSS.wijmenuFooter).appendTo(i).hide():a.addClass(o.wijCSS.wijmenuHeader).prependTo(i),o.backLink||a.append(f),s=i.width(),t.addClass(o.wijCSS.wijmenuContent).addClass(o.wijCSS.wijmenuCurrent).addClass(o.wijCSS.content).addClass(o.wijCSS.helperClearFix).css({width:s}),n.each(e.getItems(),function(e,t){t._setDrilldownUlStyle()}),e._sroll(),e._initScrollCallback(),e._resetScroll(e),e.element.data("firstLeftValue",parseFloat(t.css("left"))),t.delegate("li>."+o.wijCSS.wijmenuLink,"click",function(s,f){var c=n(this).parent(),h=c.attr("disabled"),p,d,v,m,g,y,b,w,E,S=r._getItemWidget(c),x,T;if(e._getDisabled()||h)return;if(e._isSliding)return;t.stop(!0,!0),E=r._hasVisibleSubMenus(S);if(!E){e._leafNodeClick(s,S,a);return}p=S._getSublist();if(p.hasAllClasses(o.wijCSS.wijmenuCurrent))return;if(!e._trigger("showing",s,S))return;e._isSliding=!0,d=S._getParentOrMenu()._getSublist(),v=d.data("topmenu")?0:parseFloat(t.css("left")),u==="rtl"?y=Math.round(v+parseFloat(i.width().toString())):y=Math.round(v-parseFloat(i.width().toString())),b=n("."+o.wijCSS.wijmenuFooter,i),w=function(t,s){var u=t,a=n("."+o.wijCSS.wijmenuCurrent,i),f,l;if(a.get(0)===e._getSublist().get(0))return;s?(f=s._getSublist(),l=s):(f=a.parent().closest("ul",i[0]),l=r._getItemWidget(a.parent())._getParentOrMenu()),a.hide().attr("aria-expanded","false"),e._resetDrillChildMenu(a),e._resetScroll(l),f.addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),f.hasAllClasses(o.wijCSS.wijmenuContent)&&(u.remove(),b.hide())},e._resetDrillChildMenu(d),e._resetScroll(S),e._slidingAnimation(t,y,function(){e._trigger("shown",s,S),e.activate(s,f||S),e.select(s),e._isSliding=!1}),p.show().addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),o.backLink?b.find("a").size()===0&&(b.show(),x=n("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconArrowLeft),T=n("<span></span>").addClass(o.wijCSS.wijmenuBacklinktext),e._backLink=n('<a href="#"></a>').append(x).append(T).appendTo(b).click(function(r,s){if(e._getDisabled())return;var o=e._getCurrentItemInSliding(),a=n(this),f;if(!e._trigger("hidding",r,o))return;t.stop(!0,!0);if(u==="rtl")f=Math.round(t.css("left").replace("px",""))-Math.round(i.width());else{f=Math.round(t.css("left").replace("px",""))+Math.round(i.width());if(f>v)return}e._slidingAnimation(t,f,function(){e._trigger("hidden",r,o),w(a),s&&s()}),r.preventDefault()}),T.width(b.width()-x.width()),T.text(o.backLinkText)):(a.find("li").size()===1&&(a.empty().append(l),l.find("a").click(function(t,r){var i=n(this).parent(),s=e._getCurrentItemInSliding();e._slidingMenu(t,i,s,null,function(t){t?(w(null,t),r&&r()):e._resetDrilldownMenu(a,r)}),t.preventDefault()})),n("."+o.wijCSS.wijmenuCurrentCrumb,i).removeClass(o.wijCSS.wijmenuCurrentCrumb),m=S._getLink().text(),g=n("<li></li>").addClass(o.wijCSS.wijmenuCurrentCrumb).append(n('<a href="#">'+m+"</a>").addClass(o.wijCSS.wijmenuCrumb)),g.appendTo(a).find("a").click(function(t,r){if(e._getDisabled())return;var i=n(this).parent(),s;i.is("."+o.wijCSS.wijmenuCurrentCrumb)||(s=e._getCurrentItemInSliding(),e._slidingMenu(t,i,s,S,function(e){w(null,e),r&&r()})),t.preventDefault()}),g.prev().append(n("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconCaratRight))),n(this).attr("href")==="#"&&s.preventDefault()})},r.prototype._slidingMenu=function(e,t,n,r,i){var s=this,o=s._getSublist(),u=s.options.direction,a=s.domObject.menucontainer,f=a.width(),l=t.parent().children().length-1,c,h,p,d,v=function(e,t,n){c=(u==="rtl"?1:-1)*t*f,s._slidingAnimation(o,c,function(){n&&n(e)})},m=function(t,n){var r;if(t!==n){r=s._trigger("hidding",e,t);if(r)return l--,d&&d(),d=function(){s._trigger("hidden",e,t)},m(t.getParent(),n)}return t};h=m(n,r),h!==n&&(v(h,l,function(){d&&d(),i&&i(h)}),p=t.parent().children().eq(l),p.addClass("wijmo-wijmenu-current-crumb").find("span").remove(),p.nextAll().remove())},r.prototype._getCurrentItemInSliding=function(){var e=this,t=e.domObject.menucontainer,i=n(".wijmo-wijmenu-current",t),s=r._getItemWidget(i.parent());return s},r.prototype._leafNodeClick=function(e,t,n){var r=this,i=r.options,s;r.activate(e,t),r.select(e),i.trigger&&(s=r._getTriggerEle(),s.length&&(r._hideMenu(e),r._resetDrilldownMenu(n))),t._getLink().attr("href")==="#"&&e.preventDefault()},r.prototype._slidingAnimation=function(e,t,n){var r=this.options.slidingAnimation;r&&!r.disabled?e.stop(!0,!0).animate({left:t},r.duration,r.easing,n):(e.css("left",t),n.call(this))},r.prototype._killDrilldown=function(){var e=this._getSublist(),t=this.options,r=this.domObject,i={width:"",height:""};e.css(i).removeClass(t.wijCSS.content),r.scrollcontainer&&r.scrollcontainer.parent().length>0&&(r.scrollcontainer.css(i),r.scrollcontainer.wijsuperpanel("destroy"),r.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(e)),e.prevAll().remove(),r.menucontainer.removeClass(t.wijCSS.wijmenuIpod).removeClass(t.wijCSS.wijmenuContainer),n("."+t.wijCSS.wijmenuCurrent,r.menucontainer).removeClass(t.wijCSS.wijmenuCurrent),n("."+t.wijCSS.wijmenuBreadcrumb,r.menucontainer).remove(),e.undelegate("li>."+t.wijCSS.wijmenuLink,"click"),n("ul",e).css({left:"",width:""}),e.css("left",""),r.scrollcontainer=r.menucontainer.children(":first")},r.prototype._displayMenu=function(e){var t=this,i=t.options,s,o,u,a=t.domObject.menucontainer,f=n(e.target),l=!r._hasVisibleSubMenus(t);if(a.is(":visible")||l)return;if(!t._trigger("showing",e,t))return;a.show(),t._setPosition(f),t.nowIndex++,t._setZindex(a,t.nowIndex),a.hide(),s={context:a,show:!0},o=i.direction==="rtl"?"right":"left",u=n.extend({},{option:{direction:o}},i.animation,i.showAnimation),r._animateFlyoutMenu(u,s,function(){t._trigger("shown",e,t)}),t._isClickToOpen=i.triggerEvent==="click",this.element.data("shown",!0)},r.prototype._hideMenu=function(e){var t=this,i=t.options,s=this.domObject.menucontainer,o=r.animations,u,a;if(!this.element.data("shown"))return;if(!t._trigger("hidding",e,t))return;this.element.data("shown",!1),n.fn.wijhide?(u={context:s,show:!1},a=n.extend({},i.animation,i.hideAnimation),s.wijhide(a,o,u,null,function(){t._setZindex(s,null),s.attr("aria-hidden",!0),t._trigger("hidden",e,t)})):(s.hide().attr("aria-hidden",!0),t._setZindex(s,null),t._trigger("hidden",e,t))},r.prototype._setZindex=function(e,t){var r=this.domObject,i;if(!r)return;i=r.menucontainer;if(e.get(0)===i.get(0)){t?i.css("z-index",t):i.css("z-index","");return}t?(e.parent().css("z-index",999),e.css("z-index",t),n.browser.msie&&parseInt(n.browser.version)<8&&i.css("z-index")===0&&i.css("z-index",9950)):(e.css("z-index",""),e.parent().css("z-index",""),n.browser.msie&&parseInt(n.browser.version)<8&&n("ul:visible",this._getSublist()).length===0&&i.css("z-index")===9950&&i.css("z-index",""))},r.prototype._setPosition=function(e){var t=this._getPosition(),r={of:e},i=this.domObject.menucontainer;i.css({left:"0",top:"0",position:"absolute"}),i.position(n.extend(r,t))},r.prototype._getPosition=function(){var e=this.options,t=e.direction,r=t==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};return r=n.extend(r,e.position),r},r.prototype._getFirstSelectableSubItem=function(){return r._getFirstSelectableSubItem(this)},r.prototype._getLastSelectableSubItem=function(){return r._getLastSelectableSubItem(this)},r.prototype.add=function(e,t){r._add(this,e,t)},r.prototype._getSublist=function(){return this._rootMenu},r.prototype.getItems=function(){return this._items},r.prototype.remove=function(e){r._remove(this,e)},r.prototype._newId=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n;for(n=0;n<16;n++)t+=e[Math.round(Math.random()*25)];return t},r.animations={slide:function(e,t){e=n.extend({duration:400,easing:"swing"},e,t),e.show?e.context.stop(!0,!0).animate({height:"show"},e,function(){e.context.attr("aria-hidden",!1)}):e.context.stop(!0,!0).animate({height:"hide"},e,function(){e.context.attr("aria-hidden",!0)})}},r._animateFlyoutMenu=function(t,i,s){var o=i.context;n.fn.wijshow?(o.data("isAnimated",!0),o.wijshow(t,r.animations,i,null,function(){o.data("isAnimated",!1);var e=n.browser;e.msie&&e.version==="9.0"?(o.wrap("<div></div>"),o.unwrap()):e.msie&&e.version==="6.0"&&o.css("overflow",""),o.attr("aria-hidden",!1),s&&s()})):o.show().attr("aria-hidden",!1)},r._getMenuItemOptions=function(t,r){return t?!t.items||!n.isArray(t.items)?{}:r>=t.items.length?{}:t.items[r]:{}},r._getOuterElement=function(t,r){return n(t).filter(function(){return n(this).closest(r).length===0})},r._hasVisibleSubMenus=function(t){var n,r,i;t.jquery?t.data("wijmomenu")?n=t.data(t.data("wijmomenu")):t.data("wijmomenuitem")&&(n=t.data(t.data("wijmomenuitem"))):n=t;if(!n)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";r=n.getItems();if(!r.length)return!1;for(i=0;i<r.length;i++)if(r[i].options.displayVisible)return!0;return!1},r._getFirstSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=0;n<r.length;n++){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},r._getLastSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=r.length-1;n>=0;n--){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},r._getSelectableSubItems=function(t,r){return n.grep(t.getItems(),function(e,t){var n=e.options;return n.header||n.separator||n.displayVisible===!1?!1:r(e,t)},!1)},r._add=function(t,i,s){var o=null,u=n("<li></li>"),a=t._getSublist(),f=t.getItems(),l,c,h=!1;typeof i=="string"?/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(i)&&u.append(i):n.isPlainObject(i)&&(c=jQuery.extend(!0,{},i));if(!a||a.length<=0)a=n("<ul></ul>"),t.element.append(a),h=!0;(!s||isNaN(s)||s>f.length)&&s!==0&&(s=f.length),f.length>0&&f.length!==s?(l=f[s].element,u.insertBefore(l)):a.append(u),o=t._createItemWidget(u,c);if(o===null||o===undefined)return;r._changeCollection(s,t.getItems(),t.options.items,o),t._bindModeEvents?t._bindModeEvents(o,h):o._bindModeEvents(o,h),h&&t._initUlCssClass()},r._changeCollection=function(t,n,r,i){if(!i){n.splice(t,1),r.splice(t,1);return}n.splice(t,0,i),r.splice(t,0,i.options)},r._remove=function(t,n){var r=t.getItems()[n];r&&r.element&&r.element.remove()},r._getItemWidget=function(t){return t.data(t.data("wijmomenuitem"))},r}(e.wijmoWidget);t.wijmenu=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijmenu')",this.wijCSS={wijmenu:"wijmo-wijmenu",wijmenuHorizontal:"wijmo-wijmenu-horizontal",wijmenuCurrent:"wijmo-wijmenu-current",wijmenuCurrentCrumb:"wijmo-wijmenu-current-crumb",wijmenuBreadcrumb:"wijmo-wijmenu-breadcrumb",wijmenuBreadcrumbText:"wijmo-wijmenu-breadcrumb-text",wijmenuItem:"wijmo-wijmenu-item",wijmenuLink:"wijmo-wijmenu-link",wijmenuList:"wijmo-wijmenu-list",wijmenuScroll:"wijmo-wijmenu-scroll",wijmenuContent:"wijmo-wijmenu-content",wijmenuFooter:"wijmo-wijmenu-footer",wijmenuHeader:"wijmo-wijmenu-header",wijmenuContainer:"wijmo-wijmenu-container",wijmenuIpod:"wijmo-wijmenu-ipod",wijmenuCrumb:"wijmo-wijmenu-crumb",wijmenuAllLists:"wijmo-wijmenu-all-lists",wijmenuPrevList:"wijmo-wijmenu-prev-list",wijmenuRtl:"wijmo-wijmenu-rtl",wijmenuBacklinktext:"wijmo-wijmenu-backlinktext",wijmenuSubmenuContainer:"wijmo-wijmenu-submenu-container",wijmenuParent:"wijmo-wijmenu-parent"},this.wijMobileCSS={header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.trigger="",this.triggerEvent="click",this.position={},this.animation={animated:"slide",duration:400,easing:null,option:null},this.showAnimation={},this.hideAnimation={animated:"fade",duration:400,easing:null,option:null},this.showDelay=400,this.hideDelay=400,this.slidingAnimation={duration:400,easing:null},this.mode="flyout",this.superPanelOptions=null,this.checkable=!1,this.orientation="horizontal",this.direction="ltr",this.maxHeight=200,this.backLink=!0,this.backLinkText="Back",this.topLinkText="All",this.crumbDefaultText="Choose an option",this.select=null,this.focus=null,this.blur=null,this.showing=null,this.shown=null,this.hidding=null,this.hidden=null,this.items=null,this.ensureSubmenuOnBody=!1}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),function(e){e._map=[],e.link=0,e.separator=1,e.header=2,e.other=3}(t.MarkupType||(t.MarkupType={}));var o=t.MarkupType,u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initState=function(){this._items=[],this._resetMarkupValue(),this.options.items||(this.options.items=[])},t.prototype._create=function(){var t=this;t._isMobile&&n.extend(!0,t.options.wijCSS,t.options.wijMobileCSS),t.element.data("wijmomenuitem",n.camelCase(t.widgetFullName)),t._initState(),t._getOrSetOptionsValues(),t._createChildMenuItems(),t._initCssClass(),e.prototype._create.call(this)},t.prototype._refresh=function(){var e=this,t=e.options;e._set_navigateUrl(t.navigateUrl),e._set_target(t.target),e._set_displayVisible(t.displayVisible),e._createChildMenuItems(),e._initCssClass()},t.prototype._setOption=function(t,r){var i=this,s=i.options,o;if(t==="items"){e.prototype._setOption.call(this,t,r),i._set_items(r);return}if(r===s[t])return;e.prototype._setOption.call(this,t,r);if(!n.isFunction(i["_set_"+t]))return;i["_set_"+t](r,!0);switch(t){case"header":case"separator":i._refresh();break;case"displayVisible":o=i.getParent(),o&&o._setSubmenuIcon();break;default:}},t.prototype.index=function(){return this.element.index()},t.prototype._set_selected=function(e){var t=this,n=t.options,r=t._getMenuItemType();r===o.link?t._getLink().toggleClass(n.wijCSS.stateActive,e):t.options.selected=!1},t.prototype._set_items=function(e){var t=this;t._getSublist().remove(),t._items=[],e.length>0&&(t._createChildMenuItems(),t._initUlCssClass()),t._setSubmenuIcon(e.length>0),t._bindModeEvents(t,!0),t._resetMarkupValue()},t.prototype._bindModeEvents=function(e,t){var n=this,r=e._getMenu(),i=r.options;t&&(n._initUlCssClass(),n._setSubmenuIcon(),n._resetMarkupValue()),i.mode==="flyout"?t?(n._killFlyout(),n._flyout()):e._flyout():(n._setDrilldownUlStyle(),e.element.parent().is(":visible")&&r._resetScroll(e._getParentOrMenu()))},t.prototype._set_value=function(e,t){this.options.value=e},t.prototype._set_text=function(e,t){var n=this,r=n.options;e||t?n._setText(e):r.text=n._getText()},t.prototype._set_navigateUrl=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(e||t?i.attr("href",e):r.navigateUrl=i.attr("href"))},t.prototype._set_target=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(r.target||t?i.attr("target",e):r.target=i.attr("target")||"")},t.prototype._set_iconClass=function(e,t){var r=this,i=r.options,s,u,a,f;if(i.header===!0||i.separator===!0)return;s=r._getLink(),u=s.find("span."+i.wijCSS.wijmenuitemIcon),e?(u.length===0&&(u=n("<span>"),a=s.children("."+i.wijCSS.wijmenuText).wrap("<span>").parent(),a.addClass(i.wijCSS.wijmenuText),a.prepend(u)),u.addClass(e).addClass(i.wijCSS.wijmenuIconLeft).addClass(i.wijCSS.wijmenuitemIcon),t&&r._set_imagePosition(i.imagePosition)):u.length!==0&&(u.remove(),a=s.children("."+i.wijCSS.wijmenuText),f=a.text(),a.html(""),a.text(f)),r._getMenuItemType()===o.other&&s.addClass(i.wijCSS.wijmenuLink).addClass(i.wijCSS.cornerAll)},t.prototype._set_imagePosition=function(e,t){var n=this,r=n.options,i=n._getLink(),s=i.find(">span>span."+r.wijCSS.wijmenuitemIcon),o=e==="right"?r.wijCSS.wijmenuIconRight:r.wijCSS.wijmenuIconLeft;if(s.length===0)return;s.removeClass(r.wijCSS.wijmenuIconRight).removeClass(r.wijCSS.wijmenuIconLeft).addClass(o)},t.prototype._set_separator=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(r.html("").removeClass(i.wijCSS.wijmenuSeparator).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault).removeClass(i.wijCSS.cornerAll),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.length===0?(i.separator=!0,i.header=!1,n._createMenuItemMarkup(o.separator)):i.separator=!1,n._resetMarkupValue()},t.prototype._set_header=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(i.header=!1,r.html("").removeClass(i.wijCSS.header).removeClass(i.wijCSS.cornerAll).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.is("h1,h2,h3,h4,h5")?(i.header=!0,i.separator=!1,s.is("h1,h2,h3,h4,h5")||(s.remove(),s=n._createMenuItemMarkup(o.header),r.append(s))):i.header=!1,n._resetMarkupValue()},t.prototype._set_displayVisible=function(e){var t=this,n=t.element;e?n.show():n.hide()},t.prototype._createMenuItemMarkup=function(e){var t=this,r=t.options,i=t.element,s;return e===o.separator?(i.html('<span class="'+r.wijCSS.wijmenuSeparatorContent+'">&nbsp;</span>'),null):(e===o.header?s=n("<h3></h3>").text(r.text):s=n("<a>").text(r.text),s)},t.prototype._getMenuItemType=function(e){var t=this,r=t.options,i=t._getLink();return e&&(r=n.extend({},r,e)),r.separator===!0?o.separator:r.header===!0?o.header:i.length===0?r.text?o.link:o.separator:i.is("a")?o.link:i.is("h1,h2,h3,h4,h5")?o.header:o.other},t.prototype._getOrSetOptionsValues=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i===o.header?(e._set_header(n.header),e._set_text(n.text)):i===o.separator?e._set_separator(n.separator):(r.length===0?(r=e._createMenuItemMarkup(i),t.append(r)):e._set_text(n.text),e._resetMarkupValue(),e._set_navigateUrl(n.navigateUrl),e._set_target(n.target)),e._set_displayVisible(n.displayVisible),e._set_selected(n.selected)},t.prototype._getText=function(){return this._getLink().text()},t.prototype._setText=function(e){var t=this.element,n=this.options,r;r=t.find(":not(ul)a ."+n.wijCSS.wijmenuText+":first");if(r.length!==0){r.text(e);return}r=t.children("h1,h2,h3,h4,h5").filter(":first");if(r.length!==0){r.text(e);return}r=t.children("a:first");if(r.length!==0){r.text(e);return}},t.prototype._createChildMenuItems=function(){var e=this,t=e.element,r=e._items,s=e.options,o,u,a,f,l,c;if(s.header===!0||s.separator===!0)return;o=s.items.length,u=e._getSublist(),a=u.children("li").length;if(o>a){u.length===0&&(u=n("<ul>").appendTo(t),e._resetMarkupValue());for(f=0;f<o-a;f++)u.append("<li>")}n.each(e._getChildren(),function(t,s){var o=n(s),u;u=i._getMenuItemOptions(e.options,t),l=e._createItemWidget(o,u),r.push(l),e.options.items[t]=l.options})},t.prototype._createItemWidget=function(e,t){var r=this,i=r.widgetName;return e[i](t),e.data(n.camelCase(r.widgetFullName))},t.prototype._initCssClass=function(){var e=this,t=this.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i!==o.separator&&t.attr("role","menuitem"),i===o.separator?t.addClass(n.wijCSS.wijmenuSeparator).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll):i===o.header?t.addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll):(i===o.link?t.hasAllClasses(n.wijCSS.wijmenuItem)||(t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),r.addClass(n.wijCSS.wijmenuLink).addClass(n.wijCSS.cornerAll),r.wrapInner("<span>").children("span").addClass(n.wijCSS.wijmenuText)):t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),e._setSubmenuIcon()),e._set_iconClass(n.iconClass),e._set_imagePosition(n.imagePosition),e._initUlCssClass()},t.prototype._initUlCssClass=function(){var e=this.options;this._getSublist().addClass(e.wijCSS.wijmenuList).addClass(e.wijCSS.content).addClass(e.wijCSS.cornerAll).addClass(e.wijCSS.helperClearFix).addClass(e.wijCSS.wijmenuChild).addClass(e.wijCSS.helperReset).hide()},t.prototype._setSubmenuIcon=function(e){var t=this,r=this.options,s=t._getLink(),o=t._getMenu(),u=o.options.direction,a=u==="rtl"?s.children("span."+r.wijCSS.icon+":first"):s.children("span."+r.wijCSS.icon+":last");e===undefined&&(e=i._hasVisibleSubMenus(t)),e&&!s.is(":input")?(a.length===0&&(u==="rtl"?a=n("<span>").prependTo(s):a=n("<span>").appendTo(s)),t._isRoot()&&o.options.orientation==="horizontal"&&o.options.mode==="flyout"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowDown):u==="rtl"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowLeft):a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowRight)):a.remove()},t.prototype._killFlyout=function(){var e=this.element.attr("role",""),t=this.options;e.removeClass(t.wijCSS.wijmenuParent).unbind(".wijmenuEvent").unbind(".wijmenuitem").children(":first").unbind(".wijmenuEvent").unbind(".wijmenuitem").attr("aria-haspopup",""),this._getSublist().unbind(".wijmenuEvent").unbind(".wijmenuitem"),n.each(this.getItems(),function(){this._killFlyout()})},t.prototype._getItemTriggerEvent=function(){var e=this,t=e.element,r=e._getMenu(),i=r.options,s="default";return i.trigger!==""&&(t.is(i.trigger)||r.element.is(i.trigger)?s=i.triggerEvent:(t.parents("."+i.wijCSS.wijmenuParent).each(function(e,t){if(n(t).is(i.trigger))return s=i.triggerEvent,!1}),s==="default"&&e._isOuterTirggerEle()&&(s=i.triggerEvent))),t.data("triggerEvent",s),s},t.prototype._isOuterTirggerEle=function(){var e=this._getMenu();return i._getOuterElement(e.options.trigger,"."+e.options.wijCSS.wijmenu).length>0},t.prototype._flyout=function(){var e=this,t=e._getMenu(),r=t.options,i=".wijmenuitem",s=n(e.element).attr("aria-haspopup",!0),o,u,a=e._getItemTriggerEvent(),f=s.children("a."+r.wijCSS.wijmenuLink),l=e._getSublist(),c;if(e.getItems().length>0){l.bind("mouseleave"+i,function(t){if(r.disabled)return;u=setTimeout(function(){e._hideCurrentSubmenu(t)},r.hideDelay)}),s.addClass(e.options.wijCSS.wijmenuParent);if(a!=="default"&&r.triggerEvent!=="mouseenter"){switch(r.triggerEvent){case"click":f.bind("click"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"dblclick":f.bind("dblclick"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"rtclick":f.bind("contextmenu"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t),t.preventDefault()})}l.data("notClose",!0)}else f.bind("mouseenter.wijmenuEvent",function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(u),o=setTimeout(function(){e._displaySubmenu(t,null)},r.showDelay)}).bind("mouseleave"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(o),l.is("ul")||(l=l.children("ul:first")),u=setTimeout(function(){e._hideSubmenu(!1,t)},r.hideDelay)}),e.getItems().length>0&&e._getSublist().bind("mouseenter"+i,function(e){if(r.disabled)return;clearTimeout(u)}),l.data("notClose",!1)}f.bind("click.wijmenuEvent",function(n){c=f.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||c)return;if(f.is("a")){if(e._getSublist().length===0)t._hideAllMenus(n);else if(r.trigger===""||s.data("triggerEvent")==="default"||r.triggerEvent==="mouseenter")t._hideAllMenus(n);else{var i=t._currentMenuList,o,u;if(i!==undefined){o=s;if(e._getSublist().length===0)for(u=i.length;u>0;u--){if(i[u-1]===e)break;i[u-1]._hideSubmenu(!1,n)}}}t.activate(n,e)}t.select(n),f.attr("href")==="#"&&n.preventDefault()}).bind("focusin.wijmenuEvent",function(n){c=f.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||c)return;f.is("a")&&t.activate(n,e)}),n.each(e.getItems(),function(){this._flyout()})},t.prototype._hideSubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u=i.animations,a,f,l,c=r._getSublist(),h=r._getLink(),p=n.browser.msie?r.element.children("iframe.bgiframe"):null,d;if(!h.data("subMenuOpened"))return;if(!s._trigger("hidding",t,r))return;h.is("."+o.wijCSS.wijmenuLink)&&(h.data("subMenuOpened",!1),h.removeClass(o.wijCSS.stateActive)),n.fn.wijhide&&e!==!0?(a={context:c,show:!1},f=n.extend({},o.animation,o.hideAnimation),c.wijhide(f,u,a,null,function(){s._setZindex(c,null),c.attr("aria-hidden",!0),n.browser.msie&&p.remove(),s._trigger("hidden",t,r)})):(c.hide({complete:function(){n.browser.msie&&p.remove()}}).attr("aria-hidden",!0),s._setZindex(c,null),s._trigger("hidden",t,r)),l=s._currentMenuList,l&&(l=n.makeArray(n.map(l,function(e){return e&&e===r?null:e})),s._currentMenuList=n.makeArray(l))},t.prototype._displaySubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u,a,f,l=i.animations,c,h=r._getLink(),p=r._getSublist(),d,v;n.browser.msie&&(d=r.element.children("iframe.bgiframe"),d.length===0&&(d=n('<iframe class="bgiframe" frameborder="0" tabindex="-1" src="javascript: false;" style="display:none;position:absolute;z-index:-1;top:0px;left:0px;opacity:0;" />'),r.element.append(d))),c=!i._hasVisibleSubMenus(r);if(p.is(":visible")||c)return;if(!s._trigger("showing",e,r))return;h.is("a."+o.wijCSS.wijmenuLink)&&h.data("subMenuOpened",!0),p.show(),r._setMenuItemPosition(),n.browser.msie&&r._setIframeBounds(p,d),s.nowIndex++,s._setZindex(p,s.nowIndex),p.hide(),u={context:p,show:!0},a=o.direction==="rtl"?"right":"left",o.orientation==="horizontal"&&r._isRoot()&&(a="up"),n.browser.msie&&d.css("display",""),f=n.extend({},{option:{direction:a}},o.animation,o.showAnimation),i._animateFlyoutMenu(f,u,function(){p.is(":hidden")&&r._hideSubmenu(!0,e),s._trigger("shown",e,r),t&&t()}),s._isClickToOpen=o.triggerEvent==="click",s._currentMenuList===undefined&&(s._currentMenuList=[]),s._currentMenuList.push(r)},t.prototype._setMenuItemPosition=function(){var e=this,t=e._getSublist(),r=e._getMenuItemPosition(),i={of:this._getLink()};t.css({left:"0",top:"0",position:"absolute"}),t.position(n.extend(i,r))},t.prototype._getMenuItemPosition=function(){var e=this,t=this._getMenu(),r=t.options,i=r.direction,s=i==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};return r.orientation==="horizontal"&&e._isRoot()&&(s=i==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"}),s=n.extend(s,r.position),s},t.prototype._getChildren=function(){return this._getSublist().children("li")},t.prototype._setDrilldownUlStyle=function(){var e=this,t=e.options,r=e._getSublist(),i=e._getMenu(),s=i.domObject.menucontainer.width();i.options.direction==="rtl"?r.css({width:s,left:-s}):r.css({width:s,left:s}),r.addClass(t.wijCSS.content),n.each(e.getItems(),function(e,t){t.getItems().length&&this._setDrilldownUlStyle()})},t.prototype._getMenu=function(){var e=this,t=e._menu,n,r;if(!t){n=e.element.parent();while(!n.is("body")&&n.length>0){r=n.data("wijmomenu");if(r)return t=n.data(r),e._menu=t,t;n=n.parent()}throw"An menuitem must be a child of menu"}return t},t.prototype.getParent=function(){var e=this,t=e.element,n,r,s;r=e._parent;if(r!==undefined)return r;n=e._getMenu(),s=t.parent().closest("li",n.element[0]);if(s.length>0){r=i._getItemWidget(s);if(r!==undefined)return e._parent=r,r}if(n._getSublist().get(0)===t.parent().get(0))return e._parent=null,null;throw"An menuitem must be a child of menu or another menuitem"},t.prototype._getParentOrMenu=function(){return this.getParent()||this._getMenu()},t.prototype._getField=function(e){return this.element.data(e)},t.prototype._setField=function(e,t){return this.element.data(e,t)},t.prototype._innerDestroy=function(e){var t=this,n=t.options,r=t.element,i,s=t.getItems(),o=s.length-1;r.removeClass(n.wijCSS.widget).removeClass(n.wijCSS.wijmenuItem).removeClass(n.wijCSS.stateDefault).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.wijmenuParent).removeClass(n.wijCSS.header).removeClass(n.wijCSS.wijmenuSeparator),i=r.children("."+n.wijCSS.wijmenuLink),i.removeClass(n.wijCSS.wijmenuLink).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.stateFocus).removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive).html(i.children("."+n.wijCSS.wijmenuText).html()).unbind(".wijmenuitem").unbind(".wijmenuEvent"),r.children("ul").removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.content).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.helperClearFix).removeClass(n.wijCSS.wijmenuChild).removeClass(n.wijCSS.helperReset).attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden",""),r.removeAttr("role"),i.removeAttr("aria-haspopup"),e||t._removeFromParentCollection(),r.removeData("menu").removeData("parent"),r.children("iframe.bgiframe").length!==0&&r.children("iframe.bgiframe").remove();for(;o>=0;o--)s[o].destroy(!0);t._items.length=0,t._resetMarkupValue()},t.prototype.destroy=function(t){var n=this;n._innerDestroy(t),e.prototype.destroy.call(this)},t.prototype._getFirstSelectableSubItem=function(){return i._getFirstSelectableSubItem(this)},t.prototype._getLastSelectableSubItem=function(){return i._getLastSelectableSubItem(this)},t.prototype.next=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s+1;r<t.length;r++){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype.previous=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s-1;r>=0;r--){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype._removeFromParentCollection=function(){var e=this,t,r=!1,s;t=e.getParent(),t===null&&(t=e._getMenu(),r=!0),s=n.inArray(e,t.getItems());if(s===-1)return;i._changeCollection(s,t.getItems(),t.options.items,null),t.getItems().length===0&&(r||(t._setSubmenuIcon(!1),t._resetMarkupValue()),t.element.children("ul").remove())},t.prototype._resetMarkupValue=function(){this._sublist=null,this._link=null},t.prototype._hideCurrentSubmenu=function(e){var t=this,r=t._getSublist();if(r.length===0)return;r.data("notClose")||t._hideSubmenu(!1,e),n.each(t.getItems(),function(){this._hideCurrentSubmenu(e)})},t.prototype._showFlyoutSubmenu=function(e,t){var n=this,r=this._getMenu(),i=r._currentMenuList,s;if(i!==undefined)for(s=i.length;s>0;s--){if(i[s-1]===n.getParent())break;i[s-1]._hideSubmenu(!1,e)}n._displaySubmenu(e,t)},t.prototype.getItems=function(){return this._items},t.prototype._getSublist=function(){var e=this;return e._sublist||(e._sublist=this.element.children("ul:first")),e._sublist},t.prototype._getLink=function(){var e=this;return e._link||(e._link=this.element.children(":first")),e._link},t.prototype._isRoot=function(){return this.getParent()===null},t.prototype.add=function(e,t){i._add(this,e,t)},t.prototype.remove=function(e){i._remove(this,e)},t.prototype._setIframeBounds=function(e,t){var r=this,i,s=0,o=0,u=0,a=0,f,l,c,h,p,d=n.browser;if(!d.msie)return;d.msie&&parseFloat(n.browser.version)<9||(i=e.css("box-shadow").split(" "),p=i.length,p>1&&(d.msie&&p<4?f=0:f=r._parsePxToNumber(d.msie?i[3]:i[p-1]),d.msie&&p<3?l=0:l=.3*r._parsePxToNumber(d.msie?i[2]:i[p-2]),c=r._parsePxToNumber(d.msie?i[1]:i[p-3]),h=r._parsePxToNumber(d.msie?i[0]:i[p-4]),s=l+f-h,s=s>=0?s:0,o=l+f+h,o=o>=0?o:0,u=l+f-c,u=u>=0?u:0,a=l+f+c,a=a>=0?a:0)),t.css({width:e.outerWidth(!0)+s+o+"px",height:e.outerHeight(!0)+u+a+"px",left:r._parsePxToNumber(e.css("left"))-s+"px",top:r._parsePxToNumber(e.css("top"))-u+"px"})},t.prototype._parsePxToNumber=function(e){var t=e.indexOf("px");return!t||t===-1?0:parseFloat(e.substr(0,t))},t}(e.wijmoWidget);t.wijmenuitem=u,u.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenuitem')",wijCSS:{wijmenuitemIcon:"wijmenuitem-icon",wijmenuParent:"wijmo-wijmenu-parent",wijmenuLink:"wijmo-wijmenu-link",wijmenuText:"wijmo-wijmenu-text",wijmenuList:"wijmo-wijmenu-list",wijmenuItem:"wijmo-wijmenu-item",wijmenuSeparator:"wijmo-wijmenu-separator",wijmenuIconLeft:"wijmo-wijmenu-icon-left",wijmenuIconRight:"wijmo-wijmenu-icon-right",wijmenuChild:"wijmo-wijmenu-child",wijmenuSeparatorContent:"wijmo-wijmenu-separator-content"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},header:!1,separator:!1,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:!0,selected:!1,items:null}),n.wijmo.registerWidget(r,i.prototype),n.widget("wijmo.wijmenuitem",n.wijmo.widget,u.prototype)})(e.menu||(e.menu={}));var t=e.menu})(wijmo||(wijmo={})),define("wijmo.wijmenu",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijexpander",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(e,t){switch(e){case"contentUrl":t?this.element.find("> ."+this.options.wijCSS.content).wijContent(t):this.element.find("> ."+this.options.wijCSS.content).html("");break;case"disabled":t?(this.element.addClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).addClass(this.options.wijCSS.stateDisabled)):(this.element.removeClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").removeClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).removeClass(this.options.wijCSS.stateDisabled));break;case"expandDirection":this._onDirectionChange(t,!0,this.options.expandDirection);break;case"expanded":t?this.expand():this.collapse();return;default:}n.wijmo.widget.prototype._setOption.apply(this,arguments)},t.prototype._create=function(){var e=this.options,t=this.element.children(),r,i;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-expander-icons"),r=n(t[0]),i=n(t[1]);if(e.expandDirection==="left"||e.expandDirection==="top")r.remove(),r.insertAfter(i);r.addClass("ui-expander-header"),r.attr("role","tab"),i.attr("role","tabpanel"),r.find("> a").length===0&&r.wrapInner('<a href="javascript:void(null)"></a>'),r.find("> .ui-icon").length===0&&n('<span class="ui-icon"></span>').insertBefore(n("> a",r)[0]),i.addClass("ui-expander-content "+e.wijCSS.content)},t.prototype._init=function(){var e=this.options;this._onDirectionChange(e.expandDirection,!1),e.contentUrl&&n("."+e.wijCSS.content,this.element).wijContent(this.options.contentUrl),e.expanded?(this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.stateActive).attr({"aria-expanded":"true",tabIndex:0}).addClass(this._headerCornerOpened).find("> .ui-icon").addClass(this._triangleIconOpened),this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(this.element.find("> .ui-expander-content").hide(),this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed)),e.disabled&&(this.element.addClass(e.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(e.wijCSS.stateDisabled),this.element.find("> .ui-expander-content").addClass(e.wijCSS.stateDisabled)),this._bindLiveEvents()},t.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-helper-reset ui-expander-icons"),n.wijmo.widget.prototype.destroy.apply(this,arguments)},t.prototype._bindLiveEvents=function(){var e=this.options;this.element.on("click.wijexpander",">.ui-expander-header",jQuery.proxy(this._onHeaderClick,this)),this.element.on("mouseenter.wijexpander",".ui-expander-header",function(){n(this).addClass(e.wijCSS.stateHover)}),this.element.on("mouseleave.wijexpander",".ui-expander-header",function(){n(this).removeClass(e.wijCSS.stateHover)}),this.element.on("focus.wijexpander",".ui-expander-header",function(){n(this).addClass(e.wijCSS.stateFocus)}),this.element.on("blur.wijexpander",".ui-expander-header",function(){n(this).removeClass(e.wijCSS.stateFocus)})},t.prototype._unbindLiveEvents=function(){this.element.off(".wijexpander",".ui-expander-header")},t.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l,c,h=this.options;r&&r!==e&&this.element.removeClass("ui-expander-"+r),t&&(s=this.element.find(".ui-expander-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".ui-expander-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed));switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=h.wijCSS.iconArrowUp,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=h.wijCSS.iconArrowRight,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=h.wijCSS.iconArrowLeft,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=h.wijCSS.iconArrowDown,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),t&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),t&&i!==f&&this.element.children(".ui-expander-header").each(function(e,t){c=n(this),i?(l=c.next(".ui-expander-content"),c.remove(),c.insertAfter(l)):(l=c.prev(".ui-expander-content"),c.remove(),c.insertBefore(l))})},t.prototype.collapse=function(){var e=this.options,t,r,i,s;if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeCollapse")?(e.animated?(t={expand:!1,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").removeClass("ui-expander-content-active"),this._trigger("afterCollapse"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=n.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!n.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](t)):(this.element.find("> .ui-expander-content").hide(),this._trigger("afterCollapse")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateActive).removeClass(this._headerCornerOpened).attr({"aria-expanded":"false",tabIndex:-1}).addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),this.options.expanded=!1,!0):!1},t.prototype.expand=function(){var e=this.options,t,r,i,s;if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeExpand")?(e.animated?(t={expand:!0,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),this._trigger("afterExpand"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=n.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!n.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](t)):(this.element.find("> .ui-expander-content").show(),this._trigger("afterExpand")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.cornerAll).addClass(e.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),this.options.expanded=!0,!0):!1},t.prototype._onHeaderClick=function(e){this.option("expanded",!this.options.expanded)},t}(e.wijmoWidget);t.wijexpander=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-content ui-body ui-body-c"},this.initSelector=":jqmData(role='wijexpander')",this.allowExpand=!0,this.animated="slide",this.contentUrl="",this.expanded=!0,this.expandDirection="bottom",this.beforeCollapse=null,this.beforeExpand=null,this.afterCollapse=null,this.afterExpand=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget(r,i.prototype),n.extend(n.wijmo.wijexpander,{animations:{slide:function(e,t){var r;e=n.extend({easing:"swing",duration:300},e,t),e.expand?(e.horizontal?r={width:"show",opacity:"show"}:r={height:"show",opacity:"show"},e.content.stop(!0,!0).animate(r,e)):(e.horizontal?r={width:"hide",opacity:"hide"}:r={height:"hide",opacity:"hide"},e.content.stop(!0,!0).animate(r,e))}}})})(e.expander||(e.expander={}));var t=e.expander})(wijmo||(wijmo={})),define("wijmo.wijexpander",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijaccordion",i="wijmo-wijaccordion",s="wijmo-wijaccordion-top",o="wijmo-wijaccordion-bottom",u="wijmo-wijaccordion-left",a="wijmo-wijaccordion-right",f="wijmo-wijaccordion-header",l="wijmo-wijaccordion-content",c="wijmo-wijaccordion-content-active",h="wijmo-wijaccordion-icons",p="ui-helper-horizontal",d=function(t){function r(){t.apply(this,arguments),this.widgetEventPrefix="wijaccordion"}return __extends(r,t),r.prototype._setOption=function(e,n){var r=this.options;if(r[e]!==n)switch(e){case"selectedIndex":this.activate(n);break;case"disabled":n?this.element.addClass(r.wijCSS.stateDisabled):this.element.removeClass(r.wijCSS.stateDisabled);break;case"event":this._unbindLiveEvents(),this.options.event=n,this._bindLiveEvents();break;case"header":this._handleHeaderChange(n,r.header);break;case"animated":break;case"expandDirection":this._onDirectionChange(n,!0,r.expandDirection);break;default:}t.prototype._setOption.call(this,e,n)},r.prototype._handleHeaderChange=function(e,t){var n=this.options.wijCSS,r=this.element.find(t);r.removeClass(n.wijaccordionHeader).removeClass(f).removeClass(n.stateActive).removeClass(this._triangleIconOpened),r.siblings("."+l).removeClass(n.wijaccordionContent).removeClass(l).removeClass(n.content).removeClass(n.wijaccordionContentActive).removeClass(c),this._initHeaders(e)},r.prototype._initHeaders=function(e){typeof e=="undefined"&&(e=null);var t=this.options,e=e?e:t.header,n=this.element.find(e);n.each(jQuery.proxy(this._initHeader,this))},r.prototype._initHeader=function(e,t){var r=this.options,s=r.wijCSS,o=this.element.data("rightToLeft"),u=n(t),a=n(u.next()[0]);o&&(u.remove(),u.insertAfter(a)),u.addClass(f).addClass(s.wijaccordionHeader).attr("role","tab"),a.attr("role","tabpanel"),u.find("> a").length===0&&u.wrapInner('<a href="#"></a>'),u.find("> ."+s.icon).length===0&&n("<span></span>").addClass(s.icon).insertBefore(n("> a",u)[0]),e===r.selectedIndex?(u.addClass(s.stateDefault).addClass(s.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}),u.find("> ."+s.icon).addClass(this._triangleIconOpened),a.addClass(c).addClass(s.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility()):(u.addClass(s.stateDefault).addClass(s.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}),u.find("> .ui-icon").addClass(this._triangleIconClosed),a.hide()),a.addClass(l).addClass(s.wijaccordionContent).addClass(s.content);for(;;){if(u.parent().hasClass(i))break;u.unwrap()}},r.prototype._create=function(){var e=this.options,r=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(i).addClass(e.wijCSS.wijaccordion).addClass(e.wijCSS.widget).addClass(h).addClass(e.wijCSS.wijaccordionIcons).addClass(e.wijCSS.helperClearFix),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._onDirectionChange(e.expandDirection,!1),this._initHeaders(),this.element.attr("role","tablist"),n(window).on("resize.wijaccordion",function(e){r._adjustAccordion()}),(e.expandDirection==="left"||e.expandDirection==="right")&&r._adjustAccordion(),this._getDefaultLayoutSetting(),t.prototype._create.call(this)},r.prototype._init=function(){this._bindLiveEvents()},r.prototype._adjustAccordion=function(){if(this.options.expandDirection==="top"||this.options.expandDirection==="bottom")return;var e=this._getHeaders(),t=n("."+l,this.element),r=t.parent().width(),i=parseInt(t.css("paddingLeft"),10)+parseInt(t.css("paddingRight"),10)+parseInt(t.css("borderRightWidth"),10)+parseInt(t.css("borderLeftWidth"),10),s=n("."+f,this.element).outerWidth(!0),o=r-e.length*(s+4)-i,o=o<576?o:576;t.width(o)},r.prototype._getDefaultLayoutSetting=function(){var e=n("."+l,this.element);this.options.expandDirection==="top"||this.options.expandDirection==="bottom"?this._defaultLayoutSetting={paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom")}:this._defaultLayoutSetting={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),width:e.width()}},r.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass(e.wijCSS.wijaccordion).removeClass(i).removeClass(e.wijCSS.widget).removeClass(e.wijCSS.wijaccordionIcons).removeClass(h).removeAttr("role"),n(window).off("resize.wijaccordion"),t.prototype.destroy.call(this)},r.prototype._getHeaders=function(){var e=this.options,t=this.element.data("rightToLeft"),r=[],i,s,o=this.element.find(e.header);if(!(o.length>0&&!n(o[0]).hasClass(f)&&n(o[0]).hasClass(l)))return o;for(i=0;i<o.length;i+=1)s=t?n(o[i]).next("."+f):n(o[i]).prev("."+f),s.length>0&&r.push(s[0]);return n(r)},r.prototype.activate=function(e){var t,r=this.options,i=this._getHeaders(),s,o,u=this.element.data("rightToLeft"),a,f,h,d,v,m,g,y,b,w;s=n(jQuery.grep(i,function(e){return n(e).hasAllClasses(r.wijCSS.stateActive)})),typeof e=="number"?t=n(i[e]):typeof e=="string"?(e=parseInt(e,0),t=n(i[e])):(t=n(e),e=i.index(e));if(t.hasAllClasses(r.wijCSS.stateDisabled))return!1;if(t.hasAllClasses(r.wijCSS.stateActive))if(r.requireOpenedPane){if(s.length===t.length&&s.index()===t.index())return!1}else s=t,t=n(null);else r.requireOpenedPane||(s=n(null));a=i.index(t),f=i.index(s),h=u?t.prev("."+l):t.next("."+l),d=u?s.prev("."+l):s.next("."+l);if(s.length===0&&t.length===0)return!1;r.expandDirection==="left"||r.expandDirection==="right"?o=this._defaultLayoutSetting.width:o=h.css("width");if(!this._trigger("beforeSelectedIndexChanged",null,{newIndex:a,prevIndex:f}))return!1;s.removeClass(r.wijCSS.stateActive).removeClass(this._headerCornerOpened).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),t.removeClass("ui-corner-all").addClass(r.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),r.animated?(v={toShow:h,toHide:d,complete:jQuery.proxy(function(){d.removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),h.addClass(r.wijCSS.wijaccordionContentActive).addClass(c).wijTriggerVisibility(),d.css("display",""),h.css("display",""),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})},this),horizontal:this.element.hasClass(p),rightToLeft:this.element.data("rightToLeft"),down:a>f,autoHeight:r.autoHeight||r.fillSpace,defaultLayoutSetting:this._defaultLayoutSetting},m=r.animated,g=r.duration,n.isFunction(m)&&(r.animated=m(v)),n.isFunction(g)&&(r.duration=g(v)),y=n.wijmo.wijaccordion.animations,b=r.duration,w=r.animated,w&&!y[w]&&!n.easing[w]&&(w="slide"),y[w]||(y[w]=function(e){this.slide(e,{easing:w,duration:b||700})}),y[w](v)):(s.length>0&&d.hide().removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),t.length>0&&h.show().addClass(c).addClass(r.wijCSS.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility(),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})),this.options.selectedIndex=a},r.prototype._bindLiveEvents=function(){var e=this,t=this.options,r="."+f;this.element.on(t.event+".wijaccordion",r,jQuery.proxy(this._onHeaderClick,this)).on("keydown.wijaccordion",r,jQuery.proxy(this._onHeaderKeyDown,this)).on("mouseenter.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateHover)}).on("mouseleave.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateHover)}).on("focus.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateFocus)}).on("blur.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateFocus)})},r.prototype._unbindLiveEvents=function(){this.element.off(".wijaccordion","."+f)},r.prototype._onHeaderClick=function(e){return this.options.disabled||this.activate(e.currentTarget),!1},r.prototype._onHeaderKeyDown=function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;if(!n.ui)return;var r=e.getKeyCodeEnum(),i=this.element.find("."+f+"."+this.options.wijCSS.stateFocus),s,o=this._getHeaders();if(i.length>0){s=n("."+f,this.element).index(i);switch(t.keyCode){case r.RIGHT:case r.DOWN:if(o[s+1])return o[s+1].focus(),!1;break;case r.LEFT:case r.UP:if(o[s-1])return o[s-1].focus(),!1;break;case r.SPACE:case r.ENTER:this.activate(t.currentTarget),t.preventDefault()}}return!0},r.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var c,h,d,v,m,g,y=this.options;t&&(h=this.element.find("."+f+"."+this._headerCornerOpened),h.removeClass(this._headerCornerOpened),d=this.element.find("."+l+"."+this._contentCornerOpened),d.removeClass(this._contentCornerOpened),v=this.element.find("."+this._triangleIconOpened),m=this.element.find("."+this._triangleIconClosed),v.removeClass(this._triangleIconOpened),m.removeClass(this._triangleIconClosed)),r!==null&&this.element.removeClass(i+"-"+r);switch(e){case"top":this._headerCornerOpened=y.wijCSS.cornerBottom,this._contentCornerOpened=y.wijCSS.cornerTop,this._triangleIconOpened=y.wijCSS.iconArrowUp,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!0,this.element.removeClass(p),this.element.addClass(s).addClass(y.wijCSS.wijaccordionTop);break;case"right":this._headerCornerOpened=y.wijCSS.cornerLeft,this._contentCornerOpened=y.wijCSS.cornerRight,this._triangleIconOpened=y.wijCSS.iconArrowRight,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!1,this.element.addClass(p),this.element.addClass(a).addClass(y.wijCSS.wijaccordionRight);break;case"left":this._headerCornerOpened=y.wijCSS.cornerRight,this._contentCornerOpened=y.wijCSS.cornerLeft,this._triangleIconOpened=y.wijCSS.iconArrowLeft,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!0,this.element.addClass(p),this.element.addClass(u).addClass(y.wijCSS.wijaccordionLeft);break;default:this._headerCornerOpened=y.wijCSS.cornerTop,this._contentCornerOpened=y.wijCSS.cornerBottom,this._triangleIconOpened=y.wijCSS.iconArrowDown,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!1,this.element.removeClass(p),this.element.addClass(o).addClass(y.wijCSS.wijaccordionBottom)}g=this.element.data("rightToLeft"),this.element.data("rightToLeft",c),t&&(v.addClass(this._triangleIconOpened),m.addClass(this._triangleIconClosed),h.addClass(this._headerCornerOpened),d.addClass(this._contentCornerOpened)),t&&c!==g&&this.element.children("."+f).each(function(e,t){var r=n(this),i;c?(i=r.next("."+l),r.remove(),r.insertAfter(i)):(i=r.prev("."+l),r.remove(),r.insertBefore(i))})},r}(e.wijmoWidget);t.wijaccordion=d;var v=function(){function e(){this.wijCSS={wijaccordion:"",wijaccordionTop:"",wijaccordionBottom:"",wijaccordionLeft:"",wijaccordionRight:"",wijaccordionHeader:"",wijaccordionContent:"",wijaccordionContentActive:"",wijaccordionIcons:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c"},this.initSelector=":jqmData(role='wijaccordion')",this.animated="slide",this.duration=null,this.event="click",this.disabled=!1,this.expandDirection="bottom",this.header="> li > :first-child,> :not(li):even",this.requireOpenedPane=!0,this.selectedIndex=0}return e}();d.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new v),n.wijmo.registerWidget(r,d.prototype),n.extend(n.wijmo.wijaccordion,{animations:{_parseWidth:function(e){var t=(""+e).match(/^([\d+-.]+)(.*)$/);return{value:t?t[1]:"0",unit:t?t[2]||"px":"px"}},slide:function(e,t){e=n.extend({easing:"swing",duration:300},e,t);var r,i;e.horizontal?(r={width:"show"},i={width:"hide"}):(r={height:"show"},i={height:"hide"});if(!e.toHide.size()){e.toShow.stop(!0,!0).animate(r,e);return}if(!e.toShow.size()){e.toHide.stop(!0,!0).animate(i,e);return}var s=e.toShow.css("overflow"),o=0,u={},a={},f,l=e.horizontal?["width","paddingLeft","paddingRight"]:["height","paddingTop","paddingBottom"],c,h=e.toShow;e.horizontal?(c=h[0].style.height,h.height(parseInt(h.parent().height(),10)-parseInt(h.css("paddingTop"),10)-parseInt(h.css("paddingBottom"),10)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0))):(c=h[0].style.width,h.width(parseInt(h.parent().width(),10)-parseInt(h.css("paddingLeft"),10)-parseInt(h.css("paddingRight"),10)-(parseInt(h.css("borderLeftWidth"),10)||0)-(parseInt(h.css("borderRightWidth"),10)||0))),n.each(l,function(t,r){a[r]="hide",!e.horizontal&&r==="height"?u[r]=n.wijmo.wijaccordion.animations._parseWidth(n.css(e.toShow[0],r)):u[r]=n.wijmo.wijaccordion.animations._parseWidth(e.defaultLayoutSetting[r])}),e.horizontal?f={width:0,overflow:"hidden"}:f={height:0,overflow:"hidden"},e.toShow.css(f).stop(!0,!0).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").stop(!0,!0).animate(a,{step:function(t,n){var r;if(n.prop===e.horizontal?"width":"height")o=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start);r=o*u[n.prop].value,r<0&&(r=0),e.toShow[0].style[n.prop]=r+u[n.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css(e.horizontal?"width":"height",""),e.toShow.css(e.horizontal?"height":"width",c),e.toShow.css({overflow:s}),e.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})})(e.accordion||(e.accordion={}));var t=e.accordion})(wijmo||(wijmo={})),define("wijmo.wijaccordion",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijdialog",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){return n.ui.dialog.prototype._create.apply(this,arguments)},t.prototype._init=function(){return n.ui.dialog.prototype._init.apply(this,arguments)},t.prototype._destroy=function(){return n.ui.dialog.prototype._destroy.apply(this,arguments)},t.prototype._appendTo=function(){return n.ui.dialog.prototype._appendTo.apply(this,arguments)},t.prototype._setOptions=function(){return n.ui.dialog.prototype._setOptions.apply(this,arguments)},t.prototype._setOption=function(e,t){return n.ui.dialog.prototype._setOption.apply(this,arguments)},t.prototype.widget=function(){return n.ui.dialog.prototype.widget.apply(this,arguments)},t.prototype.close=function(){return n.ui.dialog.prototype.close.apply(this,arguments)},t.prototype.isOpen=function(){return n.ui.dialog.prototype.isOpen.apply(this,arguments)},t.prototype.moveToTop=function(){return n.ui.dialog.prototype.moveToTop.apply(this,arguments)},t.prototype._moveToTop=function(){return n.ui.dialog.prototype._moveToTop.apply(this,arguments)},t.prototype.open=function(){return n.ui.dialog.prototype.open.apply(this,arguments)},t.prototype._focusTabbable=function(){return n.ui.dialog.prototype._focusTabbable.apply(this,arguments)},t.prototype._keepFocus=function(){return n.ui.dialog.prototype._keepFocus.apply(this,arguments)},t.prototype._createWrapper=function(){return n.ui.dialog.prototype._createWrapper.apply(this,arguments)},t.prototype._createTitlebar=function(){return n.ui.dialog.prototype._createTitlebar.apply(this,arguments)},t.prototype._title=function(){return n.ui.dialog.prototype._title.apply(this,arguments)},t.prototype._createButtonPane=function(){return n.ui.dialog.prototype._createButtonPane.apply(this,arguments)},t.prototype._createButtons=function(){return n.ui.dialog.prototype._createButtons.apply(this,arguments)},t.prototype._makeDraggable=function(){return n.ui.dialog.prototype._makeDraggable.apply(this,arguments)},t.prototype._makeResizable=function(){return n.ui.dialog.prototype._makeResizable.apply(this,arguments)},t.prototype._minHeight=function(){return n.ui.dialog.prototype._minHeight.apply(this,arguments)},t.prototype._position=function(){return n.ui.dialog.prototype._position.apply(this,arguments)},t.prototype._size=function(){return n.ui.dialog.prototype._size.apply(this,arguments)},t.prototype._blockFrames=function(){return n.ui.dialog.prototype._blockFrames.apply(this,arguments)},t.prototype._unblockFrames=function(){return n.ui.dialog.prototype._unblockFrames.apply(this,arguments)},t.prototype._createOverlay=function(){if(!this.options.modal)return;var e=this,t=e.options.wijCSS;n.ui.dialog.overlayInstances||this._delay(function(){n.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(e){if(!n(e.target).closest(".ui-dialog").length&&!n(e.target).closest(".ui-datepicker").length){e.preventDefault();if(e.relatedTarget&&n(e.relatedTarget).closest(".ui-dialog").length)return;var t=n(".ui-dialog:visible:last .ui-dialog-content"),r;t.data("wijmoWijdialog")?r=t.data("wijmoWijdialog"):r=t.data("wijmoC1dialog"),r&&r._focusTabbable()}})}),this.overlay=n("<div>").addClass(t.overlay+" "+t.uiFront+" "+t.wijdialogOverlay).appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),n.ui.dialog.overlayInstances++},t.prototype._destroyOverlay=function(){return n.ui.dialog.prototype._destroyOverlay.apply(this,arguments)},t}(e.JQueryUIWidget);t.JQueryUIDialog=i;var s=function(){function e(){this.wijCSS={wijdialog:"wijmo-wijdialog",wijdialogZone:"wijmo-wijdialog-defaultdockingzone",uiFront:"ui-front",uiDialog:"ui-dialog",wijdialogOverlay:"ui-dialog-overlay",uiDialogContent:"ui-dialog-content",wijdialogCaptionButton:"wijmo-wijdialog-captionbutton",wijdialogHasFrame:"wijmo-wijdialog-hasframe",iconPinW:"ui-icon-pin-w",iconPinS:"ui-icon-pin-s",iconRefresh:"ui-icon-refresh",iconCarat1N:"ui-icon-carat-1-n",iconCarat1S:"ui-icon-carat-1-s",iconMinus:"ui-icon-minus",iconExtlink:"ui-icon-extlink",iconNewWin:"ui-icon-newwin",uiDialogClose:"ui-dialog-titlebar-close",uiDialogTitleBar:"ui-dialog-titlebar",uiDialogButtonPanel:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",wijdialogTitleBarClose:"",wijdialogTitleBarPin:"",wijdialogTitleBarRefresh:"",wijdialogTitleBarToggle:"",wijdialogTitleBarMinimize:"",wijdialogTitleBarMaximize:"",wijdialogTitleBarRestore:""},this.appendTo="body",this.autoOpen=!0,this.buttons=[],this.closeOnEscape=!0,this.closeText="close",this.dialogClass="",this.draggable=!0,this.height="auto",this.hide=null,this.maxHeight=null,this.maxWidth=null,this.minHeight=150,this.minWidth=150,this.modal=!1,this.position={my:"center",at:"center",of:window},this.resizable=!0,this.show=null,this.title=null,this.width=300,this.stack=!0,this.beforeClose=null,this.close=null,this.create=null,this.drag=null,this.dragStart=null,this.dragStop=null,this.focus=null,this.open=null,this.resize=null,this.resizeStart=null,this.resizeStop=null,this.zIndex=1e3,this.initSelector="",this.captionButtons={},this.collapsingAnimation=null,this.expandingAnimation=null,this.contentUrl="",this.minimizeZoneElementId="",this.buttonCreating=null,this.stateChanged=null,this.blur=null}return e}(),o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var t=this,r=t.options,i=r.wijCSS,s=t.element.attr("title");t._titlebarButtonClassPrefix="wijmo-wijdialog-titlebar-",n.ui.dialog.maxZ=n.ui.dialog.maxZ||100,n.isArray(r.buttons)&&n.each(r.buttons,function(e,t){var n=t.click;n&&typeof n=="string"&&window[n]&&(t.click=window[n])}),t.form=t.element.closest("form[id]"),e.prototype._create.call(this),t.element.removeClass("ui-dialog-content ui-widget-content").addClass(i.uiDialogContent).addClass(i.content),t.uiDialog.removeClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front").addClass(i.uiDialog).addClass(i.widget).addClass(i.content).addClass(i.cornerAll).addClass(i.uiFront).addClass(i.wijdialog).removeClass(this.options.dialogClass).addClass(this.options.dialogClass),s&&t.uiDialog.attr("title",s),t.uiDialogTitlebar.removeClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").addClass(i.uiDialogTitleBar).addClass(i.header).addClass(i.cornerAll).addClass(i.helperClearFix),t._initWijWindow(),t._bindWindowResize(),t._attachDraggableResizableEvent(),t._originalPosition=r.position,t.uiDialog.css({zIndex:r.zIndex}),t.isPin=!1,t.options.appendTo==="body"&&t.form.length&&t.uiDialog.appendTo(t.form)},t.prototype._createButtonPane=function(){var t=this.options.wijCSS;e.prototype._createButtonPane.call(this),this.uiDialogButtonPane.removeClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix").addClass(t.uiDialogButtonPanel).addClass(t.content).addClass(t.helperClearFix)},t.prototype._createButtons=function(){e.prototype._createButtons.call(this),this.uiDialog.hasClass("ui-dialog-buttons")&&this.uiDialog.removeClass("ui-dialog-buttons").addClass(this.options.wijCSS.uiDialogButtons)},t.prototype._makeDraggable=function(){e.prototype._makeDraggable.call(this),this.uiDialog.draggable("option","cancel","."+this.options.wijCSS.wijdialogCaptionButton)},t.prototype._createOverlay=function(){var t=this.options.wijCSS;e.prototype._createOverlay.call(this),this.overlay&&this.overlay.removeClass("ui-widget-overlay ui-front").addClass(t.overlay).addClass(t.uiFront)},t.prototype._handleDisabledOption=function(e,t){var r=this;this.uiDialog.removeClass(this.options.wijCSS.stateDisabled),e?(r.disabledDiv||(r.disabledDiv=r._createDisabledDiv()),r.disabledDiv.appendTo(r.options.appendTo),n.browser.msie&&r.uiDialog.data("ui-draggable")&&r.uiDialog.draggable("disable"),this.uiDialog.addClass(this.options.wijCSS.stateDisabled)):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=null,n.browser.msie&&r.uiDialog.data("ui-draggable")&&r.uiDialog.draggable("enable"))},t.prototype._createDisabledDiv=function(){var e=this,t,r=e.uiDialog,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return t=n("<div></div>").addClass(e.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top}),n.browser.msie&&(t.css("background-color","white"),n.browser.version==="9.0"&&t.css("opacity","0.1")),t},t.prototype.destroy=function(){var t=this,n=t.options.wijCSS;t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this),t.element.removeClass(n.uiDialogContent).removeClass(n.content),t.element.unbind(".wijdialog").removeData("wijdialog").removeData(this.widgetFullName)},t.prototype._attachDraggableResizableEvent=function(){var e=this,t=e.uiDialog,n=e.options;n.draggable&&t.draggable&&t.bind("dragstop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("dragstart",function(t,n){e._createIframeMask()}),n.resizable&&t.resizable&&t.bind("resizestop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("resizestart",function(t,n){e._createIframeMask(),e.initWidth===undefined&&e.initHeight===undefined&&(e.initWidth=e.uiDialog.width(),e.initHeight=e.uiDialog.height())})},t.prototype._createIframeMask=function(){var e=this;e.innerFrame&&(e.mask=n("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(n.ui.dialog.maxZ+1)+"'></div>").appendTo(e.uiDialog))},t.prototype._destoryIframeMask=function(){var e=this;e.innerFrame&&e.mask&&(e.mask.remove(),e.mask=undefined)},t.prototype._initWijWindow=function(){var e=this,t=!0;e._createCaptionButtons(),e._checkUrl(),e.uiDialog.bind("mousedown",function(t){var r=t.target;n.contains(e.element[0],r)||e.uiDialog.focus()}).bind("mouseenter",function(e){t=!0}).bind("mouseleave",function(e){t=!1}).bind("focusout",function(n){t||e._trigger("blur",n,{el:e.element})})},t.prototype._moveToTop=function(e,t){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?(r._trigger("focus",e),!1):(i.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=i.zIndex),r.overlay&&(n.ui.dialog.maxZ+=1,r.overlay.css("z-index",n.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},n.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",n.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",e),!1)},t.prototype._checkUrl=function(){var e=this,t=e.options,r=t.contentUrl,i=n('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');typeof r=="string"&&r.length>0&&(e.element.addClass(t.wijCSS.wijdialogHasFrame),e.element.append(i),e.innerFrame=i),e.contentWrapper=e.element},t.prototype._setOption=function(t,r){var i=this;e.prototype._setOption.call(this,t,r),t==="disabled"?i._handleDisabledOption(r,i.element):t==="contentUrl"?i.innerFrame?i.innerFrame.attr("src",r):i._checkUrl():t==="captionButtons"?i._createCaptionButtons():t==="minimizeZoneElementId"?i.getState()==="minimized"&&n("#"+r).length>0&&n("#"+r).append(i.uiDialog):t==="stack"&&(r||i.uiDialog.css("z-index",i.options.zIndex))},t.prototype._createCaptionButtons=function(){var e=[],t=this,r=t.options,i,s=r.wijCSS,o={pin:{visible:!0,click:t.pin,iconClassOn:s.iconPinW,iconClassOff:s.iconPinS},refresh:{visible:!0,click:t.refresh,iconClassOn:s.iconRefresh},toggle:{visible:!0,click:t.toggle,iconClassOn:s.iconCarat1N,iconClassOff:s.iconCarat1S},minimize:{visible:!0,click:t.minimize,iconClassOn:s.iconMinus},maximize:{visible:!0,click:t.maximize,iconClassOn:s.iconExtlink},close:{visible:!0,text:r.closeText,click:t.close,iconClassOn:s.iconClose}},u=r.captionButtons,a=t.uiDialogTitlebar;a.children("."+r.wijCSS.uiDialogClose+", ."+r.wijCSS.wijdialogCaptionButton).remove(),n.each(o,function(t,r){u&&u[t]&&n.extend(r,u[t]),e.push({button:t,info:r})}),t._trigger("buttonCreating",null,e);for(i=0;i<e.length;i++)t._createCaptionButton(e[i],a)},t.prototype._createCaptionButton=function(e,t,r){var i=this,s=i.options.wijCSS,o,u=i._titlebarButtonClassPrefix+e.button+" "+s["wijdialogTitleBar"+e.button.charAt(0).toUpperCase()+e.button.substring(1)],a=t.children("."+i._titlebarButtonClassPrefix+e.button),f=e.info,l=n("<span></span>");if(f.visible){if(a.size()===0){l.addClass("ui-icon "+f.iconClassOn).text(f.text||e.button),o=n('<a href="#"></a>').append(l).addClass(u+" ui-corner-all "+s.wijdialogCaptionButton).attr("role","button").hover(function(){o.addClass(s.stateHover)},function(){o.removeClass(s.stateHover)}).click(function(t){return e.button=="close"&&t.preventDefault(),l.hasAllClasses(f.iconClassOff)?l.removeClass(f.iconClassOff):l.addClass(f.iconClassOff),n.isFunction(f.click)&&f.click.apply(i,arguments),!1});if(r)return o;o.appendTo(t)}i[e.button+"Button"]=o}else a.remove()},t.prototype.pin=function(){var e=this.isPin,t=this.pinButton.children("span"),n=this.options.wijCSS;e?t.removeClass(n.iconPinS):t.length&&(t.hasAllClasses(n.iconPinS)||t.addClass(n.iconPinS)),this._enableDisableDragger(!e),this.isPin=!e},t.prototype.refresh=function(){var e=this.innerFrame;e!==undefined&&e.attr("src",e.attr("src"))},t.prototype.toggle=function(){var e=this,t=e.toggleButton.children("span"),n=e.options.wijCSS;e.minimized||(e.collapsed===undefined||!e.collapsed?(e.collapsed=!0,t.hasAllClasses(n.iconCarat1S)||t.addClass(n.iconCarat1S),e._collapseDialogContent(!0)):(e.collapsed=!1,t.hasAllClasses(n.iconCarat1S)&&t.removeClass(n.iconCarat1S),e._expandDialogContent(!0)))},t.prototype._expandDialogContent=function(e){var t=this,r=t.options,i=r.expandingAnimation;t.uiDialog.height("auto"),e&&i!==null?t.contentWrapper.show(i.animated,i.options,i.duration,function(e){t.uiDialog.css("height",t._toggleHeight),n.isFunction(i.callback)&&i.callback(e),r.resizable&&t._enableDisableResizer(!1)}):(t.contentWrapper.show(),r.resizable&&t._enableDisableResizer(!1),t.uiDialog.css("height",t.toggleHeight))},t.prototype._collapseDialogContent=function(e,t){var n=this,r=n.options,i=r.collapsingAnimation;r.resizable&&n._enableDisableResizer(!0),t||(n._toggleHeight=n.uiDialog[0].style.height),n.uiDialog.height("auto"),e&&i!==null?n.contentWrapper.hide(i.animated,i.options,i.duration):n.contentWrapper.hide(),n._enableDisableDragger(n.isPin)},t.prototype._enableDisableResizer=function(e){var t=this.uiDialog;if(!this.options.resizable)return;t.resizable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype._enableDisableDragger=function(e){var t=this.uiDialog;if(!this.options.draggable)return;t.draggable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype.minimize=function(){var e=this,t=e.uiDialog,r=e.options,i=r.wijCSS,s=null,o=n("<div></div>"),u=n("<div></div>"),a,f,l,c,h={width:undefined,height:undefined},p,d={width:undefined,height:undefined},v="uiDialog",m;e.minimized||(c=e.uiDialog.position(),h.width=e.uiDialog.width(),h.height=e.uiDialog.height(),m=e.getState(),e.maximized?(e.maximized=!1,e.restoreButton.remove(),n(window).unbind(".onWinResize")):(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState()),e._enableDisableResizer(!0),e.collapsed&&e._collapseDialogContent(!1),o.appendTo(e.options.appendTo).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.contentWrapper.hide(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.hide(),t.height("auto"),t.width("auto"),e._doButtonAction(e.minimizeButton,"hide"),e._restoreButton(!0,e.minimizeButton,"After"),e._doButtonAction(e.pinButton,"hide"),e._doButtonAction(e.refreshButton,"hide"),e._doButtonAction(e.toggleButton,"hide"),e._doButtonAction(e.maximizeButton,"show"),n.browser.webkit&&n("."+i.wijdialogCaptionButton,e.uiDialog).css("float","left"),e.innerFrame&&(v="copy",e[v]=e.uiDialog.clone(),e[v].empty(),e.uiDialogTitlebar.appendTo(e[v])),r.minimizeZoneElementId.length>0&&(s=n("#"+r.minimizeZoneElementId)),s!==null&&s.size()>0?s.append(e[v]):(a=n("."+i.wijdialogZone),a.size()===0&&(a=n('<div class="'+i.wijdialogZone+'"></div>'),n(document.body).append(a)),a.append(e[v]).css("z-index",t.css("z-index"))),e[v].css("position","static"),e[v].css("float","left"),n.browser.msie&&n.browser.version==="6.0"&&(f=n(document).scrollTop(),l=document.documentElement.clientHeight-a.height()+f,a.css({position:"absolute",left:"0px",top:l})),u.appendTo("body").css({top:e[v].offset().top,left:e[v].offset().left,height:e[v].innerHeight(),width:e[v].innerWidth(),position:"absolute"}),e.uiDialog.hide(),e.innerFrame&&e[v].hide(),o.effect("transfer",{to:u,className:i.content},100,function(){o.remove(),u.remove(),e[v].show(),e.minimized=!0,p=e.uiDialog.position(),d.width=e.uiDialog.width(),d.height=e.uiDialog.height(),e._enableDisableDragger(!0),e._trigger("resize",null,{originalPosition:c,originalSize:h,position:p,size:d}),e._trigger("stateChanged",null,{originalState:m,state:"minimized"})}))},t.prototype._doButtonAction=function(e,t){e!==undefined&&(e.removeClass(this.options.wijCSS.stateHover),e[t]())},t.prototype.maximize=function(){var e=this,t=n(window),r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u;e.maximized||(e._enableDisableDragger(!1),r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),e.minimized?e.restore():(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState(),u="normal"),e.maximized=!0,e.maximizeButton!==undefined&&(e.maximizeButton.hide(),e._restoreButton(!0,e.maximizeButton,"Before")),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float",""),e._onWinResize(e,t),e.collapsed&&e._collapseDialogContent(!1),e.collapsed||e._enableDisableDragger(!0),e._enableDisableResizer(!0),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),u==="normal"&&e._trigger("stateChanged",null,{originalState:"normal",state:"maximized"}))},t.prototype._bindWindowResize=function(){var e=this,t=n(window),r,i,s;t.resize(function(){e.maximized&&e._onWinResize(e,t)}),n.browser.msie&&n.browser.version==="6.0"&&t.bind("scroll.wijdialog resize.wijdialog",function(){e.minimized&&(i=n(document).scrollTop(),s=e.uiDialog.parent(),r=document.documentElement.clientHeight-s.height()+i,s.css({top:r}))})},t.prototype._saveNormalState=function(){var e=this,t=e.uiDialog,n=e.element;e.maximized||(e.normalWidth=t.css("width"),e.normalLeft=t.css("left"),e.normalTop=t.css("top"),e.normalHeight=t.css("height"),e.normalInnerHeight=n.css("height"),e.normalInnerWidth=n.css("width"),e.normalInnerMinWidth=n.css("min-width"),e.normalInnerMinHeight=n.css("min-height"))},t.prototype._onWinResize=function(e,t){e.uiDialog.css("top",t.scrollTop()),e.uiDialog.css("left",t.scrollLeft()),e.uiDialog.setOutWidth(t.width()),e.uiDialog.setOutHeight(t.height()),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height(),e._size(),e.collapsed&&(e.uiDialog.height("auto"),e.contentWrapper.hide())},t.prototype._restoreButton=function(e,t,n){var r=this,i={button:"restore",info:{visible:e,click:r.restore,iconClassOn:this.options.wijCSS.iconNewWin}},s=r._createCaptionButton(i,r.uiDialogTitlebar,!0);e&&(s["insert"+n](t),r.restoreButton=s)},t.prototype._appendToBody=function(e){this.innerFrame?(this.uiDialogTitlebar.prependTo(e),e.show()):e.appendTo(this.options.appendTo)},t.prototype.restore=function(){var e=this,t=e.uiDialog,r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u=n("<div></div>"),a=n("<div></div>"),f="uiDialog",l;e.minimized?(e.minimized=!1,e.innerFrame&&(f="copy",e[f]||(f="uiDialog")),r=e[f].position(),i.width=e[f].width(),i.height=e[f].height(),u.appendTo(e.options.appendTo).css({top:e[f].offset().top,left:e[f].offset().left,height:e[f].innerHeight(),width:e[f].innerWidth(),position:"absolute"}),t.css("position","absolute"),t.css("float",""),e._appendToBody(t),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.show(),a.appendTo(e.options.appendTo).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.uiDialog.hide(),u.effect("transfer",{to:a,className:this.options.wijCSS.content},150,function(){e.uiDialog.show(),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),u.remove(),a.remove(),e.copy&&e.copy.remove(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"minimized",state:l})}),e.collapsed&&e._collapseDialogContent(),e._doButtonAction(e.minimizeButton,"show"),e._doButtonAction(e.restoreButton,"remove"),e._doButtonAction(e.pinButton,"show"),e._doButtonAction(e.refreshButton,"show"),e._doButtonAction(e.toggleButton,"show"),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")):e.maximized&&(e.maximized=!1,r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),n(window).unbind(".onWinResize"),e.collapsed&&e._expandDialogContent(),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.collapsed&&e._collapseDialogContent(),e.maximizeButton!==undefined&&(e.maximizeButton.show(),e._restoreButton(!1,e.maximizeButton,"before")),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"maximized",state:l}))},t.prototype.getState=function(){var e=this;return e.minimized?"minimized":e.maximized?"maximized":"normal"},t.prototype.reset=function(){var e=this;e.getState()==="normal"?(e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e.initHeight&&e.initWidth&&(e.options.width=e.initWidth,e.options.height=e.initHeight,e._size()),e._setOption("position",e._originalPosition)):(e.element.one(this.widgetEventPrefix+"statechanged",function(){e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e.initHeight&&e.initWidth&&(e.options.width=e.initWidth,e.options.height=e.initHeight,e._size()),e._setOption("position",e._originalPosition)}),e.restore())},t.prototype.open=function(){var t=this,r=t.options;(r.hide==="drop"||r.hide==="bounce")&&n.browser.msie&&t.uiDialog.css("filter","auto"),t.innerFrame?(n.browser.msie&&n.browser.version==="9.0"?window.setTimeout(function(){t.innerFrame.attr("src",r.contentUrl)},200):t.innerFrame.attr("src",r.contentUrl),t.minimized?(t.uiDialogTitlebar.show(),t._isOpen=!0):e.prototype.open.call(this)):(t.minimized?(t.uiDialog.show(),t._isOpen=!0):e.prototype.open.call(this),t.uiDialog.wijTriggerVisibility()),t.collapsed&&t._collapseDialogContent(!1,!0),r.disabled&&(t.disabledDiv?t.disabledDiv.show():t.disable())},t.prototype.close=function(){var t=this,n=t.options;e.prototype.close.call(this)&&(t.innerFrame&&(t.innerFrame.attr("src",""),t.minimized&&t.uiDialogTitlebar.hide()),t.disabledDiv&&n.disabled&&t.disabledDiv.hide())},t.prototype._restoreToNormal=function(){var e=this,t=e.uiDialog,n=e.element;t.css("width",e.normalWidth),t.css("left",e.normalLeft),t.css("top",e.normalTop),t.css("height",e.normalHeight),n.css("height",e.normalInnerHeight),n.css("width",e.normalInnerWidth),n.css("min-width",e.normalInnerMinWidth),n.css("min-height",e.normalInnerMinHeight),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height()},t}(i);t.wijdialog=o,n.ui&&n.ui.dialog&&(n.extend(n.ui.dialog.overlay,{create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(e){if(n(e.target).zIndex()<n.ui.dialog.overlay.maxZ&&!n.contains(t.element[0],e.target))return!1})},1),n(document).bind("keydown.dialog-overlay",function(n){var r=e.getKeyCodeEnum();t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===r.ESCAPE&&(t.close(n),n.preventDefault())}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var r=(this.oldInstances.pop()||n("<div></div>").addClass(t.options.wijCSS.overlay)).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&r.bgiframe(),this.instances.push(r),r},height:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height()+"px":e+"px"):n(document).height()+"px"},width:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width()+"px":e+"px"):n(document).width()+"px"}}),o.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,n.ui.dialog.prototype.options,new s),o.prototype.disable=function(){return this._setOption("disabled",!0)},o.prototype.enable=function(){return this._setOption("disabled",!1)},n.wijmo.registerWidget(r,n.ui.dialog,o.prototype))})(e.dialog||(e.dialog={}));var t=e.dialog})(wijmo||(wijmo={})),define("wijmo.wijdialog",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},t.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},t.prototype._setOption=function(e,t){this._super(e,t),this._refresh()},t.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=n('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},t.prototype._validate=function(){var e=this.options;if(isNaN(e.pageCount)||e.pageCount<1)e.pageCount=1;isNaN(e.pageIndex)||e.pageIndex<0?e.pageIndex=0:e.pageIndex>=e.pageCount&&(e.pageIndex=e.pageCount-1);if(isNaN(e.pageButtonCount)||e.pageButtonCount<1)e.pageButtonCount=1},t.prototype._createNextPrev=function(e){var t=this.options;e&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,t.previousPageClass)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,t.nextPageClass)),e&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass))},t.prototype._createNumeric=function(e){var t=this.options,n=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),s;n>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(e&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),this.$ul.append(this._createPagerItem(!1,"...",r-1,"")));for(s=r;s<=i;s++)this.$ul.append(this._createPagerItem(s===n,s.toString(),s,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),e&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass)))},t.prototype._createPagerItem=function(e,t,r,i){var s,o=this.options.wijCSS,u=this,a=n("<li />").addClass(o.pagerButton+" "+o.cornerAll).attr({role:"tab","aria-label":t,title:t});return e?a.addClass(o.stateActive).attr("aria-selected","true"):a.addClass(o.stateDefault).hover(function(){u.options.disabled||n(this).addClass(o.stateHover)},function(){u.options.disabled||n(this).removeClass(o.stateHover)}).bind("click."+this.widgetName,{newPageIndex:r-1},n.proxy(this._onClick,this)),e?s=n("<span />"):s=i?n("<span />").addClass(o.icon+" "+i):n("<a/>").attr("href","#"),s.text(t),a.append(s),a},t.prototype._onClick=function(e){if(this.options.disabled)return!1;var t={newPageIndex:e.data.newPageIndex,handled:!1};if(this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex){this.options.pageIndex=t.newPageIndex,t.handled||this._refresh();var n={newPageIndex:t.newPageIndex};this._trigger("pageIndexChanged",null,n)}return!1},t}(e.wijmoWidget);t.wijpager=r,r.prototype.widgetEventPrefix="wijpager";var i=function(){function e(){this.wijCSS={pagerButton:"wijmo-wijpager-button"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},this.firstPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,this.firstPageText="First",this.lastPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,this.lastPageText="Last",this.mode="numeric",this.nextPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekNext,this.nextPageText="Next",this.pageButtonCount=10,this.previousPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,this.previousPageText="Previous",this.pageCount=1,this.pageIndex=0,this.pageIndexChanging=null,this.pageIndexChanged=null}return e}();r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijpager",r.prototype)})(e.pager||(e.pager={}));var t=e.pager})(wijmo||(wijmo={})),define("wijmo.wijpager",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){function r(e,t){var r=n.extend(!0,{},e,t);return delete r.constructor,r}var n=jQuery;t.extendWidgetOptions=r;var i=function(r){function i(){r.apply(this,arguments),this._dataOffset=0,this.rowOuterHeight=-1,this._windowResizeTimer=0,this.mEditSkechRowIndex=-1}return __extends(i,r),i.CSS={wijgrid:"wijmo-wijgrid",root:"wijmo-wijgrid-root",editedCellMarker:"wijmo-wijgrid-cell-edit",inputMarker:"wijgridinput",table:"wijmo-wijgrid-table",TH:"wijgridth",TD:"wijgridtd",cellContainer:"wijmo-wijgrid-innercell",rowHeader:"wijmo-wijgrid-rowheader",currentRowHeaderCell:"wijmo-wijgrid-current-rowheadercell",currentHeaderCell:"wijmo-wijgrid-current-headercell",currentCell:"wijmo-wijgrid-current-cell",cellAlignLeft:"wijalign-left",cellAlignRight:"wijalign-right",cellAlignCenter:"wijalign-center",filterList:"wijmo-wijgrid-filterlist",filter:"wijmo-wijgrid-filter",filterInput:"wijmo-wijgrid-filter-input",filterTrigger:"wijmo-wijgrid-filter-trigger",filterNativeHtmlEditorWrapper:"wijgrid-input-wrapper",headerArea:"wijmo-wijgrid-header",footerArea:"wijmo-wijgrid-footer",headerRow:"wijmo-wijgrid-headerrow",row:"wijmo-wijgrid-row",dataRow:"wijmo-wijgrid-datarow",altRow:"wijmo-wijgrid-alternatingrow",emptyDataRow:"wijmo-wijgrid-emptydatarow",filterRow:"wijmo-wijgrid-filterrow",groupHeaderRow:"wijmo-wijgrid-groupheaderrow",groupFooterRow:"wijmo-wijgrid-groupfooterrow",footerRow:"wijmo-wijgrid-footerrow",loadingOverlay:"wijmo-wijgrid-overlay",loadingText:"wijmo-wijgrid-loadingtext",groupArea:"wijmo-wijgrid-group-area",groupAreaEmpty:"wijmo-wijgrid-group-area-empty",groupAreaButton:"wijmo-wijgrid-group-button",groupAreaButtonSort:"wijmo-wijgrid-group-button-sort",groupAreaButtonClose:"wijmo-wijgrid-group-button-close",groupToggleVisibilityButton:"wijmo-wijgrid-grouptogglebtn",fixedView:"wijmo-wijgrid-fixedview",scroller:"wijmo-wijgrid-scroller",dndHelper:"wijmo-wijgrid-dnd-helper",dndArrowTopContainer:"wijmo-wijgrid-dnd-arrow-top",dndArrowBottomContainer:"wijmo-wijgrid-dnd-arrow-bottom",freezingHandleV:"wijmo-wijgrid-freezing-handle-v",freezingHandleH:"wijmo-wijgrid-freezing-handle-h",resizingHandle:"wijmo-wijgrid-resizehandle",headerCellSortIcon:"wijmo-wijgrid-sort-icon",headerCellText:"wijmo-wijgrid-headertext",c1basefield:"wijmo-c1basefield",c1band:"wijmo-c1band",c1field:"wijmo-c1field"},i.prototype._createWidget=function(t,n){var i=t&&e.data.util.isClassInstance(t.data)&&!(typeof wijdatasource=="function"&&t.data instanceof wijdatasource)&&t.data;i&&delete t.data,r.prototype._createWidget.apply(this,arguments),i&&(t.data=i,this.option("data",i))},i.prototype._create=function(){var t=this;if(!this.element.is("table"))throw"invalid markup";this._windowResizeTimer=0,this._dataOffset=0,this._scrollingState={x:null,y:null,index:0},this.rowOuterHeight=-1,this._initialized=!1,this._destroyed=!1,this._rendered=!1,this._eventUID=undefined,this._dataViewWrapper=undefined,this._originalHtml=undefined,this._originalAttr=undefined,this._originalCssText=undefined,this._autoHeight=undefined,this._autoWidth=undefined,this._renderCounter=0,this.$superPanelHeader=undefined,this.$topPagerDiv=undefined,this.$bottomPagerDiv=undefined,this.$groupArea=undefined,this.__uid=undefined,this._wijDataView=undefined,this.outerDiv=undefined,this.sketchTable=undefined,this.cellFormatter=undefined,this.rowStyleFormatter=undefined,this.cellStyleFormatter=undefined,this._eventUID=e.grid.getUID(),this._spinnerIsActivated=!1,this.deficientFilters={};var r="data"in this.options,i=r&&this.options.data;r&&delete this.options.data,this.options=n.extend(!0,{},this.options),n.isFunction(window.wijmoASPNetParseOptions)&&window.wijmoASPNetParseOptions(this.options),r&&(this.options.data=i),window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this._initialized=!1,this._destroyed=!1,this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"),this._dataViewWrapper=new e.grid.dataViewWrapper(this),this._originalHtml=this.element.html(),this._originalAttr={},this._originalCssText=this.element[0].style.cssText,this.element.addClass(e.grid.wijgrid.CSS.root),this.element.wrap('<div class="'+this.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.wijgrid+" "+this.options.wijCSS.wijgrid+" "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>'),this.outerDiv=this.element.parent();var s=this.element[0].style.height,o=this.element[0].style.width;s&&this.outerDiv.css("height",s),this._autoHeight=s==""||s=="auto",o&&this.outerDiv.css("width",this.element[0].style.width),this._autoWidth=o==""||o=="auto",this.element.css({height:"",width:""}),this.options.disabled&&this.disable(),this.cellFormatter=new e.grid.cellFormatterHelper,this.rowStyleFormatter=new e.grid.rowStyleFormatterHelper(this),this.cellStyleFormatter=new e.grid.cellStyleFormatterHelper(this),this._viewPortBounds({start:0,end:0}),this._allowVirtualScrolling()&&(this._viewPortBounds().start=this._scrollingState.index,this._serverSideVirtualScrolling()&&(this._dataOffset=this._scrollingState.index)),this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(e){t._initialized&&!t._destroyed&&e.target!==t.outerDiv[0]&&t.setSize()},"wijgrid"),this._renderCounter=0},i.prototype._destroy=function(){var t,r=this;try{this._view().dispose(),this._detachEvents(!0),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._dragndropui&&(this._dragndropui.dispose(),this._dragndropui=null),this._dataViewWrapper.dispose(),e.grid.remove$dataByPrefix(this.element,this._data$prefix),this.element.wijRemoveVisibilityObserver&&this.element.wijRemoveVisibilityObserver(),this.element.insertBefore(this.outerDiv),this.outerDiv.remove(),this.element.html(this._originalHtml),n.each(this._originalAttr,function(e,t){t===undefined?r.element.removeAttr(e):r.element.attr(e,t)}),this.element.removeClass(e.grid.wijgrid.CSS.root),this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=!0}},i.prototype._init=function(){this.$superPanelHeader=null,this.$topPagerDiv=null,this.$bottomPagerDiv=null,this.$groupArea=null,this._prevHoveredSketchRowIndex=-1,this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"),this.options.data||(this._field("thead")||this._field("thead",e.grid.readTableSection(this.element,1)),this._field("tfoot")||this._field("tfoot",e.grid.readTableSection(this.element,3))),this._initialized=this._initialized||!1,this.ensureControl(!0)},i.prototype._setOption=function(e,t){var n=this["_preset_"+e],i=this.options[e],s,o;n!==undefined&&(t=n.apply(this,[t,i])),s=t!==i||e.toLowerCase()==="columns",r.prototype._setOption.apply(this,[e,t]),s&&(o=this["_postset_"+e],o!==undefined&&o.apply(this,[t,i]))},i.prototype.columns=function(){return this._field("columns")||[]},i.prototype.currentCell=function(n,r,i){var s,o=this._view(),u=this._rows();if(arguments.length===0)return s=this._field("currentCell"),s||this._field("currentCell",s=e.grid.cellInfo.outsideValue),s;s=typeof n!="number"?n._clone():new e.grid.cellInfo(n,r);if(!s.isEqual(e.grid.cellInfo.outsideValue)){if(!s._isValid())throw"invalid arguments";s._clip(this._getDataCellsRange(t.dataRowsRangeMode.sketch));if(s.rowIndex()>=0&&!(o._getRowInfoBySketchRowIndex(s.rowIndex()).type&e.grid.rowType.data))return}return s._setGridView(this),this._changeCurrentCell(null,s,{changeSelection:i||!1,setFocus:!1}),this._field("currentCell")},i.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()},i.prototype.dataView=function(){return this._dataViewWrapper.dataView()},i.prototype.doRefresh=function(r){var i=this;n.isPlainObject(r)||(r={});var s,o=this,u=e.grid.EXPANDO,a=r&&r.virtualScrollData;if(!this._initialized)try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.getFieldsInfo(),!0,!0)}catch(f){throw f}finally{this._ownerise(!0),this._initialized=!0}if(!a){this._rebuildLeaves();var l=t.lazy(this._dataViewWrapper.data,this._dataViewWrapper),c=this._dataViewWrapper.dataView(),h=this._prepareTotalsRequest(!0);h.length&&n.each(this._field("leaves"),function(e,t){t._totalsValue=l().totals?l().totals[t.dataKey]:undefined});if(c.count()){s=this._field("leaves");var p=new e.grid.LazySketchTable({count:function(){return c.count()},getRange:function(e,t,n,r){for(var o=0;o<t;o++){var u=e+o,a=c.item(u);n[r+o]=i._buildSketchRow({values:a,originalRowIndex:u},s)}}});(this._hasGrouping()||this._hasMerging())&&p.ensureNotLazy(),this.sketchTable=p}else{this.sketchTable=new e.grid.SketchTable;var d=l().emptyData;d&&(s=this._field("visibleLeaves"),n.each(d,function(e,t){o.sketchTable.add(o._buildSketchRowEmptyDataItem(t,s,e===d.length-1))}))}}this._onRendering(r),a?this._refreshVirtual(r):this._refresh(r),r&&n.isFunction(r.beforeOnRendered)&&r.beforeOnRendered.apply(this,[r]),this._onRendered(r),r&&n.isFunction(r.afterRefresh)&&r.afterRefresh.apply(this,[r])},i.prototype.beginEdit=function(){if(!this._allowCellEditing())throw'Can be used only if the editingMode option is set to "cell".';return this._beginEditInternal(null)},i.prototype.endEdit=function(){return this._endEditInternal(null)},i.prototype.editRow=function(t){if(this.options.editingMode!=="row")throw'Can be used only if the editingMode option is set to "row".';this.mEditSkechRowIndex>=0&&this.cancelRowEditing();if(t>=0){var n=-1,r;for(var i=0;i<this.sketchTable.count()&&n<0;i++)r=this.sketchTable.row(i),r.isDataRow()&&r.dataItemIndex()===t&&(n=i);if(n>=0){var s=this._view();this.mEditSkechRowIndex=n,r.renderState|=e.grid.renderState.editing;if(s._isRowRendered(this.mEditSkechRowIndex)>=0){var o=s._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);o.state|=e.grid.renderState.editing,s._removeBodyRow(o.sectionRowIndex,!1),o=s._insertBodyRow(r,o.sectionRowIndex,o.dataItemIndex,-1)}}}},i.prototype.updateRow=function(){if(this.mEditSkechRowIndex>=0){var n=e.grid.asEditableDataView(this._dataViewWrapper.dataView()),r=!1;if(!n)throw"The provided DataView doesn't supports the editing operation.";try{var i=this.sketchTable.row(this.mEditSkechRowIndex),s=this._view();if(!i||!i.isDataRow()||!(i.renderState&e.grid.renderState.editing))throw"Invalid row";if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var o=s._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1),u=this._field("visibleLeaves"),a=[],f=new e.grid.cellEditorHelper;for(var l=0;l<u.length;l++){var c=u[l];if(e.grid.validDataKey(c.dataKey)&&!c.readOnly){var h=o.$rows.children("td, th").eq(l);if(h.length){var p=s._changeCellRenderState(h,e.grid.renderState.none,!0);if(p&e.grid.renderState.editing){var d=s.getAbsoluteCellInfo(h[0],!0),v=f.updateCell(this,d,null);if(!(v&t.updateCellResult.success)){r=!0;return}v&t.updateCellResult.notEdited||a.push(d)}}}}for(var l=0;l<a.length;l++)f.cellEditEnd(this,a[l],null);i.renderState&=~e.grid.renderState.editing,o.state&=~e.grid.renderState.editing,s._removeBodyRow(o.sectionRowIndex,!1),o=s._insertBodyRow(i,o.sectionRowIndex,o.dataItemIndex,-1)}else i.renderState&=~e.grid.renderState.editing}finally{r||(this.mEditSkechRowIndex=-1)}}},i.prototype.cancelRowEditing=function(){if(this.mEditSkechRowIndex>=0)try{var t=this.sketchTable.row(this.mEditSkechRowIndex),n=this._view();if(!t||!t.isDataRow()||!(t.renderState&e.grid.renderState.editing))throw"Invalid row.";t.renderState&=~e.grid.renderState.editing;if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var r=n._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,!1);r.state&=~e.grid.renderState.editing,n._removeBodyRow(r.sectionRowIndex,!1),r=n._insertBodyRow(t,r.sectionRowIndex,r.dataItemIndex,-1)}}finally{this.mEditSkechRowIndex=-1}},i.prototype.deleteRow=function(t){if(t>=0){var n=e.grid.asEditableDataView(this._dataViewWrapper.dataView());if(!n||!n.canRemove())throw"The provided DataView doesn't supports the deleting operation.";this._dataViewWrapper.ignoreChangeEvent(!0),n.remove(t),this._dataViewWrapper.ignoreChangeEvent(!1),this.ensureControl(!0,{forceDataLoad:!0})}},i.prototype.ensureControl=function(t,r){this._loading(),n.isPlainObject(r)||(r={data:null,afterRefresh:null,beforeRefresh:null}),this._initialized?(!r||!r.virtualScrollData)&&this._convertWidgetsToOptions():(this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.isDataLoaded()&&this._dataViewWrapper.getFieldsInfo(),this._dataViewWrapper.isDataLoaded(),!1),this._dataViewWrapper.isOwnDataView()||(new e.grid.settingsManager(this)).MapDVToWG()),this._ownerise(!0),this._initialized&&r&&n.isFunction(r.beforeRefresh)&&r.beforeRefresh.apply(this);if(!r||!r.virtualScrollData)this.mAllowVirtualScrolling=undefined,this.mEditSkechRowIndex=-1;t===!0?this._dataViewWrapper.load(r):(this.doRefresh(r),this._loaded())},i.prototype.getCellInfo=function(e){var t=null;return e&&(e=this._findUntilOuterDiv(e,{td:!0,th:!0}))&&(t=this._view().getAbsoluteCellInfo(e,!1)),t},i.prototype.getFilterOperatorsByDataType=function(t){return(new e.grid.filterOperatorsCache(this)).getByDataType(t||"string")},i.prototype.pageCount=function(){return this._customPagingEnabled()?Math.ceil(this.options.totalRows/this.options.pageSize)||1:this.options.allowPaging?this._dataViewWrapper.dataView().pageCount():1},i.prototype._closestCulture=function(){return this.mClosestCulture},i.prototype._serverShaping=function(){return!1},i.prototype._pageIndexForDataView=function(){return this.options.pageIndex},i.prototype.setSize=function(e,t){var r=this._view(),i=null,s=this.outerDiv,o=this._field("visibleLeaves"),u=[];r&&r.getScrollValue&&(i=r.getScrollValue());if(e||e===0)this._autoWidth=!1,s.width(e);if(t||t===0)this._autoHeight=!1,s.height(t);n.each(o,function(e,t){var i=r.getHeaderCell(e),s=r.getJoinedCols(e);n(i).css("width",""),n.each(s,function(e,t){n(t).css("width","")})}),this._setSizeInternal(i);var a=this._UIFrozener();a&&a.refresh()},i.prototype._setSizeInternal=function(e){this._view().updateSplits(e)},i.prototype.selection=function(){var t=this._field("selection");return t||this._field("selection",t=new e.grid.selection(this)),t},i.prototype._onDataViewCurrentPositionChanged=function(e,t){var n=this._currentCellFromDataView(this.currentCell().cellIndex()),r=this.selection();n=this.currentCell(n,null,!0)},i.prototype._resetDataProperties=function(){this.options.pageIndex=0;var e=this._viewPortBounds();e.start=e.end=0},i.prototype._onDataViewLoading=function(){this._activateSpinner(),this._trigger("dataLoading")},i.prototype._onDataViewReset=function(t){(new e.grid.settingsManager(this)).MapDVToWG(),this._trigger("dataLoaded"),this.doRefresh(t),this._loaded()},i.prototype._onDataViewLoaded=function(){},i.prototype._loading=function(){this._activateSpinner(),this._trigger("loading")},i.prototype._loaded=function(){this._deactivateSpinner(),this._trigger("loaded")},i.prototype._buildSketchRow=function(n,r){var i,s,o,u,a,f,l=e.data.Expando.getFrom(n.values,!1),c=l?l[e.grid.EXPANDO]:null,h=new e.grid.SketchDataRow(n.originalRowIndex,undefined,c&&c.rowAttributes),p=c&&c.cellsAttributes;for(i=0,s=r.length;i<s;i++)o=r[i],e.grid.validDataKey(o.dataKey)&&(u=p?p[o.dataKey]:null,a=this._dataViewWrapper.getValue(n.values,o.dataKey),h.add(new t.ValueCell(this.parse(o,a),u)));return h},i.prototype._buildSketchRowEmptyDataItem=function(n,r,i){var s,o,u=new t.SketchRow(e.grid.rowType.emptyDataRow,undefined),a=r.length;for(s=0,o=n.length;s<o;s++)u.add(new t.HtmlCell(n[s],{colSpan:a>0&&i?a:1}));return u},i.prototype._prepareColumnOptions=function(r,i,s,o,u){e.grid.traverse(r,function(e){e.isBand=n.isArray(e.columns)||e.clientType==="c1band";if(t.c1commandbtnfield.test(e)||t.c1btnfield.test(e))e.dataKey=null;e._originalDataKey=e.dataKey,e._originalHeaderText=e.headerText}),(new e.grid.bandProcessor).getVisibleHeight(r,!0);var a=[],f=this._originalHeaderRowData(),l=this._originalFooterRowData(),c=(i||"").toLowerCase(),h=this;o&&e.grid.columnsGenerator.generate(c,s,r),e.grid.setTraverseIndex(r),e.grid.traverse(r,function(r){r.isBand=n.isArray(r.columns)||r.clientType==="c1band",e.grid.shallowMerge(r,t.c1basefield.prototype.options),r.isBand?r.clientType="c1band":t.c1commandbtnfield.test(r)?(r.clientType="c1commandbtnfield",e.grid.shallowMerge(r,t.c1btnfieldbase.prototype.options),e.grid.shallowMerge(r,t.c1commandbtnfield.prototype.options),r.editCommand=r.editCommand||{},e.grid.shallowMerge(r.editCommand,t.c1commandbtnfield.prototype.options.editCommand),r.cancelCommand=r.cancelCommand||{},e.grid.shallowMerge(r.cancelCommand,t.c1commandbtnfield.prototype.options.cancelCommand),r.deleteCommand=r.deleteCommand||{},e.grid.shallowMerge(r.deleteCommand,t.c1commandbtnfield.prototype.options.deleteCommand),r.updateCommand=r.updateCommand||{},e.grid.shallowMerge(r.updateCommand,t.c1commandbtnfield.prototype.options.updateCommand)):t.c1btnfield.test(r)?(r.clientType="c1btnfield",e.grid.shallowMerge(r,t.c1btnfieldbase.prototype.options),e.grid.shallowMerge(r,t.c1btnfield.prototype.options)):(e.grid.shallowMerge(r,t.c1field.prototype.options),r.groupInfo=r.groupInfo||{},e.grid.shallowMerge(r.groupInfo,t.c1field.prototype.options.groupInfo),r.clientType||(r.clientType="c1field")),r.isLeaf&&!r.isBand&&a.push(r)}),this._field("leaves",a),o&&n.each(a,n.proxy(function(t,r){var i=typeof r.dataKey=="number"?r.dataKey:t;(c==="merge"||r.dynamic===!0)&&r.headerText===undefined&&(h._dataViewWrapper&&h._dataViewWrapper.isBoundedToDOM()&&f&&i<f.length?r.headerText=n.trim(f[i]):e.grid.validDataKey(r.dataKey)&&(r.headerText=""+r.dataKey)),h._dataViewWrapper&&h._dataViewWrapper.isBoundedToDOM()&&l&&i<l.length&&(r._footerTextDOM=n.trim(l[i]))},this))},i.prototype._rebuildLeaves=function(){var t=[],r=[],i;this._showRowHeader()&&(i=e.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:!0,allowMoving:!1,allowSizing:!1,allowSort:!1,isRowHeader:!0}),i.owner=this,t.push(i)),n.each(this.options.columns,function(e,n){t.push(n)}),this._columnsHeadersTable((new e.grid.bandProcessor).generateSpanTable(t,r)),this._field("leaves",r),this._onLeavesCreated()},i.prototype._onLeavesCreated=function(){var t=this._field("leaves"),r=this._dataViewWrapper.getFieldsInfo(),i,s=0,o=0,u=this;this._field("visibleLeaves",n.grep(t,function(t,u){return t.leavesIdx=u,e.grid.validDataKey(t.dataKey)?t.dataIndex=s++:t.dataIndex=-1,t.isBand||(i=r[t.dataKey],i&&(t._underlyingDataType=i.type,t._underlyingDataFormatString=i.format),n.isFunction(t.dataParser)&&(t.dataParser=new t.dataParser)),t.parentVis?(t.visLeavesIdx=o++,!0):!1}))},i.prototype._allowEditing=function(){return this.options.allowEditing===!0||this.options.editingMode==="cell"||this.options.editingMode==="row"},i.prototype._allowCellEditing=function(){return this.options.allowEditing===!0||this.options.editingMode==="cell"},i.prototype._allowVirtualScrolling=function(){return this.mAllowVirtualScrolling===undefined&&(this.mAllowVirtualScrolling=!this.options.allowPaging&&this.options.allowVirtualScrolling&&this.options.staticRowIndex<0&&this.options.scrollMode!=="none"&&!this._hasMerging()),this.mAllowVirtualScrolling},i.prototype._headerRows=function(){return this._view().headerRows()},i.prototype._filterRow=function(){return this._view().filterRow()},i.prototype._rows=function(){return this._view().bodyRows()},i.prototype._localizeFilterOperators=function(t){var r=this,i=new e.grid.filterOperatorsCache(this);n.each(t,function(e,t){if(t.name){var n=i.getByName(t.name);n&&(n.displayName=t.displayName)}})},i.prototype._UIDragndrop=function(t){return!this._dragndropui&&t&&(this._dragndropui=new e.grid.uiDragndrop(this)),this._dragndropui},i.prototype._UIFrozener=function(t){return!this._frozenerui&&t&&(this._frozenerui=new e.grid.uiFrozener(this)),this._frozenerui},i.prototype._UIResizer=function(t){return!this._resizerui&&t&&(this._resizerui=new e.grid.uiResizer(this)),this._resizerui},i.prototype._UISelection=function(t){return!this._selectionui&&t&&(this._selectionui=new e.grid.uiSelection(this)),this._selectionui},i.prototype._postset_allowColMoving=function(e,t){var r=this;n.each(this.columns(),function(t,n){e?r._UIDragndrop(!0).attach(n):r._UIDragndrop(!0).detach(n)});var i=this._field("groupedWidgets");i&&n.each(i,function(t,n){e?r._UIDragndrop(!0).attach(n):r._UIDragndrop(!0).detach(n)})},i.prototype._postset_allowSorting=function(e,t){this.ensureControl(!1)},i.prototype._postset_columns=function(e,t){this._initialized=!1,this.ensureControl(!0)},i.prototype._postset_allowPaging=function(e,t){this.ensureControl(!0)},i.prototype._postset_freezingMode=function(e,t){this._frozenerui&&this._frozenerui.refresh()},i.prototype._postset_culture=function(e,t){throw"read-only"},i.prototype._postset_customFilterOperators=function(e,t){var n=this._dataViewWrapper.dataView()},i.prototype._postset_data=function(t,r){this._ownerise(!1),e.grid.traverse(this.options.columns,function(e,t){if(e.dynamic){var r=n.inArray(e,t);r>=0&&t.splice(r,1)}else e.dataKey=e._originalDataKey,e.headerText=e._originalHeaderText}),this._initialized=!1,this._dataViewWrapper&&this._dataViewWrapper.dispose(),this._dataViewWrapper=new e.grid.dataViewWrapper(this),this.ensureControl(!0)},i.prototype._postset_disabled=function(t,n){var r=this,i=this._view();e.grid.iterateChildrenWidgets(this.outerDiv,function(e,n){n!==r&&n.option("disabled",t)}),i&&i.ensureDisabledState()},i.prototype._postset_groupIndent=function(e,t){this.ensureControl(!1)},i.prototype._postset_groupAreaCaption=function(e,t){var n=this._groupedColumns();this.$groupArea&&(!n||!n.length)&&this.$groupArea.html(e||"&nbsp;")},i.prototype._postset_highlightCurrentCell=function(e,t){var n=this.currentCell();n&&n._isValid()&&this._highlightCellPosition(n,e)},i.prototype._preset_pageIndex=function(e,t){if(isNaN(e))throw"out of range";var n=this.pageCount(),r=function(e){return e>n-1&&(e=n-1),e<0&&(e=0),e},i;return e=r(e),this.options.allowPaging&&e!==t&&(i={newPageIndex:e},this._onPageIndexChanging(i)?e=r(i.newPageIndex):e=t),e},i.prototype._postset_pageIndex=function(e,t){if(this.options.allowPaging){var n={newPageIndex:e};this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onPageIndexChanged(n)):this.ensureControl(!0,{afterRefresh:function(){this._onPageIndexChanged(n)}})}},i.prototype._preset_pageSize=function(e,t){if(isNaN(e))throw"out of range";return e<=0&&(e=1),e},i.prototype._postset_pageSize=function(e,t){this._resetDataProperties(),this.options.allowPaging&&!this._customPagingEnabled()&&this.ensureControl(!0)},i.prototype._postset_pagerSettings=function(e,t){this.ensureControl(!1)},i.prototype._postset_rowHeight=function(e,t){this.rowOuterHeight=-1,this.ensureControl(!1)},i.prototype._postset_scrollMode=function(e,t){this.ensureControl(!1)},i.prototype._postset_selectionMode=function(t,n){var r=this.selection(),i=this.currentCell(),s=this.selection().selectedCells().length();r.beginUpdate(),r.clear(),i&&i._isValid()&&s&&r._selectRange(new e.grid.cellInfoRange(i,i),!1,!1,e.grid.cellRangeExtendMode.none,null),r.endUpdate(),this._view().toggleDOMSelection(t==="none")},i.prototype._postset_showFilter=function(e,t){this.ensureControl(!1)},i.prototype._postset_showGroupArea=function(e,t){this.ensureControl(!1)},i.prototype._postset_showRowHeader=function(e,t){this.ensureControl(!1)},i.prototype._postset_staticRowIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},i.prototype._postset_staticColumnIndex=function(){this.options.scrollMode!=="none"&&this.ensureControl(!1)},i.prototype._postset_allowVirtualScrolling=function(e,t){this.ensureControl(!1)},i.prototype._preset_allowVirtualScrolling=function(e,t){if(isNaN(e)||e<0)throw"out of range";return e},i.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var t=e.grid.wijgrid.CSS,n=this.options.wijCSS,r=this.outerDiv.append('<div class="'+t.loadingOverlay+" "+n.wijgridLoadingOverlay+" "+n.overlay+'"></div>'+'<span class="'+t.loadingText+" "+n.wijgridLoadingText+" "+n.content+" "+n.cornerAll+'">'+'<span class="'+n.icon+" "+n.iconClock+'"></span>'+this.options.loadingText+"</span>").find("> ."+t.loadingText);r.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"}),this._spinnerIsActivated=!0}},i.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0},i.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated)try{var t=e.grid.wijgrid.CSS;this.outerDiv.find("> ."+t.loadingOverlay+", > ."+t.loadingText).remove()}finally{this._spinnerIsActivated=!1}},i.prototype._columnWidgetsFactory=function(e,t){var r,i=t.clientType;!i&&t.isBand&&(i="c1band"),t=n.extend({},t,{disabled:this.options.disabled});try{n.data(e[0],"wijgridowner",this);switch(i){case"c1basefield":r=e.c1basefield(t);break;case"c1band":r=e.c1band(t);break;case"c1btnfield":r=e.c1btnfield(t);break;case"c1commandbtnfield":r=e.c1commandbtnfield(t);break;default:r=e.c1field(t)}}finally{n.removeData(e[0],"wijgridowner")}return r},i.prototype._convertWidgetsToOptions=function(){this._initialized&&this._mergeWidgetsWithOptions&&(this._ownerise(!1),this._widgetsToOptions(),this._ownerise(!0))},i.prototype._field=function(t,n){return e.grid.dataPrefix(this.element,this._data$prefix,t,n)},i.prototype._removeField=function(e){var t=this._data$prefix+e;this.element.removeData(t)},i.prototype._prepareTotalsRequest=function(t){var r=this._field("leaves"),i,s;return!r||!this.options.showFooter?[]:(i=n.map(r,function(n,r){return!n.isBand&&e.grid.validDataKey(n.dataKey)&&n.aggregate&&n.aggregate!=="none"?t?[{column:n,aggregate:n.aggregate}]:[{dataKey:n.dataKey,aggregate:n.aggregate}]:null}),i)},i.prototype._widgetsToOptions=function(){var t=e.grid.flatten(this.options.columns);n.each(this.columns(),function(e,r){delete r.options.columns;var i=t[r.options.travIdx];n.extend(!0,i,r.options),i.filterValue=r.options.filterValue,i.filterOperator=r.options.filterOperator})},i.prototype._recreateColumnWidgets=function(){n.each(this.columns(),function(e,t){t.destroy()});var t=[],r=this._headerRows(),i,s,o,u,a,f,l;if(r&&r.length()){i=[],e.grid.traverse(this.options.columns,function(e){e.parentVis&&i.push(e)});for(s=0,o=i.length;s<o;s++)u=i[s],a=r.item(u.thY),f=e.grid.rowAccessor.getCell(a,u.thX),l=this._columnWidgetsFactory(n(f),u),t.push(l.data(e.grid.widgetName(l)))}this._field("columns",t)},i.prototype._groupedColumns=function(e){var t;e=!(t=this._field("groupedColumns"))||e;if(e){t=[];var r=this._field("leaves")||[],i=!1,s=function(e){return e.groupInfo&&e.groupInfo.position&&e.groupInfo.position!=="none"};n.each(r,function(e,n){s(n)?(i=i||n.groupedIndex===undefined,i||t.push(n)):delete n.groupedIndex}),i?n.each(r,function(e,n){s(n)&&(n.groupedIndex=t.length,t.push(n))}):(t.sort(function(e,t){return e.groupedIndex-t.groupedIndex}),n.each(t,function(e,t){t.groupedIndex=e})),this._field("groupedColumns",t)}return t||[]},i.prototype._ownerise=function(t){if(t){var n=this;e.grid.traverse(this.options.columns,function(e){e.owner=n;var t,r,i;if(t=e.groupInfo){t.owner=e;if(t.expandInfo)for(r=0,i=t.expandInfo.length;r<i;r++)t.expandInfo[r].owner=t}})}else e.grid.traverse(this.options.columns,function(e){delete e.owner;var t,n,r;if(t=e.groupInfo){delete t.owner;if(t.expandInfo)for(n=0,r=t.expandInfo.length;n<r;n++)delete t.expandInfo[n].owner}})},i.prototype._ensureRenderableBounds=function(t){return e.grid.ensureBounds(t,this._renderableRowsCount()-1)},i.prototype._ensureTotalRowsBounds=function(t){return e.grid.ensureBounds(t,this._totalRowsCount()-1)},i.prototype._ensureViewPortBoundsVisible=function(e){var t=this._renderableRowsCount();return e.end>=t&&(e.start-=e.end-t,e.end=t-1),e},i.prototype._renderableBoundsCollection=function(){return this.mRenderableBoundsCollection},i.prototype._rebuildRenderBoundsCollection=function(){var t=-1,n=-1,r=!1,i=this._totalRowsCount();this.mRenderableBoundsCollection=new e.grid.renderBoundsCollection(i-1);if(this._allowVirtualScrolling()&&this._serverSideVirtualScrolling())this.mRenderableBoundsCollection.add({start:0,end:i-1});else if(!this._allowVirtualScrolling()||!this._hasGrouping())this.mRenderableBoundsCollection.add({start:0,end:i-1});else{for(var s=0;s<this.sketchTable.count();s++){var o=this.sketchTable.row(s);o.style("display")==="none"?(t>=0&&(this.mRenderableBoundsCollection.add({start:t,end:n}),r=!1),t=n=-1):t<0?(r=!0,t=n=s):n++}r&&this.mRenderableBoundsCollection.add({start:t,end:n})}},i.prototype._refresh=function(t){(new e.grid.grouper).group(this,this.sketchTable,this._field("leaves")),(new e.grid.merger).merge(this.sketchTable,this._field("visibleLeaves")),this._rebuildRenderBoundsCollection(),this.options.scrollMode!=="none"?this.mView=new e.grid.fixedView(this,this._viewPortBounds()):this.mView=new e.grid.flatView(this,this._viewPortBounds()),this._render(),this._ownerise(!1),this._recreateColumnWidgets(),this._ownerise(!0),this.options.allowPaging&&(this.$topPagerDiv&&this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5),this.$bottomPagerDiv&&this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5))},i.prototype._refreshVirtual=function(e){var t=e.virtualScrollData,n={top:0,bottom:0};t.data&&(n=this._processVirtualData(t)),this._updateRowInfos(t,n),this._renderVirtualIntoView(t)},i.prototype._updateRowInfos=function(e,n){var r=this._viewPortBounds(),i=this._view(),s=e.newBounds,o=this._view().bodyRows(),u,a,f,l;switch(e.mode){case t.intersectionMode.reset:break;case t.intersectionMode.overlapBottom:u={start:s.start-r.start,end:r.end-r.start},f=s.start-r.start;for(a=u.start;a<=u.end;a++)l=i._getRowInfo(o.item(a),!1),l.sectionRowIndex-=f,n.top!==0&&(l.dataItemIndex+=n.top),i._setRowInfo(l.$rows,l);break;case t.intersectionMode.overlapTop:u={start:r.start-r.start,end:s.end-r.start},f=r.start-s.start;for(a=u.start;a<=u.end;a++)l=i._getRowInfo(o.item(a),!1),l.sectionRowIndex+=f,n.top!==0&&(l.dataItemIndex+=n.top),i._setRowInfo(l.$rows,l)}},i.prototype._renderVirtualIntoView=function(e){var n=this._viewPortBounds(),r=this,i,s=this._view(),o,u,a;switch(e.mode){case t.intersectionMode.reset:s._clearBody();var f=e.newBounds.end-e.newBounds.start+1;this._renderableBoundsCollection().forEachIndex(e.newBounds.start,f,function(e){i=r.sketchTable.row(e-r._dataOffset),s._insertBodyRow(i,-1,i.dataItemIndex(),e)}),s._rebuildOffsets();break;case t.intersectionMode.overlapBottom:o={start:e.newBounds.start,end:n.end};for(u=0;u<o.start-n.start;u++)s._removeBodyRow(0);var f=e.newBounds.end-o.end;this._renderableBoundsCollection().forEachIndex(o.end+1,f,function(e){i=r.sketchTable.row(e-r._dataOffset),s._insertBodyRow(i,-1,i.dataItemIndex(),e)});break;case t.intersectionMode.overlapTop:o={start:n.start,end:e.newBounds.end};for(u=0;u<n.end-e.newBounds.end;u++)s._removeBodyRow(o.end-o.start+1);a=0;var f=n.start-e.newBounds.start;this._renderableBoundsCollection().forEachIndex(e.newBounds.start,f,function(e){i=r.sketchTable.row(e-r._dataOffset),s._insertBodyRow(i,a++,i.dataItemIndex(),e)});break;default:}},i.prototype._processVirtualData=function(e){var n=this._dataViewWrapper,r=n.dataView().getSource(),i,s=this._field("leaves"),o,u,a,f=0,l={top:0,bottom:0},c,h=this._serverSideVirtualScrollingMargin();switch(e.mode){case t.intersectionMode.reset:this.sketchTable.clear(),n._unsafeSplice(0,r.length),this._dataOffset=e.request.index;for(o=0;o<e.data.length;o++)n._unsafePush(i=e.data[o]),this.sketchTable.add(this._buildSketchRow(n._wrapDataItem(i,o),s));break;case t.intersectionMode.overlapBottom:for(o=0;o<e.data.length;o++)n._unsafePush(i=e.data[o]),this.sketchTable.add(this._buildSketchRow(n._wrapDataItem(i,r.length-1),s));l.bottom=e.data.length;break;case t.intersectionMode.overlapTop:for(o=e.data.length-1;o>=0;o--)n._unsafeSplice(0,0,i=e.data[o]),this.sketchTable.insert(0,this._buildSketchRow(n._wrapDataItem(i,o),s));this._dataOffset=e.request.index,l.top=e.data.length}return u=this._ensureTotalRowsBounds({start:e.newBounds.start,end:e.newBounds.end}),a={start:this._dataOffset,end:this._dataOffset+r.length-1},f=a.end-u.end-h,f>0&&(l.bottom-=f,n._unsafeSplice(r.length-f,f),this.sketchTable.removeLast(f)),f=u.start-a.start-h,f>0&&(l.top-=f,n._unsafeSplice(0,f),this.sketchTable.removeFirst(f),this._dataOffset+=f),this.sketchTable.updateIndexes(),n._refreshSilent(),l},i.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===!0},i.prototype._isMobileEnv=function(){return this._isMobile},i.prototype._render=function(){var t=this._view(),r=this.options,i=e.grid.wijgrid.CSS,s=this.options.wijCSS,o;t.render(),o=this.outerDiv,r.scrollMode!=="none"&&(o=this.outerDiv.find("div."+i.scroller+":first")),this.$superPanelHeader=null,this.$topPagerDiv&&(this.$topPagerDiv.data("wijmo-wijpager")&&this.$topPagerDiv.wijpager("destroy"),this.$topPagerDiv.remove()),this.$topPagerDiv=null,this._needToCreatePagerItem()&&(r.pagerSettings.position==="top"||r.pagerSettings.position==="topAndBottom")&&(this.$topPagerDiv||(o.prepend(this.$superPanelHeader=n('<div class="wijmo-wijsuperpanel-header"></div>')),this.$superPanelHeader.prepend(this.$topPagerDiv=n('<div class="'+i.headerArea+" "+s.wijgridHeaderArea+" "+s.header+" "+s.cornerTop+'"></div>')))),r.showGroupArea?this._processGroupArea(o):this.$groupArea=null,this.$bottomPagerDiv&&(this.$bottomPagerDiv.data("wijmo-wijpager")&&this.$bottomPagerDiv.wijpager("destroy"),this.$bottomPagerDiv.remove()),this.$bottomPagerDiv=null,this._needToCreatePagerItem()&&(r.pagerSettings.position==="bottom"||r.pagerSettings.position==="topAndBottom")&&(this.$bottomPagerDiv||o.append(this.$bottomPagerDiv=n('<div class="'+i.footerArea+" "+s.wijgridFooterArea+" wijmo-wijsuperpanel-footer "+s.stateDefault+" "+s.cornerBottom+'"></div>')))},i.prototype._processGroupArea=function(t){var r=this,i=this._groupedColumns(),s=[],o=e.grid.wijgrid.CSS,u=this.options.wijCSS;this.$groupArea=n('<div class="'+u.content+" "+u.helperClearFix+" "+o.groupArea+" "+u.wijgridGroupArea+'"></div>'),i.length>0?n.each(i,function(e,t){var i=n('<a href="#"></a>').appendTo(r.$groupArea);try{n.data(i[0],"wijgridowner",r),i.c1groupedfield(n.extend({},{allowMoving:t.allowMoving,allowSort:t.allowSort,dataIndex:t.dataIndex,dataKey:t.dataKey,headerText:t.headerText,isBand:t.isBand,isLeaf:t.isLeaf,linearIdx:t.linearIdx,parentIdx:t.parentIdx,sortDirection:t.sortDirection,travIdx:t.travIdx,groupedIndex:t.groupedIndex},{disabled:r.options.disabled}))}finally{n.removeData(i[0],"wijgridowner")}s.push(i.data("wijmo-c1groupedfield"))}):this.$groupArea.addClass(o.groupAreaEmpty).css("padding",0).html(this.options.groupAreaCaption||"&nbsp;"),this._field("groupedWidgets",s),this.$superPanelHeader||t.prepend(this.$superPanelHeader=n('<div class="wijmo-wijsuperpanel-header"></div>')),this.$superPanelHeader.prepend(this.$groupArea),this._UIDragndrop(!0).attachGroupArea(this.$groupArea)},i.prototype._pagerSettings2PagerWidgetSettings=function(){return n.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:n.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:n.proxy(this._onPagerWidgetPageIndexChanged,this)})},i.prototype._showRowHeader=function(){return this.options.showRowHeader===!0&&this.options.staticColumnsAlignment!=="right"},i.prototype._attachEvents=function(){var e=this._view(),r=e.focusableElement(),i=this;r.bind("keydown."+this.widgetName,n.proxy(this._onKeyDown,this)),this.mKeyDownEventListener=new t.keyDownEventListener(this,r),n.each(e.subTables(),function(e,t){var r=t.element();r&&(r.tHead&&n(r.tHead).bind("click."+i.widgetName,n.proxy(i._onClick,i)),r.tBodies.length&&n(r.tBodies[0]).bind("click."+i.widgetName,n.proxy(i._onClick,i)).bind("dblclick."+i.widgetName,n.proxy(i._onDblClick,i)).bind("mousemove."+i.widgetName,n.proxy(i._onMouseMove,i)).bind("mouseout."+i.widgetName,n.proxy(i._onMouseOut,i)))}),n(window).bind("resize."+this.widgetName+"."+this._eventUID,n.proxy(this._onWindowResize,this))},i.prototype._detachEvents=function(e){var t=this._view(),r=this,i;this._windowResizeTimer=0,n(window).unbind("resize."+this.widgetName+"."+this._eventUID),t&&(i=t.focusableElement(),i.unbind("keydown."+this.widgetName),n.each(t.subTables(),function(){var e=this.element();e&&(e.tHead&&n(e.tHead).unbind("."+r.widgetName),e.tBodies.length&&n(e.tBodies[0]).unbind("."+r.widgetName))}))},i.prototype._handleSort=function(t,r){var i=this.options.columns,s=t.travIdx,o,u;t&&this.options.allowSorting&&(o=t.sortDirection==="none"?"ascending":t.sortDirection==="ascending"?"descending":"ascending",u={column:t,sortDirection:o,sortCommand:t.dataKey+" "+(o==="ascending"?"asc":"desc")},this._onColumnSorting(u)&&(t.sortDirection=u.sortDirection,r?t.sortOrder=this._customSortOrder++:(this._customSortOrder=1e3,n.each(this.columns(),function(e,t){t.options.sortOrder=0,t.options.travIdx!==s&&(!t.options.groupInfo||t.options.groupInfo.position==="none")&&(t.options.sortDirection="none")}),e.grid.traverse(i,function(e){e.sortOrder=0,e.travIdx!==s&&(!e.groupInfo||e.groupInfo.position==="none")&&(e.sortDirection="none")})),u={column:t,sortDirection:t.sortDirection,sortCommand:t.dataKey+" "+(t.sortDirection==="ascending"?"asc":"desc")},this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onColumnSorted(u)):this.ensureControl(!0,{afterRefresh:function(){this._onColumnSorted(u)}})))},i.prototype._handleDragnDrop=function(t,r,i,s,o){var u=e.grid.getColumnByTravIdx(this.options.columns,t),a=e.grid.getColumnByTravIdx(this.options.columns,r),f=s?"groupArea":"columns",l=o?"groupArea":"columns";o?this._onColumnGrouping({drag:u.found,drop:a?a.found:null,dragSource:f,dropSource:l,at:i})&&this.ensureControl(!0,{beforeRefresh:function(){if(!a)u.found.groupedIndex=0;else switch(i){case"left":u.found.groupedIndex=a.found.groupedIndex-.5;break;case"right":u.found.groupedIndex=a.found.groupedIndex+.5}s||n.extend(!0,u.found,{groupInfo:{position:"header"}})},afterRefresh:function(){this._onColumnGrouped({drag:u.found,drop:a?a.found:null,dragSource:f,dropSource:l,at:i})}}):this._onColumnDropping({drag:u.found,drop:a.found,at:i})&&this.ensureControl(!1,{beforeRefresh:function(){u.at.splice(u.found.linearIdx,1);switch(i){case"left":u.at===a.at&&u.found.linearIdx<a.found.linearIdx?a.at.splice(a.found.linearIdx-1,0,u.found):a.at.splice(a.found.linearIdx,0,u.found);break;case"right":u.at===a.at&&u.found.linearIdx<a.found.linearIdx?a.at.splice(a.found.linearIdx,0,u.found):a.at.splice(a.found.linearIdx+1,0,u.found);break;case"center":a.found.columns.push(u.found)}e.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:u.found,drop:a.found,at:i})}})},i.prototype._handleFilter=function(t,n,r){var i=(new e.grid.filterOperatorsCache(this)).getByName(n),s,o,u;i&&(i.arity>1?(s=this.parse(t.options,r),o=s!==null&&(e.grid.getDataType(t.options)==="string"||!isNaN(s))):o=!0,o&&(u={column:t.options,operator:i.name,value:s},this._onColumnFiltering(u)&&(t.options.filterValue=u.value,t.options.filterOperator=u.operator,this._resetDataProperties(),this._customPagingEnabled()?(this._convertWidgetsToOptions(),this._onColumnFiltered({column:t.options})):this.ensureControl(!0,{afterRefresh:function(){this._onColumnFiltered({column:t.options})}}))))},i.prototype._handleUngroup=function(t){var r=e.grid.getColumnByTravIdx(this.options.columns,t),i;r&&r.found&&(i=r.found,this._onColumnUngrouping({column:i})&&this.ensureControl(!0,{beforeRefresh:function(){delete i.groupedIndex,n.extend(!0,i,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:i})}}))},i.prototype._onVirtualScrolling=function(e,t,r,i,s,o){var u=this;this.ensureControl(this._serverSideVirtualScrolling(),{virtualScrollData:{newBounds:e,request:t,mode:r,data:o},beforeOnRendered:function(e){var t=u._viewPortBounds();n.extend(t,e.virtualScrollData.newBounds)},afterRefresh:function(e){u._view()._adjustRowsHeights(),s&&s(i)}})},i.prototype._handleVirtualScrolling=function(e,n,r){typeof n=="undefined"&&(n=null);var i=this._view(),s=this._viewPortBounds(),o=this._ensureRenderableBounds({start:e,end:e+i.getVirtualPageSize()-1}),u=this._ensureTotalRowsBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),a=null,f,l=this._view().getVirtualPageSize();n?f=n:o.start>s.end||o.end<s.start?f=t.intersectionMode.reset:o.start>s.start?f=t.intersectionMode.overlapBottom:o.start<s.start?f=t.intersectionMode.overlapTop:f=o.start!==s.start||o.end!==s.end?t.intersectionMode.reset:t.intersectionMode.none;if(this._serverSideVirtualScrolling())switch(f){case t.intersectionMode.reset:a={index:e,maxCount:l};break;case t.intersectionMode.overlapBottom:o.end>u.end&&(a={index:u.end+1,maxCount:l});break;case t.intersectionMode.overlapTop:o.start<u.start&&(a={index:Math.max(0,u.start-l),maxCount:0},a.maxCount=u.start-a.index)}f!==t.intersectionMode.none&&this._onVirtualScrolling(o,a,f,e,r)},i.prototype._serverSideVirtualScrolling=function(){return!1},i.prototype._serverSideVirtualScrollingMargin=function(){var e=this._view().getVirtualPageSize()*2;return e<20&&(e=20),e},i.prototype._onColumnDropping=function(e){return this._trigger("columnDropping",null,e)},i.prototype._onColumnDropped=function(e){this._trigger("columnDropped",null,e)},i.prototype._onColumnGrouping=function(e){return this._trigger("columnGrouping",null,e)},i.prototype._onColumnGrouped=function(e){this._trigger("columnGrouped",null,e)},i.prototype._onColumnUngrouping=function(e){return this._trigger("columnUngrouping",null,e)},i.prototype._onColumnUngrouped=function(e){this._trigger("columnUngrouped",null,e)},i.prototype._onColumnFiltering=function(e){return this._trigger("filtering",null,e)},i.prototype._onColumnFiltered=function(e){this._trigger("filtered",null,e)},i.prototype._onFilterOperatorsListShowing=function(e){this._trigger("filterOperatorsListShowing",null,e)},i.prototype._onColumnSorting=function(e){return this._trigger("sorting",null,e)},i.prototype._onColumnSorted=function(e){this._trigger("sorted",null,e)},i.prototype._onCurrentCellChanged=function(t,n){var r=this.options,i=this.currentCell(),s=i.row(),o=s&&s.type&e.grid.rowType.data?s.dataItemIndex:-1;this._dataViewWrapper.currentPosition(o);if(r.scrollMode!=="none"&&i&&!i.isEqual(e.grid.cellInfo.outsideValue)){var u=i;!(u.row().type&e.grid.rowType.data)&&!u.tableCell()&&(u=i._clone(),u.cellIndex(0)),this._view().scrollTo(u)}this._trigger("currentCellChanged");var a=t&&(t.type||"").toLowerCase()||"";if(n.changeSelection){var f=this.selection(),l=this.options.selectionMode.toLowerCase(),c=n.selectionExtendMode||e.grid.cellRangeExtendMode.none;f.beginUpdate();if(a){if(i._isValid())switch(a){case"click":(!t.shiftKey||!f._multipleRangesAllowed()&&l!=="singlerange")&&f._startNewTransaction(i),t.shiftKey&&t.ctrlKey?f._clearRange(new e.grid.cellInfoRange(i,i),c):f._selectRange(new e.grid.cellInfoRange(f._anchorCell(),i),t.ctrlKey,t.shiftKey,c,null);break;case"keydown":(!t.shiftKey||!f._multipleRangesAllowed()&&l!=="singlerange")&&f._startNewTransaction(i),f._selectRange(new e.grid.cellInfoRange(f._anchorCell(),i),!1,t.shiftKey,e.grid.cellRangeExtendMode.none,null)}}else f.clear(),i._isValid()&&(f._startNewTransaction(i),f._selectRange(new e.grid.cellInfoRange(i,i),!1,!1,e.grid.cellRangeExtendMode.none,null));f.endUpdate()}a==="click"&&this._editBySingleClick()&&this._beginEditInternal(t)},i.prototype._onPageIndexChanging=function(e){return this._trigger("pageIndexChanging",null,e)},i.prototype._onPageIndexChanged=function(e){this._trigger("pageIndexChanged",null,e)},i.prototype._onPagerWidgetPageIndexChanging=function(e,t){t.handled=!0},i.prototype._onPagerWidgetPageIndexChanged=function(e,t){this._setOption("pageIndex",t.newPageIndex)},i.prototype._onRendering=function(e){var t=this._view();this._rendered=!1;if(!e.virtualScrollData){var n=this._field("currentCell");this._field("currentCellPrevCycle",n?{x:n.cellIndex(),y:n.rowIndex(),dataItemIndex:n.row()?n.row().dataItemIndex:-1}:{x:-1,y:-1,dataItemIndex:-1}),this._field("currentCell",null),t&&t.dispose(),this._detachEvents(!1),this.element.detach(),this.element.css({"table-layout":"",width:""}),this.element.empty(),this.outerDiv.empty(),this.outerDiv.append(this.element),this._selectionui&&(this._selectionui.dispose(),this._selectionui=null),this._resizerui&&(this._resizerui.dispose(),this._resizerui=null),this._frozenerui&&(this._frozenerui.dispose(),this._frozenerui=null)}this._trigger("rendering")},i.prototype._onRendered=function(t){var r=this._view(),i,s=this.selection().selectedCells().length()>0;this._rendered=!0;if(!t.virtualScrollData){this._field("selection",null),this._attachEvents(),this._setAttr(r.focusableElement(),"tabIndex",0);var o=this._field("currentCellPrevCycle");if(this._dataViewWrapper.isOwnDataView&&o.dataItemIndex>=0){var u=this._dataViewWrapper.dataView().count();o.dataItemIndex>=u&&(o.dataItemIndex=u-1),this._dataViewWrapper.currentPosition(o.dataItemIndex)}i=this._currentCellFromDataView(o.x),!i._isValid()&&this.options.showSelectionOnRender&&(i=this._getFirstDataRowCell(0)),this.currentCell(i,null,!0),this._UISelection(!0);var a=new e.grid.uiResizer(this);n.each(this.columns(),function(e,t){var n=t.options;n.visible&&n.parentVis&&n.isLeaf&&a.addElement(t)}),this._resizerui=a,this._setSizeInternal(this._scrollingState),this.options.scrollMode!=="none"&&(this._frozenerui=new e.grid.uiFrozener(this))}else this.currentCell(this.currentCell(),null,!1),this.selection()._ensureSelection();this._renderCounter++,this._trigger("rendered")},i.prototype._onClick=function(t){if(!this._canInteract()||!t.target)return;var r=this._view(),i=this._findUntilOuterDiv(t.target,{td:!0,th:!0}),s,o,u=e.grid.cellRangeExtendMode.none,a,f,l=!1;if(i){if(n(t.target).hasClass(e.grid.wijgrid.CSS.groupToggleVisibilityButton))return this._onGroupBtnClick(t),t.stopPropagation(),!1;s=n(i).closest("tr");if(!s.length)return;o=r.getAbsoluteCellInfo(i,!1);if(s.hasClass(e.grid.wijgrid.CSS.dataRow)||s.hasClass(e.grid.wijgrid.CSS.headerRow)){if(o.cellIndex()<0||o.rowIndex()<0)o.rowIndex()>=0?(o=new e.grid.cellInfo(0,o.rowIndex()),u=e.grid.cellRangeExtendMode.row,l=!0):o.cellIndex()>=0&&(o=this._getFirstDataRowCell(o.cellIndex()),u=e.grid.cellRangeExtendMode.column,l=!0);l||(o=r.getAbsoluteCellInfo(i,!0)),this._changeCurrentCell(t,o,{changeSelection:!0,setFocus:!0,selectionExtendMode:u})}var c={cell:o};this._trigger("cellClicked",null,c)}},i.prototype._onDblClick=function(e){this._editBySingleClick()||this._beginEditInternal(e)},i.prototype._onGroupBtnClick=function(r){if(!this._canInteract())return;var i=n(r.target).closest("tr"),s=e.grid.groupHelper,o=s.getGroupInfo(i[0]),u,a,f=this;o&&(u=s.getColumnByGroupLevel(this._field("leaves"),o.level),u&&(a=u.groupInfo.expandInfo[o.index],a.isExpanded?a.collapse():a.expand(r.shiftKey),this._allowVirtualScrolling()&&(this._rebuildRenderBoundsCollection(),this._view().vsUI._changeVisibleRowsCount(this._renderableBoundsCollection().capacity()),this._ensureViewPortBoundsVisible(this._viewPortBounds()),this._handleVirtualScrolling(this._viewPortBounds().start,t.intersectionMode.reset)),this.setSize()))},i.prototype._onKeyDown=function(r){var i=this.mKeyDownEventListener.isHiddenInput(n(r.target));if(!this._canInteract()||i&&this.mKeyDownEventListener.canHandle(r))return!0;var s=r.target.tagName.toLowerCase(),o=n(r.target),u=this.currentCell(),a=e.getKeyCodeEnum();if(!!i||s!=="input"&&s!=="option"&&s!=="select"&&s!=="textarea"||o.closest("tr.wijmo-wijgrid-datarow").length!==0){if(this._allowCellEditing()){if((r.which===a.ESCAPE||r.which===113)&&u._isValid()&&u._isEdit())return this._endEditInternal(r),!1;if(r.which===113)return this._beginEditInternal(r),!1}if(!this.options.allowKeyboardNavigation)return!0;var f;switch(r.which){case a.DOWN:case a.PAGE_DOWN:case a.UP:case a.PAGE_UP:case a.LEFT:case a.RIGHT:case a.HOME:case a.END:case a.TAB:if(i||this._canMoveToAnotherCell(r.target,r.which)){var l=this._getDataCellsRange(t.dataRowsRangeMode.renderable);f=this._getNextCurrentCell(l,u,r.keyCode,r.shiftKey)}}if(f){var c=f._isRendered(),h=this._renderableBoundsCollection().getRenderedIndex(f.rowIndex()),p,d,v=this._allowVirtualScrolling()&&h-this._viewPortBounds().start>=this._rows().length()-1,m=this;return this._allowVirtualScrolling()&&(!c||v&&(p=this._view().getVisibleAreaBounds(!0))&&(d=f.row().$rows)&&d.offset().top+d.outerHeight()>p.top+p.height)?(f.rowIndex()>u.rowIndex()&&(h-=this._rows().length()-1,h+=1),this._view().vsUI.scrollTo(h,function(){m._changeCurrentCell(r,f,{changeSelection:!0,setFocus:!0})})):this._changeCurrentCell(r,f,{changeSelection:!0,setFocus:!1}),!1}return!0}return!0},i.prototype._onMouseMove=function(t){var r=this._view(),i=this._frozenerui,s,o,u,a,f,l=e.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||i&&i.inProgress())return;s=this._findUntilOuterDiv(t.target,{td:!0,th:!0});if(s){o=n(s).closest("tr");if(!o.length||!o.hasClass(e.grid.wijgrid.CSS.dataRow)&&!o.hasClass(e.grid.wijgrid.CSS.headerRow))return;u=r.getAbsoluteCellInfo(s,!0);var c=u.rowIndex();c!==this._prevHoveredSketchRowIndex&&(this._prevHoveredSketchRowIndex!==undefined&&r._isRowRendered(this._prevHoveredSketchRowIndex)>=0&&(f=r._getRowInfoBySketchRowIndex(this._prevHoveredSketchRowIndex),f&&(r._changeRowRenderState(f,l.hovered,!1),this.rowStyleFormatter.format(f))),this._prevHoveredSketchRowIndex=c,c>=0&&(f=r._getRowInfoBySketchRowIndex(c),f&&(r._changeRowRenderState(f,l.hovered,!0),this.rowStyleFormatter.format(f))))}},i.prototype._onMouseOut=function(t){if(!this._canInteract())return;var r=this._findUntilOuterDiv(t.relatedTarget,{tr:!0});if(!r||!n(r).hasClass(e.grid.wijgrid.CSS.dataRow)){var i=this._prevHoveredSketchRowIndex,s=this._view();if(i>=0){var o=s._getRowInfoBySketchRowIndex(i);o&&o.$rows&&(s._changeRowRenderState(o,e.grid.renderState.hovered,!1),this.rowStyleFormatter.format(o)),this._prevHoveredSketchRowIndex=-1}}},i.prototype._onWindowResize=function(e){var t=this;this._windowResizeTimer>0&&(window.clearTimeout(this._windowResizeTimer),this._windowResizeTimer=0),this._windowResizeTimer!==-1&&(this._windowResizeTimer=window.setTimeout(function(){t._windowResizeTimer=-1;try{!t._destroyed&&t._initialized&&t.element.parent().length&&t.setSize()}finally{t._windowResizeTimer=0}},50))},i.prototype._fieldResized=function(e,t,n){t<0&&(t=0),n<=0&&(n=1);var r={column:e.options,oldWidth:t,newWidth:n};if(this._trigger("columnResizing",null,r)!==!1){if(isNaN(r.newWidth)||r.newWidth<0)r.newWidth=1;e.option("width",r.newWidth);var i={column:e.options};this._trigger("columnResized",null,i)}},i.prototype._changeCurrentCell=function(r,i,s){var o=this.currentCell(),u=this._getDataCellsRange(t.dataRowsRangeMode.sketch),a,f,l=this.options.highlightCurrentCell,c,h=r&&r.target&&n(r.target).is(":focus"),p=this,d=function(e){h?n(r.target).focus():p.mKeyDownEventListener.focus(n(e))};if(u._isValid()&&u._containsCellInfo(i)||i.isEqual(e.grid.cellInfo.outsideValue))if(o.cellIndex()!==i.cellIndex()||o.rowIndex()!==i.rowIndex()){a={cellIndex:i.cellIndex(),rowIndex:i.rowIndex(),oldCellIndex:o.cellIndex(),oldRowIndex:o.rowIndex()};if(!this._trigger("currentCellChanging",null,a))return!1;f=!1;if(!this._allowCellEditing()||!o._isEdit()||(f=this._endEditInternal(null)))u._containsCellInfo(o)&&l&&this._highlightCellPosition(o,!1),o=i._clone(),o._setGridView(this),l&&this._highlightCellPosition(o,!0),s.setFocus&&(c=o.tableCell())&&d(c),this._field("currentCell",o),this._onCurrentCellChanged(r,s)}else l&&this._highlightCellPosition(o,!0),!o._isEdit()&&(c=o.tableCell())&&(r&&this._editBySingleClick()?this._beginEditInternal(r):s.setFocus&&d(c));return!0},i.prototype._highlightCellPosition=function(t,r){if(t&&t._isValid()){var i=t.cellIndexAbs(),s=t.rowIndexAbs(),o=e.grid.renderState,u=this._view(),a,f,l;f=u.getHeaderCell(i),f&&(a=u._getRowInfo(this._headerRows().item(t.column().thY)),f=n(f),l=u._changeCellRenderState(f,o.current,r),this.cellStyleFormatter.format(f,i,t.column(),a,l)),t._isRendered()&&(f=u.getJoinedRows(s,0),f&&(a=u._getRowInfo(f),u._changeRowRenderState(a,o.current,r),this.rowStyleFormatter.format(a)),f=u.getCell(i,s),f&&(f=n(f),l=u._changeCellRenderState(f,o.current,r),this.cellStyleFormatter.format(f,i,t.column(),a,l)))}},i.prototype._beginEditInternal=function(t){if(this._canInteract()&&this._allowCellEditing()){var n=this.currentCell(),r=n.column(),i;if(r&&!r.readOnly)return i=(new e.grid.cellEditorHelper).cellEditStart(this,n,t),i,i}return!1},i.prototype._endEditInternal=function(r){if(this._canInteract()&&this._allowCellEditing()){var i=this.currentCell(),s=new e.grid.cellEditorHelper,o=s.updateCell(this,i,r);if(o&t.updateCellResult.success){if(o&t.updateCellResult.notEdited)return!0;s.cellEditEnd(this,i,r),i=this.currentCell();var u=i.tableCell();return u?this.mKeyDownEventListener.focus(n(u)):n(this._view().focusableElement()).focus(),this._allowVirtualScrolling()||this._view().ensureHeight(i.rowIndex()),!0}}return!1},i.prototype._onViewInsertEmptyRow=function(e,t,n,r,i){return null},i.prototype._onViewCreateEmptyCell=function(e,t,n){return null},i.prototype._onViewCellRendered=function(e,t,n,r){},i.prototype._onViewRowRendered=function(e){},i.prototype._getDataParser=function(t){return t.dataParser||e.data.defaultParsers[t.dataType]||e.data.defaultParsers.string},i.prototype.parse=function(t,r){var i=e.grid.getDataType(t),s=e.grid.getDataType(t);return n.isFunction(r)&&(r=r()),r=e.data.convert(r,i,s,{culture:this.mClosestCulture,format:t.dataFormatString||t._underlyingDataFormatString,nullString:this.options.nullString,parser:t.dataParser}),r},i.prototype.toStr=function(t,n){var r=this._dataViewWrapper.dataView(),i=e.grid.getDataType(t),s="string";return n=e.data.convert(n,i,s,{culture:this.mClosestCulture,format:t.dataFormatString||t._underlyingDataFormatString,nullString:this.options.nullString,parser:t.dataParser}),n},i.prototype.parseFailed=function(e,t,n,r){return t},i.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]},i.prototype._canInteract=function(){return!this.options.disabled},i.prototype._canMoveToAnotherCell=function(t,r){var i=t.tagName.toLowerCase(),s,o,u,a;switch(i){case"input":if(n(t).hasClass(e.grid.wijgrid.CSS.inputMarker)){var f=t;return f.type==="text"?(s=f.value.length,o=(new e.grid.domSelection(f)).getSelection(),u=e.getKeyCodeEnum(),a=r===u.TAB||r===u.UP||r===u.DOWN||r===u.PAGE_DOWN||r===u.PAGE_UP||o.length===0&&(o.start===0&&(r===u.LEFT||r===u.HOME)||o.end>=s&&(r===u.RIGHT||r===u.END)),a):!0}return!1;case"textarea":case"select":return!1}return!0},i.prototype._editBySingleClick=function(){var e=(this.options.editingInitOption||"").toLowerCase();switch(e){case"click":case"doubleclick":break;case"auto":default:e=this._isMobileEnv()?"click":"doubleclick"}return e==="click"},i.prototype._getDataToAbsOffset=function(){var e=0,t=0,n=this._headerRows();return this._showRowHeader()&&e++,n&&(t+=n.length()),this._filterRow()&&t++,{x:e,y:t}},i.prototype._currentCellFromDataView=function(t){var n=this._dataViewWrapper.currentPosition(),r=new e.grid.cellInfo(t,this._dataViewDataRowIndexToGrid(n),null);return r.rowIndex()<0?r.cellIndex(-1):r.cellIndex()<0&&r.cellIndex(0),r},i.prototype._dataViewDataRowIndexToGrid=function(t){var n=e.grid.rowType,r=this._view(),i=this._rows(),s,o,u;if(t<0)return-1;for(s=0,o=i.length();s<o;s++){u=r._getRowInfo(i.item(s));if(u.type&n.data&&u.dataItemIndex===t)return u.sectionRowIndex}return-1},i.prototype._getDataCellsRange=function(n,r){typeof r=="undefined"&&(r=!1);var i=0,s=0,o=this._field("visibleLeaves").length-1,u;switch(n){case t.dataRowsRangeMode.rendered:if(this._rendered){u=this._rows().length()-1;break};case t.dataRowsRangeMode.sketch:u=this._totalRowsCount()-1;break;case t.dataRowsRangeMode.renderable:u=this._renderableRowsCount()-1}this._showRowHeader()&&o--,r&&u>0&&u--;if(o<0||u<0)i=s=o=u=-1;return new e.grid.cellInfoRange(new e.grid.cellInfo(i,s,null),new e.grid.cellInfo(o,u,null))},i.prototype._getDataItem=function(e){return this.dataView().item(e)},i.prototype._getFirstDataRowCell=function(t){var n,r,i,s=this._view(),o=this._rows(),u=e.grid.rowType;for(n=0,r=o.length();n<r;n++){i=s._getRowInfo(o.item(n));if(i.type&u.data)return new e.grid.cellInfo(t,n)}return e.grid.cellInfo.outsideValue},i.prototype._getNextCurrentCell=function(t,n,r,i){var s=n.cellIndex(),o=n.rowIndex(),u=e.getKeyCodeEnum(),a=this.sketchTable,f=this._renderableBoundsCollection().getRenderedIndex(o),l=this._renderableBoundsCollection(),c,h=r===u.TAB,p=function(e,t,n,r){typeof r=="undefined"&&(r=!1);var i=e?l.forEachIndex:l.forEachIndexBackward,s=0,o=null;return i.call(l,t,-1,function(e){var t=a.row(e),i=t.isDataRow();if((!r||i)&&t.style("display")!=="none"){o=e;if(++s>=n)return!1}}),o};switch(r){case u.ENTER:case u.DOWN:(c=p(true,f+1,1))!=null&&(o=c);break;case u.PAGE_DOWN:(c=p(true,f+1,this._pageSizeKey))!=null&&(o=c);break;case u.UP:(c=p(false,f-1,1))!=null&&(o=c);break;case u.PAGE_UP:(c=p(false,f-1,this._pageSizeKey))!=null&&(o=c);break;case u.TAB:i?(s--,s<t.topLeft().cellIndex()&&(s=t.bottomRight().cellIndex(),(c=p(false,f-1,1,true))!=null?o=c:(c=p(false,l.capacity()-1,1,true))!=null&&(o=c))):(s++,s>t.bottomRight().cellIndex()&&(s=t.topLeft().cellIndex(),(c=p(true,f+1,1,true))!=null?o=c:(c=p(true,0,1,true))!=null&&(o=c)));break;case u.END:s=t.bottomRight().cellIndex();break;case u.HOME:s=t.topLeft().cellIndex();break;case u.LEFT:s>t.topLeft().cellIndex()&&s--;break;case u.RIGHT:s<t.bottomRight().cellIndex()&&s++}return new e.grid.cellInfo(s,o,this)},i.prototype._findUntilOuterDiv=function(e,t){var n=e,r,i,s=null;for(;n;n=n.parentNode){i=n.nodeName&&n.nodeName.toLowerCase();if(i){if(n===this.outerDiv[0]){r=n;break}t[i]&&(s=n)}}return r?s:null},i.prototype._getStaticIndex=function(e){var n,r=this._getDataCellsRange(t.dataRowsRangeMode.rendered);return this._hasSpannedCells()?-1:(e?n=Math.min(this.options.staticRowIndex,r.bottomRight().rowIndex()):n=Math.min(this.options.staticColumnIndex,r.bottomRight().cellIndex()),n<-1&&(n=-1),n)},i.prototype._getStaticOffsetIndex=function(e){var t=0;return e?this._showRowHeader()&&t++:(t=this._columnsHeadersTable().length,this.options.showFilter&&t++),t},i.prototype._getRealStaticColumnIndex=function(){var e,t,n=this._getStaticOffsetIndex(!0),r=this._getStaticIndex(!1),i,s;i=r+n;if(r>=0){e=this._field("visibleLeaves"),t=e.length,s=i;for(;i<t;i++)if(e[i].parentIdx===-1){i>s&&i--;break}i>=t&&(i=t-1)}return i},i.prototype._getRealStaticRowIndex=function(){var e=this._getStaticOffsetIndex(!1);return this._getStaticIndex(!0)+e},i.prototype._hasMerging=function(){var e=this._field("leaves"),t,n,r,i=!1;if(e)for(t=0,n=e.length;t<n&&!i;t++)r=e[t],i=i||r.parentVis&&r.rowMerge&&r.rowMerge!=="none";return i},i.prototype._hasGrouping=function(){var e=this._field("leaves"),t,n,r,i=!1;for(t=0,n=e.length;t<n&&!i;t++)r=e[t],i=r.groupInfo&&r.groupInfo.position!=="none";return i},i.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()},i.prototype._columnsHeadersTable=function(e){return arguments.length&&this._field("columnsHeadersTable",e),this._field("columnsHeadersTable")},i.prototype._view=function(){return this.mView},i.prototype._originalFooterRowData=function(){var e=this._field("tfoot");return e&&e.length?e[0]:null},i.prototype._originalHeaderRowData=function(){var e=this._field("thead");return e&&e.length?e[0]:null},i.prototype._setAttr=function(e,t,r){var i=this;return e===this.element?arguments.length===2?(n.each(t,function(t,n){t in i._originalAttr||(i._originalAttr[t]=e.attr(t))}),e.attr(t)):(t in this._originalAttr||(this._originalAttr[t]=e.attr(t)),e.attr(t,r)):arguments.length===3?e.attr(t,r):e.attr(t)},i.prototype._totalRowsCount=function(){return this.sketchTable.count()},i.prototype._renderableRowsCount=function(){return this._renderableBoundsCollection().capacity()},i.prototype._trackScrollingPosition=function(e,t){this._scrollingState.x=e,this._scrollingState.y=t},i.prototype._trackScrollingIndex=function(e){this._scrollingState.index=e},i.prototype._uid=function(){return this.__uid===undefined&&(this.__uid=e.grid.getUID()),"wijgrid"+this.__uid},i.prototype._viewPortBounds=function(e){return arguments.length&&(this.mViewPortBounds=e),this.mViewPortBounds},i.prototype._viewPortBoundsOfEntirelyShownRows=function(){var e=this._viewPortBounds(),t=!1,r=e.end-e.start+1;if(this._allowVirtualScrolling()){var i=this._view();r<i.getVirtualPageSize()&&(t=!0)}return t||(e=n.extend({},e),e.end--),e},i}(e.wijmoWidget);t.wijgrid=i,i.prototype.widgetEventPrefix="wijgrid",i.prototype._data$prefix="wijgrid",i.prototype._customSortOrder=1e3,i.prototype._pageSizeKey=10,i.prototype._mergeWidgetsWithOptions=!0;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.wijCSS={wijgrid:"",wijgridTable:"",wijgridTH:"",wijgridTD:"",wijgridCellContainer:"",wijgridRowHeader:"",wijgridCurrentRowHeaderCell:"",wijgridCurrentHeaderCell:"",wijgridCurrentCell:"",wijgridCellAlignLeft:"",wijgridCellAlignRight:"",wijgridCellAlignCenter:"",wijgridFilterList:"",wijgridFilter:"",wijgridFilterInput:"",wijgridFilterTrigger:"",wijgridFilterNativeHtmlEditorWrapper:"",wijgridHeaderArea:"",wijgridFooterArea:"",wijgridHeaderRow:"",wijgridRow:"",wijgridDataRow:"",wijgridAltRow:"",wijgridEmptyDataRow:"",wijgridFilterRow:"",wijgridGroupHeaderRow:"",wijgridGroupFooterRow:"",wijgridFooterRow:"",wijgridLoadingOverlay:"",wijgridLoadingText:"",wijgridGroupArea:"",wijgridGroupAreaButton:"",wijgridGroupAreaButtonSort:"",wijgridGroupAreaButtonClose:"",wijgridGroupToggleVisibilityButton:"",wijgridFixedView:"",wijgridScroller:"",wijgridDndHelper:"",wijgridDndArrowTopContainer:"",wijgridDndArrowBottomContainer:"",wijgridFreezingHandleV:"",wijgridFreezingHandleH:"",wijgridResizingHandle:"",wijgridHeaderCellSortIcon:"",wijgridHeaderCellText:""},this.allowColMoving=!1,this.allowColSizing=!1,this.allowEditing=!1,this.allowKeyboardNavigation=!0,this.allowPaging=!1,this.allowSorting=!1,this.allowVirtualScrolling=!1,this.cellStyleFormatter=undefined,this.columns=[],this.columnsAutogenerationMode="merge",this.culture="",this.customFilterOperators=[],this.data=null,this.editingInitOption="auto",this.editingMode="none",this.ensureColumnsPxWidth=!1,this.filterOperatorsSortMode="alphabeticalCustomFirst",this.freezingMode="none",this.groupAreaCaption="Drag a column here to group by that column.",this.groupIndent=10,this.highlightCurrentCell=!1,this.highlightOnHover=!0,this.loadingText="Loading...",this.nullString="",this.pageIndex=0,this.pageSize=10,this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"},this.readAttributesFromData=!1,this.rowHeight=-1,this.rowStyleFormatter=undefined,this.scrollMode="none",this.selectionMode="singleRow",this.showFilter=!1,this.showFooter=!1,this.showGroupArea=!1,this.showSelectionOnRender=!0,this.showRowHeader=!1,this.staticColumnIndex=-1,this.staticColumnsAlignment="left",this.staticRowIndex=-1,this.totalRows=-1,this.afterCellEdit=null,this.afterCellUpdate=null,this.beforeCellEdit=null,this.beforeCellUpdate=null,this.cellClicked=null,this.columnDragging=null,this.columnDragged=null,this.columnDropping=null,this.columnDropped=null,this.columnGrouping=null,this.columnGrouped=null,this.columnResizing=null,this.columnResized=null,this.columnUngrouping=null,this.columnUngrouped=null,this.currentCellChanging=null,this.currentCellChanged=null,this.filterOperatorsListShowing=null,this.filtering=null,this.filtered=null,this.groupAggregate=null,this.groupText=null,this.invalidCellValue=null,this.pageIndexChanging=null,this.pageIndexChanged=null,this.selectionChanged=null,this.sorting=null,this.sorted=null,this.dataLoading=null,this.dataLoaded=null,this.loading=null,this.loaded=null,this.rendering=null,this.rendered=null}return e}();i.prototype.options=e.grid.extendWidgetOptions(e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijgrid",i.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(){function e(e){e&&(this.__attr=e)}return e.prototype.attrs=function(){return this.__attr},e.prototype.ensureAttr=function(){return this.__attr=this.__attr||{},this.__attr},e.prototype.attr=function(e,t){if(arguments.length==0)return this.__attr;if(arguments.length==1)return this.__attr?this.__attr[e]:null;this.ensureAttr()[e]=t},e.prototype.style=function(e,t){if(arguments.length==0)return this.__style;if(arguments.length==1)return this.__style&&this.__style[e];this.ensureStyle()[e]=t},e.prototype.deleteStyle=function(e){this.__style&&delete this.__style[e]},e.prototype.ensureStyle=function(){return this.__style=this.__style||{},this.__style},e}();t.SketchObject=r;var i=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.visible=function(e){if(arguments.length==0)return this._visible!==!1;this._visible=e},t}(r);t.SketchCell=i;var s=function(e){function t(t,n){e.call(this,n),this.value=t}return __extends(t,e),t}(i);t.ValueCell=s;var o=function(e){function t(t,n){typeof t=="undefined"&&(t=""),e.call(this,n),this.html=t}return __extends(t,e),t.nbsp=function(){return new t("&nbsp;")},t}(i);t.HtmlCell=o;var u=function(t){function n(n,r,i){t.call(this,i),this.rowType=n,this.renderState=r,r||(this.renderState=e.grid.renderState.rendering)}return __extends(n,t),n.prototype.isDataRow=function(){return(this.rowType&e.grid.rowType.data)==e.grid.rowType.data},n.prototype.dataItemIndex=function(e){return typeof e=="undefined"&&(e=0),-1},n.prototype.cellCount=function(){return this._cells?this._cells.length:0},n.prototype._ensureCells=function(){this._cells=this._cells||[]},n.prototype.add=function(e){this._ensureCells(),this._cells.push(e)},n.prototype.insert=function(e,t){this._ensureCells(),this._cells.splice(e,0,t)},n.prototype.cell=function(e){return this._cells[e]},n.prototype.valueCell=function(e){return this.cell(e)},n.prototype.removeAt=function(e){if(!this._cells)throw"Wrong index";this._cells.splice(e,1)},n.prototype.clear=function(){},n.prototype.getRowInfo=function(){return{type:this.rowType,state:this.renderState,sectionRowIndex:null,dataRowIndex:null,virtualDataItemIndex:null,dataItemIndex:this.dataItemIndex(),$rows:null}},n}(r);t.SketchRow=u;var a=function(t){function n(n,r,i){t.call(this,e.grid.rowType.data|(n%2==1?e.grid.rowType.dataAlt:0),r,i),this.originalRowIndex=n,this.renderState=r,r||(this.renderState=e.grid.renderState.rendering)}return __extends(n,t),n.prototype.dataItemIndex=function(e){return typeof e=="undefined"&&(e=0),e+this.originalRowIndex},n.prototype.isDataRow=function(){return!0},n}(u);t.SketchDataRow=a;var f=function(t){function n(n,r){typeof n=="undefined"&&(n=!0);var i=n?e.grid.rowType.groupHeader:e.grid.rowType.groupFooter;t.call(this,i,undefined,r)}return __extends(n,t),n.prototype.getRowInfo=function(){var e=t.prototype.getRowInfo.call(this);return this.groupByValue!==undefined&&(e.groupByValue=this.groupByValue),e},n}(u);t.SketchGroupRow=f;var l=function(){function e(){this._table=[]}return e.prototype.getRawTable=function(){return this._table},e.prototype.row=function(e){return this._table[e]},e.prototype.valueAt=function(e,t){return this.row(e).valueCell(t).value},e.prototype.count=function(e){return typeof e=="number"&&(this._table.length=e),this._table.length},e.prototype.add=function(e){this._table.push(e)},e.prototype.insert=function(e,t){this._table.splice(e,0,t)},e.prototype.clear=function(){this._table.length=0},e.prototype.removeFirst=function(e){typeof e=="undefined"&&(e=1),this._table.splice(0,e)},e.prototype.removeLast=function(e){typeof e=="undefined"&&(e=1),this._table.splice(this._table.length-e,e)},e.prototype.replace=function(e,t){this._table.splice(e,1,t)},e.prototype.updateIndexes=function(){for(var e=0;e<this._table.length;e++){var t=this._table[e];this._table[e].isDataRow()&&(t.originalRowIndex=e)}},e.prototype.isLazy=function(){return!1},e.prototype.ensureNotLazy=function(){},e}();t.SketchTable=l;var c=function(e){function t(t){e.call(this),this.mIsLazy=!0,this.pageSize=30;if(t==null)throw"Row source is null";this.mSource=t,this._table.length=t.count()}return __extends(t,e),t.prototype.isLazy=function(){return this.mIsLazy},t.prototype.ensureNotLazy=function(){if(!this.isLazy())return;this.ensureRange(),this.mIsLazy=!1},t.prototype.invalidate=function(){this._table=new Array(this.mSource.count()),this.isLazy()||this.updateRange()},t.prototype.row=function(t){return e.prototype.row.call(this,t)||this.ensureRange(Math.max(0,t-this.pageSize/2),this.pageSize),e.prototype.row.call(this,t)},t.prototype.ensureRange=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this._table.length-e);if(!this.isLazy())return;if(e<0)throw"Wrong range start";this._table.length=this.mSource.count();if(this._table.length==0){if(t>0)throw"Wrong range length";return}while(e<this._table.length&&this._table[e])e++;if(e>=this._table.length)return;var n=Math.min(e+t-1,this._table.length-1);while(n>=e&&this._table[n])n--;t=n-e+1,t>0&&this.updateRange(e,t)},t.prototype.updateRange=function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this._table.length-e);if(this.mSource==null)throw"Cannot create sketch row because source is null";this.mSource.getRange(e,t,this._table,e)},t}(l);t.LazySketchTable=c})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){var t=n.data(this.element[0],"wijgridowner");this._field("owner",t),e.grid.widgetName(this.element[0],this.widgetFullName),this._destroyed=!1,this.element.addClass(t.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.c1basefield+" "+t.options.wijCSS.stateDefault),this.options.disabled&&this.disable(),t.options.allowColMoving&&t._UIDragndrop(!0).attach(this)},r.prototype._init=function(){this.element.wrapInner("<div class='"+e.grid.wijgrid.CSS.cellContainer+" "+this._owner().options.wijCSS.wijgridCellContainer+"'></div>"),this._refreshHeaderCell()},r.prototype.destroy=function(){try{t.prototype.destroy.apply(this,arguments)}finally{this._destroyed=!0}},r.prototype._destroy=function(){if(this._isDestroyed())return;var t=this._owner();t&&t._UIDragndrop()&&t._UIDragndrop().detach(this),e.grid.remove$dataByPrefix(this.element,this._data$prefix);var n=e.grid.wijgrid.CSS,r=t.options.wijCSS;this.element.removeClass(r.widget+" "+n.c1basefield+" "+r.c1basefield+" "+r.stateDefault).html(this.element.find("."+n.headerCellText).html())},r.prototype._field=function(t,n){return e.grid.dataPrefix(this.element,this._data$prefix,t,n)},r.prototype._removeField=function(e){var t=this._data$prefix+e;this.element.removeData(t)},r.prototype._setOption=function(e,n){var r=this["_preset_"+e],i=this.options[e],s,o;r!==undefined&&(n=r.apply(this,[n,i])),s=n!==i,t.prototype._setOption.apply(this,[e,n]);if(s){if(this.options.groupedIndex!==undefined){var u=this._owner()._field("groupedWidgets")[this.options.groupedIndex];u&&e in u.options&&u._setOption(e,n)}o=this["_postset_"+e],o!==undefined&&o.apply(this,[n,i])}},r.prototype._postset_allowMoving=function(e,t){},r.prototype._preset_clientType=function(e,t){throw"read-only"},r.prototype._postset_headerText=function(e,t){this._refreshHeaderCell()},r.prototype._postset_visible=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_width=function(t,n){var r=this._owner();if(r){this.options.ensurePxWidth=!0;var i=e.grid.getColumnByTravIdx(r.options.columns,this.options.travIdx);i&&(i.found.width=t,i.found.ensurePxWidth=!0),r.setSize()}},r.prototype._owner=function(){return this._field("owner")},r.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},r.prototype._canDrag=function(){return this.options.allowMoving===!0},r.prototype._canDropTo=function(t){return e.grid.isChildOf(this._owner().options.columns,t,this)?!1:!0},r.prototype._createHeaderContent=function(e){return e.html(this.options.headerText||"&nbsp;")},r.prototype._decorateHeaderContent=function(t){return t.wrapInner('<span class="'+e.grid.wijgrid.CSS.headerCellText+" "+this._owner().options.wijCSS.wijgridHeaderCellText+'" />')},r.prototype._refreshHeaderCell=function(){var t=this.element.children("."+e.grid.wijgrid.CSS.cellContainer).empty();this._createHeaderContent(t),this._decorateHeaderContent(t)},r.prototype._isDestroyed=function(){return this._destroyed},r}(e.wijmoWidget);t.c1basefield=r,r.prototype._data$prefix="c1basefield";var i=function(){function e(){this.allowMoving=!0,this.allowSizing=!0,this.cellFormatter=undefined,this.dataKey=undefined,this.ensurePxWidth=undefined,this.footerText=undefined,this.headerText=undefined,this.textAlignment=undefined,this.visible=!0,this.width=undefined}return e}();t.c1basefield_options=i,r.prototype.options=e.grid.extendWidgetOptions(e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("c1basefield",r.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){t.prototype._create.apply(this,arguments);var n=this._owner();this.element.addClass(n.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.c1field)},r.prototype._destroy=function(){if(this._isDestroyed())return;var n=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":this.$filterEditor.data("wijmo-wijinputdate")&&this.$filterEditor.wijinputdate("destroy");break;case"text":this.$filterEditor.data("wijmo-wijinputtext")&&this.$filterEditor.wijinputtext("destroy");break;case"numberCurrency":case"numberNumber":case"numberPercent":this.$filterEditor.data("wijmo-wijinputnumber")&&this.$filterEditor.wijinputnumber("destroy")}this.$filterEditor=null}this.element.removeClass(n.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.c1field),this._removeDropDownFilterList(),t.prototype._destroy.apply(this,arguments)},r.prototype._init=function(){t.prototype._init.apply(this,arguments),this.$filterEditor=null;var e=this._owner();this.filterRow=e._filterRow(),e.options.showFilter&&this.options.showFilter&&this.options.dataIndex>=0&&this._prepareFilterCell()},r.prototype._postset_aggregate=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_allowSort=function(e,t){this._refreshHeaderCell()},r.prototype._postset_dataType=function(e,t){throw"read-only"},r.prototype._postset_dataParser=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_dataFormatString=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_filterOperator=function(e,t){this._owner().ensureControl(!0)},r.prototype._postset_filterValue=function(e,t){this._owner().ensureControl(!0)},r.prototype._postset_groupInfo=function(e,t){this._owner().ensureControl(!0)},r.prototype._postset_rowMerge=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_showFilter=function(e,t){this._owner().ensureControl(!1)},r.prototype._postset_sortDirection=function(e,t){this.options.sortOrder=0,this._owner().ensureControl(!0)},r.prototype._postset_width=function(e,n){t.prototype._postset_width.apply(this,arguments)},r.prototype._canDropTo=function(e){return t.prototype._canDropTo.apply(this,arguments)?this.options.groupedIndex!==undefined&&e instanceof n.wijmo.c1groupedfield?!1:!0:!1},r.prototype._isSortable=function(){return e.grid.validDataKey(this.options.dataKey)},r.prototype._isSortableUI=function(){var e=this._owner();return e&&e.options.allowSorting&&this.options.allowSort&&this._isSortable()},r.prototype._decorateHeaderContent=function(r){var i=this._owner(),s=e.grid.wijgrid.CSS,o=i.options.wijCSS;if(!this._isSortable())t.prototype._decorateHeaderContent.apply(this,arguments);else{this._isSortableUI()?r.wrapInner('<a class="'+s.headerCellText+" "+o.wijgridHeaderCellText+'" href="#" role="button" />').children("a").bind("click."+this.widgetName,this,n.proxy(this._onHrefClick,this)):t.prototype._decorateHeaderContent.apply(this,arguments);var u=s.headerCellSortIcon+" "+o.wijgridHeaderCellSortIcon+" "+o.icon;switch(this.options.sortDirection){case"ascending":r.append(n('<span class="'+u+" "+o.iconArrowUp+'"></span>'));break;case"descending":r.append(n('<span class="'+u+" "+o.iconArrowDown+'"></span>'))}}},r.prototype._prepareFilterCell=function(){var t=this.options.visLeavesIdx,r=this._owner(),i=null,s,o,u=this,a,f=e.grid.HTML5InputSupport.getDefaultInputType(r._isMobileEnv(),this.options),l=r.options.wijCSS,c=e.grid.wijgrid.CSS;if(t>=0){r=this._owner();if(!this.filterRow)throw"exception";i=n(e.grid.rowAccessor.getCell(this.filterRow,t)),this.$filterEditor=i.find("input"),i.bind(n.support.selectstart?"selectstart":"mousedown",function(e){e.stopPropagation()}),s=r.parse(this.options,e.grid.filterHelper.getSingleValue(this.options.filterValue));if(s===null||s==="undefined")switch(e.grid.getDataType(this.options)){case"boolean":s=!1;break;case"number":case"currency":s=0;break;case"datetime":s=new Date;break;default:s=""}o={culture:r.options.culture,disabled:r.options.disabled,decimalPlaces:function(e){var t=/^(n|p|c){1}(\d*)$/.exec(e);return t&&t[2]?parseInt(t[2],10):(t=/^(d){1}(\d*)$/.exec(e),t?0:2)}(this.options.dataFormatString)};switch(a=this._getInputEditorType(this.options)){case"date":f==="text"?this.$filterEditor.wijinputdate(n.extend(o,{date:s,dateFormat:this.options.dataFormatString||undefined,showTrigger:!0})):this._createHtmlEditor(this.$filterEditor,f,e.grid.HTML5InputSupport.toStr(s,f));break;case"text":this.$filterEditor.wijinputtext({text:s+""});break;case"numberCurrency":this.$filterEditor.wijinputnumber(n.extend(o,{type:"currency",value:s}));break;case"numberNumber":f==="text"?this.$filterEditor.wijinputnumber(n.extend(o,{value:s})):this._createHtmlEditor(this.$filterEditor,f,e.grid.HTML5InputSupport.toStr(s,f));break;case"numberPercent":this.$filterEditor.wijinputnumber(n.extend(o,{type:"percent",value:s*100}));break;default:throw e.grid.stringFormat('Unsupported editor type: "{0}"',a)}i.find("."+c.filterTrigger).attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(e){u.options.disabled||n(this).addClass(l.stateDefault+" "+l.stateHover)}).bind("mouseleave."+this.widgetName,function(e){u.options.disabled||n(this).removeClass(l.stateDefault+" "+l.stateHover+" "+l.stateActive)}).bind("mouseup."+this.widgetName,this,function(e){u.options.disabled||n(this).removeClass(l.stateDefault+" "+l.stateActive)}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(e){e.preventDefault()})}},r.prototype._createHtmlEditor=function(t,n,r){return t.wrap('<span class="'+e.grid.wijgrid.CSS.filterNativeHtmlEditorWrapper+" "+this._owner().options.wijCSS.wijgridFilterNativeHtmlEditorWrapper+'"></span').attr("type",n).val(r)},r.prototype._onFilterBtnClick=function(t){var r=t.data.column,i=8,s=r._owner(),o,u,a,f,l,c,h,p,d=e.grid.HTML5InputSupport.getDefaultInputType(s._isMobileEnv(),r.options);if(r.options.disabled)return!1;if(r.$dropDownFilterList)return r._removeDropDownFilterList(),!1;t.target.focus(),o=e.grid.filterHelper.getSingleOperatorName(r.options.filterOperator).toLowerCase(),u=s.getFilterOperatorsByDataType(e.grid.getDataType(r.options)),a={operators:n.extend(!0,[],u),column:r.options},s._onFilterOperatorsListShowing(a),f=[],a.operators&&n.each(a.operators,function(e,t){f.push({label:t.displayName||t.name,value:t.name,selected:t.name.toLowerCase()===o})}),r.$dropDownFilterList=n("<div />").addClass(e.grid.wijgrid.CSS.filterList+" "+s.options.wijCSS.wijgridFilterList).appendTo(document.body).wijlist({autoSize:!0,maxItemsCount:i,selected:function(t,n){var i,o;switch(o=r._getInputEditorType(r.options)){case"date":d==="text"?i=r.$filterEditor.wijinputdate("option","date")||new Date:i=e.grid.HTML5InputSupport.parse(r.$filterEditor.val(),d)||new Date;break;case"text":i=r.$filterEditor.wijinputtext("option","text");break;case"numberNumber":if(d!=="text"){i=e.grid.HTML5InputSupport.parse(r.$filterEditor.val(),d)||0;break};case"numberCurrency":case"numberPercent":i=r.$filterEditor.wijinputnumber("option","value"),o==="numberPercent"&&(i/=100)}r._removeDropDownFilterList(),s._handleFilter(r,n.item.value,i)}}),r.$dropDownFilterList.css("z-index",e.grid.getZIndex(s.outerDiv,9999)),r.$dropDownFilterList.wijlist("setItems",f).wijlist("renderList"),h=r.$dropDownFilterList.width()|150,r.$dropDownFilterList.width(f.length>i?h+20:h).wijlist("refreshSuperPanel").position({of:n(this),my:"left top",at:"left bottom"}),r.$dropDownFilterList.$button=n(this),p=r.$dropDownFilterList.eventUID=e.grid.getUID(),n(document).bind("mousedown."+r.widgetName+"."+p,{column:r},r._onDocMouseDown)},r.prototype._onDocMouseDown=function(t){var r=n(t.target),i=e.grid.wijgrid.CSS,s=r.parents("."+i.filterList+":first"),o=r.is("."+i.filterTrigger)?r:r.parents("."+i.filterTrigger+":first");o.length&&o[0]===t.data.column.$dropDownFilterList.$button[0]||s.length&&s[0]===t.data.column.$dropDownFilterList[0]||t.data.column._removeDropDownFilterList()},r.prototype._onHrefClick=function(e){if(e.data.options.disabled)return!1;if(e.data.options.allowSort){var t=e.data._owner();t._handleSort(e.data.options,e.ctrlKey)}return!1},r.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var e=this.$dropDownFilterList.eventUID;this.$dropDownFilterList.remove(),this.$dropDownFilterList=null,n(document).unbind("mousedown."+this.widgetName+"."+e,this._onDocMouseDown)}},r.prototype._getInputEditorType=function(t){switch(e.grid.getDataType(t)){case"number":return t.dataFormatString&&t.dataFormatString.indexOf("p")===0?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"text"}},r}(t.c1basefield);t.c1field=r;var i=function(e){function t(){e.apply(this,arguments),this.aggregate="none",this.allowSort=!0,this.dataType=undefined,this.inputType=undefined,this.dataParser=undefined,this.dataFormatString=undefined,this.filterOperator="nofilter",this.filterValue=undefined,this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:!0,collapsedImageClass:undefined,expandedImageClass:undefined,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined},this.readOnly=!1,this.rowMerge="none",this.showFilter=!0,this.sortDirection="none",this.valueRequired=!1}return __extends(t,e),t}(t.c1basefield_options);t.c1field_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i),n.wijmo.registerWidget("c1field",n.wijmo.c1basefield,r.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){t.prototype._create.apply(this,arguments);var n=this._owner();this.element.addClass(n.options.wijCSS.widget+" "+e.grid.wijgrid.CSS.c1band)},r.prototype._canDropTo=function(e){return t.prototype._canDropTo.apply(this,arguments)?!(e instanceof n.wijmo.c1groupedfield):!1},r}(t.c1basefield);t.c1band=r;var i=function(e){function t(){e.apply(this,arguments),this.columns=[]}return __extends(t,e),t}(t.c1field_options);r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i),n.wijmo.registerWidget("c1band",n.wijmo.c1basefield,r.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._create=function(){var t=n.data(this.element[0],"wijgridowner"),r=e.grid.wijgrid.CSS,i=t.options.wijCSS;this._field("owner",t),e.grid.widgetName(this.element[0],this.widgetFullName),this._destroyed=!1,this.element.addClass(r.groupAreaButton+" "+i.wijgridGroupAreaButton+" "+i.stateDefault+" "+i.cornerAll),this.options.disabled&&this.disable(),t.options.allowColMoving&&t._UIDragndrop(!0).attach(this)},r.prototype._init=function(){this._refreshHeaderCell()},r.prototype.destroy=function(){try{t.prototype.destroy.apply(this,arguments)}finally{this._destroyed=!0}},r.prototype._destroy=function(){if(this._isDestroyed())return;this.element.find("*").unbind("."+this.widgetName);var t=this._owner();t&&t._dragndrop(!1)&&t._dragndrop(!1).detach(this),e.grid.remove$dataByPrefix(this.element,this._data$prefix)},r.prototype._field=function(t,n){return e.grid.dataPrefix(this.element,this._data$prefix,t,n)},r.prototype._removeField=function(e){var t=this._data$prefix+e;this.element.removeData(t)},r.prototype._setOption=function(e,n){var r=this["_preset_"+e],i=this.options[e],s,o;r!==undefined&&(n=r.apply(this,[n,i])),s=n!==i,t.prototype._setOption.apply(this,[e,n]),s&&(o=this["_postset_"+e],o!==undefined&&o.apply(this,[n,i]))},r.prototype._postset_headerText=function(e,t,n){this._refreshHeaderCell()},r.prototype._postset_allowSort=function(e,t,n){this._refreshHeaderCell()},r.prototype._owner=function(){return this._field("owner")},r.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing},r.prototype._canDrag=function(){return this.options.allowMoving===!0},r.prototype._canDropTo=function(t){return t instanceof n.wijmo.c1groupedfield?e.grid.isChildOf(this._owner().options.columns,t,this)?!1:!0:!1},r.prototype._isSortable=function(){return e.grid.validDataKey(this.options.dataKey)},r.prototype._isSortableUI=function(){var e=this._owner();return e&&e.options.allowSorting&&this.options.allowSort&&this._isSortable()},r.prototype._refreshHeaderCell=function(){var t=e.grid.wijgrid.CSS,r=this._owner().options.wijCSS,i=n('<span class="'+t.groupAreaButtonClose+" "+r.wijgridGroupAreaButtonClose+" "+r.stateDefault+" "+r.cornerAll+'"><span class="'+r.icon+" "+r.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(i),this._isSortableUI()&&this.element.bind("click."+this.widgetName,this,n.proxy(this._onHrefClick,this));if(this._isSortable()){var s=t.groupAreaButtonSort+" "+r.wijgridGroupAreaButtonSort+" "+r.icon;switch(this.options.sortDirection){case"ascending":this.element.append(n('<span class="'+s+" "+r.iconArrowUp+'"></span>'));break;case"descending":this.element.append(n('<span class="'+s+" "+r.iconArrowDown+'"></span>'))}}},r.prototype._onCloseClick=function(e){var t=e.data.options;return t.disabled||e.data._owner()._handleUngroup(e.data.options.travIdx),!1},r.prototype._onHrefClick=function(t){var n=t.data._owner(),r=t.data.options,i;return!r.disabled&&r.allowSort&&(i=e.grid.search(n.columns(),function(e){return e.options.travIdx===r.travIdx}),i=i.found?i.found.options:e.grid.getColumnByTravIdx(n.options.columns,r.travIdx).found,i&&n._handleSort(i,t.ctrlKey)),!1},r.prototype._isDestroyed=function(){return this._destroyed},r}(e.wijmoWidget);t.c1groupedfield=r,r.prototype._data$prefix="c1groupedfield",r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:!0,allowSort:!0,headerText:undefined,sortDirection:"none"}),n.wijmo.registerWidget("c1groupedfield",r.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e){var n=this;this.mSettings=t.extend(!0,{},e),this.mElement=this._createButton(e).addClass("wijmo-wijgrid-commandbutton").click(function(e){!n.mSettings.disabled&&t.isFunction(n.mSettings.click)&&n.mSettings.click.call(n,e)})}return e.prototype._createButton=function(e){throw"not implemented"},e.prototype.element=function(){return this.mElement},e}();e.wijgridCommandButtonBase=n;var r=function(e){function n(t){e.call(this,t)}return __extends(n,e),n.prototype._createButton=function(e){var n=t('<a href="#" />').text(e.text||"");return e.disabled&&n.prop("disabled","disabled"),n},n}(n);e.wijgridCommandLink=r;var i=function(e){function n(t){e.call(this,t)}return __extends(n,e),n.prototype._createButton=function(e){var n=t('<input type="button" />').val(e.text).button({disabled:e.disabled});return n},n}(n);e.wijgridCommandButton=i;var s=function(e){function n(t){e.call(this,t)}return __extends(n,e),n.prototype._createButton=function(e){var n=t("<button />"),r=!!e.text;return r?n.text(e.text):n.html("&nbsp;"),n.button({disabled:e.disabled,icons:{primary:e.iconClass},text:r}),n},n}(n);e.wijgridCommandImageButton=s;var o=function(e){function n(t){e.call(this,t)}return __extends(n,e),n.prototype._createButton=function(e){var n=t("<button />").html("&nbsp;").button({disabled:e.disabled,icons:{primary:e.iconClass},text:!1});return n},n}(n);e.wijgridCommandImage=o})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.testC1GridViewCommandField=function(t){return t&&t.innerState&&(t.innerState.clientType||"").toLowerCase()==="c1commandfield"},t.testC1GridViewButtonField=function(t){return t&&t.innerState&&(t.innerState.clientType||"").toLowerCase()==="c1buttonfield"},t.test=function(n){return n&&n.buttonType&&!t.testC1GridViewCommandField(n)&&!t.testC1GridViewButtonField(n)},t}(t.c1basefield);t.c1btnfieldbase=r;var i=function(e){function t(){e.apply(this,arguments),this.buttonType="button"}return __extends(t,e),t}(t.c1basefield_options);t.c1btnfieldbase_options=i,r.prototype.options=e.grid.extendWidgetOptions(t.c1basefield.prototype.options,new i);var s=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.test=function(t){return r.test(t)||t.command},t}(r);t.c1btnfield=s;var o=function(e){function t(){e.apply(this,arguments),this.command=undefined}return __extends(t,e),t}(i);t.c1btnfield_options=o,s.prototype.options=e.grid.extendWidgetOptions(r.prototype.options,new o),n.wijmo.registerWidget("c1btnfield",s.prototype);var u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.test=function(t){return r.testC1GridViewCommandField(t)||r.testC1GridViewButtonField(t)?!1:t.showDeleteButton&&t.showDeleteButton!==!1||t.showEditButton&&t.showEditButton!==!1||t.cancelCommand||t.deleteCommand||t.editCommand||t.updateCommand},t}(r);t.c1commandbtnfield=u;var a=function(e){function t(){e.apply(this,arguments),this.showDeleteButton=!1,this.showEditButton=!1,this.cancelCommand={text:"Cancel",iconClass:"ui-icon-close",click:undefined},this.deleteCommand={text:"Delete",iconClass:"ui-icon-trash",click:undefined},this.editCommand={text:"Edit",iconClass:"ui-icon-pencil",click:undefined},this.updateCommand={text:"Update",iconClass:"ui-icon-disk",click:undefined}}return __extends(t,e),t}(i);t.c1commandbtnfield_options=a,u.prototype.options=e.grid.extendWidgetOptions(r.prototype.options,new a),n.wijmo.registerWidget("c1commandbtnfield",u.prototype)})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function i(e){var t=[];return s(e,t),t}function s(e,t){var n,r,i,o;if(e)for(n=0,r=e.length;n<r;n++)i=e[n],i.options&&(i=i.options),o=i.columns,o&&o.length?s(o,t):t.push(i)}function o(e,t){var n,r,i,s=null;if(e&&t>=0)for(n=0,r=e.length;n<r&&!s;n++){i=e[n],i.options&&(i=i.options);if(i.travIdx===t)return{found:i,at:e};i.columns&&(s=this.getColumnByTravIdx(i.columns,t))}return s}function u(e,t,n){t.options&&(t=t.options),n.options&&(n=n.options);if(n.isBand&&t.parentIdx>=0){if(t.parentIdx===n.travIdx)return!0;if(t.parentIdx>n.travIdx){var r=this.flatten(e);for(;;){t=r[t.parentIdx];if(t.travIdx===n.travIdx)return!0;if(t.parentIdx===-1)break}}}return!1}function a(e){var t=[];return f(e,t),t}function f(e,t){var n,r,i;if(e)for(n=0,r=e.length;n<r;n++)i=e[n],i.isLeaf&&t.push(i),i.columns&&f(i.columns,t)}function l(e){return c(e,0,-1)}function c(e,t,n){var r,i,s;if(e)for(r=0,i=e.length;r<i;r++)s=e[r],s.options&&(s=s.options),s.linearIdx=r,s.travIdx=t++,s.parentIdx=n,s.columns&&(t=c(s.columns,t,t-1));return t}function h(t){var n=[];return e.grid.traverse(t,function(e){n.push(e)}),n}function p(t,r){var i,s,o;if(t&&n.isFunction(r))for(i=0;i<t.length;i++){o=t[i],o.options&&(o=o.options),s=t.length,r(o,t);if(t.length!==s){i--;continue}o.columns&&e.grid.traverse(o.columns,r)}}var n=jQuery,r=function(){function t(){}return t.prototype.generateSpanTable=function(e,t){this._height=this._width=this._inc=this._shift=0,this._table=[],this._traverseList=[],this._savedXPos=[];var n=this._generateSpanTable(e,t,!0);return n},t.prototype._generateSpanTable=function(t,n,r){var i,s,o=this;this._height=this.getVisibleHeight(t,r),n=n||[],e.grid.traverse(t,function(e){e.isLeaf&&n.push(e),o._traverseList.push(e)}),this._width=n.length;for(i=0;i<this._height;i++){this._table[i]=[];for(s=0;s<this._width;s++)this._table[i][s]={column:null,colSpan:0,rowSpan:0}}return this._setTableValues(t,0,0),this._table},t.prototype.getVisibleHeight=function(e,t){var r,i,s,o,u=0;if(n.isArray(e))for(r=0,i=e.length;r<i;r++)o=this.getVisibleHeight(e[r],t),u=Math.max(u,o);else{s=e.visible===undefined?!0:e.visible,e.parentVis=s&&t;if(e.isBand){for(r=0,i=e.columns.length;r<i;r++)o=this.getVisibleHeight(e.columns[r],e.parentVis),u=Math.max(u,o);if(!e.parentVis)return u;e.isLeaf=u===0,u++}else e.isLeaf=!0,e.parentVis&&(u=1)}return u},t.prototype._getVisibleParent=function(e){while(e){e=this._traverseList[e.parentIdx];if(e&&(e.parentVis||e.parentVis===undefined))return e}return null},t.prototype._setTableValues=function(e,t,r){var i,s,o,u,a,f;if(n.isArray(e))for(i=0,s=e.length;i<s;i++)this._setTableValues(e[i],t,r);else{if(e.travIdx===undefined)throw"undefined travIdx";o=r+this._shift,e.parentVis&&(u=o+this._inc,this._table[t][u].column=e,this._savedXPos[e.travIdx]=u);if(e.isBand)for(i=0,s=e.columns.length;i<s;i++)this._setTableValues(e.columns[i],t+1,r);e.parentVis?this._shift-o===0?(this._table[t][this._savedXPos[e.travIdx]].rowSpan=this._height-t,this._shift++):this._table[t][this._savedXPos[e.travIdx]].colSpan=this._shift-o:!e.isBand&&this._height>0&&(f=this._getVisibleParent(e),a=f?f.isLeaf:!1,a&&this._inc++,t>=this._height&&(t=this._height-1),u=r+this._shift+this._inc,this._table[t][u].column=e,a||(f&&this._savedXPos[f.travIdx]===u&&this._shiftTableElements(u,t),this._inc++))}},t.prototype._shiftTableElements=function(e,t){var n;for(n=0;n<t;n++)this._table[n][e+1]=this._table[n][e],this._table[n][e]={column:null,colSpan:0,rowSpan:0},this._table[n][e+1].column&&this._savedXPos[this._table[n][e+1].column.travIdx]++},t}();t.bandProcessor=r,t.getAllLeaves=i,t.getColumnByTravIdx=o,t.isChildOf=u,t.getLeaves=a,t.setTraverseIndex=l,t.flatten=h,t.traverse=p})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(t){this._dvFilteringSettings=undefined,this._dvPagingSettings=undefined,this._dvSortingSettings=undefined,this._wgFilteringSettings=undefined,this._wgPagingSettings=undefined,this._wgSortingSettings=undefined;if(!t)throw"exception";this._wijgrid=t,this._dataView=t._dataViewWrapper.dataView(),this._filterCache=new e.grid.filterOperatorsCache(t)}return t.prototype.compareSettings=function(){var t=!0,n,r,i,s;t=(n=this.DVPagingSettings())===(r=this.WGPagingSettings()),!t&&n&&r&&(t=n.pageSize===r.pageSize&&n.pageIndex===r.pageIndex);if(t){t=(n=this.DVSortingSettings())===(r=this.WGSortingSettings());if(!t&&n&&r&&(s=n.length)===r.length){t=!0;for(i=0;i<s&&t;i++)t=n[i].dataKey===r[i].dataKey&&n[i].sortDirection===r[i].sortDirection}}return t&&(n=this.DVFilteringSettings(),r=this.WGFilteringSettings(),t=e.grid.compareObj(n,r)),t},t.prototype.DVFilteringSettings=function(){function e(t,r){var i;n.each(t,function(t,s){typeof s=="string"?i=s:n.isArray(s)?e(s,r):(r.filterValue.push(s.value),r.filterOperator.push({name:s.originalOperator||s.operator,condition:i}))})}if(this._dvFilteringSettings===undefined){var t=[],r=this._dataView.filter();r&&n.each(r,function(r,i){var s={dataKey:r};n.isArray(i)?(s.filterValue=[],s.filterOperator=[],e(i,s)):n.isPlainObject(i)?(s.filterValue=i.value,s.filterOperator=i.originalOperator||i.operator||"Equals"):(s.filterValue=i,s.filterOperator="Equals"),t.push(s)}),this._dvFilteringSettings=t.length?t:null}return this._dvFilteringSettings},t.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var t=e.grid.asPagedDataView(this._dataView);if(t){var n=t.pageSize();this._dvPagingSettings=n>0?{pageSize:t.pageSize(),pageIndex:t.pageIndex()}:null}}return this._dvPagingSettings},t.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var t=[],r=e.data.sorting.compile(this._dataView.sort()).normalized;r&&n.each(r,function(e,n){n!==null&&t.push({dataKey:typeof n=="string"?n:n.property,sortDirection:n.asc||n.asc===undefined?"ascending":"descending"})}),this._dvSortingSettings=t.length?t:null}return this._dvSortingSettings},t.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var t=[],r=this._wijgrid._field("leaves"),i=this;r&&n.each(r,function(n,r){if(e.grid.validDataKey(r.dataKey)&&r.filterOperator){var s=e.grid.deepExtend({},{foo:r.filterValue}).foo,o=e.grid.deepExtend({},{foo:r.filterOperator}).foo,u=e.grid.filterHelper.verify(o,s,r.dataType,i._filterCache);u&&t.push({owner:r,dataKey:r.dataKey,filterValue:u.filterValue,filterOperator:u.filterOperator})}}),this._wgFilteringSettings=t.length?t:null}return this._wgFilteringSettings},t.prototype.WGPagingSettings=function(){return this._wgPagingSettings===undefined&&(this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null),this._wgPagingSettings},t.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var t={},r=[],i=this._wijgrid._groupedColumns(!0),s=this._wijgrid._field("leaves")||[],o=function(t){return!t.isBand&&e.grid.validDataKey(t.dataKey)},u=0;n.each(i,function(e,n){o(n)&&(n.sortDirection==="none"&&(n.sortDirection="ascending"),t[n.dataKey]={dataKey:n.dataKey,sortDirection:n.sortDirection,sortOrder:u++})}),u++,n.each(s,function(e,n){o(n)&&(n.sortDirection==="ascending"||n.sortDirection==="descending")&&(t[n.dataKey]||(t[n.dataKey]={dataKey:n.dataKey,sortDirection:n.sortDirection,sortOrder:(n.sortOrder||0)+u}))}),n.each(t,function(e,t){r.push(t)}),r.sort(function(e,t){return e.sortOrder-t.sortOrder}),n.each(r,function(e,t){delete t.sortOrder}),this._wgSortingSettings=r.length?r:null}return this._wgSortingSettings},t.prototype.MapWGToDV=function(){var t=this,r={},i,s;this._mapPagingParams()&&(i=this.WGPagingSettings())?(r.pageIndex=i.pageIndex,r.pageSize=i.pageSize):r.pageSize=-1;if(this._mapSortingParams()){r.sort=[];if(i=this.WGSortingSettings())r.sort=[],n.each(i,function(e,t){r.sort.push({property:t.dataKey,asc:t.sortDirection==="ascending"})})}this._wijgrid.deficientFilters={};if(this._mapFilteringParams()){n.each(this._wijgrid._field("leaves"),function(n,r){e.grid.validDataKey(r.dataKey)&&r.filterOperator===undefined^r.filterValue===undefined&&(t._wijgrid.deficientFilters[r.dataKey]={filterOperator:r.filterOperator,filterValue:r.filterValue})}),r.filter={};if(i=this.WGFilteringSettings())r.filter=this._convertFilterToDV(i);n.isEmptyObject(r.filter)&&(r.filter=null)}return r},t.prototype.MapDVToWG=function(){var t,r={},i=this._mapSortingParams(),s=this._mapPagingParams(),o=this._mapFilteringParams(),u=e.grid.asPagedDataView(this._dataView),a=this;n.each(this._wijgrid._field("leaves"),function(e,t){i&&(t.sortOrder=0,t.sortDirection="none"),o&&(t.filterOperator="nofilter",t.filterValue=undefined),r[t.dataKey]=t}),s&&u&&(this._wijgrid.options.pageSize=u.pageSize(),this._wijgrid.options.pageIndex=u.pageIndex()),i&&(t=this.DVSortingSettings())&&n.each(t,function(e,t){var n;if(n=r[t.dataKey])n.sortDirection=t.sortDirection,n.sortOrder=e}),o&&((t=this.DVFilteringSettings())&&n.each(t,function(e,t){var i;if(i=r[t.dataKey])i.filterValue=t.filterValue,i.filterOperator=t.filterOperator,n.isPlainObject(i.filterOperator)&&(i.filterOperator=i.filterOperator.name),delete a._wijgrid.deficientFilters[i.dataKey]}),n.each(this._wijgrid.deficientFilters,function(e,t){r[e].filterOperator=t.filterOperator,r[e].filterValue=t.filterValue}))},t.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()},t.prototype._mapSortingParams=function(){return!this._wijgrid._serverShaping()},t.prototype._mapFilteringParams=function(){return!this._wijgrid._serverShaping()},t.prototype.makeProxyFilter=function(t,r,i,s){i=i.toLowerCase();var o=this,u=t.dataType==="datetime",a={originalOperator:undefined,property:r,operator:i,value:s},f=this._filterCache.getByNameInt(i),l=e.data.filtering.ops[i];if(i!=="nofilter"&&(f.isCustom||u)){a.originalOperator=a.operator;if(f.isCustom)a.operator=n.extend(!0,{},f.op),a.operator.apply=a.operator.operator;else{a.operator=n.extend(!0,{},l);var c=t.inputType?e.grid.TimeUnitConverter.convertInputType(t.inputType):e.grid.TimeUnitConverter.convertFormatString(t.dataFormatString||"d");a.operator.apply=function(n,r){return n instanceof Date||(n=o._wijgrid.parse(t,n)),r instanceof Date||(r=o._wijgrid.parse(t,r)),e.grid.TimeUnitConverter.cutDate(n,c),e.grid.TimeUnitConverter.cutDate(r,c),l.apply(n,r)}}}return a},t.prototype._convertFilterToDV=function(e){var t={},r=this;return n.each(e,function(e,i){var s=i.dataKey,o=[],u="and",a,f,l,c;if(!n.isPlainObject(i))return;f=i.filterOperator,l=i.filterValue;if(f==null)return;n.isArray(f)||(f=[f]),n.isArray(l)||(l=[l]);if(f.length!=l.length)throw"The number of filter operators must match the number of filter values";if(f.length==0)return;n.each(f,function(e,t){function h(){c.length>1?c.splice(0,0,"or"):c=c[0]}function p(){u==null&&(u=a,o.splice(0,0,a))}var f;typeof t=="string"&&(t={name:t});if(!n.isPlainObject(t)||!t.name)throw"Invalid filter operator";f=l[e],n.isArray(f)||(f=[f]),c=n.map(f,function(e){return r.makeProxyFilter(i.owner,s,t.name,e)}),u=null,a=t.condition||"or",o.length<=1||u==a?c.length==1||o.length<=1||u=="or"?(o=o.concat(c),p()):(h(),o.push(c),p()):(h(),o=[o,c],p())}),n.each(o,function(e,t){n.isArray(t)&&t.length==2&&(o[e]=t[1])}),o.length==2&&typeof (o[0]==="string")&&o.shift(),o.length==1&&(o=o[0]),t[s]=o}),t},t}();t.settingsManager=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function i(e){return e&&"pageCount"in e?e:null}function s(e){return e&&"commitEdit"in e?e:null}var n=jQuery,r=function(){function t(e){this._domSource=null,this._ignoreAllEvents=!1,this._ignoreChangeEvent=!1,this._ignoreCurrentChangedEvent=!1,this._sharedDataItems=null,this._userData=null,this._totals=null,this._changeTimer=0,this._toDispose=[],this._isOwnDataView=!1,this._isWijdatasource=!1,this._isDynamicWijdatasource=!1,this._wijgrid=e,this._createDataViewWrapper()}return t.prototype.data=function(){var t=this._getDataViewInst(),n=e.grid.asPagedDataView(t);return{data:this._getSharedDataItems(),totalRows:n!=null?n.totalItemCount():(t.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}},t.prototype.dataView=function(){return this._getDataViewInst()},t.prototype.dispose=function(){var e=this._getDataViewInst();this._propChangeListener.dispose(),n.each(this._toDispose,function(e,t){t.dispose()}),e&&this._isOwnDataView&&e.dispose(),this._wijgrid._wijDataView=null},t.prototype.ignoreChangeEvent=function(e){if(!arguments.length)return this._ignoreChangeEvent;this._ignoreChangeEvent=e===!0},t.prototype.ignoreCurrentChangedEvent=function(e){if(!arguments.length)return this._ignoreCurrentChangedEvent;this._ignoreCurrentChangedEvent=e===!0},t.prototype.isDataLoaded=function(){var e=this._getDataViewInst();return e.isLoaded()},t.prototype.isOwnDataView=function(){return this._isOwnDataView},t.prototype.getFieldsInfo=function(){var e=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(e.getProperties())},t.prototype._propDescriptorsToFieldsInfo=function(e){var t={};return e&&n.each(e,function(e,n){if(n.name==="$$hash"||n.name==="$$hashKey")return;t[n.name]={name:n.name,type:n.type||"string"}}),t},t.prototype.isBoundedToDOM=function(){return this._domSource!==null},t.prototype.load=function(t){this._userData=t;var n=this._getDataViewInst();n||(this._createDataViewWrapper(),n=this._getDataViewInst()),this._onDataViewLoading();var r=new e.grid.settingsManager(this._wijgrid);if(t&&t.forceDataLoad||this._needToLoad(r)){var i=r.MapWGToDV(),s=!1;this._isWijdatasource&&!this._isDynamicWijdatasource&&n.isLoaded()&&(s=!0),this.ignoreCurrentChangedEvent(!0),n.refresh(i,s)}else this.isDataLoaded()&&(this._onDataViewLoaded(),this._onDataViewReset())},t.prototype.currentPosition=function(e){var t=this._getDataViewInst();if(!arguments.length)return t.currentPosition();this.ignoreCurrentChangedEvent(!0);try{t.currentPosition(e)}finally{this.ignoreCurrentChangedEvent(!1)}},t.prototype.getValue=function(e,t){var n=this._getDataViewInst();return typeof t=="number"&&(t+=""),n.getProperty(e,t)},t.prototype.setValue=function(e,t,n){var r=this._getDataViewInst();this.ignoreChangeEvent(!0);try{typeof t=="number"&&(t+=""),r.setProperty(e,t,n)}finally{this.ignoreChangeEvent(!1)}},t.prototype.makeDirty=function(){this._propChangeListener.removeAll(),this._totals=null,this._sharedDataItems=null},t.prototype._createDataViewWrapper=function(){var t,r=this._wijgrid.options.data,i=this._getDataViewInst(),s=!1;if(i)return;r||(this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData),r=this._domSource.items),s=typeof wijdatasource!="undefined"&&r instanceof wijdatasource,this._isOwnDataView=n.isArray(r)||s,this._isWijdatasource=!!this._isOwnDataView&&!!s,this._isDynamicWijdatasource=!!(this._isOwnDataView&&s&&r.dynamic);if(this._isOwnDataView){!this._domSource&&this._wijgrid.options.readAttributesFromData&&this._moveAttributesToExpando(r);var o=this.isBoundedToDOM()&&e.grid.getTableSection(this._wijgrid.element,e.grid.rowScope.body);i=e.grid.GridDataView.create(e.data.asDataView(this._parseOwnData(r,o)))}else i=r;this._wijgrid._wijDataView=i,this._toDispose.push(i.isLoading.subscribe(n.proxy(this._onDataViewLoadingInternal,this))),this._toDispose.push(i.isLoaded.subscribe(n.proxy(this._onDataViewLoadedInternal,this))),this._toDispose.push(i.subscribe(n.proxy(this._onDataViewChangeInternal,this))),this._toDispose.push(i.currentPosition.subscribe(n.proxy(this._onDataViewCurrentChangedInternal,this))),this._propChangeListener=new e.grid.propChangeListener(n.proxy(this._onPropertyChanged,this))},t.prototype._parseOwnData=function(t,r){var i=this;if(t&&t.length){var s=n.extend(!0,[],this._wijgrid.options.columns),o=e.data.ArrayDataViewBase._getProps(t[0])||[],u=this._propDescriptorsToFieldsInfo(o),a=[];this._wijgrid._prepareColumnOptions(s,"merge",u,!0,!0),e.grid.traverse(s,function(t){e.grid.getDataType(t)!=="string"&&e.grid.validDataKey(t.dataKey)&&a.push(t)}),a.length&&r&&n.each(t,function(t,n){e.grid.dataViewWrapper._parseDataItem(i._wijgrid,n,r&&r.rows[t],a)})}return t},t._parseDataItem=function(t,r,i,s){return n.each(s,function(e,n){var s=r[n.dataKey],o=t.parse(n,s);if(isNaN(o)){var u=null;i&&(u=i.cells[n.dataKey]),o=t.parseFailed(n,s,r,u)}r[n.dataKey]=o}),r},t.prototype._getDataViewInst=function(){return this._wijgrid._wijDataView},t.prototype._needToLoad=function(e){var t=this._getDataViewInst();return this._isDynamicWijdatasource||this._isWijdatasource&&!t.isLoaded()?!0:this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()?!0:this.isDataLoaded()||t.isLoading()?!e.compareSettings():!0},t.prototype._validateSettings=function(e){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&(e.DVPagingSettings()||{}).pageSize!==(e.WGPagingSettings()||{}).pageSize)throw"The pageSize option of the external dataView can't be changed."},t.prototype._onDataViewLoadingInternal=function(e){if(this._ignoreAllEvents)return;e&&(this._userData||this._onDataViewLoading())},t.prototype._onDataViewLoadedInternal=function(e){if(this._ignoreAllEvents)return;e&&this._onDataViewLoaded()},t.prototype._onDataViewChangeInternal=function(e){var t=this;if(this._ignoreAllEvents||this._ignoreChangeEvent)return;if(e.changes){if(e.length&&e[0].entityState()==="detached")return;n.each(e.changes,function(e,n){switch(n.changeType){case"remove":t._propChangeListener.remove(n.index);break;case"add":t._propChangeListener.insert(n.index,n.element)}})}this._onDataViewChange.apply(this,arguments)},t.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent)return;this._onDataViewCurrentChanged.apply(this,arguments)},t.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(!1),this.makeDirty(),this._wijgrid._onDataViewReset(this._userData)}finally{this._userData=null}},t.prototype._onPropertyChanged=function(e){var t=this;this._changeTimer>0&&(window.clearTimeout(this._changeTimer),this._changeTimer=0),this._changeTimer!=-1&&(this._changeTimer=window.setTimeout(function(){t._changeTimer=-1,t._wijgrid._destroyed||t._onDataViewChange(),t._changeTimer=0},100))},t.prototype._onDataViewChange=function(e){this._onDataViewReset()},t.prototype._onDataViewCurrentChanged=function(e,t){this._wijgrid._onDataViewCurrentPositionChanged(e,t)},t.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()},t.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()},t.prototype._getSharedDataItems=function(){if(!this._sharedDataItems){var e=this._getDataViewInst(),t=e.count();this._sharedDataItems=[];var n=!0;for(var r=0;r<t;r++){var i=e.item(r);n&&!this._propChangeListener.insert(r,i)&&r===0&&(n=!1),this._sharedDataItems.push(this._wrapDataItem(i,r))}}return this._sharedDataItems||(this._sharedDataItems=[]),this._sharedDataItems},t.prototype._getTotals=function(){if(!this._totals){var e=this._getDataViewInst();this._totals=this._prepareTotals(e,this._wijgrid._prepareTotalsRequest(!0))}return this._totals||(this._totals={}),this._totals},t.prototype._prepareTotals=function(t,n){if(!n||n.length===0)return{};var r,i,s,o,u=[],a={};for(r=0,i=n.length;r<i;r++)u.push(new e.grid.tally);for(r=0,i=t.count();r<i;r++)for(s=0,o=u.length;s<o;s++)u[s].add(this._wijgrid.parse(n[s].column,this.getValue(r,n[s].column.dataKey)));for(r=0,i=u.length;r<i;r++)a[n[r].column.dataKey]=u[r].getValueString(n[r].column);return a},t.prototype._processDOM=function(t,r){var i={items:[],emptyData:[],header:e.grid.readTableSection(t,e.grid.rowScope.head)};return e.grid.getTableSectionLength(t,2)===1&&n(e.grid.getTableSectionRow(t,2,0)).hasClass(e.grid.wijgrid.CSS.emptyDataRow)?i.emptyData=e.grid.readTableSection(t,e.grid.rowScope.body):i.items=e.grid.readTableSection(t,e.grid.rowScope.body,r),i},t.prototype._moveAttributesToExpando=function(t){n.each(t,function(t,r){var i=e.data.Expando.getFrom(r,!0),s;s=i[e.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}},r.rowAttributes&&(s.rowAttributes=r.rowAttributes,delete r.rowAttributes),n.each(r,function(e,t){n.isArray(t)&&(s.cellsAttributes[e]=t[1],r[e]=t[0])})})},t.prototype._wrapDataItem=function(e,t){return{values:e,originalRowIndex:t}},t.prototype._refreshSilent=function(){var e=this._getDataViewInst();if(e)try{this._ignoreAllEvents=!0,e.refresh()}finally{this._ignoreAllEvents=!1}},t.prototype._unsafeReplace=function(t,n){var r=this._getDataViewInst();r instanceof e.grid.GridDataView||"operation is not supported",r._unsafeReplace(t,n)},t.prototype._unsafeSplice=function(t,n,r){var i=this._getDataViewInst();i instanceof e.grid.GridDataView||"operation is not supported",arguments.length===2?i._unsafeSplice(t,n):i._unsafeSplice(t,n,r)},t.prototype._unsafePush=function(t){var n=this._getDataViewInst();n instanceof e.grid.GridDataView||"operation is not supported",n._unsafePush(t)},t}();t.dataViewWrapper=r,t.asPagedDataView=i,t.asEditableDataView=s;var o=function(){function e(e){this._subscriptions=[],this._callback=e}return e.prototype.insert=function(e,t){var r=null,i=this;return n.each(t,function(e,t){i._isValidPropName(e)&&t&&n.isFunction(t.subscribe)&&(r=r||[],r.push(t.subscribe(i._callback)))}),r?(this._subscriptions.length<e&&(this._subscriptions.length=e),this._subscriptions.splice(e,0,r),!0):!1},e.prototype.remove=function(e){var t=this._subscriptions[e];t&&n.each(t,function(e,n){n.dispose(),t[e]=null}),this._subscriptions[e]=null,this._subscriptions.splice(e,1)},e.prototype.removeAll=function(){var e,t;while(e=this._subscriptions.length)this.remove(e-1);this._subscriptions=[]},e.prototype.dispose=function(){this.removeAll()},e.prototype._isValidPropName=function(e){return e&&typeof e=="string"?e.match(/^entityState|jQuery/)===null:!0},e}();t.propChangeListener=o})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(t,n,r,i,s){this.cr=new e.grid.cellRange(-1,-1),this.isExpanded=!1,this._value=-1,this._sum=-1,this._position="none",this._hasHeaderOrFooter=!0,t!==undefined&&(this.isExpanded=t),n!==undefined&&(this.cr=n),r!==undefined&&(this._sum=r),i!==undefined&&(this._position=i),s!==undefined&&(this._hasHeaderOrFooter=s)}return t.prototype.isSubRange=function(e){return this.cr.r1>=e.cr.r1&&this.cr.r2<=e.cr.r2},t.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2},t.prototype.getHeaderImageClass=function(e){var t,n,r,i=null;if((t=this.owner)&&(n=t.owner)&&(r=n.owner)){var s=r.options.wijCSS;i=e?t.expandedImageClass||s.iconArrowRightDown:t.collapsedImageClass||s.iconArrowRight}return i},t.prototype.collapse=function(){var t,n,r,i,s;(t=this.owner)&&(n=t.owner)&&(r=n.owner)&&(i=r._field("leaves"),e.grid.groupHelper.isParentExpanded(i,this.cr,t.level)&&t.position!=="footer"&&t.outlineMode!=="none"&&(s=e.grid.groupHelper.getGroupedColumnsCount(i),this._collapse(r,r._rows(),i,this,s,r._allowVirtualScrolling())))},t.prototype.expand=function(t){var n,r,i,s,o;(n=this.owner)&&(r=n.owner)&&(i=r.owner)&&(s=i._field("leaves"),e.grid.groupHelper.isParentExpanded(s,this.cr,n.level)&&(o=e.grid.groupHelper.getGroupedColumnsCount(s),this._expand(i,i._rows(),s,this,o,t,!0,i._allowVirtualScrolling())))},t.prototype._collapse=function(t,n,r,i,s,o){var u=i.owner,a=i.cr.r1,f=i.cr.r2,l,c,h,p,d;switch(u.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(t.sketchTable.row(i.cr.r1),undefined),o||this._toggleRowVisibility(n.item(i.cr.r1),undefined,!1),a++}for(l=a;l<=f;l++)this._toggleSketchRowVisibility(t.sketchTable.row(l),!1),o||this._toggleRowVisibility(n.item(l),!1);i.isExpanded=!1,o||this._updateHeaderIcon(n,i);for(l=u.level+1;l<=s;l++){h=e.grid.groupHelper.getChildGroupRanges(r,i.cr,l-1);for(d=0,c=h.length;d<c;d++){p=h[d],p.isExpanded=!1;switch(p.owner.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(t.sketchTable.row(p.cr.r1),!1),o||this._toggleRowVisibility(n.item(p.cr.r1),undefined,!1)}o||this._updateHeaderIcon(n,p)}}},t.prototype._expand=function(t,n,r,i,s,o,u,a){var f=i.owner,l=i.cr.r1,c=i.cr.r2,h,p,d,v,m;switch(f.position){case"header":this._toggleSketchRowVisibility(t.sketchTable.row(l),!0),a||this._toggleRowVisibility(n.item(l),!0,u||o),l++;break;case"footer":this._toggleSketchRowVisibility(t.sketchTable.row(c),!0),a||this._toggleRowVisibility(n.item(c),!0),c--;break;case"headerAndFooter":this._toggleSketchRowVisibility(t.sketchTable.row(l),!0),a||this._toggleRowVisibility(n.item(l),!0,u||o),u&&(this._toggleSketchRowVisibility(t.sketchTable.row(c),!0),a||this._toggleRowVisibility(n.item(c),!0)),l++,c--}if(!u)return;i.isExpanded=!0,a||this._updateHeaderIcon(n,i);if(i.owner.level===s)for(h=l;h<=c;h++)this._toggleSketchRowVisibility(t.sketchTable.row(h),!0),a||this._toggleRowVisibility(n.item(h),!0);else{d=e.grid.groupHelper.getChildGroupRanges(r,i.cr,i.owner.level);if(d.length&&l!==d[0].cr.r1)for(h=l;h<d[0].cr.r1;h++)this._toggleSketchRowVisibility(t.sketchTable.row(h),!0),a||this._toggleRowVisibility(n.item(h),!0);if(o)for(h=0,p=d.length;h<p;h++)v=d[h],this._expand(t,n,r,v,s,o,!0,a);else for(h=0,p=d.length;h<p;h++)v=d[h],m=v.owner.position==="footer"||v.owner.outlineMode==="none"?!0:!1,this._expand(t,n,r,v,s,!1,m,a)}},t.prototype._toggleRowVisibility=function(e,t,n){e&&(e[0]&&(t!==undefined&&(e[0].style.display=t?"":"none",e[0]["aria-hidden"]=t?"false":"true"),n!==undefined&&(e[0]["aria-expanded"]=n?"true":"false")),e[1]&&(t!==undefined&&(e[1].style.display=t?"":"none",e[1]["aria-hidden"]=t?"false":"true"),n!==undefined&&(e[1]["aria-expanded"]=n?"true":"false")))},t.prototype._toggleSketchRowVisibility=function(e,t){e&&t!==undefined&&(t?e.deleteStyle("display"):e.style("display","none"))},t.prototype._updateHeaderIcon=function(t,r){if(r.owner.position!=="footer"){var i=t.item(r.cr.r1);i&&n.each(i,function(t,i){if(i){var s=n(i).find("div."+e.grid.wijgrid.CSS.groupToggleVisibilityButton);s&&s.length&&(s.toggleClass(r.getHeaderImageClass(!r.isExpanded),!1),s.toggleClass(r.getHeaderImageClass(r.isExpanded),!0))}})}},t}();t.groupRange=r;var i=function(){function r(){this._groupRowIdx=0}return r.prototype.group=function(e,t,n){this._grid=e,this._sketchTable=t,this._leaves=n,this._groupRowIdx=0;try{this._group()}finally{delete this._grid,delete this._sketchTable,delete this._leaves}},r.prototype._group=function(){var e=this;n.each(this._leaves,function(e,t){t.groupInfo&&(delete t.groupInfo.level,delete t.groupInfo.expandInfo)});var t=this._grid._groupedColumns(!0),r=1;if(t.length==0)return;this._sketchTable.ensureNotLazy(),n.each(t,function(t,n){e._groupRowIdx=0,n.groupInfo&&n.groupInfo.position&&n.groupInfo.position!=="none"&&n.dataIndex>=0&&(n.groupInfo.level=r,n.groupInfo.expandInfo=[],e._processRowGroup(n,r++))})},r.prototype._processRowGroup=function(t,r){var i=0,s=!0;n.each(this._leaves,function(e,t){if(t.parentVis)return i=e,!1});for(var o=0;o<this._sketchTable.count();o++){var u=this._sketchTable.row(o);if(!u.isDataRow())continue;var a=this._getGroupCellRange(o,t,r),f=!0,l=t.groupInfo.outlineMode==="startCollapsed",c,h,p,d;if(l||e.grid.groupHelper.isParentCollapsed(this._leaves,a,r)){if(t.groupInfo.groupSingleRow===!1&&a.r1===a.r2)continue;f=!1}if(r&&this._grid.options.groupIndent)for(var v=a.r1;v<=a.r2;v++)this._addIndent(this._sketchTable.row(v).cell(i),r);s=t.groupInfo.groupSingleRow!==!1||a.r1!==a.r2;switch(t.groupInfo.position){case"header":p=this._addGroupRange(t.groupInfo,a,f,s);for(var m=a.r1;m<=a.r2;m++)u=this._sketchTable.row(m),u.attr("aria-level",r+1),f||(u.style("display","none"),u.attr("aria-hidden",!0));if(!s)break;this._updateByGroupRange(p,r),d=e.grid.groupHelper.isParentCollapsed(this._leaves,p.cr,r),c=this._buildGroupRow(p,a,!0,d),this._sketchTable.insert(a.r1,c),c.attr("arial-level",r),c.attr("aria-expanded",f),d&&(c.style("display","none"),c.attr("aria-hidden",!0)),o=a.r2+1;break;case"footer":p=this._addGroupRange(t.groupInfo,a,!0,s);if(!s)break;this._updateByGroupRange(p,r),h=this._buildGroupRow(p,a,!1,!1),h.attr("aria-level",r),this._sketchTable.insert(a.r2+1,h),o=a.r2+1,d=e.grid.groupHelper.isParentCollapsed(this._leaves,p.cr,r),d&&(h.style("display","none"),h.attr("aria-hidden",!0));break;case"headerAndFooter":p=this._addGroupRange(t.groupInfo,a,f,s);for(m=a.r1;m<=a.r2;m++)u=this._sketchTable.row(m),u.attr("aria-level",r+1),f||(u.style("display","none"),u.attr("aria-hidden",!0));if(!s)break;this._updateByGroupRange(p,r),d=e.grid.groupHelper.isParentCollapsed(this._leaves,p.cr,r),c=this._buildGroupRow(p,a,!0,d),h=this._buildGroupRow(p,a,!1,!1),this._sketchTable.insert(a.r2+1,h),h.attr("aria-level",r);if(d||!f)h.style("display","none"),h.attr("aria-hidden",!0);this._sketchTable.insert(a.r1,c),c.attr("aria-level",r),c.attr("aria-expanded",f),d&&(h.style("display","none"),h.attr("aria-hidden",!0)),o=a.r2+2;break;default:throw e.grid.stringFormat('Unknown Position value: "{0}"',t.groupInfo.position)}this._groupRowIdx++}},r.prototype._buildGroupRow=function(n,r,i,s){var o=n.owner,u=o.owner,a=u.owner,f=(i?"GH":"GF")+this._groupRowIdx+"-"+o.level,l=new e.grid.SketchGroupRow(i,{id:f}),c=undefined,h="",p="",d,v,d,m,g,y,b,w,E,S=e.grid.wijgrid.CSS,x=a.options.wijCSS;u.dataIndex>=0&&(c=this._sketchTable.valueAt(r.r1,u.dataIndex))!==null&&(h=a.toStr(u,c)),l.groupByValue=c,this._grid._showRowHeader()&&l.add(t.HtmlCell.nbsp()),d=new t.HtmlCell;if(i&&o.outlineMode!=="none"){var T=n.getHeaderImageClass(n.isExpanded);d.html='<div class="'+x.icon+" "+T+" "+S.groupToggleVisibilityButton+" "+x.wijgridGroupToggleVisibilityButton+'">&nbsp;</div>'}l.add(d),u.aggregate&&u.aggregate!=="none"&&(p=this._getAggregate(r,u,u,i,h)),m=i?o.headerText:o.footerText;if(m==="custom")g={data:this._sketchTable.getRawTable(),column:u,groupByColumn:o.owner,groupText:h,text:"",groupingStart:r.r1,groupingEnd:r.r2,isGroupHeader:i,aggregate:p},this._grid._trigger("groupText",null,g)&&(m=g.text);else{if(m===undefined||m===null){i&&(m="{1}: {0}");if(p||p===0)m=m?m+" {2}":"{2}"}m=e.grid.stringFormat(m,h,u&&u.headerText?u.headerText:"",p.toString())}m||(m="&nbsp;"),d.html+="<span>"+m+"</span>",this._addIndent(d,o.level-1),y=1,b=this._grid._showRowHeader()?1:0,w=!0;for(;b<this._leaves.length;b++){v=this._leaves[b];if(v.parentVis){if(w){w=!1;continue}if(v.dynamic!==!0&&v.aggregate&&v.aggregate!=="none")break;y++}}for(;b<this._leaves.length;b++)v=this._leaves[b],v.parentVis&&(E=this._getAggregate(r,v,o.owner,i,h),!E&&E!==0&&(E="&nbsp;"),l.add(new t.HtmlCell(E.toString(),{groupInfo:{leafIndex:v.leavesIdx,purpose:e.grid.groupRowCellPurpose.aggregateCell}})));return d.ensureAttr().colSpan=y,d.ensureAttr().groupInfo={leafIndex:u.leavesIdx,purpose:e.grid.groupRowCellPurpose.groupCell},l},r.prototype._getAggregate=function(t,n,r,i,s){var o="",u,a,f;if(!n.aggregate||n.aggregate==="none")return o;if(n.aggregate==="custom")u={data:this._sketchTable.getRawTable(),column:n,groupByColumn:r,groupText:s,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:i},this._grid._trigger("groupAggregate",null,u)&&(o=u.text);else{a=new e.grid.tally;for(f=t.r1;f<=t.r2;f++)a.add(this._sketchTable.valueAt(f,n.dataIndex));o=a.getValueString(n)}return o},r.prototype._getGroupCellRange=function(t,n,r){var i=n.leavesIdx,s,o=new e.grid.cellRange(t,i),u=e.grid.groupHelper.getParentGroupRange(this._leaves,o,r),a,f,l;s=this._sketchTable.row(t);if(s.isDataRow()){a=s.valueCell(n.dataIndex).value,a instanceof Date&&(a=a.getTime());for(o.r2=t,l=this._sketchTable.count()-1;o.r2<l;o.r2++){if(!this._sketchTable.row(o.r2+1).isDataRow()||u&&o.r2+1>u.cr.r2)break;f=this._sketchTable.valueAt(o.r2+1,n.dataIndex),f instanceof Date&&(f=f.getTime());if(a!==f)break}}return o},r.prototype._addGroupRange=function(t,n,r,i){var s=null,o=e.grid.groupHelper.getChildGroupIndex(n,t.expandInfo),u,a,f,l;return o>=0&&o<t.expandInfo.length?s=t.expandInfo[o]:(u=new e.grid.cellRange(n.r1,n.r1,n.r2,n.r2),a=t.position==="footer"||!i?!0:r&&t.outlineMode!=="startCollapsed",s=new e.grid.groupRange(a,u,-1,t.position,i),s.owner=t,t.expandInfo.push(s)),s&&i&&(f=n.r1,l=n.r2,t.position==="headerAndFooter"&&(l+=2),t.position!=="headerAndFooter"&&l++,s.cr.r2=l),s},r.prototype._updateByGroupRange=function(e,t){var n,r,i,s,o,u,a;for(n=0,r=this._leaves.length;n<r;n++){i=this._leaves[n].groupInfo;if(i&&i.level<t){s=i.expandInfo?i.expandInfo.length:0;for(o=0;o<s;o++)u=i.expandInfo[o],a=e.position==="headerAndFooter"?2:1,u.cr.r1>=e.cr.r1&&(u.cr.r1!==e.cr.r1||u.position!=="footer")&&(u.cr.r1+=a),u.cr.r2>=e.cr.r1&&(u.cr.r2+=a)}}},r.prototype._addIndent=function(e,t){var n;t>0&&(n=this._grid.options.groupIndent)&&(e.ensureStyle().paddingLeft=n*t+"px")},r}();t.grouper=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(){}return t._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$"),t.getGroupInfo=function(n){if(n){var r=e.grid.groupHelper._getGroupInfoRegExp.exec(n.id),i,s,o;if(r)return i=parseInt(r[3],10),s=parseInt(r[2],10),o=r[1]==="H",{level:i,index:s,isHeader:o,toString:function(){return(o?"GH":"GF")+s+"-"+i}}}return null},t.getColumnByGroupLevel=function(t,n){var r,i,s;for(r=0,i=t.length;r<i;r++){s=t[r];if(s.groupInfo&&s.groupInfo.level===n)return s}return null},t.getGroupedColumnsCount=function(t){var n=0,r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r].groupInfo,s&&(s.position==="header"||s.position==="headerAndFooter"||s.position==="footer")&&n++;return n},t.getChildGroupIndex=function(t,n){var r=0,i=n.length-1,s,o;while(r<=i){s=(i-r>>1)+r,o=n[s].cr.r1-t.r1;if(o===0)return s;o<0?r=s+1:i=s-1}return r},t.getParentGroupIndex=function(n,r){var i=e.grid.groupHelper.getChildGroupIndex(n,r);return i>0&&i--,i<r.length?i:-1},t.getChildGroupRanges=function(n,r,i){var s=[],o=e.grid.groupHelper.getColumnByGroupLevel(n,i+1);if(o){var u=o.groupInfo.expandInfo,a=e.grid.groupHelper.getChildGroupIndex(r,u);for(var f=a,l=u.length;f<l;f++){var c=u[f];if(!(c.cr.r2<=r.r2))break;s.push(c)}}return s},t.getParentGroupRange=function(n,r,i){i===undefined&&(i=65535);if(i-2>=0)for(var s=n.length-1;s>=0;s--){var o=n[s].groupInfo;if(!o||!o.expandInfo||o.level<0||o.level!==i-1)continue;var u=e.grid.groupHelper.getParentGroupIndex(r,o.expandInfo);if(u>=0)return o.expandInfo[u]}return null},t.isParentCollapsed=function(n,r,i){if(i===1)return!1;for(var s=i;s>1;s--){var o=e.grid.groupHelper.getParentGroupRange(n,r,s);if(o&&!o.isExpanded)return!0;r=o.cr}return!1},t.isParentExpanded=function(n,r,i){if(i===1)return!0;for(var s=i;s>1;s--){var o=e.grid.groupHelper.getParentGroupRange(n,r,s);if(o&&o.isExpanded)return!0;r=o.cr}return!1},t}();t.groupHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function e(e,t,n,r){switch(arguments.length){case 2:this.r1=this.r2=e,this.c1=this.c2=t;break;case 4:this.r1=e,this.r2=n,this.c1=t,this.c2=r;break;default:this.r1=0,this.r2=0,this.c1=0,this.c2=0}}return e.prototype.isSingleCell=function(){return this.r1===this.r2&&this.c1===this.c2},e}();t.cellRange=r;var i=function(){function t(){}return t.prototype.merge=function(e,t){this._leaves=t,this._data=e;try{this._merge()}finally{delete this._data,delete this._leaves}},t.prototype._merge=function(){var e,t,n,r=!0;for(e=0,t=this._leaves.length;e<t;e++)n=this._leaves[e],n.dataIndex>=0&&!n.isBand&&(n.rowMerge==="free"||n.rowMerge==="restricted")&&(r&&(this._data.ensureNotLazy(),r=!1),this._mergeColumn(n))},t.prototype._mergeColumn=function(e){var t=e.dataIndex,n,r,i,s,o,u;for(r=0,i=this._data.count();r<i;r++){n=this._data.row(r);if(!n.isDataRow())continue;s=this._getCellRange(r,e);if(s.r1!==s.r2){o=s.r2-s.r1+1,this._data.row(s.r1).cell(t).ensureAttr().rowSpan=o;for(u=s.r1+1;u<=s.r2;u++)this._data.row(u).cell(t).visible(!1)}r=s.r2}},t.prototype._getCellRange=function(t,n){var r=n.dataIndex,i,s=new e.grid.cellRange(t,r),o=(this._data.valueAt(t,r)||"").toString(),u=this._data.count(),a,f,l;for(s.r2=t;s.r2<u-1;s.r2++){i=this._data.row(s.r2+1);if(!i.isDataRow()||(i.valueCell(r).value||"").toString()!==o)break}return a=n.leavesIdx,a>0&&n.rowMerge==="restricted"&&(f=this._leaves[a-1],f.dataIndex>=0&&(l=this._getCellRange(t,f),s.r1=Math.max(s.r1,l.r1),s.r2=Math.min(s.r2,l.r2))),s},t}();t.merger=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function c(t,r){var i,s,o;if(n.isArray(t)&&n.isArray(r)){if(t.length===r.length){o=!0;for(i=0,s=t.length;i<s&&o;i++)o=e.grid.compareObj(t[i],r[i]);return o}}else{if(n.isPlainObject(t)&&n.isPlainObject(r)){for(i in t)if(t.hasOwnProperty(i)&&!e.grid.compareObj(t[i],r[i]))return!1;for(i in r)if(r.hasOwnProperty(i)&&!e.grid.compareObj(t[i],r[i]))return!1;return!0}t instanceof Date&&(t=t.getTime()),r instanceof Date&&(r=r.getTime())}return t===r}function h(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];var r,i;if(!e)return"";for(r=0,i=t.length;r<i;r++)e=e.replace(new RegExp("\\{"+r+"\\}","gm"),t[r]);return e}function p(e){return e&&!(e<0)||e===0}function d(e){return e&&e instanceof Date?!isNaN(e.getTime()):!1}function v(e){return e.dataType||e._underlyingDataType||"string"}function m(e,t){e&&t&&e.find(".ui-widget").each(function(e,r){return n.each(n(r).data(),function(n,r){r.widgetName&&t(e,r)}),!0})}function g(e,t){var r=[];n.each(e.data(),function(e){e.indexOf(t)===0&&r.push(e)}),n.each(r,function(t,n){e.removeData(n)})}function b(e){return n.extend(!0,{},t.c1basefield.prototype.options,t.c1field.prototype.options,{dynamic:!0,isLeaf:!0,isBand:!1,parentIdx:-1},e)}function w(e,t){if(e){var r=e.nodeType?n(e):e,i=r.offset();if(i)return t?{top:i.top,left:i.left,width:r[0].clientWidth||0,height:r[0].clientHeight||0}:{top:i.top,left:i.left,width:r.outerWidth(),height:r.outerHeight()}}return null}function E(e,t){return e&&(e.start<0&&(e.start=0),e.end<0&&(e.end=0),e.start=Math.min(e.start,t),e.end=Math.min(e.end,t)),e}function S(t,n,r){n===undefined&&(n=3);if(t&&n!==0){if(!r&&t.nodeType===3)return t.nodeValue;if(t.nodeType===1){switch(t.type){case"button":case"text":case"textarea":case"select-one":return t.value;case"checkbox":return t.checked.toString()}var i="",s=0,o;while(o=t.childNodes[s++])i+=e.grid._getDOMText(o,n-1);return i}}return""}function x(e,t,r,i){var s=e.jquery||n.isArray(e),o,u,a,f=t+r;if(arguments.length===3)return s?n.data(e[0],f):n.data(e,f);if(s){for(o=0,u=e.length;o<u;o++)a=n.data(e[o],f,i);return a}return n.data(e,f,i)}function T(e,t){if(t&&e){var n,r,i;for(n in t)t.hasOwnProperty(n)&&(r=t[n],i=typeof r,(i==="string"||i==="boolean"||i==="number")&&e[n]===undefined&&(e[n]=r))}}function N(e){return e&&typeof e=="object"&&!(e instanceof Date)}function C(e,t){var r,i,s=n.isFunction(t);for(r in e)if(e.hasOwnProperty(r)){i=s?t(e[r]):e[r]===t;if(i===!0)return{at:r,found:e[r]}}return{at:null,found:null}}function k(e,t){if(e){var n,r,i=0,s={},o,u;for(n=0,r=e.attributes.length;n<r;n++)u=e.attributes[n].name,u&&(!t||!t(u))&&(o=e.getAttribute(u),u==="style"&&(o=typeof o=="object"?o.cssText:o),!o&&u==="class"&&(o=e.getAttribute("className")),o&&typeof o!="function"&&(s[u]=o,i++));if(i)return s}return null}function L(t,r){var i,s,o,u,a;if(t){typeof r!="object"&&!n.isFunction(r)&&(r={});for(i in t){s=t[i],o=r[o];if(s===r)continue;s&&(n.isPlainObject(s)||(u=n.isArray(s)))?(u?(u=!1,a=o&&n.isArray(o)?o:[]):a=o&&n.isPlainObject(o)?o:{},r[i]=e.grid.deepExtend(s,a)):r[i]=s}}return r}function A(e,t){return e&&e.jquery&&(e=e[0]),e?arguments.length===1?n.data(e,"wijgridwidgetName"):n.data(e,"wijgridwidgetName",t):undefined}function M(e,t){typeof t=="undefined"&&(t=99);var r=0;return e&&n.ui&&n.fn.zIndex&&(r=e.zIndex(),r&&r++),Math.max(r,t)}function _(e,t,n){return e>t&&e<t+n}function D(t,n,r,i,s,o){return e.grid.isOverAxis(t,r,s)&&e.grid.isOverAxis(n,i,o)}function H(){return"uid"+P++}var n=jQuery;t.EXPANDO="__wijgrid",function(e){e._map=[],e.header=1,e.data=2,e.dataAlt=4,e.filter=8,e.groupHeader=16,e.groupFooter=32,e.footer=64,e.emptyDataRow=128}(t.rowType||(t.rowType={}));var r=t.rowType;(function(e){e._map=[],e.none=0,e.rendering=1,e.current=2,e.hovered=4,e.selected=8,e.editing=16})(t.renderState||(t.renderState={}));var i=t.renderState;(function(e){e._map=[],e.table=0,e.head=1,e.body=2,e.foot=3})(t.rowScope||(t.rowScope={}));var s=t.rowScope;(function(e){e._map=[],e.none=0,e.column=1,e.row=2})(t.cellRangeExtendMode||(t.cellRangeExtendMode={}));var o=t.cellRangeExtendMode;(function(e){e._map=[],e.createIfNull=0,e.createAlways=1,e.dispose=2})(t.objectMode||(t.objectMode={}));var u=t.objectMode;(function(e){e._map=[],e.groupCell=0,e.aggregateCell=1})(t.groupRowCellPurpose||(t.groupRowCellPurpose={}));var a=t.groupRowCellPurpose;(function(e){e._map=[],e.sketch=0,e.rendered=1,e.renderable=2})(t.dataRowsRangeMode||(t.dataRowsRangeMode={}));var f=t.dataRowsRangeMode;(function(e){e._map=[],e.none=0,e.overlapTop=1,e.overlapBottom=2,e.reset=3})(t.intersectionMode||(t.intersectionMode={}));var l=t.intersectionMode;t.compareObj=c,t.stringFormat=h,t.validDataKey=p,t.validDate=d,t.getDataType=v,t.iterateChildrenWidgets=m,t.remove$dataByPrefix=g;var y=function(){function e(e){this._dom=e}return e.prototype.getSelection=function(){var e=0,t=0,n;return this._dom.selectionStart!==undefined?(e=this._dom.selectionStart,t=this._dom.selectionEnd):document.selection&&(n=document.selection.createRange().duplicate(),t=n.text.length,e=Math.abs(n.moveStart("character",-this._dom.value.length)),t+=e),{start:e,end:t,length:t-e}},e.prototype.setSelection=function(e){if(this._dom.selectionStart!==undefined)this._dom.setSelectionRange(e.start,e.end);else{var t=this._dom.createTextRange();t.collapse(!0),t.moveStart("character",e.start),t.moveEnd("character",e.end),t.select()}},e.prototype.toggleSelection=function(e){var t=n(this._dom),r="onselectstart"in this._dom;e?r?t.unbind(".wijgrid-disableSelection"):t.css({MozUserSelect:"",WebkitUserSelect:""}):r?t.bind("selectstart.wijgrid-disableSelection",function(e){e.preventDefault()}):t.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})},e}();t.domSelection=y,t.createDynamicField=b,t.bounds=w,t.ensureBounds=E,t._getDOMText=S,t.dataPrefix=x,t.shallowMerge=T,t.isCustomObject=N,t.search=C,t.getAttributes=k,t.deepExtend=L,t.widgetName=A;var O=function(){function t(){}return t._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""},t.isExtendSupportRequired=function(n){return n=(n||"").toLowerCase(),n in e.grid.HTML5InputSupport._requiresExtendedSupport},t.getDefaultInputType=function(n,r){var i=r.inputType;if(!i){i="text";if(n)switch(e.grid.getDataType(r)){case"number":case"currency":i="number";break;case"datetime":i="datetime"}}return i},t.toStr=function(n,r){var i=n;r=(r||"").toLowerCase();if(e.grid.HTML5InputSupport.isExtendSupportRequired(r))switch(r){case"datetime":i=n?i=Globalize.format(n,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":i=n?i=Globalize.format(n,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":i=n?i=Globalize.format(n,"yyyy-MM-dd"):"";break;case"month":i=n?i=Globalize.format(n,"yyyy-MM"):"";break;case"time":i=n?i=Globalize.format(n,"HH:mm:ss"):""}else i=n+"";return i},t.parse=function(n,r){var i,s=function(t){return t=new Date(t),e.grid.validDate(t)||(t=null),t};r=(r||"").toLowerCase();if(e.grid.HTML5InputSupport.isExtendSupportRequired(r))switch(r){case"datetime":i=Globalize.parseDate(n,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(n,"yyyy-MM-ddTHH:mmZ")||s(n);break;case"datetime-local":i=Globalize.parseDate(n,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(n,"yyyy-MM-ddTHH:mm")||s(n);break;case"date":i=Globalize.parseDate(n,"yyyy-MM-dd")||s(n);break;case"month":i=Globalize.parseDate(n,"yyyy-MM");break;case"time":i=Globalize.parseDate(n,"HH:mm:ss")||Globalize.parseDate(n,"HH:mm");break;case"number":i=parseFloat(n)}else i=n;return i},t.extend=function(t,n,r){if(!t)t=n;else{r=(r||"").toLowerCase();switch(r){case"date":t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate());break;case"month":t.setFullYear(n.getFullYear(),n.getMonth());break;case"time":t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds());break;default:t=n}}return t},t}();t.HTML5InputSupport=O,t.getZIndex=M,t.isOverAxis=_,t.isOver=D;var P=0;t.getUID=H,n.extend(n.wijmo.wijgrid,{rowType:e.grid.rowType,renderState:e.grid.renderState,bounds:e.grid.bounds})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function i(e,t){var n=!1,r;return function(){return n||(r=t?e.call(t):e(),n=!0),r}}(function(e){e._map=[],e.Millisecond=1,e.Second=2,e.Minute=4,e.Hour=8,e.Day=16,e.Month=32,e.Year=64,e.DATE=e.Year|e.Month|e.Day,e.TIME=e.Hour|e.Minute|e.Second|e.Millisecond,e.ALL=e.DATE|e.TIME})(t.TimeUnit||(t.TimeUnit={}));var n=t.TimeUnit,r=function(){function t(){}return t.convertInputType=function(n){var r=e.grid.TimeUnitConverter.convertInputTypeToFormatString(n),i=e.grid.TimeUnitConverter.convertFormatString(r);return i},t.convertInputTypeToFormatString=function(t){switch((t||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""},t.convertFormatString=function(t){var r=0;if(t){if(t.length===1)switch(t[0]){case"t":return n.Hour|n.Minute;case"T":return n.TIME;case"d":case"D":return n.DATE;case"Y":return n.Month|n.Year;case"M":return n.Month|n.Day;case"f","F","S":return n.ALL}var i,s;(i=t.indexOf("'"))>=0&&(s=t.lastIndexOf("'"))>=0&&i!==s&&(t=t.substr(0,i)+t.substring(s+1,t.length-1));for(var o=0,u=t.length;o<u;o++)switch(t[o]){case"d":r|=n.Day;break;case"M":r|=n.Month;break;case"y":r|=n.Year;break;case"m":r|=n.Minute;break;case"h":case"H":r|=n.Hour;break;case"s":r|=n.Second;break;case"f":r|=n.Millisecond}}return r||n.ALL},t.cutDate=function(t,r){return t&&(r=~r,r&n.Millisecond&&t.setMilliseconds(0),r&n.Second&&t.setSeconds(0),r&n.Minute&&t.setMinutes(0),r&n.Hour&&t.setHours(0),r&n.Day&&t.setDate(1),r&n.Month&&t.setMonth(0),r&n.Year&&t.setFullYear(0)),t},t}();t.TimeUnitConverter=r,t.lazy=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function e(){}return e.NoFilterOp={applicableTo:null,name:"NoFilter",displayName:"No filter",arity:1,operator:function(){return!0}},e}(),i=function(){function t(t){this._cache={};var i=this;this._wijgrid=t,this._addOperator(null,r.NoFilterOp),n.each(e.data.filtering.ops,function(e,t){i._addOperator(e,t)}),n.each(t.options.customFilterOperators,function(e,t){i._addOperator(null,t,!0)})}return t.prototype.getByName=function(e){var t=this.getByNameInt(e);return t?t.op:null},t.prototype.getByNameInt=function(e){return this._cache[(e||"").toLowerCase()]},t.prototype.getByDataType=function(e){var t=[],r;n.each(this._cache,function(r,i){var s=i.op;(!s.applicableTo||n.inArray(e,s.applicableTo)>=0)&&t.push(i)});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":t.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":t.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":t.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:}return r=n.map(t,function(e,t){return e.op}),r},t.prototype._addOperator=function(e,t,n){typeof n=="undefined"&&(n=!1),e&&!t.name&&(t.name=e),e=(e||t.name).toLowerCase(),this._cache[e]||(this._cache[e]={op:t,isCustom:n===!0})},t.prototype._sortAlpha=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}return n===r?0:n<r?-1:1},t.prototype._sortAlphaEmbeddedFirst=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}if(e.isCustom!==t.isCustom){if(e.isCustom)return 1;if(t.isCustom)return-1}return n===r?0:n<r?-1:1},t.prototype._sortAlphaCustomFirst=function(e,t){var n=e.op.name.toLowerCase(),r=t.op.name.toLowerCase();if(n!==r){if(n==="nofilter")return-1;if(r==="nofilter")return 1}if(e.isCustom!==t.isCustom){if(e.isCustom)return-1;if(t.isCustom)return 1}return n===r?0:n<r?-1:1},t}();t.filterOperatorsCache=i;var s=function(){function t(){}return t.marker="_wijgrid",t.getSingleValue=function(t){return n.isArray(t)&&(t=t[0],n.isArray(t)&&(t=t[0])),t},t.getSingleOperatorName=function(t){return n.isArray(t)&&(t=t[0]),t.name||t||""},t.verify=function(r,i,s,o){if(r)if(n.isArray(r)){var u,a,f=[],l=[];n.isArray(i)||(i=[i]);for(u=0,a=r.length;u<a;u++)e.grid.filterHelper._verifySingleOp(r[u],i[u],s,o)&&(f.push({name:r[u].name||r[u],condition:r[u].condition||"or"}),l.push(i?i[u]:undefined));if(f.length)return{filterOperator:f,filterValue:l}}else if(e.grid.filterHelper._verifySingleOp(r,i,s,o))return{filterOperator:r,filterValue:i};return null},t._verifySingleOp=function(r,i,s,o){if(r&&(r=r.name||r)){var u;r=(r||"").toLowerCase();if((r!=="nofilter"||i!==undefined)&&(u=o.getByName(r)))if(u.applicableTo===null||n.inArray(s||"string",u.applicableTo)>=0)if(u.arity===1||u.arity>1&&e.grid.filterHelper.getSingleValue(i)!==undefined)return!0}return!1},t}();t.filterHelper=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){function r(t,n){t&&!t.nodeType&&(t=t[0]);if(t)switch(n){case e.grid.rowScope.head:return t.tHead;case e.grid.rowScope.body:if(t.tBodies)return t.tBodies[0]||null;break;case e.grid.rowScope.foot:return t.tFoot;default:return t}return null}function i(e,t){var n;return e&&!e.nodeType&&(e=e[0]),e&&(n=this.getTableSection(e,t))?n.rows.length:0}function s(e,t,n){var r;return e&&!e.nodeType&&(e=e[0]),e&&(r=this.getTableSection(e,t))?r.rows[n]||null:null}function o(t,r,i){var s,o,u,a,f,l,c,h,p=[],d=function(e){return e=e.toLowerCase(),e==="rowspan"||e==="colspan"},v;t&&!t.nodeType&&(t=t[0]);if(t&&(v=this.getTableSection(t,r)))for(s=0,o=v.rows.length;s<o;s++){f=v.rows[s],l=[],i&&(c=e.data.Expando.getFrom(l,!0),h=c[e.grid.EXPANDO]={cellsAttributes:{},rowAttributes:e.grid.getAttributes(f)||{}});for(u=0,a=f.cells.length;u<a;u++)l[u]=n.trim(f.cells[u].innerHTML),i&&(h.cellsAttributes[u]=e.grid.getAttributes(f.cells[u],d)||{});p[s]=l}return p}function u(t){var n=t.parentNode.parentNode;switch(n.tagName.toLowerCase()){case"thead":return e.grid.rowScope.head;case"tbody":return e.grid.rowScope.body;case"tfoot":return e.grid.rowScope.foot}return null}var n=jQuery;t.getTableSection=r,t.getTableSectionLength=i,t.getTableSectionRow=s,t.readTableSection=o,t.determineSection=u;var a=function(){function t(e,t,n,r){this._width=0,this._table=e,this._offsets=[],r&&this.ensureColGroup(),n&&this.ensureTBody(),t||this._buildOffsets()}return t.prototype.element=function(){return this._table},t.prototype.width=function(){return this._width},t.prototype.getCellIdx=function(e,t){return e<this._width?this._offsets[t][e].cellIdx:-1},t.prototype.getColumnIdx=function(e,t){if(typeof e!="number"){var n=e;e=n.cellIndex,t=n.parentNode.rowIndex}return e<this._width?this._offsets[t][e].colIdx:-1},t.prototype.clearSection=function(t){var n,r,i=e.grid.getTableSection(this._table,t);switch(t){case e.grid.rowScope.body:n=this.getSectionLength(e.grid.rowScope.table),r=n+this.getSectionLength(t)-1;break;case e.grid.rowScope.foot:n=this.getSectionLength(e.grid.rowScope.table)+this.getSectionLength(e.grid.rowScope.head),r=n+this.getSectionLength(t)-1;break;default:n=0,r=this.getSectionLength(t)-1}while(i.rows.length)i.deleteRow(0);this._offsets.splice(n,r-n+1)},t.prototype.getSectionLength=function(t){return e.grid.getTableSectionLength(this._table,t)},t.prototype.getSectionRow=function(t,n){return e.grid.getTableSectionRow(this._table,n,t)},t.prototype.forEachColumnCellNatural=function(e,t,n){var r,i,s,o;for(r=0,i=this._table.rows.length;r<i;r++){s=this._table.rows[r];if(e<s.cells.length){o=t(s.cells[e],r,n);if(o!==!0)return o}}return!0},t.prototype.forEachColumnCell=function(e,t,n){var r,i,s,o,u;for(r=0,i=this._offsets.length;r<i;r++){s=this._table.rows[r],o=this.getCellIdx(e,r);if(o>=0){u=t(s.cells[o],r,n);if(u!==!0)return u}}return!0},t.prototype.forEachRowCell=function(e,t,n){var r=this._table.rows[e],i,s,o;for(i=0,s=r.cells.length;i<s;i++){o=t(r.cells[i],i,n);if(o!==!0)return o}return!0},t.prototype.colGroupTag=function(){var e=this._table.getElementsByTagName("colgroup");return e&&e[0]||null},t.prototype.colTags=function(){var e=this.colGroupTag();return e&&e.getElementsByTagName("col")||[]},t.prototype.ensureTBody=function(){return this._table.tBodies&&this._table.tBodies[0]||this._table.appendChild(document.createElement("tbody"))},t.prototype.ensureTHead=function(){return this._table.tHead&&this._table.tHead[0]||this._table.createTHead()},t.prototype.ensureTFoot=function(){return this._table.tFoot&&this._table.tFoot[0]||this._table.createTFoot()},t.prototype.ensureColGroup=function(){var e=this._table.getElementsByTagName("colgroup");return e&&e[0]||this._table.appendChild(document.createElement("colgroup"))},t.prototype.appendCol=function(e){var t=this.ensureColGroup();return e&&t.appendChild(e)||t.appendChild(document.createElement("col"))},t.prototype.removeOffset=function(e){if(e>=0&&e<this._offsets.length){if(e<0||!e&&e!==0)e=this._offsets.length-1;this._offsets.splice(e,1)}},t.prototype.insertOffset=function(e){var t,n;if(this._width>0){t=[];for(n=0;n<this._width;n++)t.push({cellIdx:n,colIdx:n});if(e<0||!e&&e!==0)e=this._offsets.length;this._offsets.splice(e,0,t)}},t.prototype.rebuildOffsets=function(){this._offsets=[],this._width=0,this._buildOffsets()},t.prototype._buildOffsets=function(){var e=[],t,n,r,i,s,o,u,a,f,l;for(n=0,r=this._table.rows.length;n<r;n++){t=[],this._offsets[n]=t,i=this._table.rows[n];for(s=0,o=0,u=i.cells.length;s<u;s++,o++){a=i.cells[s];for(;e[o]>1;o++)e[o]--,t[o]={cellIdx:-1,colIdx:-1};e[o]>1||(e[o]=a.rowSpan),t[o]={cellIdx:s,colIdx:-1},t[s].colIdx=o,f=a.colSpan;for(;f>1;f--)t[++o]={cellIdx:-1,colIdx:-1}}l=e.length;for(;o<l;o++)e[o]--,t[o]={cellIdx:-1,colIdx:-1};this._width=Math.max(this._width,l)}},t}();t.htmlTableAccessor=a})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(e,t,n,r,i){typeof n=="undefined"&&(n=null),typeof r=="undefined"&&(r=!1),typeof i=="undefined"&&(i=!0),this.__isEdit=!1,this._wijgrid=n,this._virtualize=i,r?(this._ci=e-this._wijgrid._getDataToAbsOffset().x,this._ri=t-this._wijgrid._getDataToAbsOffset().y,this._virtualize&&(this._ri=this._wijgrid._renderableBoundsCollection().getAbsIndex(this._ri+this._wijgrid._viewPortBounds().start))):(this._ci=e,this._ri=t)}return t.outsideValue=new t(-1,-1,null),t.prototype.cellIndexAbs=function(){return this._ci+this._wijgrid._getDataToAbsOffset().x},t.prototype.rowIndexAbs=function(){var e=this._virtualize?this._wijgrid._renderableBoundsCollection().getRenderedIndex(this._ri)-this._wijgrid._viewPortBounds().start:this._ri;return e+=this._wijgrid._getDataToAbsOffset().y,e},t.prototype.cellIndex=function(e){if(!arguments.length)return this._ci;this._ci=e},t.prototype.column=function(){return this._wijgrid&&this._isValid()?this._wijgrid._field("visibleLeaves")[this.cellIndexAbs()]:null},t.prototype.container=function(){var t=this.tableCell(),r;if(t){r=n(t).children("div."+e.grid.wijgrid.CSS.cellContainer);if(r)return r}return null},t.prototype.isEqual=function(e){return e&&e.rowIndex()===this.rowIndex()&&e.cellIndex()===this.cellIndex()},t.prototype.row=function(){var e=null,t=null;return this._wijgrid&&(this._virtualize?t=this._wijgrid._view()._getRowInfoBySketchRowIndex(this.rowIndex()):(e=this._wijgrid._view().rows().item(this.rowIndexAbs()),e&&e.length&&(t=this._wijgrid._view()._getRowInfo(e)))),t},t.prototype.rowIndex=function(e){if(!arguments.length)return this._ri;this._ri=e},t.prototype.tableCell=function(){if(this._wijgrid&&this._isValid())if(!this._virtualize||this._isRendered())return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs());return null},t.prototype.value=function(t){var n,r,i;if(this._wijgrid&&this._isValid()){r=this.row();if(r.type&e.grid.rowType.data){n=this.column();if(arguments.length===0)return i=this._wijgrid._dataViewWrapper.getValue(r.data,n.dataKey),this._wijgrid.parse(n,i);t=this._wijgrid.parse(n,t);if(t===null&&n.valueRequired||e.grid.getDataType(n)!=="string"&&isNaN(t))throw"invalid value";this._wijgrid._dataViewWrapper.setValue(r.dataItemIndex,n.dataKey,t);var s=this._wijgrid.sketchTable.row(this.rowIndex()),o=s.cell(n.dataIndex);o.value=t}}},t.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()},t.prototype._clip=function(e,t){typeof t=="undefined"&&(t=!1);var n=!1,r;return t?(this.cellIndexAbs()<(r=e.topLeft().cellIndexAbs())&&(n=!0,this._ci=e.topLeft().cellIndex()),this.cellIndexAbs()>(r=e.bottomRight().cellIndexAbs())&&(n=!0,this._ci=e.bottomRight().cellIndex()),this.rowIndexAbs()<(r=e.topLeft().rowIndexAbs())&&(n=!0,this._ri=e.topLeft().rowIndex()),this.rowIndexAbs()>(r=e.bottomRight().rowIndexAbs())&&(n=!0,this._ri=e.bottomRight().rowIndex())):(this.cellIndex()<(r=e.topLeft().cellIndex())&&(n=!0,this._ci=r),this.cellIndex()>(r=e.bottomRight().cellIndex())&&(n=!0,this._ci=r),this.rowIndex()<(r=e.topLeft().rowIndex())&&(n=!0,this._ri=r),this.rowIndex()>(r=e.bottomRight().rowIndex())&&(n=!0,this._ri=r)),n},t.prototype._clone=function(){return new e.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid,!1,this._virtualize)},t.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0},t.prototype._isRendered=function(){var e;if(this._wijgrid&&(e=this._wijgrid._view())&&this._isValid()){var t=this._wijgrid._view()._isRowRendered(this.rowIndex());return t>=0}return!1},t.prototype._isEdit=function(t){var r=null,i=e.grid.wijgrid.CSS.editedCellMarker;if(this._isValid())try{r=this.tableCell()}catch(s){}if(!arguments.length)return r?n(r).hasClass(i):this.__isEdit;r&&n(r)[t?"addClass":"removeClass"](i),this.__isEdit=t},t.prototype._setGridView=function(e){this._wijgrid=e},t}();t.cellInfo=r;var i=function(){function t(e,t){if(!e||!t)throw"invalid arguments";this._topLeft=e._clone(),this._bottomRight=t._clone()}return t.prototype.bottomRight=function(){return this._bottomRight},t.prototype.isEqual=function(e){return e&&this._topLeft.isEqual(e.topLeft())&&this._bottomRight.isEqual(e.bottomRight())},t.prototype.topLeft=function(){return this._topLeft},t.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()},t.prototype._isIntersect=function(e){var t,n,r,i;if(e){t=e.bottomRight().rowIndex()-e.topLeft().rowIndex()+1,n=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if(e.topLeft().rowIndex()+t-this._topLeft.rowIndex()<t+n)return r=e.bottomRight().cellIndex()-e.topLeft().cellIndex()+1,i=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1,e.topLeft().cellIndex()+r-this._topLeft.cellIndex()<r+i}return!1},t.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()},t.prototype._clip=function(e,t){typeof t=="undefined"&&(t=!1);var n=this._topLeft._clip(e,t),r=this._bottomRight._clip(e,t);return n||r},t.prototype._clone=function(){return new t(this._topLeft._clone(),this._bottomRight._clone())},t.prototype._containsCellInfo=function(e){return e&&e.cellIndex()>=this._topLeft.cellIndex()&&e.cellIndex()<=this._bottomRight.cellIndex()&&e.rowIndex()>=this._topLeft.rowIndex()&&e.rowIndex()<=this._bottomRight.rowIndex()},t.prototype._containsCellRange=function(e){return e&&this._containsCellInfo(e.topLeft())&&this._containsCellInfo(e.bottomRight())},t.prototype._extend=function(t,n){return t===e.grid.cellRangeExtendMode.column?(this._topLeft.rowIndex(n.topLeft().rowIndex()),this._bottomRight.rowIndex(n.bottomRight().rowIndex())):t===e.grid.cellRangeExtendMode.row&&(this._topLeft.cellIndex(n.topLeft().cellIndex()),this._bottomRight.cellIndex(n.bottomRight().cellIndex())),this},t.prototype._normalize=function(){var e=this._topLeft.cellIndex(),t=this._topLeft.rowIndex(),n=this._bottomRight.cellIndex(),r=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(e,n)),this._topLeft.rowIndex(Math.min(t,r)),this._bottomRight.cellIndex(Math.max(e,n)),this._bottomRight.rowIndex(Math.max(t,r))},t.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()},t.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()},t}();t.cellInfoRange=i,n.extend(n.wijmo.wijgrid,{cellInfo:e.grid.cellInfo,cellInfoRange:e.grid.cellInfoRange})})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function r(t,n){this._rowHeaderSize=22,this.mIsRendered=!1,this._sizesAdjCache={th:0,col:0,subTable:0};if(!t)throw"'wijgrid' must be specified";this._wijgrid=t,this._bounds=n,this._wijgrid.element.addClass(e.grid.wijgrid.CSS.table).addClass(this._wijgrid.options.wijCSS.wijgridTable)}return r.prototype.dispose=function(){this.toggleDOMSelection(!0),this._wijgrid.element.removeClass(e.grid.wijgrid.CSS.table).removeClass(this._wijgrid.options.wijCSS.wijgridTable)},r.prototype.ensureDisabledState=function(){var e="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,t=this._wijgrid.options.disabled,r=this;n.each(this.subTables(),function(i,s){if(s){var o=n(s.element());t?(o.addClass(e),r._wijgrid._setAttr(o,"aria-disabled",!0)):(o.removeClass(e),r._wijgrid._setAttr(o,"aria-disabled",!1))}})},r.prototype.ensureWidth=function(e,t,n){this._setColumnWidth(e,t)},r.prototype.ensureHeight=function(e){},r.prototype.getScrollValue=function(){return null},r.prototype.getVisibleAreaBounds=function(e){throw"not implemented"},r.prototype.getVisibleContentAreaBounds=function(){throw"not implemented"},r.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"},r.prototype.isRendered=function(){return this.mIsRendered},r.prototype.render=function(){this._ensureRenderBounds(),this._preRender(),this._renderContent(),this._postRender()},r.prototype.toggleDOMSelection=function(t){n.each(this.subTables(),function(n,r){(new e.grid.domSelection(r.element())).toggleSelection(t)}),(new e.grid.domSelection(this._wijgrid.outerDiv)).toggleSelection(t)},r.prototype.updateSplits=function(e){throw"not implemented"},r.prototype.getInlineTotalWidth=function(){throw"not implemented"},r.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){if(!this.isRendered())throw"not rendered yet";this._bodyRowsAccessor=new e.grid.rowAccessor(this,e.grid.rowScope.body,0,0)}return this._bodyRowsAccessor},r.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){if(!this.isRendered())throw"not rendered yet";var t=new e.grid.rowAccessor(this,e.grid.rowScope.head,0,0);return t.item(t.length()-1)}return null},r.prototype.footerRow=function(){if(this._wijgrid.options.showFooter){if(!this.isRendered())throw"not rendered yet";var t=new e.grid.rowAccessor(this,e.grid.rowScope.foot,0,0);return t.item(0)}},r.prototype.headerRows=function(){var t;if(!this._headerRowsAccessor){if(!this.isRendered())throw"not rendered yet";t=this._wijgrid.options.showFilter?1:0,this._headerRowsAccessor=new e.grid.rowAccessor(this,e.grid.rowScope.head,0,t)}return this._headerRowsAccessor},r.prototype.rows=function(){if(!this._rowsAccessor){if(!this.isRendered())throw"not rendered yet";this._rowsAccessor=new e.grid.rowAccessor(this,e.grid.rowScope.table,0,0)}return this._rowsAccessor},r.prototype.focusableElement=function(){return this._wijgrid.outerDiv},r.prototype.forEachColumnCell=function(e,t,n){throw"not implemented"},r.prototype.forEachRowCell=function(e,t,n){throw"not implemented"},r.prototype.getAbsoluteCellInfo=function(e,t){throw"not implemented"},r.prototype.getAbsoluteRowIndex=function(e){throw"not implemented"},r.prototype.getCell=function(e,t){throw"not implemented"},r.prototype.getColumnIndex=function(e){throw"not implemented"},r.prototype.getHeaderCell=function(e){throw"not implemented"},r.prototype.getJoinedCols=function(e){throw"not implemented"},r.prototype.getJoinedRows=function(e,t){throw"not implemented"},r.prototype.getJoinedTables=function(e,t){throw"not implemented"},r.prototype.subTables=function(){throw"not implemented"},r.prototype._getMappedScrollMode=function(){var e=this._wijgrid.options.scrollMode,t="auto",n="auto";switch(e){case"horizontal":t="hidden",n="visible";break;case"vertical":t="visible",n="hidden";break;case"both":t="visible",n="visible"}return{vScrollBarVisibility:t,hScrollBarVisibility:n}},r.prototype._postRender=function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none"),this.mIsRendered=!0,this.ensureDisabledState(),this._sizesAdjCache.col=0,this._sizesAdjCache.th=0,this._sizesAdjCache.subTable=0;var e=this._wijgrid._field("visibleLeaves");if(e.length>0){var t=this.getHeaderCell(0),r=this.getJoinedCols(0);t&&(this._sizesAdjCache.th=n(t).leftBorderWidth()+n(t).rightBorderWidth()),r&&r.length&&(this._sizesAdjCache.col=n(r[0]).leftBorderWidth()+n(r[0]).rightBorderWidth())}var i=this.subTables()[0];this._sizesAdjCache.subTable=n(i.element()).leftBorderWidth()+n(i.element()).rightBorderWidth()},r.prototype._preRender=function(){this.mIsRendered=!1},r.prototype._ensureRenderBounds=function(){var e=this._wijgrid._getDataCellsRange(t.dataRowsRangeMode.sketch);this._bounds.start=0,this._bounds.end=e.bottomRight().rowIndex()},r.prototype._renderContent=function(){this._renderCOLS(),this._renderHeader(),this._wijgrid.options.showFilter&&this._renderFilter(),this._renderBody(),this._wijgrid.options.showFooter&&this._renderFooter()},r.prototype._renderCOLS=function(){var e=this._wijgrid._field("visibleLeaves"),t,n,r,i;for(r=0,i=e.length;r<i;r++)t=e[r],n=this._createCol(t,r),this._appendCol(n,t,r)},r.prototype._renderHeader=function(){var t=e.grid.rowType,n=this._wijgrid._columnsHeadersTable(),r,i,s;if(n&&(i=n.length))for(r=0;r<i;r++)s=this._insertEmptyRow(t.header,undefined,r,-1,-1,-1,undefined),this._renderRow(s,null,n[r])},r.prototype._renderFilter=function(){var t=this._insertEmptyRow(e.grid.rowType.filter,undefined,-1,-1,-1,-1,undefined);this._renderRow(t,this._wijgrid._field("visibleLeaves"),null)},r.prototype._renderBody=function(){var t=e.grid.rowType,n=this._wijgrid._field("visibleLeaves"),r=this._wijgrid.sketchTable,i=-1,s=0,o=0,u=this._wijgrid._dataOffset,a=this;this._bounds.start>=0&&this._bounds.end>=0&&this._wijgrid._renderableBoundsCollection().forEachIndex(this._bounds.start,this._bounds.end-this._bounds.start+1,function(e){var t=r.row(e-u),f=t.isDataRow(),l=t.groupByValue,c=a._insertEmptyRow(t.rowType,undefined,o++,f?++i:-1,t.dataItemIndex(),t.dataItemIndex(s),l);a._renderRow(c,n,t)})},r.prototype._renderFooter=function(){var t=this._insertEmptyRow(e.grid.rowType.footer,undefined,-1,-1,-1,-1,undefined);this._renderRow(t,this._wijgrid._field("visibleLeaves"),null)},r.prototype._insertEmptyRow=function(t,n,r,i,s,o,u){var a=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),f=this._insertRow(t,r,a);return n===undefined&&(n=e.grid.renderState.rendering),this._createRowInfo(f,t,n,r,i,s,o,u)},r.prototype._createEmptyCell=function(t,n,r){var i=e.grid.rowType,s=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(t.type,s)},r.prototype._insertRow=function(e,t,n){throw"not implemented"},r.prototype._createCell=function(t,r){var i=e.grid.rowType,s;r||(t===i.header?r=document.createElement("th"):r=document.createElement("td"));if(t!==i.filter){s=document.createElement("div"),s.className=e.grid.wijgrid.CSS.cellContainer+" "+this._wijgrid.options.wijCSS.wijgridCellContainer;if(r.firstChild)while(r.firstChild)s.appendChild(r.firstChild);r.appendChild(s)}return n(r)},r.prototype._appendCell=function(e,t,n){throw"not implemented"},r.prototype._createCol=function(e,t){throw"not implemented"},r.prototype._appendCol=function(e,t,n){throw"not implemented"},r.prototype._renderRow=function(t,n,r){var i=e.grid.rowType,s,o;switch(t.type){case i.filter:this._renderFilterRow(t,n);break;case i.footer:this._renderFooterRow(t,n);break;case i.header:this._renderHeaderRow(t,r);break;case i.data:case i.data|i.dataAlt:this._renderDataRow(t,n,r),s=r.attr(),o=r.style();break;case i.emptyDataRow:case i.groupHeader:case i.groupFooter:this._renderSpannedRow(t,n,r),s=r.attr(),o=r.style();break;default:throw"unknown rowType"}this._rowRendered(t,s,o)},r.prototype._renderCell=function(t,r,i,s,o,u,a,f){var l=this._createEmptyCell(t,o.dataIndex,o),c=t.type===e.grid.rowType.filter?l:n(l[0].firstChild);this._appendCell(t,r,l),s?c.html(i):this._wijgrid.cellFormatter.format(l,c,o,i,t),this._cellRendered(t,l,r,o,u,a,f)},r.prototype._renderDataRow=function(t,n,r){var i,s,o,u,a,f,l,c;for(i=0,s=n.length;i<s;i++){o=n[i],u=o.dataIndex;if(u<0)f=null,l=null,a=null;else{var h=r.cell(u);if(!h||!h.visible())continue;a=this._wijgrid.toStr(o,h.value),f=h.attr(),l=h.style()}c=t.state,o.readOnly&&(c&=~e.grid.renderState.editing),this._renderCell(t,i,a,!1,o,c,f,l)}},r.prototype._renderFilterRow=function(t,n){var r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r],this._renderCell(t,r,e.grid.filterHelper.getSingleValue(s.filterValue),!1,s,t.state)},r.prototype._renderFooterRow=function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)this._renderCell(e,n,"",!1,t[n],e.state)},r.prototype._renderHeaderRow=function(e,t){var n,r,i=0,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.column&&s.column.parentVis&&(s.column.thX=i++,s.column.thY=e.sectionRowIndex,this._renderCell(e,n,s.column.headerText,!1,s.column,e.state,{colSpan:s.colSpan,rowSpan:s.rowSpan}))},r.prototype._renderSpannedRow=function(t,n,r){var i,s,o=Math.min(n.length,r.cellCount());for(i=0;i<o;i++){var u=t.type===e.grid.rowType.emptyDataRow,a=r.cell(i);this._renderCell(t,i,a.html,u,n[i],t.state,a.attr(),a.style())}},r.prototype._cellRendered=function(e,t,n,r,i,s,o){this._wijgrid.cellStyleFormatter.format(t,n,r,e,i,s,o),this._changeCellRenderState(t,i,!1),this._wijgrid._onViewCellRendered(e,t,n,r)},r.prototype._rowRendered=function(t,n,r){this._wijgrid.rowStyleFormatter.format(t,n,r),t.state&=~e.grid.renderState.rendering,this._setRowInfo(t.$rows,t),this._wijgrid._onViewRowRendered(t),t.state&e.grid.renderState.editing&&this._makeRowEditable(t)},r.prototype._makeRowEditable=function(t){var n=this._wijgrid._field("visibleLeaves"),r=new e.grid.cellEditorHelper;if(n)for(var i=0;i<n.length;i++){var s=n[i];if(!s.readOnly&&e.grid.validDataKey(s.dataKey)){var o=t.$rows.children("td, th").eq(i);if(o.length){var u=this.getAbsoluteCellInfo(o[0],!0);this._changeCellRenderState(o,e.grid.renderState.editing,r.cellEditStart(this._wijgrid,u,null))}}}},r.prototype._isBodyRow=function(t){var n=e.grid.rowType,r=t.type;return r&n.data||r===n.groupHeader||r===n.groupFooter||r===n.emptyDataRow},r.prototype._changeRowRenderState=function(e,t,n){n?e.state|=t:e.state&=~t,this._setRowInfo(e.$rows,e)},r.prototype._changeCellRenderState=function(t,n,r){var i=e.grid.dataPrefix,s=this._wijgrid._data$prefix,o=i(t,s,"renderState");return r?(n=o|n,i(t,s,"renderState",n)):(n=o&~n,i(t,s,"renderState",n)),n},r.prototype._adjustWidthArray=function(e,t,r,i){var s=this._sumWidthArray(e),o=this._sumWidthArray(t),u=[],a,f=0,l,c,h=!0;if(s<=r){n.extend(!0,u,e);if(s===r||i)return u;a=r-s}else{n.extend(!0,u,t);if(o>=r)return u;a=r-o}return n.each(u,function(e,t){t.real||f++}),f!==0&&(l=Math.floor(a/f),c=a-l*f,n.each(u,function(e,t){t.real||(t.width+=l,h&&(t.width+=c,h=!1))})),u},r.prototype._getColumnWidth=function(e){var t,r,i,s,o,u,a,f,l,c,h;r=this._wijgrid._field("visibleLeaves")[e];if(r._realWidth!==undefined)t={width:r._realWidth,real:!0};else if(r.isRowHeader)t={width:this._rowHeaderSize,real:!0};else{var p=0;i=this.getJoinedTables(!0,e),s=i[2];for(o=0;o<2;o++){u=i[o];if(u!==null){a=u.element().rows;if(h=a.length){for(c=h-1,l=null;c>=0;c--)if(a[c].cells.length===u.width()){l=a[c];break}l&&(f=l.cells[s],p=Math.max(p,n(f).outerWidth()))}}}t={width:p,real:!1}}return t},r.prototype._setColumnWidth=function(e,t){var r=this.getHeaderCell(e),i=this.getJoinedCols(e),s;if(t){var o=this;r&&(s=t-this._sizesAdjCache.th,s<0&&(s=0),r.style.width=s+"px"),n.each(i,function(e,n){n&&(s=t-o._sizesAdjCache.col,s<0&&(s=0),n.style.width=s+"px")})}},r.prototype._setTableWidth=function(e,t,r,i){var s,o,u=this;n.each(e,function(e,n){n[0].style.tableLayout="fixed",n[0].style.width=t-u._sizesAdjCache.subTable+"px"}),s=e[0].outerWidth(),o=s-t,o!==0&&this._setColumnWidth(i,r-o)},r.prototype._sumWidthArray=function(e,t,r){var i=0;return n.each(e,function(e,n){if(t!==undefined&&r!==undefined&&(e<t||e>r))return!0;i+=n.width}),i},r.prototype._clearBody=function(){n.each(this.subTables(),function(e,t){t.clearSection(2)})},r.prototype._rebuildOffsets=function(){n.each(this.subTables(),function(e,t){t.rebuildOffsets()})},r.prototype._removeBodyRow=function(t,n){typeof n=="undefined"&&(n=!0);var r=e.grid.rowType,i=this._wijgrid._rows(),s,o,u,a,f;t>=0&&t<(o=i.length())&&(u=this._getRowInfo(i.item(t),!1),a=this.getAbsoluteRowIndex(u.$rows[0]),u.$rows.remove(),n&&(f=this.getJoinedTables(!1,a),f[0]&&f[0].removeOffset(f[2]),f[1]&&f[1].removeOffset(f[2])))},r.prototype._insertBodyRow=function(t,n,r,i){var s=this._wijgrid._field("visibleLeaves"),o=e.grid.rowType,u=this._wijgrid._view(),a=this._wijgrid._rows(),f=a.length(),l=t.isDataRow(),c,h,p;if(n<0||n>=f||!n&&n!==0)n=f;return c=this._insertEmptyRow(t.rowType,t.renderState,n,-1,r,i,t.groupByValue),this._renderRow(c,s,t),h=this.getAbsoluteRowIndex(c.$rows[0]),p=this.getJoinedTables(!1,h),p[0]&&p[0].insertOffset(h),p[1]&&p[1].insertOffset(h),c},r.prototype._findRowInfo=function(e){var t=this.bodyRows(),r=0,i=t.length(),s;if(n.isFunction(e))for(r=0;r<i;r++){s=this._getRowInfo(t.item(r));if(e(s)===!0)return s}return null},r.prototype._setRowInfo=function(t,n){var r="$rows"in n,i="data"in n,s,o;r&&(s=n.$rows,delete n.$rows),i&&(o=n.data,delete n.data),e.grid.dataPrefix(t,this._wijgrid._data$prefix,"rowInfo",n),r&&(n.$rows=s),i&&(n.data=o)},r.prototype._getRowInfo=function(t,r){typeof r=="undefined"&&(r=!0);var i=this._wijgrid,s=t[1]?n(t):n(t[0]),o=e.grid.dataPrefix(s,i._data$prefix,"rowInfo"),u;o.$rows=s;if(r&&o.dataItemIndex>=0&&o.type&e.grid.rowType.data)try{o.data=i._getDataItem(o.dataItemIndex)}catch(a){o.data=null}return o},r.prototype._getRowInfoBySketchRowIndex=function(e,t){typeof t=="undefined"&&(t=!0);if(e>=0){var n=this._isRowRendered(e);if(!(n>=0)){var i=this._wijgrid.sketchTable.row(e),s=null;if(i){s=i.getRowInfo();if(t&&s.dataItemIndex>=0&&i.isDataRow())try{s.data=this._wijgrid._getDataItem(s.dataItemIndex)}catch(o){s.data=null}}return s}var r=this.bodyRows().item(n);if(r)return this._getRowInfo(r,t)}return null},r.prototype._createRowInfo=function(t,r,i,s,o,u,a,f){var l,c={type:r,state:i,sectionRowIndex:s,dataRowIndex:o,dataItemIndex:u,virtualDataItemIndex:a,$rows:t?n(t):null};return f!==undefined&&(c.groupByValue=f),u>=0&&r&e.grid.rowType.data&&(c.data=this._wijgrid._getDataItem(u)),c},r.prototype._isRowRendered=function(e){var t=this._wijgrid._renderableBoundsCollection().getRenderedIndex(e);return t>=0&&t>=this._bounds.start&&t<=this._bounds.end?t-this._bounds.start:-1},r}();t.baseView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(e,n){t.call(this,e,n),this._dataTable=null,this._contentArea=null}return __extends(r,t),r.prototype.ensureWidth=function(e,r,i){var s=n(this._dataTable.element()),o=s.width()+r-i;t.prototype.ensureWidth.call(this,e,r,i),this._setTableWidth([s],o,r,e)},r.prototype.getVisibleAreaBounds=function(t){var n=e.grid.bounds(this._dataTable.element(),t);return n},r.prototype.getVisibleContentAreaBounds=function(){return this.getVisibleAreaBounds()},r.prototype.updateSplits=function(e){var t=this,r=this._wijgrid,i=r.options,s=r.element,o=[],u=[],a=[],f=r._field("visibleLeaves"),l=r.outerDiv,c,h;s.css({"table-layout":"",width:"auto"}),n.each(f,function(e,n){var r,s=n.width;if(s||s===0){r=typeof s=="string"&&s.length>1&&s[s.length-1]==="%",r?s=l.width()*parseFloat(s)/100:s=parseFloat(s);if(n.ensurePxWidth||n.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)n._realWidth=s;t._setColumnWidth(e,s)}}),n.each(f,function(e,n){o.push(t._getColumnWidth(e))}),s.css("width","1px"),n.each(f,function(e,n){u.push(t._getColumnWidth(e))}),c=l.width(),a=this._adjustWidthArray(o,u,c,i.ensureColumnsPxWidth),n.each(a,function(e,n){var r=f[e];if(r._realWidth!==undefined){delete r._realWidth;return}t._setColumnWidth(e,n.width)}),s.css("table-layout","fixed"),h=a.length-1;if(h!==-1){var p=l.width()-c;a[h].width+=p,this._setTableWidth([s],this._sumWidthArray(a,0,h),a[h].width,h)}},r.prototype.getInlineTotalWidth=function(){var e=this._dataTable.element(),t=e.style.width;return t&&t!=="auto"?t:""},r.prototype.forEachColumnCell=function(e,t,n){return this._dataTable.forEachColumnCell(e,t,n)},r.prototype.forEachRowCell=function(e,t,n){return this._dataTable.forEachRowCell(e,t,n)},r.prototype.getAbsoluteCellInfo=function(t,n){return new e.grid.cellInfo(this.getColumnIndex(t),t.parentNode.rowIndex,this._wijgrid,!0,n)},r.prototype.getAbsoluteRowIndex=function(e){return e.rowIndex},r.prototype.getCell=function(e,t){var n=this._dataTable.getCellIdx(e,t),r;if(n>=0){r=this.getJoinedRows(t,0);if(r[0])return r[0].cells[n]}return null},r.prototype.getColumnIndex=function(e){return this._dataTable.getColumnIdx(e)},r.prototype.getHeaderCell=function(t){var n=this._wijgrid._field("visibleLeaves")[t],r;return n&&(r=this._wijgrid._headerRows())?e.grid.rowAccessor.getCell(r.item(n.thY),n.thX):null},r.prototype.getJoinedCols=function(e){var t=n(this._dataTable.element()).find("> colgroup");return t.length&&e<t[0].childNodes.length?[t[0].childNodes[e],null]:[null,null]},r.prototype.getJoinedRows=function(e,t){return[this._dataTable.getSectionRow(e,t),null]},r.prototype.getJoinedTables=function(e,t){return[this._dataTable,null,t]},r.prototype.subTables=function(){return[this._dataTable]},r.prototype._preRender=function(){t.prototype._preRender.call(this),this._dataTable=new e.grid.htmlTableAccessor(this._wijgrid.element[0],!0,!0,!0)},r.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content),this._dataTable=new e.grid.htmlTableAccessor(this._wijgrid.element[0]),this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"}),this._wijgrid.element.css("border-collapse","separate"),t.prototype._postRender.call(this)},r.prototype._insertRow=function(t,n,r){var i=e.grid.rowType,s;switch(t){case i.header:case i.filter:s=this._dataTable.ensureTHead();break;case i.footer:s=this._dataTable.ensureTFoot();break;default:s=this._dataTable.ensureTBody()}return r?[s.appendChild(r)]:(n>s.rows.length&&(n=-1),[s.insertRow(n)])},r.prototype._rowRendered=function(e,n,r){var i=e.$rows[0];!i.cells.length&&this._isBodyRow(e)?i.parentNode.removeChild(i):t.prototype._rowRendered.call(this,e,n,r)},r.prototype._appendCell=function(e,t,n){e.$rows[0].appendChild(n[0])},r.prototype._createCol=function(e,t){return[document.createElement("col")]},r.prototype._appendCol=function(e,t,n){this._dataTable.appendCol(e[0])},r}(t.baseView);t.flatView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r=function(t){function r(e,r){t.call(this,e,r),this._verScrollBarSize=18,this._viewTables={},this._splitAreas={},this.element=e.element,this._staticDataRowIndex=e._getStaticIndex(!0),this._staticRowIndex=e._getRealStaticRowIndex(),this._staticColumnIndex=e._getRealStaticColumnIndex(),this._staticAllColumnIndex=this._staticColumnIndex===-1?-1:e._field("visibleLeaves")[this._staticColumnIndex].leavesIdx,this._mouseWheelHandler=n.proxy(this._onMouseWheel,this)}return __extends(r,t),r.DEFAULT_ROW_HEIGHT_VIRTUAL=19,r.prototype.dispose=function(){t.prototype.dispose.call(this),this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)},r.prototype.ensureWidth=function(e,r,i){var s=this._wijgrid,o=s.options,u=this._staticColumnIndex,a=e<=u,f=n(this._viewTables.nw.element()),l=n(this._viewTables.ne.element()),c=n(this._viewTables.sw.element()),h=n(this._viewTables.se.element()),p=a?[f,c]:[l,h],d=(a?f.width():l.width())+r-i,v=this.getScrollValue();this._destroySuperPanel(),t.prototype.ensureWidth.call(this,e,r,i),this._setTableWidth(p,d,r,e);try{u>=0?o.splitDistanceX=f[0].offsetWidth:o.splitDistanceX=0}catch(m){}this._updateSplitAreaBounds(0),this._adjustRowsHeights();try{this._staticRowIndex>=0?o.splitDistanceY=Math.max(f[0].offsetHeight,l[0].offsetHeight):o.splitDistanceY=0}catch(m){}this._updateSplitAreaBounds(1),this.refreshPanel(v);var g=s._UIFrozener();g&&g.refresh()},r.prototype.ensureHeight=function(e){var t,r=this._wijgrid,i=r.options,s=n(this._viewTables.nw.element()),o=n(this._viewTables.ne.element()),u=n(this._viewTables.sw.element()),a=n(this._viewTables.se.element()),f=this.getScrollValue(),l;this._destroySuperPanel(),arguments.length>0&&(t=this.getJoinedRows(e,2),this._setRowHeight(t,this._getRowHeight(t))),a.css("height",""),u.css("height",""),l=Math.max(a.height(),u.height()),a.height(l),u.height(l);try{this._staticRowIndex>=0?i.splitDistanceY=Math.max(s[0].offsetHeight,o[0].offsetHeight):i.splitDistanceY=0}catch(c){}this._updateSplitAreaBounds(1),this.refreshPanel(f);var h=r._UIFrozener();h&&h.refresh()},r.prototype.getScrollValue=function(){var e=this._getSuperPanel();return e?{x:e.options.hScroller.scrollValue,y:e.options.vScroller.scrollValue}:null},r.prototype.getPanelContentWrapper=function(){return this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first")},r.prototype.getVisibleAreaBounds=function(t){var n=e.grid.bounds(this.getPanelContentWrapper(),t);return n||(n=e.grid.bounds(this._wijgrid.outerDiv,t)),n},r.prototype.getVisibleContentAreaBounds=function(){var t=this.getVisibleAreaBounds(),n=e.grid.bounds(this._viewTables.nw.element())||{},r=e.grid.bounds(this._viewTables.ne.element())||{},i=e.grid.bounds(this._viewTables.sw.element())||{},s=e.grid.bounds(this._viewTables.se.element())||{},o={top:t.top,left:t.left,width:Math.max(n.width+r.width,i.width+s.width),height:Math.max(n.height+i.height,r.height+s.height)};return o.width=Math.min(t.width,o.width),o.height=Math.min(t.height,o.height),o},r.prototype.getRowAreaHeight=function(){var e=this.getPanelContentWrapper();e.length==0&&(e=this._wijgrid.outerDiv);var t=e.height(),r=this._wijgrid.options.splitDistanceY;r&&(t-=r);if(this._wijgrid.options.showFooter){var i,s=this.isRendered()&&(i=this.footerRow())?n(i).height():this.getDefaultRowHeight();t-=s}return t},r.prototype.getVirtualPageSize=function(e){typeof e=="undefined"&&(e=!0);var t=this._wijgrid.rowOuterHeight&&this._wijgrid.rowOuterHeight>0?this._wijgrid.rowOuterHeight:this.getDefaultRowHeight(),n=this.getRowAreaHeight()/t;return e?Math.ceil(n):Math.floor(n)},r.prototype.getFixedAreaVisibleBounds=function(){var t=this.getVisibleAreaBounds(),n=e.grid.bounds(this._splitAreas.ne),r=e.grid.bounds(this._splitAreas.nw),i=null,s=null;if(n.height||r.height)i={left:t.left,top:t.top,width:t.width,height:Math.min(n.height||r.height,t.height)};return r.width&&(s={left:r.left,top:t.top,width:Math.min(r.width,t.width),height:t.height}),[i,s]},r.prototype.getDefaultRowHeight=function(){return this._wijgrid.options.rowHeight>=0?this._wijgrid.options.rowHeight:r.DEFAULT_ROW_HEIGHT_VIRTUAL},r.prototype.refreshPanel=function(t){var r=this,i=this._wijgrid,s=i.options,o=this._getGridWidth(s.scrollMode),u=this._getMappedScrollMode(),a=this._testNeedVBar(i.outerDiv,i.element,n(this._viewTables.ne.element()),s.scrollMode,i._autoHeight),f=a&&!h,l=t?t.x:null,c=t?t.y:null,h=n.support.isTouchEnabled&&n.support.isTouchEnabled(),p=i._rows().item(0);i.rowOuterHeight=p&&p[0]?n(p[0]).outerHeight():this.getDefaultRowHeight(),this._splitAreas.ne.width(o-s.splitDistanceX-(f?this._verScrollBarSize:0)),s.staticColumnsAlignment==="right"&&(this._splitAreas.nw.css({left:"",right:f?this._verScrollBarSize:0}),this._splitAreas.sw.css({left:"",right:f?this._verScrollBarSize:0})),this._scroller.data("wijmo-wijsuperpanel")?this._scroller.wijsuperpanel("paintPanel"):(this._wijgrid._allowVirtualScrolling()&&(this.vsUI=new e.grid.uiVirtualScroller(i,this._splitAreas.se,s.splitDistanceY,i.rowOuterHeight)),this._scroller.wijsuperpanel({disabled:i.options.disabled,scroll:n.proxy(this._onScroll,this),bubbleScrollingEvent:!0,customScrolling:this._wijgrid._allowVirtualScrolling(),vScroller:{scrollBarVisibility:u.vScrollBarVisibility,scrollValue:t?t.y:null},hScroller:{scrollBarVisibility:u.hScrollBarVisibility,scrollValue:t?t.x:null},hScrollerActivating:function(e,t){var n;if(i._autoHeight){n=i.element.height()+s.splitDistanceY-t.contentLength;if(n>0)return r._scroller.height(r._scroller.height()+n),r._scroller.wijsuperpanel("paintPanel"),!1}r._splitAreas.sw.height(t.contentLength-s.splitDistanceY)}}),this._wijgrid._allowVirtualScrolling()&&this.vsUI.attach(this._scroller)),this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5),this._wijgrid._allowVirtualScrolling()&&this._wijgrid._handleVirtualScrolling(this._bounds.start)},r.prototype.scrollTo=function(e){if(!e.tableCell())return;var t=this._wijgrid,r=t.options,i=this._getSuperPanel(),s=e.tableCell(),o=s.nodeType?n(s):s,u=null,a=null;if(i&&o.is(":visible")){var f=i.getContentElement(),l=f.parent(),c=parseInt((f.css("left")+"").replace("px",""),10)*-1,h=parseInt((f.css("top")+"").replace("px",""),10)*-1,p=l.outerWidth()-r.splitDistanceX,d=l.outerHeight()-r.splitDistanceY,v=o.position(),m=v.left,g=v.top,y=o.outerWidth(),b=o.outerHeight(),w=t._getStaticIndex(!0),E=t._getStaticIndex(!1),S=e.rowIndex(),x=e.cellIndex();S<=w?x<=E?(u=0,a=0):(m+=c,m+y>c+p&&(c=u=m+y-p),m<c&&(u=m),a=0):x<=E?(g+=this._splitAreas.sw.scrollTop(),g+b>h+d&&(h=a=g+b-d),g<h&&(a=g),u=0):(m-=r.splitDistanceX,g+b>h+d&&(h=a=g+b-d),m+y>c+p&&(c=u=m+y-p),g<h&&(a=g),m<c&&(u=m)),u!==null&&i.hScrollTo(u),a!==null&&(this._wijgrid._allowVirtualScrolling()||i.vScrollTo(a))}},r.prototype.updateSplits=function(t){var r=this._wijgrid,i=r.options,s,o=this,u=[],a=[],f=[],l=this._staticColumnIndex,c,h=i.scrollMode,p=r._field("visibleLeaves"),d=n(this._viewTables.se.element()),v=n(this._viewTables.ne.element()),m=n(this._viewTables.sw.element()),g=n(this._viewTables.nw.element()),y=r.outerDiv,b,w,E;this._destroySuperPanel(),y.unbind("mousewheel",this._mouseWheelHandler);if((b=o._viewTables.se.element().tBodies)&&(b=b[0])){E=!1;for(w=0;w<b.rows.length;w++)if(!n(b.rows[w]).hasClass(e.grid.wijgrid.CSS.groupHeaderRow)){E=!0;break}E||r.element.css("width","100%")}n.each([d,v,m,g],function(e,t){t.css({"table-layout":"",width:""})}),n.each(p,function(e,t){var n,r=t.width;if(r||r===0){n=typeof r=="string"&&r.length>1&&r[r.length-1]==="%",n?r=y.width()*parseFloat(r)/100:r=parseFloat(r);if(t.ensurePxWidth||t.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)t._realWidth=r;o._setColumnWidth(e,r)}}),n.each(p,function(e,t){f.push(o._getColumnWidth(e))}),n.each([g,v,m,d],function(e,t){t.css({width:"1px"})}),n.each(p,function(e,t){a.push(o._getColumnWidth(e))}),s=y.width(),u=this._adjustWidthArray(f,a,s,i.ensureColumnsPxWidth),n.each(u,function(e,t){var n=p[e];if(n._realWidth!==undefined){delete n._realWidth;return}o._setColumnWidth(e,t.width)}),l>=0&&(c=l,this._setTableWidth([g,m],this._sumWidthArray(u,0,c),u[c].width,c));try{l>=0?i.splitDistanceX=g[0].offsetWidth:i.splitDistanceX=0}catch(S){}this._updateSplitAreaBounds(0),i.ensureColumnsPxWidth||v.parent().width(s-i.splitDistanceX),c=u.length-1,c!==-1&&this._setTableWidth([v,d],this._sumWidthArray(u,l+1,c),u[c].width,c),this._adjustRowsHeights();try{this._staticRowIndex>=0?i.splitDistanceY=Math.max(g[0].offsetHeight,v[0].offsetHeight):i.splitDistanceY=0}catch(S){}this._updateSplitAreaBounds(1);if(!i.ensureColumnsPxWidth&&this._testNeedVBar(r.outerDiv,d,v,h,r._autoHeight)){s-=this._verScrollBarSize,u=this._adjustWidthArray(f,a,s,i.ensureColumnsPxWidth),n.each(u,function(e,t){t.real||o._setColumnWidth(e,t.width)}),l>=0&&(c=l,this._setTableWidth([g,m],this._sumWidthArray(u,0,c),u[c].width,c));try{l>=0?i.splitDistanceX=g[0].offsetWidth:i.splitDistanceX=0}catch(S){}this._updateSplitAreaBounds(0),v.parent().width(s-i.splitDistanceX),c=u.length-1,c!==-1&&this._setTableWidth([v,d],this._sumWidthArray(u,l+1,c),u[c].width,c),this._adjustRowsHeights();try{this._staticRowIndex>=0?i.splitDistanceY=Math.max(g[0].offsetHeight,v[0].offsetHeight):i.splitDistanceY=0}catch(S){}this._updateSplitAreaBounds(1)}this.refreshPanel(t),y.bind("mousewheel",n.proxy(this._mouseWheelHandler,this))},r.prototype.getInlineTotalWidth=function(){if(this._scroller){var e=this._scroller.find(".wijmo-wijsuperpanel-statecontainer");if(e.length){var t=e[0].style.width;if(t&&t!=="auto")return t}}return""},r.prototype._clearBody=function(){t.prototype._clearBody.call(this)},r.prototype.bodyRows=function(){var e=t.prototype.bodyRows.call(this);return e},r.prototype.forEachColumnCell=function(e,t,n){var r=this.getJoinedTables(!0,e),i,s;if(r[0]!==null){i=r[2],s=r[0].forEachColumnCell(i,t,n);if(s!==!0)return s;if(r[1]!==null){s=r[1].forEachColumnCell(i,t,n);if(s!==!0)return s}}return!0},r.prototype.forEachRowCell=function(e,t,n){var r=this.getJoinedTables(!1,e),i=r[0],s=r[1],o,u;if(i!==null){o=r[2];if(o<i.element().rows.length){u=i.forEachRowCell(o,t,n);if(u!==!0)return u}if(s!==null&&o<s.element().rows.length){u=s.forEachRowCell(o,t,n);if(u!==!0)return u}}return!0},r.prototype.getAbsoluteCellInfo=function(t,n){return new e.grid.cellInfo(this.getColumnIndex(t),this.getAbsoluteRowIndex(t.parentNode),this._wijgrid,!0,n)},r.prototype.getAbsoluteRowIndex=function(e){var t=e.rowIndex,n=e.parentNode;while(n&&n.tagName&&n.tagName.toLowerCase()!=="table")n=n.parentNode;return n===this._viewTables.nw.element()||n===this._viewTables.ne.element()?t:t+this._staticRowIndex+1},r.prototype.getCell=function(e,t){var n=this.getJoinedTables(!1,t),r,i,s,o,u;if(n[0]!==null){r=this.getJoinedTables(!0,e);if(r[0]!==null){i=n[2],s=r[2],o=null,n[1]!==null?o=e===s?n[0]:n[1]:o=n[0],u=o.getCellIdx(s,i);if(u>=0)return o.element().rows[i].cells[u]}}return null},r.prototype.getColumnIndex=function(e){var t=null,n=null,r=!1,i;for(t=e.parentNode;t.tagName.toLowerCase()!=="table";t=t.parentNode);if(t!==null){t===this._viewTables.nw.element()?n=this._viewTables.nw:t===this._viewTables.ne.element()?(n=this._viewTables.ne,r=!0):t===this._viewTables.sw.element()?n=this._viewTables.sw:t===this._viewTables.se.element()&&(n=this._viewTables.se,r=!0);if(n!==null)return i=n.getColumnIdx(e),r&&(i+=this._staticColumnIndex+1),i}return-1},r.prototype.getHeaderCell=function(t){var n=this._wijgrid._field("visibleLeaves")[t],r;return n&&(r=this._wijgrid._headerRows())?e.grid.rowAccessor.getCell(r.item(n.thY),n.thX):null},r.prototype.getJoinedCols=function(e){var t=[],r=this.getJoinedTables(!0,e),i=r[2];return r.splice(r.length-1,1),n.each(r,function(e,r){t.push(r?n(r.element()).find("col")[i]:null)}),t},r.prototype.getJoinedRows=function(e,t){var n=null,r=null,i=null,s=null,o=this._staticRowIndex,u=this._staticColumnIndex,a=this._wijgrid._field("visibleLeaves").length-1,f=this._rowsCountRaw()-1,l=o===f,c=o<0,h=!l&&!c,p=0;if(l||h)u>=0&&u<a?(i=this._viewTables.nw,s=this._viewTables.ne):i=u<0?this._viewTables.ne:this._viewTables.nw,p=i.getSectionLength(t),e<p&&(n=i.getSectionRow(e,t),s!==null&&(r=s.getSectionRow(e,t)));if(c||h&&n===null)c||(e-=p),u>=0&&u<a?(i=this._viewTables.sw,s=this._viewTables.se):i=u<0?this._viewTables.se:this._viewTables.sw,n=i.getSectionRow(e,t),s!==null&&(r=s.getSectionRow(e,t));return n===null&&r===null?null:[n,r]},r.prototype.getJoinedTables=function(e,t){var n=null,r=null,i=t,s=this._wijgrid,o=this._staticRowIndex,u=this._staticColumnIndex;return e?(t<=u?(n=this._viewTables.nw,r=this._viewTables.sw):(n=this._viewTables.ne,r=this._viewTables.se,i-=u+1),o<0&&(n=null),o===this._rowsCountRaw()-1&&(r=null)):(t<=o?(n=this._viewTables.nw,r=this._viewTables.ne):(n=this._viewTables.sw,r=this._viewTables.se,i-=o+1),u<0&&(n=null),u===s._field("leaves").length-1&&(r=null)),n===null&&(n=r,r=null),[n,r,i]},r.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]},r.prototype._getGridWidth=function(e){var t=this._wijgrid,r=t.element.outerWidth(!0)+t.options.splitDistanceX,i=t.outerDiv.innerWidth();return this._testNeedVBar(t.outerDiv,t.element,n(this._viewTables.ne.element()),e,t._autoHeight)&&(r+=this._verScrollBarSize),r>i&&(r=i),r},r.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null},r.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){var e=this.getVirtualPageSize();this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.end=this._bounds.start+e-1;if(this._wijgrid._serverSideVirtualScrolling()){var n=this._bounds.end-this._bounds.start+1-this._wijgrid.sketchTable.count();n>0&&(this._bounds.end-=n)}this._wijgrid._ensureRenderableBounds(this._bounds);if(this._bounds.start>0&&this._bounds.end===this._wijgrid.sketchTable.count()-1){e=this.getVirtualPageSize(!1);var r=this._bounds.end-this._bounds.start+1;r<e&&(this._bounds.start=this._bounds.end-e+1),this._wijgrid._ensureRenderableBounds(this._bounds),this._bounds.start!==this._wijgrid._scrollingState.index&&(this._wijgrid._scrollingState.index=this._wijgrid._scrollingState.y=this._bounds.start)}}else t.prototype._ensureRenderBounds.call(this)},r.prototype._renderContent=function(){t.prototype._renderContent.call(this)},r.prototype._preRender=function(){t.prototype._preRender.call(this);var r=document.createDocumentFragment(),i=e.grid.htmlTableAccessor,s=e.grid.wijgrid.CSS,o=this._wijgrid.options.wijCSS;this._wijgrid.outerDiv.wrapInner('<div class="'+s.fixedView+" "+o.wijgridFixedView+'"><div class="'+s.scroller+" "+o.wijgridScroller+'"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>'),this._scroller=this._wijgrid.outerDiv.find("."+s.scroller),this._scroller.css("padding",0),this._scroller.after(this._splitAreas.nw=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.ne=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._scroller.after(this._splitAreas.sw=n('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')),this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first"),this._viewTables={nw:new i(r.appendChild(document.createElement("table")),!0,!0,!0),ne:new i(r.appendChild(document.createElement("table")),!0,!0,!0),sw:new i(r.appendChild(document.createElement("table")),!0,!0,!0),se:new i(r.appendChild(this._wijgrid.element[0]),!0,!0,!0)}},r.prototype._postRender=function(){var r,i,s,o,u=e.grid.htmlTableAccessor,a=this;this._viewTables={nw:new u(r=this._viewTables.nw.element()),ne:new u(i=this._viewTables.ne.element()),sw:new u(s=this._viewTables.sw.element()),se:new u(o=this._viewTables.se.element())},this._splitAreas.nw.empty().append(r),this._splitAreas.ne.empty().append(i),this._splitAreas.sw.empty().append(s),this._splitAreas.se.empty().append(o),n.each(this._viewTables,function(t,r){var i=n(r.element());a._wijgrid._setAttr(i,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"}),i.addClass(e.grid.wijgrid.CSS.table).addClass(a._wijgrid.options.wijCSS.wijgridTable).css("border-collapse","separate").find("> tbody").addClass(a._wijgrid.options.wijCSS.content)}),t.prototype._postRender.call(this)},r.prototype._rowsCountRaw=function(){var e=this._viewTables.nw.element(),t=this._viewTables.ne.element(),n=this._viewTables.sw.element(),r=this._viewTables.se.element(),i;return i=Math.max(e.rows.length,t.rows.length)+Math.max(n.rows.length,r.rows.length),i},r.prototype._createCol=function(e,t){return[document.createElement("col"),document.createElement("col")]},r.prototype._appendCol=function(e,t,n){n<=this._staticColumnIndex?(this._viewTables.nw.appendCol(e[0]),this._viewTables.sw.appendCol(e[1])):(this._viewTables.ne.appendCol(e[0]),this._viewTables.se.appendCol(e[1]))},r.prototype._insertRow=function(t,n,r){var i=e.grid.rowType,s,o,u=this._viewTables;switch(t){case i.header:case i.filter:s=u.nw.ensureTHead(),o=u.ne.ensureTHead();break;case i.footer:s=u.sw.ensureTFoot(),o=u.se.ensureTFoot();break;default:n<=this._staticDataRowIndex?(s=u.nw.ensureTBody(),o=u.ne.ensureTBody()):(n-=this._staticDataRowIndex+1,s=u.sw.ensureTBody(),o=u.se.ensureTBody())}return r?[s.appendChild(r),o.appendChild(r.cloneNode(!1))]:[s.insertRow(n>s.rows.length?-1:n),o.insertRow(n>o.rows.length?-1:n)]},r.prototype._rowRendered=function(e,r,i){var s=e.$rows[0],o=e.$rows[1];!s.cells.length&&this._isBodyRow(e)&&(s.parentNode.removeChild(s),s=null),!o.cells.length&&this._isBodyRow(e)&&(o.parentNode.removeChild(o),o=null);if(s||o){if(!s||!o)e.$rows=s?n(s):n(o);t.prototype._rowRendered.call(this,e,r,i)}},r.prototype._appendCell=function(t,n,r){var i=t.type!==e.grid.rowType.header?this._staticColumnIndex:this._staticAllColumnIndex;n<=i?t.$rows[0].appendChild(r[0]):t.$rows[1].appendChild(r[0])},r.prototype._getRowHeight=function(e,t){if(e[0]&&e[1]){var r=e[0],i=e[1],s=n(r),o=n(i),u,a,f,l=function(e){var t,r=e[0],i;for(t=0;t<r.cells.length;t++){i=r.cells[t];if(!i.rowSpan||i.rowSpan===1)return n(i).outerHeight()}return e.height()};return(f=n.data(r,"customHeight"))?u=a=parseInt(f):(s.css("height",""),o.css("height",""),t?(u=l(s),a=l(o)):(u=s.height(),a=o.height())),Math.max(u,a)}return null},r.prototype._setRowHeight=function(e,t){if(e[0]&&e[1]){var r=[n(e[0]),n(e[1])],i;if(t===null)return;t+=1,n.each(r,function(e,n){n.height(t),i=t-n.height(),i&&n.height(t+i)})}},r.prototype._adjustRowHeight=function(){var e=this._wijgrid,t=this._staticColumnIndex,n=e._field("visibleLeaves").length-1,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=[];if(t>-1&&t<n){r=this._staticRowIndex,i=this._rowsCountRaw()-1,s=this._viewTables;if(r>-1&&r<=i){o=s.ne.element(),u=o.parentNode,a=s.nw.element(),f=a.parentNode,g=a.rows,y=o.rows,d=g.length;for(v=0;v<d;v++)b.push(this._getRowHeight([g[v],y[v]],!0))}if(r>=-1&&r<i){l=s.se.element(),c=l.parentNode,h=s.sw.element(),p=h.parentNode,g=h.rows,y=l.rows,d=g.length;for(v=0;v<d;v++)b.push(this._getRowHeight([g[v],y[v]]))}r>-1&&r<=i&&(f.removeChild(a),u.removeChild(o)),r>=-1&&r<i&&(p.removeChild(h),c.removeChild(l));if(r>-1&&r<=i){g=a.rows,y=o.rows,d=g.length;for(v=0,m=0;v<d;v++)this._setRowHeight([g[v],y[v]],b[m++])}if(r>=-1&&r<i){g=h.rows,y=l.rows,d=g.length;for(v=0;v<d;v++)this._setRowHeight([g[v],y[v]],b[m++])}r>-1&&r<=i&&(f.appendChild(a),u.appendChild(o)),r>=-1&&r<i&&(p.appendChild(h),c.appendChild(l))}},r.prototype._adjustRowsHeights=function(){var e=n(this._viewTables.sw.element()),t=n(this._viewTables.se.element()),r;t.css("height",""),e.css("height",""),this._adjustRowHeight(),r=Math.max(t.height(),e.height()),e.height(r),t.height(r)},r.prototype._destroySuperPanel=function(){this._scroller.data("wijmo-wijsuperpanel")&&(this.vsUI&&this.vsUI.dispose(),this._scroller.wijsuperpanel("destroy"))},r.prototype._onScroll=function(e,t){var n=this._getSuperPanel();this._wijgrid._allowVirtualScrolling()?t.dir==="h"&&(this._setFixedAreaPosition(n.getContentElement(),t.dir,t.position,t.animationOptions,!1),this._setFixedAreaPosition(this._splitAreas.ne,t.dir,t.position,t.animationOptions,!0)):this._setFixedAreaPosition(t.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,t.dir,t.position,t.animationOptions,!0),this._wijgrid._trackScrollingPosition(n.options.hScroller.scrollValue,n.options.vScroller.scrollValue)},r.prototype._onMouseWheel=function(t,r){var i,s=r>0?"top":"bottom",o=!1,u;this._wijgrid._canInteract()&&(i=this.getFixedAreaVisibleBounds(),n.each(i,function(n,r){if(r&&e.grid.isOver(t.pageY,t.pageX,r.top,r.left,r.height,r.width))return o=!0,!1}),o&&this._scroller.data("wijmo-wijsuperpanel")&&(u=this._scroller.wijsuperpanel("option","vScroller").scrollValue,this._scroller.wijsuperpanel("doScrolling",s),u!==this._scroller.wijsuperpanel("option","vScroller").scrollValue&&(t.stopPropagation(),t.preventDefault())))},r.prototype._setFixedAreaPosition=function(e,t,n,r,i){var s={},o;t==="h"?o=i?"scrollLeft":"left":o=i?"scrollTop":"top",i||(n=-n),r?(s[o]=n,e.animate(s,r)):i?e[0][o]=n:e.css(o,n)},r.prototype._testNeedVBar=function(e,t,n,r,i){var s=!1,o=this._wijgrid,u=n.width()+o.options.splitDistanceX,a=t.height()+o.options.splitDistanceY,f=e.width(),l=e.height(),c,h=0,p=0;o.$superPanelHeader!==null&&(h=o.$superPanelHeader.outerHeight(!0)),o.$bottomPagerDiv!==null&&(p=o.$bottomPagerDiv.outerHeight(!0)),c=l-h-p;switch(r){case"both":case"vertical":s=!0;break;case"auto":s=a>c||!i&&u>f&&a>c-this._verScrollBarSize;if(!s&&this._wijgrid._allowVirtualScrolling()){var d=o._view().getVirtualPageSize();s=d>0&&d<o._totalRowsCount()}}return s},r.prototype._updateSplitAreaBounds=function(e){var t=this._wijgrid,n=t.options,r,i,s=0,o=0;if(e===0||e===2)this._splitAreas.nw.width(n.splitDistanceX),this._splitAreas.sw.width(n.splitDistanceX),t.options.staticColumnsAlignment==="right"?(this._splitAreas.se.css("marginRight",n.splitDistanceX),this._splitAreas.ne.css("marginRight",n.splitDistanceX)):(this._splitAreas.se.css("marginLeft",n.splitDistanceX),this._splitAreas.ne.css("marginLeft",n.splitDistanceX));if(e===1||e===2)this._scroller.css("height",""),this._splitAreas.se.css("marginTop",0),r=t.outerDiv.height(),t._autoHeight?this._scroller.height(r+n.splitDistanceY):this._scroller.height(r),this._splitAreas.nw.height(n.splitDistanceY),this._splitAreas.ne.height(n.splitDistanceY),t.$superPanelHeader!==null&&(s=t.$superPanelHeader.outerHeight(!0)),t.$bottomPagerDiv!==null&&(o=t.$bottomPagerDiv.outerHeight(!0)),i=r-s-o,t.$superPanelHeader!==null&&(this._splitAreas.nw.css("top",s+"px"),this._splitAreas.ne.css("top",s+"px")),t._autoHeight?this._splitAreas.sw.height(i):this._splitAreas.sw.height(i-n.splitDistanceY),this._splitAreas.sw.css("top",n.splitDistanceY+s),this._splitAreas.se.css("marginTop",n.splitDistanceY)},r}(t.baseView);t.fixedView=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function r(e){this._updates=0,this._selectedColumns=null,this._selectedRows=null,this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!e)throw"invalid arguments";this._wijgrid=e,this._addedCells=new i(e),this._removedCells=new i(e),this._selectedCells=new i(e),this._addedDuringCurTransactionCells=new i(e)}return r.prototype.selectedCells=function(){return this._selectedCells},r.prototype.addColumns=function(e,t){!t&&t!==0&&(t=e),this.addRange(e,0,t,16777215)},r.prototype.addRange=function(t,n,r,i){if(!t&&arguments.length===1)throw"invalid argument";var s=arguments.length===4?new e.grid.cellInfoRange(new e.grid.cellInfo(t,n),new e.grid.cellInfo(r,i)):t._clone();s._normalize();if(!s._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._field("currentCell")),this._selectRange(s,!1,!0,e.grid.cellRangeExtendMode.none,null),this.endUpdate()},r.prototype.addRows=function(e,t){!t&&t!==0&&(t=e),this.addRange(0,e,16777215,t)},r.prototype.removeRange=function(t,n,r,i){if(!t&&arguments.length===1)throw"invalid argument";var s=arguments.length===4?new e.grid.cellInfoRange(new e.grid.cellInfo(t,n),new e.grid.cellInfo(r,i)):t._clone();s._normalize();if(!s._isValid())throw"invalid argument";this.beginUpdate(),this._startNewTransaction(this._wijgrid._field("currentCell")),this._clearRange(s,e.grid.cellRangeExtendMode.none),this.endUpdate()},r.prototype.removeColumns=function(e,t){!t&&t!==0&&(t=e),this.removeRange(e,0,t,16777215)},r.prototype.removeRows=function(e,t){!t&&t!==0&&(t=e),this.removeRange(0,e,16777215,t)},r.prototype.clear=function(){this.beginUpdate(),this._removedCells._clear(),this._removedCells._addFrom(this._selectedCells),this.endUpdate()},r.prototype.selectAll=function(){this.beginUpdate(),this._selectRange(this._wijgrid._getDataCellsRange(t.dataRowsRangeMode.sketch),!1,!1,e.grid.cellRangeExtendMode.none,null),this.endUpdate()},r.prototype.beginUpdate=function(){this._updates++},r.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length())this._selectedColumns!==null&&this._selectedColumns.UnderlyingDataChanged(),this._selectedRows!==null&&this._selectedRows.UnderlyingDataChanged(),this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells});this._addedCells=new e.grid.cellInfoOrderedCollection(this._wijgrid),this._removedCells._clear()}}},r.prototype._multipleRangesAllowed=function(){var e=this._wijgrid.options.selectionMode;return e&&((e=e.toLowerCase())==="multicolumn"||e==="multirow"||e==="multirange")},r.prototype._anchorCell=function(){return this.__anchorCell},r.prototype._startNewTransaction=function(t){t&&(this.__anchorCell=t._clone(),this._addedDuringCurTransactionCells=new e.grid.cellInfoOrderedCollection(this._wijgrid))},r.prototype._clearRange=function(e,n){var r=this._wijgrid.options.selectionMode.toLowerCase(),i,s,o,u,a,f,l,c,h,p=this._wijgrid._getDataCellsRange(t.dataRowsRangeMode.sketch);if(e._isValid()&&r!=="none"&&this._selectedCells.length()>0){i=e._clone(),i._normalize(),i._clip(p);if(!e._isValid())return;i._extend(this._extend_rules[r][n],p),this.beginUpdate();for(l=0,c=this._selectedCells.length();l<c;l++)h=this._selectedCells.item(l),i._containsCellInfo(h)&&this._removedCells._add(h);this.endUpdate()}},r.prototype._selectRange=function(n,r,i,s,o){var u=this._wijgrid.options.selectionMode.toLowerCase(),a,f=this._wijgrid._getDataCellsRange(t.dataRowsRangeMode.sketch);if(u!=="none"&&n._isValid()){a=n._clone(),a._normalize(),a._clip(f);if(!a._isValid())return;this.beginUpdate(),this._multipleRangesAllowed()?r||i?i&&(this._removedCells._clear(),this._removedCells._addFrom(this._addedDuringCurTransactionCells)):this.clear():this.clear();switch(u){case"singlecell":case"singlecolumn":case"singlerow":a=o===null?new e.grid.cellInfoRange(a.topLeft(),a.topLeft()):new e.grid.cellInfoRange(o,o)}a._extend(this._extend_rules[u][s],f),this.doRange(a,!0),this.endUpdate()}},r.prototype._ensureSelection=function(){var e=this._wijgrid._view(),t=-2,n;for(var r=0;r<this._selectedCells.length();r++){var i=this._selectedCells.item(r);i._isRendered()&&(t!==i.rowIndex()&&(n=i.row(),t=i.rowIndex()),this.selectCell(i,n,e,!0))}},r.prototype.doSelection=function(){var t=this._wijgrid._view(),n,r,i,s,o,u,a=e.grid.renderState,f,l,c=-1;for(n=0,r=this._removedCells.length();n<r;n++)i=this._removedCells.item(n),this._addedCells.indexOf(i)<0?(c!==i.rowIndex()&&(f=i.row(),c=i.rowIndex()),this.selectCell(i,f,t,!1),this._selectedCells._remove(i),this._addedDuringCurTransactionCells._remove(i)):(this._removedCells._removeAt(n),n--,r--);c=-1;for(n=0,r=this._addedCells.length();n<r;n++)i=this._addedCells.item(n),u=this._selectedCells.indexOf(i),u<0?(c!==i.rowIndex()&&(f=i.row(),c=i.rowIndex()),this.selectCell(i,f,t,!0),this._selectedCells._insertUnsafe(i,~u),this._addedDuringCurTransactionCells._add(i)):(this._addedCells._removeAt(n),n--,r--)},r.prototype.selectCell=function(t,r,i,s){if(t._isRendered()){var o=this._wijgrid._viewPortBounds(),u=i.getCell(t.cellIndexAbs(),t.rowIndexAbs());if(u){var a=n(u),f=i._changeCellRenderState(a,e.grid.renderState.selected,s===!0);this._wijgrid.cellStyleFormatter.format(a,t.cellIndex(),t.column(),r,f)}}},r.prototype.doRange=function(t,n){var r=t.topLeft().cellIndex(),i=t.topLeft().rowIndex(),s=t.bottomRight().cellIndex(),o=t.bottomRight().rowIndex(),u,a,f,l,c=this._wijgrid._view(),h,p,d=this._wijgrid._viewPortBounds();if(n){u=this._addedCells.length(),p=this._wijgrid._rows();for(a=i;a<=o;a++){h=c._getRowInfoBySketchRowIndex(a);if(h.type&e.grid.rowType.data)for(f=r;f<=s;f++)l=new e.grid.cellInfo(f,a),u===0?this._addedCells._appendUnsafe(l):this._addedCells._add(l)}}else{u=this._removedCells.length();for(a=i;a<=o;a++)for(f=r;f<=s;f++)l=new e.grid.cellInfo(f,a),u===0?this._removedCells._appendUnsafe(l):this._removedCells._add(l)}},r}();t.selection=r;var i=function(){function t(e){this._clear=function(){this._list.length=0};if(!e)throw"invalid arguments";this._wijgrid=e,this._list=[]}return t.prototype.item=function(e){return this._list[e]},t.prototype.length=function(){return this._list.length},t.prototype.indexOf=function(e,t){arguments.length===1&&(t=e.rowIndex(),e=e.cellIndex());var n=0,r=this._list.length-1,i,s,o;while(n<=r){i=n+(r-n>>1),s=this._list[i],o=s.rowIndex()-t,o===0&&(o=s.cellIndex()-e);if(o<0)n=i+1;else{if(!(o>0))return i;r=i-1}}return~n},t.prototype.toString=function(){var e="",t,n;for(t=0,n=this._list.length;t<n;t++)e+=this._list[t].toString()+"\n";return e},t.prototype._add=function(e){var t=this.indexOf(e);return t<0?(this._list.splice(~t,0,e),e._setGridView(this._wijgrid),!0):!1},t.prototype._addFrom=function(e){if(e){var t=e.length(),n=this._list.length,r;if(n===0){this._list.length=t;for(r=0;r<t;r++)this._list[r]=e.item(r),this._list[r]._setGridView(this._wijgrid)}else for(r=0;r<t;r++)this._add(e.item(r))}},t.prototype._appendUnsafe=function(e){this._list[this._list.length]=e,e._setGridView(this._wijgrid)},t.prototype._insertUnsafe=function(e,t){this._list.splice(t,0,e)},t.prototype._remove=function(e){var t=this.indexOf(e);return t>=0?(this._list.splice(t,1),!0):!1},t.prototype._removeAt=function(e){this._list.splice(e,1)},t.prototype._getColumnsIndicies=function(){var e=[],t=this._list.length,n,r,i;if(t){n=[];for(r=0;r<t;r++)n[this._list[r].cellIndex()]=1;t=n.length,i=0;for(r=0;r<t;r++)n[r]&&(e[i++]=r)}return e},t.prototype._getSelectedRowsIndicies=function(){var e=[],t=this._list.length,n,r,i;if(t){n=[];for(r=0;r<t;r++)n[this._list[r].rowIndex()]=1;t=n.length,i=0;for(r=0;r<t;r++)n[r]&&(e[i++]=r)}return e},t.prototype._rectangulate=function(){var t=this._list.length,n=4294967295,r=4294967295,i=0,s=0,o,u;if(t){for(o=0;o<t;o++)u=this._list[o],n=Math.min(n,u.cellIndex()),r=Math.min(r,u.rowIndex()),i=Math.max(i,u.cellIndex()),s=Math.max(s,u.rowIndex());return new e.grid.cellInfoRange(new e.grid.cellInfo(n,r),new e.grid.cellInfo(i,s))}return null},t}();t.cellInfoOrderedCollection=i})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function r(t){this._gap_to_start=10,this._inProgress=!1,this._additionalEventsAttached=!1,this._wijgrid=t,this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui",this._addedCells=new e.grid.cellInfoOrderedCollection(this._wijgrid),this._view=this._wijgrid._view(),this._rootElement=this._view.focusableElement(),this._visLeavesLen=this._wijgrid._field("visibleLeaves").length,this._rootElement.bind(this._eventKey("mousedown"),n.proxy(this._onGridMouseDown,this))}return r.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown),this._detachAdditionalEvents()},r.prototype._onGridMouseDown=function(t){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none")return;var r=this._view.getVisibleContentAreaBounds(),i={x:t.pageX,y:t.pageY},s=t.target&&t.target.tagName!==undefined?t.target.tagName.toLowerCase():undefined,o=n(t.target),u=e.grid.wijgrid.CSS;(!s||o.is("td."+u.TD+", th."+u.TD+", div."+u.cellContainer))&&i.x>r.left&&i.x<r.left+r.width&&i.y>r.top&&i.y<r.top+r.height&&(this._attachAdditionalEvents(),this._startPos=i,this._startCellInfo=this._coordToDataCellInfo(this._startPos))},r.prototype._onDocumentMouseMove=function(r){if(!this._startCellInfo||!this._startCellInfo._isValid())return;var i={x:r.pageX,y:r.pageY},s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=this._wijgrid._view(),w=this._wijgrid._rows(),E=e.grid.renderState;this._inProgress||(this._inProgress=Math.abs(this._startPos.x-i.x)>this._gap_to_start||Math.abs(this._startPos.y-i.y)>this._gap_to_start);if(this._inProgress){s=this._coordToDataCellInfo(i);if(!s._isValid())return;this._endCellInfo=s,u=new e.grid.cellInfoRange(this._startCellInfo,this._endCellInfo),u._normalize(),u._clip(this._wijgrid._getDataCellsRange(t.dataRowsRangeMode.sketch));if(u._isValid()&&!u.isEqual(this._prevMouseMoveRange)){this._prevMouseMoveRange=u,a=new e.grid.cellInfoOrderedCollection(this._wijgrid),f=u.bottomRight().rowIndex(),l=u.bottomRight().cellIndex();for(c=u.topLeft().rowIndex();c<=f;c++){m=b._getRowInfoBySketchRowIndex(c);if(m.type&e.grid.rowType.data)for(h=u.topLeft().cellIndex();h<=l;h++)a._appendUnsafe(new e.grid.cellInfo(h,c))}g=-1;for(p=0,d=this._addedCells.length();p<d;p++)o=this._addedCells.item(p),a.indexOf(o)<0&&(this._wijgrid.selection().selectedCells().indexOf(o)<0&&(h=this._view.getCell(o.cellIndexAbs(),o.rowIndexAbs()),h&&(g!==o.rowIndex()&&(m=o.row(),g=o.rowIndex()),v=n(h),y=b._changeCellRenderState(v,E.selected,!1),this._wijgrid.cellStyleFormatter.format(v,o.cellIndex(),o.column(),m,y))),this._addedCells._removeAt(p),p--,d--);g=-1;for(p=0,d=a.length();p<d;p++)o=a.item(p),this._addedCells.indexOf(o)<0&&this._wijgrid.selection().selectedCells().indexOf(o)<0&&this._addedCells._add(o)&&(h=this._view.getCell(o.cellIndexAbs(),o.rowIndexAbs()),h&&(g!==o.rowIndex()&&(m=o.row(),g=o.rowIndex()),v=n(h),y=b._changeCellRenderState(v,E.selected,!0),this._wijgrid.cellStyleFormatter.format(v,o.cellIndex(),o.column(),m,y)))}}},r.prototype._onDocumentMouseUp=function(t){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=!1;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(t,this._endCellInfo,{changeSelection:!1,setFocus:!1}),(!t.shiftKey||!this._wijgrid.selection()._multipleRangesAllowed()&&this._wijgrid.options.selectionMode.toLowerCase()!=="singleRange")&&this._wijgrid.selection()._startNewTransaction(this._startCellInfo),this._wijgrid.selection().beginUpdate(),this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,t.shiftKey,t.ctrlKey,e.grid.cellRangeExtendMode.none,this._endCellInfo),this._wijgrid.selection().endUpdate();var r=this._wijgrid._view(),i=-1,s,o=e.grid.renderState;for(var u=0,a=this._addedCells.length();u<a;u++){var f=this._addedCells.item(u);if(this._wijgrid.selection().selectedCells().indexOf(f)<0){var l=r.getCell(f.cellIndexAbs(),f.rowIndexAbs());if(l!==null){i!==f.rowIndex()&&(s=f.row(),i=f.rowIndex());var c=n(l),h=r._changeCellRenderState(c,o.selected,!1);this._wijgrid.cellStyleFormatter.format(c,f.cellIndex(),f.column(),s,h)}}}return this._addedCells._clear(),this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null,!1}}},r.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached)try{this._view.toggleDOMSelection(!1),n(document).bind(this._eventKey("mousemove"),n.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),n.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=!0}},r.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached)try{this._view.toggleDOMSelection(!0),n(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=!1}},r.prototype._eventKey=function(t){return e.grid.stringFormat(this._evntFormat,t)},r.prototype._coordToDataCellInfo=function(t){var n=0,r=this._visLeavesLen-1,i=0,s=-1,o,u=new e.grid.rowAccessor(this._view,2,0,0),a,f,l,c;while(n<=r){i=(r-n>>1)+n,o=e.grid.bounds(this._view.getHeaderCell(i)),o||(f=u.item(0),o=e.grid.bounds(e.grid.rowAccessor.getCell(f,i)));if(!o)break;if(t.x<o.left)r=i-1;else{if(!(t.x>o.left+o.width)){s=i;break}n=i+1}}if(s===-1)return e.grid.cellInfo.outsideValue;u=new e.grid.rowAccessor(this._view,0,0,0),a=-1,n=0,r=u.length()-1,i=0;while(n<=r){i=(r-n>>1)+n,f=u.item(i),o=e.grid.bounds(e.grid.rowAccessor.getCell(f,0));if(t.y<o.top)r=i-1;else{if(!(t.y>o.top+o.height)){a=i;break}n=i+1}}return a===-1?e.grid.cellInfo.outsideValue:(c=new e.grid.cellInfo(s,a,this._wijgrid,!0),c)},r}();t.uiSelection=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e,t,n,r){this._view=e,this._scope=t,this._offsetBottom=r,this._offsetTop=n}return e.prototype.item=function(e){var t=this.length();return e>=0&&e<t?this._view.getJoinedRows(e+this._offsetTop,this._scope):null},e.prototype.length=function(){var e=this._view.getJoinedTables(!0,0),t=0,n;if(n=e[0])t=n.getSectionLength(this._scope);if(n=e[1])t+=n.getSectionLength(this._scope);return t-=this._offsetTop+this._offsetBottom,t<0&&(t=0),t},e.iterateCells=function(t,n,r){if(t&&n){var i=0,s,o,u,a,f,l;for(s=0,o=t.length;s<o;s++){u=t[s];if(u)for(a=0,f=u.cells.length;a<f;a++){l=n(u.cells[a],i++,r);if(l!==!0)return}}}},e.getCell=function(t,n){var r,i;if(t&&(r=t[0])){i=r.cells.length;if(n<i)return r.cells[n];n-=i;if(r=t[1]){i=r.cells.length;if(n<i)return r.cells[n]}}return null},e.cellsCount=function(t){var n=0,r;if(t&&(r=t[0])){n=r.cells.length;if(r=t[1])n+=r.cells.length}return n},e}();e.rowAccessor=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery;(function(e){e._map=[],e.error=0,e.continueEditing=1,e.success=2,e.cancel=4,e.notEdited=8})(t.updateCellResult||(t.updateCellResult={}));var r=t.updateCellResult,i=function(){function t(){this._timeout=25}return t.prototype.cellEditStart=function(t,r,i){var s=!1,o=t._view(),u,a,f,l;if(r._isValid()&&!r._isEdit()&&r.column().dataIndex>=0){u=r.row();if(u){l=u.type;if(l&e.grid.rowType.data){a={cell:r,event:i,handled:!1};if(s=t._trigger("beforeCellEdit",null,a)||t.options.editingMode==="row")a.handled||(s=this._defaultBeforeCellEdit(t,a));s&&(r._isEdit(!0),t._showRowHeader()&&(f=n(u.$rows[0].cells[0]).children("div."+e.grid.wijgrid.CSS.cellContainer),f.length&&(f.empty(),f.append(n("<div>&nbsp;</div>").addClass(t.options.wijCSS.icon+" "+t.options.wijCSS.iconPencil)))))}}}return s},t.prototype.updateCell=function(t,n,i){var s;if(n&&!n._isEdit())return r.success|r.notEdited;if(!n||!n._isValid()||!(s=n.row())||!(s.type&e.grid.rowType.data))return r.error;if(i&&i.which===e.getKeyCodeEnum().ESCAPE||!n._isRendered())return r.success|r.cancel;var o=r.success,u=n.column(),a={cell:n,value:undefined};if(!t._trigger("beforeCellUpdate",null,a)&&t.options.editingMode!=="row")return r.continueEditing;a.value===undefined&&(a.value=this._getCellValue(t,n));var f=a.value,l=n.value();try{var c=this._getHTMLInputElementType(n);e.grid.HTML5InputSupport.isExtendSupportRequired(c)?(a.value=e.grid.HTML5InputSupport.parse(a.value,c),a.value=e.grid.HTML5InputSupport.extend(l,a.value,c)):a.value=t.parse(n.column(),a.value),f=a.value}catch(h){a.value=f}e.grid.getDataType(u)==="datetime"&&(f instanceof Date&&(f=f.getTime()),l instanceof Date&&(l=l.getTime()));if(f!==l){try{n.value(a.value)}catch(h){var p={cell:n,value:a.value};o=r.error,t._trigger("invalidCellValue",null,p)}if(o&r.success){var d={cell:n};t._trigger("afterCellUpdate",null,d)}}return o},t.prototype.cellEditEnd=function(t,r,i){var s=r.row(),o={cell:r,event:i,handled:!1};r._isEdit(!1),r._isRendered()&&(t._trigger("afterCellEdit",null,o),o.handled||this._defaultAfterCellEdit(t,o),t._showRowHeader()&&n(s.$rows[0].cells[0]).children("div."+e.grid.wijgrid.CSS.cellContainer).html("&nbsp;"))},t.prototype._defaultBeforeCellEdit=function(t,r){var i=r.cell.column(),s=!1,o,u,a,f,l,c,h=e.getKeyCodeEnum(),p=e.grid.HTML5InputSupport.getDefaultInputType(t._isMobileEnv(),i);if(i.dataIndex>=0){o=r.cell.value(),s=!0;try{a=r.cell.container();if(e.grid.getDataType(i)==="boolean"){var d=a.children("span");d.length&&d.prop("disabled")&&(n.data(d[0],"disabledSpan",!0),d.prop("disabled",!1)),f=a.find(":checkbox"),f.prop("disabled",!1),r.event&&r.event.type==="keypress"&&f.one("keyup",function(e){e.which===h.SPACE&&(e.preventDefault(),f[0].checked=!o)})}else{f=n("<input />").attr("type",p).addClass(e.grid.wijgrid.CSS.inputMarker).addClass("wijmo-wijinput "+t.options.wijCSS.stateFocus).bind("keydown",t,n.proxy(this._checkBoxOrInputKeyDown,this)),f.bind(n.support.selectstart?"selectstart":"mousedown",function(e){e.stopPropagation()});if(!r.event||r.event.type!=="keydown"||r.event.which===113)switch(e.grid.getDataType(i)){case"currency":case"number":if(o!==null){f.val(o);break};case"datetime":if(e.grid.HTML5InputSupport.isExtendSupportRequired(p)){f.val(e.grid.HTML5InputSupport.toStr(o,p));break};default:f.val(t.toStr(i,o))}a.empty().append(f),l=f.val().length,p==="text"&&(new e.grid.domSelection(f[0])).setSelection({start:l,end:l})}t._allowCellEditing()&&(f.focus(),setTimeout(function(){f.focus()},this._timeout*2))}catch(v){alert(v.message),s=!1}}return s},t.prototype._defaultAfterCellEdit=function(t,r){var i=r.cell.column(),s=!1,o,u,a,f,l;if(i.dataIndex>=0){s=!0,l=t._view();try{o=r.cell.container(),u=t.toStr(i,r.cell.value()),f=l._getRowInfoBySketchRowIndex(r.cell.rowIndex());if(e.grid.getDataType(i)==="boolean"){var c=o.children("span"),h=c.length&&n.data(c[0],"disabledSpan");a=o.find(":checkbox"),u==="true"?a.attr("checked","checked"):a.removeAttr("checked"),h&&(c.prop("disabled",!0),a.prop("disabled",!0))}else t.cellFormatter.format(n(r.cell.tableCell()),o,i,u,f)}catch(p){alert("defaultAfterCellEdit: "+p.message),s=!1}}return s},t.prototype._checkBoxOrInputKeyDown=function(t){var n=e.getKeyCodeEnum();if(t.which===n.ENTER){var r=t.data;if(r)return r._endEditInternal(t),!1}},t.prototype._getCellValue=function(e,t){var n=t.container().find(":input:first"),r=null;return n.length&&(r=n.attr("type")==="checkbox"?n[0].checked:n.val()),r},t.prototype._getHTMLInputElementType=function(e){return e.container().find(":input:first").attr("type")},t}();t.cellEditorHelper=i;var s=function(){function e(e,t){this.mGrid=e,this.mWrapper=n("<div />"),this.mWrapper.append(this.mElement=n('<input type="text" />').css("position","relative").keydown(n.proxy(this._onKeyDown,this))).css({position:"absolute",width:0,height:0,overflow:"hidden","z-index":999999}),t.append(this.mWrapper)}return e.prototype.focus=function(e){if(e&&e.length){var t=e.offset();this.mWrapper.offset({top:t.top,left:t.left}),this.mElement.focus()}},e.prototype.isHiddenInput=function(e){return e&&e[0]===this.mElement[0]},e.prototype.canHandle=function(e){return this.mGrid._allowCellEditing()&&this.isPrintableKeyCode(e)},e.prototype.isPrintableKeyCode=function(e){var t=e.keyCode;return!e.ctrlKey&&!e.altKey&&(t>=65&&t<=90||t>=48&&t<=57||t>=96&&t<=105||t>=186&&t<=192||t>=220&&t<=222||t===219||t>=106&&t<=111||t===32||t===61||t===173||t===229||e.keyCode===0)},e.prototype._onKeyDown=function(e){this.canHandle(e)&&this.mGrid._beginEditInternal(e)},e}();t.keyDownEventListener=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function r(){}return r._div=document.createElement("div"),r.prototype.format=function(t,r,i,s,o){o.type&e.grid.rowType.footer&&(i.aggregate&&i.aggregate!=="none"?s=e.grid.stringFormat(i.footerText||"{0}",i._totalsValue||""):s=i.footerText||i._footerTextDOM||"");var u=!0,a=null,f={$cell:t,$container:r,column:i,formattedValue:s,row:o,afterDefaultCallback:null},l=i.owner,c=e.grid.rowType,h=!0;if((o.type&c.data||o.type===c.groupFooter||o.type===c.groupHeader)&&l._allowVirtualScrolling()){var p=l._view().getDefaultRowHeight();r.css({overflow:"hidden",height:p})}n.isFunction(i.cellFormatter)&&(u=!i.cellFormatter(f));if(u){switch(o.type&~c.dataAlt){case c.filter:a=this._formatFilterRowCell;break;case c.data:a=this._formatDataRowCell;break;default:a=this._formatDefRowCell}a&&(h=a.call(this,f),n.isFunction(f.afterDefaultCallback)&&f.afterDefaultCallback(f))}return h===!1?!1:!0},r.prototype._formatFilterRowCell=function(t){var n=t.column.owner,r=e.grid.wijgrid.CSS,i=n.options.wijCSS;t.$container.addClass(i.widget+" "+i.stateDefault),t.column.dataIndex>=0&&!t.column.isBand&&t.column.showFilter?t.$container.html('<table cellPadding="0" cellSpacing="0" class="'+r.filter+" "+i.wijgridFilter+" "+i.cornerAll+'">'+"<tr>"+'<td style="width:100%">'+'<input type="text" class="'+r.filterInput+" "+i.wijgridFilterInput+'" style="width:100%" />'+"</td>"+'<td class="'+r.filterTrigger+" "+i.wijgridFilterTrigger+" "+i.cornerRight+" "+i.stateDefault+'">'+'<span class="'+i.icon+" "+i.iconArrowDown+'"></span>'+"</td>"+"</tr>"+"</table>"):t.$container.html("&nbsp;")},r.prototype._formatDataRowCell=function(t){var n=t.column,r=n.owner,i=e.grid.getDataType(n),s=!0;return n.clientType==="c1btnfield"?this._c1btnFieldCellFormatter(t):n.clientType==="c1commandbtnfield"?this._c1commandBtnFieldCellFormatter(t):this._defFieldCellFormatter(t),s},r.prototype._formatDefRowCell=function(e){this._updateHTML(e)},r.prototype._defFieldCellFormatter=function(t){e.grid.getDataType(t.column)==="boolean"?this._boolCellFormatter(t):this._dataCellFormatter(t)},r.prototype._boolCellFormatter=function(t){var r=t.column.owner,i=r._allowCellEditing()&&t.column.readOnly!==!0,s,o,u=e.grid.rowType,a=e.getKeyCodeEnum(),f=n('<input class="'+e.grid.wijgrid.CSS.inputMarker+'" type="checkbox" />');i||f.prop("disabled",!0),r.parse(t.column,r._dataViewWrapper.getValue(t.row.data,t.column.dataKey))===!0&&f.prop("checked","checked"),t.$container.append(f),i&&t.$container.children("input").bind("mousedown",function(e){s=t.$container.parent()[0],o=r.currentCell(),o.tableCell()!==s&&r._onClick({target:s}),o._isEdit()||r.beginEdit()}).bind("keydown",function(e){if(e.which===a.ENTER)return r._endEditInternal(e),!1})},r.prototype._dataCellFormatter=function(e){this._updateHTML(e)},r.prototype._c1btnFieldCellFormatter=function(e){var t=e.column,n={column:e.column,row:e.row};e.$container.append(this._buttonFactory(t.command,n,null))},r.prototype._c1commandBtnFieldCellFormatter=function(t){var n=t.column,r=n.owner,i={column:t.column,row:t.row},s=this;t.row.state&e.grid.renderState.editing?(t.$container.append(this._buttonFactory(n.updateCommand,i,function(e,t){r.updateRow()})),t.$container.append(document.createTextNode(" ")),t.$container.append(this._buttonFactory(n.cancelCommand,i,function(e,t){r.cancelRowEditing()}))):(n.showEditButton&&t.$container.append(this._buttonFactory(n.editCommand,i,function(e,t){r.editRow(i.row.dataItemIndex)})),n.showDeleteButton&&(n.showEditButton&&t.$container.append(document.createTextNode(" ")),t.$container.append(this._buttonFactory(n.deleteCommand,i,function(e,t){r.deleteRow(i.row.dataItemIndex)})))),t.$container.addClass("wijmo-wijgrid-innercell-command")},r.prototype._updateHTML=function(t){var n=t.$container[0];if(n.firstChild)while(n.firstChild)n.removeChild(n.firstChild);e.grid.cellFormatterHelper._div.innerHTML=t.formattedValue||"&nbsp;";while(e.grid.cellFormatterHelper._div.firstChild)n.appendChild(e.grid.cellFormatterHelper._div.firstChild)},r.prototype._buttonFactory=function(e,r,i){var s=n.extend({},{text:e.text,iconClass:e.iconClass,disabled:r.column.owner.disabled,click:function(t){var s=!0;if(n.isFunction(e.click)){var o=e.click.apply(this,[t,r]);s=o!==!1&&!t.isDefaultPrevented()}s&&i&&i.apply(this,[t,r]),t.preventDefault()}}),o=null;switch(r.column.buttonType){case"link":o=(new t.wijgridCommandLink(s)).element();break;case"imageButton":o=(new t.wijgridCommandImageButton(s)).element();break;case"button":o=(new t.wijgridCommandButton(s)).element();break;case"image":o=(new t.wijgridCommandImage(s)).element();break;default:throw"Unknown buttonType"}return o},r}();t.cellFormatterHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(e){this.MIN_WIDTH=5,this._elements=[],this._gap=10,this._step=1,this._inProgress=!1,this._hoveredField=null,this._startLocation=null,this._lastLocation=null,this._proxy=null,this._wijgrid=e,this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}return t.prototype.addElement=function(e){e&&e.element&&(e.element.bind(this._eventKey("mousemove"),n.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),n.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),n.proxy(this._onMouseOut,this)),this._elements.push(e))},t.prototype.dispose=function(){var e=this;n.each(this._elements,function(t,n){n.element.unbind(e._eventKey("mousemove"),e._onMouseMove).unbind(e._eventKey("mousedown"),e._onMouseDown).unbind(e._eventKey("mouseout"),e._onMouseOut)}),this._detachDocEvents()},t.prototype.inProgress=function(){return this._inProgress},t.prototype._onMouseMove=function(e){if(!this._inProgress){var t=this._getFieldByPos({x:e.pageX,y:e.pageY});t&&t._canSize()&&this._wijgrid._canInteract()?(t.element.css("cursor","e-resize"),this._hoveredField=t,e.stopPropagation()):this._onMouseOut(e)}},t.prototype._onMouseOut=function(e){this._inProgress||this._hoveredField&&(this._hoveredField.element.css("cursor",""),this._hoveredField=null)},t.prototype._onMouseDown=function(t){this._hoveredField=this._getFieldByPos({x:t.pageX,y:t.pageY});if(this._hoveredField&&this._hoveredField._canSize()&&this._wijgrid._canInteract())try{var r=this._wijgrid.options.wijCSS,i=e.grid.wijgrid.CSS;this._hoveredField.element.css("cursor",""),this._docCursor=document.body.style.cursor,document.body.style.cursor="e-resize",this._startLocation=this._lastLocation=e.grid.bounds(this._hoveredField.element),this._proxy=n('<div class="'+i.resizingHandle+" "+r.wijgridResizingHandle+" "+r.stateHighlight+'">&nbsp;</div>');var s=this._wijgrid._view().getVisibleAreaBounds();this._proxy.css({left:t.pageX,top:this._startLocation.top,height:s.height+s.top-this._startLocation.top}),n(document.body).append(this._proxy)}finally{this._attachDocEvents(),this._inProgress=!0,t.stopPropagation()}},t.prototype._onDocumentMouseMove=function(e){var t=this._step*Math.round((e.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+t,top:e.pageY,width:undefined,height:undefined},this._proxy.css("left",this._lastLocation.left)},t.prototype._onDocumentMouseUp=function(e){try{document.body.style.cursor=this._docCursor,this._proxy.remove(),this._startLocation!==this._lastLocation&&this._wijgrid._fieldResized(this._hoveredField,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}finally{this._hoveredField=null,this._proxy=null,this._detachDocEvents(),this._inProgress=!1}},t.prototype._onSelectStart=function(e){e.preventDefault()},t.prototype._attachDocEvents=function(){this._inProgress||(n(document).bind(this._eventKey("mousemove"),n.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),n.proxy(this._onDocumentMouseUp,this)),n.fn.disableSelection&&n(document.body).disableSelection(),"onselectstart"in document&&n(document.body).bind("selectstart",this._onSelectStart))},t.prototype._detachDocEvents=function(){this._inProgress&&(n(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp),n.fn.enableSelection&&n(document.body).enableSelection(),"onselectstart"in document&&n(document.body).unbind("selectstart",this._onSelectStart))},t.prototype._getFieldByPos=function(t){var n,r,i,s,o;for(n=0,r=this._elements.length;n<r;n++){i=this._elements[n],s=e.grid.bounds(i.element),o=e.grid.isOver(t.y,t.x,s.top,s.left+s.width-this._gap,s.height,this._gap);if(o)return i}return null},t.prototype._eventKey=function(t){return e.grid.stringFormat(this._evntFormat,t)},t}();t.uiResizer=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(t){this._scope_guid="scope_"+e.grid.getUID(),this._dragEnd=!1,this.mZIndex=1e3;var n=e.grid.wijgrid.CSS;this._wijgrid=t,this._wijCSS=this._wijgrid.options.wijCSS,this._wrapHtml='<div class="'+this._wijCSS.widget+" "+n.wijgrid+" "+this._wijCSS.wijgrid+" "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'">'+'<table class="'+n.root+" "+n.table+" "+this._wijCSS.wijgridTable+'">'+'<tr class="'+n.headerRow+" "+this._wijCSS.wijgridHeaderRow+'">'+"</tr>"+"</table>"+"</div>"}return t.prototype.attachGroupArea=function(e){var t,r=this;if(!n.ui.droppable||!n.ui.draggable)return;e.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:!0,accept:function(e){if(r._wijgrid.options.allowColMoving){t=r._getWijFieldInstance(e);if(t)return t instanceof n.wijmo.c1groupedfield&&t.options.groupedIndex===r._wijgrid._groupedColumns().length-1?!1:!t.options.isBand&&(t.options.groupedIndex===undefined||t instanceof n.wijmo.c1groupedfield)}return!1},drop:function(e,n){!r._isInElement(e,n.draggable)&&(t=r._getWijFieldInstance(n.draggable))&&(r._dragEnd=!0)},over:function(t,n){var i=r._wijgrid._field("groupedWidgets").length;r._dropTargetRedirected=i>0,r._droppableWijField=i>0?r._wijgrid._field("groupedWidgets")[i-1]:e,e.data("thisDroppableWijField",r._droppableWijField)},out:function(t,n){r._droppableWijField===e.data("thisDroppableWijField")&&(r._droppableWijField=null)}})},t.prototype.attach=function(t){var r,i,s=e.grid.wijgrid.CSS,o=this;if(!n.ui.droppable||!n.ui.draggable)return;if(!t||!(r=t.element))return;r.draggable({helper:function(i){var u;return t instanceof n.wijmo.c1groupedfield?u=r.clone():u=r.clone().wrap(o._wrapHtml).width(r.width()).height(r.height()).closest("."+s.wijgrid),u.addClass(s.dndHelper+" "+o._wijCSS.wijgridDndHelper).css("z-index",o.mZIndex=e.grid.getZIndex(o._wijgrid.outerDiv,1e3)),u},appendTo:"body",scope:o._scope_guid,drag:function(e,n){o._hideArrows();if(o._droppableWijField&&!o._isInElement(e,r)){var i=o._droppableWijField.element;i||(i=o._droppableWijField),o._showArrows(i,o._getPosition(t,o._droppableWijField,e,n))}},start:function(r,i){if(o._wijgrid._canInteract()&&o._wijgrid.options.allowColMoving&&(o._wijgrid._UIResizer()==null||!o._wijgrid._UIResizer().inProgress())){var s=t.options,u=t.options.travIdx,a=t instanceof n.wijmo.c1groupedfield,f=a?"groupArea":"columns";a&&(s=e.grid.search(o._wijgrid.columns(),function(e){return e.options.travIdx===u}),s=s.found?s.found.options:e.grid.getColumnByTravIdx(o._wijgrid.options.columns,u).found);if(t._canDrag()&&o._wijgrid._trigger("columnDragging",null,{drag:s,dragSource:f}))return o._wijgrid._trigger("columnDragged",null,{drag:s,dragSource:f}),!0}return!1},stop:function(e,r){o._hideArrows();try{o._dragEnd&&(o._droppableWijField.element?o._wijgrid._handleDragnDrop(t.options.travIdx,o._droppableWijField.options.travIdx,o._getPosition(t,o._droppableWijField,e,r),t instanceof n.wijmo.c1groupedfield,o._droppableWijField instanceof n.wijmo.c1groupedfield):o._wijgrid._handleDragnDrop(t.options.travIdx,-1,"left",t instanceof n.wijmo.c1groupedfield,!0))}finally{o._droppableWijField=null,o._dragEnd=!1}}}).droppable({hoverClass:o._wijCSS.stateHover,scope:o._scope_guid,tolerance:"pointer",greedy:!0,accept:function(e){if(o._wijgrid.options.allowColMoving&&r[0]!==e[0]){i=o._getWijFieldInstance(e);if(i)return i._canDropTo(t)}return!1},drop:function(e,t){if(i=o._getWijFieldInstance(t.draggable))o._dragEnd=!0},over:function(e,n){o._dropTargetRedirected=!1,o._droppableWijField=t,r.data("thisDroppableWijField",o._droppableWijField)},out:function(e,n){o._droppableWijField===t.element.data("thisDroppableWijField")&&(o._droppableWijField=null)}})},t.prototype.detach=function(e){var t;e&&(t=e.element)&&(t.data("ui-draggable")&&t.draggable("destroy"),t.data("ui-droppable")&&t.droppable("destroy"))},t.prototype.dispose=function(){this._$topArrow&&(this._$topArrow.remove(),this._$topArrow=null),this._$bottomArrow&&(this._$bottomArrow.remove(),this._$bottomArrow=null)},t.prototype._getWijFieldInstance=function(t){var n=e.grid.widgetName(t);if(!n)throw"widgetName is undedined";return t.data(n)},t.prototype._showArrows=function(e,t){this._topArrow().css("z-index",this.mZIndex).show().position({my:"center",at:t+" top",of:e,collision:"none"}),this._bottomArrow().css("z-index",this.mZIndex).show().position({my:"center",at:t+" bottom",of:e,collision:"none"})},t.prototype._hideArrows=function(){this._topArrow().hide(),this._bottomArrow().hide()},t.prototype._topArrow=function(){return this._$topArrow||(this._$topArrow=n("<div />").addClass(e.grid.wijgrid.CSS.dndArrowTopContainer+" "+this._wijCSS.wijgridDndArrowTopContainer).append(n("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickDown)).hide().appendTo(document.body)),this._$topArrow},t.prototype._bottomArrow=function(){return this._$bottomArrow||(this._$bottomArrow=n("<div />").addClass(e.grid.wijgrid.CSS.dndArrowBottomContainer+" "+this._wijCSS.wijgridDndArrowBottomContainer).append(n("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickUp)).hide().appendTo(document.body)),this._$bottomArrow},t.prototype._isInElement=function(t,n){var r=e.grid.bounds(n,!1);return t.pageX>r.left&&t.pageX<r.left+r.width&&t.pageY>r.top&&t.pageY<r.top+r.height},t.prototype._getPosition=function(t,r,i,s){if(!r.element)return"left";if(this._dropTargetRedirected)return"right";var o=e.grid.bounds(r.element,!1),u=o.width/6,a=o.left+o.width/2,f="right",l;return i.pageX<a&&(f="left"),r instanceof n.wijmo.c1groupedfield?(t instanceof n.wijmo.c1groupedfield&&(l=r.options.groupedIndex-t.options.groupedIndex,Math.abs(l)===1&&(f=l<0?"left":"right")),f):(l=r.options.linearIdx-t.options.linearIdx,r.options.isBand&&t.options.parentIdx!==r.options.travIdx&&Math.abs(i.pageX-a)<u?"center":(t.options.parentIdx===r.options.parentIdx&&Math.abs(l)===1&&(f=l<0?"left":"right"),f))},t}();t.uiDragndrop=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(e){if(!e)throw"invalid arguments";this._wijgrid=e}return t.prototype.format=function(t,r,i,s,o,u,a){var f=e.grid.renderState,l=e.grid.rowType,c=s.type,h,p=null;r===0&&this._wijgrid._showRowHeader()&&(i=null);if(c===l.groupHeader||c===l.groupFooter)i=null,u&&(p=u.groupInfo)&&(i=this._wijgrid._field("leaves")[p.leafIndex]);h={$cell:t,state:o,row:s,column:i,_cellIndex:r,_purpose:p?p.purpose:undefined},o&f.rendering?this._renderingStateFormatter(h,u,a):(this._currentStateFormatter(h,o&f.current),this._selectedStateFormatter(h,o&f.selected),c!==l.header&&(o&f.current||o&f.selected?h.$cell.addClass(this._wijgrid.options.wijCSS.stateDefault):h.$cell.removeClass(this._wijgrid.options.wijCSS.stateDefault))),n.isFunction(this._wijgrid.options.cellStyleFormatter)&&this._wijgrid.options.cellStyleFormatter(h)},t.prototype._renderingStateFormatter=function(t,n,r){var i=e.grid.rowType,s,o,u=t.column,a=t.row.type,f=e.grid.wijgrid.CSS,l=this._wijgrid.options.wijCSS;switch(a){case i.header:t.$cell.addClass(f.TH+" "+l.wijgridTH);break;default:t.$cell.addClass(f.TD+" "+l.wijgridTD)}if(a&i.data&&u&&u.textAlignment)switch(u.textAlignment.toLowerCase()){case"left":t.$cell.addClass(f.cellAlignLeft+" "+l.wijgridCellAlignLeft);break;case"right":t.$cell.addClass(f.cellAlignRight+" "+l.wijgridCellAlignRight);break;case"center":t.$cell.addClass(f.cellAlignCenter+" "+l.wijgridCellAlignCenter)}if(n)for(s in n)if(n.hasOwnProperty(s)){o=n[s];if(!(s!=="groupInfo"&&s!=="colSpan"&&s!=="rowSpan"||o>1))continue;s==="class"?t.$cell.addClass(o):t.$cell.attr(s,o)}if(r)for(s in r)if(r.hasOwnProperty(s)){if(s==="paddingLeft"){t.$cell.children("."+f.cellContainer).css(s,r[s]);continue}t.$cell.css(s,r[s])}if(t._cellIndex===0&&this._wijgrid._showRowHeader())t.$cell.attr({role:"rowheader",scope:"row"}).addClass(l.stateDefault+" "+l.content+" "+f.rowHeader+" "+l.wijgridRowHeader);else switch(a){case i.header:t.$cell.attr({role:"columnheader",scope:"col"});break;case i.footer:t.$cell.attr({role:"columnfooter",scope:"col"});break;default:t.$cell.attr("role","gridcell")}a&i.data&&t._cellIndex>=0&&u&&(t.$cell.attr("headers",window.escape(u.headerText)),u.readOnly&&t.$cell.attr("aria-readonly",!0),u.dataIndex>=0&&t.$cell.addClass("wijdata-type-"+e.grid.getDataType(u))),(a===i.groupHeader||a===i.groupFooter)&&u&&t._purpose===e.grid.groupRowCellPurpose.aggregateCell&&t.$cell.addClass("wijdata-type-"+e.grid.getDataType(u))},t.prototype._currentStateFormatter=function(t,n){var r=e.grid.rowType,i=e.grid.wijgrid.CSS,s=this._wijgrid.options.wijCSS;n?(t.$cell.addClass(s.stateActive),t.row.type===r.header?t.$cell.addClass(i.currentHeaderCell+" "+s.wijgridCurrentHeaderCell):t.$cell.addClass(i.currentCell+" "+s.wijgridCurrentCell)):(t.$cell.removeClass(s.stateActive),t.row.type===r.header?t.$cell.removeClass(i.currentHeaderCell+" "+s.wijgridCurrentHeaderCell):t.$cell.removeClass(i.currentCell+" "+s.wijgridCurrentCell))},t.prototype._hoveredStateFormatter=function(e,t){t},t.prototype._selectedStateFormatter=function(e,t){var n=this._wijgrid.options.wijCSS;t?e.$cell.addClass(n.stateHighlight).attr("aria-selected","true"):e.$cell.removeClass(n.stateHighlight).removeAttr("aria-selected")},t}();t.cellStyleFormatterHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(e){if(!e)throw"invalid arguments";this._wijgrid=e}return t.prototype.format=function(t,r,i){var s=e.grid.renderState,o=e.grid.rowType,u=t.state,a=t;u&s.rendering?this._renderingStateFormatter(a,r,i):(this._currentStateFormatter(a,(u&s.current)!==0),this._hoveredStateFormatter(a,(u&s.hovered)!==0),this._selectedStateFormatter(a,(u&s.selected)!==0)),n.isFunction(this._wijgrid.options.rowStyleFormatter)&&this._wijgrid.options.rowStyleFormatter(a)},t.prototype._renderingStateFormatter=function(t,r,i){var s=e.grid.wijgrid.CSS,o=this._wijgrid.options.wijCSS,u,a=s.row+" "+o.wijgridRow+" "+o.content,f=e.grid.rowType,l;t.$rows.attr("role","row");if(r)for(l in r)r.hasOwnProperty(l)&&(l==="class"?t.$rows.addClass(r[l]):(t.$rows.attr(l,r[l]),t.$rows[0].style.height&&t.$rows.each(function(){return n.data(this,"customHeight",this.style.height),!0})));if(i)for(l in i)i.hasOwnProperty(l)&&t.$rows.css(l,i[l]);switch(t.type&~f.dataAlt){case f.header:u=s.headerRow+" "+o.wijgridHeaderRow;break;case f.data:u=a+" "+s.dataRow+" "+o.wijgridDataRow,t.type&f.dataAlt&&(u+=" "+s.altRow+" "+o.wijgridAltRow);break;case f.emptyDataRow:u=a+" "+s.emptyDataRow+" "+o.wijgridEmptyDataRow;break;case f.filter:u=s.filterRow+" "+o.wijgridFilterRow;break;case f.groupHeader:u=a+" "+s.groupHeaderRow+" "+o.wijgridGroupHeaderRow;break;case f.groupFooter:u=a+" "+s.groupFooterRow+" "+o.wijgridGroupFooterRow;break;case f.footer:u=s.footerRow+" "+o.wijgridFooterRow+" "+o.stateDefault+" "+o.stateHighlight;break;default:throw e.grid.stringFormat("unknown rowType: {0}",t.type)}t.$rows.addClass(u)},t.prototype._currentStateFormatter=function(t,r){if(this._wijgrid._showRowHeader()){var i=this._wijgrid.options.wijCSS,s=e.grid.wijgrid.CSS;r?n(t.$rows[0].cells[0]).addClass(i.stateActive+" "+s.currentRowHeaderCell+" "+i.wijgridCurrentRowHeaderCell):n(t.$rows[0].cells[0]).removeClass(i.stateActive+" "+s.currentRowHeaderCell+" "+i.wijgridCurrentRowHeaderCell)}},t.prototype._hoveredStateFormatter=function(e,t){var n=this._wijgrid.options.wijCSS;t?e.$rows.addClass(n.stateDefault+" "+n.stateHover):e.$rows.removeClass(n.stateDefault+" "+n.stateHover)},t.prototype._selectedStateFormatter=function(e,t){t},t}();t.rowStyleFormatterHelper=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(){this._sum=0,this._sum2=0,this._cntNumbers=0,this._cntStrings=0,this._cntDates=0,this._max=0,this._min=0,this._minDate=0,this._maxDate=0}return e.prototype.add=function(e){if(e===null||e==="")return;var t,n=e instanceof Date?"datetime":typeof e;t=e.toString(),this._cntStrings++===0&&(this._minString=this._maxString=t),t<this._minString&&(this._minString=t),t>this._maxString&&(this._maxString=t),n==="number"?(this._cntNumbers++===0&&(this._min=this._max=e),this._sum+=e,this._sum2+=e*e,e<this._min&&(this._min=e),e>this._max&&(this._max=e)):n==="datetime"&&(t=e.getTime(),this._cntDates++===0&&(this._minDate=this._maxDate=t),t<this._minDate&&(this._minDate=t),t>this._maxDate&&(this._maxDate=t))},e.prototype.getValueString=function(e){var t=e.owner;if(!this._cntNumbers||e.dataType!=="number"&&e.dataType!=="currency"){if(this._cntDates&&e.dataType==="datetime")switch(e.aggregate){case"max":return t.toStr(e,new Date(this._maxDate));case"min":return t.toStr(e,new Date(this._minDate));case"count":return this._cntStrings+""}if(this._cntStrings)switch(e.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}return""}var n=this._getValue(e.aggregate);return t.toStr(e,n)},e.prototype._getValue=function(e){switch(e){case"average":return this._cntNumbers===0?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1)return 0;return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1)return 0;return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1)return 0;return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1)return 0;var t=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-t*t}return 0},e}();e.tally=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(t){this._docEventsUID="wijgridfrozener"+e.grid.getUID(),this._docEventsAttached=!1,this._newStaticIndex=-1,this._staticColumnIndex=-1,this._staticRowIndex=-1,this._staticOffsetH=0,this._staticOffsetV=0,this._inProgress=!1,this._wijgrid=t,this.refresh()}return t.prototype.inProgress=function(){return this._inProgress},t.prototype.refresh=function(){this.dispose();var t=this._wijgrid.options.freezingMode;if(t!=="none"){this._$outerDiv=this._wijgrid.outerDiv.find("."+e.grid.wijgrid.CSS.fixedView),this._superPanel=this._wijgrid._view()._getSuperPanel(),this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(!1),this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(!0),this._staticColumnIndex=this._wijgrid._getStaticIndex(!1),this._staticRowIndex=this._wijgrid._getStaticIndex(!0),this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();var n=e.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),r=e.grid.bounds(this._$outerDiv);(t==="both"||t==="columns")&&(this._wijgrid.options.staticColumnsAlignment!=="right"||this._staticColumnIndex>=0)&&this._createVBar(this._visibleBounds,n,r),(t==="both"||t==="rows")&&!this._wijgrid._serverSideVirtualScrolling()&&this._createHBar(this._visibleBounds,n,r)}},t.prototype.dispose=function(){this._$hBar&&(this._$hBar.remove(),this._$hBar=null),this._$vBar&&(this._$vBar.remove(),this._$vBar=null),this._$proxy&&(this._$proxy.remove(),this._$proxy=null),this._$outerDiv=null,this._superPanel=null,this._detachDocEvents()},t.prototype._createVBar=function(t,r,i){var s=this._wijgrid.options.staticColumnsAlignment!=="right",o=s?r.width+r.left:r.left-2,u=this;o<=t.left+t.width&&(this._$vBar=n("<div><div></div></div>").addClass(e.grid.wijgrid.CSS.freezingHandleV+" "+this._wijgrid.options.wijCSS.wijgridFreezingHandleV).addClass(s?"":"not-allowed").css({left:o-i.left,top:r.top-i.top,height:t.height+t.top-r.top}).bind("mousedown",function(e){e.data=!0,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$vBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:0,height:"100%"}))},t.prototype._createHBar=function(t,r,i){var s=r.top+r.height,o=this._wijgrid.options.staticColumnsAlignment!=="right",u=this;s<=t.top+t.height&&(this._$hBar=n("<div><div></div></div>").addClass(e.grid.wijgrid.CSS.freezingHandleH+" "+this._wijgrid.options.wijCSS.wijgridFreezingHandleH).css({left:o?r.left-i.left:0,top:s-i.top,width:o?t.width+t.left-r.left:t.width}).bind("mousedown",function(e){e.data=!1,u._onBarMouseDown.apply(u,arguments)}).appendTo(this._$outerDiv),this._$hBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:"100%",height:0}))},t.prototype._onBarMouseDown=function(t){if(this._wijgrid.options.disabled||this._wijgrid.options.staticColumnsAlignment==="right"&&t.data)return!1;var r=e.grid.wijgrid.CSS,i=this._wijgrid.options.wijCSS;this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds(),this._newStaticIndex=t.data?this._staticColumnIndex:this._staticRowIndex,this._$proxy=n('<div class="'+r.resizingHandle+" "+i.wijgridResizingHandle+" "+i.header+'"></div>').appendTo(document.body),this._attachDocEvents(t.data),this._inProgress=!0,t.stopPropagation()},t.prototype._onDocumentMouseMove=function(e){e.data&&this._superPanel.options.hScroller.scrollValue?this._superPanel.hScrollTo(0):!e.data&&this._superPanel.options.vScroller.scrollValue&&this._superPanel.vScrollTo(0),this._showPosition(e)},t.prototype._onDocumentMouseUp=function(e){try{this._$proxy&&this._$proxy.remove(),this._detachDocEvents(),e.data?this._newStaticIndex!==this._staticColumnIndex&&this._wijgrid.option("staticColumnIndex",this._newStaticIndex):this._newStaticIndex!==this._staticRowIndex&&this._wijgrid.option("staticRowIndex",this._newStaticIndex)}finally{this._$proxy=null,this._inProgress=!1}},t.prototype._attachDocEvents=function(e){if(!this._docEventsAttached)try{n.fn.disableSelection&&n(document.body).disableSelection(),this._wijgrid._view().toggleDOMSelection(!1),n(document).bind(this._docEventKey("mousemove"),e,n.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),e,n.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=!0}},t.prototype._detachDocEvents=function(){if(this._docEventsAttached)try{n.fn.enableSelection&&n(document.body).enableSelection(),this._wijgrid._view().toggleDOMSelection(!0),n(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=!1}},t.prototype._docEventKey=function(t){return e.grid.stringFormat("{0}.{1}",t,this._docEventsUID)},t.prototype._showPosition=function(t){var n,r,i,s,o,u,a,f,l=this._wijgrid.options.staticColumnsAlignment!=="right";if(t.data){f=e.grid.bounds(this._$vBar);if(Math.abs(t.pageX-(f.left+f.width/2))<f.width){this._$proxy.hide();return}if(n=this._getFieldByPos({x:t.pageX,y:t.pageY})){r=e.grid.bounds(n.element),i=r.left+r.width/2,s=n.options.visLeavesIdx-this._staticOffsetV,o=Math.max(s-1,-1),u=t.pageX<i?o!==this._staticColumnIndex:s===this._staticColumnIndex,a=u?r.left:r.left+r.width;if(!e.grid.isOverAxis(a,this._visibleBounds.left-1,this._visibleBounds.width+2))return;this._newStaticIndex=u?o:s,this._$proxy.show().css({left:a,top:r.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-r.top})}}else{f=e.grid.bounds(this._$hBar);if(Math.abs(t.pageY-(f.top+f.height/2))<f.height){this._$proxy.hide();return}if(n=this._getRowByPos({x:t.pageX,y:t.pageY})){r=e.grid.bounds(n),i=r.top+r.height/2,s=this._wijgrid._view().getAbsoluteRowIndex(n)-this._staticOffsetH,o=Math.max(s-1,-1),u=t.pageY<i?o!==this._staticRowIndex:s===this._staticRowIndex,a=u?r.top:r.top+r.height;if(!e.grid.isOverAxis(a,this._visibleBounds.top-1,this._visibleBounds.height+2))return;this._newStaticIndex=u?o:s,this._$proxy.show().css({left:l?r.left:this._visibleBounds.left,top:a,width:l?this._visibleBounds.width+this._visibleBounds.left-r.left:this._visibleBounds.width,height:3})}}},t.prototype._getFieldByPos=function(t){var n=this._wijgrid.columns(),r,i,s,o,u;for(r=0,i=n.length;r<i;r++){s=n[r],o=s.options;if(o.isLeaf){u=e.grid.bounds(s.element);if(e.grid.isOverAxis(t.x,u.left,u.width))return s}}return null},t.prototype._getRowByPos=function(t){var r=this._wijgrid._rows(),i,s,o,u;for(i=0,s=r.length();i<s;i++){o=r.item(i)[0],u=e.grid.bounds(n(o));if(e.grid.isOverAxis(t.y,u.top,u.height))return o}return null},t}();t.uiFrozener=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=function(){function t(){}return t.generate=function(r,i,s){switch(r){case"append":t._processAppendMode(i,s);break;case"merge":t._processMergeMode(i,s);break;case"none":break;default:throw e.grid.stringFormat('Unsupported value: "{0}"',r)}},t._processAppendMode=function(i,s){var o={};e.grid.traverse(s,function(t){t.dynamic&&e.grid.validDataKey(t.dataKey)&&(o[t.dataKey]=!0)}),n.each(i,function(e,n){if("name"in n&&!o[n.name]){var r=t._createAutoField(n);s.push(r)}})},t._processMergeMode=function(i,s){var o=[],u;e.grid.traverse(s,function(t){if(t.isLeaf&&!t.isBand){var n=t.dataKey;e.grid.validDataKey(n)?i[n]!==undefined&&delete i[n]:n!==null&&o.push(t)}}),o.length&&(u=0,n.each(i,function(e,t){var n=o[u++];n&&(n.dataKey=t.name,delete i[e])})),n.each(i,function(e,n){var r=t._createAutoField(n);s.push(r)})},t._createAutoField=function(n){return e.grid.createDynamicField({dataKey:n.name})},t}();t.columnsGenerator=r})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e,t,n,r){this._timer=0,this._timeout=50,this._ignoreScrollEvents=!1,this._debounceScrolledEvent=!0,this._wijgrid=e,this._$content=t,this._view=this._wijgrid._view(),this._N=this._wijgrid._renderableRowsCount(),this._rowOuterHeight=r,this._updateContentHeight();var i=this._wijgrid.outerDiv.height()+this._N*this._rowOuterHeight;this._view._splitAreas.sw.height(i)}return e.prototype.scrollTo=function(e,t){this._debounceScrolledEvent=!1,this._completeListener=t,this._panelInst.vScrollTo(e*this._panelInst.options.vScroller.scrollSmallChange,!0)},e.prototype._updateContentHeight=function(){this._$content.height(this._rowOuterHeight*this._N)},e.prototype.attach=function(e){this._$scroller=e,this._panelInst=e.data("wijmo-wijsuperpanel"),this._updateContentHeight(),this._updateVerticalScroller(),e.bind("wijsuperpanelscrolled.wijgrid",t.proxy(this._onSuperpanelScrolled,this)),e.bind("wijsuperpanelscrolling.wijgrid",t.proxy(this._onSuperpanelScrolling,this)),e.bind("wijsuperpanelscrolled.wijgrid",t.proxy(this._onSuperpanelPostScrolled,this))},e.prototype._updateVerticalScroller=function(){var e=Math.max(0,this._N-(this._view.getVirtualPageSize()-1));this._setVerticalScrollerOptions(1,e)},e.prototype._setVerticalScrollerOptions=function(e,t){var n=this._panelInst.options.vScroller;n.scrollSmallChange=e,n.scrollLargeChange=e*4,t+=n.scrollLargeChange-1,n.scrollMax=t,this._panelInst.option("vScroller",n)},e.prototype._changeVisibleRowsCount=function(e){this._N=e,this._updateContentHeight(),this._updateVerticalScroller()},e.prototype.dispose=function(){this._$scroller.unbind(".wijgrid"),this._clearTimer()},e.prototype._clearTimer=function(){window.clearTimeout(this._timer),this._timer=0},e.prototype._onSuperpanelScrolling=function(e,t){if(this._ignoreScrollEvents||t.dir!=="v")return;if(this._timer===-1)return!1},e.prototype._onSuperpanelScrolled=function(e,n){var r=this;if(this._ignoreScrollEvents||n.dir!=="v")return;this._timer>0&&this._clearTimer(),this._timer!==-1&&(this._timer=window.setTimeout(function(){r._timer=-1;var e=Math.floor(n.newValue/r._panelInst.options.vScroller.scrollSmallChange),i=r._view._bounds.start;e<0&&(e=0),e>=r._N&&(e=r._N-1),e!==i?(r._debounceScrolledEvent=!0,r._wijgrid._handleVirtualScrolling(e,null,t.proxy(r._scrollingCompleted,r))):(r._debounceScrolledEvent=!0,r._log(),r._clearTimer())},this._debounceScrolledEvent?this._timeout:0))},e.prototype._scrollingCompleted=function(e){this._wijgrid._trackScrollingIndex(e),this._log(),this._completeListener&&(this._completeListener(),this._completeListener=null),this._clearTimer()},e.prototype._onSuperpanelPostScrolled=function(){t.isFunction(this._postScrolled)&&this._postScrolled.apply(this,arguments)},e.prototype._log=function(){},e}();e.uiVirtualScroller=n})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=function(){function e(e){this._items=[],this._capacity=null,this._maxRowIndex=e}return e.prototype.add=function(e){this._capacity=null;var t=this._items.length,n;if(!t||(n=this._items[t-1]).end<e.start)t&&e.start-n.end===1?n.end=e.end:this._items.push(e);else{var r=this._binSearchByStartVal(e.start),i=this._binSearchByEndVal(e.end),s=r<0?~r:r,o=i<0?~i:i,u=r>=0||s>0&&e.start<=this._items[s-1].end,a=i>=0||o<t&&e.end<=this._items[o].end&&e.end>=this._items[o].start,f;u?a?r>=0?(this._items[o].start=this._items[s].start,(f=o-s)&&this._items.splice(s,f)):(this._items[o].start=this._items[s-1].start,(f=o-s+1)&&this._items.splice(s-1,f)):r>=0?(this._items[s].end=e.end,(f=o-s-1)&&this._items.splice(s,f)):(this._items[s-1].end=e.end,(f=o-s)&&this._items.splice(s,f)):a?(this._items[o].start=e.start,(f=o-s)&&this._items.splice(s,f)):this._items.splice(s,o-s,e)}},e.prototype.remove=function(e){this._capacity=null;var t=this._items.length;if(t){var n=this._binSearchByStartVal(e.start),r=this._binSearchByEndVal(e.end),i=n<0?~n:n,s=r<0?~r:r,o=n>=0||i>0&&e.start<=this._items[i-1].end,u=r>=0||s<t&&e.end<=this._items[s].end&&e.end>=this._items[s].start;if(o)if(u){var a=n>=0?n:i-1,f=r>=0?r:s;if(n>=0&&r>=0)this._items.splice(i,s-i+1);else if(n>=0)this._items[s].start=e.end+1,this._items.splice(i,s-i);else if(r>=0)a===f?this._items[i-1].end=e.start-1:(this._items[i].end=e.start-1,this._items.splice(i,s-i+1));else if(a===f){var l=this._items[i-1].end;this._items[i-1].end=e.start-1,this._items.splice(i,0,{start:e.end+1,end:l})}else this._items[i-1].end=e.start-1,this._items[s].start=e.end+1,this._items.splice(i,s-i)}else n>=0?this._items.splice(i,s-i):(this._items[i].end=e.start-1,this._items.splice(i,s-i-1));else u?r>=0?this._items.splice(i,s-i+1):(this._items[s].start=e.end+1,this._items.splice(i,s-i)):this._items.splice(i,s-i)}},e.prototype.clear=function(){this._capacity=0,this._items=[]},e.prototype.item=function(e){return this._items[e]},e.prototype.forEachIndex=function(e,t,n){if(e<0)return;var r=this._items.length,i=this._getIteratorStateFor(e),s=0,o=!0,u=!1;if(i){var a=i.j;for(var f=i.i;f<r&&!u;f++){var l=this._items[f];o||(a=l.start);for(a;a<=l.end&&!u;a++){if(++s>t&&t!==-1)return;u=n(a)===!1}o=!1}}},e.prototype.forEachIndexBackward=function(e,t,n){if(e<0)return;var r=this._items.length,i=this._getIteratorStateFor(e),s=0,o=!0,u=!1;if(i){var a=i.j;for(var f=i.i;f>=0&&!u;f--){var l=this._items[f];o||(a=l.end);for(a;a>=l.start&&!u;a--){if(++s>t&&t!==-1)return;u=n(a)===!1}o=!1}}},e.prototype._getIteratorStateFor=function(e){var t=this._items.length,n=0;for(var r=0;r<t;r++){var i=this._items[r];n+=i.end-i.start+1;var s=n-e;if(s>=0)return{i:r,j:i.end-s+1}}return null},e.prototype.getAbsIndex=function(e){for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t],i=r.end-r.start;if(e<=i)return r.start+e;e-=i+1}return-1},e.prototype.getRenderedIndex=function(e){var t=this.hasAbsIndex(e);if(t>=0){var n=0;for(var r=0;r<t;r++){var i=this._items[r];n+=i.end-i.start+1}return n+(e-this._items[t].start)}return-1},e.prototype.hasAbsIndex=function(e){if(this._items.length){var t=this._binSearchByStartVal(e);if(t>=0)return t;t=~t;if(t>0&&e<=this._items[t-1].end)return t-1}return-1},e.prototype.length=function(){return this._items.length},e.prototype.capacity=function(){if(this._capacity===null){var e=0;for(var t=0,n=this._items.length;t<n;t++){var r=this._items[t];e+=r.end-r.start+1}this._capacity=e}return this._capacity},e.prototype.truncate=function(e,t){this.truncateByStart(e),this.truncateByStart(t)},e.prototype.truncateByCount=function(e){var t=0;if(e===0)this._items=[];else for(var n=0,r=this._items.length;n<r;n++){var i=this._items[n];t+=i.end-i.start+1;if(t>=e){t>e&&(i.end-=t-e),this._items.splice(n+1,this._items.length-(n+1));break}}},e.prototype.truncateByStart=function(e,t){var n=this._binSearchByStartVal(e),r=this._items.length;n<0?(n=~n,n<r?n>0&&this._items[n-1].end>=e?(this._items[n-1].start=e,this._items.splice(0,n-1)):(t&&(this._items[n].start=e),this._items.splice(0,n)):this._items=[]):this._items.splice(0,n)},e.prototype.truncateByEnd=function(e,t){var n=this._binSearchByEndVal(e),r=this._items.length;n<0?(n=~n,n<r?(this._items[n].end=e,this._items.splice(n+1,this._items.length-n+1)):this._items=[]):this._items.splice(n+1,this._items.length-n+1)},e.prototype.deleteFromTop=function(e){var t=0,n=0;for(t=0;t<this._items.length;t++){var r=this._items[t];n+=r.end-r.start+1;if(n>=e)break}n>=e&&(this._items[t].start=n-e+1),this._items.splice(0,t)},e.prototype.deleteFromBottom=function(e){var t=0,n=0;for(t=this._items.length-1;t>=0;t--){var r=this._items[t];n+=r.end-r.start+1;if(n>=e)break}n>=e&&(this._items[t].start=n-e+1),this._items.splice(t,this._items.length-t)},e.prototype._binSearchByStartVal=function(e){var t=0,n=this._items.length-1;while(t<=n){var r=n+t>>1,i=this._items[r].start-e;if(i===0)return r;i<0?t=r+1:n=r-1}return~t},e.prototype._binSearchByEndVal=function(e){var t=0,n=this._items.length-1;while(t<=n){var r=n+t>>1,i=this._items[r].end-e;if(i<0)t=r+1;else{if(!i)return r;n=r-1}}return~t},e}();e.renderBoundsCollection=t})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(n,r,i,s){function u(t){return s.parser=s.parser||e.defaultParsers[t],!s.parser&&n!=null&&e.errors.noParser(t),s.parser}var o=n;s=t.extend({nullString:"",format:""},s),r=r||n!=null&&typeof n,i=i||r;if(!i)return n;if(i=="string")return u(r),s.parser?s.parser.toStr(n,s.culture,s.format,s.nullString,!0):n;u(i);if(!s.parser)return n;n=s.parser.parse(n,s.culture,s.format,s.nullString,!0);if(isNaN(n)&&n!=null&&e.util.isNumeric(n)){if(s.ignoreError)return o;e.errors.cantConvert(i,o)}return n}function i(t){return function(){return n||e.util.logError(e.errors.noGlobalize.create().message),t.apply(this,arguments)}}var t=jQuery,n=Globalize;e.convert=r,e.defaultParsers={string:{parse:function(e,t,n,r,i){switch(e){case null:return null;case r:if(i)return null;case undefined:case"&nbsp":return"";default:return""+e}},toStr:function(e,t,n,r,i){return e===null&&i?r:""+e}},number:{parse:function(e,t,r,i,s){var o=typeof e;return o==="number"?isNaN(e)?NaN:e:!e&&e!==0||e==="&nbsp;"||e===i&&s?null:n.parseFloat(e,10,t.name)},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"n",t.name)}},currency:{parse:function(e,t,r,i,s){var o=typeof e;return o==="number"?isNaN(e)?NaN:e:!e&&e!==0||e==="&nbsp;"||e===i&&s?null:(o==="string"&&(e=e.replace(t.numberFormat.currency.symbol,"")),n.parseFloat(e,10,t.name))},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"c",t.name)}},datetime:{parse:function(e,t,r,i,s){var o;if(e instanceof Date)return e;if(!e||e==="&nbsp;"||e===i&&s)return null;o=/^\/Date\((\d+)\)\/$/.exec(e);if(o)return new Date(parseInt(o[1],10));var u=n.parseDate(e,r,t.name);if(u==null||isNaN(u))u=Date.parse(e),u=isNaN(u)?NaN:new Date(u);return u},toStr:function(e,t,r,i,s){return e===null&&s?i:n.format(e,r||"d",t.name)}},"boolean":{parse:function(e,n,r,i,s){var o=typeof e;if(o==="number")return e!=0;if(o==="boolean")return e;o==="string"&&(e=t.trim(e));if(!e||e==="&nbsp;"||e===i&&s)return null;switch(e.toLowerCase()){case"true":return!0;case"false":return!1}return NaN},toStr:function(e,t,n,r,i){return e===null&&i?r:e?"true":"false"}}},t.each(e.defaultParsers,function(e,t){t.parse=t.parse&&i(t.parse),t.toStr=t.toStr&&i(t.toStr)})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){(function(n){function r(r){function i(r){var s=[];if(r.length===0)return s;var o=n.Connective.AND;return e.util.each(r,function(r,u){if(r==0&&e.util.isString(u)){var a=u.toLowerCase();if(a==n.Connective.AND||a==n.Connective.OR){o=a;return}}if($.isArray(u)){u=i(u);if(!u)return;if(u[0]===o||u.length==2){u.shift(),s=s.concat(u);return}}else{var f=t.normalizeCondition(u);if(!f)return;f.property=u.property,u=f}s.push(u)}),s.length==0?null:(s.unshift(o),s)}return i(r)}function i(t){if(!$.isArray(t))return null;var i={isEmpty:!0,original:t,normalized:r(t),func:null};return i.normalized==null?i.func=function(e){return!0}:(i.isEmpty=!1,i.func=function(t){function r(i){var s=i[0]===n.Connective.AND,o=s?e.util.every:e.util.some;return o(i,function(n,i){if(i===0)return s;if($.isArray(n))return r(n);var o=e.util.getProperty(t,n.property);return n.op.apply(o,n.value)})}return r(i.normalized)}),i}function s(t){return i(t)||e.filtering.compile(t)}n.Connective={AND:"and",OR:"or"},n.compile=s})(t.extended||(t.extended={}));var n=t.extended})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=jQuery,r=e.data,i=r.filtering.extended,s=function(){function e(e){this.real=e,this._updatingFilter=!1,this._overrideFilter(),this._makeMemberProxies()}return e.prototype._overrideFilter=function(){var e=this;this.filter=r.observable(this.real.filter()),this.filter.subscribe(function(t){e.real.filter()!==t&&!e._updatingFilter&&e.refresh({filter:t})}),this.real.filter.subscribe(function(t){t!==e._lastSetFilter&&e.filter(t)})},e.prototype.refresh=function(e,t){typeof t=="undefined"&&(t=!1),e=n.extend({},e);var r=e.filter;e.filter=this._coerceFilter(e.filter),this._lastSetFilter=e.filter,this._updatingFilter=!0;try{n.isFunction(e.filter)&&!n.isFunction(r)?this.filter(r):this.filter(e.filter)}finally{this._updatingFilter=!1}return this.real.refresh(e,t)},e.prototype._makeMemberProxies=function(){var e=this;r.util.each(this.real,function(t,r){if(!n.isFunction(r)||e[t]||t.charAt(0)==="_")return;e[t]=n.isFunction(r.subscribe)?r:function(){return r.apply(e.real,arguments)}})},e.create=function(n){return new e(n)},e.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(e){var t=[];return n.each(e,function(e,s){if(!n.isArray(s))s=[s];else{var o=r.util.isString(s[0])&&s[0].toLowerCase();if(o===i.Connective.AND||o===i.Connective.OR){t.push(s);return}}var u=[];n.each(s,function(t,n){var i=r.filtering.normalizeCondition(n);i&&(i.property=e,u.push(i))}),u.length>0&&t.push(u)}),t.length>0?t:null},e.prototype._coerceFilter=function(e){if(n.isArray(e))return i.compile(e).func;if(!n.isPlainObject(e))return e;e=n.extend(!0,{},e);var t={};n.each(e,function(i,s){n.isArray(s)||(s=[s]);if(t){var o=r.util.isString(s[0])&&s[0].toLowerCase();if(s.length==1||s.length==2&&(o==="and"||o==="or")){t[i]=s[s.length-1];return}}e[i]=s,t=null});if(t)return t;var s=this._convertComplexPropertyFilterToExtendedFilterFormat(e);return i.compile(s).func},e.prototype._unsafeReplace=function(e,t){this.real.sourceArray[e]=t,this.real.local[e]=t},e.prototype._unsafeSplice=function(e,t,n){arguments.length===2?(this.real.sourceArray.splice(e,t),this.real.local.splice(e,t)):(this.real.sourceArray.splice(e,t,n),this.real.local.splice(e,t,n))},e.prototype._unsafePush=function(e){this.real.sourceArray.push(e),this.real.local.push(e)},e}();t.GridDataView=s})(e.grid||(e.grid={}));var t=e.grid})(wijmo||(wijmo={})),define("wijmo.wijgrid",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijlightbox";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._keyDownHandler=function(t){var n=this.options,r=this,i=e.getKeyCodeEnum();if(t.keyCode&&t.keyCode===i.ESCAPE){r._isFullSize()?r._toggleFullSize():n.closeOnEscape&&r._close(),t.preventDefault();return}if(n.keyNav&&t.keyCode)switch(t.keyCode){case i.LEFT:case i.DOWN:r.back(),t.preventDefault();break;case i.RIGHT:case i.UP:r.next(),t.preventDefault();break;case i.HOME:n.groupItems.length>0&&r.show(0),t.preventDefault();break;case i.END:n.groupItems.length>0&&r.show(n.groupItems.length-1),t.preventDefault()}},r.prototype._create=function(){var e=this.options,t=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.groupItems||(e.groupItems=[]),this._defaults={transAnimation:{animated:"fade",duration:400,easing:"linear"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"}},this._parse(),this.container=n("<div/>").addClass("wijmo-wijlightbox "+e.wijCSS.widget+" wijmo-wijlightbox-controls-"+e.controlsPosition).css("z-index",e.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",n.proxy(t,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=n("<div></div>").addClass(["wijmo-wijlightbox-frame",e.wijCSS.content,e.wijCSS.cornerAll,e.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=n("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),e.activeIndex===undefined?(typeof e.activeIndex!="number"&&e.cookie&&(e.activeIndex=parseInt(t._cookie(),10)),e.activeIndex=e.activeIndex||(e.groupItems.length?0:-1)):e.activeIndex===null&&(e.activeIndex=-1),e.activeIndex=e.activeIndex>=0&&e.groupItems[e.activeIndex]||e.activeIndex<0?e.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){t._addState("hover",n(this))},mouseout:function(){t._removeState("hover",n(this))},mousedown:function(){t._addState("active",n(this))},mouseup:function(){t._removeState("active",n(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},r.prototype.destroy=function(){var e=this.options,t=this;return this._hideWaiting(),this._hideOverlay(),e.cookie&&this._cookie(null,e.cookie),this.container.remove(),n.Widget.prototype.destroy.apply(t,arguments),t},r.prototype._setOption=function(e,t){var r=this.options[e];n.Widget.prototype._setOption.apply(this,arguments);switch(e){case"groupItems":this.options.activeIndex>=t.length?this.show(t.length-1):this.options.activeIndex<0&&t.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(t);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior();break;case"controlsPosition":this._set_controlsPosition(r,t)}},r.prototype._set_controlsPosition=function(e,t){e!==t&&(this._removeCounter(),this._removeNavButtons(),this.container.removeClass("wijmo-wijlightbox-controls-outside wijmo-wijlightbox-controls-inside").addClass("wijmo-wijlightbox-controls-"+t),this._createCounter(),this._createNavButtons())},r.prototype._initClickBehavior=function(){var e=this.options,t=this;this.content.unbind("click"),e.clickPause?this._groupMode()&&this.content.click(function(){t[t.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(r){if(t.isPlaying())return!1;var i=n.extend({},n(this).offset(),{width:n(this).outerWidth(!0),height:n(this).outerHeight(!0)});r.pageX>=i.left&&r.pageX<i.left+i.width/2?t.backBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.back():t.nextBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.next()})},r.prototype._initHoverBehavior=function(){var e=this.options,t=this;this.frame.unbind(".wijlightbox"),e.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._showAccessories(!0)},"mouseleave.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._hideAccessories(!0)},"mousemove.wijlightbox":function(){t.container.data("moving.wijlightbox")===!1&&t.container.data("accessvisible.wijlightbox")===!1&&t.frame.trigger("mouseenter")}})},r.prototype._getPlugins=function(){var e=this.container.data("plugins.wijlightbox"),t,r,i;return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(t=[],n.each(window.navigator.plugins,function(e,n){t.push(n.name)}),t=t.join(","),i=t.indexOf("Flip4Mac")>-1,e={fla:t.indexOf("Shockwave Flash")>-1,qt:t.indexOf("QuickTime")>-1,wmp:!i&&t.indexOf("Windows Media")>-1,f4m:i}):(r=function(e){var t;try{t=new ActiveXObject(e)}catch(n){}return!!t},e={fla:r("ShockwaveFlash.ShockwaveFlash"),qt:r("QuickTime.QuickTime"),wmp:r("wmplayer.ocx"),f4m:!1}),this.container.data("plugins.wijlightbox",e)),e},r.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},r.prototype._getFragmentId=function(e){var t=/^#.+/,r=n(e).attr("href")||"",i=r.split("#")[0],s=n("base")[0];return i&&(i===window.location.toString().split("#")[0]||s&&i===s.attributes.href)&&(r=e.hash,e.href=r),t.test(r)?this._sanitizeSelector(r):""},r.prototype._parseLink=function(e){var t=this,r=this.options,i=n(e),s={href:undefined,player:undefined,img:undefined,gallery:undefined},o,u,a,f,l=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&i[0].tagName.toLowerCase()==="a"){o=i.attr("rel"),n.each(l,function(e,t){s[t]=i.attr(t)||""});if(!s.href)return;s.player||(s.player=r.player||t._getPlayerName(s.href)),u=i.find("img"),u&&u.length===0&&(u=i),u&&u.length>=1&&(n.each(["title","alt"],function(e,t){s[t]=u.attr(t)||s[t]}),s.img=u),o&&(a=o.match(/\[(.*?)\]/),a&&(s.gallery=a[1]||s.gallery),n.each(o.split(";"),function(e,t){var n=t.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);n&&(s[n[1]]=n[2])})),s.player==="inline"&&(s.href=t._getFragmentId(e)),s.gallery?(f=r.groupItems.length,r.groupItems[f]=s,i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,f),!1}})):i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,s),!1}})}},r.prototype._parse=function(){var e=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(t,n){e._parseLink(n)})},r.prototype._showAccessories=function(e){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(e),this._showToolboxButtons(e),this._showCounter(e)},r.prototype._hideAccessories=function(e){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(e),this._hideToolboxButtons(e),this._hideCounter(e)},r.prototype._groupMode=function(){var e=this.options;return e.groupItems&&e.groupItems.length>1},r.prototype._resetText=function(){this._removeText(),this._createText()},r.prototype._createText=function(e){var t=this,r=t.options,i,s,o,u,a;if(r.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;i=r.textPosition.toLowerCase(),s=n("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+i+" "+r.wijCSS.content+" "+r.wijCSS.helperClearFix),u=n("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+i+" "+r.wijCSS.helperClearFix).appendTo(s),a=n("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+i+" "+r.wijCSS.helperClearFix).appendTo(s);if(r.textPosition==="inside")s.addClass(r.wijCSS.content+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame);else if(r.textPosition==="outside")s.addClass([r.wijCSS.content,r.wijCSS.cornerAll,r.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container);else if(r.textPosition==="overlay"||r.textPosition==="titleOverlay")o=n("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+i+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),s.width(this.frame.width()).appendTo(this.frame),r.textPosition==="titleOverlay"&&s.bind({mouseenter:function(){o.stop(),s.stop();var e=u.outerHeight(!0)+a.outerHeight(!0),i=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)},mouseleave:function(){o.stop(),s.stop();var e=u.height(),i=n.extend({},t._defaults.textHideOption,r.textHideOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)}});this._refreshText(e)},r.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},r.prototype._getActiveItem=function(){var e=this.options;return e.groupItems&&e.groupItems.length&&e.activeIndex>=0&&e.activeIndex<e.groupItems.length?e.groupItems[e.activeIndex]:null},r.prototype._refreshText=function(e){var t=this,r=this.options,i,s,o,u,a;if(r.textPosition==="none")return;i=this.container.data("item.wijlightbox")||this._getActiveItem();if(!i)return;s=this.container.find(".wijmo-wijlightbox-text"),o=this.container.find(".wijmo-wijlightbox-title"),u=this.container.find(".wijmo-wijlightbox-detail"),a=this.container.find(".wijmo-wijlightbox-mask"),a.stop(),s.stop(),o.html(i.title),u.html(i.alt),r.textPosition==="outside"&&s.width(this.frame.width());var f=o.outerHeight(!0),l=u.outerHeight(!0),c=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});if(r.textPosition==="overlay"||r.textPosition==="titleOverlay"){var h=f+(r.textPosition==="overlay"?l:0);s.height(0),a.height(0),s.animate({height:h},c),a.animate({height:h},c)}else e?s.height(f+l):(s.height(0),s.animate({height:f+l},c))},r.prototype._addState=function(e,t){t.is(":not(."+this.options.wijCSS.stateDisabled+")")&&t.addClass("ui-state-"+e)},r.prototype._removeState=function(e,t){t.removeClass("ui-state-"+e)},r.prototype._createNavButtons=function(){var e=this,t=this.options;if(!t.showNavButtons||!this._groupMode()){this._removeNavButtons();return}this.backBtn||(this.backBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerRight:t.wijCSS.cornerLeft)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.back(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}})),this.nextBtn||(this.nextBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerLeft:t.wijCSS.cornerRight)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.next(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}}))},r.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=undefined),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=undefined)},r.prototype._refreshNavButtons=function(){var e=this.options,t;this.backBtn&&(t=e.activeIndex===0?"addClass":"removeClass",this.backBtn[t](e.wijCSS.stateDisabled)),this.nextBtn&&(t=e.activeIndex>=e.groupItems.length-1?"addClass":"removeClass",this.nextBtn[t](e.wijCSS.stateDisabled))},r.prototype._showNavButtons=function(e){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideNavButtons=function(e){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createToolbox=function(){this.toolBox||(this.toolBox=n("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},r.prototype._showToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createCtrlButtons=function(){var e=this,t=this.options,r=t.wijCSS;if(!t.ctrlButtons||t.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var i=t.ctrlButtons.split("|");i.length===1&&i[0]===t.ctrlButtons&&(i=t.ctrlButtons.split(",")),n.each(i,function(i,s){s=n.trim(s),s==="play"&&!this.playBtn?e.playBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",r.stateDefault,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconPlay+"'></span>").hide().click(function(){return e.isPlaying()?e.stop():(t.activeIndex>=t.groupItems.length-1&&e.show(0),e.play()),!1}):s==="stop"&&!this.stopBtn&&(e.stopBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",r.stateDefault,r.stateDisabled,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconStop+"'></span>").hide().click(function(){return e.isPlaying()&&(e.stop(),e.show(0)),!1}))}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},r.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=undefined),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=undefined)},r.prototype._refreshCtrlButtons=function(){var e=this.options.wijCSS;if(this.playBtn){var t=this.playBtn.find("."+e.icon);t&&(t.removeClass(e.iconPause+" "+e.iconPlay),t.addClass(this.isPlaying()?e.iconPause:e.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](e.stateDisabled)},r.prototype._createDialogButtons=function(){var e=this,t=this.options,r;if(!t.dialogButtons||t.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox(),r=t.dialogButtons.split("|"),r.length===1&&r[0]===t.dialogButtons&&(r=t.dialogButtons.split(",")),n.each(r,function(r,i){i=n.trim(i),i==="close"&&!this.closeBtn?e.closeBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconClose+"'></span>").hide().click(function(){return e._close(),!1}):i==="fullSize"&&!this.fullBtn&&(e.fullBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return e._toggleFullSize(),!1}))}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),this.btnSep||(this.btnSep=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox))},r.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=undefined),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=undefined)},r.prototype._refreshDialogButtons=function(){var e=this.options.wijCSS;if(this.fullBtn){var t=this.fullBtn.find("."+e.icon);t&&(t.removeClass(e.iconArrow4Diag+" "+e.iconNewWin),t.addClass(this._isFullSize()?e.iconNewWin:e.iconArrow4Diag))}},r.prototype._createTimerBar=function(){var e=this,t=e.options;if(!t.showTimer||!e._groupMode()){e._removeTimerBar();return}e._createToolbox(),e.timerBar||(e.timerBar=n("<div></div>").addClass("wijmo-wijlightbox-timerbar "+t.wijCSS.content+" ui-priority-secondary "+t.wijCSS.cornerAll).appendTo(e.toolBox),e.timerMeter=n("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+t.wijCSS.content+" "+t.wijCSS.cornerAll).appendTo(e.toolBox))},r.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=undefined),this.timerBar&&(this.timerBar.remove(),this.timerBar=undefined)},r.prototype._createCounter=function(){var e=this,t=e.options;if(!t.showCounter||!e._groupMode()){e._removeCounter();return}e.counter||(e.counter=n("<div></div>").addClass("wijmo-wijlightbox-counter "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerTL:t.wijCSS.cornerAll)).hide().appendTo(e.frame))},r.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=undefined)},r.prototype._refreshCounter=function(e){var t=this,r=this.options,i="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(r.showCounter&&r.groupItems.length>1&&this.counter){e===undefined&&(e=r.activeIndex);var s=r.groupItems.length;if(r.counterType==="sequence"){var o=0,u=s,a=parseInt(r.counterLimit,10)||0;if(a>=2&&a<s){var f=Math.floor(a/2);o=Math.min(u-a,Math.max(o,e-f)),u=Math.min(u,o+a)}while(o!==u)n("<a></a>").addClass("wijmo-wijlightbox-counter-item "+r.wijCSS.content+" "+r.wijCSS.stateDefault+(o===e?" wijmo-wijlightbox-counter-active "+r.wijCSS.stateActive:"")).text((++o).toString()).appendTo(this.counter);this.counter.find("a").click(function(e,r){return n(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(t.show(parseInt(n(this).text(),10)-1),!1)})}else{var l=r.counterFormat||"[i] of [n]";i=l.replace("[i]",e+1),i=i.replace("[n]",s),n("<span></span>").text(i).appendTo(this.counter)}}},r.prototype._showCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(e?600:0)},r.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name);return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},r.prototype._showOverlay=function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new n.wijmo.wijlightbox.overlay(this))},r.prototype._hideOverlay=function(){var e=this.container.data("overlay.wijlightbox");if(!e)return;e.close(),this.container.removeData("overlay.wijlightbox")},r.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},r.prototype._showWaiting=function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new n.wijmo.wijlightbox.overlay(this,!0))},r.prototype._hideWaiting=function(){var e=this.container.data("waiting.wijlightbox");if(!e)return;e.close(),this.container.removeData("waiting.wijlightbox")},r.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},r.prototype._getUrl=function(e){var t=this.options,n=typeof e=="string"?e:e.href,r=t.rootUrl;return r&&r.length>0&&(r.indexOf("//")===-1&&(r=window.location.protocol+"//"+window.location.host+(r.startsWith("/")?"":"/")+r),r.substr(r.length-1,1)!=="/"&&(r+="/"),n=r+(n.substr(0,1)==="/"?n.substr(1):n)),n},r.prototype._preload=function(){var e=this.options,t;for(t=Math.max(0,e.activeIndex);t<Math.min(e.activeIndex+5,e.groupItems.length);t++)e.groupItems[t].image||(e.groupItems[t].image=new Image,e.groupItems[t].image.src=this._getUrl(e.groupItems[t]))},r.prototype._slideAnimate=function(e,t,r){var i=["position","top","bottom","left","right","width","height"],s=n.setMode(t,e.mode||"show"),o=s==="show",u=e.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};n.save(t,i),t.show(),l=e.distance||t[a==="top"?"outerHeight":"outerWidth"](!0),n.createWrapper(t).css({overflow:"hidden"}),o&&t.css(a,f?isNaN(l)?parseInt("-"+l):-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,t.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){s==="hide"&&t.hide(),n.restore(t,i),n.removeWrapper(t),r()}})},r.prototype._slideTo=function(e,t,r,i,s){var o=this.options,u=this,a=e.getElement(),f,l,c,h,p,d,v,m;a.parent().is(".wijmo-wijlightbox-aniwrapper")?f=a.parent():(f=n.createWrapper(a).css({overflow:"hidden"}),f.removeClass("ui-effects-wrapper"),f.addClass("wijmo-wijlightbox-aniwrapper")),f.parent().is(".wijmo-wijlightbox-aniwrapper")?l=f.parent():(l=n.createWrapper(f).css({overflow:"hidden"}),l.removeClass("ui-effects-wrapper"),l.addClass("wijmo-wijlightbox-aniwrapper")),c=o.slideDirection||"horizontal",h=a.outerWidth(),p=a.outerHeight(),c==="horizontal"?(a.width(h).css("float",i?"left":"right"),f.width(2*h).css({left:i?0:-1*h,position:"absolute"})):(a.height(p),f.width(h).css({top:i?0:-1*p,position:"absolute"}).height(2*p)),t.appendTo(f),d=t.getElement(),c==="horizontal"?d.width(h).css("float",i?"left":"right"):d.height(p),this.container.data("animating.wijlightbox",!0),v=function(){a=f.children(":last");while(a.parent().is(".wijmo-wijlightbox-aniwrapper"))a.parent().replaceWith(a);a.css({"float":"",width:"",height:""}),o.autoSize&&!u._isFullSize()?u._resize(s):(n.isFunction(s)&&s.apply(u),u._refreshText())},m={mode:"hide",direction:c==="horizontal"?i?"left":"right":i?"up":"down",easing:r.easing,distance:c==="horizontal"?h:p,duration:r.duration},n.effects?f.effect("slide",m,v):u._slideAnimate(m,f,v)},r.prototype._moveFrom=function(e,t,r){var i=this,s=this.options,o;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t),i._removeText();if(t.animated==="none"||t.duration<=0){i._createText(),n.isFunction(r)&&r.apply(i),this.container.data("moving.wijlightbox",!1);return}o=n.extend({width:i.frame.width(),height:i.frame.height()},i.container.offset()),i.frame.width(e.width).height(e.height),i.container.css({left:e.left,top:e.top,width:i.frame.outerWidth(),position:"absolute",opacity:""}),i._moveTo(o,t,function(){i.frame.width(o.width),i.container.width(i.frame.outerWidth()),i._createText(),i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)})},r.prototype._moveTo=function(e,t,r){var i=this,s=this.options;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t);var o=t.duration/2,u=t.animated,a=i._isOpen(),f=u==="wh"?{left:e.left,top:undefined}:{top:e.top},l=u==="wh"?{top:e.top,left:undefined}:{left:e.left},c=u==="wh"?{width:e.width,height:undefined}:{height:e.height},h=u==="wh"?{height:e.height,width:undefined}:{width:e.width};if(u==="wh"||u==="hw"){a&&i.container.animate(f,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(c,{duration:o,easing:t.easing,complete:function(){a&&i.container.animate(l,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(h,{duration:o,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})}});return}a&&i.container.animate({left:e.left,top:e.top},{duration:t.duration,easing:t.easing,queue:!0}),i.frame.animate({width:e.width,height:e.height,opacity:1},{duration:t.duration,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})},r.prototype.show=function(e){return this._show(e),this},r.prototype._resize=function(e){var t=this,r=n.extend({},t.container.offset(),{width:t.frame.width(),height:t.frame.height()});t._size(),t._isOpen()&&t._position(),t._moveFrom(r,e)},r.prototype._onAfterShow=function(){var e=this,t=this.options,n;e._refreshNavButtons(),e.container.data("animating.wijlightbox",!1),t.modal||e._hideOverlay(),n={index:t.activeIndex,item:t.groupItems[t.activeIndex]},e._trigger("show",null,n),e._startTimer()},r.prototype._show=function(e,t,r){var i=this,s=this.options,o,u;if(this.container.data("showing.wijlightbox"))return o=[function(){i._show(e,t,r)}],this.container.queue("showqueue",o),this;u=s.activeIndex;if(!n.isPlainObject(e)){u=e;if(u<0||u>=s.groupItems.length)return this;e=s.groupItems[u]}e&&this.container.data("item.wijlightbox",e),this._groupMode()&&this._preload(),n.isFunction(t)&&(r=t,t=undefined),r||(r=i._onAfterShow);var a={index:u,item:e};if(i._trigger("beforeShow",null,a)===!1)return this;this.container.data("showing.wijlightbox",!0);var f=function(){n.isFunction(r)&&r.apply(i),i.container.data("showing.wijlightbox",!1),i.container.dequeue("showqueue"),i.container.clearQueue("showqueue")};i._refreshCounter(u);var l=this.container.data("player.wijlightbox"),c,h=function(){i.container.data("playerwidth.wijlightbox",c.width),i.container.data("playerheight.wijlightbox",c.height);var e=n.extend({},i._defaults.transAnimation,s.transAnimation);if(s.activeIndex===u||e.animated==="none"||e.duration<=0||!i._isOpen()){s.activeIndex=u,l&&l.remove(),c.appendTo(i.content),i._refreshText(),f();return}s.cookie&&i._cookie(s.activeIndex,s.cookie);if(e.animated==="slide")t=t===undefined?u>s.activeIndex:t,i._slideTo(l,c,e,t,f),s.activeIndex=u;else{s.activeIndex=u;var r=function(){c&&(c.appendTo(i.content,!0),c.fadeIn(e.duration,f))};n.browser.msie&&i.frame.trigger("mouseleave");var o=function(){l&&l.remove(),s.autoSize&&!i._isFullSize()?i._resize(r):(r(),i._refreshText())};l?l.fadeOut(e.duration*.4,o):o()}};return c=this._createPlayer(e,h),this},r.prototype.next=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex+1;return e.loop&&(t%=e.groupItems.length),t<e.groupItems.length?(this._show(t,!0),!0):!1},r.prototype.back=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex-1;return e.loop&&(t=t<0?e.groupItems.length-1:t),t>=0?(this._show(t,!1),!0):!1},r.prototype.adjustPosition=function(){this._position()},r.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},r.prototype._startTimer=function(){if(!this.isPlaying()||!this._groupMode())return;var e=this.options,t=this,n;e.showTimer===!0?(this.timerMeter||this._createTimerBar(),n=this.timerBar.width(),t.timerMeter.width("0"),t.timerMeter.animate({width:n},e.delay,null,function(){t.isPlaying()&&!t.next()&&t.stop()})):window.setTimeout(function(){t.isPlaying()&&!t.next()&&t.stop()},e.delay)},r.prototype.play=function(){if(!this._groupMode())return!1;this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),this._startTimer()},r.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},r.prototype._size=function(e,t){var r=this.options,i=r.width,s=r.height,o=r.autoSize?this.container.data("playerwidth.wijlightbox")||i:i,u=r.autoSize?this.container.data("playerheight.wijlightbox")||s:s,a,f=u/o;if(typeof e=="boolean")t=e;else if(n.isPlainObject(e)&&"width"in e&&"height"in e)i=e.width,s=e.height;else{a=this.container.data("player.wijlightbox"),r.autoSize&&a&&a.name==="img"&&(o>i&&(o=i,u=Math.round(i*f)),u>s&&(u=s,o=Math.round(s/f))),i=o,s=u;if(t)return{width:i,height:s}}this.frame.width(i).height(s),this.container.width(this.frame.outerWidth(!0))},r.prototype._position=function(){var e=this.options,t=[],r=[0,0],i,s=e.position;if(s){if(typeof s=="string"||typeof s=="object"&&"0"in s)t=s.split?s.split(" "):[s[0],s[1]],t.length===1&&(t[1]=t[0]),n.each(["left","top"],function(e,n){+t[e]===t[e]&&(r[e]=t[e],t[e]=n)}),s={my:t.join(" "),at:t.join(" "),offset:r.join(" ")};s=n.extend({},e.position,s)}i=this.container.is(":visible"),i||this.container.show(),this.container.css({top:0,left:0}).position(s),i||this.container.hide()},r.prototype._getRelRect=function(e){var t;return e&&(n.isPlainObject(e)&&"left"in e&&"top"in e&&"width"in e&&"height"in e?t=n.merge({},e):e=n(e),e.jquery&&e.length&&(t=n.extend({},e.offset(),{width:e.width(),height:e.height()}))),t},r.prototype._close=function(e){var t=this.options,r=this,i,s,o;if(!this._isOpen())return;s={rel:e};if(!1===this._trigger("beforeClose",null,s))return;e=s.rel,!e&&this._groupMode()&&(e=t.groupItems[t.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),o=function(){r._removePlayer(),r.container.hide(),r._trigger("close"),r.container.unbind("keypress.wijlightbox"),r.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),n(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},i=this._getRelRect(e),i||this.container.data("rect.wijlightbox")&&(i=this.container.data("rect.wijlightbox")),this._removeText();if(i){this._moveTo(i,{animated:"sync",duration:200},o);return}return o.call(),this},r.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},r.prototype._open=function(e,t){if(this._isOpen())return;var r=this.options,i=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({top:"2px",right:"4px"}):this.toolBox.css({top:"",right:""}));var s=function(){r.modal&&i._showOverlay(),r.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var t=i._getRelRect(e);i.container.css("opacity",0),i.container.show(),i._size(),i._createText(!0),i._refreshText(!0),i._position(),i.container.data("open.wijlightbox",!0);if(e&&t)i.container.data("rect.wijlightbox",t),i._moveFrom(t,{animated:"sync"});else{var s=n.extend({},i._defaults.transAnimation,r.transAnimation);s.animated==="fade"?(i.container.hide(),i.container.fadeIn(s.duration,function(){i._createText()})):i._createText(),this.container.data("moving.wijlightbox",!1)}n(document).bind("keydown.wijlightbox",n.proxy(i,"_keyDownHandler")).bind("click.wijlightbox",function(e){var t=e.target||e.srcElement;i._isOpen()&&!!r.closeOnOuterClick&&t!==i.container.get(0)&&n(t).parents().index(i.container)<0&&i._close()}),r.autoPlay&&this.play(),i._refreshNavButtons(),i._refreshDialogButtons();var u={index:r.activeIndex,item:r.groupItems[r.activeIndex]};i._trigger("show",null,u),i._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(t,!0,s),this},r.prototype._getWinRect=function(){var e=n(window);return n.extend({width:e.width(),height:e.height()},e.offset()||{left:2,top:2})},r.prototype._resizeHandler=function(){var e=this;e._removeText(),e._size(e._getWinRect()),e._createText()},r.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},r.prototype._toggleFullSize=function(){var e=this,t=n(window);if(!e._isOpen())return;if(this._isFullSize())e.toolBox&&e.toolBox.css({top:"",right:""}),this.container.data("fullsize.wijlightbox",!1),t.unbind("resize.wijlightbox",n.proxy(this,"_resizeHandler")),e._resize(function(){e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),t.bind("resize.wijlightbox",n.proxy(this,"_resizeHandler"));var r=e._getWinRect(),i=this.frame.borderSize();r.width-=i.width,r.height-=i.height,e._removeText(),e._moveTo(r,{animated:"sync"},function(){e.toolBox&&e.toolBox.css({top:"2px",right:"4px"}),e.frame.width(r.width),e.container.width(e.frame.outerWidth()),e._createText(),e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())})}this._refreshDialogButtons()},r.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},r.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var t=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=["mp4","mpg","mpeg","ogg","ogv"],a=this._getExt(e);if(a){if(n.inArray(a,t)>=0)return"img";if(n.inArray(a,r)>=0)return"swf";if(n.inArray(a,i)>=0)return"flv";if(n.inArray(a,o)>=0)return"wmp";if(n.inArray(a,s)>=0)return"qt";if(n.inArray(a,u)>=0)return"wijvideo"}return"iframe"},r.prototype._adjustPlayerSize=function(e,t){var n=this.container.data("player.wijlightbox");n&&n.adjustSize&&n.adjustSize(e,t)},r.prototype._removePlayer=function(){var e=this.container.data("player.wijlightbox");e&&(e.remove(),this.container.data("player.wijlightbox",null))},r.prototype._createPlayer=function(e,t,r){var i=e.player;if(!n.isFunction(n.wijmo.wijlightbox[i]))throw"unknown player "+i;var s=this,o=!1,u,a=function(){o=!0,this._hideWaiting(),n.isFunction(t)&&window.setTimeout(function(){t.apply(s)},1)},f=function(){this._hideWaiting(),n.isFunction(r)&&r.apply(s)};return u=new n.wijmo.wijlightbox[i](this,e,a,f),this.container.data("player.wijlightbox",u),window.setTimeout(function(){o===!1&&s._showWaiting()},200),u},r}(e.wijmoWidget);t.wijlightbox=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijlightbox')",this.textPosition="overlay",this.width=600,this.height=400,this.autoSize=!0,this.player="",this.groupItems=null,this.rootUrl="",this.ctrlButtons="",this.dialogButtons="close",this.counterType="default",this.counterFormat="[i] of [n]",this.counterLimit=10,this.showCounter=!0,this.showNavButtons=!0,this.showTimer=!1,this.controlsPosition="inside",this.showControlsOnHover=!0,this.clickPause=!1,this.keyNav=!1,this.modal=!1,this.position={my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=n(this).css(e).offset().top;t<0&&n(this).css("top",e.top-t)}},this.zIndex=1e3,this.closeOnEscape=!0,this.closeOnOuterClick=!0,this.autoPlay=!1,this.delay=2e3,this.loop=!0,this.cookie=null,this.transAnimation={animated:"fade",duration:400,easing:"linear"},this.slideDirection="horizontal",this.resizeAnimation={animated:"sync",duration:400},this.textShowOption={duration:300,easing:"linear"},this.textHideOption={duration:300,easing:"linear"},this.showMovieControls=!0,this.autoPlayMovies=!0,this.flashParams={bgcolor:"#000000",allowfullscreen:!0},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.beforeShow=null,this.show=null,this.open=null,this.beforeClose=null,this.close=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijlightbox",i.prototype),n.extend(n.wijmo.wijlightbox,{img:function(e,t,r,i){this.name="img",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var s=this;n("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var i=n(this);s.width=t.width?parseInt(t.width,10):i.width(),s.height=t.height?parseInt(t.height,10):i.height(),i.remove(),r&&n.isFunction(r)&&r.apply(e)},error:function(){n(this).remove(),i&&n.isFunction(i)&&i.apply(e)}}).attr("src",this.url)},swf:function(e,t,r,i){this.name="swf";var s=e.options;this.id="flashhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)},iframe:function(e,t,r,i){this.name="swf",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),t.width&&(this.width=parseInt(t.width,10)),t.height&&(this.height=parseInt(t.height,10)),this.$iframe=n("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(e.content).bind("load",function(){r&&n.isFunction(r)&&r.apply(e)}).attr("src",this.url)},inline:function(e,t,r,i){this.name="inline";var s=e.options,o=s.wijCSS,u="wijmo-wijlightbox-frame "+o.content;" "+o.cornerAll+" "+o.helperClearFix,this.lightbox=e,this.item=t,this.width=t.width?parseInt(t.width,10):s.width;if(t.height)this.height=parseInt(t.height,10);else{var a=n(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+o.widget+'">'+'<div class="'+u+'">'+'<div class="'+u+'">'+'<div class="wijmo-wijlightbox-content"> '+"</div></div></div></div>").appendTo(document.body).width(this.width);this.height=a.outerHeight(!0)+10,a.unwrap(),a.remove()}r&&n.isFunction(r)&&r.apply(e)},flv:function(e,t,r,i){this.name="flv";var s=e.options;this.id="flvhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var o=20;this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wmp:function(e,t,r,i){var s=e.options,o;this.name="wmp",this.id="wmphost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),o=n.browser.msie?70:45,this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},qt:function(e,t,r,i){var s=e.options,o=16;this.name="qt",this.id="qthost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wijvideo:function(e,t,r,i){var s=e.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.wijvideosrc=!t.wijvideosrc||t.wijvideosrc===""?null:this.lightbox._getUrl(t.wijvideosrc),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)}}),n.extend(n.wijmo.wijlightbox.img.prototype,{appendTo:function(e,t){this.$element=n("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),t&&this.$element.hide(),this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"?(e.children().length&&e.empty(),this.$element.prependTo(e)):this.$element.appendTo(e)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.swf.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r=t.flashInstall,i=t.flashVersion,s=t.flashVars,o=t.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",i,r,s,o)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.iframe.prototype,{appendTo:function(e,t){t||this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(e,t){this.$iframe&&this.$iframe.fadeOut(e,t)},fadeIn:function(e,t){this.$iframe&&this.$iframe.fadeIn(e,t)},getElement:function(){return this.$iframe}}),n.extend(n.wijmo.wijlightbox.inline.prototype,{appendTo:function(e,t){this.$element=n(this.item.href).clone().appendTo(e),t||this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.flv.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r="100%",i="100%",s=t.flvPlayer,o=t.flashInstall,u=t.flashVersion,a=n.extend({file:this.url,width:r,height:i,autostart:t.autoPlayMovies?"true":"false",controlbar:t.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},t.flashVars),f=n.extend({autostart:t.autoPlayMovies?"true":"false",allowscriptaccess:"always"},t.flashParams);S.flash.embedSWF(s,this.id,r,i,u,o,a,f)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wmp.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var t=this.lightbox.options,r='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',i={autostart:t.autoPlayMovies?1:0,url:undefined,uimode:undefined,showcontrols:undefined},s;n.browser.msie?(r+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',i.url=this.url,i.uimode=t.showMovieControls?"full":"none"):(r+=' type="video/x-ms-wmv"',r+=' data="'+this.url+'"',i.showcontrols=t.showMovieControls?1:0),r+=">";for(s in i)r+='<param name="'+s+'" value="'+i[s]+'">';r+="</object>",this.$container.html(r)},remove:function(){if(n.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(e){}this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.qt.prototype,{appendTo:function(e,t){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var r=this.lightbox.options,i=r.autoPlayMovies?"true":"false",s=r.showMovieControls?"true":"false",o=n.browser.msie?"<object":"<embed",u={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true",classid:undefined,codebase:undefined,type:undefined,src:undefined,autoplay:undefined,controller:undefined},a,f;n.browser.msie?(u.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",u.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(u.type="video/quicktime",u.src=this.url,u.autoplay=i,u.controller=s);for(a in u)u[a]&&(o+=" "+a+'="'+u[a]+'"');o+=">";if(n.browser.msie){var l={src:this.url,scale:"aspect",controller:s,autoplay:i};for(f in l)o+='<param name="'+f+'" value="'+l[f]+'">'}o+=n.browser.msie?"</object>":"</embed>",t&&e.hide(),this.$container.html(o),t&&e.show()},remove:function(){try{document[this.id].Stop(),document[this.id]=null}catch(e){}this.$container.remove()},fadeOut:function(e,t){t.call();return},fadeIn:function(e,t){t.call();return},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(e){var t=this.lightbox.options;this.$container=n("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:t.autoPlayMovies?"true":"false",controls:t.showMovieControls?"controls":""}).appendTo(e),!this.url||n("<source/>").attr({src:this.url}).appendTo(this.$container),!this.wijvideosrc||n("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({fullScreenButtonVisible:!1})},remove:function(){this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container},adjustSize:function(e,t){this.$container.wijvideo("setWidth",e),this.$container.wijvideo("setHeight",t)}}),n.extend(n.wijmo.wijlightbox,{overlay:function(e,t){this.mask=n("<div></div>").addClass(e.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(t?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){return e.options.closeOnOuterClick&&e._close(),!1}),n.fn.bgiframe&&this.mask.bgiframe();if(t){this.mask.css("z-index",this.zIndex);var r=n("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);r.css({left:(this.mask.width()-r.width())/2,top:(this.mask.height()-r.height())/2})}n(window).bind("resize.wijlightbox-overlay",n.proxy(this,"resize")),window.setTimeout(function(){var e;this.mask&&(e=n.wijmo.wijlightbox.overlay,n(document).bind(e.events,function(t){if(n(t.target).zIndex()<e.zIndex)return!1}))},1)}}),n.extend(n.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".wijlightbox-overlay"}).join(" "),close:function(){n(document).unbind(".wijlightbox-overlay"),n(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=undefined},height:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height():e):n(document).height()},width:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width():e):n(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(e.lightbox||(e.lightbox={}));var t=e.lightbox})(wijmo||(wijmo={})),define("wijmo.wijlightbox",function(){});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=jQuery,r="wijtooltip",i="@wijtp@",s="wijmo-wijtooltip",o=s+"-arrow-",u=parseFloat,a=window,f=document,l=Math,c=l.max,h={},p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t._tooltips=new Array,t.prototype._setOption=function(t,r){var i=this,s="_set_"+t,o=i.options[t];if(t==="controlwidth"){i._setSize("width",r);return}if(t==="controlheight"){i._setSize("height",r);return}e.prototype._setOption.call(this,t,r),n.isPlainObject(r)&&(i.options[t]=n.extend({},o,r)),i[s]&&i[s](o)},t.prototype._set_cssClass=function(){var e=this,t=e.options,n=e._tooltipCache._$tooltip;if(!n)return;n.hasClass(t.cssClass)||n.addClass(t.cssClass)},t.prototype._set_content=function(e){var t=this;t._isAjaxCallback?(t._callbacked=!0,t.show(),t._callbacked=!1):t._setText()},t.prototype._create=function(){var e=this,n=e.options,r=e.element,s=r&&r.attr("id"),o="",u="",a=n.group||i,f=t._getTooltip(a);f?f.count++:(f=e._createTooltip(),f.count=0,t._tooltips[a]=f),u=n.cssClass?n.cssClass:"",f._$tooltip.hasClass(u)||f._$tooltip.addClass(u),n.position.of=e.element,e._bindLiveEvents(),e._tooltipCache=f,s!==""&&(o=f._$tooltip.attr("aria-describedby"),o=o===undefined?"":o+" ",f._$tooltip.attr("aria-describedby",o+s)),n.controlwidth&&n.controlwidth!==""&&e._setSize("width",n.controlwidth),n.controlheight&&n.controlheight!==""&&e._setSize("height",n.controlheight)},t.prototype.destroy=function(){var n=this,r=n.element,s=n.options.group||i;r.unbind(".tooltip"),r.attr("title",n._content),t._removeTooltip(s),e.prototype.destroy.call(this)},t.prototype.widget=function(){return this._tooltipCache._$tooltip},t.prototype.show=function(){this.showAt(null)},t.prototype.showAt=function(e){var t=this,r=t._tooltipCache,i=r?r._$tooltip:null,s=t.options;if(!r||s.disabled)return;i.stop(!0,!0),r._showAnimationTimer&&(clearTimeout(r._showAnimationTimer),r._showAnimationTimer=null),r._showAtAnimationTimer&&(clearTimeout(r._showAtAnimationTimer),r._showAtAnimationTimer=null),r._hideAnimationTimer&&(clearTimeout(r._hideAnimationTimer),r._hideAnimationTimer=null);if(!e){if(s.ajaxCallback&&n.isFunction(s.ajaxCallback)&&!t._callbacked){t._isAjaxCallback=!0,s.ajaxCallback.call(t.element);return}t._setText()}s.showDelay?r._showAtAnimationTimer=setTimeout(function(){t._showToolTipHelper(e,i)},s.showDelay):t._showToolTipHelper(e,i)},t.prototype.hide=function(){var e=this,t=e._tooltipCache;if(!t)return;t._showAnimationTimer&&(clearTimeout(t._showAnimationTimer),t._showAnimationTimer=null),t._showAtAnimationTimer&&(clearTimeout(t._showAtAnimationTimer),t._showAtAnimationTimer=null),t._hideAnimationTimer&&(clearTimeout(t._hideAnimationTimer),t._hideAnimationTimer=null),e.options.hideDelay?t._hideAnimationTimer=setTimeout(n.proxy(e._hideTooltip,e),e.options.hideDelay):e._hideTooltip()},t.prototype._createTooltip=function(){var e=this,t=e.options,r=new TooltipCache,i=n("<div></div>").addClass(t.wijCSS.tooltip).addClass(t.wijCSS.widget).addClass(t.wijCSS.content).addClass(t.wijCSS.cornerAll),s=n("<div></div>").addClass(t.wijCSS.tooltipContainer),o=n("<div></div>").addClass(t.wijCSS.content).addClass(t.wijCSS.tooltipPointer).append(n("<div></div>").addClass(t.wijCSS.tooltipPointerInner)),u=n("<div></div>").addClass(t.wijCSS.tooltipTitle).addClass(t.wijCSS.header).addClass(t.wijCSS.cornerAll),a=n("<a href='#'></a>").addClass(t.wijCSS.tooltipClose).addClass(t.wijCSS.stateDefault).addClass(t.wijCSS.cornerAll);return a.append(n("<span></span>").addClass(t.wijCSS.icon).addClass(t.wijCSS.iconClose)).bind("click",n.proxy(e._onClickCloseBtn,e)),t.closeBehavior!=="sticky"&&a.hide(),t.showCallout||o.hide(),i.append(u).append(a).append(s).append(o).css("position","absolute").attr("role","tooltip").appendTo("body").hide(),r._$tooltip=i,r._container=s,r._callout=o,r._closeBtn=a,r._title=u,r},t.prototype._showToolTipHelper=function(e,t){if(e){var n=this,r=n._tooltipCache,i,s=0,o=0,u,a,f,l,c,p={},d,v,m=t.is(":visible"),v=r?r._callout:null;if(!v)return;n._setText(),h=t.offset(),t.offset({left:0,top:0}).show(),i=v.position(),s=i.left,o=i.top,f=n._getBorder(v),u=f.left||f.right,a=f.top||f.bottom,l=t.width(),c=t.height(),d=n._getCalloutShape(),p={rt:{left:e.x-l-u,top:e.y-o},rc:{left:e.x-l-u,top:e.y-c/2},rb:{left:e.x-l-u,top:e.y-o-a},lt:{left:e.x+u,top:e.y-o},lc:{left:e.x+u,top:e.y-c/2},lb:{left:e.x+u,top:e.y-o-a},tl:{left:e.x-s,top:e.y+a},tc:{left:e.x-l/2,top:e.y+a},tr:{left:e.x-s-u,top:e.y+a},bl:{left:e.x-s,top:e.y-c-a},bc:{left:e.x-l/2,top:e.y-c-a},br:{left:e.x-s-u,top:e.y-c-a},cc:{left:e.x-l/2,top:e.y-c/2}}[d],d=n._flipTooltip(p,d,f),n._setUnfilledCallout(d),t.offset(p),m||t.hide(),n._calloutShape=d}else{h=t.offset();if(this.options.mouseTrailing){this._setCalloutCss();return}this._setPosition()}this._showTooltip()},t.prototype._bindLiveEvents=function(){var e=this,t=e.options,r=e.element;e._content===undefined&&(e._content=r.attr("title"),r.attr("title","")),r.unbind(".tooltip"),t.mouseTrailing&&r.bind("mousemove.tooltip",function(n){if(t.disabled)return;var r=t.position.offset||"",i=r.split(" ");i.length===2?e.showAt({x:n.pageX+parseInt(i[0],10),y:n.pageY+parseInt(i[1],10)}):e.showAt({x:n.pageX,y:n.pageY})}),r.bind("mouseout.tooltip",n.proxy(e._hideIfNeeded,e));switch(t.triggers){case"hover":r.bind("mouseover.tooltip",n.proxy(e.show,e));break;case"click":r.bind("click.tooltip",n.proxy(e.show,e));break;case"focus":r.bind("focus.tooltip",n.proxy(e.show,e)).bind("blur.tooltip",n.proxy(e._hideIfNeeded,e));break;case"rightClick":r.bind("contextmenu.tooltip",function(t){e.show(),t.preventDefault()})}},t.prototype._hideIfNeeded=function(){var e=this,t=e.options,n=t.closeBehavior;if(n==="sticky"||t.modal||n==="none"||t.disabled)return;e.hide()},t.prototype._flipTooltip=function(e,t,n){var r=this,i=r._tooltipCache,s=i?i._$tooltip:null,o={width:s.width(),height:s.height()},u=r._flipCallout(e,o,t),a=u&&u.flip,f,l;return!i||!u||!a.h&&!a.v?u.calloutShape:(f=s.width(),l=s.height(),a.h==="l"?e.left-=f+n.right*2+1:a.h==="r"?e.left+=f+n.left*2+1:a.v==="t"?e.top-=l+n.bottom*2+1:a.v==="b"&&(e.top+=l+n.top*2+1),u.calloutShape)},t.prototype._flipCallout=function(e,t,r){var i=this,s=i.options,u=i._tooltipCache,f=u._$tooltip,l={h:!1,v:!1},c=n(a),h=(s.position.collision||"flip").split(" ");h.length===1&&(h[1]=h[0]);if(!u||h[0]!=="flip"&&h[1]!=="flip")return{flip:l,calloutShape:null};h[0]==="flip"&&(e.left<0||e.left+t.width>c.width()+c.scrollLeft())&&(l.h=!0),h[0]==="flip"&&(e.top<0||e.top+t.height>c.height()+c.scrollTop())&&(l.v=!0);if(s.showCallout){l.h&&(r.indexOf("l")>-1?(r=r.replace(/l/,"r"),l.h="l"):r.indexOf("r")>-1&&(r=r.replace(/r/,"l"),l.h="r")),l.v&&(r.indexOf("t")>-1?(r=r.replace(/t/,"b"),l.v="t"):r.indexOf("b")>-1&&(r=r.replace(/b/,"t"),l.v="b"));if(l.h||l.v)i._removeCalloutCss(),f.addClass(o+r)}return{flip:l,calloutShape:r}},t.prototype._set_position=function(e){var t=this,n=t.options,r=n.position;n.showCallout&&((e.my!==r.my||e.at!==r.at)&&t._setPosition(),t._setCalloutOffset(!0)),t._setText()},t.prototype._set_showCallout=function(){var e=this,t=e._tooltipCache,n=t?t._callout:null;if(!t||!n)return;e.options.showCallout?(e._setCalloutCss(),n.show()):n.hide()},t.prototype._set_closeBehavior=function(){var e=this,t=e._tooltipCache,n=t?t._closeBtn:null;n&&n[e.options.closeBehavior==="sticky"?"show":"hide"]()},t.prototype._set_triggers=function(){this._bindLiveEvents()},t.prototype._set_mouseTrailing=function(){this._bindLiveEvents()},t.prototype._getCalloutShape=function(){var e=this,t=e.options.position,r=function(e){return n.makeArray(n.map(e,function(e){return e.substr(0,1)}))},i=r(t.my.split(" ")),s=r(t.at.split(" ")),o=[];return i.length===2&&(o=i),i[0]===s[0]?(i[1]==="t"&&s[1]==="b"||i[1]==="b"&&s[1]==="t")&&o.reverse():s[0]==="c"&&o.reverse(),o[0]==="c"&&o.reverse(),o.join("")},t.prototype._setCalloutCss=function(){var e=this,t=e.options,r=e._tooltipCache,i=r?r._$tooltip:null,s="",u="",a=n.support.isTouchEnabled;if(!t.showCallout&&!a)return;return e._removeCalloutCss(),u=e._getCalloutShape(),s=o+u,i&&i.addClass(s),u},t.prototype._removeCalloutCss=function(){var e=this._tooltipCache,t;e&&(t=e._$tooltip,n.each(["tl","tc","tr","bl","bc","br","rt","rc","rb","lt","lc","lb","cc"],function(e,n){var r=o+n;if(t.hasClass(r))return t.removeClass(r),!1}))},t.prototype._getBorder=function(e){var t={};return n.each(["top","right","left","bottom"],function(n,r){t[r]=u(e.css("border-"+r+"-width"))}),t},t.prototype._setPosition=function(){var e=this,t=e.options,r=t.position,i=r.my,s=e._tooltipCache,o=s?s._$tooltip:null,a=o.is(":hidden"),f=e._setCalloutCss(),l=f?f.split(""):null,c=[0,0],h=s._callout,p,d,v,m,g,y={width:o.width(),height:o.height()},b,w,E=n.support.isTouchEnabled;a&&o.show(),o.css({left:0,top:0});if(t.showCallout){p=e._getBorder(h),v=u(h.css("left")),d=u(h.css("top")),m=u(h.css("right")),g=u(h.css("bottom"));switch(l[0]){case"l":c[0]=p.right;break;case"r":c[0]=-p.left;break;case"b":c[1]=g;break;case"t":c[1]=-d}switch(l[1]){case"t":c[1]=-d;break;case"b":c[1]=g;break;case"r":c[0]=m;break;case"l":c[0]=-v}}if(E&&E()){switch(l[0]){case"l":c[0]=c[0]+30;break;case"r":c[0]=c[0]-30;break;case"b":c[1]=c[1]-30;break;case"t":c[1]=c[1]+30}switch(l[1]){case"t":c[1]=c[1]+30;break;case"b":c[1]=c[1]-30;break;case"r":c[0]=c[0]-30;break;case"l":c[0]=c[0]+30}}r.my.indexOf(" ")>-1?i=r.my.split(" ")[0]+"+"+c[0]+" "+r.my.split(" ")[1]+"+"+c[1]:i=r.my+"+"+c[0]+" "+r.my+"+"+c[1],o.position({my:i,at:r.at,of:r.of,collision:"none none"}),b=e._flipCallout(o.offset(),y,f),w=b.flip;if(w.h||w.v)o.css({left:0,top:0}),o.position({my:i,at:r.at,of:r.of,collision:r.collision});t.showCallout&&e._setUnfilledCallout(f),e._calloutShape=f,a&&o.hide()},t.prototype._setCalloutOffset=function(e){var t=this,r=t.options,i=t._tooltipCache,s=i?i._$tooltip:null,o=i&&i._callout,u=t._calloutShape,a=!1,f=r.position.offset,l="",c=[],h=r.calloutAnimation;if(!o)return;if(!f||f.length===0)return;o.stop(!0,!0),n.each(["tr","tc","tl","bl","bc","br"],function(e,t){if(u===t)return a=!0,!1}),f&&(c=f.split(" "),c.length===2?l=a?c[0]:c[1]:c.length===1&&(l=c[0])),c&&c.length===2&&c[0]==="none"&&c[1]==="none"?o.css("left","").css("top",""):l==="none"?o.css(a?"left":"top",""):l!==""&&(e&&!e.disabled?a?o.animate({left:l},h.duration,h.easing):o.animate({top:l},h.duration,h.easing):o.css(a?"left":"top",l))},t.prototype._setUnfilledCallout=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n&&n._callout,s=i&&i.children(),o=e.split(""),u=r?r.css("background-color"):"";if(!s)return;s.css({"border-left-color":"","border-top-color":"","border-bottom-color":"","border-right-color":""});if(!t.options.calloutFilled)switch(o[0]){case"l":s.css("border-right-color",u);break;case"t":s.css("border-bottom-color",u);break;case"r":s.css("border-left-color",u);break;case"b":s.css("border-top-color",u)}},t.prototype._showTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o,u,a;if(!i)return;if(e._trigger("showing",null,e)===!1){s.is(":visible")&&s.hide();return}e._showModalLayer(),s.css("z-index",99999),n.fn.wijshow?(u={show:!0,context:s},o=n.extend({},r.animation,r.showAnimation),s.is(":visible")&&(a=s.offset(),s.offset(h),n.extend(u,{pos:a}),o.animated="tooltipSlide"),s.wijshow(o,t.animations,u,null,function(){e._trigger("shown")})):(s.show(),e._trigger("shown")),e._setCalloutOffset(!1)},t.prototype._hideTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o=n.extend({},r.animation,r.hideAnimation),u;if(!i)return;if(e._trigger("hiding",null,e)===!1)return;e._hideModalLayer(),n.fn.wijhide?(u={show:!1,context:s},s.wijhide(o,t.animations,u,null,function(){e._trigger("hidden"),s.css("z-index","")})):(s.hide(),e._trigger("hidden"),s.css("z-index",""))},t.prototype._getContent=function(e){var t={data:""},r;return n.isFunction(e)?(r=e.call(this.element,t),t.data!==""?t.data:r):window[e]&&n.isFunction(window[e])?(r=window[e].call(this.element,t),t.data!==""?t.data:r):e},t.prototype._setText=function(){var e=this,t=e.options,n=e._tooltipCache,r="",i="",s=n?n._title:null;if(!n)return;r=e._getContent(t.content),r=r===""?e._content:r,n._container.html(r),i=e._getContent(t.title),i!==""?s.html(i).show():s.hide()},t.prototype._showModalLayer=function(){var e=this,t=e.options,r=null;e.options.modal&&(r=n("<div>").addClass(t.wijCSS.overlay).css("z-index",99e3).width(e._getDocSize("Width")).height(e._getDocSize("Height")).appendTo("body"),n(window).bind("resize.wijtooltip",function(){r.width(e._getDocSize("Width")).height(e._getDocSize("Height"))}),e._tooltipCache._modalLayer=r)},t.prototype._hideModalLayer=function(){var e=this,t=e._tooltipCache._modalLayer;t&&(t.css("z-index","").remove(),n(window).unbind("resize.wijtooltip"))},t.prototype._getDocSize=function(e){var t,r,i="documentElement",s="body";return n.browser.msie&&parseFloat(n.browser.version)<9?(t=c(f[i]["scroll"+e],f[s]["scroll"+e]),r=c(f[i]["offset"+e],f[s]["offset"+e]),t<r?n(a)[e.toLowerCase()]()+"px":t+"px"):n(f)[e.toLowerCase()]()+"px"},t.prototype._setSize=function(e,t){var n=this,r=n._tooltipCache,i=r?r._$tooltip:null;i&&i.css(e,t)},t.prototype._onClickCloseBtn=function(e){this.hide(),e.preventDefault()},t.animations={fade:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate(e.show?{opacity:"show"}:{opacity:"hide"},e)},tooltipSlide:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate({left:e.pos.left,top:e.pos.top},e)}},t._getTooltip=function(n){return t._tooltips[n]},t._removeTooltip=function(n){var r=t._tooltips[n],i=r?r._$tooltip:null;r&&(r.count--,r.count<=0&&(i.remove(),t._tooltips[n]=null))},t}(e.wijmoWidget);t.wijtooltip=p;var d=function(){function e(){this.initSelector=":jqmData(role='wijtooltip')",this.wijCSS={tooltip:"wijmo-wijtooltip",tooltipContainer:"wijmo-wijtooltip-container",tooltipPointer:"wijmo-wijtooltip-pointer",tooltipPointerInner:"wijmo-wijtooltip-pointer-inner",tooltipTitle:"wijmo-wijtooltip-title",tooltipClose:"wijmo-wijtooltip-close"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a"},this.content="",this.title="",this.closeBehavior="auto",this.mouseTrailing=!1,this.triggers="hover",this.position={my:"left bottom",at:"right top",offset:null},this.showCallout=!0,this.animation={animated:"fade",duration:500,easing:null},this.showAnimation={},this.hideAnimation={},this.showDelay=150,this.hideDelay=150,this.calloutAnimation={duration:1e3,disabled:!1,easing:null},this.calloutFilled=!1,this.modal=!1,this.group=null,this.ajaxCallback=null,this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.cssClass="",this.controlwidth=null,this.controlheight=null}return e}();p.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new d),n.wijmo.registerWidget(r,p.prototype)})(e.tooltip||(e.tooltip={}));var t=e.tooltip})(wijmo||(wijmo={}));var TooltipCache=function(){function e(){}return e}();define("wijmo.wijtooltip",function(){}),require(["log","jquery","jquery.cookie","jquery.globalize","jquery.globalize.cultures","jquery.mousewheel","jquery-form","jquery-ui.core","jquery-ui.widget","jquery-ui.position","jquery-ui.mouse","jquery-ui.draggable","jquery-ui.droppable","jquery-ui.resizable","jquery-ui.sortable","jquery-ui.dialog","jquery-ui.button","jquery-ui.datepicker","jquery-ui.effects.core","jquery-ui.effects.blind","jquery-ui.effects.slide","jquery-ui.effects.scale","jquery-ui.effects.transfer","jquery-ui.effects.fade","jquery-ui.datepicker.i18n","wijmo.widget","wijmo.data","wijmo.data.wijdatasource","wijmo.wijtextselection","wijmo.wijutil","wijmo.wijinputcore","wijmo.wijinputdate","wijmo.wijinputmask","wijmo.wijinputmaskcore","wijmo.wijinputnumber","wijmo.wijinputtext","wijmo.wijlist","wijmo.wijpopup","wijmo.wijcalendar","wijmo.wijtabs","wijmo.wijdatasource","wijmo.wijsplitter","wijmo.wijsuperpanel","wijmo.wijmenu","wijmo.wijexpander","wijmo.wijaccordion","wijmo.wijdialog","wijmo.wijpager","wijmo.wijgrid","wijmo.wijlightbox","wijmo.wijtooltip"],function(){}),define("hooks/vendor",function(){});