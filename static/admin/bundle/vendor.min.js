// usage: log('inside coolFunc',this,arguments);
// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){
    log.history = log.history || [];   // store logs to an array for reference
    log.history.push(arguments);
    if(this.console){
        console.log( Array.prototype.slice.call(arguments) );
    }
};
// make it safe to use console.log always
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});
;
/*
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend(g,{expires:-1}));return true}return false}}));;
/*!
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

(function( window, undefined ) {

var Globalize,
	// private variables
	regexHex,
	regexInfinity,
	regexParseFloat,
	regexTrim,
	// private JavaScript utility functions
	arrayIndexOf,
	endsWith,
	extend,
	isArray,
	isFunction,
	isObject,
	startsWith,
	trim,
	truncate,
	zeroPad,
	// private Globalization utility functions
	appendPreOrPostMatch,
	expandFormat,
	formatDate,
	formatNumber,
	getTokenRegExp,
	getEra,
	getEraYear,
	parseExact,
	parseNegativePattern;

// Global variable (Globalize) or CommonJS module (globalize)
Globalize = function( cultureSelector ) {
	return new Globalize.prototype.init( cultureSelector );
};

if ( typeof require !== "undefined" &&
	typeof exports !== "undefined" &&
	typeof module !== "undefined" ) {
	// Assume CommonJS
	module.exports = Globalize;
} else {
	// Export as global variable
	window.Globalize = Globalize;
}

Globalize.cultures = {};

Globalize.prototype = {
	constructor: Globalize,
	init: function( cultureSelector ) {
		this.cultures = Globalize.cultures;
		this.cultureSelector = cultureSelector;

		return this;
	}
};
Globalize.prototype.init.prototype = Globalize.prototype;

// 1. When defining a culture, all fields are required except the ones stated as optional.
// 2. Each culture should have a ".calendars" object with at least one calendar named "standard"
//    which serves as the default calendar in use by that culture.
// 3. Each culture should have a ".calendar" object which is the current calendar being used,
//    it may be dynamically changed at any time to one of the calendars in ".calendars".
Globalize.cultures[ "default" ] = {
	// A unique name for the culture in the form <language code>-<country/region code>
	name: "en",
	// the name of the culture in the english language
	englishName: "English",
	// the name of the culture in its own language
	nativeName: "English",
	// whether the culture uses right-to-left text
	isRTL: false,
	// "language" is used for so-called "specific" cultures.
	// For example, the culture "es-CL" means "Spanish, in Chili".
	// It represents the Spanish-speaking culture as it is in Chili,
	// which might have different formatting rules or even translations
	// than Spanish in Spain. A "neutral" culture is one that is not
	// specific to a region. For example, the culture "es" is the generic
	// Spanish culture, which may be a more generalized version of the language
	// that may or may not be what a specific culture expects.
	// For a specific culture like "es-CL", the "language" field refers to the
	// neutral, generic culture information for the language it is using.
	// This is not always a simple matter of the string before the dash.
	// For example, the "zh-Hans" culture is netural (Simplified Chinese).
	// And the "zh-SG" culture is Simplified Chinese in Singapore, whose lanugage
	// field is "zh-CHS", not "zh".
	// This field should be used to navigate from a specific culture to it's
	// more general, neutral culture. If a culture is already as general as it
	// can get, the language may refer to itself.
	language: "en",
	// numberFormat defines general number formatting rules, like the digits in
	// each grouping, the group separator, and how negative numbers are displayed.
	numberFormat: {
		// [negativePattern]
		// Note, numberFormat.pattern has no "positivePattern" unlike percent and currency,
		// but is still defined as an array for consistency with them.
		//   negativePattern: one of "(n)|-n|- n|n-|n -"
		pattern: [ "-n" ],
		// number of decimal places normally shown
		decimals: 2,
		// string that separates number groups, as in 1,000,000
		",": ",",
		// string that separates a number from the fractional portion, as in 1.99
		".": ".",
		// array of numbers indicating the size of each number group.
		// TODO: more detailed description and example
		groupSizes: [ 3 ],
		// symbol used for positive numbers
		"+": "+",
		// symbol used for negative numbers
		"-": "-",
		// symbol used for NaN (Not-A-Number)
		"NaN": "NaN",
		// symbol used for Negative Infinity
		negativeInfinity: "-Infinity",
		// symbol used for Positive Infinity
		positiveInfinity: "Infinity",
		percent: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "-n %|-n%|-%n|%-n|%n-|n-%|n%-|-% n|n %-|% n-|% -n|n- %"
			//   positivePattern: one of "n %|n%|%n|% n"
			pattern: [ "-n %", "n %" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent a percentage
			symbol: "%"
		},
		currency: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "($n)|-$n|$-n|$n-|(n$)|-n$|n-$|n$-|-n $|-$ n|n $-|$ n-|$ -n|n- $|($ n)|(n $)"
			//   positivePattern: one of "$n|n$|$ n|n $"
			pattern: [ "($n)", "$n" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent currency
			symbol: "$"
		}
	},
	// calendars defines all the possible calendars used by this culture.
	// There should be at least one defined with name "standard", and is the default
	// calendar used by the culture.
	// A calendar contains information about how dates are formatted, information about
	// the calendar's eras, a standard set of the date formats,
	// translations for day and month names, and if the calendar is not based on the Gregorian
	// calendar, conversion functions to and from the Gregorian calendar.
	calendars: {
		standard: {
			// name that identifies the type of calendar this is
			name: "Gregorian_USEnglish",
			// separator of parts of a date (e.g. "/" in 11/05/1955)
			"/": "/",
			// separator of parts of a time (e.g. ":" in 05:44 PM)
			":": ":",
			// the first day of the week (0 = Sunday, 1 = Monday, etc)
			firstDay: 0,
			days: {
				// full day names
				names: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
				// abbreviated day names
				namesAbbr: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
				// shortest day names
				namesShort: [ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ]
			},
			months: {
				// full month names (13 months for lunar calendards -- 13th month should be "" if not lunar)
				names: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", "" ],
				// abbreviated month names
				namesAbbr: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "" ]
			},
			// AM and PM designators in one of these forms:
			// The usual view, and the upper and lower case versions
			//   [ standard, lowercase, uppercase ]
			// The culture does not use AM or PM (likely all standard date formats use 24 hour time)
			//   null
			AM: [ "AM", "am", "AM" ],
			PM: [ "PM", "pm", "PM" ],
			eras: [
				// eras in reverse chronological order.
				// name: the name of the era in this culture (e.g. A.D., C.E.)
				// start: when the era starts in ticks (gregorian, gmt), null if it is the earliest supported era.
				// offset: offset in years from gregorian calendar
				{
					"name": "A.D.",
					"start": null,
					"offset": 0
				}
			],
			// when a two digit year is given, it will never be parsed as a four digit
			// year greater than this year (in the appropriate era for the culture)
			// Set it as a full year (e.g. 2029) or use an offset format starting from
			// the current year: "+19" would correspond to 2029 if the current year 2010.
			twoDigitYearMax: 2029,
			// set of predefined date and time patterns used by the culture
			// these represent the format someone in this culture would expect
			// to see given the portions of the date that are shown.
			patterns: {
				// short date pattern
				d: "M/d/yyyy",
				// long date pattern
				D: "dddd, MMMM dd, yyyy",
				// short time pattern
				t: "h:mm tt",
				// long time pattern
				T: "h:mm:ss tt",
				// long date, short time pattern
				f: "dddd, MMMM dd, yyyy h:mm tt",
				// long date, long time pattern
				F: "dddd, MMMM dd, yyyy h:mm:ss tt",
				// month/day pattern
				M: "MMMM dd",
				// month/year pattern
				Y: "yyyy MMMM",
				// S is a sortable format that does not vary by culture
				S: "yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"
			}
			// optional fields for each calendar:
			/*
			monthsGenitive:
				Same as months but used when the day preceeds the month.
				Omit if the culture has no genitive distinction in month names.
				For an explaination of genitive months, see http://blogs.msdn.com/michkap/archive/2004/12/25/332259.aspx
			convert:
				Allows for the support of non-gregorian based calendars. This convert object is used to
				to convert a date to and from a gregorian calendar date to handle parsing and formatting.
				The two functions:
					fromGregorian( date )
						Given the date as a parameter, return an array with parts [ year, month, day ]
						corresponding to the non-gregorian based year, month, and day for the calendar.
					toGregorian( year, month, day )
						Given the non-gregorian year, month, and day, return a new Date() object
						set to the corresponding date in the gregorian calendar.
			*/
		}
	},
	// For localized strings
	messages: {}
};

Globalize.cultures[ "default" ].calendar = Globalize.cultures[ "default" ].calendars.standard;

Globalize.cultures.en = Globalize.cultures[ "default" ];

Globalize.cultureSelector = "en";

//
// private variables
//

regexHex = /^0x[a-f0-9]+$/i;
regexInfinity = /^[+\-]?infinity$/i;
regexParseFloat = /^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;
regexTrim = /^\s+|\s+$/g;

//
// private JavaScript utility functions
//

arrayIndexOf = function( array, item ) {
	if ( array.indexOf ) {
		return array.indexOf( item );
	}
	for ( var i = 0, length = array.length; i < length; i++ ) {
		if ( array[i] === item ) {
			return i;
		}
	}
	return -1;
};

endsWith = function( value, pattern ) {
	return value.substr( value.length - pattern.length ) === pattern;
};

extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction(target) ) {
		target = {};
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( isObject(copy) || (copyIsArray = isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && isArray(src) ? src : [];

					} else {
						clone = src && isObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

isArray = Array.isArray || function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Array]";
};

isFunction = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Function]";
};

isObject = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Object]";
};

startsWith = function( value, pattern ) {
	return value.indexOf( pattern ) === 0;
};

trim = function( value ) {
	return ( value + "" ).replace( regexTrim, "" );
};

truncate = function( value ) {
	if ( isNaN( value ) ) {
		return NaN;
	}
	return Math[ value < 0 ? "ceil" : "floor" ]( value );
};

zeroPad = function( str, count, left ) {
	var l;
	for ( l = str.length; l < count; l += 1 ) {
		str = ( left ? ("0" + str) : (str + "0") );
	}
	return str;
};

//
// private Globalization utility functions
//

appendPreOrPostMatch = function( preMatch, strings ) {
	// appends pre- and post- token match strings while removing escaped characters.
	// Returns a single quote count which is used to determine if the token occurs
	// in a string literal.
	var quoteCount = 0,
		escaped = false;
	for ( var i = 0, il = preMatch.length; i < il; i++ ) {
		var c = preMatch.charAt( i );
		switch ( c ) {
			case "\'":
				if ( escaped ) {
					strings.push( "\'" );
				}
				else {
					quoteCount++;
				}
				escaped = false;
				break;
			case "\\":
				if ( escaped ) {
					strings.push( "\\" );
				}
				escaped = !escaped;
				break;
			default:
				strings.push( c );
				escaped = false;
				break;
		}
	}
	return quoteCount;
};

expandFormat = function( cal, format ) {
	// expands unspecified or single character date formats into the full pattern.
	format = format || "F";
	var pattern,
		patterns = cal.patterns,
		len = format.length;
	if ( len === 1 ) {
		pattern = patterns[ format ];
		if ( !pattern ) {
			throw "Invalid date format string \'" + format + "\'.";
		}
		format = pattern;
	}
	else if ( len === 2 && format.charAt(0) === "%" ) {
		// %X escape format -- intended as a custom format string that is only one character, not a built-in format.
		format = format.charAt( 1 );
	}
	return format;
};

formatDate = function( value, format, culture ) {
	var cal = culture.calendar,
		convert = cal.convert,
		ret;

	if ( !format || !format.length || format === "i" ) {
		if ( culture && culture.name.length ) {
			if ( convert ) {
				// non-gregorian calendar, so we cannot use built-in toLocaleString()
				ret = formatDate( value, cal.patterns.F, culture );
			}
			else {
				var eraDate = new Date( value.getTime() ),
					era = getEra( value, cal.eras );
				eraDate.setFullYear( getEraYear(value, cal, era) );
				ret = eraDate.toLocaleString();
			}
		}
		else {
			ret = value.toString();
		}
		return ret;
	}

	var eras = cal.eras,
		sortable = format === "s";
	format = expandFormat( cal, format );

	// Start with an empty string
	ret = [];
	var hour,
		zeros = [ "0", "00", "000" ],
		foundDay,
		checkedDay,
		dayPartRegExp = /([^d]|^)(d|dd)([^d]|$)/g,
		quoteCount = 0,
		tokenRegExp = getTokenRegExp(),
		converted;

	function padZeros( num, c ) {
		var r, s = num + "";
		if ( c > 1 && s.length < c ) {
			r = ( zeros[c - 2] + s);
			return r.substr( r.length - c, c );
		}
		else {
			r = s;
		}
		return r;
	}

	function hasDay() {
		if ( foundDay || checkedDay ) {
			return foundDay;
		}
		foundDay = dayPartRegExp.test( format );
		checkedDay = true;
		return foundDay;
	}

	function getPart( date, part ) {
		if ( converted ) {
			return converted[ part ];
		}
		switch ( part ) {
			case 0:
				return date.getFullYear();
			case 1:
				return date.getMonth();
			case 2:
				return date.getDate();
			default:
				throw "Invalid part value " + part;
		}
	}

	if ( !sortable && convert ) {
		converted = convert.fromGregorian( value );
	}

	for ( ; ; ) {
		// Save the current index
		var index = tokenRegExp.lastIndex,
			// Look for the next pattern
			ar = tokenRegExp.exec( format );

		// Append the text before the pattern (or the end of the string if not found)
		var preMatch = format.slice( index, ar ? ar.index : format.length );
		quoteCount += appendPreOrPostMatch( preMatch, ret );

		if ( !ar ) {
			break;
		}

		// do not replace any matches that occur inside a string literal.
		if ( quoteCount % 2 ) {
			ret.push( ar[0] );
			continue;
		}

		var current = ar[ 0 ],
			clength = current.length;

		switch ( current ) {
			case "ddd":
				//Day of the week, as a three-letter abbreviation
			case "dddd":
				// Day of the week, using the full name
				var names = ( clength === 3 ) ? cal.days.namesAbbr : cal.days.names;
				ret.push( names[value.getDay()] );
				break;
			case "d":
				// Day of month, without leading zero for single-digit days
			case "dd":
				// Day of month, with leading zero for single-digit days
				foundDay = true;
				ret.push(
					padZeros( getPart(value, 2), clength )
				);
				break;
			case "MMM":
				// Month, as a three-letter abbreviation
			case "MMMM":
				// Month, using the full name
				var part = getPart( value, 1 );
				ret.push(
					( cal.monthsGenitive && hasDay() ) ?
					( cal.monthsGenitive[ clength === 3 ? "namesAbbr" : "names" ][ part ] ) :
					( cal.months[ clength === 3 ? "namesAbbr" : "names" ][ part ] )
				);
				break;
			case "M":
				// Month, as digits, with no leading zero for single-digit months
			case "MM":
				// Month, as digits, with leading zero for single-digit months
				ret.push(
					padZeros( getPart(value, 1) + 1, clength )
				);
				break;
			case "y":
				// Year, as two digits, but with no leading zero for years less than 10
			case "yy":
				// Year, as two digits, with leading zero for years less than 10
			case "yyyy":
				// Year represented by four full digits
				part = converted ? converted[ 0 ] : getEraYear( value, cal, getEra(value, eras), sortable );
				if ( clength < 4 ) {
					part = part % 100;
				}
				ret.push(
					padZeros( part, clength )
				);
				break;
			case "h":
				// Hours with no leading zero for single-digit hours, using 12-hour clock
			case "hh":
				// Hours with leading zero for single-digit hours, using 12-hour clock
				hour = value.getHours() % 12;
				if ( hour === 0 ) hour = 12;
				ret.push(
					padZeros( hour, clength )
				);
				break;
			case "H":
				// Hours with no leading zero for single-digit hours, using 24-hour clock
			case "HH":
				// Hours with leading zero for single-digit hours, using 24-hour clock
				ret.push(
					padZeros( value.getHours(), clength )
				);
				break;
			case "m":
				// Minutes with no leading zero for single-digit minutes
			case "mm":
				// Minutes with leading zero for single-digit minutes
				ret.push(
					padZeros( value.getMinutes(), clength )
				);
				break;
			case "s":
				// Seconds with no leading zero for single-digit seconds
			case "ss":
				// Seconds with leading zero for single-digit seconds
				ret.push(
					padZeros( value.getSeconds(), clength )
				);
				break;
			case "t":
				// One character am/pm indicator ("a" or "p")
			case "tt":
				// Multicharacter am/pm indicator
				part = value.getHours() < 12 ? ( cal.AM ? cal.AM[0] : " " ) : ( cal.PM ? cal.PM[0] : " " );
				ret.push( clength === 1 ? part.charAt(0) : part );
				break;
			case "f":
				// Deciseconds
			case "ff":
				// Centiseconds
			case "fff":
				// Milliseconds
				ret.push(
					padZeros( value.getMilliseconds(), 3 ).substr( 0, clength )
				);
				break;
			case "z":
				// Time zone offset, no leading zero
			case "zz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), clength )
				);
				break;
			case "zzz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), 2 ) +
					// Hard coded ":" separator, rather than using cal.TimeSeparator
					// Repeated here for consistency, plus ":" was already assumed in date parsing.
					":" + padZeros( Math.abs(value.getTimezoneOffset() % 60), 2 )
				);
				break;
			case "g":
			case "gg":
				if ( cal.eras ) {
					ret.push(
						cal.eras[ getEra(value, eras) ].name
					);
				}
				break;
		case "/":
			ret.push( cal["/"] );
			break;
		default:
			throw "Invalid date format pattern \'" + current + "\'.";
		}
	}
	return ret.join( "" );
};

// formatNumber
(function() {
	var expandNumber;

	expandNumber = function( number, precision, formatInfo ) {
		var groupSizes = formatInfo.groupSizes,
			curSize = groupSizes[ 0 ],
			curGroupIndex = 1,
			factor = Math.pow( 10, precision ),
			rounded = Math.round( number * factor ) / factor;

		if ( !isFinite(rounded) ) {
			rounded = number;
		}
		number = rounded;

		var numberString = number+"",
			right = "",
			split = numberString.split( /e/i ),
			exponent = split.length > 1 ? parseInt( split[1], 10 ) : 0;
		numberString = split[ 0 ];
		split = numberString.split( "." );
		numberString = split[ 0 ];
		right = split.length > 1 ? split[ 1 ] : "";

		if ( exponent > 0 ) {
			right = zeroPad( right, exponent, false );
			numberString += right.slice( 0, exponent );
			right = right.substr( exponent );
		}
		else if ( exponent < 0 ) {
			exponent = -exponent;
			numberString = zeroPad( numberString, exponent + 1, true );
			right = numberString.slice( -exponent, numberString.length ) + right;
			numberString = numberString.slice( 0, -exponent );
		}

		if ( precision > 0 ) {
			right = formatInfo[ "." ] +
				( (right.length > precision) ? right.slice(0, precision) : zeroPad(right, precision) );
		}
		else {
			right = "";
		}

		var stringIndex = numberString.length - 1,
			sep = formatInfo[ "," ],
			ret = "";

		while ( stringIndex >= 0 ) {
			if ( curSize === 0 || curSize > stringIndex ) {
				return numberString.slice( 0, stringIndex + 1 ) + ( ret.length ? (sep + ret + right) : right );
			}
			ret = numberString.slice( stringIndex - curSize + 1, stringIndex + 1 ) + ( ret.length ? (sep + ret) : "" );

			stringIndex -= curSize;

			if ( curGroupIndex < groupSizes.length ) {
				curSize = groupSizes[ curGroupIndex ];
				curGroupIndex++;
			}
		}

		return numberString.slice( 0, stringIndex + 1 ) + sep + ret + right;
	};

	formatNumber = function( value, format, culture ) {
		if ( !isFinite(value) ) {
			if ( value === Infinity ) {
				return culture.numberFormat.positiveInfinity;
			}
			if ( value === -Infinity ) {
				return culture.numberFormat.negativeInfinity;
			}
			return culture.numberFormat.NaN;
		}
		if ( !format || format === "i" ) {
			return culture.name.length ? value.toLocaleString() : value.toString();
		}
		format = format || "D";

		var nf = culture.numberFormat,
			number = Math.abs( value ),
			precision = -1,
			pattern;
		if ( format.length > 1 ) precision = parseInt( format.slice(1), 10 );

		var current = format.charAt( 0 ).toUpperCase(),
			formatInfo;

		switch ( current ) {
			case "D":
				pattern = "n";
				number = truncate( number );
				if ( precision !== -1 ) {
					number = zeroPad( "" + number, precision, true );
				}
				if ( value < 0 ) number = "-" + number;
				break;
			case "N":
				formatInfo = nf;
				/* falls through */
			case "C":
				formatInfo = formatInfo || nf.currency;
				/* falls through */
			case "P":
				formatInfo = formatInfo || nf.percent;
				pattern = value < 0 ? formatInfo.pattern[ 0 ] : ( formatInfo.pattern[1] || "n" );
				if ( precision === -1 ) precision = formatInfo.decimals;
				number = expandNumber( number * (current === "P" ? 100 : 1), precision, formatInfo );
				break;
			default:
				throw "Bad number format specifier: " + current;
		}

		var patternParts = /n|\$|-|%/g,
			ret = "";
		for ( ; ; ) {
			var index = patternParts.lastIndex,
				ar = patternParts.exec( pattern );

			ret += pattern.slice( index, ar ? ar.index : pattern.length );

			if ( !ar ) {
				break;
			}

			switch ( ar[0] ) {
				case "n":
					ret += number;
					break;
				case "$":
					ret += nf.currency.symbol;
					break;
				case "-":
					// don't make 0 negative
					if ( /[1-9]/.test(number) ) {
						ret += nf[ "-" ];
					}
					break;
				case "%":
					ret += nf.percent.symbol;
					break;
			}
		}

		return ret;
	};

}());

getTokenRegExp = function() {
	// regular expression for matching date and time tokens in format strings.
	return (/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g);
};

getEra = function( date, eras ) {
	if ( !eras ) return 0;
	var start, ticks = date.getTime();
	for ( var i = 0, l = eras.length; i < l; i++ ) {
		start = eras[ i ].start;
		if ( start === null || ticks >= start ) {
			return i;
		}
	}
	return 0;
};

getEraYear = function( date, cal, era, sortable ) {
	var year = date.getFullYear();
	if ( !sortable && cal.eras ) {
		// convert normal gregorian year to era-shifted gregorian
		// year by subtracting the era offset
		year -= cal.eras[ era ].offset;
	}
	return year;
};

// parseExact
(function() {
	var expandYear,
		getDayIndex,
		getMonthIndex,
		getParseRegExp,
		outOfRange,
		toUpper,
		toUpperArray;

	expandYear = function( cal, year ) {
		// expands 2-digit year into 4 digits.
		if ( year < 100 ) {
			var now = new Date(),
				era = getEra( now ),
				curr = getEraYear( now, cal, era ),
				twoDigitYearMax = cal.twoDigitYearMax;
			twoDigitYearMax = typeof twoDigitYearMax === "string" ? new Date().getFullYear() % 100 + parseInt( twoDigitYearMax, 10 ) : twoDigitYearMax;
			year += curr - ( curr % 100 );
			if ( year > twoDigitYearMax ) {
				year -= 100;
			}
		}
		return year;
	};

	getDayIndex = function	( cal, value, abbr ) {
		var ret,
			days = cal.days,
			upperDays = cal._upperDays;
		if ( !upperDays ) {
			cal._upperDays = upperDays = [
				toUpperArray( days.names ),
				toUpperArray( days.namesAbbr ),
				toUpperArray( days.namesShort )
			];
		}
		value = toUpper( value );
		if ( abbr ) {
			ret = arrayIndexOf( upperDays[1], value );
			if ( ret === -1 ) {
				ret = arrayIndexOf( upperDays[2], value );
			}
		}
		else {
			ret = arrayIndexOf( upperDays[0], value );
		}
		return ret;
	};

	getMonthIndex = function( cal, value, abbr ) {
		var months = cal.months,
			monthsGen = cal.monthsGenitive || cal.months,
			upperMonths = cal._upperMonths,
			upperMonthsGen = cal._upperMonthsGen;
		if ( !upperMonths ) {
			cal._upperMonths = upperMonths = [
				toUpperArray( months.names ),
				toUpperArray( months.namesAbbr )
			];
			cal._upperMonthsGen = upperMonthsGen = [
				toUpperArray( monthsGen.names ),
				toUpperArray( monthsGen.namesAbbr )
			];
		}
		value = toUpper( value );
		var i = arrayIndexOf( abbr ? upperMonths[1] : upperMonths[0], value );
		if ( i < 0 ) {
			i = arrayIndexOf( abbr ? upperMonthsGen[1] : upperMonthsGen[0], value );
		}
		return i;
	};

	getParseRegExp = function( cal, format ) {
		// converts a format string into a regular expression with groups that
		// can be used to extract date fields from a date string.
		// check for a cached parse regex.
		var re = cal._parseRegExp;
		if ( !re ) {
			cal._parseRegExp = re = {};
		}
		else {
			var reFormat = re[ format ];
			if ( reFormat ) {
				return reFormat;
			}
		}

		// expand single digit formats, then escape regular expression characters.
		var expFormat = expandFormat( cal, format ).replace( /([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1" ),
			regexp = [ "^" ],
			groups = [],
			index = 0,
			quoteCount = 0,
			tokenRegExp = getTokenRegExp(),
			match;

		// iterate through each date token found.
		while ( (match = tokenRegExp.exec(expFormat)) !== null ) {
			var preMatch = expFormat.slice( index, match.index );
			index = tokenRegExp.lastIndex;

			// don't replace any matches that occur inside a string literal.
			quoteCount += appendPreOrPostMatch( preMatch, regexp );
			if ( quoteCount % 2 ) {
				regexp.push( match[0] );
				continue;
			}

			// add a regex group for the token.
			var m = match[ 0 ],
				len = m.length,
				add;
			switch ( m ) {
				case "dddd": case "ddd":
				case "MMMM": case "MMM":
				case "gg": case "g":
					add = "(\\D+)";
					break;
				case "tt": case "t":
					add = "(\\D*)";
					break;
				case "yyyy":
				case "fff":
				case "ff":
				case "f":
					add = "(\\d{" + len + "})";
					break;
				case "dd": case "d":
				case "MM": case "M":
				case "yy": case "y":
				case "HH": case "H":
				case "hh": case "h":
				case "mm": case "m":
				case "ss": case "s":
					add = "(\\d\\d?)";
					break;
				case "zzz":
					add = "([+-]?\\d\\d?:\\d{2})";
					break;
				case "zz": case "z":
					add = "([+-]?\\d\\d?)";
					break;
				case "/":
					add = "(\\/)";
					break;
				default:
					throw "Invalid date format pattern \'" + m + "\'.";
			}
			if ( add ) {
				regexp.push( add );
			}
			groups.push( match[0] );
		}
		appendPreOrPostMatch( expFormat.slice(index), regexp );
		regexp.push( "$" );

		// allow whitespace to differ when matching formats.
		var regexpStr = regexp.join( "" ).replace( /\s+/g, "\\s+" ),
			parseRegExp = { "regExp": regexpStr, "groups": groups };

		// cache the regex for this format.
		return re[ format ] = parseRegExp;
	};

	outOfRange = function( value, low, high ) {
		return value < low || value > high;
	};

	toUpper = function( value ) {
		// "he-IL" has non-breaking space in weekday names.
		return value.split( "\u00A0" ).join( " " ).toUpperCase();
	};

	toUpperArray = function( arr ) {
		var results = [];
		for ( var i = 0, l = arr.length; i < l; i++ ) {
			results[ i ] = toUpper( arr[i] );
		}
		return results;
	};

	parseExact = function( value, format, culture ) {
		// try to parse the date string by matching against the format string
		// while using the specified culture for date field names.
		value = trim( value );
		var cal = culture.calendar,
			// convert date formats into regular expressions with groupings.
			// use the regexp to determine the input format and extract the date fields.
			parseInfo = getParseRegExp( cal, format ),
			match = new RegExp( parseInfo.regExp ).exec( value );
		if ( match === null ) {
			return null;
		}
		// found a date format that matches the input.
		var groups = parseInfo.groups,
			era = null, year = null, month = null, date = null, weekDay = null,
			hour = 0, hourOffset, min = 0, sec = 0, msec = 0, tzMinOffset = null,
			pmHour = false;
		// iterate the format groups to extract and set the date fields.
		for ( var j = 0, jl = groups.length; j < jl; j++ ) {
			var matchGroup = match[ j + 1 ];
			if ( matchGroup ) {
				var current = groups[ j ],
					clength = current.length,
					matchInt = parseInt( matchGroup, 10 );
				switch ( current ) {
					case "dd": case "d":
						// Day of month.
						date = matchInt;
						// check that date is generally in valid range, also checking overflow below.
						if ( outOfRange(date, 1, 31) ) return null;
						break;
					case "MMM": case "MMMM":
						month = getMonthIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "M": case "MM":
						// Month.
						month = matchInt - 1;
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "y": case "yy":
					case "yyyy":
						year = clength < 4 ? expandYear( cal, matchInt ) : matchInt;
						if ( outOfRange(year, 0, 9999) ) return null;
						break;
					case "h": case "hh":
						// Hours (12-hour clock).
						hour = matchInt;
						if ( hour === 12 ) hour = 0;
						if ( outOfRange(hour, 0, 11) ) return null;
						break;
					case "H": case "HH":
						// Hours (24-hour clock).
						hour = matchInt;
						if ( outOfRange(hour, 0, 23) ) return null;
						break;
					case "m": case "mm":
						// Minutes.
						min = matchInt;
						if ( outOfRange(min, 0, 59) ) return null;
						break;
					case "s": case "ss":
						// Seconds.
						sec = matchInt;
						if ( outOfRange(sec, 0, 59) ) return null;
						break;
					case "tt": case "t":
						// AM/PM designator.
						// see if it is standard, upper, or lower case PM. If not, ensure it is at least one of
						// the AM tokens. If not, fail the parse for this format.
						pmHour = cal.PM && ( matchGroup === cal.PM[0] || matchGroup === cal.PM[1] || matchGroup === cal.PM[2] );
						if (
							!pmHour && (
								!cal.AM || ( matchGroup !== cal.AM[0] && matchGroup !== cal.AM[1] && matchGroup !== cal.AM[2] )
							)
						) return null;
						break;
					case "f":
						// Deciseconds.
					case "ff":
						// Centiseconds.
					case "fff":
						// Milliseconds.
						msec = matchInt * Math.pow( 10, 3 - clength );
						if ( outOfRange(msec, 0, 999) ) return null;
						break;
					case "ddd":
						// Day of week.
					case "dddd":
						// Day of week.
						weekDay = getDayIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(weekDay, 0, 6) ) return null;
						break;
					case "zzz":
						// Time zone offset in +/- hours:min.
						var offsets = matchGroup.split( /:/ );
						if ( offsets.length !== 2 ) return null;
						hourOffset = parseInt( offsets[0], 10 );
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						var minOffset = parseInt( offsets[1], 10 );
						if ( outOfRange(minOffset, 0, 59) ) return null;
						tzMinOffset = ( hourOffset * 60 ) + ( startsWith(matchGroup, "-") ? -minOffset : minOffset );
						break;
					case "z": case "zz":
						// Time zone offset in +/- hours.
						hourOffset = matchInt;
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						tzMinOffset = hourOffset * 60;
						break;
					case "g": case "gg":
						var eraName = matchGroup;
						if ( !eraName || !cal.eras ) return null;
						eraName = trim( eraName.toLowerCase() );
						for ( var i = 0, l = cal.eras.length; i < l; i++ ) {
							if ( eraName === cal.eras[i].name.toLowerCase() ) {
								era = i;
								break;
							}
						}
						// could not find an era with that name
						if ( era === null ) return null;
						break;
				}
			}
		}
		var result = new Date(), defaultYear, convert = cal.convert;
		defaultYear = convert ? convert.fromGregorian( result )[ 0 ] : result.getFullYear();
		if ( year === null ) {
			year = defaultYear;
		}
		else if ( cal.eras ) {
			// year must be shifted to normal gregorian year
			// but not if year was not specified, its already normal gregorian
			// per the main if clause above.
			year += cal.eras[( era || 0 )].offset;
		}
		// set default day and month to 1 and January, so if unspecified, these are the defaults
		// instead of the current day/month.
		if ( month === null ) {
			month = 0;
		}
		if ( date === null ) {
			date = 1;
		}
		// now have year, month, and date, but in the culture's calendar.
		// convert to gregorian if necessary
		if ( convert ) {
			result = convert.toGregorian( year, month, date );
			// conversion failed, must be an invalid match
			if ( result === null ) return null;
		}
		else {
			// have to set year, month and date together to avoid overflow based on current date.
			result.setFullYear( year, month, date );
			// check to see if date overflowed for specified month (only checked 1-31 above).
			if ( result.getDate() !== date ) return null;
			// invalid day of week.
			if ( weekDay !== null && result.getDay() !== weekDay ) {
				return null;
			}
		}
		// if pm designator token was found make sure the hours fit the 24-hour clock.
		if ( pmHour && hour < 12 ) {
			hour += 12;
		}
		result.setHours( hour, min, sec, msec );
		if ( tzMinOffset !== null ) {
			// adjust timezone to utc before applying local offset.
			var adjustedMin = result.getMinutes() - ( tzMinOffset + result.getTimezoneOffset() );
			// Safari limits hours and minutes to the range of -127 to 127.  We need to use setHours
			// to ensure both these fields will not exceed this range.	adjustedMin will range
			// somewhere between -1440 and 1500, so we only need to split this into hours.
			result.setHours( result.getHours() + parseInt(adjustedMin / 60, 10), adjustedMin % 60 );
		}
		return result;
	};
}());

parseNegativePattern = function( value, nf, negativePattern ) {
	var neg = nf[ "-" ],
		pos = nf[ "+" ],
		ret;
	switch ( negativePattern ) {
		case "n -":
			neg = " " + neg;
			pos = " " + pos;
			/* falls through */
		case "n-":
			if ( endsWith(value, neg) ) {
				ret = [ "-", value.substr(0, value.length - neg.length) ];
			}
			else if ( endsWith(value, pos) ) {
				ret = [ "+", value.substr(0, value.length - pos.length) ];
			}
			break;
		case "- n":
			neg += " ";
			pos += " ";
			/* falls through */
		case "-n":
			if ( startsWith(value, neg) ) {
				ret = [ "-", value.substr(neg.length) ];
			}
			else if ( startsWith(value, pos) ) {
				ret = [ "+", value.substr(pos.length) ];
			}
			break;
		case "(n)":
			if ( startsWith(value, "(") && endsWith(value, ")") ) {
				ret = [ "-", value.substr(1, value.length - 2) ];
			}
			break;
	}
	return ret || [ "", value ];
};

//
// public instance functions
//

Globalize.prototype.findClosestCulture = function( cultureSelector ) {
	return Globalize.findClosestCulture.call( this, cultureSelector );
};

Globalize.prototype.format = function( value, format, cultureSelector ) {
	return Globalize.format.call( this, value, format, cultureSelector );
};

Globalize.prototype.localize = function( key, cultureSelector ) {
	return Globalize.localize.call( this, key, cultureSelector );
};

Globalize.prototype.parseInt = function( value, radix, cultureSelector ) {
	return Globalize.parseInt.call( this, value, radix, cultureSelector );
};

Globalize.prototype.parseFloat = function( value, radix, cultureSelector ) {
	return Globalize.parseFloat.call( this, value, radix, cultureSelector );
};

Globalize.prototype.culture = function( cultureSelector ) {
	return Globalize.culture.call( this, cultureSelector );
};

//
// public singleton functions
//

Globalize.addCultureInfo = function( cultureName, baseCultureName, info ) {

	var base = {},
		isNew = false;

	if ( typeof cultureName !== "string" ) {
		// cultureName argument is optional string. If not specified, assume info is first
		// and only argument. Specified info deep-extends current culture.
		info = cultureName;
		cultureName = this.culture().name;
		base = this.cultures[ cultureName ];
	} else if ( typeof baseCultureName !== "string" ) {
		// baseCultureName argument is optional string. If not specified, assume info is second
		// argument. Specified info deep-extends specified culture.
		// If specified culture does not exist, create by deep-extending default
		info = baseCultureName;
		isNew = ( this.cultures[ cultureName ] == null );
		base = this.cultures[ cultureName ] || this.cultures[ "default" ];
	} else {
		// cultureName and baseCultureName specified. Assume a new culture is being created
		// by deep-extending an specified base culture
		isNew = true;
		base = this.cultures[ baseCultureName ];
	}

	this.cultures[ cultureName ] = extend(true, {},
		base,
		info
	);
	// Make the standard calendar the current culture if it's a new culture
	if ( isNew ) {
		this.cultures[ cultureName ].calendar = this.cultures[ cultureName ].calendars.standard;
	}
};

Globalize.findClosestCulture = function( name ) {
	var match;
	if ( !name ) {
		return this.findClosestCulture( this.cultureSelector ) || this.cultures[ "default" ];
	}
	if ( typeof name === "string" ) {
		name = name.split( "," );
	}
	if ( isArray(name) ) {
		var lang,
			cultures = this.cultures,
			list = name,
			i, l = list.length,
			prioritized = [];
		for ( i = 0; i < l; i++ ) {
			name = trim( list[i] );
			var pri, parts = name.split( ";" );
			lang = trim( parts[0] );
			if ( parts.length === 1 ) {
				pri = 1;
			}
			else {
				name = trim( parts[1] );
				if ( name.indexOf("q=") === 0 ) {
					name = name.substr( 2 );
					pri = parseFloat( name );
					pri = isNaN( pri ) ? 0 : pri;
				}
				else {
					pri = 1;
				}
			}
			prioritized.push({ lang: lang, pri: pri });
		}
		prioritized.sort(function( a, b ) {
			if ( a.pri < b.pri ) {
				return 1;
			} else if ( a.pri > b.pri ) {
				return -1;
			}
			return 0;
		});
		// exact match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			match = cultures[ lang ];
			if ( match ) {
				return match;
			}
		}

		// neutral language match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			do {
				var index = lang.lastIndexOf( "-" );
				if ( index === -1 ) {
					break;
				}
				// strip off the last part. e.g. en-US => en
				lang = lang.substr( 0, index );
				match = cultures[ lang ];
				if ( match ) {
					return match;
				}
			}
			while ( 1 );
		}

		// last resort: match first culture using that language
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			for ( var cultureKey in cultures ) {
				var culture = cultures[ cultureKey ];
				if ( culture.language === lang ) {
					return culture;
				}
			}
		}
	}
	else if ( typeof name === "object" ) {
		return name;
	}
	return match || null;
};

Globalize.format = function( value, format, cultureSelector ) {
	var culture = this.findClosestCulture( cultureSelector );
	if ( value instanceof Date ) {
		value = formatDate( value, format, culture );
	}
	else if ( typeof value === "number" ) {
		value = formatNumber( value, format, culture );
	}
	return value;
};

Globalize.localize = function( key, cultureSelector ) {
	return this.findClosestCulture( cultureSelector ).messages[ key ] ||
		this.cultures[ "default" ].messages[ key ];
};

Globalize.parseDate = function( value, formats, culture ) {
	culture = this.findClosestCulture( culture );

	var date, prop, patterns;
	if ( formats ) {
		if ( typeof formats === "string" ) {
			formats = [ formats ];
		}
		if ( formats.length ) {
			for ( var i = 0, l = formats.length; i < l; i++ ) {
				var format = formats[ i ];
				if ( format ) {
					date = parseExact( value, format, culture );
					if ( date ) {
						break;
					}
				}
			}
		}
	} else {
		patterns = culture.calendar.patterns;
		for ( prop in patterns ) {
			date = parseExact( value, patterns[prop], culture );
			if ( date ) {
				break;
			}
		}
	}

	return date || null;
};

Globalize.parseInt = function( value, radix, cultureSelector ) {
	return truncate( Globalize.parseFloat(value, radix, cultureSelector) );
};

Globalize.parseFloat = function( value, radix, cultureSelector ) {
	// radix argument is optional
	if ( typeof radix !== "number" ) {
		cultureSelector = radix;
		radix = 10;
	}

	var culture = this.findClosestCulture( cultureSelector );
	var ret = NaN,
		nf = culture.numberFormat;

	if ( value.indexOf(culture.numberFormat.currency.symbol) > -1 ) {
		// remove currency symbol
		value = value.replace( culture.numberFormat.currency.symbol, "" );
		// replace decimal seperator
		value = value.replace( culture.numberFormat.currency["."], culture.numberFormat["."] );
	}

	//Remove percentage character from number string before parsing
	if ( value.indexOf(culture.numberFormat.percent.symbol) > -1){
		value = value.replace( culture.numberFormat.percent.symbol, "" );
	}

	// remove spaces: leading, trailing and between - and number. Used for negative currency pt-BR
	value = value.replace( / /g, "" );

	// allow infinity or hexidecimal
	if ( regexInfinity.test(value) ) {
		ret = parseFloat( value );
	}
	else if ( !radix && regexHex.test(value) ) {
		ret = parseInt( value, 16 );
	}
	else {

		// determine sign and number
		var signInfo = parseNegativePattern( value, nf, nf.pattern[0] ),
			sign = signInfo[ 0 ],
			num = signInfo[ 1 ];

		// #44 - try parsing as "(n)"
		if ( sign === "" && nf.pattern[0] !== "(n)" ) {
			signInfo = parseNegativePattern( value, nf, "(n)" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		// try parsing as "-n"
		if ( sign === "" && nf.pattern[0] !== "-n" ) {
			signInfo = parseNegativePattern( value, nf, "-n" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		sign = sign || "+";

		// determine exponent and number
		var exponent,
			intAndFraction,
			exponentPos = num.indexOf( "e" );
		if ( exponentPos < 0 ) exponentPos = num.indexOf( "E" );
		if ( exponentPos < 0 ) {
			intAndFraction = num;
			exponent = null;
		}
		else {
			intAndFraction = num.substr( 0, exponentPos );
			exponent = num.substr( exponentPos + 1 );
		}
		// determine decimal position
		var integer,
			fraction,
			decSep = nf[ "." ],
			decimalPos = intAndFraction.indexOf( decSep );
		if ( decimalPos < 0 ) {
			integer = intAndFraction;
			fraction = null;
		}
		else {
			integer = intAndFraction.substr( 0, decimalPos );
			fraction = intAndFraction.substr( decimalPos + decSep.length );
		}
		// handle groups (e.g. 1,000,000)
		var groupSep = nf[ "," ];
		integer = integer.split( groupSep ).join( "" );
		var altGroupSep = groupSep.replace( /\u00A0/g, " " );
		if ( groupSep !== altGroupSep ) {
			integer = integer.split( altGroupSep ).join( "" );
		}
		// build a natively parsable number string
		var p = sign + integer;
		if ( fraction !== null ) {
			p += "." + fraction;
		}
		if ( exponent !== null ) {
			// exponent itself may have a number patternd
			var expSignInfo = parseNegativePattern( exponent, nf, "-n" );
			p += "e" + ( expSignInfo[0] || "+" ) + expSignInfo[ 1 ];
		}
		if ( regexParseFloat.test(p) ) {
			ret = parseFloat( p );
		}
	}
	return ret;
};

Globalize.culture = function( cultureSelector ) {
	// setter
	if ( typeof cultureSelector !== "undefined" ) {
		this.cultureSelector = cultureSelector;
	}
	// getter
	return this.findClosestCulture( cultureSelector ) || this.cultures[ "default" ];
};

}( this ));
;
(function(a,b){var c;if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){c=require("globalize")}else{c=a.Globalize}c.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy"}}}});c.addCultureInfo("fr-FR","default",{name:"fr-FR",englishName:"French (France)",nativeName:"français (France)",language:"fr",numberFormat:{",":" ",".":",","NaN":"Non Numérique",negativeInfinity:"-Infini",positiveInfinity:"+Infini",percent:{",":" ",".":","},currency:{pattern:["-n $","n $"],",":" ",".":",",symbol:"€"}},calendars:{standard:{firstDay:1,days:{names:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],namesAbbr:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],namesShort:["di","lu","ma","me","je","ve","sa"]},months:{names:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre",""],namesAbbr:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc.",""]},AM:null,PM:null,eras:[{name:"ap. J.-C.",start:null,offset:0}],patterns:{d:"dd/MM/yyyy",D:"dddd d MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd d MMMM yyyy HH:mm",F:"dddd d MMMM yyyy HH:mm:ss",M:"d MMMM",Y:"MMMM yyyy"}}}});c.addCultureInfo("ja-JP","default",{name:"ja-JP",englishName:"Japanese (Japan)",nativeName:"日本語 (日本)",language:"ja",numberFormat:{"NaN":"NaN (非数値)",negativeInfinity:"-∞",positiveInfinity:"+∞",percent:{pattern:["-n%","n%"]},currency:{pattern:["-$n","$n"],decimals:0,symbol:"¥"}},calendars:{standard:{days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"西暦",start:null,offset:0}],patterns:{d:"yyyy/MM/dd",D:"yyyy'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"yyyy'年'M'月'd'日' H:mm",F:"yyyy'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"yyyy'年'M'月'"}},Japanese:{name:"Japanese",days:{names:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],namesAbbr:["日","月","火","水","木","金","土"],namesShort:["日","月","火","水","木","金","土"]},months:{names:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],namesAbbr:["1","2","3","4","5","6","7","8","9","10","11","12",""]},AM:["午前","午前","午前"],PM:["午後","午後","午後"],eras:[{name:"平成",start:null,offset:1867},{name:"昭和",start:-1812153600000,offset:1911},{name:"大正",start:-1357603200000,offset:1925},{name:"明治",start:60022080000,offset:1988}],twoDigitYearMax:99,patterns:{d:"gg y/M/d",D:"gg y'年'M'月'd'日'",t:"H:mm",T:"H:mm:ss",f:"gg y'年'M'月'd'日' H:mm",F:"gg y'年'M'月'd'日' H:mm:ss",M:"M'月'd'日'",Y:"gg y'年'M'月'"}}}})}(this));;
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery)
;
/*
 * jQuery Form Plugin
 * version: 3.33.0-2013.05.02
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var i,C,m,o=this;if(typeof j=="function"){j={success:j}}i=this.attr2("method");C=this.attr2("action");m=(typeof C==="string")?f.trim(C):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1]}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var u={};this.trigger("form-pre-serialize",[this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional}var s=[];var E,F=this.formToArray(j.semantic,s);if(j.data){j.extraData=j.data;E=f.param(j.data,n)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[F,this,j,u]);if(u.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=f.param(F,n);if(E){y=(y?(y+"&"+E):E)}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+y;j.data=null}else{j.data=y}var H=[];if(j.resetForm){H.push(function(){o.resetForm()})}if(j.clearForm){H.push(function(){o.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var l=j.success||function(){};H.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments)})}else{if(j.success){H.push(j.success)}}j.success=function(K,q,L){var J=j.context||this;for(var I=0,k=H.length;I<k;I++){H[I].apply(J,[K,q,L||o,o])}};if(j.error){var z=j.error;j.error=function(J,k,q){var I=j.context||this;z.apply(I,[J,k,q,o])}}if(j.complete){var h=j.complete;j.complete=function(I,k){var q=j.context||this;h.apply(q,[I,k,o])}}var D=f('input[type=file]:enabled[value!=""]',this);var p=D.length>0;var B="multipart/form-data";var x=(o.attr("enctype")==B||o.attr("encoding")==B);var w=c.fileapi&&c.formdata;d("fileAPI :"+w);var r=(p||x)&&!w;var v;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){v=G(F)})}else{v=G(F)}}else{if((p||x)&&w){v=t(F)}else{v=f.ajax(j)}}o.removeData("jqxhr").data("jqxhr",v);for(var A=0;A<s.length;A++){s[A]=null}this.trigger("form-submit-notify",[this,j]);return this;function g(K){var L=f.param(K).split("&");var q=L.length;var k=[];var J,I;for(J=0;J<q;J++){L[J]=L[J].replace(/\+/g," ");I=L[J].split("=");k.push([decodeURIComponent(I[0]),decodeURIComponent(I[1])])}return k}function t(q){var k=new FormData();for(var I=0;I<q.length;I++){k.append(q[I].name,q[I].value)}if(j.extraData){var L=g(j.extraData);for(I=0;I<L.length;I++){if(L[I]){k.append(L[I][0],L[I][1])}}}j.data=null;var K=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){K.xhr=function(){var M=jQuery.ajaxSettings.xhr();if(M.upload){M.upload.addEventListener("progress",function(Q){var P=0;var N=Q.loaded||Q.position;var O=Q.total;if(Q.lengthComputable){P=Math.ceil(N/O*100)}j.uploadProgress(Q,N,O,P)},false)}return M}}K.data=null;var J=K.beforeSend;K.beforeSend=function(N,M){M.data=k;if(J){J.call(this,N,M)}};return f.ajax(K)}function G(af){var L=o[0],K,ab,V,ad,Y,N,Q,O,P,Z,ac,T;var ai=f.Deferred();if(af){for(ab=0;ab<s.length;ab++){K=f(s[ab]);if(e){K.prop("disabled",false)}else{K.removeAttr("disabled")}}}V=f.extend(true,{},f.ajaxSettings,j);V.context=V.context||V;Y="jqFormIO"+(new Date().getTime());if(V.iframeTarget){N=f(V.iframeTarget);Z=N.attr2("name");if(!Z){N.attr2("name",Y)}else{Y=Z}}else{N=f('<iframe name="'+Y+'" src="'+V.iframeSrc+'" />');N.css({position:"absolute",top:"-1000px",left:"-1000px"})}Q=N[0];O={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(aj){var ak=(aj==="timeout"?"timeout":"aborted");d("aborting upload... "+ak);this.aborted=1;try{if(Q.contentWindow.document.execCommand){Q.contentWindow.document.execCommand("Stop")}}catch(al){}N.attr("src",V.iframeSrc);O.error=ak;if(V.error){V.error.call(V.context,O,ak,aj)}if(ad){f.event.trigger("ajaxError",[O,V,ak])}if(V.complete){V.complete.call(V.context,O,ak)}}};ad=V.global;if(ad&&0===f.active++){f.event.trigger("ajaxStart")}if(ad){f.event.trigger("ajaxSend",[O,V])}if(V.beforeSend&&V.beforeSend.call(V.context,O,V)===false){if(V.global){f.active--}ai.reject();return ai}if(O.aborted){ai.reject();return ai}P=L.clk;if(P){Z=P.name;if(Z&&!P.disabled){V.extraData=V.extraData||{};V.extraData[Z]=P.value;if(P.type=="image"){V.extraData[Z+".x"]=L.clk_x;V.extraData[Z+".y"]=L.clk_y}}}var U=1;var R=2;function S(al){var ak=null;try{if(al.contentWindow){ak=al.contentWindow.document}}catch(aj){d("cannot get iframe.contentWindow document: "+aj)}if(ak){return ak}try{ak=al.contentDocument?al.contentDocument:al.document}catch(aj){d("cannot get iframe.contentDocument: "+aj);ak=al.document}return ak}var J=f("meta[name=csrf-token]").attr("content");var I=f("meta[name=csrf-param]").attr("content");if(I&&J){V.extraData=V.extraData||{};V.extraData[I]=J}function aa(){var al=o.attr2("target"),aj=o.attr2("action");L.setAttribute("target",Y);if(!i){L.setAttribute("method","POST")}if(aj!=V.url){L.setAttribute("action",V.url)}if(!V.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(V.timeout){T=setTimeout(function(){ac=true;X(U)},V.timeout)}function am(){try{var aq=S(Q).readyState;d("state = "+aq);if(aq&&aq.toLowerCase()=="uninitialized"){setTimeout(am,50)}}catch(ar){d("Server abort: ",ar," (",ar.name,")");X(R);if(T){clearTimeout(T)}T=undefined}}var ak=[];try{if(V.extraData){for(var ap in V.extraData){if(V.extraData.hasOwnProperty(ap)){if(f.isPlainObject(V.extraData[ap])&&V.extraData[ap].hasOwnProperty("name")&&V.extraData[ap].hasOwnProperty("value")){ak.push(f('<input type="hidden" name="'+V.extraData[ap].name+'">').val(V.extraData[ap].value).appendTo(L)[0])}else{ak.push(f('<input type="hidden" name="'+ap+'">').val(V.extraData[ap]).appendTo(L)[0])}}}}if(!V.iframeTarget){N.appendTo("body");if(Q.attachEvent){Q.attachEvent("onload",X)}else{Q.addEventListener("load",X,false)}}setTimeout(am,15);try{L.submit()}catch(an){var ao=document.createElement("form").submit;ao.apply(L)}}finally{L.setAttribute("action",aj);if(al){L.setAttribute("target",al)}else{o.removeAttr("target")}f(ak).remove()}}if(V.forceSync){aa()}else{setTimeout(aa,10)}var ag,ah,ae=50,M;function X(ap){if(O.aborted||M){return}ah=S(Q);if(!ah){d("cannot access response document");ap=R}if(ap===U&&O){O.abort("timeout");ai.reject(O,"timeout");return}else{if(ap==R&&O){O.abort("server abort");ai.reject(O,"error","server abort");return}}if(!ah||ah.location.href==V.iframeSrc){if(!ac){return}}if(Q.detachEvent){Q.detachEvent("onload",X)}else{Q.removeEventListener("load",X,false)}var an="success",ar;try{if(ac){throw"timeout"}var am=V.dataType=="xml"||ah.XMLDocument||f.isXMLDoc(ah);d("isXml="+am);if(!am&&window.opera&&(ah.body===null||!ah.body.innerHTML)){if(--ae){d("requeing onLoad callback, DOM not available");setTimeout(X,250);return}}var at=ah.body?ah.body:ah.documentElement;O.responseText=at?at.innerHTML:null;O.responseXML=ah.XMLDocument?ah.XMLDocument:ah;if(am){V.dataType="xml"}O.getResponseHeader=function(aw){var av={"content-type":V.dataType};return av[aw]};if(at){O.status=Number(at.getAttribute("status"))||O.status;O.statusText=at.getAttribute("statusText")||O.statusText}var aj=(V.dataType||"").toLowerCase();var aq=/(json|script|text)/.test(aj);if(aq||V.textarea){var ao=ah.getElementsByTagName("textarea")[0];if(ao){O.responseText=ao.value;O.status=Number(ao.getAttribute("status"))||O.status;O.statusText=ao.getAttribute("statusText")||O.statusText}else{if(aq){var ak=ah.getElementsByTagName("pre")[0];var au=ah.getElementsByTagName("body")[0];if(ak){O.responseText=ak.textContent?ak.textContent:ak.innerText}else{if(au){O.responseText=au.textContent?au.textContent:au.innerText}}}}}else{if(aj=="xml"&&!O.responseXML&&O.responseText){O.responseXML=W(O.responseText)}}try{ag=k(O,aj,V)}catch(al){an="parsererror";O.error=ar=(al||an)}}catch(al){d("error caught: ",al);an="error";O.error=ar=(al||an)}if(O.aborted){d("upload aborted");an=null}if(O.status){an=(O.status>=200&&O.status<300||O.status===304)?"success":"error"}if(an==="success"){if(V.success){V.success.call(V.context,ag,"success",O)}ai.resolve(O.responseText,"success",O);if(ad){f.event.trigger("ajaxSuccess",[O,V])}}else{if(an){if(ar===undefined){ar=O.statusText}if(V.error){V.error.call(V.context,O,an,ar)}ai.reject(O,"error",ar);if(ad){f.event.trigger("ajaxError",[O,V,ar])}}}if(ad){f.event.trigger("ajaxComplete",[O,V])}if(ad&&!--f.active){f.event.trigger("ajaxStop")}if(V.complete){V.complete.call(V.context,O,an)}M=true;if(V.timeout){clearTimeout(T)}setTimeout(function(){if(!V.iframeTarget){N.remove()}O.responseXML=null},100)}var W=f.parseXML||function(aj,ak){if(window.ActiveXObject){ak=new ActiveXObject("Microsoft.XMLDOM");ak.async="false";ak.loadXML(aj)}else{ak=(new DOMParser()).parseFromString(aj,"text/xml")}return(ak&&ak.documentElement&&ak.documentElement.nodeName!="parsererror")?ak:null};var q=f.parseJSON||function(aj){return window["eval"]("("+aj+")")};var k=function(ao,am,al){var ak=ao.getResponseHeader("content-type")||"",aj=am==="xml"||!am&&ak.indexOf("xml")>=0,an=aj?ao.responseXML:ao.responseText;if(aj&&an.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(al&&al.dataFilter){an=al.dataFilter(an,am)}if(typeof an==="string"){if(am==="json"||!am&&ak.indexOf("json")>=0){an=q(an)}else{if(am==="script"||!am&&ak.indexOf("javascript")>=0){f.globalEval(an)}}}return an};return ai}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(this).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var p=x?l.getElementsByTagName("*"):l.elements;if(!p){return w}var r,q,o,y,m,t,k;for(r=0,t=p.length;r<t;r++){m=p[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(q=0,k=y.length;q<k;q++){w.push({name:o,value:y[q]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(q=0;q<h.length;q++){w.push({name:o,value:h[q],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,b,_=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return b=n(_),_[0].preventDefault&&(e.at="left top"),p=b.width,m=b.height,g=b.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),b=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+b+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:b},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=t.pageX,l=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,h,l,u,c,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)r=p.snapElements[c].left,h=r+p.snapElements[c].width,l=p.snapElements[c].top,u=l+p.snapElements[c].height,r-m>v||g>h+m||l-m>y||b>u+m||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)?(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(s=m>=Math.abs(l-y),n=m>=Math.abs(u-b),a=m>=Math.abs(r-v),o=m>=Math.abs(h-g),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||a||o,"outer"!==f.snapMode&&(s=m>=Math.abs(l-b),n=m>=Math.abs(u-y),a=m>=Math.abs(r-g),o=m>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||n||a||o||d)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n,a,o=(e.positionAbs||e.position.absolute).left,r=o+e.helperProportions.width,h=(e.positionAbs||e.position.absolute).top,l=h+e.helperProportions.height,u=i.offset.left,c=u+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return o>=u&&c>=r&&h>=d&&p>=l;case"intersect":return o+e.helperProportions.width/2>u&&c>r-e.helperProportions.width/2&&h+e.helperProportions.height/2>d&&p>l-e.helperProportions.height/2;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,d,i.proportions.height)&&t(n,u,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(o>=u&&c>=o||r>=u&&c>=r||u>o&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions.height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions={width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,u=this.size.height,c=t.pageX-a.left||0,d=t.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[t,c,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==u&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&u&&(e.left=h-t.minWidth),n&&u&&(e.left=h-t.maxWidth),r&&c&&(e.top=l-t.minHeight),a&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=e(this).data("ui-resizable"),u=l.options,c=l.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,h=e.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,u=Math.round((s.width-n.width)/h)*h,c=Math.round((s.height-n.height)/l)*l,d=n.width+u,p=n.height+c,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(d+=h),v&&(p+=l),f&&(d-=h),m&&(p-=l),/^(se|s|e)$/.test(o)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.top=a.top-c):/^(sw)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.left=a.left-u):(t.size.width=d,t.size.height=p,t.position.top=a.top-c,t.position.left=a.left-u)}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,a.widgetName+"-item")===a?(s=t(this),!1):undefined}),t.data(e.target,a.widgetName+"-item")===a&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-t(document).scrollTop()<o.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<o.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+o.scrollSpeed)),e.pageX-t(document).scrollLeft()<o.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<o.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+o.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>a&&o>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return n?this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&s||"left"===a&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,a,o=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&r.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){o.push(this)});return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)a=t.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(u.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a));for(i=u.length-1;i>=0;i--)for(o=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",o),c.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,a,o,r,h,l,c,u,d,p,f=null,m=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],m=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],a=this.items.length-1;a>=0;a--)t.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height))&&(u=this.items[a].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[a][l]-c)&&(d=!0,u+=this.items[a][l]),o>Math.abs(u-c)&&(o=Math.abs(u-c),r=this.items[a],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[m].element,!0),this._trigger("change",s,this._uiHash()),this.containers[m]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,a=e.pageX,o=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,a){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(a))}}).css("position",a)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(a=!0),t in i&&(o[t]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(a.inline?e.parent()[0]:a.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var a,r="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,a;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),n),a.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,a):n&&this._inlineDatepicker(e,a)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,r,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,a,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span class='"+this._appendClass+"'>"+r+"</span>"),e[o?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:n,title:n}):n)),e[o?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,a=new Date(2009,11,20),r=this._get(t,"dateFormat");r.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},a.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,a,o){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],r,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,r);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,r),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),a=t.data(e,r);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var r,o,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(r=s||{},"string"==typeof s&&(r={},r[s]=a),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,r),null!==h&&r.dateFormat!==e&&r.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&r.dateFormat!==e&&r.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,a=t.datepicker._getInst(e.target),r=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),r=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),n[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,n[0]),i=t.datepicker._get(a,"onSelect"),i?(s=t.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),r=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),r=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),r=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),r=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),r=e.ctrlKey||e.metaKey;break;default:r=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):r=!1;r&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,a=t.datepicker._getInst(i.target);return t.datepicker._get(a,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,a,r,o,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),a=s?s.apply(e,[e,i]):{},a!==!1&&(n(i.settings,a),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),o=t.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,a=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],r=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-r:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+o?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+o):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,a,o=this._curInst;!o||e&&o!==t.data(e,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(e,i,s,n){var a,r=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(a=this._getInst(r[0]),a.selectedDay=a.currentDay=t("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,a=this._get(e,"altField");a&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(a).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var a,r,o,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,_=-1,b=-1,y=!1,x=function(t){var e=i.length>a+1&&i.charAt(a+1)===t;return e&&a++,e},k=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),a=s.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},w=function(i,n,a){var r=-1,o=t.map(x(i)?a:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=i[0],l+=n.length,!1):e}),-1!==r)return r+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;i.length>a;a++)if(y)"'"!==i.charAt(a)||x("'")?D():y=!1;else switch(i.charAt(a)){case"d":_=k("d");break;case"D":w("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=w("M",f,m);break;case"y":g=k("y");break;case"@":h=new Date(k("@")),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),g=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":x("'")?D():y=!0;break;default:D()}if(s.length>l&&(o=s.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),b>-1)for(v=1,_=b;;){if(r=this._getDaysInMonth(g,v-1),r>=_)break;v++,_-=r}if(h=this._daylightSavingAdjust(new Date(g,v-1,_)),h.getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,a);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),r,o);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),a=n,r=this._getFormatConfig(t);try{a=this.parseDate(i,s,r)||n}catch(o){s=e?"":s}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=s?a.getDate():0,t.currentMonth=s?a.getMonth():0,t.currentYear=s?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=n.getFullYear(),r=n.getMonth(),o=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,r))}l=h.exec(i)}return new Date(a,r,o)},r=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?s:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,r=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=r.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=r.getMonth(),t.drawYear=t.selectedYear=t.currentYear=r.getFullYear(),n===t.selectedMonth&&a===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,a,r,o,h,l,c,u,d,p,f,m,g,v,_,b,y,x,k,w,D,T,C,M,S,N,I,P,A,z,H,E,F,O,W,j,R=new Date,L=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),Q=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),U=this._get(t,"stepMonths"),q=1!==Q[0]||1!==Q[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),$=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),$)for(e=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-Q[0]*Q[1]+1,$.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-U,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+U,1)),this._getFormatConfig(t)):n,a=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",r=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?X:L,r=K?this.formatDate(r,o,this._getFormatConfig(t)):r,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;Q[0]>k;k++){for(w="",this.maxRows=4,D=0;Q[1]>D;D++){if(T=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),C=" ui-corner-all",M="",q){if(M+="<div class='ui-datepicker-group",Q[1]>1)switch(D){case 0:M+=" ui-datepicker-group-first",C=" ui-corner-"+(Y?"right":"left");break;case Q[1]-1:M+=" ui-datepicker-group-last",C=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",C=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===k?Y?a:s:"")+(/all|right/.test(C)&&0===k?Y?s:a:"")+this._generateMonthYearHeader(t,Z,te,G,$,k>0||D>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",S=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+c)%7,S+="<th"+((x+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[N]+"'>"+p[N]+"</span></th>";for(M+=S+"</tr></thead><tbody>",I=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),P=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((P+I)/7),z=q?this.maxRows>A?this.maxRows:A:A,this.maxRows=z,H=this._daylightSavingAdjust(new Date(te,Z,1-P)),E=0;z>E;E++){for(M+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)O=g?g.apply(t.input?t.input[0]:null,[H]):[!0,""],W=H.getMonth()!==Z,j=W&&!_||!O[0]||G&&G>H||$&&H>$,F+="<td class='"+((x+c+6)%7>=5?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(H.getTime()===T.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===H.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!v?"":" "+O[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===L.getTime()?" ui-datepicker-today":""))+"'"+(W&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(W&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===L.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=F+"</tr>"}Z++,Z>11&&(Z=0,te++),M+="</tbody></table>"+(q?"</div>"+(Q[0]>0&&D===Q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),w+=M}y+=w}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,a,r,o){var h,l,c,u,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);
return isNaN(e)?d:e},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),r=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=null,o=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=s),i[1].match(/[+\-].*/)&&(o+=s)),(!n||e.getTime()>=n.getTime())&&(!a||e.getTime()<=a.getTime())&&(!r||e.getFullYear()>=r)&&(!o||o>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[c[l].cache]=o[c[l].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,o,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,h],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),a=c[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],l=s[a],c=u[n.type]||{};null!==l&&(null===o?h[a]=l:(c.mod&&(l-o>c.mod/2?o+=c.mod:o-l>c.mod/2&&(o-=c.mod)),h[a]=i((l-o)*e+o,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[o]=d,n):l(d)},f(a,function(e,i){l.fn[e]||(l.fn[e]=function(n){var a,o=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=l(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var h=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",m=i.test(u),g={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),a=t.effects.createWrapper(h).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:o+r),v&&(a.css(p,0),m||a.css(f,r+o)),a.animate(g,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],v=o.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(_=_.concat(c).concat(l),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=t.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}})(jQuery);;
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}})(jQuery);;
/*! jQuery UI - v1.9.2 - 2013-02-15
 * http://jqueryui.com
 * Includes: jquery.ui.datepicker-af.js, jquery.ui.datepicker-ar-DZ.js, jquery.ui.datepicker-ar.js, jquery.ui.datepicker-az.js, jquery.ui.datepicker-bg.js, jquery.ui.datepicker-bs.js, jquery.ui.datepicker-ca.js, jquery.ui.datepicker-cs.js, jquery.ui.datepicker-cy-GB.js, jquery.ui.datepicker-da.js, jquery.ui.datepicker-de.js, jquery.ui.datepicker-el.js, jquery.ui.datepicker-en-AU.js, jquery.ui.datepicker-en-GB.js, jquery.ui.datepicker-en-NZ.js, jquery.ui.datepicker-eo.js, jquery.ui.datepicker-es.js, jquery.ui.datepicker-et.js, jquery.ui.datepicker-eu.js, jquery.ui.datepicker-fa.js, jquery.ui.datepicker-fi.js, jquery.ui.datepicker-fo.js, jquery.ui.datepicker-fr-CH.js, jquery.ui.datepicker-fr.js, jquery.ui.datepicker-gl.js, jquery.ui.datepicker-he.js, jquery.ui.datepicker-hi.js, jquery.ui.datepicker-hr.js, jquery.ui.datepicker-hu.js, jquery.ui.datepicker-hy.js, jquery.ui.datepicker-id.js, jquery.ui.datepicker-is.js, jquery.ui.datepicker-it.js, jquery.ui.datepicker-ja.js, jquery.ui.datepicker-ka.js, jquery.ui.datepicker-kk.js, jquery.ui.datepicker-km.js, jquery.ui.datepicker-ko.js, jquery.ui.datepicker-lb.js, jquery.ui.datepicker-lt.js, jquery.ui.datepicker-lv.js, jquery.ui.datepicker-mk.js, jquery.ui.datepicker-ml.js, jquery.ui.datepicker-ms.js, jquery.ui.datepicker-nl-BE.js, jquery.ui.datepicker-nl.js, jquery.ui.datepicker-no.js, jquery.ui.datepicker-pl.js, jquery.ui.datepicker-pt-BR.js, jquery.ui.datepicker-pt.js, jquery.ui.datepicker-rm.js, jquery.ui.datepicker-ro.js, jquery.ui.datepicker-ru.js, jquery.ui.datepicker-sk.js, jquery.ui.datepicker-sl.js, jquery.ui.datepicker-sq.js, jquery.ui.datepicker-sr-SR.js, jquery.ui.datepicker-sr.js, jquery.ui.datepicker-sv.js, jquery.ui.datepicker-ta.js, jquery.ui.datepicker-th.js, jquery.ui.datepicker-tj.js, jquery.ui.datepicker-tr.js, jquery.ui.datepicker-uk.js, jquery.ui.datepicker-vi.js, jquery.ui.datepicker-zh-CN.js, jquery.ui.datepicker-zh-HK.js, jquery.ui.datepicker-zh-TW.js
 * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

/* English/UK initialisation for the jQuery UI date picker plugin. */
/* Written by Stuart. */
jQuery(function($){
    $.datepicker.regional['en'] = {
        closeText: 'Done',
        prevText: 'Prev',
        nextText: 'Next',
        currentText: 'Today',
        monthNames: ['January','February','March','April','May','June',
            'July','August','September','October','November','December'],
        monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        dayNamesMin: ['Su','Mo','Tu','We','Th','Fr','Sa'],
        weekHeader: 'Wk',
        dateFormat: 'dd/mm/yy',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: ''};
});

/* French initialisation for the jQuery UI date picker plugin. */
/* Written by Keith Wood (kbwood{at}iinet.com.au),
 Stéphane Nahmani (sholby@sholby.net),
 Stéphane Raimbault <stephane.raimbault@gmail.com> */
jQuery(function($){
    $.datepicker.regional['fr'] = {
        closeText: 'Fermer',
        prevText: 'Précédent',
        nextText: 'Suivant',
        currentText: 'Aujourd\'hui',
        monthNames: ['Janvier','Février','Mars','Avril','Mai','Juin',
            'Juillet','Août','Septembre','Octobre','Novembre','Décembre'],
        monthNamesShort: ['Janv.','Févr.','Mars','Avril','Mai','Juin',
            'Juil.','Août','Sept.','Oct.','Nov.','Déc.'],
        dayNames: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
        dayNamesShort: ['Dim.','Lun.','Mar.','Mer.','Jeu.','Ven.','Sam.'],
        dayNamesMin: ['D','L','M','M','J','V','S'],
        weekHeader: 'Sem.',
        dateFormat: 'dd/mm/yy',
        firstDay: 1,
        isRTL: false,
        showMonthAfterYear: false,
        yearSuffix: ''};
});

/* Japanese initialisation for the jQuery UI date picker plugin. */
/* Written by Kentaro SATO (kentaro@ranvis.com). */
jQuery(function($){
    $.datepicker.regional['ja'] = {
        closeText: '閉じる',
        prevText: '&#x3C;前',
        nextText: '次&#x3E;',
        currentText: '今日',
        monthNames: ['1月','2月','3月','4月','5月','6月',
            '7月','8月','9月','10月','11月','12月'],
        monthNamesShort: ['1月','2月','3月','4月','5月','6月',
            '7月','8月','9月','10月','11月','12月'],
        dayNames: ['日曜日','月曜日','火曜日','水曜日','木曜日','金曜日','土曜日'],
        dayNamesShort: ['日','月','火','水','木','金','土'],
        dayNamesMin: ['日','月','火','水','木','金','土'],
        weekHeader: '週',
        dateFormat: 'yy/mm/dd',
        firstDay: 0,
        isRTL: false,
        showMonthAfterYear: true,
        yearSuffix: '年'};
});
;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.autoMobilize=!0,e.wijCSS={widget:"ui-widget",overlay:"ui-widget-overlay",content:"ui-widget-content",header:"ui-widget-header",stateDisabled:"ui-state-disabled",stateFocus:"ui-state-focus",stateActive:"ui-state-active",stateDefault:"ui-state-default",stateHightlight:"ui-state-highlight",stateHover:"ui-state-hover",stateChecked:"ui-state-checked",stateError:"ui-state-error",getState:function(e){return e=e.charAt(0).toUpperCase()+e.substr(1),t.wijmo.wijCSS["state"+e]},icon:"ui-icon",iconCheck:"ui-icon-check",iconRadioOn:"ui-icon-radio-on",iconRadioOff:"ui-icon-radio-off",iconClose:"ui-icon-close",iconArrow4Diag:"ui-icon-arrow-4-diag",iconNewWin:"ui-icon-newwin",iconVGripSolid:"ui-icon-grip-solid-vertical",iconHGripSolid:"ui-icon-grip-solid-horizontal",iconPlay:"ui-icon-play",iconPause:"ui-icon-pause",iconStop:"ui-icon-stop",iconArrowUp:"ui-icon-triangle-1-n",iconArrowRight:"ui-icon-triangle-1-e",iconArrowDown:"ui-icon-triangle-1-s",iconArrowLeft:"ui-icon-triangle-1-w",iconArrowRightDown:"ui-icon-triangle-1-se",iconCaratUp:"ui-icon-carat-1-n",iconCaratRight:"ui-icon-carat-1-e",iconCaratDown:"ui-icon-carat-1-s",iconCaratLeft:"ui-icon-carat-1-w",iconSeekFirst:"ui-icon-seek-first",iconSeekEnd:"ui-icon-seek-end",iconSeekNext:"ui-icon-seek-next",iconSeekPrev:"ui-icon-seek-prev",inputSpinnerLeft:"ui-input-spinner-left",inputSpinnerRight:"ui-input-spinner-right",inputTriggerLeft:"ui-input-trigger-left",inputTriggerRight:"ui-input-trigger-right",inputSpinnerTriggerLeft:"ui-input-spinner-trigger-left",inputSpinnerTriggerRight:"ui-input-spinner-trigger-right",cornerAll:"ui-corner-all",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",cornerBottom:"ui-corner-bottom",cornerBL:"ui-corner-bl",cornerBR:"ui-corner-br",cornerTop:"ui-corner-top",cornerTL:"ui-corner-tl",cornerTR:"ui-corner-tr",helperClearFix:"ui-helper-clearfix",helperReset:"ui-helper-reset",helperHidden:"ui-helper-hidden",priorityPrimary:"ui-priority-primary",prioritySecondary:"ui-priority-secondary",button:"ui-button",buttonText:"ui-button-text",buttonTextOnly:"ui-button-text-only",tabs:"ui-tabs",tabsTop:"ui-tabs-top",tabsBottom:"ui-tabs-bottom",tabsLeft:"ui-tabs-left",tabsRight:"ui-tabs-right",tabsLoading:"ui-tabs-loading",tabsActive:"ui-tabs-active",tabsPanel:"ui-tabs-panel",tabsNav:"ui-tabs-nav",tabsHide:"ui-tabs-hide",tabsCollapsible:"ui-tabs-collapsible",activeMenuitem:"ui-active-menuitem"},e.wijMobileCSS={content:"ui-content",header:"ui-header",overlay:"ui-overlay",stateDisabled:"ui-disabled",stateFocus:"ui-focus",stateActive:"ui-btn-active",stateDefault:"ui-btn-up-a",iconArrowUp:"ui-icon-arrow-u",iconArrowRight:"ui-icon-arrow-r",iconArrowDown:"ui-icon-arrow-d",iconArrowLeft:"ui-icon-arrow-l",iconArrowRightDown:"ui-icon-arrow-d",iconSeekFirst:"ui-icon-arrow-l",iconSeekEnd:"ui-icon-arrow-r",iconSeekNext:"ui-icon-arrow-r",iconSeekPrev:"ui-icon-arrow-l",iconClose:"ui-icon-delete",iconStop:"ui-icon-grid",iconCheck:"ui-icon-checkbox-on"},e.wijMobileThemePrefix=["ui-bar","ui-body","ui-overlay","ui-btn-up","ui-btn-hover","ui-btn-down"],e.autoInit=function(n,r){if(t.mobile&&t.mobile.page&&r){var i=t.mobile.page.prototype.options.keepNative;i&&i.length&&i.indexOf(r)===-1?i=[i,r].join(", "):i=r,t.mobile.page.prototype.options.keepNative=i}t.mobile&&t.wijmo[n]&&t.wijmo[n].prototype&&t.wijmo[n].prototype.enhanceWithin&&t(document).bind("pagecreate create",function(e){t.wijmo[n].prototype.enhanceWithin(e.target)})},e.registerWidget=function(n,r,i,s){var o="wijmo."+n,u;typeof i=="function"&&(u=i,i=null);if(i===null||i===undefined)i=t.extend(!0,{},r),r=t.wijmo.widget;i.options=i.options||{},i.options.initSelector=i.options.initSelector||":jqmData(role='"+n+"')",t.mobile&&i.options&&i.options.wijMobileCSS&&(i.options.wijCSS=i.options.wijCSS||{},t.extend(i.options.wijCSS,i.options.wijMobileCSS)),t.widget(o,r,i),u?u.call():this.autoInit&&this.autoInit(n,i.options.initSelector)},e.addThemeToMobileCSS=function(r,i){t.each(i,function(n,s){typeof s=="string"?t.each(e.wijMobileThemePrefix,function(e,t){var o=new RegExp("\\b"+t);o.test(s)&&(i[n]=s+" "+t+"-"+r)}):e.addThemeToMobileCSS(r,s)})},e}();t.wijmo=n;var r=function(){function e(){}return e.prototype.destroy=function(){},e.prototype._setOption=function(e,t){},e.prototype._create=function(){},e.prototype._init=function(){},e.prototype.widget=function(){return this.element},e}();e.JQueryUIWidget=r,r.prototype.options={wijCSS:t.wijmo.wijCSS},r.prototype.destroy=function(){t.Widget.prototype.destroy.apply(this,arguments)},r.prototype._setOption=function(e,n){t.Widget.prototype._setOption.apply(this,arguments)},r.prototype._create=function(){t.Widget.prototype._create.apply(this,arguments)},r.prototype._init=function(){t.Widget.prototype._init.apply(this,arguments)};var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(r);e.JQueryMobileWidget=i,t(window.document).trigger("wijmoinit");var s=function(e){function n(){e.apply(this,arguments),this._widgetCreated=!1}return __extends(n,e),n.prototype._baseWidget=function(){return this._isMobile?t.mobile.widget:t.Widget},n.prototype._createWidget=function(e,n){this._widgetCreated=!0,this._syncEventPrefix&&(this.widgetEventPrefix=this.widgetName),window.wijmoApplyWijTouchUtilEvents&&(t=window.wijmoApplyWijTouchUtilEvents(t)),this._baseWidget().prototype._createWidget.apply(this,arguments)},n.prototype._create=function(){this._baseWidget().prototype._create.apply(this,arguments)},n.prototype._init=function(){this._baseWidget().prototype._init.apply(this,arguments)},n.prototype.destroy=function(){this._baseWidget().prototype.destroy.apply(this,arguments)},n.prototype._setOption=function(e,t){this._baseWidget().prototype._setOption.apply(this,arguments),e==="disabled"&&t&&this._isMobile&&this.element.removeClass("ui-state-disabled").addClass(this.options.wijCSS.stateDisabled)},n}(i);e.wijmoWidget=s,s.prototype._syncEventPrefix=!0,s.prototype._isMobile=!1,t.mobile!=null&&t.wijmo.autoMobilize===!0?(t.extend(!0,s.prototype.options.wijCSS,t.wijmo.wijMobileCSS),s.prototype._isMobile=!0,s.prototype.options=t.extend(!0,{},s.prototype.options,s.prototype._baseWidget().prototype.options),s.prototype.enhanceWithin=function(e,n){this._widgetCreated||t.mobile.widget.prototype.enhanceWithin.apply(this,arguments)},s.prototype._getCreateOptions=function(){var e=this.element,n,r=r=function(e){if(typeof e=="undefined")return{};if(e===null)return{};var n=/(?:(?:\{[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*)|(?:,[\n\r\t\s]*(.+?)\s*\:[\n\r\t\s]*))('(.*?[^\\])')?/gi,r=/\[.*?(?=[\]\[])|[\]\[].*?(?=[\]])/gi,i=e.replace(n,function(e,t,n,r){var i,s=/[\n\r\t\s]*['"]?([^\{,\s]+?)['"]?\s*:[\n\r\t\s]*/i,o=/\:[\n\r\t\s]*(?:'(.*)')?/i;return i=e.replace(s,'"$1":'),r?i.replace(o,':"$1"'):i}).replace(r,function(e){var t=/'(.*?[^\\])'/g;return e.replace(t,'"$1"')});return t.parseJSON(i)},i=r(e.attr("data-"+t.mobile.nsNormalize("options"))),s;return n=t.mobile.widget.prototype._getCreateOptions.apply(this,arguments),s=t.extend(!0,{},this.options.wijCSS),this.theme=this.options.theme!==undefined?this.options.theme:this.element.jqmData("theme"),this.theme&&t.wijmo.addThemeToMobileCSS(this.theme,s),t.extend(n,{wijCSS:s},i)},t.widget("wijmo.widget",t.mobile.widget,s.prototype),t(document).on("pageshow",function(e,n){if(e.target==null)return;var r=t(e.target);r.wijTriggerVisibility&&r.wijTriggerVisibility()})):(s.prototype.options=t.extend(!0,{},s.prototype.options,s.prototype._baseWidget().prototype.options),t.widget("wijmo.widget",s.prototype))})(wijmo||(wijmo={}));;
var wijmo;(function(e){e.expando=".wijmo";var t=function(){function e(e){this.message=e,this.stack="Wijmo"+(new Error).stack,this.name="WijmoError"}return e}();e.WijmoError=t;var n=t;n.prototype=new Error,n.prototype.constructor=n})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){var n=function(){function t(e){this.object=e}return t.getFrom=function(r,i){typeof i=="undefined"&&(i=!0);var s=e.expando,o;if(Object(r)!==r)return null;o=r[s],o&&o.object!==r&&(o=null);if(i&&!(o instanceof t&&Object.prototype.hasOwnProperty.call(r,s))){o=new t(r);try{Object.defineProperty(r,s,{value:o,configurable:!1,enumerable:!1,writable:!1})}catch(u){r[s]=o}}return o},t}();t.Expando=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(e){function t(e){return function(){var t=function(){return e.prototype._call.apply(t,arguments)};return $.extend(t,e.prototype),e.apply(t,arguments),t}}e.funcClass=t})(e.util||(e.util={}));var t=e.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){function i(e){return t.isFunction(e.subscribe)}function l(e){return typeof e=="undefined"&&(e=null),new f(e)}function c(e){return typeof e=="undefined"&&(e=null),new f(e,!0)}function h(e){return t.isFunction(e)&&i(e)}var t=jQuery,n=function(){function e(e,t){this.handler=e,this.context=t}return e.prototype.trigger=function(e){return this.handler.apply(this.context,e)},e}();e.SubscriberEntry=n;var r=function(){function r(e){this.defaultContext=e,this._entries=[]}return r.prototype.subscribe=function(t,r){typeof r=="undefined"&&(r=this.defaultContext);var i=this,s=new n(t,r);return this._entries.push(s),{dispose:function(){return e.util.remove(i._entries,s)}}},r.prototype.trigger=function(){var t=[];for(var n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];e.util.each(this._entries,function(e,n){return n.trigger(t)})},r.makeSubscribable=function(n){var i=new r(n);return n.subscribe=t.proxy(i.subscribe,i),i},r}();e.Subscribable=r,e.isSubscriptable=i;var s=function(){function e(){}return e.prototype.subscribe=function(e,t){return this._subscribable=this._subscribable||new r(this),this._subscribable.subscribe(e,t)},e.prototype._trigger=function(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];this._subscribable&&this._subscribable.trigger.apply(this._subscribable,arguments)},e}();e.BaseObservable=s;var o=function(e){function t(t){e.call(this),this.mutable=t}return __extends(t,e),t.prototype._call=function(){return this.mutable.value},t}(s);e._ReadOnlyObservable=o;var u=e.util.funcClass(o),a=function(e){function t(t,n){typeof n=="undefined"&&(n=!1),e.call(this),this.value=t,this.checkNewValue=n}return __extends(t,e),t.prototype._call=function(e){return arguments.length>0&&(!this.checkNewValue||e!==this.value)&&(this.value=e,this._trigger(e),this._readOnly&&this._readOnly._trigger(e)),this.value},t.prototype.read=function(){return this._readOnly=this._readOnly||new u(this),this._readOnly},t}(s);e._MutableObservable=a;var f=e.util.funcClass(a);e.observable=l,e.observableWithNewValueCheck=c,e.isObservable=h})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){(function(n){function i(e,t){return typeof t=="undefined"&&(t=!1),r.isArray(e)?e=e.slice(0):r.isPlainObject(e)&&(e=r.extend(!!t,{},e)),e}function s(e){return typeof e=="string"||e instanceof String}function o(e){return typeof e=="number"}function u(t){return t===e.expando||t===r.expando}function a(e,t){var n=this;r.each(e,function(e,r){if(!u(e))return t.call(n,e,r)})}function f(t,n){var i=r.map(t,n);return delete i[e.expando],i}function l(e){var t;return e&&r.isFunction(e.toString)&&e.toString!==Object.prototype.toString?t=e.toString():t=JSON.stringify(e),t!=null&&t.length>2&&t[0]==='"'&&t[t.length-1]==='"'&&(t=t.substr(1,t.length-2)),t}function c(e){var t=[];for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n+1];return e.replace(/{(\d+)}/g,function(e,n){return l(t[parseInt(n,10)])})}function h(e,t){var n=!0;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(!n)return!1}),n}function p(e,t){var n=!1;return a(e,function(e,r){n=r,t&&(n=t.call(n,n,e));if(n)return!1}),n}function d(e,t){var n,i,o;if(e==null)return t==null?0:-1;if(t==null)return 1;if(r.isArray(e)&&r.isArray(t)){i=Math.min(e.length,t.length);for(n=0;n<i;n++){o=d(e[n],t[n]);if(o!==0)return o}return e.length-t.length}return s(e)&&s(t)?(e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0):(o=e-t,isNaN(o)?0:o)}function v(e,t){return r.inArray(t,e)>=0}function m(e,t){var n=0,r;for(r=0;r<e.length;)e[r]!==t?r++:(e.splice(r,1),n++);return n}function g(e,t){return e==-1?-1:e==0?0:t?Math.ceil(e/t):1}function y(e,t){function i(){return e.apply(t,n)}var n=[];for(var r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];if(typeof setTimeout==typeof undefined)return i();setTimeout(i,10)}function b(e){if(typeof console=="undefined")return;console.error?console.error(e):console.log&&console.log(e)}function w(e,n){var r=0,i=e,s;for(;;){var o=n.indexOf(".",r);o>=0?(s=n.substring(r,o),r=o+1):r>0?s=n.substring(r):s=n,i=i[s],t.isObservable(i)&&(i=i());if(o<0)break}return i}function E(e,n,r){var i=0,s;for(;;){var o=n.indexOf(".",i);o>=0?(s=n.substring(i,o),i=o+1):i>0?s=n.substring(i):s=n;var u=e[s];if(!(o>=0)){t.isObservable(u)?u(r):e[s]=r;break}t.isObservable(u)&&(u=u()),e=u}}function S(e){return typeof e=="object"&&!r.isArray(e)&&!r.isPlainObject(e)&&e.constructor!==Object.prototype.constructor}function x(e){t.util.each(e,function(e,n){if(!n||typeof n!="object")return;t.util.each(n,function(e,r){var i;if(!t.util.isString(r))return;i=/\/Date\((-?\d+)\)\//.exec(r);if(!i)return;n[e]=new Date(parseInt(i[1],10))})})}var r=jQuery;n.clone=i,n.isString=s,n.isNumeric=o,n.isInternalProperty=u,n.each=a,n.map=f,n.toStr=l,n.format=c,n.every=h,n.some=p,n.compare=d,n.contains=v,n.remove=m,n.pageCount=g,n.executeDelayed=y,n.logError=b,n.getProperty=w,n.setProperty=E,n.isClassInstance=S,n.convertDateProperties=x;var T=function(){function e(e){this.key=e}return e}();n.HashMapEntry=T;var N=function(){function e(){this.hash={}}return e.prototype.getEntry=function(e,t){typeof t=="undefined"&&(t=!1);if(e===null)return!this.nullEntry&&t&&(this.nullEntry=new T(e)),this.nullEntry;var n=String(e),r=this.hash[n],i;if(r==null){if(!t)return null;r=[],this.hash[n]=r}for(var s=0;s<r.length;s++)if(r[s].key===e)return r[s];return t&&(i=new T(e),r.push(i)),null},e.prototype.containsKey=function(e){return!!this.getEntry(e)},e.prototype.get=function(e,t){typeof t=="undefined"&&(t=null);var n=this.getEntry(e);return n?n.value:t},e.prototype.put=function(e,t){this.getEntry(e,!0).value=t},e}();n.HashMap=N})(t.util||(t.util={}));var n=t.util})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(t){t.errors={},t.errors._register=function(n){t.util.each(n,function(n,r){function i(){var n=[];for(var i=0;i<arguments.length-0;i++)n[i]=arguments[i+0];var s;return $.isFunction(r)?r=r.apply(this,arguments):arguments.length>0&&(n.unshift(r),r=t.util.format.apply(this,n)),r=$.trim(r),s=r[r.length-1],s!=="."&&s!=="!"&&s!=="?"&&(r+="."),new e.WijmoError(r)}t.errors[n]=function(){throw i.apply(this,arguments)},t.errors[n].create=i})},t.errors._register({indexOutOfBounds:"Index is outside the bounds of the array.",notImplemented:"The operation is not implemented",unsupportedOperation:"Unsupported operation",unsupportedFilterOperator:"Unsupported filter operator: {0}",unsupportedDataSource:"Unsupported data source",argument:function(e){var t="Unexpected argument value.";return e&&(t+="\nParameter name: "+e),t},argumentNull:"Argument '{0}' is null/undefined",noParser:"There is no parser for type '{0}'",noUrl:"Url is not specified",cantConvert:"Value can't be converted to type '{0}': '{1}'",noGlobalize:"Globalize is not defined. Make sure you include globalize.js",itemNotInView:"Item {0} is not in the data view",unsupportedFilterFormat:"The filter format is not supported",multiPropertyKeysNotSupported:"Entities with multiple properties in the primary key are not supported. Entity type: {0}",keyPropertyNotFound:"Key property not found in {0} entity type"})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function r(n,r){typeof r=="undefined"&&(r=!1),n=n.toLowerCase();var i=t.ops[n];if(!i){var s=t.opMap[n];s&&(i=t.ops[s])}return!i&&r&&e.errors.unsupportedFilterOperator(n),i}function i(i){var s;if(!n.isPlainObject(i))return{operator:"==",op:t.ops.equals,value:i};var o=i.operator||t.ops.equals;if(e.util.isString(i.operator)){if(i.operator.toLowerCase()==="nofilter")return null;o=r(i.operator,!0)}else n.isFunction(o.apply)||e.errors.unsupportedFilterOperator(o);return{operator:i.operator,op:o,value:i.value}}function s(t){var r={isEmpty:!1,original:t,func:null,normalized:null};if(n.isFunction(t))r.func=t;else if(n.isArray(t))e.errors.unsupportedFilterFormat(t);else if(t){r.normalized={};var s=!1;e.util.each(t,function(t,o){n.isArray(o)&&e.errors.unsupportedFilterFormat(),o=i(o),o&&(r.normalized[t]=o,s=!0)}),s?r.func=function(t){return e.util.every(r.normalized,function(n,r){var i=e.util.getProperty(t,r);return n.op.apply(i,n.value)})}:r.normalized=null}return!r.normalized&&!r.func&&(r.isEmpty=!0,r.func=function(e){return!0}),r}var n=jQuery;t.opMap={"==":"equals",doesnotcontain:"notcontain","!=":"notequal",">":"greater","<":"less",">=":"greaterorequal","<=":"lessorequal",isnotempty:"notisempty",isnotnull:"notisnull"},t.normalizeCondition=i,t.compile=s,t.ops=function(){function r(e,n,r,i,s){return t[e.toLowerCase()]={name:e,displayName:n,arity:r,applicableTo:i,apply:s}}function i(t){return t instanceof Date&&(t=t.getTime()),e.util.isString(t)&&(t=t.toLowerCase()),t}function s(e,t,n,s){r(e,t,2,n,function(e,t){return s(i(e),i(t))})}function o(e,t,n,i){r(e,t,1,n,i)}function u(e,t,r){s(e,t,n.prim,r)}function a(e,t,r){s(e,t,n.str,r)}var t={},n={str:["string"],prim:["string","number","datetime","currency","boolean"]};return u("Equals","Equals",function(e,t){return e==t}),u("NotEqual","Not equal",function(e,t){return e!=t}),u("Greater","Greater than",function(e,t){return e>t}),u("Less","Less than",function(e,t){return e<t}),u("GreaterOrEqual","Greater or equal",function(e,t){return e>=t}),u("LessOrEqual","Less or equal",function(e,t){return e<=t}),a("Contains","Contains",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)>=0}),a("NotContain","Does not contain",function(e,t){return e!=t&&(!e||!e.indexOf||e.indexOf(t)<0)}),a("BeginsWith","Begins with",function(e,t){return e==t||e&&e.indexOf&&e.indexOf(t)==0}),a("EndsWith","Ends with",function(t,n){var r;return!e.util.isString(t)||!e.util.isString(n)?!1:(r=t.lastIndexOf(n),r>=0&&t.length-r===n.length)}),o("IsEmpty","Is empty",n.str,function(e){return!e&&e!==0&&e!==!1}),o("NotIsEmpty","Is not empty",n.str,function(e){return!!e||e===0||e===!1}),o("IsNull","Is null",n.prim,function(e){return e==null}),o("NotIsNull","Is not null",n.prim,function(e){return e!=null}),t}()})(e.filtering||(e.filtering={}));var t=e.filtering})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){(function(t){function n(t){var n=[];return t=e.util.isString(t)?t.split(/,\s*/):$.isArray(t)?t.slice(0):[t],t=$.isArray(t)?t.slice(0):[t],e.util.each(t,function(t,r){var i=!0,s;if(r==null)return;if(!e.util.isString(r)){r.property!=null&&n.push(r);return}if(r[0]==="-")i=!1,r=r.substr(1);else{var o=/\s(asc|desc)\s*$/.exec(r);o&&(r=r.substr(0,o.index),i=o[1]!=="desc")}n.push({property:r,asc:i})}),n.length>0?n:null}function r(t,r){typeof r=="undefined"&&(r=e.util.compare);var i=n(t),s={isEmpty:!0,original:t,propertyCompareTo:r,compare:null,normalized:i};return i!=null&&(s.isEmpty=!1,s.compare=function(t,n){var s=0,o,u;for(s=0;s<i.length;s++){u=i[s],o=r(e.util.getProperty(t,u.property),e.util.getProperty(n,u.property));if(o!==0)return u.asc||(o=-o),o}return 0}),s}t.compile=r})(e.sorting||(e.sorting={}));var t=e.sorting})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){function r(r){return t.isFunction(r)||e.errors.argument("factory"),n.push(r),{dispose:function(){e.util.remove(n,r)}}}function i(t){if(s(t))return t;var r=e.util.some(n,function(e){return e(t)});return r||e.errors.unsupportedDataSource()}function s(e){return e&&t.isFunction(e.count)&&t.isFunction(e.item)&&t.isFunction(e.getProperty)}var t=jQuery,n=[];e.registerDataViewFactory=r,r(function(e){return s(e)&&e}),r(function(n){return t.isArray(n)&&new e.ArrayDataView(n)}),e.asDataView=i,e.isDataView=s})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function n(n){function i(e){return function(){if(r)return;r=!0;try{e.apply(this,arguments)}finally{r=!1}}}this.array=n,this.currentItem=e.observableWithNewValueCheck(null),this.currentPosition=e.observableWithNewValueCheck(-1);var r=!1;this.currentItem.subscribe(i(function(e){this.currentPosition(e==null?-1:t.inArray(e,this.array))}),this),this.currentPosition.subscribe(i(function(t){e.util.isNumeric(t)||e.errors.argument("value"),(t<-1||t>=this.array.length)&&e.errors.indexOutOfBounds(),this.currentItem(t<0?null:this.array[t])}),this)}return n.prototype.update=function(){var e=this.currentItem(),n=this.currentPosition(),r=t.inArray(e,this.array);r<0&&e==null&&this._recentlyRemovedItem!=null&&(r=t.inArray(this._recentlyRemovedItem,this.array)),r>=0?(e&&(this._recentlyRemovedItem=e),this.currentPosition(r)):n>=0&&n<this.array.length?this.currentItem(this.array[n]):n==this.array.length&&this.array.length>0?(n=this.array.length-1,this.currentPosition(n),this.currentItem(this.array[n])):(this.currentPosition(-1),this.currentItem(null))},n.prototype.updateDelayed=function(){e.util.executeDelayed(this.update,this)},n}();e.CurrencyManager=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(){function t(t){function n(){this.pageSize()>0&&this.pageIndex()>=0?(this._skip=this.pageSize()*this.pageIndex(),this._take=this.pageSize()):(this._skip=0,this._take=-1),t(!0)}this.onChanged=t,this.filter=e.observable(),this._compiledFilter=e.filtering.compile(null),this.sort=e.observable(),this._compiledSort=e.sorting.compile(null),this.pageIndex=e.observable(0),this.pageSize=e.observable(0),this._skip=0,this._take=-1,this.filter.subscribe(function(e){this.onFilterChanged(e),t()},this),this.sort.subscribe(function(){this._compiledSort=e.sorting.compile(this.sort()),t()},this),this.pageIndex.subscribe(n,this),this.pageSize.subscribe(n,this)}return t.prototype.onFilterChanged=function(t){this._compiledFilter=e.filtering.compile(t)},t.prototype.setFilter=function(e){this.filter(e)},t.prototype.update=function(e){"filter"in e&&this.setFilter(e.filter),"sort"in e&&this.sort(e.sort),"pageSize"in e&&this.pageSize(e.pageSize),"pageIndex"in e&&this.pageIndex(e.pageIndex)},t.prototype.apply=function(e,t,n){typeof t=="undefined"&&(t=!0),typeof n=="undefined"&&(n=null);var r;if(!this._compiledFilter.isEmpty){n?n.length=0:n=[];for(r=0;r<e.length;r++){var i=e[r];this._compiledFilter.func(i)&&n.push(i)}}else if(!n)n=e.slice(0);else{n.length=e.length;for(r=0;r<e.length;r++)n[r]=e[r]}this._compiledSort.isEmpty||n.sort(this._compiledSort.compare);var s=n.length;return t&&this._take>0&&(this._skip>0&&n.splice(0,Math.min(this._skip,n.length)),this._take<n.length&&(n.length=this._take)),{results:n,totalCount:s}},t.prototype.toObj=function(){return{filter:this._compiledFilter.normalized,sort:this._compiledSort.normalized,pageSize:this.pageSize(),pageIndex:this.pageIndex()}},t}();e.Shape=n;var r=function(){function r(t){this.isRemote=!1,this.localPaging=!0,this.local=[],this._updatingShape=!1,this._pageCount=e.observable(1),this._totalItemCount=e.observable(0),this._isLoaded=e.observable(!1),this._isLoading=e.observable(!1),this._currentEditItem=e.observable(),this._isCurrentEditItemNew=!1,this._currentEditItemSnapshot=null,this.isLoading=this._isLoading.read(),this.isLoaded=this._isLoaded.read(),this._changed=new e.Subscribable(this),this.currentEditItem=this._currentEditItem.read(),this._initCurrency(),this._initShape(t)}return r.prototype.dispose=function(){},r.prototype.count=function(){return this.local.length},r.prototype.item=function(t){return(t<0||t>=this.local.length)&&e.errors.indexOutOfBounds(),this.local[t]},r.prototype.indexOf=function(e){return t.inArray(e,this.local)},r.prototype.getSource=function(){return this.sourceArray},r.prototype.toObservableArray=function(){return this._koArray||(this._koArray=ko.observableArray(this.local)),this._koArray},r._getProps=function(r){var i=[];return e.util.each(r,function(e,n){e=String(e);if(e.match(/^_/))return;if(t.isFunction(n)&&!n.subscribe)return;i.push({name:e})}),i},r.prototype.getProperties=function(){return this.count()?r._getProps(this.item(0)):[]},r.prototype._readProperty=function(t,n){return e.util.getProperty(t,n)},r.prototype.getProperty=function(e,t){var n=this._getItem(e);return this._readProperty(n,t)},r.prototype._writeProperty=function(t,n,r){e.util.setProperty(t,n,r)},r.prototype.setProperty=function(e,t,n){var r=this._getItem(e);return r===this.currentEditItem()&&this._currentEditItemSnapshot&&!(t in this._currentEditItemSnapshot)&&(this._currentEditItemSnapshot[t]=this.getProperty(e,t)),this._writeProperty(r,t,n),this},r.prototype.subscribe=function(e,t){return this._changed.subscribe(e,t)},r.prototype.trigger=function(){this._currencyManager.update(),this._changed.trigger(this.local),this._koArray&&this._koArray.notifySubscribers(this.local)},r.prototype.canFilter=function(){return!0},r.prototype.canSort=function(){return!0},r.prototype._updateShape=function(e){this._updatingShape=!0;try{this._shape.update(e)}finally{this._updatingShape=!1}},r.prototype.prevPage=function(){return this.pageIndex()<1?!1:(this.pageIndex(this.pageIndex()-1),!0)},r.prototype.nextPage=function(){return this.pageCount()>0&&this.pageIndex()+1>=this.pageCount()?!1:(this.pageIndex(this.pageIndex()+1),!0)},r.prototype._createShape=function(e){return new n(e)},r.prototype._initShape=function(e){var t=this,n=function(e){typeof e=="undefined"&&(e=!1),t._updatingShape||t.refresh(null,e&&t.localPaging)};this._shape=this._createShape(n),e&&this._updateShape(e),this.filter=this._shape.filter,this.sort=this._shape.sort,this.pageIndex=this._shape.pageIndex,this.pageSize=this._shape.pageSize,this.pageCount=this._pageCount.read(),this.totalItemCount=this._totalItemCount.read()},r.prototype._localRefresh=function(n){typeof n=="undefined"&&(n=this.localPaging);var r=this._shape.apply(this.sourceArray,n,this.local);return n&&this._totalItemCount(r.totalCount),this._pageCount(e.util.pageCount(this.totalItemCount(),this.pageSize())),this.trigger(),t.Deferred().resolve().promise()},r.prototype._remoteRefresh=function(){return this._localRefresh()},r.prototype.refresh=function(e,t){typeof t=="undefined"&&(t=!1);var n=this;this.cancelRefresh(),e&&this._updateShape(e),this._isLoading(!0);var r=t?this._localRefresh():this._remoteRefresh();return r.then(function(){n._isLoaded(!0),n._isLoading(!1)})},r.prototype.cancelRefresh=function(){},r.prototype._initCurrency=function(){this._currencyManager=new e.CurrencyManager(this.local),this.currentItem=this._currencyManager.currentItem,this.currentPosition=this._currencyManager.currentPosition},r.prototype.isCurrentEditItemNew=function(){return this._isCurrentEditItemNew},r.prototype._beginEdit=function(e,t){this.commitEdit(),this._currentEditItemSnapshot={},this._isCurrentEditItemNew=t,this._currentEditItem(e)},r.prototype.canAdd=function(){return!0},r.prototype.add=function(t){t||e.errors.argument("item"),this.commitEdit(),this.local.push(t),this._beginEdit(t,!0),this.trigger()},r.prototype.canAddNew=function(){return!1},r.prototype.addNew=function(){return e.errors.unsupportedOperation()},r.prototype.editItem=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit(),e=this._getItem(e),e&&this._beginEdit(e,!1)},r.prototype.canRemove=function(){return!0},r.prototype._remove=function(t){this.local.splice(t.index,1),e.util.remove(this.sourceArray,t.item),this.trigger()},r.prototype.remove=function(e){typeof e=="undefined"&&(e=this.currentItem()),this.commitEdit();var t=this._resolve(e);return t?(this._remove(t),!0):!1},r.prototype.canCancelEdit=function(){return!0},r.prototype.cancelEdit=function(){var n=this,r;if(!this.currentEditItem())return;var i=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew?e.util.remove(this.local,this.item):this._currentEditItemSnapshot&&t.each(this._currentEditItemSnapshot,function(e,t){return n._writeProperty(i,e,t)}),this.trigger()},r.prototype.canCommitEdit=function(){return!0},r.prototype.commitEdit=function(){if(!this.currentEditItem())return;var t=this.currentEditItem();this._currentEditItem(null),this._isCurrentEditItemNew&&this.sourceArray.push(t);var n=this._shape._compiledFilter;!n.isEmpty&&!n.func(t)&&e.util.remove(this.local,t),this.trigger()},r.prototype._getItem=function(t){var n;return e.util.isNumeric(t)?this.item(t):t},r.prototype._resolve=function(t,n){typeof n=="undefined"&&(n=!1);var r;return e.util.isNumeric(t)?{index:t,item:this.item(t)}:(r=this.indexOf(t),r<0?(n&&e.errors.itemNotInView(t),null):{index:r,item:t})},r}();e.ArrayDataViewBase=r;var i=function(e){function t(t,n){e.call(this,n),this.sourceArray=t,this.refresh()}return __extends(t,e),t}(r);e.ArrayDataView=i})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));var wijmo;(function(e){(function(e){var t=jQuery,n=function(e){function n(t){e.call(this),this.isRemote=!0,this.sourceArray=[],t&&this._construct(t)}return __extends(n,e),n.prototype._construct=function(e){this.options=e=t.extend({localPaging:!1},e),this.localPaging=e.localPaging,this._updateShape(e)},n}(e.ArrayDataViewBase);e.RemoteDataView=n})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=jQuery,n=function(){function e(e){this._originalReader=e}return e.prototype.read=function(e){e.items=null,this._originalReader&&t.isFunction(this._originalReader.read)&&this._originalReader.read(e),t.isArray(e.items)||(t.isArray(e.data)?e.items=e.data:e.data&&t.isArray(e.data.rows)?e.items=e.data.rows:e.items=[]);if(e.dynamic)if(!e.data||isNaN(e.data.totalRows))throw"totalRows value is missing"},e}(),r=function(r){function i(e){var i=this;r.call(this),this.dataSource=e,this.isRemote=!0,this.localPaging=!0,this._origLoaded=e.loaded,this._origReader=e.reader,e.loaded=function(e,n){i._loaded(),t.isFunction(i._origLoaded)&&i._origLoaded.apply(i,arguments)},e.reader=new n(e.reader);var s=e.items&&e.items.length>0;t.isArray(e.data)&&!s&&e.read(),e.items&&this._loaded()}return __extends(i,r),i.prototype.dispose=function(){this.dataSource.loaded=this._origLoaded,this.dataSource.reader=this._origReader,r.prototype.dispose.call(this)},i.prototype.getProperties=function(){return this.sourceArray&&this.sourceArray.length?e.ArrayDataViewBase._getProps(this.sourceArray[0]):[]},i.prototype._loaded=function(){this.sourceArray=this.dataSource.items,this.dataSource.data&&e.util.isNumeric(this.dataSource.data.totalRows)&&this._totalItemCount(this.dataSource.data.totalRows);var t=r.prototype._localRefresh.call(this,!this.dataSource.dynamic);this._currentDeferred&&t.then(this._currentDeferred.resolve)},i.prototype._remoteRefresh=function(){this._currentDeferred&&this._currentDeferred.state()==="pending"&&this._currentDeferred.fail(),this._currentDeferred=t.Deferred();var e={},n=!1;return this.dataSource.dynamic&&(n=!0,e.data=this._prepareRequest(),this.dataSource.proxy&&(this._origDataOption||(this._origDataOption=t.extend({},this.dataSource.proxy.options.data)),this.dataSource.proxy.options.data=t.extend({},this._origDataOption,e.data))),this.dataSource.load(e,n),this._currentDeferred},i.prototype._prepareRequest=function(){return{filtering:this._prepareFilterRequest(),paging:this._preparePageRequest(),sorting:this._prepareSortRequest()}},i.prototype._prepareFilterRequest=function(){var e=[];return!this._shape._compiledFilter.isEmpty&&this._shape._compiledFilter.normalized&&t.each(this._shape._compiledFilter.normalized,function(t,n){e.push({dataKey:t,filterOperator:n.op.Name,filterValue:n.value})}),e},i.prototype._preparePageRequest=function(){return{pageIndex:this._shape.pageIndex(),pageSize:this._shape.pageSize()}},i.prototype._prepareSortRequest=function(){return this._shape._compiledSort.isEmpty||!this._shape._compiledSort.normalized||this._shape._compiledSort.normalized.length==0?[]:t.map(this._shape._compiledSort.normalized,function(e){return{dataKey:e.property,sortDirection:e.asc?"ascending":"descending"}})},i}(e.ArrayDataViewBase);e.registerDataViewFactory(function(e){if(typeof wijdatasource=="function"&&e instanceof wijdatasource)return new r(e);return})})(e.data||(e.data={}));var t=e.data})(wijmo||(wijmo={}));;
function __wijReadOptionEvents(e,t){for(var n=0;n<e.length;n++)t.options[e[n]]!==null&&t.element.bind(e[n],t.options[e[n]]);for(var n in t.options)if(n.indexOf(" ")!==-1){var r=n.split(" ");for(var i=0;i<r.length;i++)r[i].length>0&&t.element.bind(r[i],t.options[n])}}function wijmoASPNetParseOptionsReviewer(o,k){var a,v=o[k],d;if(v)switch(typeof v){case"string":a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?):(\d{3})Z$/.exec(v),a&&(d=new Date(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6],+a[7]),d.setFullYear(+a[1]),o[k]=d);break;case"object":if(v.needQuotes!==undefined&&v.valueString!==undefined)v.needQuotes?o[k]=v.valueString:o[k]=eval(v.valueString);else for(k in v)wijmoASPNetParseOptionsReviewer(v,k)}}function wijmoASPNetParseOptions(e){var t;if(!e)return e;for(t in e)wijmoASPNetParseOptionsReviewer(e,t);return e}var wijmo;(function(e){function t(e){return isNaN(e)?0:e}function f(){if($.ui&&$.ui.keyCode)return $.ui.keyCode;if($.mobile&&$.mobile.keyCode)return $.mobile.keyCode;throw"keyCode object is not found"}$.fn.extend({wijtextselection:function(){var e,t,n=this[0],r=this.val();if(arguments.length===0){var i,s,o,u;if($.browser.msie&&parseInt($.browser.version)<9)try{var a=document.selection;n.tagName.toLowerCase()!="textarea"?(i=a.createRange().duplicate(),i.moveEnd("character",r.length),o=i.text===""?r.length:r.lastIndexOf(i.text),i=a.createRange().duplicate(),i.moveStart("character",-r.length),u=i.text.length):(i=a.createRange(),s=i.duplicate(),s.moveToElementText(n),s.setEndPoint("EndToEnd",i),o=s.text.length-i.text.length,u=o+i.text.length)}catch(u){}else o=n.selectionStart,u=n.selectionEnd;var f=r.substring(o,u);return{start:o,end:u,text:f,replace:function(e){return r.substring(0,o)+e+r.substring(u,r.length)}}}if(arguments.length===1){if(typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number")e=arguments[0].start,t=arguments[0].end;else if(typeof arguments[0]=="string")(e=r.indexOf(arguments[0]))>-1&&(t=e+arguments[0].length);else if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var l=arguments[0].exec(r);l!=null&&(e=l.index,t=e+l[0].length)}}else arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(e=arguments[0],t=arguments[1]);typeof e=="undefined"&&(e=0,t=r.length);if($.browser.msie){var c=n.createTextRange();c.collapse(!0),c.moveStart("character",e),c.moveEnd("character",t-e),c.select()}else n.selectionStart=e,n.selectionEnd=t},wijContent:function(e){return this.each(function(){this.innerHTML='<iframe frameborder="0" style="width: 100%; height: 100%;" src="'+e+'">"'})},wijAddVisibilityObserver:function(e,t){return this.each(function(){var n=this;$(this).addClass("wijmo-wijobserver-visibility"),$(this).bind("wijmovisibilitychanged"+(t?"."+t:""),function(t){e.apply(n,arguments),t.stopPropagation()})})},wijRemoveVisibilityObserver:function(e){return this.each(function(){$(this).removeClass("wijmo-wijobserver-visibility"),e?jQuery.isFunction(e)?$(this).unbind("wijmovisibilitychanged",e):$(this).unbind("wijmovisibilitychanged."+e):$(this).unbind("wijmovisibilitychanged")})},wijTriggerVisibility:function(){return this.each(function(){var e=$(this);e.hasClass("wijmo-wijobserver-visibility")&&e.trigger("wijmovisibilitychanged"),e.find(".wijmo-wijobserver-visibility").trigger("wijmovisibilitychanged")})},leftBorderWidth:function(){var e=parseFloat($(this).css("borderLeftWidth")),n=parseFloat($(this).css("padding-left")),r=0;return $(this).css("margin-left")!=="auto"&&(r=parseFloat($(this).css("margin-left"))),t(e)+t(n)+t(r)},rightBorderWidth:function(){var e=parseFloat($(this).css("borderRightWidth")),n=parseFloat($(this).css("padding-right")),r=0;return $(this).css("margin-right")!=="auto"&&(r=parseFloat($(this).css("margin-right"))),t(e)+t(n)+t(r)},topBorderWidth:function(){var e=parseFloat($(this).css("borderTopWidth")),n=parseFloat($(this).css("padding-top")),r=0;return $(this).css("margin-top")!=="auto"&&(r=parseFloat($(this).css("margin-top"))),t(e)+t(n)+t(r)},bottomBorderWidth:function(){var e=parseFloat($(this).css("borderBottomWidth")),n=parseFloat($(this).css("padding-bottom")),r=0;return $(this).css("margin-bottom")!=="auto"&&(r=parseFloat($(this).css("margin-bottom"))),t(e)+t(n)+t(r)},borderSize:function(){var e=$(this).leftBorderWidth()+$(this).rightBorderWidth(),t=$(this).topBorderWidth()+$(this).bottomBorderWidth(),n={width:e,height:t};return n},setOutWidth:function(e){var t=$(this).leftBorderWidth()+$(this).rightBorderWidth();return $(this).width(e-t),this},setOutHeight:function(e){var t=$(this).topBorderWidth()+$(this).bottomBorderWidth();return $(this).height(e-t),this},getWidget:function(){var e=this.data("widgetName");return e&&e!==""?this.data(e):null},wijshow:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.show(s,$.extend(a,{easing:u}),o,i);return}}this.show(),i&&$.isFunction(i)&&i.call(this)},wijhide:function(e,t,n,r,i){var s=e.animated||!1,o=e.duration||400,u=e.easing,a=e.option||{};r&&$.isFunction(r)&&r.call(this);if(s){if(t&&t[s]){t[s](e,$.extend(n,{complete:i}));return}if($.effects)if($.effects[s]||$.effects.effect&&$.effects.effect[s]){this.stop().hide(s,$.extend(a,{easing:u}),o,i);return}}this.hide(),i&&$.isFunction(i)&&i.call(this)}}),$.save=function(e,t){if($.effects)return $.effects.save(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},$.restore=function(e,t){if($.effects)return $.effects.restore(e,t);for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},$.createWrapper=function(e){if($.effects)return $.effects.createWrapper(e);if(e.parent().is(".ui-effects-wrapper"))return e.parent();var t={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r=document.activeElement;return e.wrap(n),(e[0]===r||$.contains(e[0],r))&&$(r).focus(),n=e.parent(),e.css("position")=="static"?(n.css({position:"relative"}),e.css({position:"relative"})):($.extend(t,{position:e.css("position"),zIndex:e.css("z-index")}),$.each(["top","left","bottom","right"],function(n,r){t[r]=e.css(r),isNaN(parseInt(t[r],10))&&(t[r]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(t).show()},$.removeWrapper=function(e){if($.effects)return $.effects.removeWrapper(e);var t,n=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(t=e.parent().replaceWith(e),(e[0]===n||$.contains(e[0],n))&&$(n).focus(),t):e},$.fn.hasAllClasses=function(e){var t,n=(e||"").match(/\S+/g)||[];if(n.length===0)return!1;for(t=0;t<n.length;t++)if(!this.hasClass(n[t]))return!1;return!0},$.setMode=function(e,t){return $.effects?$.effects.setMode(e,t):(t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t)};var n=function(){};$.extend(n.prototype,{_UTFPunctuationsString:" ! \" # % & ' ( ) * , - . / : ; ? @ [ \\ ] { } \u00a1 \u00ab \u00ad \u00b7 \u00bb \u00bf \u037e \u0387 \u055a \u055b \u055c \u055d \u055e \u055f \u0589 \u058a \u05be \u05c0 \u05c3 \u05f3 \u05f4 \u060c \u061b \u061f \u066a \u066b \u066c \u066d \u06d4 \u0700 \u0701 \u0702 \u0703 \u0704 \u0705 \u0706 \u0707 \u0708 \u0709 \u070a \u070b \u070c \u070d \u0964 \u0965 \u0970 \u0df4 \u0e4f \u0e5a \u0e5b \u0f04 \u0f05 \u0f06 \u0f07 \u0f08 \u0f09 \u0f0a \u0f0b \u0f0c \u0f0d \u0f0e \u0f0f \u0f10 \u0f11 \u0f12 \u0f3a \u0f3b \u0f3c \u0f3d \u0f85 \u104a \u104b \u104c \u104d \u104e \u104f \u10fb \u1361 \u1362 \u1363 \u1364 \u1365 \u1366 \u1367 \u1368 \u166d \u166e \u169b \u169c \u16eb \u16ec \u16ed \u17d4 \u17d5 \u17d6 \u17d7 \u17d8 \u17d9 \u17da \u17dc \u1800 \u1801 \u1802 \u1803 \u1804 \u1805 \u1806 \u1807 \u1808 \u1809 \u180a \u2010 \u2011 \u2012 \u2013 \u2014 \u2015 \u2016 \u2017 \u2018 \u2019 \u201a \u201b \u201c \u201d \u201e \u201f \u2020 \u2021 \u2022 \u2023 \u2024 \u2025 \u2026 \u2027 \u2030 \u2031 \u2032 \u2033 \u2034 \u2035 \u2036 \u2037 \u2038 \u2039 \u203a \u203b \u203c \u203d \u203e \u2041 \u2042 \u2043 \u2045 \u2046 \u2048 \u2049 \u204a \u204b \u204c \u204d \u207d \u207e \u208d \u208e \u2329 \u232a \u3001 \u3002 \u3003 \u3008 \u3009 \u300a \u300b \u300c \u300d \u300e \u300f \u3010 \u3011 \u3014 \u3015 \u3016 \u3017 \u3018 \u3019 \u301a \u301b \u301c \u301d \u301e \u301f \u3030 \ufd3e \ufd3f \ufe30 \ufe31 \ufe32 \ufe35 \ufe36 \ufe37 \ufe38 \ufe39 \ufe3a \ufe3b \ufe3c \ufe3d \ufe3e \ufe3f \ufe40 \ufe41 \ufe42 \ufe43 \ufe44 \ufe49 \ufe4a \ufe4b \ufe4c \ufe50 \ufe51 \ufe52 \ufe54 \ufe55 \ufe56 \ufe57 \ufe58 \ufe59 \ufe5a \ufe5b \ufe5c \ufe5d \ufe5e \ufe5f \ufe60 \ufe61 \ufe63 \ufe68 \ufe6a \ufe6b \uff01 \uff02 \uff03 \uff05 \uff06 \uff07 \uff08 \uff09 \uff0a \uff0c \uff0d \uff0e \uff0f \uff1a \uff1b \uff1f \uff20 \uff3b \uff3c \uff3d \uff5b \uff5d \uff61 \uff62 \uff63 \uff64';this.UTFWhitespacesString_='	  \f    \u00a0 \u1680 \u2000 \u2001 \u2002 \u2003 \u2004 \u2005 \u2006 \u2007 \u2008 \u2009 \u200a \u200b \u2028 \u202f \u3000",isDigit:function(e){var t=e.charCodeAt(0);return t>=48&&t<58},isLetter:function(e){return!!(e+"").match(new RegExp("[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u021f\u0222-\u0233\u0250-\u02ad\u02b0-\u02b8\u02bb-\u02c1\u02d0\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d7\u03da-\u03f3\u0400-\u0481\u048c-\u04c4\u04c7\u04c8\u04cb\u04cc\u04d0-\u04f5\u04f8\u04f9\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u0671-\u06d3\u06d5\u06e5\u06e6\u06fa-\u06fc\u0710\u0712-\u072c\u0780-\u07a5\u0905-\u0939\u093d\u0950\u0958-\u0961\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b36-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10f6\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1206\u1208-\u1246\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1286\u1288\u128a-\u128d\u1290-\u12ae\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12ce\u12d0-\u12d6\u12d8-\u12ee\u12f0-\u130e\u1310\u1312-\u1315\u1318-\u131e\u1320-\u1346\u1348-\u135a\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1780-\u17b3\u1820-\u1877\u1880-\u18a8\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u207f\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u3005\u3006\u3031-\u3035\u3041-\u3094\u309d\u309e\u30a1-\u30fa\u30fc-\u30fe\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u3400-\u4db5\u4e00-\u9fa5\ua000-\ua48c\uac00-\ud7a3\uf900-\ufa2d\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"))},isLetterOrDigit:function(e){return this.isLetter(e)||this.isDigit(e)},isDoubleByteNumber:function(e){var t=e.charCodeAt(0);return t>=65296&&t<65306},isSymbol:function(e){var t=new RegExp("[$+<->^`|~\u00a2-\u00a9\u00ac\u00ae-\u00b1\u00b4\u00b6\u00b8\u00d7\u00f7\u02b9\u02ba\u02c2-\u02cf\u02d2-\u02df\u02e5-\u02ed\u0374\u0375\u0384\u0385\u0482\u06e9\u06fd\u06fe\u09f2\u09f3\u09fa\u0b70\u0e3f\u0f01-\u0f03\u0f13-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fcf\u17db\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u207a-\u207c\u208a-\u208c\u20a0-\u20af\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u2132\u213a\u2190-\u21f3\u2200-\u22f1\u2300-\u2328\u232b-\u237b\u237d-\u239a\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2595\u25a0-\u25f7\u2600-\u2613\u2619-\u2671\u2701-\u2704\u2706-\u2709\u270c-\u2727\u2729-\u274b\u274d\u274f-\u2752\u2756\u2758-\u275e\u2761-\u2767\u2794\u2798-\u27af\u27b1-\u27be\u2800-\u28ff\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u3200-\u321c\u322a-\u3243\u3260-\u327b\u327f\u328a-\u32b0\u32c0-\u32cb\u32d0-\u32fe\u3300-\u3376\u337b-\u33dd\u33e0-\u33fe\ua490-\ua4a1\ua4a4-\ua4b3\ua4b5-\ua4c0\ua4c2-\ua4c4\ua4c6\ufb29\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd]");return t.test(e+"")},isPunctuation:function(e){return this._UTFPunctuationsString.indexOf(e)>=0},isPrintableChar:function(e){return!this.isLetterOrDigit(e)&&!this.isPunctuation(e)&&!this.isSymbol(e)&&!this.isDoubleByteNumber(e)?e===" ":!0},isAscii:function(e){return e>="!"&&e<="~"},isAsciiLetter:function(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"},isUpper:function(e){return e.toUpperCase()===e},isLower:function(e){return e.toLowerCase()===e},isAlphanumeric:function(e){return this.isLetter(e)?!0:this.isDigit(e)},isAciiAlphanumeric:function(e){return(e<"0"||e>"9")&&(e<"A"||e>"Z")?e>="a"?e<="z":!1:!0},setChar:function(e,t,n){return n>=e.length||n<0?e:e.substr(0,n)+t+e.substr(n+1)}}),$.fn.zIndex||($.fn.zIndex=function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length){var t=$(this[0]),n,r;while(t.length&&t[0]!==document){n=t.css("position");if(n==="absolute"||n==="relative"||n==="fixed"){r=parseInt(t.css("zIndex"),10);if(!isNaN(r)&&r!==0)return r}t=t.parent()}}return 0});var r=["\n","\r",'"',"@","+","'","<",">","%","{","}"],i=["!ESC!NN!","!ESC!RR!","!ESC!01!","!ESC!02!","!ESC!03!","!ESC!04!","!ESC!05!","!ESC!06!","!ESC!07!","!ESC!08!","!ESC!09!"],s=["(\n)","(\r)",'(")',"(@)","(\\+)","(')","(\\<)","(\\>)","(%)","(\\{)","(\\})"];$.wij||$.extend({wij:{charValidator:new n,encodeString:function(e){for(var t=0;t<r.length;t++){var n=new RegExp(s[t],"g");e=e.replace(n,i[t])}return e},decodeString:function(e){if(e==="")return;for(var t=0;t<i.length;t++){var n=new RegExp(i[t],"g");e=e.replace(n,r[t])}return e}}}),jQuery.uaMatch||(jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}});if(!jQuery.browser){var o=jQuery.uaMatch(navigator.userAgent),u={version:"0",msie:!1,opera:!1,safari:!1,mozilla:!1,webkit:!1,chrome:!1};o.browser&&(u[o.browser]=!0,u.version=o.version),u.chrome?u.webkit=!0:u.webkit&&(u.safari=!0),jQuery.browser=u}$.ui&&$.ui.position&&$.ui.position.flipfit&&($.ui.position.flip.top=function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,i=n.height,s=n.isWindow?n.scrollTop:n.offset.top,o=e.top-t.collisionPosition.marginTop,u=o-s,a=o+t.collisionHeight-i-s,f=t.my[1]==="top",l=f?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,c=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,h=-2*t.offset[1],p,d;u<0?(d=e.top+l+c+h+t.collisionHeight-i-r,e.top+l+c+h>u&&(d<0||d<Math.abs(u))&&(e.top+=l+c+h)):a>0&&(p=e.top-t.collisionPosition.marginTop+l+c+h-s,e.top+l+c+h+t.collisionHeight-i-s<a&&(p>0||Math.abs(p)<a)&&(e.top+=l+c+h))});var a=$.fn.position;$.fn.position=function(e){if(e&&$.isPlainObject(e)&&e.offset){var t=(e.my||"").split(" "),n=/left|center|right/,r=/top|center|bottom/,i=(e.offset||"").split(" ");t.length===1&&(n.test(t[0])?t.concat(["center"]):r.test(t[0])?["center"].concat(t):["center","center"]),i.length===1&&i.concat(i[0]),$.each(t,function(e,n){/\+|-/.test(i[e])?t[e]=t[e]+i[e]:t[e]=t[e]+"+"+i[e]}),e.my=t.join(" ")}return a.apply(this,arguments)},e.getKeyCodeEnum=f})(wijmo||(wijmo={}));;
(function(e){"use strict";e.fn.extend({wijtextselection:function(){var t,n,r=this[0],i=this.val();if(arguments.length===0){var s,o,u,a;if(e.browser.msie&&e.browser.version<9)try{var f=document.selection;r.tagName.toLowerCase()!="textarea"?(s=f.createRange().duplicate(),s.moveEnd("character",i.length),u=s.text===""?i.length:i.lastIndexOf(s.text),s=f.createRange().duplicate(),s.moveStart("character",-i.length),a=s.text.length):(s=f.createRange(),o=s.duplicate(),o.moveToElementText(r),o.setEndPoint("EndToEnd",s),u=o.text.length-s.text.length,a=u+s.text.length)}catch(a){}else u=r.selectionStart,a=r.selectionEnd;var l=i.substring(u,a);return{start:u,end:a,text:l,replace:function(e){return i.substring(0,u)+e+i.substring(a,i.length)}}}if(arguments.length===1){if(typeof arguments[0]=="object"&&typeof arguments[0].start=="number"&&typeof arguments[0].end=="number")t=arguments[0].start,n=arguments[0].end;else if(typeof arguments[0]=="string")(t=i.indexOf(arguments[0]))>-1&&(n=t+arguments[0].length);else if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var c=arguments[0].exec(i);c!=null&&(t=c.index,n=t+c[0].length)}}else arguments.length===2&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"&&(t=arguments[0],n=arguments[1]);typeof t=="undefined"&&(t=0,n=i.length);if(e.browser.msie){var h=r.createTextRange();h.collapse(!0),h.moveStart("character",t),h.moveEnd("character",n-t),h.select()}else r.selectionStart=t,r.selectionEnd=n}})})(jQuery);;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(g){var d=jQuery,c=b.getKeyCodeEnum();var j=(function(l){__extends(m,l);function m(){l.apply(this,arguments);this._boundMouseWheel=false;this._wasPopupShowing=false}m.prototype._elemWithClasses=function(o,n){if(typeof n==="undefined"){n=[]}return d(o).addClass(n.join(" "))};m.prototype._divWithClasses=function(){var n=[];for(var o=0;o<(arguments.length-0);o++){n[o]=arguments[o+0]}return this._elemWithClasses("<div/>",n)};m.prototype._spanWithClasses=function(){var n=[];for(var o=0;o<(arguments.length-0);o++){n[o]=arguments[o+0]}return this._elemWithClasses("<span/>",n)};m.prototype._horizontalBorderWidth=function(n){return n.leftBorderWidth()+n.rightBorderWidth()};m.prototype._verticalBorderWidth=function(n){return n.topBorderWidth()+n.bottomBorderWidth()};m.prototype._create=function(){var u=this;var r=document.activeElement==this.element[0],q=this._horizontalBorderWidth(this.element),n=this._verticalBorderWidth(this.element);if(this.element[0].tagName.toLowerCase()!=="input"){throw"Target element is not a INPUT"}this._creationDate=new Date();if(window.wijmoApplyWijTouchUtilEvents){d=window.wijmoApplyWijTouchUtilEvents(d)}if(this.element.is(":hidden")&&this.element.wijAddVisibilityObserver){this.element.wijAddVisibilityObserver(function(){u._destroy();u._create();if(u.element.wijRemoveVisibilityObserver){u.element.wijRemoveVisibilityObserver()}},"wijinput")}this.element.data("widgetName",this.widgetName);if(d.effects&&d.effects.save){d.effects.save(this.element,["width","height"])}else{if(d.save){d.save(this.element,["width","height"])}}var t=this.options.wijCSS;this.element.wrap("<div><span/></div>");this.wrapper=this.element.parent();this.outerDiv=this.wrapper.parent();this.outerDiv.addClass([t.wijinput,t.widget,t.helperClearFix,t.stateDefault,t.cornerAll].join(" "));this.wrapper.addClass(t.wijinputWrapper);this.element.addClass(t.wijinputInput).addClass(t.cornerAll).attr("role","textbox");if(!(d.browser.msie&&parseFloat(d.browser.version)<=7)){try{this.element.attr("aria-multiline",false)}catch(p){this.element[0].setAttribute("aria-multiline","false")}}var s=this.options.buttonAlign==="left";if(this.options.showTrigger){this.triggerBtn=this._divWithClasses(t.wijinputTrigger,t.stateDefault,s?t.cornerLeft:t.cornerRight).append(this._spanWithClasses(t.icon,t.iconArrowDown)).attr("role","button").appendTo(this.outerDiv);this.element.attr({role:"combobox","aria-expanded":false})}if(this.options.showSpinner){this.spinner=this._divWithClasses(t.wijinputSpinner,t.wijinputButton);this.spinUp=this._divWithClasses(t.stateDefault,t.wijinputSpinUp).append(this._spanWithClasses(t.icon,t.iconArrowUp)).attr("role","button");this.spinDown=this._divWithClasses(t.stateDefault,t.wijinputSpinDown).append(this._spanWithClasses(t.icon,t.iconArrowDown)).attr("role","button");if(!this.options.showTrigger){this.spinUp.addClass(s?t.cornerTL:t.cornerTR);this.spinDown.addClass(s?t.cornerBL:t.cornerBR)}this.spinner.append(this.spinUp).append(this.spinDown).appendTo(this.outerDiv);this.element.attr("role","spinner")}if(this.options.showTrigger&&this.options.showSpinner){this.outerDiv.addClass(s?t.inputSpinnerTriggerLeft:t.inputSpinnerTriggerRight)}else{if(this.options.showTrigger){this.outerDiv.addClass(s?t.inputTriggerLeft:t.inputTriggerRight)}if(this.options.showSpinner){this.outerDiv.addClass(s?t.inputSpinnerLeft:t.inputSpinnerRight)}}this._initialize();if(r){d(function(){return u.element.focus().wijtextselection(0,u.element.val().length)})}var o=this.element[0].style;if(o.width){if(this._isInPercents(o.width)){this.outerDiv.width(o.width)}else{this.outerDiv.width(this.element.width()+q-this._horizontalBorderWidth(this.outerDiv))}this.element.width("")}if(o.height){if(this._isInPercents(o.height)){this.outerDiv.height(o.height)}else{this.outerDiv.height(this.element.height()+n-this._verticalBorderWidth(this.outerDiv))}this.element.height("")}};m.prototype._isInPercents=function(n){return n.match(/%$/)};m.prototype._createTextProvider=function(){return undefined};m.prototype._beginUpdate=function(){};m.prototype._endUpdate=function(){var n=this;if(this.element.mousewheel&&!this._boundMouseWheel){this.element.mousewheel(function(o,p){if(n.isFocused()&&n._doSpin(p>0,false)){o.preventDefault()}});this._boundMouseWheel=true}};m.prototype._isPopupShowing=function(){return !!this._comboDiv&&this._comboDiv.wijpopup("isVisible")};m.prototype._onTriggerMouseUp=function(){this._wasPopupShowing=this._isPopupShowing()};m.prototype._onTriggerClicked=function(){if(this._wasPopupShowing){this._hidePopup()}else{this._showPopup();this._wasPopupShowing=true}};m.prototype._showPopup=function(){this._popupComboList()};m.prototype._hidePopup=function(){this._comboDiv.wijpopup("hide")};m.prototype._initialize=function(){var s=this;this.element.data("initializing",true);this._trigger("initializing");this.element.data("preText",this.element.val());this.element.data("elementValue",this.element.val());this.element.data("errorstate",false);this.element.data("breakSpinner",true);this.element.data("prevCursorPos",-1);this.element.data("simulating",false);this._createTextProvider();this._beginUpdate();var p=this.options,r=function(t){return(!t.which?t.button:t.which)===1},o=function(t){if(s.options.disabled){return}if(!r(t)){return}s._trySetFocus();s.element.data("breakSpinner",false);s._addState("active",d(s));s._doSpin(d(t.currentTarget).hasClass(p.wijCSS.wijinputSpinUp),true)},q=function(t){if(s.options.disabled){return}if(!r(t)){return}s._stopSpin();s._removeState("active",d(s))},n;if(this.triggerBtn&&!p.disabledState){this.triggerBtn.bind({mouseover:function(){if(s.options.disabled){return}s._addState("hover",d(s))},mouseout:function(){if(s.options.disabled){return}s._removeState("hover",d(s))},mousedown:function(t){if(s.options.disabled){return}if(!r(t)){return}s._stopEvent(t);s._addState("active",d(s));s._trigger("triggerMouseDown")},mouseup:function(t){s._onTriggerMouseUp()},click:function(t){if(s.options.disabled){return}s._stopEvent(t);s._stopSpin();s._removeState("active",d(s));s._trigger("triggerMouseUp");s._onTriggerClicked();s._trySetFocus()}})}if(this.spinUp&&!p.disabledState){this.spinUp.bind({mouseover:function(){if(s.options.disabled){return}s._addState("hover",d(s))},mouseout:function(){if(s.options.disabled){return}s._removeState("hover",d(s));s._removeState("active",d(s));s._stopSpin()},mousedown:o,mouseup:q})}if(this.spinDown&&!p.disabledState){this.spinDown.bind({mouseover:function(){if(s.options.disabled){return}s._addState("hover",d(s))},mouseout:function(){if(s.options.disabled){return}s._removeState("hover",d(s));s._removeState("active",d(s));s._stopSpin()},mousedown:o,mouseup:q})}this.element.bind({"focus.wijinput":d.proxy(this._onFocus,this),"blur.wijinput":d.proxy(this._onBlur,this),"mouseup.wijinput":d.proxy(this._onMouseUp,this),"keypress.wijinput":d.proxy(this._onKeyPress,this),"keydown.wijinput":d.proxy(this._onKeyDown,this),"keyup.wijinput":d.proxy(this._onKeyUp,this),"compositionstart.wijinput":d.proxy(this._onCompositionStart,this),"compositionend.wijinput":d.proxy(this._onCompositionEnd,this),"change.wijinput":d.proxy(this._onChange,this),"paste.wijinput":d.proxy(this._onPaste,this),"drop.wijinput":d.proxy(this._onDrop,this)});this.element.bind("propertychange.wijinput input.wijinput",d.proxy(this._onInput,this));this.element.data("initializing",false);this._resetData();this._endUpdate();this._updateText();if(this.options.disabledState){n=p.disabled;this.disable();p.disabled=n}if(this.options.disabled){this.disable()}this.element.data("initialized",true);this._trigger("initialized")};m.prototype._init=function(){};m.prototype._setOption=function(o,p){this._super(o,p);switch(o){case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy();this._create();break;case"showNullText":this._updateText();break;case"disabled":this.element.attr("disabled",p);var n=p?"addClass":"removeClass",q=this.options.wijCSS.stateDisabled;this.element[n](q);if(this.triggerBtn){this.triggerBtn[n](q)}if(this.spinUp){this.spinUp[n](q)}if(this.spinDown){this.spinDown[n](q)}break}};m.prototype.destroy=function(){this._super();this._destroy()};m.prototype.isDestroyed=function(){return !this.outerDiv};m.prototype._destroy=function(){if(this.isDestroyed()){return}this.wrapper=undefined;this.outerDiv=undefined;this.element.unbind(".wijinput");this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevCursorPos").removeData("simulating").removeData("isPassword").removeClass(this.options.wijCSS.wijinputInput).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded");this.element.parent().replaceWith(this.element);this.element.parent().replaceWith(this.element);if(d.effects&&d.effects.restore){d.effects.restore(this.element,["width","height"])}else{if(d.restore){d.restore(this.element,["width","height"])}}};m.prototype.widget=function(){return this.outerDiv||this._super()};m.prototype._getCulture=function(n){if(typeof n==="undefined"){n=this.options.culture}return Globalize.findClosestCulture(n||this.options.culture)};m.prototype._addState=function(o,n){if(n.is(":not(.ui-state-disabled)")){n.addClass(this.options.wijCSS.getState(o))}};m.prototype._removeState=function(o,n){n.removeClass(this.options.wijCSS.getState(o))};m.prototype._isInitialized=function(){return !this.element.data("initializing")};m.prototype._setData=function(n){this.setText(n)};m.prototype._resetData=function(){};m.prototype._validateData=function(){};m.prototype.getText=function(){if(!this._isInitialized()){return this.element.val()}return this._textProvider.toString(true,false,false)};m.prototype.setText=function(n){if(!this._isInitialized()){this.element.val(n)}else{this._textProvider.set(n);this._updateText()}};m.prototype.getPostValue=function(){if(!this._isInitialized()){return this.element.val()}return this._textProvider.toString(true,false,true)};m.prototype.selectText=function(o,n){if(typeof o==="undefined"){o=0}if(typeof n==="undefined"){n=this.getText().length}if(this.element.is(":disabled")){return}this.element.wijtextselection(o,n)};m.prototype.focus=function(){if(this.element.is(":disabled")){return}this.element.get(0).focus()};m.prototype.isFocused=function(){return this.outerDiv.hasClass(this.options.wijCSS.stateFocus)};m.prototype._raiseTextChanged=function(){var n=this.element.val(),o=this.element.data("preText");if(!!this.element.data("initialized")&&o!==n){this._trigger("textChanged",null,{text:n});this.element.data("changed",true)}this.element.data("preText",n)};m.prototype._raiseDataChanged=function(){};m.prototype._allowEdit=function(){return !this.element.attr("readOnly")&&!this.element.is(":disabled")};m.prototype._updateText=function(p){if(typeof p==="undefined"){p=false}if(!this._isInitialized()){return}p=!!p;var n=this.element.wijtextselection(),q=this.options;if(this.isDeleteAll&&q.showNullText){this.isDeleteAll=false;q.date=null;this.element.val(q.nullText)}else{this.element.val(this._textProvider.toString());this.options.text=this._textProvider.toString(true,false,false)}if(this.element.is(":disabled")){return}if(p){this.selectText(n.start,n.end)}this.element.data("prevCursorPos",n.start);this._raiseTextChanged();this._raiseDataChanged()};m.prototype._trySetFocus=function(){if(document.activeElement!==this.element[0]){try{if(!this.options.disableUserInput){this.element.focus()}}catch(n){}}};m.prototype._deleteSelText=function(p){if(typeof p==="undefined"){p=false}if(!this._allowEdit()){return}var n=this.element.wijtextselection(),o;if(p){if(n.end<1){return}if(n.end===n.start){n.start--}}n.end--;if(n.end<n.start){n.end=n.start}o=new f();this._textProvider.removeAt(n.start,n.end,o);this._updateText();this.selectText(o.testPosition,o.testPosition)};m.prototype._fireIvalidInputEvent=function(o){var p=this;var n;if(d.isFunction(this.options.invalidInput)&&this._trigger("invalidInput",null,{widget:this,"char":o})===true){return}if(!this.element.data("errorstate")){n=this.options.invalidClass||this.options.wijCSS.stateError;this.element.data("errorstate",true);window.setTimeout(function(){if(p.outerDiv){p.outerDiv.removeClass(n)}p.element.data("errorstate",false)},200);this.outerDiv.addClass(n)}};m.prototype._onInput=function(n){if(!this._isSimulating()||!this.element.data("ime")||this.element.data("isComposingIME")){if(this.element.data("isComposingIME")){this.element.data("simulationPending",true)}return}this._simulate()};m.prototype._keyDownPreview=function(n){return false};m.prototype._onDoubleByteCharacter=function(){var o=this.element.data("lastDbsState");var n=this.element.wijtextselection();var p=this.element.val();if(this.element.data("isComposingIME")&&o&&o.selection.start===n.start&&o.Text===p){this.element.removeData("lastDbsState");this._onCompositionEnd()}else{this.element.data("lastDbsState",{selection:n,text:p});this._onCompositionStart()}};m.prototype._onCompositionStart=function(){if(this.element.data("isComposingIME")){return}this.element.data("isComposingIME",true);this._beforeSimulate(true)};m.prototype._onCompositionEnd=function(){if(!this.element.data("isComposingIME")){return}this.element.data("isComposingIME",false);if(this._isInitialized()&&(!this._textProvider||!this._textProvider.noMask)){this._simulateIfPending()}};m.prototype._simulateIfPending=function(){if(this.element.data("simulationPending")&&this.element.data("lastSelection")){this._simulate()}};m.prototype._beforeSimulate=function(n){if(typeof n==="undefined"){n=false}if(!this.element.data("lastSelection")){this.element.data("lastSelection",this.element.wijtextselection());this.element.data("lastValue",this.element.val())}this.element.data("ime",n);this.element.data("simulating",true)};m.prototype._isSimulating=function(){return this.element.data("simulating")};m.prototype._simulate=function(r){var p=this,q=null,o,s,n;this.element.data("simulationPending",false);if(typeof r==="string"){q=r}else{o=this.element.wijtextselection();s=this.element.data("lastSelection").start;n=o.end;if(n>=s){q=this.element.val().substring(s,n)}}if(q){window.setTimeout(function(){if(!p.element.data("lastValue")){return}p.element.val(p.element.data("lastValue"));var u=p.element.data("lastSelection"),v,t;p.element.wijtextselection(u);p.element.data("batchKeyPress",true);p.element.data("simulating",false);v=jQuery.Event("keypress");v.ctrlKey=v.altKey=false;for(t=0;t<q.length;t++){v.which=v.charCode=v.keyCode=q.charCodeAt(t);p._onKeyPress(v)}p.element.data("batchKeyPress",false);p._endSimulate()},1)}};m.prototype._endSimulate=function(){this._simulateIfPending();this.element.removeData("ime");this.element.removeData("lastSelection");this.element.removeData("lastValue")};m.prototype._onKeyDown=function(o){this.element.data("prevCursorPos",-1);this._deleteKeyDown=false;if(!this._isInitialized()||(this._textProvider&&!!this._textProvider.noMask)){return}var n=this._getKeyCode(o);if(n===229){this._onDoubleByteCharacter();return}this._onCompositionEnd();if(this.options.disableUserInput){this._stopEvent(o);return}if(this._keyDownPreview(o)){this._stopEvent(o);return}switch(n){case c.UP:this._doSpin(true,false);this._stopEvent(o);return;case c.DOWN:this._doSpin(false,false);this._stopEvent(o);return}if(o.ctrlKey){switch(n){case c.INSERT:case 67:return;default:break}}if((o.ctrlKey||o.altKey)){return}switch(n){case 112:case 113:case 114:case 115:case 116:case 117:case c.TAB:case c.CAPSLOCK:case c.END:case c.HOME:case c.CTRL:case c.SHIFT:return;case c.BACKSPACE:this._deleteSelText(true);this._stopEvent(o);return;case c.DELETE:this._deleteSelText(false);this._stopEvent(o);this._deleteKeyDown=true;return;case c.ENTER:this._onEnterDown(o);break;case c.ESCAPE:this._stopEvent(o);window.setTimeout(d.proxy(this._resetData,this),1);return;case c.PAGE_UP:case c.PAGE_DOWN:case c.ALT:this._stopEvent(o);return}};m.prototype._onEnterDown=function(n){if(this.options.hideEnter){this._stopEvent(n)}};m.prototype._onKeyUp=function(o){if(this._textProvider&&!!this._textProvider.noMask){return}var n=this._getKeyCode(o);if(this._isSimulating()){if(n===c.ENTER){this._onCompositionEnd()}return}if(!this._isInitialized()){return}if(n===c.ENTER||n===c.ESCAPE){return}if(this.options.disableUserInput){this._raiseTextChanged();this._raiseDataChanged();return}this._stopEvent(o)};m.prototype._getKeyCode=function(o){var n=window.navigator.userAgent;if((n.indexOf("iPod")!==-1||n.indexOf("iPhone")!==-1)&&o.which===127){return 8}return o.keyCode||o.which};m.prototype._keyPressPreview=function(n){return false};m.prototype._onKeyPress=function(q){if(this._isSimulating()||(this._textProvider&&!!this._textProvider.noMask)){return}this.element.data("prevCursorPos",-1);if(this.options.disableUserInput){return}if(!this._allowEdit()){return}if(q.ctrlKey&&q.keyCode===119){this._onPaste(q);return}var o=q.keyCode||q.which,n,p;switch(o){case 0:case c.TAB:case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:return;case c.BACKSPACE:this._stopEvent(q);return;case c.DELETE:if(this._deleteKeyDown){this._stopEvent(q);return}break;case c.ENTER:if(this.options.hideEnter){this._stopEvent(q)}return}if(q.ctrlKey||q.altKey){if(o!==c.SPACE){return}}if(this._keyPressPreview(q)){return}p=String.fromCharCode(o);n=this._textProvider.replaceWith(this.element.wijtextselection(),p);if(n){this._updateText();this.selectText(n.testPosition+1,n.testPosition+1)}else{this._fireIvalidInputEvent(p)}if(!this.element.data("batchKeyPress")){this._stopEvent(q)}};m.prototype._isNullText=function(n){n=n||this.element.val();return this.options.showNullText&&n===this.options.nullText};m.prototype._doFocus=function(){var n=this.element.wijtextselection(),o=n.start,p;this._updateText();p=this.element.val();if(p.length===o){o=0}if(!d.browser.safari){this.selectText(o,o)}};m.prototype._afterFocused=function(){if(this._isNullText()){this._doFocus()}};m.prototype._onFocus=function(n){if(this.options.disableUserInput){return}this._addState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){return}if(!this._isInitialized()){return}if(!this._allowEdit()){return}if(!this.element.data("focusNotCalledFirstTime")){this.element.data("focusNotCalledFirstTime",new Date().getTime())}this._afterFocused()};m.prototype._onBlur=function(p){var q=this;if(this.options.disableUserInput){return}this._onCompositionEnd();if(this._isComboListVisible()){return}var o=this.isFocused(),n;this._removeState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){this.element.get(0).focus();n=this.element.data("prevCursorPos");if(n!==undefined&&n!==-1){this.selectText(n,n)}return}if(!this._isInitialized()||!o){return}this.element.data("value",this.element.val());window.setTimeout(function(){q._onChange();q._updateText();q._validateData();if(q.element.data("changed")){q.element.data("changed",false);if(!q._popupVisible()){q._trigger("change");q.element.change()}}},100)};m.prototype._popupVisible=function(){return this._isComboListVisible()};m.prototype._onMouseUp=function(p){if(!this._isInitialized()){return}if(this.element.is(":disabled")){return}var n=this.element.wijtextselection(),o=this;this.element.data("prevCursorPos",n.start);if(this.element.val()==""){return}setTimeout(function(){if(o.element.val()==""){o.setText("")}},5)};m.prototype._onChange=function(){if(!this.element){return}var o=this.element.val(),n=this.getText();if(n!==o){this.setText(o)}};m.prototype._onPaste=function(o){if(this._textProvider&&!!this._textProvider.noMask){return}this._beforeSimulate();var n=this;window.setTimeout(function(){n._simulate()},1)};m.prototype._onDrop=function(n){this._beforeSimulate();if(n.originalEvent&&n.originalEvent.dataTransfer){var o=n.originalEvent.dataTransfer.getData("Text");if(o){this._simulate(o)}}};m.prototype._stopEvent=function(n){n.stopPropagation();n.preventDefault()};m.prototype._calcSpinInterval=function(){this._repeatingCount++;if(this._repeatingCount>10){return 50}else{if(this._repeatingCount>4){return 100}else{if(this._repeatingCount>2){return 200}}}return 400};m.prototype._doSpin=function(n,o){return false};m.prototype._stopSpin=function(){this.element.data("breakSpinner",true);this._repeatingCount=0};m.prototype._hasComboItems=function(){return(!!this.options.comboItems&&this.options.comboItems.length)};m.prototype._isComboListVisible=function(){if(!this._comboDiv){return false}return this._comboDiv.wijpopup("isVisible")};m.prototype._popupComboList=function(){var o=this;if(!this._hasComboItems()){return}if(!this._allowEdit()){return}var n;if(this._comboDiv===undefined){this._comboDiv=d("<div></div>").appendTo(document.body).css("position","absolute");n=this._normalize(this.options.comboItems);this._comboDiv.wijlist({maxItemsCount:5,selected:function(p,q){o._setData(q.item.value);o._comboDiv.wijpopup("hide");o._trySetFocus()}});this._comboDiv.wijlist("setItems",n);this._comboDiv.wijlist("renderList")}this._comboDiv.width(this.outerDiv.width());this._comboDiv.wijlist("option","autoSize",!this.options.comboHeight);if(this.options.comboHeight){this._comboDiv.height(this.options.comboHeight)}this._comboDiv.wijlist("refreshSuperPanel");this._comboDiv.wijpopup({autoHide:true});this.outerDiv.attr("aria-expanded",true);this._comboDiv.wijpopup("show",{of:this.outerDiv,offset:"0 4",hidden:function(){o.outerDiv.attr("aria-expanded",false)}})};m.prototype._normalize=function(n){if(n.length&&n[0].label&&n[0].value){return n}return d.map(n,function(o){if(typeof o==="string"){return{label:o,value:o}}return d.extend({label:o.label||o.value,value:o.value||o.label},o)})};return m})(b.wijmoWidget);g.wijinputcore=j;var e="wijmo-wijinput",h=e+"-";var i=(function(){function l(){this.wijCSS={wijinput:e,wijinputInput:h+"input",wijinputWrapper:h+"wrapper",wijinputTrigger:h+"trigger",wijinputSpinner:h+"spinner",wijinputButton:h+"button",wijinputSpinUp:h+"spinup",wijinputSpinDown:h+"spindown"};this.culture="";this.invalidClass=d.wijmo.wijCSS.stateError;this.nullText="";this.showNullText=false;this.hideEnter=false;this.disableUserInput=false;this.buttonAlign="right";this.showTrigger=false;this.showSpinner=false;this.comboItems=undefined;this.comboWidth=undefined;this.comboHeight=undefined;this.initializing=null;this.initialized=null;this.triggerMouseDown=null;this.triggerMouseUp=null;this.textChanged=null;this.invalidInput=null}return l})();j.prototype.options=d.extend(true,{},b.wijmoWidget.prototype.options,new i());var f=(function(){function l(){this.characterEscaped=1;this.noEffect=2;this.sideEffect=3;this.success=4;this.unknown=0;this.hint=0;this.alphanumericCharacterExpected=-2;this.asciiCharacterExpected=-1;this.digitExpected=-3;this.invalidInput=-51;this.letterExpected=-4;this.nonEditPosition=-54;this.positionOutOfRange=-55;this.promptCharNotAllowed=-52;this.signedDigitExpected=-5;this.unavailableEditPosition=-53;this.testPosition=-1}l.prototype.clone=function(){var m=new l();m.hint=this.hint;m.testPosition=this.testPosition;return m};return l})();g.wijInputResult=f;var k=(function(){function l(){}l.prototype.set=function(n,m){};l.prototype.toString=function(n,p,m,q,o){return""};l.prototype.insertAt=function(o,n,m){return false};l.prototype.removeAt=function(p,m,n,o){};l.prototype.replaceWith=function(n,p){var o=n.start,m=new f();if(n.start<n.end){this.removeAt(n.start,n.end-1,m,true);o=m.testPosition}return this.insertAt(p,o,m)?m:null};return l})();g.wijTextProvider=k})(b.input||(b.input={}));var a=b.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";function i(e,t){typeof t=="undefined"&&(t=2);var n=""+e+"";if(n.length>t)n=n.substr(n.length-t);else while(n.length<t)n="0"+n;return n}var n=jQuery,r=e.getKeyCodeEnum(),s=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype._createTextProvider=function(){this._textProvider=new u(this,this.options.dateFormat)},i.prototype._strToDate=function(e){return this._textProvider.parseDate(e)},i.prototype._beginUpdate=function(){var t=this.options,n,r=null;e.prototype._beginUpdate.call(this),t.minDate&&typeof t.minDate=="string"&&(t.minDate=this._strToDate(t.minDate)),t.maxDate&&typeof t.maxDate=="string"&&(t.maxDate=this._strToDate(t.maxDate)),t.date?typeof t.date=="string"?n=t.date:r=t.date:!this.element.data("elementValue")||(n=this.element.data("elementValue")),n&&(r=this._strToDate(n)),this._safeSetDate(r),this.element.data({defaultDate:r===null?r:new Date(t.date.getTime()),preDate:r===null?r:new Date(t.date.getTime())}),this._resetTimeStamp(),t.showTrigger&&!this._hasComboItems()&&this._initCalendar(),this.element.addClass(t.wijCSS.wijinputdate).attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":t.date})},i.prototype._endUpdate=function(){var t=this;e.prototype._endUpdate.call(this),this.element.bind("click.wijinput",function(){t._highLightCursor()})},i.prototype._isValidDate=function(e,t){var n=this.options;if(e===undefined)return!1;if(isNaN(e))return!1;if(e.getFullYear()<1||e.getFullYear()>9999)return!1;if(t){if(n.minDate&&e<n.minDate)return!1;if(n.maxDate&&e>n.maxDate)return!1}return!0},i.prototype._checkRange=function(e){var t=this.options;return e&&(t.minDate&&e<t.minDate&&(e=new Date(Math.max(t.minDate,e))),t.maxDate&&e>t.maxDate&&(e=new Date(Math.min(t.maxDate,e)))),e},i.prototype._safeSetDate=function(e){var t=this.options,n=e;return e=this._checkRange(e),isNaN(e)&&(e=n),t.date=e,!0},i.prototype._safeGetDate=function(){var e=this.options.date||this._creationDate;return e=this._checkRange(e),e},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);var r=this.options;switch(t){case"minDate":case"maxDate":typeof r[t]=="string"&&(r[t]=this._strToDate(n));if(r.date<r.minDate||r.date>r.maxDate)this._safeSetDate(r.date),this._updateText(),this._highLightField();break;case"date":!n||(typeof n=="string"?n=this._strToDate(n):typeof n=="object"?n=new Date(n.getTime()):n=new Date(n),isNaN(n)&&(n=new Date)),this._safeSetDate(n),this._updateText(),this._highLightField();break;case"dateFormat":case"culture":this._textProvider._setFormat(this.options.dateFormat),this._updateText();var i=this.element.data("calendar");i&&i.wijcalendar("option",t,n);break;case"activeField":n=Math.min(n,this._textProvider.getFieldCount()-1),n=Math.max(n,0),this.options.activeField=n,this._highLightField(),this._resetTimeStamp();break;case"nextTooltip":case"prevTooltip":case"titleFormat":case"toolTipFormat":var i=this.element.data("calendar",i);i&&i.wijcalendar("option",t,n)}},i.prototype._setData=function(e){this.option("date",e)},i.prototype._resetData=function(){var e=this.element.data("defaultDate");e===undefined||e===null?(e=this.element.data("elementValue"),e!==undefined&&e!==null&&e!==""?this.setText(e):this._setData(null)):this._setData(e)},i.prototype._resetTimeStamp=function(){this.element.data("cursorPos",0),this.element.data("timeStamp",new Date("1900/1/1"))},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(this.options.showNullText&&this.isDateNull())return"";var e=this._textProvider.toString();return e===this.options.nullText?"":e},i.prototype._highLightField=function(e){typeof e=="undefined"&&(e=this.options.activeField);if(this.isFocused()){var t=this._textProvider.getFieldRange(e);t&&this.element.wijtextselection(t)}},i.prototype._highLightCursor=function(e){if(this._isNullText())return;e===undefined&&(e=Math.max(0,this.element.wijtextselection().start));var t=this._textProvider.getCursorField(e);if(t<0)return;this._setOption("activeField",t)},i.prototype._toNextField=function(){this._setOption("activeField",this.options.activeField+1)},i.prototype._toPrevField=function(){this._setOption("activeField",this.options.activeField-1)},i.prototype._toFirstField=function(){this._setOption("activeField",0)},i.prototype._toLastField=function(){this._setOption("activeField",this._textProvider.getFieldCount())},i.prototype._clearField=function(e){typeof e=="undefined"&&(e=this.options.activeField);var n=this._textProvider.getFieldRange(e),r,i=this;n&&(r=new t.wijInputResult,this._textProvider.removeAt(n.start,n.end,r),this._updateText(),window.setTimeout(function(){i._highLightField()},1))},i.prototype._doSpin=function(e,t){var n=this;return this._allowEdit()?t&&this.element.data("breakSpinner")?!1:(this._textProvider[e?"incEnumPart":"decEnumPart"]()&&(this._updateText(),this._highLightField()),t&&!this.element.data("breakSpinner")&&window.setTimeout(function(){return n._doSpin(e,!0)},this._calcSpinInterval()),!0):!1},i.prototype._onChange=function(){},i.prototype._afterFocused=function(){this._isNullText()&&this._doFocus()},i.prototype._keyDownPreview=function(e){var t=e.keyCode||e.which,n;switch(t){case r.LEFT:return this._toPrevField(),!0;case r.RIGHT:return this._toNextField(),!0;case r.TAB:if(e.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else{n=this.element.wijtextselection();if(n&&n.end-n.start===this.element.val().length)break;if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0}break;case r.SPACE:case 188:case 190:case 110:case 191:if(e.shiftKey){if(this.options.activeField>0)return this._toPrevField(),!0}else if(this.options.activeField<this._textProvider.getFieldCount()-1)return this._toNextField(),!0;break;case r.HOME:return e.ctrlKey?this._setOption("date",new Date):this._toFirstField(),!0;case r.END:return e.ctrlKey?this._setOption("date",new Date("1970/1/1")):this._toLastField(),!0;case r.DELETE:if(this._allowEdit())return n=this.element.wijtextselection(),n.end-n.start===this.element.val().length?(this.isDeleteAll=!0,this._setOption("date",new Date("1970/1/1"))):this._clearField(),!0}return!1},i.prototype._autoMoveToNextField=function(e,t){if(!this.options.autoNextField)return;this._textProvider.needToMove(this.options.activeField,e,t)&&this._toNextField()},i.prototype._keyPressPreview=function(e){var t=e.keyCode||e.which,n,i,s,o,u,a,f,l,c,h,p;if(t===r.ENTER)return this.isDateNull()&&(this.options.date=new Date),!1;n=this._textProvider.getFieldRange(this.options.activeField);if(n){if(t===r.TAB)return!0;if(t===r.SPACE)return this._stopEvent(e),!0;i=String.fromCharCode(t),s=this._textProvider.isFieldSep(i,this.options.activeField);if(s)return this._toNextField(),this._stopEvent(e),!0;o=this.element.data("cursorPos"),u=new Date,f=this.element.data("timeStamp"),p=this.element.data("lastInput"),a=u.getTime()-f.getTime()>this.options.keyDelay;var h=i;return a?o=0:p&&(h=p+h),this.element.data({timeStamp:u,lastInput:h}),l=n.start+o,this.element.data("cursorPos",++o),c=this._textProvider.addToField(h,this.options.activeField,l),c?(this._updateText(),this._autoMoveToNextField(o,i),this._highLightField()):(this._resetTimeStamp(),this._fireIvalidInputEvent()),this._stopEvent(e),!0}return!1},i.prototype._raiseDataChanged=function(){var e=this.options.date,t=this.element.data("preDate");this.element.data("preDate",e?new Date(e.getTime()):null);if(!t&&e||t&&!e||t&&e&&t.getTime()!==e.getTime())this._syncCalendar(),this.element.attr("aria-valuenow",e),this._trigger("dateChanged",null,{date:e})},i.prototype.isDateNull=function(){return this.options.date===null||this.options.date===undefined},i.prototype._isMinDate=function(e){return e.getFullYear()===1&&e.getMonth()===0&&e.getDate()===1},i.prototype._initCalendar=function(){var e=this,t=this.options,r=t.calendar,i;if(r===undefined||r===null)return;if(typeof r=="boolean"||r==="default")r=n("<div/>"),r.appendTo(document.body);i=n(r);if(i.length!==1)return;this.element.data("calendar",i),t.localization&&(t.nextTooltip=t.localization.nextTooltip,t.prevTooltip=t.localization.prevTooltip,t.titleFormat=t.localization.titleFormat,t.toolTipFormat=t.localization.toolTipFormat),i.wijcalendar({popupMode:!0,culture:t.culture,nextTooltip:t.nextTooltip||"Next",prevTooltip:t.prevTooltip||"Previous",titleFormat:t.titleFormat||"MMMM yyyy",toolTipFormat:t.toolTipFormat||"dddd, MMMM dd, yyyy",selectedDatesChanged:function(){var t=i.wijcalendar("getSelectedDate"),n=e.option("date");i.wijcalendar("close"),t&&(n&&(t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds()),t.setMilliseconds(n.getMilliseconds())),e.option("date",t),e.selectText()),e._trySetFocus()}}),this._syncCalendar()},i.prototype._syncCalendar=function(){var e=this.element.data("calendar"),t,n;if(!e)return;t=this.options,n=this._safeGetDate(),this._isMinDate(n)&&(n=new Date),e.wijcalendar("option","displayDate",n),t.minDate&&e.wijcalendar("option","minDate",t.minDate),t.maxDate&&e.wijcalendar("option","maxDate",t.maxDate),e.wijcalendar("unSelectAll"),e.wijcalendar("selectDate",n),e.wijcalendar("refresh")},i.prototype._isPopupShowing=function(){var t=this.element.data("calendar");return t?t.wijcalendar("isPopupShowing"):e.prototype._isPopupShowing.call(this)},i.prototype._showPopup=function(){var t=this.element.data("calendar");if(!t)return e.prototype._showPopup.call(this);if(!this._allowEdit())return;this._syncCalendar(),t.wijcalendar("popup",n.extend({},this.options.popupPosition,{of:this.outerDiv}))},i.prototype._hidePopup=function(){var t=this.element.data("calendar");if(!t)return e.prototype._hidePopup.call(this);t.wijcalendar("close")},i.prototype._isCalendarVisible=function(){if(!this._allowEdit())return!1;var e=this.element.data("calendar");return e?e.wijcalendar("isPopupShowing"):!1},i.prototype._popupVisible=function(){return this._hasComboItems()?this._isComboListVisible():this._isCalendarVisible()},i}(t.wijinputcore);t.wijinputdate=s;var o=function(){function e(){this.wijCSS={wijinputdate:t.wijinputcore.prototype.options.wijCSS.wijinput+"-date"},this.date=null,this.minDate=null,this.maxDate=null,this.dateFormat="d",this.startYear=1950,this.smartInputMode=!0,this.activeField=0,this.keyDelay=800,this.autoNextField=!0,this.calendar="default",this.popupPosition={offset:"0 4"},this.dateChanged=null}return e}();s.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new o),n.wijmo.registerWidget("wijinputdate",s.prototype);var u=function(e){function r(t,n){e.call(this),this.inputWidget=t,this.maskPartsCount=0,this.pattern="M/d/yyyy",this._disableSmartInputMode=!1,this.paddingZero=i,this.descriptors=new Array(0),this.desPostions=new Array(0),this.fields=new Array(0),this._setFormat(n)}return __extends(r,e),r.prototype.initialize=function(){},r.prototype.getFieldCount=function(){return this.fields.length},r.prototype.getFieldRange=function(e){var t=this.fields[e];return{start:t.startIndex,end:t.startIndex+t.getText().length}},r.prototype.getCursorField=function(e){e=Math.min(e,this.desPostions.length-1),e=Math.max(e,0);var t=this.desPostions[e].desc,r;if(t.type===-1){r=n.inArray(t,this.descriptors);if(!(r>0&&this.descriptors[r-1].type!==-1))return-1;t=this.descriptors[r-1]}return n.inArray(t,this.fields)},r.prototype.needToMove=function(e,t,n){if(!this.inputWidget._isValidDate(this.inputWidget._safeGetDate(),!0))return!1;var r=this.fields[e],i=parseInt(n,10);if(t===r.maxLen)return!0;if(isNaN(i))return!1;switch(r.type){case 20:case 25:case 45:case 46:return i>1;case 47:case 48:return i>2;case 30:case 31:return i>3;case 50:case 51:case 60:case 61:return i>6}return!1},r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype._isDigitString=function(e){e=n.trim(e);if(e.length===0)return!0;var t=e.charAt(0),r,i;if(t==="+"||t==="-")e=e.substr(1),e=n.trim(e);if(e.length===0)return!0;try{return r=parseFloat(e),i=r.toString(),i===e}catch(s){return!1}},r.prototype._setFormat=function(e){this.descriptors=[];var t="",r="",i=!1,s=!1,o,u;this.pattern=this._parseFormatToPattern(e);for(o=0;o<this.pattern.length;o++){u=this.pattern.charAt(o);if(s){this.descriptors.push(this.createDescriptor(-1,u)),t="",s=!1;continue}if(u==="\\"){s=!0,t.length>0&&(this.handlePattern(t)||this.descriptors.push(this.createDescriptor(-1,r)),t="");continue}if(u==="'"){i?(i=!1,t=""):(i=!0,t.length>0&&(this.handlePattern(t)||this.descriptors.push(this.createDescriptor(-1,r)),t=""));continue}if(i){this.descriptors.push(this.createDescriptor(-1,u)),t="";continue}o||(r=u),r!==u&&t.length>0&&(this.handlePattern(t)||this.descriptors.push(this.createDescriptor(-1,r)),t=""),t+=u,r=u}t.length>0&&(this.handlePattern(t)||this.descriptors.push(this.createDescriptor(-1,r))),this.fields=n.grep(this.descriptors,function(e){return e.type!==-1})},r.prototype._parseFormatToPattern=function(e){var t=this.inputWidget._getCulture().calendars.standard,n=t.patterns.d;if(e.length<=1)switch(e){case"":case"d":n=t.patterns.d;break;case"D":n=t.patterns.D;break;case"f":n=t.patterns.D+" "+t.patterns.t;break;case"F":n=t.patterns.D+" "+t.patterns.T;break;case"g":n=t.patterns.d+" "+t.patterns.t;break;case"G":n=t.patterns.d+" "+t.patterns.T;break;case"m":n=t.patterns.M;break;case"M":n=t.patterns.M;break;case"s":n=t.patterns.S;break;case"t":n=t.patterns.t;break;case"T":n=t.patterns.T;break;case"u":n=t.patterns.S;break;case"U":n=t.patterns.D+" "+t.patterns.T;break;case"y":n=t.patterns.Y;break;case"Y":n=t.patterns.Y}else n=e;return n},r.prototype.getDate=function(){return this.inputWidget?new Date(this.inputWidget._safeGetDate().getTime()):undefined},r.prototype.setDate=function(e){this.inputWidget&&this.inputWidget._setData(e)},r.prototype._internalSetDate=function(e){if(this.inputWidget){var t=this,n=this.inputWidget.options,r=this.inputWidget.element,i=!!r.data("typing"),s;i?(n.date=e,s=function(){var e=new Date,i=r.data("timeStamp");e.getTime()-i.getTime()>n.keyDelay?(t.inputWidget._safeSetDate(n.date),t.inputWidget._updateText(),t.inputWidget._highLightField()):window.setTimeout(s,n.keyDelay)},window.setTimeout(s,n.keyDelay)):this.inputWidget._safeSetDate(e)}},r.prototype.daysInMonth=function(e,t){e-=1;var n=(new Date(t,++e,1,-1)).getDate();return n},r.prototype.setYear=function(e,t,n){try{t&&t.isfullreset&&(t.offset=1,e="1970");if(typeof e=="string"&&!this._isDigitString(e))return!1;e*=1;var r=this.inputWidget.options,i=1,s=9999,o,u,a;n&&(r.minDate&&(i=Math.max(i,r.minDate.getFullYear())),r.maxDate&&(s=Math.min(s,r.maxDate.getFullYear()))),t&&t.isreset&&(e=i),e<i&&(e=i),e>s&&(e=s),o=this.getDate(),u=new Date(o.getTime()),u.setFullYear(e);if(this._isValidDate(u))return a=this.daysInMonth(this.getMonth(),this.getYear()),a===o.getDate()?(u=new Date(o.getTime()),u.setDate(1),u.setFullYear(e),a=this.daysInMonth(u.getMonth()+1,u.getFullYear()),u.setDate(a),this._isValidDate(u)?(this._internalSetDate(u),!0):!1):(o.setFullYear(e),this._internalSetDate(o),!0);return t&&t.isreset?(o.setFullYear(1),this._internalSetDate(o),!0):!1}catch(f){return!1}},r.prototype.getYear=function(){return this.getDate().getFullYear()},r.prototype.setMonth=function(e,t,n){try{n&&n.isfullreset&&(e="1"),e*=1;var r=this.getDate(),i,s;if(typeof t!="undefined"&&!t)if(e>12||e<1){if(!n||!n.isreset)return!1;e=1}return i=this.daysInMonth(this.getMonth(),this.getYear()),i===this.getDate().getDate()?(s=new Date(r.getTime()),s.setDate(1),s.setMonth(e-1),i=this.daysInMonth(s.getMonth()+1,s.getFullYear()),s.setDate(i),this._isValidDate(s)?(this._internalSetDate(s),!0):!1):(s=new Date(r.getTime()),s.setMonth(e-1),this._isValidDate(s)?(this._internalSetDate(s),!0):!1)}catch(o){return!1}},r.prototype.getMonth=function(){return this.getDate().getMonth()+1},r.prototype.setDayOfMonth=function(e,t,n){try{if(n&&n.isfullreset)return this.setDayOfMonth(1,t);var r=this.getDate(),i,s;e*=1;if(typeof t!="undefined"&&!t){i=this.daysInMonth(this.getMonth(),this.getYear());if(e>i||e<1)return n&&n.isreset?this.setDayOfMonth(1,t,n):!1}return s=new Date(r.getTime()),s.setDate(e),this._isValidDate(s)?(this._internalSetDate(s),!0):!1}catch(o){return!1}},r.prototype.getDayOfMonth=function(){return this.getDate().getDate()},r.prototype.setHours=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>24)return!1;var n=new Date(this.getDate().getTime());return n.setHours(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getHours=function(){return this.getDate().getHours()},r.prototype.setMinutes=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setMinutes(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getMinutes=function(){return this.getDate().getMinutes()},r.prototype.setSeconds=function(e,t){try{e*=1;if(typeof t!="undefined"&&!t&&e>60)return!1;var n=new Date(this.getDate().getTime());return n.setSeconds(e),this._isValidDate(n)?(this._internalSetDate(n),!0):!1}catch(r){return!1}},r.prototype.getSeconds=function(){return this.getDate().getSeconds()},r.prototype.setDayOfWeek=function(e){try{e*=1;var t=e-this.getDayOfWeek();return this.setDayOfMonth(this.getDayOfMonth()+t,!0)}catch(n){return!1}},r.prototype.getDayOfWeek=function(){return this.getDate().getDay()+1},r.prototype.handlePattern=function(e){var t=new RegExp("y{3,4}"),n=t.test(e);return n?(this.descriptors.push(this.createDescriptor(10)),!0):(t=new RegExp("y{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(2)),!0):(t=new RegExp("y{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(1)),!0):(t=new RegExp("d{4,4}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(101)),!0):(t=new RegExp("d{3,3}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(100)),!0):(t=new RegExp("d{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(30)),!0):(t=new RegExp("d{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(31)),!0):(t=new RegExp("M{4,4}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(27)),!0):(t=new RegExp("M{3,3}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(26)),!0):(t=new RegExp("M{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(20)),!0):(t=new RegExp("M{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(25)),!0):(t=new RegExp("h{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(46)),!0):(t=new RegExp("h{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(45)),!0):(t=new RegExp("H{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(48)),!0):(t=new RegExp("H{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(47)),!0):(t=new RegExp("m{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(50)),!0):(t=new RegExp("m{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(51)),!0):(t=new RegExp("s{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(60)),!0):(t=new RegExp("s{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(61)),!0):(t=new RegExp("t{2,2}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(251)),!0):(t=new RegExp("t{1,1}"),n=t.test(e),n?(this.descriptors.push(this.createDescriptor(250)),!0):!1))))))))))))))))))))},r.prototype.createDescriptor=function(e,t){var n=null,r=this.maskPartsCount++;switch(e){case-1:n=new l(this,r),n.liternal=t;break;case 20:n=new h(this,r);break;case 25:n=new p(this,r);break;case 26:n=new d(this,r);break;case 27:n=new v(this,r);break;case 30:n=new g(this,r);break;case 31:n=new y(this,r);break;case 100:n=new b(this,r);break;case 101:n=new w(this,r);break;case 10:n=new S(this,r);break;case 1:n=new T(this,r);break;case 2:n=new N(this,r);break;case 45:n=new L(this,r);break;case 46:n=new A(this,r);break;case 47:n=new M(this,r);break;case 48:n=new _(this,r);break;case 250:n=new P(this,r);break;case 251:n=new H(this,r);break;case 50:n=new j(this,r);break;case 51:n=new F(this,r);break;case 60:n=new q(this,r);break;case 61:n=new R(this,r);break;default:}return n},r.prototype.toString=function(){if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.inputWidget.isDateNull())return this.inputWidget.options.nullText;var e="",t=0,n,r,i;this.desPostions=new Array(0);for(n=0;n<this.descriptors.length;n++){this.descriptors[n].startIndex=e.length,r=this.descriptors[n].getText(),e+=r;for(i=0;i<r.length;i++){this.desPostions.push({desc:this.descriptors[n],pos:i,text:r,length:r.length}),t++;if(this.desPostions.length!==t)throw"Fatal Error !!!!!!!!!!!!!!!"}}return e},r.prototype.parseDate=function(e){var t;if(this.pattern==="dddd"||this.pattern==="ddd"||typeof e=="object")try{t=new Date(e),isNaN(t)&&(t=new Date)}catch(n){t=new Date}else t=Globalize.parseDate(e,this.pattern,this._getCulture()),t||(t=this._tryParseDate(e,this.pattern)),t||(t=new Date);return t},r.prototype.set=function(e){return this._internalSetDate(new Date(this.parseDate(e))),!0},r.prototype.haveEnumParts=function(){return!1},r.prototype.removeLiterals=function(e){return e=""+e+"",e=e.replace(new RegExp("[+]","g"),""),e=e.replace(new RegExp("[.]","g"),""),e=e.replace(new RegExp("[:]","g"),""),e=e.replace(new RegExp("[-]","g"),""),e=e.replace(new RegExp("[()=]","g"),""),e},r.prototype.getFirstDelimiterPos=function(e,t){var n=0,r=0,i,s;while(n<t.length&&r<e.length){i=t.charAt(n),s=e.charAt(r);if(i!==s)return r-1;r++,n++}return e.length-1},r.prototype.findAlikeArrayItemIndex=function(e,t){var n=-1,r=99999,i,s;for(i=0;i<e.length;i++)s=e[i].toLowerCase().indexOf(t.toLowerCase()),s!==-1&&s<r&&(r=s,n=i);return n},r.prototype._isValidDate=function(e){return this.inputWidget._isValidDate(e)},r.prototype.isFieldSep=function(e,t){var n=t++,r;return n<this.descriptors.length?(r=this.descriptors[n],r.type!==-1?!1:e===r.text):!1},r.prototype.getPositionType=function(e){var t=this.desPostions[e];return t.desc.type},r.prototype.addToField=function(e,t,n){var r=this.fields[t],i,s,o;return i=e,s={val:e,pos:0,offset:0,isreset:!1},this.inputWidget.element.data("typing",!0),o=r.setText(i,e.length===1?!1:!0,s),this.inputWidget.element.data("typing",!1),o},r.prototype.insertAt=function(e,n,r){typeof r=="undefined"&&(r=new t.wijInputResult),r.testPosition=-1;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;if(e.length===1){i=this.desPostions[n];if(i&&i.desc.type===-1&&i.text===e)return r.testPosition=n,r.hint=r.characterEscaped,!0}s=e,o=n,e=this.removeLiterals(e),u=e,a=!1,l=!1,o>0&&u.length===1&&(o--,n=o,i=this.desPostions[o],a=!0,i&&(i.desc.type===-1||i.desc.getText().length!==1)&&(n++,o++,a=!1)),f=!1;while(u.length>0&&o<this.desPostions.length){i=this.desPostions[o];if(i.desc.type===-1){o+=i.length;continue}if(i.desc.needAdjustInsertPos()){c=u.substr(0,i.length-i.pos),c=i.text.slice(0,i.pos)+c+i.text.slice(i.pos+c.length,i.length),a&&(c=i.text+c),l&&(c+=i.text),p=i.desc.getText().length,v="";try{e.length===1&&(i.pos?i.pos>0&&(v=c.substring(0,i.pos+1)):v=e)}catch(E){}p===1&&c.length>1&&e.length===1&&(i.desc.type===31||i.desc.type===25)&&(this._disableSmartInputMode=!0),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),this._disableSmartInputMode=!1,!f&&typeof v!="undefined"&&v.length>0&&(i.desc.type===26||i.desc.type===27||i.desc.type===100||i.desc.type===101||i.desc.type===250||i.desc.type===251)&&(f=i.desc.setText(v,e.length===1?!1:!0,h));if(f)r.hint=r.success,r.testPosition=o+h.offset,e.length===1&&(m=i.desc.getText().length,d=i.pos,i.pos>m-1&&(d=m),g=m-p,g>0&&i.pos===p-1&&(d=m-1),y=this.toString(),r.testPosition=i.desc.startIndex+d+h.offset),u=u.slice(i.length-i.pos,u.length);else{r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n);if(i.desc.type!==-1&&e.length===1)return!1}o+=i.length}else b=this.getFirstDelimiterPos(u,s),b<0&&(b=0),c=u.substring(0,b+1),h={val:e,pos:i.pos,offset:0,isreset:!1},f=i.desc.setText(c,e.length===1?!1:!0,h),f?(r.hint=r.success,r.testPosition=o+h.offset,u=u.slice(b+1,u.length)):(r.hint=r.invalidInput,r.testPosition!==-1&&(r.testPosition=n)),b<0&&(b=0),w=b+1,o+=w}return f},r.prototype.removeAt=function(e,t,n){try{var r=this.desPostions[e],i,s,o,u,a=this.inputWidget,f=a.element,l=f.val().length;return l===t+1&&e===0&&(a.isDeleteAll=!0),r.desc.needAdjustInsertPos()&&(i="0",s=e,r.text=r.desc.getText(),i=r.text.slice(0,r.pos)+i+r.text.slice(r.pos+i.length,r.length),o={val:i,pos:r.pos,offset:0,isreset:!0,isfullreset:!1},t-e+1>=r.length&&(o.isfullreset=!0,e+=r.length,s=e),u=r.desc.setText(i,!1,o),u?(n.hint=n.success,n.testPosition=s):(n.hint=n.invalidInput,n.testPosition===-1&&(n.testPosition=e))),e<t&&this.removeAt(e+1,t,n),!0}catch(c){return!1}},r.prototype.incEnumPart=function(){var e=this.fields[this.inputWidget.options.activeField];return e&&e.inc(),!0},r.prototype.decEnumPart=function(e){var t=this.fields[this.inputWidget.options.activeField];return t&&t.dec(),!0},r.prototype.setValue=function(e){return this.setDate(new Date(e instanceof Date?e.getTime():e)),!0},r.prototype.getValue=function(){return this.getDate()},r.prototype._isSmartInputMode=function(){return this._disableSmartInputMode?!1:this.inputWidget?this.inputWidget.options.smartInputMode:!0},r.prototype._getInt=function(e,t,r,i){var s,o;for(s=i;s>=r;s--){o=e.substring(t,t+s);if(o.length<r)return null;if(n.wij.charValidator.isDigit(o))return o}return null},r.prototype._tryParseDate=function(e,t){var n=this._getCulture().calendars,r,i,s,o;return t=t||n.standard.patterns.d,t&&(t.indexOf("MMM")===-1&&t.indexOf("MMMM")===-1&&(t=t.replace("MM","M")),t=t.replace("dd","d"),t=t.replace("tt","a")),r=t.replace("yyyy","yy"),i=n.standard["/"],s=[t,r,t.replace(new RegExp(i,"g"),"-"),r.replace(new RegExp(i,"g"),"-"),t.replace(new RegExp(i,"g"),"."),r.replace(new RegExp(i,"g"),".")],o=Globalize.parseDate(e,s,this._getCulture()),o?o:(o=new Date(e),o.toString()!=="Invalid Date"&&e&&e!==""?o:0)},r.prototype._formatDate=function(e,t,n){var r=this;if(!e.valueOf())return"&nbsp;";var s=this.inputWidget._getCulture().calendars.standard,o=t.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(t){var o;switch(t){case"yyyy":return i(e.getFullYear(),4);case"MMMM":return n.dateTimeFormat.monthNames[e.getMonth()];case"MMM":return n.dateTimeFormat.abbreviatedMonthNames[e.getMonth()];case"MM":return r.paddingZero(e.getMonth()+1,2);case"M":return r.paddingZero(e.getMonth()+1,1);case"mm":return r.paddingZero(e.getMinutes(),2);case"m":return r.paddingZero(e.getMinutes(),1);case"dddd":return n.dateTimeFormat.dayNames[e.getDay()];case"ddd":return n.dateTimeFormat.abbreviatedDayNames[e.getDay()];case"dd":return r.paddingZero(e.getDate(),2);case"d":return r.paddingZero(e.getDate(),1);case"hh":return o=e.getHours()%12,r.paddingZero(o?o:12,2);case"h":return o=e.getHours()%12,r.paddingZero(o?o:12,1);case"HH":return r.paddingZero(e.getHours(),2);case"H":return r.paddingZero(e.getHours(),1);case"ss":return r.paddingZero(e.getSeconds(),2);case"s":return r.paddingZero(e.getSeconds(),1);case"tt":return e.getHours()<12?s.AM[0]:s.PM[0];case"t":return e.getHours()<12?s.AM[0].length>0?s.AM[0].charAt(0):"":s.PM[0].length>0?s.PM[0].charAt(0):"";case"a/p":return e.getHours()<12?"a":"p"}return"N"});return o},r}(t.wijTextProvider);t.wijDateTextProvider=u,function(e){e._map=[],e.liternal=-1,e.OneDigitYear=1,e.TwoDigitYear=2,e.FourDigitYear=10,e.TwoDigitMonth=20,e.Month=25,e.AbbreviatedMonthNames=26,e.MonthNames=27,e.TwoDigityDayOfMonth=30,e.DayOfMonth=31,e.AbbreviatedDayNames=100,e.DayNames=101,e.h=45,e.hh=46,e.H=47,e.HH=48,e.ShortAmPm=250,e.AmPm=251,e.mm=50,e.m=51,e.ss=60,e.s=61}(t.DescriptorType||(t.DescriptorType={}));var a=t.DescriptorType,f=function(){function e(e,t){this.id=t,this.startIndex=0,this.name=null,this.type=a.liternal,this.maxLen=2,this._txtProvider=e,this.startIndex=0}return e.prototype.getText=function(){return null},e.prototype.setText=function(e,t,n){return!1},e.prototype.inc=function(){},e.prototype.dec=function(){},e.prototype.needAdjustInsertPos=function(){return!0},e.prototype.reachMaxLen=function(){var e=this.getText();do{if(e.charAt(0)!=="0")break;e=e.slice(1)}while(e.length>0);return e.length>=this.maxLen},e}();t._iDateDescriptor=f;var l=function(e){function t(t,n){e.call(this,t,n),this.liternal="",this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){return this.liternal},t}(f),c=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()+1,!0)},t.prototype.dec=function(){this._txtProvider.setMonth(this._txtProvider.getMonth()-1,!0)},t.prototype.setText=function(e,t,n){return this._txtProvider.setMonth(e,t,n)},t}(f),h=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit month",this.type=a.TwoDigitMonth}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return e.length===1?"0"+e:e},t}(c),p=function(e){function t(t,n){e.call(this,t,n),this.name="month",this.type=a.Month}return __extends(t,e),t.prototype.getText=function(){var e=""+this._txtProvider.getMonth()+"";return e},t}(c),d=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedMonthNames",this.type=a.AbbreviatedMonthNames,this.maxLen=a.AbbreviatedMonthNames}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return t.calendars.standard.months.namesAbbr[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider.inputWidget._getCulture().calendars.standard;return r=this._txtProvider.findAlikeArrayItemIndex(i.months.namesAbbr,e),r===-1?!1:this._txtProvider.setMonth(r+1,t,n)},t}(c),v=function(e){function t(t,n){e.call(this,t,n),this.name="MonthNames",this.type=a.MonthNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getMonth(),t=this._txtProvider._getCulture();return t.calendars.standard.months.names[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i;if(n&&n.isfullreset)r=1;else{i=this._txtProvider._getCulture(),r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.months.names,e);if(r===-1)return!1}return this._txtProvider.setMonth(r+1,t,n)},t}(c),m=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()+1,!0)},t.prototype.dec=function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()-1,!0)},t.prototype.setText=function(e,t,n){return this._txtProvider.setDayOfMonth(e,t,n)},t}(f),g=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit day of month",this.type=a.TwoDigityDayOfMonth}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getDayOfMonth())},t}(m),y=function(e){function t(t,n){e.call(this,t,n),this.name="Day of month",this.type=a.DayOfMonth}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfMonth();return""+e+""},t}(m),b=function(e){function t(t,n){e.call(this,t,n),this.name="AbbreviatedDayNames",this.type=a.AbbreviatedDayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return t.calendars.standard.days.namesShort[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.namesShort,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(m),w=function(e){function t(t,n){e.call(this,t,n),this.name="DayNames",this.type=a.DayNames,this.maxLen=100}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getDayOfWeek(),t=this._txtProvider._getCulture();return t.calendars.standard.days.names[e-1]},t.prototype.setText=function(e,t,n){var r=-1,i=this._txtProvider._getCulture();return r=this._txtProvider.findAlikeArrayItemIndex(i.calendars.standard.days.names,e),r===-1?!1:this._txtProvider.setDayOfWeek(r+1)},t.prototype.needAdjustInsertPos=function(){return!1},t}(m),E=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setYear(this._txtProvider.getYear()+1,null,!0)},t.prototype.dec=function(){this._txtProvider.setYear(this._txtProvider.getYear()-1,null,!0)},t}(f),S=function(e){function t(t,n){e.call(this,t,n),this.name="Four-digit year",this.type=a.FourDigitYear,this.maxLen=4}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getYear(),4)},t.prototype.setText=function(e,t,n){if(this._txtProvider._isSmartInputMode()&&n){var r=2e3,i,s,o,u,a,f,l,c;this._txtProvider.inputWidget.options.startYear&&(r=this._txtProvider.inputWidget.options.startYear),s=r+100-1,i=this._txtProvider.paddingZero(r,4),s=this._txtProvider.paddingZero(s,4);if(n.pos===0||n.pos===1){o=new Date,u=this._txtProvider.paddingZero(this._txtProvider.getYear(),4);if(u.charAt(0)==="0"&&u.charAt(1)==="0"&&n.pos<=1)return a=n.val,f="00",a>=5?f=i.slice(0,2):f=s.slice(0,2),l=n.val+u.slice(3,4),c=f+l,n.offset=2-n.pos,this._txtProvider.setYear(c,n),!0}}return this._txtProvider.setYear(e,n)},t}(E),x=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){e=i(e);var r=i(this._txtProvider.getYear(),4),s,o,u,a,f;return e==="00"&&(s=this._txtProvider.getMonth(),o=this._txtProvider.getDayOfMonth(),u=this._txtProvider.getHours(),a=this._txtProvider.getMinutes(),f=this._txtProvider.getSeconds(),s===1&&o===1&&!u&&!a&&!f&&(r="0001",e="01")),r.length>=2&&(r=r.substr(0,2)+e.substr(0,2)),this._txtProvider.setYear(r,n)},t}(E),T=function(e){function t(t,n){e.call(this,t,n),this.name="One-digit year",this.type=a.OneDigitYear}return __extends(t,e),t.prototype.getText=function(){var e=i(this._txtProvider.getYear());return e[0]==="0"&&(e=e[1]),e},t}(x),N=function(e){function t(t,n){e.call(this,t,n),this.name="Two-digit year",this.type=a.TwoDigitYear}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getYear(),2)},t}(x),C=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setHours(this._txtProvider.getHours()+1,!0)},t.prototype.dec=function(){this._txtProvider.setHours(this._txtProvider.getHours()-1,!0)},t}(f),k=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){var r=this._txtProvider.getHours();return r>12&&(e=e*1+12),this._txtProvider.setHours(e,t)},t}(C),L=function(e){function t(t,n){e.call(this,t,n),this.name="h",this.type=a.h}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return e>12?e-=12:e===0&&(e=12),""+e+""},t}(k),A=function(e){function t(t,n){e.call(this,t,n),this.name="hh",this.type=a.hh}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();if(e>12)e-=12;else if(e===0)return"12";return i(e)},t}(k),O=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.setText=function(e,t,n){return this._txtProvider.setHours(e,t)},t}(C),M=function(e){function t(t,n){e.call(this,t,n),this.name="H",this.type=a.H}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours();return""+e+""},t}(O),_=function(e){function t(t,n){e.call(this,t,n),this.name="HH",this.type=a.HH}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getHours())},t}(O),D=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.dec=function(){var e=(this._txtProvider.getHours()+12)%24;this._txtProvider.setHours(e,!0)},t.prototype.setText=function(e,t,n){var r;return e.toLowerCase().indexOf("a")>=0?(r=this._txtProvider.getHours()%12,this._txtProvider.setHours(r,!0)):e.toLowerCase().indexOf("p")>=0&&(r=this._txtProvider.getHours()%12+12,this._txtProvider.setHours(r,!0)),!0},t}(f),P=function(e){function t(t,n){e.call(this,t,n),this.name="t",this.type=a.ShortAmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t=this._txtProvider._getCulture(),n=t.calendars.standard[e<12?"AM":"PM"][0];return n.charAt(0)||" "},t}(D),H=function(e){function t(t,n){e.call(this,t,n),this.name="tt",this.type=a.AmPm}return __extends(t,e),t.prototype.getText=function(){var e=this._txtProvider.getHours(),t="",n=this._txtProvider._getCulture();return e<12?t=n.calendars.standard.AM[0]:t=n.calendars.standard.PM[0],t.length<=0&&(t=" "),t},t}(D),B=function(e){function t(t,n){e.call(this,t,n),this.delta=1}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()+this.delta,!0)},t.prototype.dec=function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()-this.delta,!0)},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setMinutes(e,t)},t}(f),j=function(e){function t(t,n){e.call(this,t,n),this.name="mm",this.type=a.mm}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getMinutes())},t}(B),F=function(e){function t(t,n){e.call(this,t,n),this.name="m",this.type=a.m,this.delta=12}return __extends(t,e),t.prototype.getText=function(){return this._txtProvider.getMinutes().toString()},t}(B),I=function(e){function t(t,n){e.call(this,t,n)}return __extends(t,e),t.prototype.inc=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()+12,!0)},t.prototype.dec=function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()-12,!0)},t.prototype.setText=function(e,t,n){return n&&n.isfullreset&&(e="0"),this._txtProvider.setSeconds(e,t)},t}(f),q=function(e){function t(t,n){e.call(this,t,n),this.name="ss",this.type=a.ss}return __extends(t,e),t.prototype.getText=function(){return i(this._txtProvider.getSeconds())},t}(I),R=function(e){function t(t,n){e.call(this,t,n),this.name="s",this.type=a.s}return __extends(t,e),t.prototype.getText=function(){return this._txtProvider.getSeconds().toString()},t}(I)})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){"use strict";var t=jQuery;(function(e){e._map=[],e.editOptional=1,e.editRequired=2,e.separator=4,e.literal=8})(e.wijchartype||(e.wijchartype={}));var n=e.wijchartype,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._createTextProvider=function(){this._textProvider=new s(this,this.options.mask,!1)},t.prototype._checkMaskAndPassword=function(){var e=!this.options.mask||this.options.mask.length<0;if(e&&this._isPassword())throw'Option "passwordChar" requires a mask'},t.prototype._updateIsPassword=function(){var e=this.options.passwordChar.length>0&&this.element.attr("type")!=="password";this.element.data("isPassword",e),this._checkMaskAndPassword()},t.prototype._beginUpdate=function(){this.element.addClass(this.options.wijCSS.wijinputmask),this._updateIsPassword(),this.element.data("defaultText",this.options.text)},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"text":this.setText(n);break;case"mask":case"culture":if(typeof n=="undefined"||n.length<=0)return;this._checkMaskAndPassword();var r=this.getText();t==="mask"&&(this._textProvider.mask=n,this._textProvider.initialMask=n),this._textProvider.initialize(),this._textProvider.set(r),this._updateText();break;case"promptChar":this._textProvider&&(this._textProvider.updatePromptChar(),this._updateText());break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this._updateIsPassword(),this._updateText()}},t.prototype._resetData=function(){var e=this.element.data("defaultText");if(e===undefined||e===null)e=this.element.data("elementValue");if(e===undefined||e===null)e="";this.setText(e)},t.prototype._isPassword=function(){return!!this.element.data("isPassword")},t.prototype._getTextWithPrompts=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!1):this.element.val()},t.prototype._getTextWithLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!1,!0):this.element.val()},t.prototype._getTextWithPromptAndLiterals=function(){return this._isInitialized()?this._textProvider.toString(!0,!0,!0):this.element.val()},t.prototype._getTextWithPromptAndLiteralsAndPassword=function(){return this._isInitialized()?this._textProvider.toString(!1,!0,!0):this.element.val()},t.prototype._onChange=function(){if(!this.element)return;var e=this.element.val();this.getText()!==e&&this._getTextWithPrompts()!==e&&this._getTextWithPromptAndLiterals()!==e&&(this._textProvider.getPasswordChar()!==""?this._getTextWithPromptAndLiteralsAndPassword()!==e&&this.setText(e):this.setText(e))},t.prototype._afterFocused=function(){(this._isNullText()||!!this.options.hidePromptOnLeave)&&this._doFocus()},t}(e.wijinputcore);e.wijinputmask=r;var i=function(){function t(){this.wijCSS={wijinputmask:e.wijinputcore.prototype.options.wijCSS.wijinput+"-mask"},this.text=null,this.mask="",this.promptChar="_",this.hidePromptOnLeave=!1,this.resetOnPrompt=!0,this.allowPromptAsInput=!1,this.passwordChar="",this.resetOnSpace=!0,this.skipLiterals=!0}return t}();r.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new i),t.wijmo.registerWidget("wijinputmask",r.prototype);var s=function(r){function i(e,t,n){r.call(this),this.inputWidget=e,this.mask=t,this.asciiOnly=n,this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.noMask=!1,this.descriptors=[],this.initialize()}return __extends(i,r),i.prototype.initialize=function(){this.noMask=!this.mask||this.mask.length<=0;if(this.noMask)return;this.testString="",this.assignedCharCount=0,this.requiredCharCount=0,this.descriptors=new Array(0);var e="none",t=!1,r=0,i,s,u,a=n.literal,f="",l,c,h,p,d=this.inputWidget._getCulture();for(i=0;i<this.mask.length;i++){u=!1,l=this.mask.charAt(i),t&&(t=!1,u=!0);if(!u){h=l;if(h<="C"){switch(h){case"#":case"9":case"?":case"C":l=this.getPromtChar(),a=n.editOptional,u=!0;break;case"$":f=d.numberFormat.currency.symbol,a=n.separator,u=!0;break;case"%":case"-":case";":case"=":case"@":case"B":a=n.literal,u=!0;break;case"&":case"0":case"A":l=this.getPromtChar(),a=n.editRequired,u=!0;break;case",":f=d.numberFormat[","],a=n.separator,u=!0;break;case".":f=d.numberFormat["."],a=n.separator,u=!0;break;case"/":f=d.calendars.standard["/"],a=n.separator,u=!0;break;case":":f=d.calendars.standard[":"],a=n.separator,u=!0;break;case"<":e="lower";continue;case">":e="upper";continue}u||(a=n.literal,u=!0)}if(!u){if(h<="\\"){switch(h){case"L":l=this.getPromtChar(),a=n.editRequired,u=!0;break;case"\\":t=!0,a=n.literal;continue}u||(a=n.literal,u=!0)}if(!u){h==="a"&&(l=this.getPromtChar(),a=n.editOptional,u=!0);if(!u){h!=="|"&&(a=n.literal,u=!0);if(!u){e="none";continue}}}}}if(u){p=new o(i,a),this.isEditDesc(p)&&(p.caseConversion=e),a!==n.separator&&(f=l);for(s=0;s<f.length;s++)c=f.charAt(s),this.testString=this.testString+c,this.descriptors[this.descriptors.length]=p,r++}}},i.prototype.getAllowPromptAsInput=function(){return this.inputWidget?this.inputWidget.options.allowPromptAsInput:!1},i.prototype.getPasswordChar=function(){return this.inputWidget?this.inputWidget.options.passwordChar:"*"},i.prototype.isPassword=function(){return this.inputWidget?this.inputWidget._isPassword():!1},i.prototype.getResetOnPrompt=function(){return this.inputWidget?this.inputWidget.options.resetOnPrompt:!0},i.prototype.getResetOnSpace=function(){return this.inputWidget?this.inputWidget.options.resetOnSpace:!0},i.prototype.getSkipLiterals=function(){return this.inputWidget?this.inputWidget.options.skipLiterals:!0},i.prototype.getHidePromptOnLeave=function(){return this.inputWidget?this.inputWidget.options.hidePromptOnLeave:!1},i.prototype._trueOR=function(e,t){return(e>>>1|t>>>1)*2+(e&1|t&1)},i.prototype.setValue=function(e){return!1},i.prototype.getValue=function(){return null},i.prototype.getPromtChar=function(){return this.inputWidget?this.inputWidget.options.promptChar:"_"},i.prototype.updatePromptChar=function(){if(this.noMask)return;var e,r;for(e=0;e<this.descriptors.length;e++){r=this.descriptors[e];if(r.charType===n.editOptional||r.charType===n.editRequired)r.isAssigned||(this.testString=t.wij.charValidator.setChar(this.testString,this.getPromtChar(),e))}},i.prototype.resetChar=function(e){var r=this.descriptors[e];this.isEditPos(e)&&r.isAssigned&&(r.isAssigned=!1,this.testString=t.wij.charValidator.setChar(this.testString,this.getPromtChar(),e),this.assignedCharCount--,r.charType===n.editRequired&&this.requiredCharCount--)},i.prototype.getAdjustedPos=function(e){return this.noMask?e>=this.testString.length&&(e=this.testString.length-1):e>=this.descriptors.length&&(e-=1),Math.max(0,e)},i.prototype.incEnumPart=function(e,t,n){return!this.noMask},i.prototype.decEnumPart=function(e,t,n){return!this.noMask},i.prototype.findNonEditPositionInRange=function(e,t,r){return this.findPositionInRange(e,t,r,this._trueOR(n.literal,n.separator))},i.prototype.findPositionInRange=function(e,t,n,r){e=Math.max(0,e),t=Math.min(t,this.testString.length-1);if(e<=t)while(e<=t){var i=n?e++:t--,s=this.descriptors[i];if((s.charType&4294967295&(r&4294967295))===s.charType)return i}return-1},i.prototype.findAssignedEditPositionInRange=function(e,t,r){return this.assignedCharCount===0?-1:this.findEditPositionInRange(e,t,r,n.editRequired)},i.prototype.findEditPositionInRange=function(e,t,r,i){do{var s,o;s=this.findPositionInRange(e,t,r,this._trueOR(n.editRequired,n.editOptional));if(s===-1)break;o=this.descriptors[s];switch(i){case n.editOptional:if(!o.isAssigned)return s;break;case n.editRequired:if(o.isAssigned)return s;break;default:return s}r?e++:t--}while(e<=t);return-1},i.prototype.findAssignedEditPositionFrom=function(e,t){if(!this.assignedCharCount)return-1;var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findAssignedEditPositionInRange(n,r,t)},i.prototype.findEditPositionFrom=function(e,t){var n,r;return t?(n=e,r=this.testString.length-1):(n=0,r=e),this.findEditPositionInRange(n,r,t,0)},i.prototype.setChar=function(e,r,i){r=r<0?0:r,i||(i=this.descriptors[r]),this.testEscapeChar(e,r,i)?this.resetChar(r):(t.wij.charValidator.isLetter(e)&&(t.wij.charValidator.isUpper(e)?i.caseConversion==="lower"&&(e=e.toLowerCase()):i.caseConversion==="upper"&&(e=e.toUpperCase())),this.testString=t.wij.charValidator.setChar(this.testString,e,r),i.isAssigned||(i.isAssigned=!0,this.assignedCharCount++,i.charType===n.editRequired&&this.requiredCharCount++))},i.prototype.internalInsertAt=function(t,n,r,i){if(t.length===0)return r.testPosition=n,r.hint=r.noEffect,!0;if(!this._testString(t,n,r))return!1;var s=this.findEditPositionFrom(n,!0),o=this.findAssignedEditPositionInRange(s,r.testPosition,!0)!==-1,u=this.findAssignedEditPositionFrom(this.testString.length-1,!1),a,f,l,c,h;if(o&&r.testPosition===this.testString.length-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;a=this.findEditPositionFrom(r.testPosition+1,!0);if(o){f=new e.wijInputResult,f.hint=f.unknown,l=!0;while(l){l=!1;if(a===-1)return r.hint=r.unavailableEditPosition,r.testPosition=this.testString.length,!1;c=this.descriptors[s];if(c.isAssigned&&!this.testChar(this.testString.charAt(s),a,f))return r.hint=f.hint,r.testPosition=a,!1;if(s!==u){s=this.findEditPositionFrom(s+1,!0),a=this.findEditPositionFrom(a+1,!0),l=!0;continue}}f.hint>r.hint&&(r.hint=f.hint)}if(!i){if(o)while(s>=n)h=this.descriptors[s],h.isAssigned?this.setChar(this.testString.charAt(s),a):this.resetChar(a),a=this.findEditPositionFrom(a-1,!1),s=this.findEditPositionFrom(s-1,!1);this.setString(t,n)}return!0},i.prototype.insertAt=function(t,n,r){typeof r=="undefined"&&(r=new e.wijInputResult);if(t===undefined)throw"InsertAt: input";return this.noMask?(this.testString=this.testString.substring(0,n)+t+this.testString.substring(n,this.testString.length),r.testPosition=n+t.length-1,!0):n>=0&&n<this.testString.length?this.internalInsertAt(t,n,r,!1):(r.testPosition=n,r.hint=r.positionOutOfRange,!1)},i.prototype.clear=function(e){if(this.noMask){this.testString="",e.hint=e.success;return}if(!this.assignedCharCount)e.hint=e.noEffect;else{e.hint=e.success;for(var t=0;t<this.testString.length;t++)this.resetChar(t)}},i.prototype.isLiteral=function(e){return e?e.charType!==n.literal?e.charType===n.separator:!0:!1},i.prototype.testEscapeChar=function(e,t,n){return t=t<0?0:t,n||(n=this.descriptors[t]),this.isLiteral(n)?this.getSkipLiterals()?e===this.testString.charAt(t):!1:!!this.getResetOnPrompt()&&e===this.getPromtChar()||!!this.getResetOnSpace()&&e===" "?!0:!1},i.prototype.testChar=function(e,n,r){if(!t.wij.charValidator.isPrintableChar(e))return r.hint=r.invalidInput,!1;var i=this.descriptors[n];if(!i)return!1;if(this.isLiteral(i))return this.getSkipLiterals()&&e===this.testString.charAt(n)?(r.hint=r.characterEscaped,!0):(r.hint=r.nonEditPosition,!1);if(e===this.getPromtChar()){if(this.getResetOnPrompt())return this.isEditDesc(i)&&i.isAssigned?r.hint=r.sideEffect:r.hint=r.characterEscaped,!0;if(!this.getAllowPromptAsInput())return r.hint=r.promptCharNotAllowed,!1}if(e===" "&&this.getResetOnSpace())return this.isEditDesc(i)&&i.isAssigned?r.hint=r.sideEffect:r.hint=r.characterEscaped,!0;switch(this.mask.charAt(i.maskPosition)){case"L":if(!t.wij.charValidator.isLetter(e))return r.hint=r.letterExpected,!1;if(!t.wij.charValidator.isAsciiLetter(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"a":if(!t.wij.charValidator.isAlphanumeric(e)&&e!==" ")return r.hint=r.alphanumericCharacterExpected,!1;if(!t.wij.charValidator.isAciiAlphanumeric(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"?":if(!t.wij.charValidator.isLetter(e)&&e!==" ")return r.hint=r.letterExpected,!1;if(t.wij.charValidator.isAsciiLetter(e)||!this.asciiOnly)break;return r.hint=r.asciiCharacterExpected,!1;case"A":if(!t.wij.charValidator.isAlphanumeric(e))return r.hint=r.alphanumericCharacterExpected,!1;if(t.wij.charValidator.isAciiAlphanumeric(e)||!this.asciiOnly)break;return r.hint=r.asciiCharacterExpected,!1;case"C":if(!t.wij.charValidator.isAscii(e)&&this.asciiOnly&&e!==" ")return r.hint=r.asciiCharacterExpected,!1;break;case"9":if(!t.wij.charValidator.isDigit(e)&&e!==" ")return r.hint=r.digitExpected,!1;break;case"#":if(!t.wij.charValidator.isDigit(e)&&e!=="-"&&e!=="+"&&e!==" ")return r.hint=r.digitExpected,!1;break;case"&":if(!t.wij.charValidator.isAscii(e)&&this.asciiOnly)return r.hint=r.asciiCharacterExpected,!1;break;case"0":if(!t.wij.charValidator.isDigit(e))return r.hint=r.digitExpected,!1}return e===this.testString.charAt(n)&&i.isAssigned?r.hint=r.noEffect:r.hint=r.success,!0},i.prototype._testString=function(t,n,r){r.hint=r.unknown,r.testPosition=n;if(t.length){var i=new e.wijInputResult,s,o;i.testPosition=r.testPosition,i.hint=r.hint;for(s=0;s<t.length;s++){o=t.charAt(s);if(r.testPosition>this.testString.length)return r.hint=r.unavailableEditPosition,!1;if(!this.testEscapeChar(o,r.testPosition)){r.testPosition=this.findEditPositionFrom(r.testPosition,!0);if(r.testPosition===-1)return r.testPosition=this.testString.length,r.hint=r.unavailableEditPosition,!1}if(!this.testChar(o,r.testPosition,i))return r.hint=i.hint,!1;i.hint>r.hint&&(r.hint=i.hint),r.testPosition+=1;if(r.testPosition===this.testString.length)break}r.testPosition-=1}return!0},i.prototype.set=function(t,n){typeof n=="undefined"&&(n=new e.wijInputResult);if(t===undefined)throw"SetFromPos: input parameter is null or undefined.";n.hint=n.unknown,n.testPosition=0;if(!t.length)return this.clear(n),!0;if(this.noMask)return this.testString=t,!0;if(!this.testSetString(t,n.testPosition,n))return!1;var r=this.findAssignedEditPositionFrom(n.testPosition+1,!0);return r!==-1&&this.resetString(r,this.testString.length-1),!0},i.prototype.resetString=function(e,t){if(this.noMask){this.testString="";return}e=this.findAssignedEditPositionFrom(e,!0);if(e!==-1){t=this.findAssignedEditPositionFrom(t,!1);while(e<=t)e=this.findAssignedEditPositionFrom(e,!0),this.resetChar(e),e++}},i.prototype.setString=function(e,t){var n,r;for(n=0;n<e.length;n++){r=e.charAt(n),this.testEscapeChar(r,t)||(t=this.findEditPositionFrom(t,!0));if(t<0||t>=this.testString.length)return;this.setChar(r,t),t++}},i.prototype.testSetString=function(e,t,n){return e.length>this.testString.length&&(e=e.substring(0,this.testString.length)),this._testString(e,t,n)?(this.setString(e,t),!0):!1},i.prototype.toString=function(e,r,i,s,o){var u=this.inputWidget.options.text||"",a,f,l,c,h,p,d,v,m;u=t.trim(u);if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&(u===""||u===this.inputWidget.options.nullText))return this.inputWidget.options.nullText;e=e===undefined?!this.isPassword():e,r=r===undefined?this.getHidePromptOnLeave()?this.inputWidget.isFocused():!0:r,i=i===undefined?!0:i;if(this.noMask){if(!e){a="";for(f=0;f<this.testString.length;f++)a+=this.getPasswordChar();return a}return this.testString}s=s===undefined?0:s,o=o===undefined?this.testString.length:o;if(o<=0)return"";s<0&&(s=0);if(s>=this.testString.length)return"";l=this.testString.length-s,o>l&&(o=l);if((!this.isPassword()||e)&&r&&i)return c=this.testString.substring(s,o-s),c;h="",p=s+o-1;for(d=s;d<=p;d++){v=this.testString.charAt(d),m=this.descriptors[d];switch(m.charType){case n.editOptional:case n.editRequired:if(!m.isAssigned)break;if(!this.isPassword()||e){h+=v;continue}h+=this.getPasswordChar();continue;case n.editRequired|n.editOptional:h+=v;continue;case n.separator:case n.literal:if(!i)continue;h+=v;continue;default:h+=v;continue}if(r){h+=v;continue}h+=" ";continue}return h},i.prototype.isEditDesc=function(e){return this.noMask?!0:e.charType!==n.editRequired?e.charType===n.editOptional:!0},i.prototype.isEditPos=function(e){if(this.noMask)return!0;if(e<0||e>=this.testString.length)return!1;var t=this.descriptors[e];return this.isEditDesc(t)},i.prototype.internalRemoveAt=function(t,n,r,i){typeof i=="undefined"&&(i=!1);if(this.noMask){try{this.testString=this.testString.substring(0,t)+this.testString.substring(n+1,this.testString.length),r.testPosition=t}catch(s){}return!0}var o=new e.wijInputResult,u,a,f,l,c,h,p,d,v,m,g=this.findAssignedEditPositionFrom(this.testString.length-1,!1);f=this.findEditPositionInRange(t,n,!0,0),r.hint=r.noEffect;if(f===-1||f>g)return r.testPosition=t,!0;r.testPosition=t,l=n<g,this.findAssignedEditPositionInRange(t,n,!0)!==-1&&(r.hint=r.success);if(l){c=this.findEditPositionFrom(n+1,!0),h=c,t=f,p=!0;while(p){p=!1,u=this.testString.charAt(c),d=this.descriptors[c];if((u!==this.getPromtChar()||d.isAssigned)&&!this.testChar(u,f,o))return r.hint=o.hint,r.testPosition=f,!1;if(c!==g){c=this.findEditPositionFrom(c+1,!0),f=this.findEditPositionFrom(f+1,!0),p=!0;continue}}r.sideEffect>r.hint&&(r.hint=r.sideEffect);if(i)return!0;c=h,f=t,v=!0;while(v){v=!1,a=this.testString.charAt(c),m=this.descriptors[c],a===this.getPromtChar()&&!m.isAssigned?this.resetChar(f):(this.setChar(a,f),this.resetChar(c));if(c!==g){c=this.findEditPositionFrom(c+1,!0),f=this.findEditPositionFrom(f+1,!0),v=!0;continue}}t=f+1}return t<=n&&this.resetString(t,n),!0},i.prototype.removeAt=function(t,n,r){typeof n=="undefined"&&(n=t),typeof r=="undefined"&&(r=new e.wijInputResult);if(n>=this.testString.length)return r.testPosition=n,r.hint=r.positionOutOfRange,!1;if(t>=0&&t<=n){var i=this.internalRemoveAt(t,n,r,!1);return i}return r.testPosition=t,r.hint=r.positionOutOfRange,!1},i}(e.wijTextProvider);e.wijMaskedTextProvider=s;var o=function(){function e(e,t){this.maskPos=e,this.charType=t,this.caseConversion="none",this.isAssigned=!1,this.maskPosition=0,this.maskPosition=e,this.charType=t}return e}();e.wijCharDescriptor=o})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype._createTextProvider=function(){this._textProvider=new i(this,this.options.type),this._textProvider._nullvalue=this.element.val()===""&&this.options.value===null},r.prototype._beginUpdate=function(){var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||0})},r.prototype._setOption=function(e,t){n.prototype._setOption.call(this,e,t);switch(e){case"minValue":this.element.attr("aria-valuemin",t),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",t),this._updateText();break;case"value":this.setValue(t),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._textProvider.updateStringFormat(),this._updateText()}},r.prototype._setData=function(e){this.setValue(e)},r.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===undefined||e===null){e=this.element.data("elementValue");if(e===undefined||e===null&&e==="")e=0}this.setValue(e)},r.prototype._validateData=function(){this._textProvider.checkAndRepairBounds(!0,!1)||this._updateText()},r.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},r.prototype._onChange=function(){},r.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},r.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,e===null||typeof e=="undefined"||isNaN(e)?e=null:typeof e=="boolean"?e=e?"1":"0":typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n="",r;n=this.getText(),this.setText(e),e=e.trim(),r=this.getText().trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},r.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},r.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(this.options.showNullText&&this.isValueNull())return"0";var e=this.options.value?this.options.value:0;return this.options.type==="percent"&&(e=(e/100).toFixed(10)),e.toString()},r.prototype._updateText=function(e){typeof e=="undefined"&&(e=!1);if(!this._isInitialized())return;this._textProvider._nullvalue||(this.options.value=this._textProvider.getValue()),n.prototype._updateText.call(this,e),this._textProvider.checkAndRepairBounds(!1,!1)||this._trigger("valueBoundsExceeded")},r.prototype._doSpin=function(n,r){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var i=this.element.wijtextselection(),s=new e.wijInputResult;return this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevCursorPos",0)),this.element.data("prevCursorPos")===-1?this.element.data("prevCursorPos",i.start):i.start=this.element.data("prevCursorPos"),s.testPosition=i.start,this._textProvider[n?"incEnumPart":"decEnumPart"](i.start,s,this.options.increment),this._updateText(),this.element.data("prevCursorPos",s.testPosition),this.selectText(s.testPosition,s.testPosition),r&&!this.element.data("breakSpinner")&&window.setTimeout(t.proxy(function(){this._doSpin(n,!0)},this),this._calcSpinInterval()),!0},r.prototype._deleteSelText=function(e){typeof e=="undefined"&&(e=!1);var t=this.element.wijtextselection(),r=t.start===0&&t.end===this.element.val().length,i;if(t.start===t.end&&!e){i=this._textProvider._stringFormat._currentText;if(i.charAt(t.end)===this._textProvider.getGroupSeparator()||i.charAt(t.end)===this._textProvider.getDecimalSeparator()){t.start++,t.end++,this.element.wijtextselection(t);return}}n.prototype._deleteSelText.call(this,e);if(r||parseFloat(this.element.val())===0)this._textProvider._nullvalue=!0,this._updateText(!0),this.options.value=null},r}(e.wijinputcore);e.wijinputnumber=n;var r=function(){function t(){this.wijCSS={wijinputnumber:e.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric"},this.type="numeric",this.value=null,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.valueChanged=null,this.valueBoundsExceeded=null}return t}();n.prototype.options=t.extend(!0,{},e.wijinputcore.prototype.options,new r),t.wijmo.registerWidget("wijinputnumber",n.prototype);var i=function(n){function r(e,t){n.call(this),this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=e,this._type=t,this._stringFormat=new s(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture()),this._stringFormat._setValueFromJSFloat(this.getValue())}return __extends(r,n),r.prototype._getCulture=function(){return this.inputWidget._getCulture()},r.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},r.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},r.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e)},r.prototype.toString=function(){return this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this._stringFormat.getFormattedValue()},r.prototype.isValueNull=function(){var e=this.inputWidget.options,t=e.minValue;return null===e.value||undefined===e.value||this._nullvalue},r.prototype.set=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},r.prototype.clear=function(){this._stringFormat.clear()},r.prototype.checkAndRepairBounds=function(e,t){var n=!0,r,i;return typeof e=="undefined"&&(e=!1),r=this.inputWidget.options.minValue,i=this.inputWidget.options.maxValue,typeof t!="undefined"&&t?this._stringFormat.checkMinValue(r,!1,!0):(this._stringFormat.checkMinValue(r,e,!1)||(n=!1),this._stringFormat.checkMaxValue(i,e)||(n=!1),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),n)},r.prototype.countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},r.prototype.getAdjustedPositionFromLeft=function(e){var n=this._stringFormat._currentText,r,i;for(r=0;r<n.length;r++){i=n.charAt(r);if(!(!t.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},r.prototype.getDecimalSeparatorPos=function(){var e=this._stringFormat._currentText;return e.indexOf(this.getDecimalSeparator())},r.prototype.removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this._getCulture().numberFormat.currency.symbol)&&t++;while(e.charAt(t)==="0"&&e.charAt(t+1)!==".")e=e.substr(0,t)+e.substr(t+1);return e},r.prototype.insertAt=function(n,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v;i||(i=new e.wijInputResult),this._nullvalue=!1;if(n.length===1){if(n==="+")return this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1),!0;if(n==="-"||n===")"||n==="(")return this._stringFormat.invertSign(),this.checkAndRepairBounds(!0,!1),i.testPosition=r,this._stringFormat.isNegative()?i.testPosition=r:i.testPosition=r-2,!0;if(!t.wij.charValidator.isDigit(n)){if(n===this.getDecimalSeparator()){o=this.getDecimalSeparatorPos();if(o>=0)return i.testPosition=o,!0}if(n!==this.getGroupSeparator()&&n!==this.getDecimalSeparator()&&n!==")"&&n!=="+"&&n!=="-"&&n!=="("&&n!==this.getDecimalSeparator())return this._type==="percent"&&n===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&n===s.currency.symbol?(i.testPosition=r,!0):!1}}r=this.getAdjustedPositionFromLeft(r),u=r,a=this._stringFormat._currentText,u>a.length&&(u=a.length-1),f=this.removeLeadingZero(a.substring(0,u)),l=a.substring(u,a.length),this._stringFormat.isZero()&&(l=l.replace(/0/,"")),i.testPosition=f.length+n.length-1,this._stringFormat.deFormatValue(f+n+l),c=this._stringFormat._currentText;try{this.inputWidget.options.showGroup?(h=this.countSubstring(f,this._stringFormat._groupSeparator),p=this.countSubstring(c.substring(0,f.length+n.length),this._stringFormat._groupSeparator),i.testPosition+=p-h):n.length===1&&(d=f.charAt(f.length-1),v=c.charAt(i.testPosition-1),v!==d&&i.testPosition--)}catch(m){}return!0},r.prototype.removeAt=function(t,n,r,i){typeof r=="undefined"&&(r=new e.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=t;try{o=this._stringFormat._currentText;if(t===n&&o.substring(t,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,t),a=u,f=o.slice(t,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a),a=this._stringFormat._currentText,this._nullvalue=!1;if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this.countSubstring(u,this._stringFormat._groupSeparator),c=this.countSubstring(a.substring(0,Math.max(0,t-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(s.currency.symbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},r.prototype.incEnumPart=function(t,n,r){return n||(n=new e.wijInputResult),this._stringFormat.increment(r),this._nullvalue=!1,this.checkAndRepairBounds(!0,!1)},r.prototype.decEnumPart=function(t,n,r){return n||(n=new e.wijInputResult),this._stringFormat.decrement(r),this._nullvalue=!1,this.checkAndRepairBounds(!0,!1)},r.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},r.prototype.setValue=function(e){try{return e===null?(this._nullvalue=!0,e=0):this._nullvalue=!1,this._stringFormat._setValueFromJSFloat(e),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},r.prototype.updateStringFormat=function(){var e="0";typeof this._stringFormat!="undefined"&&(e=this._stringFormat._currentValueInString),this._stringFormat=new s(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture()),this._stringFormat._currentValueInString=e},r}(e.wijTextProvider);e.wijNumberTextProvider=i;var s=function(){function e(e,t,n,r){this.type=e,this.digitsPlaces=t,this.showGroup=n,this.culture=r,this._currentValueInString="0",this._currentText="0",this._groupSeparator=" "}return e.prototype.decimalSeparator=function(){return this.culture.numberFormat["."]},e.prototype.isNegtive=function(e){return e.indexOf("-")!==-1||e.indexOf("(")!==-1},e.prototype.stripValue=function(e){var t=this.culture.numberFormat,n=t[this.type]||t,r=this.isNegtive(e),i=n[","],s=n["."],o=new RegExp("["+i+t.percent.symbol+t.currency.symbol+" ]","g"),u;return this._groupSeparator=i,e=this._removeNegativeSign(e),e=e.replace(o,""),e=e.replace(s,"."),u=/([\d\.])+/.exec(e),u&&(e=u[0]),r&&(e="-"+e),e},e.prototype.tryParseValue=function(e){try{var t=parseFloat(this.stripValue(e));return isNaN(t)&&(t=null),t}catch(n){return null}},e.prototype.deFormatValue=function(e){e=this.stripValue(e),this._currentValueInString=e,this._currentText=this.formatValue(e)},e.prototype.formatValue=function(e){var t=this.culture.numberFormat,n=t[this.type]||t,r=this.digitsPlaces,i=this.isNegtive(e),s=n.pattern[i?0:1]||"n",o=n[","],u=n["."],a=r!==-2?r:n.decimals,f=this.showGroup?n.groupSizes:[0],l;return e=this._removeLeadingZero(e),l=this.formatDigit(e,o,u,a,f),l=this._removeLeadingZero(l),l.indexOf(u)===0&&(l="0"+l),l===""&&(l="0"),this._currentValueInString=e,this._currentText=this.applyFormatPattern(s,l,t.percent.symbol,t.currency.symbol),this._currentText},e.prototype.getFormattedValue=function(){return this.formatValue(this._currentValueInString)},e.prototype.getJSFloatValue=function(){try{return this._currentValueInString===""?0:parseFloat(this._currentValueInString)}catch(e){return Number.NaN}},e.prototype.clear=function(){this._currentValueInString="0",this._currentText="0"},e.prototype._setValueFromJSFloat=function(e){var t=""+e;try{return this._currentValueInString=t,this.formatValue(t),!0}catch(n){return!1}},e.prototype.isZero=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=this._removeNegativeSign(e),n;return t?(n=parseFloat(t),!isNaN(n)&&!n):!0},e.prototype.setPositiveSign=function(){this._currentValueInString=this._removeNegativeSign(this._currentValueInString)},e.prototype._removeNegativeSign=function(e){return e.replace(/[()\-]/g,"")},e.prototype._removeLeadingZero=function(e){return e.replace(/^0+/,"")},e.prototype.isNegative=function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},e.prototype.invertSign=function(){var e=this.isNegative();e?this.setPositiveSign():this._currentValueInString=this._currentValueInString.length?"-"+this._currentValueInString:"0",this.isZero()&&(this._currentValueInString=e?"0":"-0"),this.formatValue(this._currentValueInString)},e.prototype.parseNumber=function(e){typeof e=="undefined"&&(e=this._currentValueInString);var t=e.split(".",2);return{decimal:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0}},e.prototype._change=function(e){var t=this.parseNumber();this._currentValueInString=""+(t.decimal+e)+"."+t.fraction},e.prototype.increment=function(e){typeof e=="undefined"&&(e=1),this._change(e)},e.prototype.decrement=function(e){typeof e=="undefined"&&(e=1),this._change(-e)},e.prototype.checkDigitsLimits=function(e){var t=this._currentValueInString.split("."),n="";if(!t.length||t.length===1&&t[0]==="")return;t.length>1&&(n=t[1]),n=n.substring(0,e);while(n.length<e)n+="0";this._currentValueInString=t[0],n&&(this._currentValueInString+="."+n)},e.prototype.checkMinValue=function(e,t,n){typeof n=="undefined"&&(n=!1);var r=!0,i,s,o,u,a;try{i=this._currentValueInString.split("."),s=parseFloat(i[0]===""||i[0]==="-"?"0":i[0]),o=0,i.length>1&&parseFloat(i[1])>0&&(o=parseFloat("1."+i[1]));if(s<0||i[0]==="-")o*=-1;e=""+e+"",i=e.split("."),u=parseFloat(i[0]),a=0,i.length>1&&parseFloat(i[1])>0&&(a=parseFloat("1."+i[1]));if(s>u)return!0;s<u||n&&s===u&&o<=a?r=!1:s===u&&s<0&&o>a?r=!1:s===u&&s>=0&&o<a&&(r=!1),!r&&t&&(this._currentValueInString=""+e+"")}catch(f){}return r},e.prototype.checkMaxValue=function(e,t){var n=!0,r,i,s,o,u;try{r=this._currentValueInString.split("."),i=parseFloat(r[0]===""||r[0]==="-"?"0":r[0]),s=0,r.length>1&&parseFloat(r[1])>0&&(s=parseFloat("1."+r[1]));if(i<0||r[0]==="-")s*=-1;e=""+e+"",r=e.split("."),o=parseFloat(r[0]),u=0,r.length>1&&parseFloat(r[1])>0&&(u=parseFloat("1."+r[1]));if(i<o)return!0;i>o&&(n=!1),i===o&&i>=0&&s>u&&(n=!1),i===o&&i<0&&s<u&&(n=!1),!n&&t&&(this._currentValueInString=""+e+"")}catch(a){}return n},e.prototype.applyFormatPattern=function(e,t,n,r){return e.replace(/n/g,t).replace(/%/g,n).replace(/\$/g,r)},e.prototype.formatDigit=function(e,t,n,r,i){var s=this._removeNegativeSign(e),o,u,a,f,l,c;o=s.indexOf("."),o===-1&&(o=s.length),u="",a=0,f=0;for(c=s.length-1;c>=0;c--)l=s.charAt(c),c<o&&(u=l+u,f++,f===i[a]*1&&i[a]*1&&c&&(u=t+u,f=0,i.length-1>a&&a++));if(r>0){u+=n;for(c=0;c<r;c++)l="0",c+o+1<s.length&&(l=s.charAt(c+o+1)),u+=l}return r===-1&&o<s.length-1&&(u+=n,u+=s.substr(o+1)),u},e}();e.wijNumberFormat=s})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijlist",i="wijmo-wijlist-item",s=i+"-alternate",o=i+"-selected",u=i+"-first",a=i+"-last",f="wijmo-wijlistitem-active",l="item.wijlist",c=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.removeAll=function(){var e=this;e.items=[],e._refresh()},t.prototype.addItem=function(e,t){var n=this;n._checkData(),t===null||t===undefined?n.items.push(e):n.items&&n.items.splice(t,0,e),n._refresh(),n._trigger("added",null,{item:e,index:t})},t.prototype.removeItem=function(e){var t=this,n;t._checkData(),n=t.indexOf(e),n>=0&&t.removeItemAt(n)},t.prototype.indexOf=function(e){var t=this,n=-1,r=0,i;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e.label&&i.value===e.value){n=r;break}}return n},t.prototype.findIndexByLabel=function(e){var t=this,n=-1,r=0,i;if(e===null||e===undefined)return n;t._checkData();for(r=0;r<t.items.length;r++){i=t.items[r];if(i.label===e){n=r;break}}return n},t.prototype.removeItemAt=function(e){var t=this;t._checkData(),t.items.splice(e,1),t._refresh()},t.prototype._checkData=function(){var e=this;e.items||(e.items=[])},t.prototype._refresh=function(){var e=this;e.renderList(),e.refreshSuperPanel()},t.prototype._setOption=function(t,r){var i=this,s,u=o+" "+i.options.wijCSS.stateActive,a,f,l;e.prototype._setOption.call(this,t,r);if(t==="disabled")i._handleDisabledOption(r,i.element);else if(t==="selectionMode")s=i.selectedItem,s&&(s.selected=!1,s.element&&s.element.removeClass(u),i.selectedItem=undefined),i.selectedItems&&n.each(i.selectedItems,function(e,t){t.selected=!1,t.element.removeClass(u)}),i.selectedItem=[];else if(t==="listItems")f=i._isBind(),f?(l=i._getRenderItems(),i.setItems(l)):i.setItems(r),i.renderList(),i.refreshSuperPanel();else if(t==="dataSource")f=i._isBind(),f&&(l=i._getRenderItems(),i.setItems(l),i.renderList(),i.refreshSuperPanel());else if(t==="autoSize"||t==="maxItemsCount")!i.options.autoSize&&i.element.is(":visible")&&(i._oriHeight!==0?i.element.height(i._oriHeight):(a=i.ul.outerHeight(),i.element.height(a),n(".wijmo-wijsuperpanel-statecontainer",i.element).height(a),n(".wijmo-wijsuperpanel-contentwrapper",i.element).height(a))),i.refreshSuperPanel()},t.prototype._create=function(){var e=this,t=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist",o;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._oriHeight=parseInt(t.css("height"),10),t.addClass(s).attr({role:"listbox","aria-activedescendant":f,"aria-multiselectable":r.selectionMode==="multiple"}).bind("click."+e.widgetName,e,e._onListClick),t.is("div")&&t.children().is("ul")&&(e._isInnerData=!0,e._templates=[],n.each(n("ul > li",t),function(t,n){e._templates.push({templateHtml:n.innerHTML})}),e._oriChildren=t.children().hide()),e.ul=n("<ul class='"+i.listul+"'></ul>").appendTo(t),r.listItems!==null&&(o=e._getRenderItems(),o&&(e.setItems(o),e.renderList(),e.refreshSuperPanel())),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refreshSuperPanel(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijlist"),r.disabled&&(e.disable(),e._handleDisabledOption(!0,e.element))},t.prototype._isBind=function(){var e=this.options,t=e.listItems;return t!==null&&t.label&&t.label.bind?!0:!1},t.prototype._getRenderItems=function(){var e=this.options,t=e.listItems;return t!==null?n.isArray(t)&&t.length>0&&typeof t[0].label=="string"?t:t.label&&t.label.bind?this._getMappingItems():null:null},t.prototype._getMappingItems=function(){var e=this.options,t=e.dataSource,r=e.listItems,i,s,o;return!t||!r?null:!r.label||!r.label.bind||!r.value||!r.value.bind?null:(s=r.label.bind,o=r.value.bind,t&&t.length!==0?(i=[],n.each(t,function(e,t){i.push({label:t[s],value:t[o]})}),i):null)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype._createDisabledDiv=function(e){var t=this,r=e||t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return n("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top,"pointer-events":"auto"})},t.prototype.setTemplateItems=function(e){this._setItemsByExtend(e,!0)},t.prototype.setItems=function(e){this._setItemsByExtend(e,!1)},t.prototype._setItemsByExtend=function(e,t){var r=this,i,s=[];n.each(e,function(e,t){s[e]=n.extend(!0,{},t)});if(t){if(r._templates&&s&&s.length!==r._templates.length)return;r.items=s,r.items||(r.items=[]),n.each(r._templates,function(e){r.items[e]?r.items[e].templateHtml=r._templates[e].templateHtml:r.items.push({templateHtml:r._templates[e].templateHtml,label:s[e].label,value:s[e].value})})}else r.items=s;if(!s)return null;i=n.grep(s,function(e){return e.selected},undefined),r.options.selectionMode==="single"?(r.selectedItems=[],r.selectedItem=i.length>0?i[0]:undefined):r.selectedItems=i},t.prototype.filterItems=function(e,t,r,i){var s=this,u=s._escapeRegex(e),a,f=o+" "+s.options.wijCSS.stateActive,l=s.options.wijCSS.priorityPrimary,c,h="",p=!1,d=s.options.wijCSS.listItem,v=null;if(!this.items)return null;n("li[wijhidden]."+d,s.element)&&n("li[wijhidden]."+d,s.element).length>0&&(p=!0),n("span."+l,s.element)&&n("span."+l,s.element).length>0&&(p=!0);if(!p&&(!e||e.length===0)){n.each(this.items,function(e,t){t.selected?(s.activate(null,t,!1),t.element&&t.element.addClass(f),s.selectedItem=t):t.element&&t.element.hasAllClasses(f)&&t.element.removeClass(f)});return}return a=new RegExp(u,"i"),n.each(this.items,function(e,i){c=i.label,i.templateHtml?c=i.templateHtml:i.text!==undefined&&(c=i.text),n("span."+l,i.element).length>0&&i.element.empty().append(c);var o=a.exec(i.label);o===null&&t?i.element&&(i.element.hide(),i.element.attr("wijhidden","wijhidden")):(i.selected?(s.activate(null,i,!1),i.element&&i.element.addClass(f),s.selectedItem=i):i.element&&i.element.hasAllClasses(f)&&i.element.removeClass(f),r&&(h=c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+u+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class='"+l+"'>$1</span>"),i.element&&i.element.html(h)),i.element&&!i.element.is(":visible")&&(i.element.show(),i.element.removeAttr("wijhidden")),u!==undefined&&u.length!==0&&v===null&&o&&o.index===0&&(v=i))}),v},t.prototype.popItem=function(){var e=this;e._checkData(),e.items.pop(),e._refresh()},t.prototype.getList=function(){return this.ul},t.prototype._onListClick=function(e){var t=e.data;if(t.options.disabled)return;if(!n(e.target).closest("."+t.options.wijCSS.listItem).length)return;t.select(e)},t.prototype.destroy=function(){var t=this,n=this.element,r=this.options,i=r.wijCSS,s=i.widget+" "+i.content+" "+i.cornerAll+" wijmo-wijlist";t.superPanel!==undefined&&t.superPanel.destroy(),n.removeClass("wijmo-wijobserver-visibility").removeClass(s).removeAttr("role").removeAttr("aria-activedescendant").unbind("."+t.widgetName),t.ul.remove(),t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),t._isInnerData&&t._oriChildren.show(),e.prototype.destroy.call(this)},t.prototype._getItemByDataItem=function(e){var t;return n.each(this.items,function(n,r){if(e.label===r.label&&e.value===r.value)return t=r,!1}),t},t.prototype.activate=function(e,t,n){var r=this,i,s;r.deactivate();if(t===null||t===undefined)return;if(r._trigger("focusing",e,t)===!1)return;i=r.active=r._getItemByDataItem(t),s=i&&i.element,s&&(r.options.addHoverItemClass&&s.addClass(r.options.wijCSS.stateHover),s.attr("id",f)),n&&r.superPanel!==undefined&&r.superPanel.scrollChildIntoView(s),r.element.is(":visible")&&r._trigger("focus",e,t)},t.prototype.deactivate=function(){var e=this,t=e.active,n;if(!t)return;n=t.element,e._trigger("blur",null,t),n&&n.removeClass(e.options.wijCSS.stateHover).removeAttr("id"),e.active=undefined},t.prototype.next=function(e){this.move("next","."+this.options.wijCSS.listItem+":first",e)},t.prototype.nextPage=function(){this.superPanel.doScrolling("bottom",!0)},t.prototype.previous=function(e){this.move("prev","."+this.options.wijCSS.listItem+":last",e)},t.prototype.previousPage=function(){this.superPanel.doScrolling("top",!0)},t.prototype.first=function(){return this.active&&!this.active.element.prev().length},t.prototype.last=function(){return this.active&&!this.active.element.next().length},t.prototype.move=function(e,t,n){var r=this,i,s;if(!r.active){i=r.ul.children(":visible"+t).data(l),r.activate(n,i,!0);return}s=r.active.element[e+"All"](":visible."+r.options.wijCSS.listItem).eq(0),s.length?r.activate(n,s.data(l),!0):r.activate(n,r.element.children(t).data(l),!0)},t.prototype.select=function(e,t){var r=this,i,s,u=o+" "+r.options.wijCSS.stateActive,a,f,c;if(!r.active){r.active=n(n(e.target).closest("."+r.options.wijCSS.listItem)).data(l);if(!r.active)return}i=r.active.element;if(i===undefined||i.attr("wijhidden"))return;a=i.data(l);if(!a)return;f=r.options.selectionMode==="single",f?(c=r.selectedItem,i.addClass(u).attr("aria-selected","true"),a.selected=!0,c!==undefined&&a!==c&&(c.selected=!1,c.element&&c.element.removeClass(u).removeAttr("aria-selected")),r.selectedItem=a,s=n.inArray(a,r.items),r._trigger("selected",e,{item:a,previousItem:c,selectedIndex:s,data:t})):(a.selected=!a.selected,a.selected?i.addClass(u).attr("aria-selected","true"):i.removeClass(u).removeClass("wijmo-wijcombobox-selecteditem").removeAttr("aria-selected","true"),s=[],r.selectedItems=n.grep(r.items,function(e,t){return e.selected&&s.push(t),e.selected===!0},undefined),r._trigger("selected",e,{selectedIndex:s,item:a,selectedItems:r.selectedItems}))},t.prototype._findItemsByValues=function(e){var t,r=[];return r=n.grep(this.items,function(n,r){t=!1;for(var i=0;i<e.length;i++)n.value===e[i]&&(t=!0);return t},undefined),r},t.prototype._findItemsByIndices=function(e){var t=this,r=this.items.length,i=[];return n.each(e,function(e,n){n>=0&&n<r&&i.push(t.items[n])}),i},t.prototype.getItems=function(e,t){var r=this,i,s,o,u;s=n.isArray(e),i=!s&&typeof e=="number"||s&&typeof e[0]=="number",o=s?e:[e];if(!t)u=r._findItemsByValues(o);else{if(!i)return null;u=r._findItemsByIndices(o)}return u},t.prototype.selectItems=function(e,t,r){var i=this,s=this.options.selectionMode==="single",u=o+" "+i.options.wijCSS.stateActive,a,f,l;l=i.getItems(e,r),s?(l.length>0&&(a=l[0],a.selected=!0,a.element.addClass(u)),f=i.selectedItem,f&&(f.selected=!1,f.element.removeClass(u)),i.selectedItem=a,t&&i._trigger("selected",null,{item:a,previousItem:f})):(n.each(l,function(e,t){t.selected=!0,t.element.addClass(u)}),i.selectedItems=n.grep(i.items,function(e){return e.selected},undefined),t&&i._trigger("selected",null,{selectedItems:i.selectedItems}))},t.prototype.unselectItems=function(e){var t=this,r=this.options.selectionMode,i=o+" "+t.options.wijCSS.stateActive,s,u;if(r==="single")s=t.selectedItem,s&&(s.selected=!1,s.element.removeClass(i),t.selectedItem=undefined);else{u=t.getItems(e,!0);if(!u||u.length===0)return;n.each(u,function(e,t){t.selected=!1,t.element.removeClass(i).removeClass("wijmo-wijcombobox-selecteditem")}),t.selectedItems=n.grep(t.items,function(e){return e.selected},undefined)}},t.prototype.renderList=function(){var e=this,t=this.ul,n=this.options,r,i,s,o,f;t.empty(),r=e.items;if(r===undefined||r===null)return;i=r.length;if(i===0)return;s=n.selectionMode==="single";for(o=0;o<i;o++)f=r[o],e._renderItem(t,f,o,s);i>0&&(r[0].element&&r[0].element.addClass(u),r[i-1].element&&r[i-1].element.addClass(a)),e._trigger("listRendered",null,e)},t.prototype._renderItem=function(e,t,r,i){var u=this,a=n("<li role='option' class='"+u.options.wijCSS.listItem+" "+u.options.wijCSS.cornerAll+"'></li>"),f=o+" "+u.options.wijCSS.stateActive,c,h;t.element=a,t.list=u;if(u._trigger("itemRendering",null,t)===!1)return;return c=t.label,t.title&&a.attr("title",t.title),t.templateHtml?c=t.templateHtml:t.text!==undefined&&(c=t.text),a.bind("mouseover",function(e){if(u.options.disabled)return;u.activate(e,t,!1)}).bind("mouseout",function(){if(u.options.disabled)return;u.options.keepHightlightOnMouseLeave||u.deactivate()}).data(l,t),t.templateHtml?a.append(c):a.text(c),a.appendTo(e),u._isInnerData||(h=t.imageUrl,h!==undefined&&h.length>0&&a.prepend("<img src='"+t.imageUrl+"'>")),t.selected&&(u.activate(null,t,!1),a.addClass(f)),r%2===1&&a.addClass(s),u._trigger("itemRendered",null,t),a},t.prototype._escapeRegex=function(e){return e===undefined?e:e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},t.prototype.adjustOptions=function(){var e=this.options,t;if(e.data!==null)for(t=0;t<e.listItems.length;t++)delete e.listItems[t].element,delete e.listItems[t].list;return e},t.prototype.refreshSuperPanel=function(){var e=this,t=this.element,r=this.options,i=this.ul,s=i.children("."+e.options.wijCSS.listItem+":first"),o,u,a,f=t.find(".wijmo-wijsuperpanel-header"),l=t.find(".wijmo-wijsuperpanel-footer"),c=null,h,p,d,v,m,g,y;if(!t.is(":visible"))return!1;u=i.outerHeight(),a=t.innerWidth(),r.autoSize&&(c=s.outerHeight(!0)*r.maxItemsCount),c!==null&&t.height(Math.min(c,u)),h=t.innerHeight(),f.length&&(h-=f.height()),l.length&&(h-=l.height()),p=h/(u-h),m=101*p/(1+p),d=s.outerHeight()/(u-h)*(101-m),e.superPanel===undefined?(g={allowResize:!1,keyboardSupport:!1,bubbleScrollingEvent:!0,hScroller:{scrollBarVisibility:"hidden"},vScroller:{scrollSmallChange:d,scrollLargeChange:m}},n.extend(g,r.superPanelOptions),e.superPanel=t.wijsuperpanel(g).data("wijmoWijsuperpanel"),e.superPanel&&e.superPanel.vNeedScrollBar&&(i.setOutWidth(a-18),e.superPanel.refresh())):(v=e.superPanel.options.vScroller,v.scrollLargeChange=m,v.scrollSmallChange=d,e.superPanel.paintPanel(),e.superPanel.vNeedScrollBar||n.support.isTouchEnabled&&n.support.isTouchEnabled()?(i.setOutWidth(a-18),e.superPanel.refresh()):(i.setOutWidth(t.outerWidth()),o=t.children(".wijmo-wijsuperpanel-header").outerHeight(),o!==null&&o!==undefined&&t.height(u+o),e.superPanel.refresh())),y=i.css("padding-top"),y.length>0?(v=e.superPanel.options.vScroller,v.firstStepChangeFix=e.superPanel.scrollPxToValue(parseFloat(y),"v")):v.firstStepChangeFix=0,i.setOutWidth(i.parent().parent().innerWidth()),r.disabled&&e.disabledDiv&&e.disabledDiv.css("left",t.offset().left).css("top",t.offset().top).css("width",t.outerWidth()).css("height",t.outerHeight())},t}(e.wijmoWidget);t.wijlist=c;var h=function(){function e(){this.wijCSS={listul:"wijmo-wijlist-ul",listItem:"wijmo-wijlist-item"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-up-b",stateActive:"ui-btn-down-b"},this.initSelector=":jqmData(role='wijlist')",this.dataSource=null,this.listItems=[],this.selected=null,this.selectionMode="single",this.autoSize=!1,this.maxItemsCount=5,this.addHoverItemClass=!0,this.superPanelOptions=null,this.disabled=!1,this.focusing=null,this.focus=null,this.blur=null,this.itemRendering=null,this.itemRendered=null,this.listRendered=null,this.added=null,this.keepHightlightOnMouseLeave=!1}return e}();c.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new h),n.wijmo.registerWidget("wijlist",c.prototype)})(e.list||(e.list={}));var t=e.list})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n};$.fn.extend({getBounds:function(){return $.extend({},$(this).offset(),{width:$(this).outerWidth(!0),height:$(this).outerHeight(!0)})},setBounds:function(e){return $(this).css({left:e.left,top:e.top}).width(e.width).height(e.height),this},getMaxZIndex:function(){var e=($(this).css("z-index")=="auto"?0:$(this).css("z-index"))*1;return $(this).siblings().each(function(t,n){e=Math.max(e,($(n).css("z-index")=="auto"?0:$(n).css("z-index"))*1)}),Math.max(e,$(this).zIndex())}});var wijmo;(function(e){(function(t){var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._init=function(){this.elementZIndex=this.element.zIndex();if(!!this.options.ensureOutermost){var e=$("form");e.length===0&&(e=$(document.body)),this.element.appendTo(e)}this.element.data("visible.wijpopup",!1),this.element.css("position","absolute"),this.element.position({of:$(document.body)}),this.element.hide()},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);if(t==="autoHide"){var r=this.isVisible();this.hide(),r&&this.show()}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.isVisible()&&this.hide();if($.browser.msie&&parseInt($.browser.version)<7){var t=this.element.data("backframe.wijpopup");t||t.remove()}var n=this;this.element.unbind(".wijpopup"),$.each(["visible","backframe","animating","width"],function(e,t){n.element.removeData(t+".wijpopup")})},t.prototype.isVisible=function(){return!!this.element.data("visible.wijpopup")&&this.element.is(":visible")},t.prototype.isAnimating=function(){return!!this.element.data("animating.wijpopup")},t.prototype.show=function(e){var t=this;this._setPosition(e);if(this.isVisible())return;if(this._trigger("showing")===!1)return;this.options.autoHide&&window.setTimeout(function(){$(document).bind("mouseup.wijpopup",$.proxy(t._onDocMouseUp,t))},0);var n=this.options.showEffect||"show",r=this.options.showDuration||300,i=this.options.showOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[n]?this.element.show(n,i,r,$.proxy(this._showCompleted,this)):this.element[n](n==="show"?null:r,$.proxy(this._showCompleted,this)),(!n||!r||n==="show"||r<=0)&&this._showCompleted()},t.prototype._showCompleted=function(){this.element.removeData("animating.wijpopup"),this.element.data("visible.wijpopup",!0),this._trigger("shown")},t.prototype.showAt=function(e,t){this.show({my:"left+"+e+" top+"+t,at:"left top",of:document.body})},t.prototype.hide=function(){if(!this.isVisible())return;if(this._trigger("hiding")===!1)return;$(document).unbind("mouseup.wijpopup");var e=this.options.hideEffect||"hide",t=this.options.hideDuration||300,n=this.options.hideOptions||{};this.element.data("animating.wijpopup",!0),$.effects&&$.effects.effect[e]?this.element.hide(e,n,t,$.proxy(this._hideCompleted,this)):this.element[e](e==="hide"?null:t,$.proxy(this._hideCompleted,this)),(!e||!t||e==="hide"||t<=0)&&this._hideCompleted()},t.prototype._hideCompleted=function(){this.element.data("width.wijpopup")!==undefined&&(this.element.width(this.element.data("width.wijpopup")),this.element.removeData("width.wijpopup")),this.element.unbind("move.wijpopup"),this.element.removeData("animating.wijpopup");if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e&&e.hide()}this._trigger("hidden")},t.prototype._onDocMouseUp=function(e){var t=e.target?e.target:e.srcElement;this.isVisible()&&!!this.options.autoHide&&t!=this.element.get(0)&&$(t).parents().index(this.element)<0&&this.hide()},t.prototype._onMove=function(e){var t=this.element.data("backframe.wijpopup");t&&(this.element.before(t),t.css({top:this.element.css("top"),left:this.element.css("left")}))},t.prototype._addBackgroundIFrame=function(){if($.browser.msie&&parseInt($.browser.version)<7){var e=this.element.data("backframe.wijpopup");e||(e=jQuery("<iframe/>").css({position:"absolute",display:"none",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}).attr({src:"javascript:'<html></html>';",scrolling:"no",frameborder:"0","tabIndex ":-1}),this.element.before(e),this.element.data("backframe.wijpopup",e),this.element.bind("move.wijpopup",$.proxy(this._onMove,this))),e.setBounds(this.element.getBounds()),e.css({display:"block",left:this.element.css("left"),top:this.element.css("top"),"z-index":this.element.css("z-index")-1})}},t.prototype._setZIndex=function(e){this.element.css("z-index",e);var t=this.element.data("backframe.wijpopup");t&&t.css("z-index",this.element.css("z-index")-1)},t.prototype._setPosition=function(e){var t=this.element.is(":visible"),n;this.element.show(),this.element.position($.extend({},this.options.position,e?e:{})),t||this.element.hide(),e&&(n=e.of),n||(n=this.options.position.of),this._addBackgroundIFrame();var r=Math.max(1e3,this.elementZIndex);n&&(r=Math.max(r,$(n).getMaxZIndex())),this._setZIndex(r+10),this._trigger("posChanged")},t}(e.JQueryUIWidget);t.wijpopup=n;var r=function(){function e(){this.ensureOutermost=!1,this.showEffect="show",this.showOptions={},this.showDuration=300,this.hideEffect="hide",this.hideOptions={},this.hideDuration=100,this.autoHide=!1,this.position={at:"left bottom",my:"left top"},this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.posChanged=null}return e}();n.prototype.options=$.extend(!0,{},e.wijmoWidget.prototype.options,new r),$.wijmo.registerWidget("wijpopup",n.prototype)})(e.popup||(e.popup={}));var t=e.popup})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijcalendar",i={general:0,weekEnd:1,otherMonth:2,outOfRange:4,today:8,custom:16,disabled:32,selected:64,gap:128},s=function(e){function t(){e.apply(this,arguments),this._touchRangeSelect=!1}return __extends(t,e),t.prototype._create=function(){var e=this,t=e.options.wijCSS;e._originalStyle=e.element.attr("style"),window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),n.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(this.options),this.element.addClass("wijmo-wijcalendar  "+t.datepickerInline+" "+t.datepicker+" "+t.widget+" "+t.content+" "+t.helperClearFix+" "+t.cornerAll).attr("role","grid"),this._previewWrapper(this.options.allowPreview),this.element.data("preview.wijcalendar",!1),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcalendar")},t.prototype._init=function(){if(this.options.popupMode){var e={autoHide:!!this.options.autoHide,showing:undefined,shown:undefined,hiding:undefined,hidden:undefined},t=this;this.options.beforePopup&&(e.showing=this.options.beforePopup),this.options.afterPopup&&(e.shown=this.options.afterPopup),this.options.beforeClose&&(e.hiding=this.options.beforeClose),e.hidden=function(e){t.element.removeData("lastdate.wijcalendar"),t.options.afterClose&&t.options.afterClose.call(e)},this.element.wijpopup(e)}else this.element.removeAttr("style"),this._originalStyle&&this.element.attr("style",this._originalStyle);this._getSelectedDates(),this._getDisabledDates(),this._resetWidth(),this.refresh()},t.prototype.destroy=function(){var t=this.options.wijCSS;e.prototype.destroy.call(this),this.close(),this.element.html(""),this.element.removeClass("wijmo-wijcalendar "+t.datepickerInline+" "+t.datepicker+" "+t.widget+" "+t.content+" "+t.helperClearFix+" "+t.cornerAll+" "+t.datepickerMulti).removeAttr("role");var r=this;n.each(["preview","disableddates","selecteddates","dragging","lastdate","animating"],function(e,t){r.element.removeData(t+".wijcalendar")}),this._previewWrapper(!1)},t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"showWeekDays":case"showWeekNumbers":case"showTitle":case"showOtherMonthDays":case"selectionMode":this.unSelectAll(),this._resetWidth(),this.refresh();break;case"culture":this.refresh();break;case"allowPreview":this._previewWrapper(n),this.refresh();break;case"monthCols":this._myGrid&&(this._myGrid=undefined),this._resetWidth(),this.refresh();break;case"monthRows":this._myGrid&&(this._myGrid=undefined);break;case"autoHide":this.element.wijpopup({autoHide:this.options.autoHide});break;case"selectedDates":this._getSelectedDates().setDates(n),this.refresh();break;case"disabledDates":this._getDisabledDates().setDates(n),this.refresh();break;case"displayDate":this.refresh();break;case"allowQuickPick":this._myGrid&&(this._myGrid=undefined),this.refresh()}},t.prototype._previewWrapper=function(e){e?this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")||this.element.wrap("<div class='wijmo-wijcalendar-preview-wrapper "+this.options.wijCSS.helperClearFix+"'></div>"):this.element.parent().hasClass("wijmo-wijcalendar-preview-wrapper")&&this.element.unwrap()},t.prototype._isRTL=function(){return!!this._getCulture(null).isRTL},t.prototype.refresh=function(){this.element.empty().append(this._createCalendar()),this.element[(this._isRTL()?"add":"remove")+"Class"](this.options.wijCSS.datepickerRtl),this.options.showTitle?this.element.removeClass("wijmo-wijcalendar-notitle"):this.element.addClass("wijmo-wijcalendar-notitle"),this._bindEvents()},t.prototype.refreshDate=function(e){if(!this._monthViews)return;if(e<this._groupStartDate||e>this._groupEndDate)return;n.each(this._monthViews,function(){this._refreshDate(e)})},t.prototype.getDisplayDate=function(){var e=this.options.displayDate?this.options.displayDate:new Date;return a.isSameDate(e,new Date(1900,0,1))&&(e=new Date),e},t.prototype.getSelectedDate=function(){var e=this.options.selectedDates;return!e||e.length===0?null:e[0]},t.prototype.selectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().add(e),this.refreshDate(e),!0)},t.prototype.unSelectDate=function(e){return e=new Date(e),this._getDisabledDates().contains(e)?!1:e<this.options.minDate||e>this.options.maxDate?!1:(this._getSelectedDates().remove(e),this.refreshDate(e),!0)},t.prototype.unSelectAll=function(){var e=this.options.selectedDates,t;if(e&&e.length>0){this._getSelectedDates().clear();for(t=0;t<e.length;t++)this.refreshDate(e[t])}},t.prototype._slideToDate=function(e){if(a.isSameMonth(this.getDisplayDate(),e))return;var t=this.element.is(":visible");if(!t)this.options.displayDate=e;else{if(this._trigger("beforeSlide")===!1)return;this._isSingleMonth()?this._playSlideAnimation(e):this._playMmSlideAnimation(e)}},t.prototype.isPopupShowing=function(){return this.options.popupMode?this.element.wijpopup("isVisible"):!1},t.prototype.popup=function(e){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("show",e)},t.prototype.popupAt=function(e,t){this._myGrid=undefined,this.refresh(),this.element.data("dragging.wijcalendar",!1),this.element.data("wijmoWijpopup")&&this.element.wijpopup("showAt",e,t)},t.prototype.close=function(){this.isPopupShowing()&&this.element.wijpopup("hide")},t.prototype._getCulture=function(e){return Globalize.findClosestCulture(e||this.options.culture)},t.prototype._getDates=function(e){var t=e.toLowerCase()+".wijcalendar",n=this.element.data(t);return n===undefined&&(n=new l(this,e),this.element.data(t,n)),n},t.prototype._getDisabledDates=function(){return this._getDates("disabledDates")},t.prototype._getSelectedDates=function(){return this._getDates("selectedDates")},t.prototype._onDayDragStart=function(e){return e.preventDefault(),e.stopPropagation(),!1},t.prototype._onDayMouseDown=function(e){e.preventDefault(),e.stopPropagation();var t=this.options,r=this,i,s,o=!1,u=t.selectedDates,a=!1,f=[];if(e.which!==1)return e.which===0&&this._onTouchstart(e),!1;if(n.browser.msie&&parseFloat(n.browser.version)>=10)if(e.originalEvent.pointerType){if(e.originalEvent.pointerType===2||e.originalEvent.pointerType==="touch")return this._onTouchstart(e),!1}else if(e.originalEvent.originalEvent.pointerType)if(e.originalEvent.originalEvent.pointerType===2||e.originalEvent.originalEvent.pointerType==="touch")return this._onTouchstart(e),!1;return i=this._getCellDate(e.currentTarget),i===undefined?!1:t.selectionMode.day?(s={date:i},this._trigger("beforeSelect",null,s)===!1?!1:((!t.selectionMode.days||!e.metaKey&&!e.shiftKey&&!e.ctrlKey)&&this.unSelectAll(),!t.selectionMode.days||(e.shiftKey&&this.element.data("lastdate.wijcalendar")?(this._selectRange(this.element.data("lastdate.wijcalendar"),i,null),o=!0):e.ctrlKey&&(this.element.data("lastdate.wijcalendar",i),n.each(u,function(e,t){if(i.getFullYear()===t.getFullYear()&&i.getMonth()===t.getMonth()&&i.getDate()===t.getDate())return a=!0,!1}),a?this.unSelectDate(i):this.selectDate(i),u=t.selectedDates,n.each(u,function(e,t){f.push(new Date(t))}),this._trigger("selectedDatesChanged",null,{dates:f}),o=!0)),o||(this.element.data("lastdate.wijcalendar",i),o=this.selectDate(i),this._trigger("selectedDatesChanged",null,{dates:[i]})),o&&(this._trigger("afterSelect",null,s),!t.selectionMode.days||(this.element.data("dragging.wijcalendar",!0),n(document.body).bind("mouseup."+this.widgetName,function(){n(document.body).unbind("mouseup."+r.widgetName),r.element.data("dragging.wijcalendar",!1)}))),!1)):!1},t.prototype._onMouseUp=function(e){return e.preventDefault(),e.stopPropagation(),this.element.data("dragging.wijcalendar",!1),!1},t.prototype._onDayClicked=function(e){var t=this._getCellDate(e.currentTarget);return t===undefined?!1:this.options.selectionMode.day?(this.isPopupShowing()?this.close():n(e.currentTarget).hasAllClasses(this.options.wijCSS.datepickerOtherMonth)&&this._slideToDate(t),!1):!1},t.prototype._onDayMouseEnter=function(e){n(e.currentTarget).attr("state","hover"),this._refreshDayCell(e.currentTarget);if(!!this.element.data("dragging.wijcalendar")){var t=this._getCellDate(e.currentTarget);if(t===undefined)return;this.unSelectAll(),this._selectRange(this.element.data("lastdate.wijcalendar"),t,!0)}},t.prototype._onDayMouseLeave=function(e){n(e.currentTarget).attr("state","normal"),this._refreshDayCell(e.currentTarget)},t.prototype._onTouchstart=function(e){this._touchStartTime=new Date},t.prototype._onTouchend=function(e){e.preventDefault(),e.stopPropagation();var t=new Date,r=t-this._touchStartTime,i=this.options,s=this,o,u,a=i.selectedDates,f=!1,l=[];this.element.data("dragging.wijcalendar",!1);if(n.browser.msie){if(!(parseFloat(n.browser.version)>=10))return!1;if(e.originalEvent.pointerType){if(e.originalEvent.pointerType!==2&&e.originalEvent.pointerType!=="touch")return!1}else{if(!e.originalEvent.originalEvent.pointerType)return!1;if(e.originalEvent.originalEvent.pointerType!==2&&e.originalEvent.originalEvent.pointerType!=="touch")return!1}}else if(e.which!==0)return!1;return o=this._getCellDate(e.currentTarget),o===undefined?!1:i.selectionMode.day?(u={date:o},this._trigger("beforeSelect",null,u)===!1?!1:(n.each(a,function(e,t){if(o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return f=!0,!1}),!this._touchRangeSelect&&r>=750?(this.element.data("lastdate.wijcalendar",o),f?!i.selectionMode.days||this.unSelectDate(o):(i.selectionMode.days?this._touchRangeSelect=!0:this.unSelectAll(),this.selectDate(o)),a=i.selectedDates,n.each(a,function(e,t){l.push(new Date(t))}),a.length>0&&this._trigger("selectedDatesChanged",null,{dates:l})):(i.selectionMode.days||(this.unSelectAll(),this._touchRangeSelect=!1),this._touchRangeSelect?(r>=750&&(!i.selectionMode.days||(this.element.data("lastdate.wijcalendar",o),f?(this.unSelectDate(o),this._touchRangeSelect=!1):this.selectDate(o),a=i.selectedDates,n.each(a,function(e,t){l.push(new Date(t))}),this._trigger("selectedDatesChanged",null,{dates:l}))),r<750&&this.element.data("lastdate.wijcalendar")&&(this._selectRange(this.element.data("lastdate.wijcalendar"),o,null),this._touchRangeSelect&&(this._touchRangeSelect=!1))):(this.unSelectAll(),this.element.data("lastdate.wijcalendar",o),this.selectDate(o),this._trigger("selectedDatesChanged",null,{dates:[o]}))),this._trigger("afterSelect",null,u),this._touchStartTime=null,!1)):!1},t.prototype._selectRange=function(e,t,n){if(e!==undefined&&e!==new Date(1900,1,1)){var r=e,i=t,s=[];e>t&&(i=e,r=t);for(;;){if(r>i)break;this.selectDate(r),s[s.length]=r,r=a.addDays(r,1)}n||this.element.removeData("lastdate.wijcalendar"),this._trigger("selectedDatesChanged",null,{dates:s})}else this.selectDate(e),this._trigger("selectedDatesChanged",null,{dates:[e]});return!0},t.prototype._getCellDate=function(e){var t=n(e).attr("date");return t===undefined?t:new Date(t)},t.prototype._getParentTable=function(e){var t=n(e).parents("table");return t.length===0?undefined:t.get(0)},t.prototype._initMonthSelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s=[],o,u,a,f,l;if(t[t.length-1]!=="ms")throw Error.create("not a monthview");r=t.slice(0,t.length-1).join("_"),i=this._getParentTable(e);if(i){if(i.id!==r)throw Error.create("not a monthview");for(o=0;o<i.rows.length;o++){l=i.rows[o];for(u=0;u<l.cells.length;u++)a=l.cells[u],a&&(f=n(a).attr("daytype"),f!==undefined&&n(a).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(f,10))&&(s[s.length]=a))}}n(e).data("cells",s)},t.prototype._onMonthSelectorClicked=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.element.removeData("lastdate.wijcalendar"),this.unSelectAll();for(i=0;i<t.length;i++)s=t[i],o=n(s).attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onMonthSelectorMouseEnter=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onMonthSelectorMouseLeave=function(e){this._initMonthSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._initWeekDaySelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s,o=[],u=0,a,f,l;if(t[t.length-2]!=="cs")throw Error.create("not a column");r=parseInt(t[t.length-1],10),i=t.slice(0,t.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a column");this.options.showWeekDays&&u++;for(;u<s.rows.length;u++)a=s.rows[u],r<a.cells.length&&(f=a.cells[r],f&&(l=n(f).attr("daytype"),l!==undefined&&n(f).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f)))}n(e).data("cells",o)},t.prototype._onWeekDayClicked=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<t.length;i++)s=n(t[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onWeekDayMouseEnter=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onWeekDayMouseLeave=function(e){this._initWeekDaySelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._initWeekNumberSelector=function(e){if(n(e).data("cells")!==undefined)return;var t=e.id.split("_"),r,i,s,o=[],u,a,f,l;if(t[t.length-2]!=="rs")throw Error.create("not a row");r=parseInt(t[t.length-1],10),i=t.slice(0,t.length-2).join("_"),s=this._getParentTable(e);if(s){if(s.id!==i)throw Error.create("not a row");u=s.rows[r];if(u){a=0,this.options.showWeekNumbers&&a++;for(;a<u.cells.length;a++)f=u.cells[a],f&&(l=n(f).attr("daytype"),l!==undefined&&n(f).find("a").hasAllClasses(this.options.wijCSS.prioritySecondary)===!1&&this._isSelectable(parseInt(l,10))&&(o[o.length]=f))}}n(e).data("cells",o)},t.prototype._onWeekNumberClicked=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r=[],i,s,o,u;this.unSelectAll();for(i=0;i<t.length;i++)s=n(t[i]),o=s.attr("date"),o!==undefined&&(u=new Date(o),this.selectDate(u),r[r.length]=u);return this._trigger("selectedDatesChanged",null,{dates:r}),this.isPopupShowing()&&this.close(),!1},t.prototype._onWeekNumberMouseEnter=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseEnter(e)},t.prototype._onWeekNumberMouseLeave=function(e){this._initWeekNumberSelector(e.currentTarget);var t=n(e.currentTarget).data("cells"),r;for(r=0;r<t.length;r++)e.currentTarget=t[r],this._onDayMouseLeave(e)},t.prototype._isAnimating=function(){return!!this.element.data("animating.wijcalendar")},t.prototype._onPreviewMouseEnter=function(e){if(!!this.element.data("previewContainer"))return;if(this._isAnimating())return;var t=n(e.currentTarget),r=t.attr("id"),i=this.getDisplayDate(),s=this.options.wijCSS,o=this.options.monthCols*this.options.monthRows,u=n("<div/>");if(r===undefined)return;r==="prevPreview"&&(o=-o),this.options.displayDate=a.addMonths(i,o),this.element.data("preview.wijcalendar",!0),u.appendTo(document.body),u.hide(),u.addClass("wijmo-wijcalendar "+s.datepickerInline+" "+s.datepicker+" "+s.widget+" "+s.content+" "+s.helperClearFix+" "+s.cornerAll),u.append(this._createCalendar()),this.options.displayDate=i,this.element.data("preview.wijcalendar",!1),this._createMonthViews(),u.wijpopup({showEffect:"slide",showOptions:{direction:r==="prevPreview"?"right":"left"},hideEffect:"slide",hideOptions:{direction:r==="prevPreview"?"right":"left"}}),u.wijpopup("show",{my:r==="prevPreview"?"right top":"left top",at:r==="prevPreview"?"left top":"right top",of:t}),this.element.data("previewContainer",u)},t.prototype._onPreviewMouseLeave=function(e){var t=n(e.currentTarget),r=t.attr("id"),i=this.element.data("previewContainer"),s=this;if(r===undefined)return;i&&(i.wijpopup("isAnimating")?window.setTimeout(function(){s._onPreviewMouseLeave(e)},200):(i.wijpopup("hide"),this.element.removeData("previewContainer")))},t.prototype._resetWidth=function(){this._myGrid||(this.element.css("height",""),this.options.monthCols>1?(this.element.css("width",17*this.options.monthCols+"em"),this.element.addClass(this.options.wijCSS.datepickerMulti)):(this.element.css("width",""),this.element.removeClass(this.options.wijCSS.datepickerMulti)))},t.prototype._playMmSlideAnimation=function(e){var t=this.element.width(),r=this.element.height(),i=this.getDisplayDate(),s,o,u,a=this.options.direction||"horizontal",f=this,l,c;this.element.height(r),this.element.wrapInner("<div class='wijmo-wijcalendar-multi-aniwrapper'></div>"),s=this.element.find(">:first-child").width(t).height(r),o=s.clone(!1),o.hide(),this.options.displayDate=e,this._createMonthViews(),o.empty().append(this._createMonthGroup()),o.appendTo(this.element),u=e>i,this.element.data("animating.wijcalendar",!0),n.effects?(s.effect("slide",{mode:"hide",direction:a==="horizontal"?u?"left":"right":u?"up":"down",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){s.remove()}),o.effect("slide",{direction:a==="horizontal"?u?"right":"left":u?"down":"up",easing:this.options.easing||"easeOutBack",duration:this.options.duration},function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")})):(a==="horizontal"?(l={width:0},c={width:"100%"}):(l={height:0},c={height:"100%"}),s.animate(l,this.options.duration,null,function(){s.remove()}),o.animate(c,this.options.duration,null,function(){while(o.parent().is(".wijmo-wijcalendar-multi-aniwrapper"))o.parent().replaceWith(o);o.replaceWith(o.contents()),f.element.height(""),f._bindEvents(),f.element.data("animating.wijcalendar",!1),f._trigger("afterSlide")}))},t.prototype._playSlideAnimation=function(e){if(!this._isSingleMonth())return;var t=this,r=this.getDisplayDate(),i=t.options.wijCSS,s=this.element.find("."+i.datepickerCalendar),o,u,a=1,l=this.options.direction||"horizontal",c=e>r,h=[],p,d,v;s.parent().is(".wijmo-wijcalendar-aniwrapper")?o=s.parent():(o=n.createWrapper(s).css({overflow:"hidden"}),o.removeClass(i.effectsWrapper),o.addClass("wijmo-wijcalendar-aniwrapper")),o.parent().is(".wijmo-wijcalendar-aniwrapper")?u=o.parent():(u=n.createWrapper(o).css({overflow:"hidden"}),u.removeClass(i.effectsWrapper),u.addClass("wijmo-wijcalendar-aniwrapper"));if(this._myGrid)switch(this._myGrid.gridType){case"month":a=1;break;case"year":a=10;break;case"decade":a=100}h[h.length]=e,p=s.outerWidth(),d=s.outerHeight(),l==="horizontal"?(s.width(p).css("float",c?"left":"right"),o.width((h.length+1)*p),o.css("left",c?0:-h.length*p).css("position","absolute")):(o.width(p),o.css("top",c?0:-h.length*d).css("position","absolute"),o.height((h.length+1)*d)),n.each(h,function(e,r){if(t._myGrid===undefined){var i=new f(t,r),s=t._customize(i.getHtml(!0));l==="horizontal"?s.width(p).css("float",c?"left":"right").appendTo(o):s.appendTo(o)}else l==="horizontal"?n(t._myGrid.getHtml(r,!0)).width(p).height(d).css("float",c?"left":"right").appendTo(o):n(t._myGrid.getHtml(r,!0)).height(d).appendTo(o)}),this.options.displayDate=e,this._myGrid===undefined&&this._createMonthViews(),this._refreshTitle(),this.element.data("animating.wijcalendar",!0),n.effects?o.effect("slide",{mode:"hide",direction:l==="horizontal"?c?"left":"right":c?"up":"down",easing:this.options.easing||"easeOutBack",distance:(l==="horizontal"?p:d)*h.length,duration:this.options.duration},function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),t._bindEvents(),t.element.data("animating.wijcalendar",!1),t._trigger("afterSlide")}):(l==="horizontal"?v={width:0}:v={height:0},o.animate(v,this.options.duration,null,function(){s=o.children(":last");while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);s.css({"float":"",width:""}),t._bindEvents(),t.element.data("animating.wijcalendar",!1),t._trigger("afterSlide")}))},t.prototype._onTitleClicked=function(){if(!this.options.allowQuickPick||!this._isSingleMonth())return;if(this._isAnimating())return;if(this._myGrid===undefined)this._myGrid=new c(this);else switch(this._myGrid.gridType){case"month":this._myGrid.gridType="year";break;case"year":this._myGrid.gridType="decade";break;case"decade":return}this._refreshTitle(),this.element.width(this.element.width()).height(this.element.height());var e=this.options.wijCSS,t=this.element.find("."+e.datepickerCalendar),r,i,s,o=t.outerWidth(),u=t.outerHeight(),a,f,l,h,p,d,v=this;t.parent().is(".wijmo-wijcalendar-aniwrapper")?r=t.parent():r=n.createWrapper(t).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper"),r.parent().is(".wijmo-wijcalendar-aniwrapper")?i=r.parent():i=n.createWrapper(r).css({overflow:"hidden"}).removeClass(e.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(o).height(u),s=n(this._myGrid.getHtml(!0)).css({position:"absolute",top:0,left:0,opacity:0}).appendTo(i).height(u),a=this._myGrid.getSelectedIndex(),f=Math.floor(a/4),l=a-f*4,h=o/4,p=u/3,d={left:h*l,top:p*f,width:h,height:p},t.width("100%").height("100%"),r.css({border:"solid 1px #cccccc"}),this.element.data("animating.wijcalendar",!0),n.effects?r.effect("size",{to:d,duration:this.options.duration||500},function(){r.remove()}):r.animate(d,this.options.duration||500,null,function(){r.remove()}),s.animate({opacity:1},this.options.duration||500,null,function(){s.css({position:"",top:"",left:"",filter:""});while(s.parent().is(".wijmo-wijcalendar-aniwrapper"))s.parent().replaceWith(s);v._bindEvents(),v.element.data("animating.wijcalendar",!1)})},t.prototype._onMyGridClicked=function(e){if(this._myGrid===undefined)return!1;if(this._isAnimating())return!1;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10),i=parseInt(t.attr("value"),10),s=this.options.wijCSS,o=this.element.find("."+s.datepickerCalendar),u,a,f,l,c,h,p,d,v,m=this;if(this._myGrid.gridType!=="month")if(!r||r===11)return!1;return t.hasAllClasses(s.stateActive)||this._myGrid.select(r,i),this._myGrid.gridType==="decade"?this._myGrid.gridType="year":this._myGrid.gridType==="year"?this._myGrid.gridType="month":this._myGrid=undefined,this._refreshTitle(),f=o.outerWidth(),l=o.outerHeight(),o.parent().is(".wijmo-wijcalendar-aniwrapper")?a=o.parent():a=n.createWrapper(o).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").width(f).height(l),c=n.extend({},t.position(),{width:t.width(),height:t.height()}),this._myGrid===undefined?(this._createMonthViews(),p=this.getDisplayDate(),d=this._getMonthView(p),h=this._customize(d.getHtml(!0))):h=n(this._myGrid.getHtml(!0)),v=h.height(l).appendTo(a),u=n.createWrapper(v).css({overflow:"hidden"}).removeClass(s.effectsWrapper).addClass("wijmo-wijcalendar-aniwrapper").css(n.extend(c,{border:"solid 1px #cccccc",position:"absolute"})),this.element.data("animating.wijcalendar",!0),u.animate({left:0,top:0,width:f,height:l},this.options.duration||500,null,function(){v.css("width","")}),o.animate({opacity:0},this.options.duration||500,null,function(){o.remove();while(v.parent().is(".wijmo-wijcalendar-aniwrapper"))v.parent().replaceWith(v);m._myGrid===undefined&&m.element.width("").height(""),m._bindEvents(),m.element.data("animating.wijcalendar",!1)}),!1},t.prototype._onMyGridMouseEnter=function(e){if(this._myGrid===undefined)return;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;t.addClass(this.options.wijCSS.stateHover)},t.prototype._onMyGridMouseLeave=function(e){if(this._myGrid===undefined)return;var t=n(e.currentTarget),r=parseInt(t.attr("index"),10);if(this._myGrid.gridType!=="month"&&(r<0||r>11))return;t.removeClass(this.options.wijCSS.stateHover)},t.prototype._bindEvents=function(){var e=this.options.wijCSS;!this.element.data("preview.wijcalendar")&&!this.options.disabledState&&!this.options.disabled&&(this.element.find("div .wijmo-wijcalendar-navbutton").unbind().bind("mouseout.wijcalendar",function(){var t=n(this);t.removeClass(e.stateHover),t.hasAllClasses(e.datepickerNextHover)?t.removeClass(e.datepickerNextHover):t.hasAllClasses(e.datepickerPrevHover)&&t.removeClass(e.datepickerPrevHover)}).bind("mouseover.wijcalendar",function(){var t=n(this);t.addClass(e.stateHover),t.hasAllClasses(e.datepickerNext)?t.addClass(e.datepickerNextHover):t.hasAllClasses(e.datepickerPrev)&&t.addClass(e.datepickerPrevHover)}).bind("click.wijcalendar",n.proxy(this._onNavButtonClicked,this)),this.element.unbind(".wijcalendar").bind({"mouseup.wijcalendar":n.proxy(this._onMouseUp,this)}),this.element.find("."+e.datepickerTitle).unbind().bind("mouseout.wijcalendar",function(){n(this).removeClass(e.stateHover)}).bind("mouseover.wijcalendar",function(){n(this).addClass(e.stateHover)}).bind("click.wijcalendar",n.proxy(this._onTitleClicked,this)),this.element.find(".wijmo-wijcalendar-prevpreview-button, .wijmo-wijcalendar-nextpreview-button").unbind("mouseenter.wijcalendar").unbind("mouseleave.wijcalendar").bind({"mouseenter.wijcalendar":n.proxy(this._onPreviewMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onPreviewMouseLeave,this)}),this._myGrid===undefined?(this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind({"wijclick.wijcalendar":n.proxy(this._onDayClicked,this),"mouseenter.wijcalendar":n.proxy(this._onDayMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onDayMouseLeave,this),"wijmousedown.wijcalendar":n.proxy(this._onDayMouseDown,this),"dragstart.wijcalendar":n.proxy(this._onDayDragStart,this)}),n.support.isTouchEnabled&&n.support.isTouchEnabled()&&(n.browser.msie&&this.element.unbind("contextmenu.wijcalendar").bind({"contextmenu.wijcalendar":function(){return!1}}),this.element.find(".wijmo-wijcalendar-day-selectable").unbind("wijmouseup.wijcalendar").bind({"wijmouseup.wijcalendar":n.proxy(this._onTouchend,this)})),!this.options.selectionMode.month||this.element.find(".wijmo-wijcalendar-monthselector").unbind().bind({"click.wijcalendar":n.proxy(this._onMonthSelectorClicked,this),"mouseenter.wijcalendar":n.proxy(this._onMonthSelectorMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onMonthSelectorMouseLeave,this)}),!this.options.selectionMode.weekDay||this.element.find("."+e.datepickerWeekDay).unbind().bind({"click.wijcalendar":n.proxy(this._onWeekDayClicked,this),"mouseenter.wijcalendar":n.proxy(this._onWeekDayMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onWeekDayMouseLeave,this)}),!this.options.selectionMode.weekNumber||this.element.find(".wijmo-wijcalendar-week-num").unbind().bind({"click.wijcalendar":n.proxy(this._onWeekNumberClicked,this),"mouseenter.wijcalendar":n.proxy(this._onWeekNumberMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onWeekNumberMouseLeave,this)})):this.element.find(".wijmo-wijcalendar-day-selectable").unbind().bind({"click.wijcalendar":n.proxy(this._onMyGridClicked,this),"mouseenter.wijcalendar":n.proxy(this._onMyGridMouseEnter,this),"mouseleave.wijcalendar":n.proxy(this._onMyGridMouseLeave,this)}))},t.prototype._isSelectable=function(e){var t=this.options;return t.showOtherMonthDays&&e&i.otherMonth||!(e&(i.outOfRange|i.disabled|i.otherMonth))},t.prototype._getCellClassName=function(e,t,n){var r=this.options,s="",o=r.wijCSS.stateDefault,u=!!r.selectionMode.day||!!r.selectionMode.days;return n=n||!1,!n&&!r.disabledState&&!r.disabled&&u&&this._isSelectable(e)&&(s+=" wijmo-wijcalendar-day-selectable"),e&i.weekEnd&&(s+=" "+r.wijCSS.datepickerWeekEnd),e&i.otherMonth&&(s+=" "+r.wijCSS.datepickerOtherMonth,o+=" "+r.wijCSS.prioritySecondary),e&i.outOfRange&&(s+=" wijmo-wijcalendar-outofrangeday",o+=" "+r.wijCSS.prioritySecondary),e&i.gap?s+=" wijmo-wijcalendar-gap":(e&i.disabled&&(s+=" "+r.wijCSS.datepickerUnselectable,o+=" "+r.wijCSS.stateDisabled),e&i.today&&(s+=" "+r.wijCSS.datepickerDaysCellOver+" "+r.wijCSS.datepickerToday,o+=" "+r.wijCSS.stateHighlight),e&i.selected&&(e&(i.outOfRange|i.disabled))===0&&(s+=" "+r.wijCSS.datepickerCurrentDay,o+=" "+r.wijCSS.stateActive),e&i.gap&&(s+=" wijmo-wijcalendar-gap"),e&i.custom&&(s+=" wijmo-wijcalendar-customday")),{cssCell:s,cssText:o}},t.prototype._onNavButtonClicked=function(e){if(this._isAnimating())return!1;var t=1,r=n(e.currentTarget).attr("id"),i=this.getDisplayDate(),s=i;if(this._myGrid===undefined)t=r.indexOf("quick")>=0?this.options.quickNavStep:1,t=r.indexOf("next")>=0?t:-t,t=t*this.options.monthRows*this.options.monthCols,s=a.addMonths(i,t);else{t=r.indexOf("next")>=0?1:-1;switch(this._myGrid.gridType){case"month":s=a.addYears(i,t);break;case"year":s=a.addYears(i,t*10);break;case"decade":s=a.addYears(i,t*100)}}return this._slideToDate(s),!1},t.prototype._getMonthGroupHtml=function(){var e=this.getDisplayDate(),t,n,r,i=this.options.wijCSS,s,o;if(this._isSingleMonth())return t=this._getMonthView(e),t.showPreview=this.options.allowPreview&&!this.element.data("preview.wijcalendar"),t.getHtml();n=100/this.options.monthCols+"%",r=new u;for(s=0;s<this.options.monthRows;s++){for(o=0;o<this.options.monthCols;o++)r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerGroup+(o===0?" "+i.datepickerGroupFirst:"")+(o===this.options.monthCols-1?" "+i.datepickerGroupLast:"")),r.writeAttribute("style","width:"+n),r.writeTagRightChar(),t=this._getMonthView(e),t.showPreview=!1,r.write(t.getHtml()),r.writeEndTag("div"),e=a.addMonths(e,1);r.writeBeginTag("div"),r.writeAttribute("class",i.datepickerRowBreak),r.writeTagRightChar(),r.writeEndTag("div")}return r.toString()},t.prototype._getCalendarHtml=function(){this._createMonthViews();var e=new u;return e.write(this._getMonthGroupHtml()),e.toString()},t.prototype._customizeDayCell=function(e){e.attr("state")===undefined&&e.attr("state","normal");if(e.attr("daytype")===undefined)return;if(e.attr("date")===undefined)return;var t=parseInt(e.attr("daytype"),10),n=new Date(e.attr("date")),r=e.attr("state")==="hover";this.options.customizeDate(e,n,t,r)},t.prototype._customize=function(e){var t=this.options,r=this,i=n(e);return n.isFunction(t.customizeDate)?(n.each(i.find(".wijmo-wijcalendar-day-selectable"),function(e,t){r._customizeDayCell(n(t))}),i):i},t.prototype._createCalendar=function(){return this._customize(n(n.parseHTML(this._getCalendarHtml())))},t.prototype._createMonthGroup=function(){return this._customize(n(this._getMonthGroupHtml()))},t.prototype._getMonthID=function(e){return e.getFullYear()+"_"+(e.getMonth()+1)},t.prototype._createMonthViews=function(){this._monthViews={};var e="",t=this.getDisplayDate(),n,r,i,s;for(n=0;n<this.options.monthRows;n++)for(r=0;r<this.options.monthCols;r++)e=this._getMonthID(t),this._monthViews[e]=new f(this,t),n===0&&(r===0&&(this._monthViews[e].isFirst=!0),r===this.options.monthCols-1&&(this._monthViews[e].isLast=!0)),t=a.addMonths(t,1);t=this.getDisplayDate(),e=this._getMonthID(t),i=this._monthViews[e],i&&(this._groupStartDate=i.getStartDate()),s=this.options.monthRows*this.options.monthCols,s>1&&(t=a.addMonths(t,s-1),e=this._getMonthID(t),i=this._monthViews[e]),i&&(this._groupEndDate=i.getEndDate())},t.prototype._getMonthView=function(e){var t=this._getMonthID(e);return this._monthViews[t]},t.prototype._getId=function(){return this.element.attr("id")},t.prototype._getChildElement=function(e){var t=this.element.find("[id*='"+e+"']");return t.length===0?undefined:t},t.prototype._refreshDayCell=function(e){var t=n(e),r=this.options,s,o,u,a;t.attr("state")===undefined&&t.attr("state","normal");if(t.attr("daytype")===undefined)return;if(t.attr("date")===undefined)return;s=parseInt(t.attr("daytype"),10),o=new Date(t.attr("date")),u=t.attr("state")==="hover",t.attr("class",this._getCellClassName(s,o,undefined).cssCell),t.removeAttr("aria-selected"),s&i.selected&&t.attr("aria-selected",!0);if(n.isFunction(r.customizeDate)&&this._customizeDayCell(t))return;a=t.find("a"),a.length>0&&(a.toggleClass(this.options.wijCSS.stateHover,u),a.toggleClass(this.options.wijCSS.stateActive,(s&i.selected)!==0))},t.prototype._isSingleMonth=function(){return this.options.monthCols*this.options.monthRows===1},t.prototype._splitString=function(e,t,n){if(n===undefined)return e.split(t);var r=[],i=e.split(t),s;for(s=0;s<i.length;s++)s>=n?r[n-1]=r[n-1]+t+i[s]:r.push(i[s]);return r},t.prototype._getNavButtonHtml=function(e,t,n,r){var i=new u;return i.writeBeginTag("a"),i.writeAttribute("id",e),i.writeAttribute("class",t),i.writeAttribute("role","button"),i.writeAttribute("href","#"),r&&(i.writeAttribute("title",r),i.writeAttribute("aria-label",r)),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("class",n),i.writeTagRightChar(),r&&i.write(r),i.writeEndTag("span"),i.writeEndTag("a"),i.toString()},t.prototype._getTitleText=function(e){if(this._myGrid!==undefined)return this._myGrid.getTitle();var t=e||this.getDisplayDate(),r=this.options.titleFormat||"MMMM yyyy";return n.isFunction(this.options.title)?this.options.title(t,r)||this._formatDate(r,t):this._formatDate(r,t)},t.prototype._refreshTitle=function(){this.element.find("."+this.options.wijCSS.datepickerTitle).html(this._getTitleText(undefined))},t.prototype._fillTitle=function(e,t){var n=this.options.wijCSS;e.writeBeginTag("div"),e.writeAttribute("class",n.datepickerTitle+" wijmo-wijcalendar-title"+" "+n.stateDefault+" "+n.cornerAll),e.writeTagRightChar(),e.write(this._getTitleText(t)),e.writeEndTag("div")},t.prototype._getHeaderHtml=function(e,t,n){var r=!!this.element.data("preview.wijcalendar"),i=this.options.wijCSS,s=r?"none":this._isSingleMonth()?this.options.navButtons:"default",o=this.element.is("."+i.datepickerRtl),a=new u;return s==="quick"?(a.writeBeginTag("div"),a.writeAttribute("class",i.header+" wijmo-wijcalendar-header "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("quickprev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(o?"next":"prev")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.quickPrevTooltip.replace("#",this.options.quickNavStep))),a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" wijmo-wijcalendar-header-inner"),a.writeTagRightChar(),!t||a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"e":"w")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),!n||a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"w":"e")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div"),!n||a.write(this._getNavButtonHtml("quicknext","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-seek-"+(o?"prev":"next")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.quickNextTooltip.replace("#",this.options.quickNavStep))),a.writeEndTag("div")):(a.writeBeginTag("div"),a.writeAttribute("class",i.datepickerHeader+" "+i.header+" "+i.datepickerHeader+" "+i.helperClearFix+" "+i.cornerAll),a.writeAttribute("role","heading"),a.writeTagRightChar(),s!=="none"&&!!t&&a.write(this._getNavButtonHtml("prev","wijmo-wijcalendar-navbutton "+i.datepickerPrev+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"e":"w")+" "+(o?this.options.wijCSS.iconArrowRight:this.options.wijCSS.iconArrowLeft),this.options.prevTooltip)),this._fillTitle(a,e),s!=="none"&&!!n&&a.write(this._getNavButtonHtml("next","wijmo-wijcalendar-navbutton "+i.datepickerNext+" "+i.cornerAll,i.icon+" ui-icon-circle-triangle-"+(o?"w":"e")+" "+(o?this.options.wijCSS.iconArrowLeft:this.options.wijCSS.iconArrowRight),this.options.nextTooltip)),a.writeEndTag("div")),a.toString()},t.prototype._formatDate=function(e,t){return a.getTicks(t)?Globalize.format(t,e,this._getCulture(null)):"&nbsp;"},t}(e.wijmoWidget);t.wijcalendar=s;var o=function(){function e(){this.initSelector=":jqmData(role='wijcalendar')",this.wijCSS={datepickerInline:"ui-datepicker-inline",datepicker:"ui-datepicker",datepickerCalendar:"ui-datepicker-calendar",datepickerMulti:"ui-datepicker-multi",datepickerRtl:"datepicker-rtl",datepickerOtherMonth:"ui-datepicker-other-month",prioritySecondary:"ui-priority-secondary",effectsWrapper:"ui-effects-wrapper",datepickerNextHover:"ui-datepicker-next-hover",datepickerPrevHover:"ui-datepicker-prev-hover",datepickerNext:"ui-datepicker-next",datepickerPrev:"ui-datepicker-prev",datepickerTitle:"ui-datepicker-title",datepickerWeekDay:"ui-datepicker-week-day",datepickerWeekEnd:"ui-datepicker-week-end",datepickerUnselectable:"ui-datepicker-unselectable",datepickerDaysCellOver:"ui-datepicker-days-cell-over",datepickerToday:"ui-datepicker-today",stateHighlight:"ui-state-highlight",datepickerCurrentDay:"ui-datepicker-current-day",datepickerGroup:"ui-datepicker-group",datepickerGroupFirst:"ui-datepicker-group-first",datepickerGroupLast:"ui-datepicker-group-last",datepickerRowBreak:"ui-datepicker-row-break",datepickerHeader:"ui-datepicker-header",uiIconGripDottedVertical:"ui-icon-grip-dotted-vertical",uiDatepickerWeekCol:"ui-datepicker-week-col"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHighlight:"ui-btn-down-e"},this.culture="",this.monthCols=1,this.monthRows=1,this.titleFormat="MMMM yyyy",this.showTitle=!0,this.displayDate=undefined,this.dayRows=6,this.dayCols=7,this.weekDayFormat="short",this.showWeekDays=!0,this.showWeekNumbers=!1,this.calendarWeekRule="firstDay",this.minDate=new Date(1900,0,1),this.maxDate=new Date(2099,11,31),this.showOtherMonthDays=!0,this.showDayPadding=!1,this.selectionMode={day:!0,days:!0},this.allowPreview=!1,this.allowQuickPick=!0,this.toolTipFormat="dddd, MMMM dd, yyyy",this.prevTooltip="Previous",this.nextTooltip="Next",this.quickPrevTooltip="Quick Previous",this.quickNextTooltip="Quick Next",this.prevPreviewTooltip="",this.nextPreviewTooltip="",this.navButtons="default",this.quickNavStep=12,this.direction="horizontal",this.duration=250,this.easing="easeInQuad",this.popupMode=!1,this.autoHide=!0,this.customizeDate=null,this.title=null,this.beforeSlide=null,this.afterSlide=null,this.beforeSelect=null,this.afterSelect=null,this.selectedDatesChanged=null}return e}();s.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new o),n.wijmo.registerWidget("wijcalendar",s.prototype);var u=function(){function e(){this._html=[]}return e.prototype.writeTagLeftChar=function(){this._html[this._html.length]="<"},e.prototype.writeTagRightChar=function(){this._html[this._html.length]=">"},e.prototype.write=function(e){this._html[this._html.length]=" "+e+" "},e.prototype.writeBeginTag=function(e){this._html[this._html.length]="<"+e},e.prototype.writeEndTag=function(e){this._html[this._html.length]="</"+e+">"},e.prototype.writeFullBeginTag=function(e){this._html[this._html.length]="<"+e+">"},e.prototype.writeSelfClosingTagEnd=function(){this._html[this._html.length]="/>"},e.prototype.writeAttribute=function(e,t){if(t===undefined||t===null)return;this._html[this._html.length]=" "+e+'="',this._html[this._html.length]=t,this._html[this._html.length]='"'},e.prototype.clean=function(){this._html=[]},e.prototype.toString=function(){return this._html.join("")},e}();t.htmlTextWriter=u;var a={addDays:function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t);return t&&n.getDate()===e.getDate()&&(n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n.setTime(n.getTime()+t*24*3600*1e3)),n},addMonths:function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,1)},addYears:function(e,t){return this.addMonths(e,t*12)},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getTicks:function(e){return e.valueOf()},isSameDate:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isSameMonth:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()},getDaysInMonth:function(e){return(new Date(e.getFullYear(),e.getMonth()+1,0)).getDate()},getWeekStartDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-(e.getDay()-t+7)%7)},getDayOfYear:function(e){var t=new Date(e.getFullYear(),0,1),n=this.getTicks(e)-this.getTicks(t),r=n/864e5;return Math.floor(r)+1},getFirstDayWeekOfYear:function(e,t){var n=this.getDayOfYear(e)-1,r=e.getDay()-n%7,i;return r=(r-t+14)%7,i=(n+r)/7,Math.floor(i)+1},getDayOfWeek:function(e,t){return(e.getDay()-t+7)%7},getWeekOfYearFullDays:function(e,t,n,r){var i=this.getDayOfYear(e)-1,s=this.getDayOfWeek(e,n)-i%7;return s=(n-s+14)%7,s&&s>=r&&(s-=7),s=i-s,s>=0?Math.floor(s/7)+1:this.getWeekOfYearFullDays(this.addDays(e,-(i+1)),t,n,r)},getWeekOfYear:function(e,t,n){switch(t){case"firstDay":return this.getFirstDayWeekOfYear(e,n);case"firstFullWeek":return this.getWeekOfYearFullDays(e,t,n,7);case"firstFourDayWeek":return this.getWeekOfYearFullDays(e,t,n,4)}return this.getFirstDayWeekOfYear(e,n)},getDateToken:function(e){return e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate()}},f=function(){function e(e,t){this.calendar=e;if(t===undefined||a.isSameDate(t,new Date(1900,0,1)))t=new Date;this.displayDate=t,this.id=this.calendar._getId()+"_"+this.calendar._getMonthID(t),this.isFirst=!1,this.isLast=!1,this.showPreview=!1,this.culture=this.calendar._getCulture(),this._calcDates(this.displayDate)}return e.prototype._calcDates=function(e){var t=a.getDaysInMonth(e);this._startDateInMonth=new Date(e.getFullYear(),e.getMonth(),1),this._endDateInMonth=a.addDays(this._startDateInMonth,t-1),this._startDate=a.getWeekStartDate(this._startDateInMonth,this.culture.calendar.firstDay),this._endDate=a.addDays(this._startDate,this.calendar.options.dayRows*this.calendar.options.dayCols-1)},e.prototype._isFirstMonth=function(){var e=this.calendar.getDisplayDate();return a.isSameMonth(this._startDateInMonth,e)},e.prototype._isLastMonth=function(){var e=this.calendar.getDisplayDate();return e=new Date(e.getFullYear(),e.getMonth(),1),e=a.addMonths(e,this.calendar.options.monthCols*this.calendar.options.monthRows-1),a.isSameMonth(this._startDateInMonth,e)},e.prototype.getStartDate=function(){return this._startDate},e.prototype.getEndDate=function(){return this._endDate},e.prototype._getMonthDate=function(){return this._startDateInMonth===undefined,this._startDateInMonth},e.prototype._setMonthDate=function(e){this._calcDates(e)},e.prototype._getWeekDayText=function(e,t){t=t||"short";var n=this.culture.calendar.days,r="";switch(t){case"full":r=n.names[e];break;case"firstLetter":r=n.names[e].substring(0,1);break;case"abbreviated":r=n.namesAbbr[e];break;default:r=n.namesShort[e]}return r},e.prototype._getRowCount=function(){var e=this.calendar.options;return e.showWeekDays?e.dayRows+1:e.dayRows},e.prototype._getColCount=function(){var e=this.calendar.options;return e.showWeekNumbers?e.dayCols+1:e.dayCols},e.prototype._getDayType=function(e){var t=this.calendar.options,n=i.general,r=e.getDay(),s=r===6||r===0,o=e<t.minDate||e>t.maxDate,u=e<this._startDateInMonth||e>this._endDateInMonth,f=o||this.calendar._getDisabledDates().contains(e),l=this.calendar._getSelectedDates().contains(e),c=new Date,h=a.isSameDate(e,c),p=!1;return s&&(n|=i.weekEnd),h&&(n|=i.today),f&&(n|=i.disabled),u&&(n|=i.otherMonth),o&&(n|=i.outOfRange),l&&(n|=i.selected),p&&(n|=i.custom),u&&!t.showOtherMonthDays&&(n|=i.gap),n},e.prototype._refreshDate=function(e){if(e<this._startDate||e>this._endDate)return;var t=this.calendar.options,r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(this._startDate.getFullYear(),this._startDate.getMonth(),this._startDate.getDate()),s=Math.floor(Math.abs(r-i)/864e5),o=Math.floor(s/this.calendar.options.dayCols),u=Math.floor(s%this.calendar.options.dayCols),a,f,l,c;t.showWeekNumbers&&u++,t.showWeekDays&&o++,a=n("#"+this.id,this.calendar.element).get(0),a&&o<a.rows.length&&(f=a.rows[o],u<f.cells.length&&(l=f.cells[u],c=this._getDayType(e),n(l).attr("daytype",c.toString()),this.calendar._refreshDayCell(l)))},e.prototype._fillDayCell=function(e,t,n){var r=this.calendar.options,s=null,o=t.getDate().toString(),u=this.calendar._formatDate(r.toolTipFormat||"dddd, MMMM dd, yyyy",t),a=this._getDayType(t),f=this.calendar._isSelectable(a),l=this.calendar._getCellClassName(a,t,n);o=r.showDayPadding&&o.length===1?"0"+o:o,e.writeBeginTag("td"),e.writeAttribute("daytype",a.toString()),f&&(e.writeAttribute("title",u),e.writeAttribute("aria-label",u)),e.writeAttribute("date",t.toDateString()),e.writeAttribute("class",l.cssCell),e.writeAttribute("role","gridcell"),f||e.writeAttribute("aria-disabled","true"),e.writeTagRightChar(),a&i.gap?e.write("&#160;"):s&&s.content?e.write(s.content):(e.writeBeginTag("a"),e.writeAttribute("class",l.cssText),e.writeAttribute("href","#"),e.writeAttribute("onclick","return false;"),e.writeTagRightChar(),e.write(o),e.writeEndTag("a")),e.writeEndTag("td")},e.prototype.getHtml=function(e){e=!!e;var t=this.calendar.options,n=t.wijCSS,r=!!this.calendar.element.data("preview.wijcalendar"),i=new u,s,o,f,l,c,h,p,d,v,m,g,y;!e&&t.showTitle&&i.write(this.calendar._getHeaderHtml(this._startDateInMonth,this.isFirst,this.isLast)),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-prevpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","prevPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.prevPreviewTooltip),i.writeAttribute("aria-label",t.prevPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.writeBeginTag("table"),i.writeAttribute("id",this.id),i.writeAttribute("class",n.datepickerCalendar+" wijmo-wijcalendar-table"),i.writeAttribute("role","grid"),i.writeAttribute("summary",this.calendar._getTitleText(this._startDateInMonth)),i.writeAttribute("onselectstart","return false;"),i.writeTagRightChar();if(t.showWeekDays){i.writeFullBeginTag("thead"),i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_ms"),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-monthselector"+(t.selectionMode.month?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),!!t.selectionMode.month&&!r?(i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.iconArrowRightDown),i.writeAttribute("style","display: block;"),i.writeSelfClosingTagEnd()):i.write(t.weekString?t.weekString:"Wk"),i.writeEndTag("th")),f=this._startDate.getDay(),l=this._startDate;for(s=0;s<t.dayCols;s++)c=f===6||f===0,h=s+(t.showWeekNumbers?1:0),p=this._getWeekDayText(f,t.weekDayFormat),d=this._getWeekDayText(f,"full"),i.writeBeginTag("th"),i.writeAttribute("id",this.id+"_cs_"+h),i.writeAttribute("class",n.datepickerWeekDay+(c?" "+n.datepickerWeekEnd:"")+(t.selectionMode.weekDay?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","columnheader"),i.writeTagRightChar(),i.writeBeginTag("span"),i.writeAttribute("title",d),i.writeAttribute("aria-label",d),i.writeTagRightChar(),i.write(p),i.writeEndTag("span"),i.writeEndTag("th"),f=(f+1)%7,l=a.addDays(l,1);i.writeEndTag("tr"),i.writeEndTag("thead")}i.writeFullBeginTag("tbody"),v=this._startDate,m=this._startDateInMonth;for(s=0;s<t.dayRows;s++){i.writeBeginTag("tr"),i.writeTagRightChar(),t.showWeekNumbers&&(g=s+(t.showWeekDays?1:0),i.writeBeginTag("td"),i.writeAttribute("id",this.id+"_rs_"+g),i.writeAttribute("class",n.uiDatepickerWeekCol+" wijmo-wijcalendar-week-num"+(t.selectionMode.weekNumber?" wijmo-wijcalendar-selectable":"")),i.writeAttribute("role","rowheader"),i.writeTagRightChar(),y=a.getWeekOfYear(m,t.calendarWeekRule,this.culture.calendar.firstDay),i.write(y),i.writeEndTag("td"),m=a.addDays(m,t.dayCols));for(o=0;o<t.dayCols;o++)this._fillDayCell(i,v,r),v=a.addDays(v,1);i.writeEndTag("tr")}return i.writeEndTag("tbody"),i.writeEndTag("table"),!e&&!r&&this.showPreview&&(i.writeBeginTag("div"),i.writeAttribute("class","wijmo-wijcalendar-nextpreview-button"),i.writeAttribute("role","button"),i.writeAttribute("aria-haspopup","true"),i.writeAttribute("id","nextPreview"),i.writeTagRightChar(),i.writeBeginTag("a"),i.writeAttribute("class",n.icon+" "+n.uiIconGripDottedVertical),i.writeAttribute("href","#"),i.writeAttribute("title",t.nextPreviewTooltip),i.writeAttribute("aria-label",t.nextPreviewTooltip),i.writeAttribute("onclick","return false;"),i.writeTagRightChar(),i.write("&#160;"),i.writeEndTag("a"),i.writeEndTag("div")),i.toString()},e}();t.wijMonthView=f;var l=function(){function e(e,t){this._calendar=e,this._optionName=t?t:"selectedDates",this._normalize()}return e.prototype.getDates=function(){return this._calendar.options[this._optionName]===undefined&&(this._calendar.options[this._optionName]=[]),this._calendar.options[this._optionName]},e.prototype.setDates=function(e){this._calendar.options[this._optionName]=e,this._normalize()},e.prototype.getCount=function(){return this.getDates().length},e.prototype.clear=function(){this.setDates([])},e.prototype.add=function(e){this.addRange(e,e)},e.prototype.remove=function(e){this.removeRange(e,e)},e.prototype.indexOf=function(e){return this.getCount()?this._findRangeBound(e,!0,!1):-1},e.prototype.contains=function(e){return this.indexOf(e)!==-1},e.prototype.removeRange=function(e,t){if(!this.getCount())return;var n=this._findRangeBound(e,!1,!0),r=this._findRangeBound(t,!1,!1),i,s,o;if(n<0||r<0)return;if(n>r)return;i=this.getDates();if(i[r]>t)return;s=n?i.slice(0,n):[],o=r>=i.length-1?[]:i.slice(r+1),this.setDates(s.concat(o))},e.prototype.addRange=function(e,t){this.removeRange(e,t);var n=this.getDates(),r=this._findRangeBound(e,!1,!0),i=r?n.slice(0,r):[],s=n.slice(r),o=[],u;e=a.getDate(e),t=a.getDate(t);for(u=e;u<=t;u=a.addDays(u,1))o[o.length]=u;this.setDates(i.concat(o.concat(s)))},e.prototype._findRangeBound=function(e,t,n){var r=this.getDates(),i=0,s=r.length,o;while(i<s){o=i+s>>1;if(a.isSameDate(e,r[o]))return o;e<r[o]?s=o:i=o+1}return t?-1:n?i:s},e.prototype._parseDate=function(e){var t;e?typeof e=="string"&&(t=e):e=new Date;if(t){t=t.replace(/-/g,"/");try{e=new Date(t),isNaN(e)&&(e=new Date)}catch(n){e=new Date}}return e},e.prototype._normalize=function(){var e=this._calendar.options[this._optionName],t=this,r;n.isArray(e)&&(r=n.map(e,function(e,n){return t._parseDate(e)}),this._calendar.options[this._optionName]=r.sort(function(e,t){return e.getTime()-t.getTime()}))},e}();t.wijDateCollection=l;var c=function(){function e(e){this.gridType="month",this.calendar=e,e&&(this.culture=e._getCulture())}return e.prototype.select=function(e,t){var n=this.calendar.getDisplayDate();switch(this.gridType){case"month":n.setMonth(t);break;case"year":n.setFullYear(t);break;case"decade":n.setFullYear(t)}this.calendar.options.displayDate=n},e.prototype.getSelectedIndex=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return e.getMonth();case"year":return t-n;case"decade":return Math.floor((t-r)/10)}return 0},e.prototype.getTitle=function(){var e=this.calendar.getDisplayDate(),t=e.getFullYear(),n=Math.floor(t/10)*10-1,r=Math.floor(t/100)*100-10;switch(this.gridType){case"month":return t.toString();case"year":return n+1+" - "+(n+10);case"decade":return r+10+" - "+(r+109)}return""},e.prototype.getHtml=function(e,t){e===undefined?e=this.calendar.getDisplayDate():typeof e=="boolean"&&(t=e,e=this.calendar.getDisplayDate()),t=!!t;var n=this.calendar.options,r=3,i=4,s=new u,o=n.wijCSS,a,f,l,c,h,p,d,v,m,g,y,b,w,E;n.showTitle&&!t&&s.write(this.calendar._getHeaderHtml(null,!0,!0)),a=100/r+"%",a="30%",s.writeBeginTag("table"),s.writeAttribute("class",o.datepickerCalendar+" wijmo-wijcalendar-mygrid"),s.writeAttribute("role","grid"),s.writeAttribute("onselectstart","return false;"),s.writeTagRightChar(),f=e.getFullYear(),l=e.getFullYear()*12,c=Math.floor(f/10)*10-1,h=Math.floor(f/100)*100-10,p=this.culture.calendar.months;for(d=0;d<r;d++){s.writeBeginTag("tr"),s.writeAttribute("height",a),s.writeTagRightChar();for(v=0;v<i;v++){m=d*4+v,g=!1,y=!1,b="",w=null;switch(this.gridType){case"month":e.getMonth()===m&&(g=!0),w=m,b=p.namesAbbr[m],y=l+m<n.minDate.getFullYear()*12+n.minDate.getMonth()||l+m>n.maxDate.getFullYear()*12+n.maxDate.getMonth();break;case"year":if(m===0||m===11)y=!0;w=c+m,w<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f===w,b=w.toString();break;case"decade":if(m===0||m===11)y=!0;w=h+m*10,w+10<n.minDate.getFullYear()||w>n.maxDate.getFullYear()?y=!0:g=f>=w&&f<w+10,b=w.toString()+"-<br/>"+(w+9).toString()}E=o.datepickerWeekDay,y?E=E+" "+o.datepickerOtherMonth+" "+o.prioritySecondary+" "+o.datepickerUnselectable:!n.disabledState&&!n.disabled&&(E+=" wijmo-wijcalendar-day-selectable"),E+=" "+o.stateDefault+(y?" "+o.stateDisabled:"")+(g?" "+o.stateActive+" "+o.stateHighlight:""),s.writeBeginTag("td"),s.writeAttribute("class",E),s.writeAttribute("role","gridcell"),s.writeAttribute("index",m.toString()),s.writeAttribute("value",w.toString()),s.writeAttribute("other",y.toString()),s.writeTagRightChar(),s.writeBeginTag("a"),s.writeAttribute("href","#"),s.writeTagRightChar(),s.write(b),s.writeEndTag("a"),s.writeEndTag("td")}s.writeEndTag("tr")}return s.writeEndTag("table"),s.toString()},e}();t.wijMyGrid=c})(e.calendar||(e.calendar={}));var t=e.calendar})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=0,i=0,s=n.effects?n.effects:n,o=s.save,u=s.restore,a=s.createWrapper,f=s.removeWrapper,l=function(){return++r},c=function(){return++i},h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"selected":if(this.options.collapsible&&n===this.options.selected)return;this.select(n);break;case"alignment":this._innerDestroy(!0),this._tabify(!0);break;default:this._tabify(!1)}},t.prototype._create=function(){var t=this,n=this.options;this.element.is(":hidden")&&this.element.wijAddVisibilityObserver&&this.element.wijAddVisibilityObserver(function(){t.element.wijRemoveVisibilityObserver&&t.element.wijRemoveVisibilityObserver();var e=t.element.data("wijtabs"),n=t.element.data("wijmoWijtabs");t._innerDestroy(!0),t.element.data("wijtabs",e),t.element.data("wijmoWijtabs",n),t._tabify(!0)},"wijtabs"),this._tabify(!0),(n.disabledstate||n.disabled)&&this.disable(),e.prototype._create.call(this)},t.prototype.destroy=function(){this._innerDestroy(),e.prototype.destroy.call(this)},t.prototype._tabify=function(e){this.list=this.element.children("ol,ul").eq(0),this.lis=n("li:has(a)",this.list),this.anchors=this.lis.map(function(){return n("a",this)[0]}),this.panels=n([]);var t=this,r=t.options,i=/^#.+/,s,o,u,a,f,l,c,h,p;n.each(t.anchors,function(e,s){var o=n(s).attr("href")||"",u=o.split("#")[0],a,f,l;u&&(u===location.toString().split("#")[0]||(a=n("base")[0])&&u===a.href)&&(o=s.hash,s.href=o),i.test(o)?t.panels=t.panels.add(t._sanitizeSelector(o),t.element):o!=="#"?(n.data(s,"href.tabs",o),n.data(s,"load.tabs",o.replace(/#.*$/,"")),f=t._tabId(s),s.href="#"+f,l=n("#"+f),l.length||(l=n(r.panelTemplate||t._defaults.panelTemplate).attr("id",f).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerBottom).insertAfter(t.panels[e-1]||t.list),l.data("destroy.tabs",!0)),t.panels=t.panels.add(l)):r.disabledIndexes.push(e),n(s).prop("tabindex","-1")}),s=this._getAlignment(!0),o=this._getAlignment(!1);if(e){this.list.attr("role","tablist"),this.lis.attr("role","tab"),this.panels.attr("role","tabpanel"),this.element.addClass(r.wijCSS.tabs).addClass(r.wijCSS.wijtabs).addClass(r.wijCSS.widget).addClass(r.wijCSS.content).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS["tabs"+s]),this.list.addClass(r.wijCSS.tabsNav).addClass(r.wijCSS.helperReset).addClass(r.wijCSS.helperClearFix).addClass(r.wijCSS.header).addClass(r.wijCSS.cornerAll),this.lis.addClass(r.wijCSS.stateDefault).addClass(r.wijCSS["corner"+s]),this.panels.addClass(r.wijCSS.tabsPanel).addClass(r.wijCSS.content).addClass(r.wijCSS["corner"+o]);switch(s){case"Bottom":this.list.appendTo(this.element);break;case"Left":u=n("<div/>").addClass(r.wijCSS.wijtabsContent).appendTo(this.element),this.panels.appendTo(u);break;case"Right":u=n("<div/>").addClass(r.wijCSS.wijtabsContent).insertBefore(this.list),this.panels.appendTo(u);break;case"Top":this.list.prependTo(this.element)}r.sortable&&this.list.sortable&&this.list.sortable({axis:s==="Top"||s==="Bottom"?"x":"y"}),r.selected===undefined?(location.hash&&n.each(this.anchors,function(e,t){if(t.hash===location.hash)return r.selected=e,!1}),typeof r.selected!="number"&&r.cookie&&(r.selected=parseInt(t._cookie(undefined,undefined),10)),typeof r.selected!="number"&&this.lis.filter("."+r.wijCSS.tabsActive).length&&(r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive))),r.selected=r.selected||(this.lis.length?0:-1)):r.selected===null&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabledIndexes=n.unique(r.disabledIndexes.concat(n.map(this.lis.filter("."+r.wijCSS.stateDisabled),function(e,n){return t.lis.index(e)}))).sort(),n.inArray(r.selected,r.disabledIndexes)!==-1&&r.disabledIndexes.splice(n.inArray(r.selected,r.disabledIndexes),1),this.panels.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),this.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),r.selected>=0&&this.anchors.length&&(this.panels.eq(r.selected).removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),this.lis.eq(r.selected).addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t.element.queue("tabs",function(){t.element.wijTriggerVisibility&&n(t.panels[r.selected]).wijTriggerVisibility(),t._trigger("show",null,t._ui(t.anchors[r.selected],t.panels[r.selected]))}),this.load(r.selected)),n(window).bind("unload",function(){t.lis&&t.lis.add(t.anchors).unbind(".tabs"),t.lis=t.anchors=t.panels=null})}else r.selected=this.lis.index(this.lis.filter("."+r.wijCSS.tabsActive));this.element[r.collapsible?"addClass":"removeClass"](r.wijCSS.tabsCollapsible),r.cookie&&this._cookie(r.selected,r.cookie);for(a=0;a<this.lis.length;a++)f=this.lis[a],n(f)[n.inArray(a,r.disabledIndexes)!==-1&&!n(f).hasAllClasses(r.wijCSS.tabsActive)?"addClass":"removeClass"](r.wijCSS.stateDisabled),n(f).hasAllClasses(r.wijCSS.stateDisabled)&&n(f).attr("aria-disabled",!0);r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),!r.disabledState&&!r.disabled&&r.event!=="mouseover"&&(l=function(e,t){t.is(":not(."+r.wijCSS.stateDisabled+")")&&t.addClass(e)},c=function(e,t){t.removeClass(e)},this.lis.bind("mouseover.tabs",function(){l(r.wijCSS.stateHover,n(this))}),this.lis.bind("mouseout.tabs",function(){c(r.wijCSS.stateHover,n(this))}),this.anchors.bind("focus.tabs",function(){t.lis.filter("."+r.wijCSS.stateFocus).removeClass(r.wijCSS.stateFocus),l(r.wijCSS.stateFocus,n(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c(r.wijCSS.stateFocus,n(this).closest("li"))}));if(r.showOption===undefined||r.showOption===null)r.showOption={};this._normalizeBlindOption(r.showOption);if(r.hideOption===undefined||r.hideOption===null)r.hideOption={};this._normalizeBlindOption(r.hideOption),h=(r.showOption.blind||r.showOption.fade)&&r.showOption.duration>0?function(e,i){n(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1);if(s==="Top"||s==="Bottom"){var o={duration:r.showOption.duration,height:"toggle",opacity:"toggle"};r.showOption.blind||delete o.height,r.showOption.fade||delete o.opacity,i.hide().removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1).animate(o,r.showOption.duration||"normal",function(){t._resetStyle(i),i.wijTriggerVisibility&&i.wijTriggerVisibility(),t._trigger("show",null,t._ui(e,i[0]))})}else t._showContent(),t._blindPanel(i,"show")}:function(e,i){n(e).closest("li").addClass(r.wijCSS.tabsActive).addClass(r.wijCSS.stateActive).attr("aria-selected",!0),t._showContent(),i.removeClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.wijTriggerVisibility&&i.wijTriggerVisibility(),t._trigger("show",null,t._ui(e,i[0]))},p=(r.hideOption.blind||r.hideOption.fade)&&r.hideOption.duration>0?function(e,n){if(s==="Top"||s==="Bottom"){var i={duration:r.hideOption.duration,height:"toggle",opacity:"toggle"};r.hideOption.blind||delete i.height,r.hideOption.fade||delete i.opacity,n.animate(i,r.hideOption.duration||"normal",function(){t.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),n.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),t._resetStyle(n),t.element.dequeue("tabs")})}else t._saveLayout(),t._blindPanel(n,"hide")}:function(e,n,i){t.lis.removeClass(r.wijCSS.tabsActive).removeClass(r.wijCSS.stateActive).attr("aria-selected",!1),t._hideContent(),n.addClass(r.wijCSS.wijtabsHide).attr("aria-hidden",!0),t.element.dequeue("tabs")},!r.disabledState&&!r.disabled&&this.anchors.bind(r.event+".tabs",function(){var e=this,i=n(this).closest("li"),s=t.panels.filter(":not(."+r.wijCSS.wijtabsHide+")"),o=n(t._sanitizeSelector(this.hash),t.element);if(i.hasAllClasses(r.wijCSS.tabsActive)&&!r.collapsible||i.hasAllClasses(r.wijCSS.stateDisabled)||i.hasAllClasses(r.wijCSS.tabsLoading)||t._trigger("select",null,t._ui(this,o[0]))===!1)return this.blur(),!1;r.selected=t.anchors.index(this),t.abort();if(r.collapsible){if(i.hasAllClasses(r.wijCSS.tabsActive))return r.selected=-1,r.cookie&&t._cookie(r.selected,r.cookie),t.element.queue("tabs",function(){p(e,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return r.cookie&&t._cookie(r.selected,r.cookie),t.element.queue("tabs",function(){h(e,o)}),t.load(t.anchors.index(this)),this.blur(),!1}r.cookie&&t._cookie(r.selected,r.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&t.element.queue("tabs",function(){p(e,s)}),t.element.queue("tabs",function(){h(e,o)}),t.load(t.anchors.index(this)),n.browser.msie&&this.blur()}),this._initScroller(),this.anchors.bind("click.tabs",function(){return!1})},t.prototype._blindPanel=function(e,t){var r=this,i=r.options,s=e.parent("."+i.wijCSS.wijtabsContent),u=["position","top","left","width"],l=t==="show"?i.showOption:i.hideOption,c,h,p;if(!s.length)return;r.list.width(r.list.width()),o&&o(e,u),e.show(),t==="show"?(e.removeClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!1),e.width(r.element.data("panel.width"))):e.width(e.width()),a?c=a(e).css({overflow:"hidden"}):c=n("<div></div>"),t==="show"&&c.css(n.extend({width:0},l.fade?{opacity:0}:{})),h=n.extend({width:t==="show"?r.element.data("panel.outerWidth"):0},l.fade?{opacity:t==="show"?1:0}:{}),p=r.list.outerWidth(!0),c.animate(h,{duration:l.duration,step:function(){var e=c.outerWidth(!0);r.element.width(p+e),s.width(Math.max(0,r.element.innerWidth()-p-6))},complete:function(){t==="hide"?(r.lis.removeClass(i.wijCSS.tabsActive).removeClass(i.wijCSS.stateActive).attr("aria-selected",!1),e.addClass(i.wijCSS.wijtabsHide).attr("aria-hidden",!0)):e.css("width",""),f&&f(e),t==="show"&&r._restoreLayout(),r._resetStyle(e),e.dequeue(),r.element.dequeue("tabs")}})},t.prototype._hideContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._saveLayout(),t.addClass(e.wijtabsHide).attr("aria-hidden",!0),this.element.width(this.list.outerWidth(!0)))},t.prototype._showContent=function(){var e=this.options.wijCSS,t=this.element.find("."+e.wijtabsContent);t.length&&(this._restoreLayout(),t.removeClass(e.wijtabsHide).attr("aria-hidden",!1))},t.prototype._saveLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"],n=this.panels.filter(":not(."+e.wijtabsHide+")");o&&(o(this.element,t),o(this.list,t),o(this.element.find("."+e.wijtabsContent),t)),this.list.width(this.list.width()),this.element.data("panel.width",n.width()),this.element.data("panel.outerWidth",n.outerWidth(!0))},t.prototype._restoreLayout=function(){var e=this.options.wijCSS,t=["width","height","overflow"];u&&(u(this.element,t),u(this.list,t),u(this.element.find("."+e.wijtabsContent),t))},t.prototype._resetStyle=function(e){e.css({display:""}),n.support.opacity||e[0].style.removeAttribute("filter")},t.prototype._normalizeBlindOption=function(e){e.blind===undefined&&(e.blind=!1),e.fade===undefined&&(e.fade=!1),e.duration===undefined&&(e.duration=200);if(typeof e.duration=="string")try{e.duration=parseInt(e.duration,10)}catch(t){e.duration=200}},t.prototype._initScroller=function(){var e=this,t=n.inArray(this._getAlignment(!0),["Top","Bottom"])!==-1,r=0;if(!t)return;n.each(this.lis,function(t,i){var s=n(i),o,u=0,a=0;n.browser.msie&&!!e.options.scrollable&&(n.each(s.children(),function(e,t){var r=n(t);r.is("a")&&r.width(r.width()),u+=r.outerWidth(!0)}),a=u-s.width(),s.width(u)),r+=e._getLiWidth(n(i))+a}),!!this.options.scrollable&&this.element.innerWidth()<r?(this.scrollWrap===undefined&&(this.list.wrap("<div class='scrollWrap'></div>"),this.scrollWrap=this.list.parent(),o&&o(this.list,["width","height","overflow"])),this.list.width(Math.ceil(r)+2),this.scrollWrap.height(this.list.outerHeight(!0)),this.scrollWrap.wijsuperpanel({allowResize:!1,hScroller:{scrollMode:"edge"},vScroller:{scrollBarVisibility:"hidden"}})):this._removeScroller()},t.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},t.prototype._tabId=function(e){var t=n(e),r,i;if(t.data&&t.data("tabid"))return t.data("tabid");if(e.href&&e.href.length){i=this._getURLParameters(e.href);if(i.tabId)return r=i.tabId,t.data("tabid",r),r}return r=e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+l(),t.data("tabid",r),r},t.prototype._getURLParameters=function(e){var t={},r,i;return e.indexOf("?")>-1&&(r=e.split("?")[1],i=r.split("&"),n.each(i,function(e,n){var r=n.split("=");r.length>1&&(t[r[0]]=r[1])})),t},t.prototype._getAlignment=function(e){var t=this.options.alignment||"top";if(e)return t.charAt(0).toUpperCase()+t.substr(1);switch(t){case"top":t="Bottom";break;case"bottom":t="Top";break;case"left":t="Right";break;case"right":t="Left"}return t},t.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},t.prototype._innerDestroy=function(e){var t=this.options,r=n("."+t.wijCSS.wijtabsContent);return this.abort(),this._removeScroller(),this.element.unbind(".tabs").removeClass(t.wijCSS.wijtabs).removeClass(t.wijCSS.tabsTop).removeClass(t.wijCSS.tabsBottom).removeClass(t.wijCSS.tabsLeft).removeClass(t.wijCSS.tabsRight).removeClass(t.wijCSS.tabs).removeClass(t.wijCSS.widget).removeClass(t.wijCSS.content).removeClass(t.wijCSS.cornerAll).removeClass(t.wijCSS.tabsCollapsible).removeClass(t.wijCSS.helperClearFix).removeData("tabs").removeAttr("role"),this.list.removeClass(t.wijCSS.tabsNav).removeClass(t.wijCSS.helperReset).removeClass(t.wijCSS.helperClearFix).removeClass(t.wijCSS.header).removeClass(t.wijCSS.cornerAll).removeAttr("role"),n.each(this.anchors,function(e,t){var r=n(t),i=r.data("href.tabs");i&&(t.href=i),r.unbind(".tabs"),n.each(["href","load","cache"],function(e,t){r.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(r,i){var s=n(i);s.data("destroy.tabs")&&!e?s.remove():s.removeClass(t.wijCSS.stateDefault).removeClass(t.wijCSS.cornerTop).removeClass(t.wijCSS.cornerBottom).removeClass(t.wijCSS.cornerLeft).removeClass(t.wijCSS.cornerRight).removeClass(t.wijCSS.tabsActive).removeClass(t.wijCSS.stateActive).removeClass(t.wijCSS.stateHover).removeClass(t.wijCSS.stateFocus).removeClass(t.wijCSS.stateDisabled).removeClass(t.wijCSS.tabsPanel).removeClass(t.wijCSS.content).removeClass(t.wijCSS.wijtabsHide).css({position:"",left:"",top:""}).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-selected").removeAttr("aria-disabled")}),r.length&&r.replaceWith(r.contents()),t.cookie&&this._cookie(null,t.cookie),this},t.prototype._cleanup=function(){var e=this.options.wijCSS;this.lis.filter("."+e.tabsLoading).removeClass(e.tabsLoading).find("span:data(label.tabs)").each(function(){var e=n(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},t.prototype._removeScroller=function(){if(!this.scrollWrap)return;this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents()),this.scrollWrap=undefined,u&&u(this.list,["width","height","overflow"])},t.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+c());return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},t.prototype._getLiWidth=function(e){return this._parsePxToNumber(e.css("margin-left"))+this._parsePxToNumber(e.css("border-left-width"))+this._parsePxToNumber(e.css("padding-left"))+this._parsePxToNumber(e.css("width"))+this._parsePxToNumber(e.css("margin-right"))+this._parsePxToNumber(e.css("border-right-width"))+this._parsePxToNumber(e.css("padding-right"))},t.prototype._parsePxToNumber=function(e){var t=e.indexOf("px");return!t||t===-1?0:parseFloat(e.substr(0,t))},t.prototype.abort=function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},t.prototype.select=function(e){return typeof e=="string"?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):e===null&&(e=-1),e===-1&&this.options.collapsible&&(e=this.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs"),this},t.prototype.load=function(e){var t=this,r=t.options,i=t.anchors.eq(e)[0],s=n.data(i,"load.tabs"),o=n("span",i);t.abort();if(!1===t._trigger("beforeShow",null,t._ui(t.anchors[e],t.panels[e]))){t.element.dequeue("tabs");return}if(!s||t.element.queue("tabs").length!==0&&n.data(i,"cache.tabs")){t.element.dequeue("tabs");return}return t.lis.eq(e).addClass(r.wijCSS.tabsLoading),(r.spinner||t._defaults.spinner)&&o.data("label.tabs",o.html()).html(r.spinner||t._defaults.spinner),t.xhr=n.ajax(n.extend({},r.ajaxOptions,{url:s,success:function(s,o){n(t._sanitizeSelector(i.hash),t.element).html(s),t._cleanup(),r.cache&&n.data(i,"cache.tabs",!0),t._trigger("load",null,t._ui(t.anchors[e],t.panels[e]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(n,s,o){t._cleanup(),t._trigger("load",null,t._ui(t.anchors[e],t.panels[e]));try{r.ajaxOptions.error(n,s,e,i)}catch(u){}}})),t.element.dequeue("tabs"),t},t.prototype.add=function(e,t,r){r===undefined&&(r=this.anchors.length);var i=this,s=i.options,o=n((s.tabTemplate||i._defaults.tabTemplate).replace(/#\{href\}/g,e).replace(/#\{label\}/g,t)),u=e.indexOf("#")?i._tabId(n("a",o)[0]):e.replace("#",""),a=i._getAlignment(!0),f=i._getAlignment(!1),l=n("#"+u),c;return o.addClass(s.wijCSS.stateDefault).addClass(s.wijCSS["corner"+a]).data("destroy.tabs",!0).attr("role","tab").attr("aria-selected",!1),l.length||(l=n(s.panelTemplate||i._defaults.panelTemplate).attr("id",u).data("destroy.tabs",!0).attr("role","tabpanel")),l.addClass(s.wijCSS.tabsPanel).addClass(s.wijCSS.content).addClass(s.wijCSS["corner"+f]+" "+s.wijCSS.wijtabsHide).attr("aria-hidden",!0),r>=i.lis.length?(o.appendTo(i.list),i.panels.length>0?l.insertAfter(i.panels[i.panels.length-1]):(c=i.element.find("."+s.wijCSS.wijtabsContent),c.length===0&&(c=i.element),l.appendTo(c))):(o.insertBefore(i.lis[r]),l.insertBefore(i.panels[r])),s.disabledIndexes=n.map(s.disabledIndexes,function(e,t){return e>=r?++e:e}),i._removeScroller(),i._tabify(!1),i.anchors.length===1&&(s.selected=0,o.addClass(s.wijCSS.tabsActive).addClass(s.wijCSS.stateActive).attr("aria-selected",!0),l.removeClass(s.wijCSS.wijtabsHide).attr("aria-hidden",!1),i.element.queue("tabs",function(){i.element.wijTriggerVisibility&&n(i.panels[0]).wijTriggerVisibility(),i._trigger("show",null,i._ui(i.anchors[0],i.panels[0]))}),i.load(0)),i._trigger("add",null,i._ui(i.anchors[r],i.panels[r])),i},t.prototype.remove=function(e){var t=this.options,r=this.lis.eq(e).remove(),i=this.panels.eq(e).remove();return r.hasAllClasses(t.wijCSS.tabsActive)&&this.anchors.length>1&&this.select(e+(e+1<this.anchors.length?1:-1)),t.disabledIndexes=n.map(n.grep(t.disabledIndexes,function(t,n){return t!==e},!1),function(t,n){return t>=e?--t:t}),this._removeScroller(),this._tabify(!1),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},t.prototype.enableTab=function(e){var t=this.options;if(n.inArray(e,t.disabledIndexes)===-1)return;return this.lis.eq(e).removeClass(t.wijCSS.stateDisabled).removeAttr("aria-disabled"),t.disabledIndexes=n.grep(t.disabledIndexes,function(t,n){return t!==e},!1),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},t.prototype.disableTab=function(e){var t=this.options;return e!==t.selected&&(this.lis.eq(e).addClass(t.wijCSS.stateDisabled).attr("aria-disabled",!0),t.disabledIndexes.push(e),t.disabledIndexes.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},t.prototype.url=function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},t.prototype.length=function(){return this.anchors.length},t}(e.wijmoWidget);t.wijtabs=h,h.prototype._defaults={panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'};var p=function(){function e(){this.wijCSS={wijtabs:"wijmo-wijtabs",wijtabsContent:"wijmo-wijtabs-content",wijtabsHide:"wijmo-wijtabs-hide"},this.wijMobileCSS={header:"ui-header ui-bar-c",content:"ui-content ui-body ui-body-c",stateDefault:"ui-btn-up-a",stateActive:"ui-btn-down-b"},this.alignment="top",this.sortable=!1,this.scrollable=!1,this.ajaxOptions=null,this.cache=!1,this.cookie=null,this.collapsible=!1,this.hideOption=null,this.showOption=null,this.disabledIndexes=[],this.event="click",this.idPrefix="ui-tabs-",this.panelTemplate="",this.spinner="",this.tabTemplate="",this.add=null,this.remove=null,this.select=null,this.beforeShow=null,this.show=null,this.load=null,this.disable=null,this.enable=null}return e}();h.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new p),n.wijmo.registerWidget("wijtabs",h.prototype)})(e.tabs||(e.tabs={}));var t=e.tabs})(wijmo||(wijmo={}));;
var wijmo;(function(e){(function(e){"use strict";var t=jQuery,n,r,i;n=function(e){var t=this;t.data={},t.reader=null,t.proxy=null,t.items=[],t.loading=null,t.loaded=null,t._constructor(e)},window.wijdatasource=n,t.extend(n.prototype,{_constructor:function(e){t.extend(this,e)},load:function(e,n){var r=this,i=r.proxy;if(t.isFunction(r.loading)&&r.loading(r,e)===!1)return;i?i.request(r,r.loaded,e):((r.items.length===0||n)&&this.read(),t.isFunction(r.loaded)&&r.loaded(r,e))},read:function(){var e=this,t=e.data;t&&e.reader?e.reader.read(e):e.items=e.data}}),r=function(e){t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e),t.isArray(e)&&(this.fields=e)},window.wijarrayreader=r,t.extend(r.prototype,{read:function(e){t.isArray(e.data)?e.items=this._map(e.data):e.items=[]},_map:function(e){var n=this,r=[];return n.fields===undefined||n.fields.length===0?(t.extend(!0,r,e),r):(t.each(e,function(e,i){var s={};t.each(n.fields,function(e,n){n.mapping&&typeof n.mapping&&window[n.mapping]&&(n.mapping=window[n.mapping]);if(t.isFunction(n.mapping))return s[n.name]=n.mapping(i),!0;var r=n.mapping!==undefined?n.mapping:n.name,o=i[r];o===undefined&&(n.defaultValue!==undefined?o=n.defaultValue:o=i),s[n.name]=o}),r.push(s)}),r)}}),i=function(e){this.options=e,t.isFunction(window.wijmoASPNetParseOptions)&&wijmoASPNetParseOptions(e)},window.wijhttpproxy=i,t.extend(i.prototype,{request:function(e,n,r){var i=this,s,o;s=t.extend({},this.options),o=s.success,s.success=function(u){t.isFunction(o)&&o(u),i._complete(u,e,n,s,r)},t.ajax(s)},_complete:function(e,n,r,i,s){n.data=i.key!==undefined?e[i.key]:e,n.read(),t.isFunction(r)&&r(n,s)}})})(e.checkbox||(e.checkbox={}));var t=e.checkbox})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijsplitter",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setFullSplit=function(e){var t=this,n=t._fields,r=e?"100%":n.width,i=e?"100%":n.height;t.element.css("width",r).css("height",i)},t.prototype._setOption=function(e,t){var r=this,i=r.options,s,o=n.extend({},i[e]);if(e==="fullSplit")r._setFullSplit(t);else if(n.isPlainObject(i[e])){e==="panel1"&&t.collapsed!==undefined?r._setPanel1Collapsed(t.collapsed):e==="panel2"&&t.collapsed!==undefined&&r._setPanel2Collapsed(t.collapsed),i[e]=n.extend(!0,i[e],t),e==="resizeSettings"&&r._initResizer();return}n.Widget.prototype._setOption.apply(r,arguments),o!==t&&(e==="orientation"?r.refresh():e==="collapsingPanel"?r.refresh():e==="fullSplit"?r.refresh(!0,!1):e==="splitterDistance"?(r.refresh(!1,!1),r._trigger("sized")):e==="showExpander"&&(s=r._fields.expander,s&&s.length&&s.css("display",t?"":"none"))),e==="disabled"&&r._handleDisabledOption(t,r.element)},t.prototype._create=function(){var e=this,t=e.element,r=e.options,i;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),r.splitterDistance==100&&(i=this.element.width()-r.panel2.minSize,r.panel1.minSize>r.splitterDistance?r.splitterDistance=r.panel1.minSize:i<r.splitterDistance&&(r.splitterDistance=i)),e._fields={width:t.width(),height:t.height()},r.fullSplit&&e._setFullSplit(!0),e._splitterify(),e._updateElementsCss(),e._updateElements(),e._bindEvents(),e._initResizer(),r.disabled&&e.disable(),e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){r.fullSplit&&(e.refresh(),e._updateElements(),e._initResizer())},"wijsplitter"),e._trigger("load",null,e)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype.destroy=function(){var e=this,t=e.options,r=e.element,i=e._fields,s=i.wrapper,o=i.expander,u=i.bar,a=i.panel1,f=i.panel2,l=i.originalStyle,c=e.widgetName,h=i.oriPnl1Content,p=i.oriPnl2Content,d=i.oriPnl1ContentStyle,v=i.oriPnl2ContentStyle,m=t.wijCSS,g=m.vSplitterCss,y=m.vSplitterCssPrefix,b=m.hSplitterCss,w=m.hSplitterCssPrefix,E=m.panelCss;n.fn.resizable&&a&&a.n.is(":ui-resizable")&&a.n.resizable("destroy"),h&&(h.removeClass(y+a.contentCss).removeClass(m.hSplitterCssPrefix+a.contentCss).removeClass(m.content),d===undefined?h.removeAttr("style"):h.attr("style",d),h.appendTo(r)),p&&(p.removeClass(y+f.contentCss).removeClass(m.hSplitterCssPrefix+f.contentCss).removeClass(m.content),v===undefined?p.removeAttr("style"):p.attr("style",v),p.appendTo(r)),a.n.unbind("."+c),o.unbind("."+c),u.unbind("."+c),n(window).unbind("."+c),s.remove(),r.removeClass(g).removeClass(b),l===undefined?r.removeAttr("style"):r.attr("style",l),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),e._fields=null},t.prototype.refresh=function(e,t){var r=this,i=r._fields,s=i.panel1;if(i._isResizing)return;(t||t===undefined)&&r._updateElementsCss(),r._updateElements();if(e||e===undefined){if(!n.fn.resizable)return;s&&s.n.is(":ui-resizable")&&s.n.resizable("destroy"),r._initResizer()}},t.prototype._createDisabledDiv=function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return n.browser.msie&&n.extend(u,{"background-color":"#fff",opacity:.1}),n("<div></div>").addClass("ui-disabled").css(u)},t.prototype._splitterify=function(){var e=this,t=e.element,r=e.options,i=e._fields,s,o,u,a,f={n:undefined,content:t.find(">div:eq(0)")},l={n:undefined,content:t.find(">div:eq(1)")};i.originalStyle=t.attr("style"),s=n("<div></div>").appendTo(t),f.n=n("<div></div>").appendTo(s),f.content.length===0?f.content=n("<div></div>"):(i.oriPnl1Content=f.content,i.oriPnl1ContentStyle=f.content.attr("style")),f.content.appendTo(f.n),o=n("<div></div>").appendTo(s),r.barZIndex!==-1&&o.css("z-index",r.barZIndex),u=n("<div></div>").appendTo(o).attr("role","button"),a=n("<span></span>").appendTo(u),l.n=n("<div></div>").appendTo(s),l.content.length===0?l.content=n("<div></div>"):(i.oriPnl2Content=l.content,i.oriPnl2ContentStyle=l.content.attr("style")),l.content.appendTo(l.n),i.wrapper=s,i.panel1=f,i.panel2=l,i.bar=o,i.expander=u,i.icon=a},t.prototype._updateElementsCss=function(){var e=this,t=e.element,n=e.options,r=n.orientation==="vertical",i=e._fields,s=i.wrapper,o=n.collapsingPanel,u=n.collapsingPanel==="panel1"?"panel2":"panel1",a=i.bar,f=i.expander,l=i.icon,c=n.wijCSS,h=c.vSplitterCss,p=c.vSplitterCssPrefix,d=c.hSplitterCss,v=c.hSplitterCssPrefix,m=c.panelCss;t.removeClass(h).removeClass(d).addClass(r?h:d),s.attr("class",c.wrapperCss),i[o].n.removeClass(p+m[o].n).removeClass(v+m[o].n).addClass((r?p:v)+m[o].n),i[o].content.removeClass(p+m[o].content).removeClass(v+m[o].content).removeClass(c.content).addClass((r?p:v)+m[o].content).addClass(c.content),a.attr("class",(r?p:v)+c.barCss+" "+c.header).css("width","").css("height",""),f.attr("class",c.cornerCssPrefix+(r?"bl "+p:"tr "+v)+c.expanderCss+" "+c.stateDefault).css("left","").css("top",""),l.attr("class",c.icon+" "+(r?c.iconArrowLeft:c.iconArrowUp)),i[u].n.removeClass(p+m[u].n).removeClass(v+m[u].n).addClass((r?p:v)+m[u].n),i[u].content.removeClass(p+m[u].content).removeClass(v+m[u].content).removeClass(c.content).addClass((r?p:v)+m[u].content).addClass(c.content),e._updateExpanderCss()},t.prototype._updateExpanderCss=function(){var e=this,t=e.options,n=e._fields,r=n.expander,i=n.icon,s=t.wijCSS,o=s.cornerCssPrefix,u=t.orientation==="vertical",a=t.collapsingPanel!=="panel1",f=u?s.vSplitterCssPrefix:s.hSplitterCssPrefix,l=(u?1:0)*2+(a?1:0),c=["bl","tr","tr","bl"][l],h=["br","tl"][+a],p=[s.iconArrowDown,s.iconArrowUp,s.iconArrowRight,s.iconArrowLeft][l],d=["tr","bl","bl","tr"][l],v=["tl","br"][+a],m=[s.iconArrowUp,s.iconArrowDown,s.iconArrowLeft,s.iconArrowRight][l];r.removeClass(f+t.collapsingPanel+"-"+s.expandedCss).removeClass(f+t.collapsingPanel+"-"+s.collapsedCss).removeClass(o+c).removeClass(o+h).removeClass(o+d).removeClass(o+v),i.removeClass(p).removeClass(m),t.panel1.collapsed||t.panel2.collapsed?(r.addClass(o+c).addClass(o+h).addClass(f+t.collapsingPanel+"-"+s.collapsedCss),i.addClass(p)):(r.addClass(o+d).addClass(o+v).addClass(f+t.collapsingPanel+"-"+s.expandedCss),i.addClass(m))},t.prototype._AddVisiblity=function(e){e.wijTriggerVisibility&&e.wijTriggerVisibility()},t.prototype._updateElements=function(){var e=this,t=e.element,n=e.options,r=n.splitterDistance,i=n.collapsingPanel,s=n.collapsingPanel==="panel1"?"panel2":"panel1",o=e._fields,u=o.wrapper,a=o.panel1,f=o.panel2,l=o.bar,c=o.expander,h=t.width(),p=t.height(),d,v;u.height(p),e._setPanelsScrollMode(),n.orientation==="vertical"?(d=l.outerWidth(!0),r>h-d&&(r=h-d),u.width(h*2),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?h-d:h):(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),!n.panel1.collapsed&&!n.panel2.collapsed&&c.addClass(n.wijCSS.vSplitterCssPrefix+n.collapsingPanel+"-"+n.wijCSS.expandedCss),i==="panel1"?(o.panel1.n.height(p).width(r),o.panel2.n.height(p).width(h-r-d)):(o.panel1.n.height(p).width(r-d),o.panel2.n.height(p).width(h-r)),o.panel1.content.outerHeight(p,!0),l.outerHeight(p,!0),o.panel2.content.outerHeight(p,!0),c.css("cursor","pointer").css("top",p/2-c.outerHeight(!0)/2)):(v=l.outerHeight(!0),r>p-v&&(r=p-v),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?p-v:p):(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),i==="panel1"?(o.panel1.n.width(h).height(r),o.panel2.n.width(h).height(p-r-v),o.panel1.content.outerHeight(r,!0),o.panel2.content.outerHeight(p-r-v,!0)):(o.panel1.n.width(h).height(r-v),o.panel2.n.width(h).height(p-r),o.panel1.content.outerHeight(r-v,!0),o.panel2.content.outerHeight(p-r,!0)),c.css("cursor","pointer").css("left",h/2-c.outerWidth(!0)/2)),c.css("display",n.showExpander?"":"none")},t.prototype._bindEvents=function(){var e=this,t=e.options,r=e._fields,i=r.bar,s=r.expander,o=e.widgetName;s.bind("mouseover."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;s.removeClass(t.wijCSS.stateHover).removeClass(t.wijCSS.stateActive)}).bind("mousedown."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateActive)}).bind("mouseup."+o,function(n){if(t.disabled)return;s.removeClass(t.wijCSS.stateActive),t.collapsingPanel==="panel1"?e._setPanel1Collapsed(!t.panel1.collapsed,n):e._setPanel2Collapsed(!t.panel2.collapsed,n)}),i.bind("mouseover."+o,function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),r.panel1.n.bind("animating."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sizing",n,null)}).bind("animated."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sized",n,null)}),e.element.on("mouseover."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).on("mouseout."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),n(window).bind("resize."+o,function(n){if(t.disabled)return;t.fullSplit&&e.element.is(":visible")&&(e._updateElements(),e._initResizer())})},t.prototype._setPanel1Collapsed=function(e,t){var r=this,i=r.options,s=i.panel1.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel1"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel1.collapsed=e,e?(i.panel2.collapsed=!1,i.collapsingPanel==="panel2"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel1"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._setPanel2Collapsed=function(e,t){var r=this,i=r.options,s=i.panel2.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel2"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel2.collapsed=e,e?(i.panel1.collapsed=!1,i.collapsingPanel==="panel1"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel2"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._initResizer=function(){var e=this,t=e.element,r=e.options,i=e._fields,s=i.bar,o=r.collapsingPanel,u=r.collapsingPanel==="panel1"?"panel2":"panel1",a=r.resizeSettings,f=a.animationOptions,l=f.disabled?0:f.duration,c=t.width(),h=t.height(),p,d,v,m,g,y,b;if(!n.fn.resizable)return;r.orientation==="vertical"?(p=s.outerWidth(!0),d=c-p-r[u].minSize,v=r[o].minSize,v<2&&(v=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minWidth:v,maxWidth:d,handles:"e",helper:r.wijCSS.vSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})):(m=s.outerHeight(!0),g=h-m-r[u].minSize,y=r[o].minSize,y<2&&(y=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minHeight:y,maxHeight:g,handles:"s",helper:r.wijCSS.hSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0;var t=i.panel1.content.find("iframe")[0];t&&e._addTransparentDivForIframe(t,i.panel1);var n=i.panel2.content.find("iframe")[0];n&&e._addTransparentDivForIframe(n,i.panel2)},stop:function(){i._isResizing=!1;var e=i.panel1.content.find("iframe")[0];if(e){var t=n(e).parent().children()[0];n(t).remove()}var r=i.panel2.content.find("iframe")[0];if(r){var s=n(r).parent().children()[0];n(s).remove()}}})),b=n(".ui-resizable-handle",t),r[u].collapsed?b.hide():b.show(),n.browser.msie&&parseInt(n.browser.version)<7&&r.orientation==="vertical"&&b.height(t.height())},t.prototype._addTransparentDivForIframe=function(e,t){var r=t.content.width()-20,i=t.content.height(),s=n("<div style='width:"+r+"px; height:"+i+"px; background-color:gray; position:absolute; z-index:1000; filter:alpha(Opacity=0); opacity: 0'>");s.prependTo(t.content)},t.prototype._adjustLayout=function(e){var t=e.options,n=e._fields,r=n.panel1,i=t.orientation==="vertical"?r.n.width():r.n.height();if(t.splitterDistance===i)return;t.splitterDistance=i,e._updateElements()},t.prototype._setPanelsScrollMode=function(){var e=this,t=e._fields,r=e.options,i=[r.panel1.scrollBars,r.panel2.scrollBars];n.each([t.panel1,t.panel2],function(e,t){i[e]==="auto"?t.content.css("overflow","auto"):i[e]==="both"?t.content.css("overflow","scroll"):i[e]==="none"?t.content.css("overflow","hidden"):i[e]==="horizontal"?t.content.css("overflow-x","scroll").css("overflow-y","hidden"):i[e]==="vertical"&&t.content.css("overflow-x","hidden").css("overflow-y","scroll")})},t}(e.wijmoWidget);t.wijsplitter=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijsplitter')",this.sizing=null,this.sized=null,this.expand=null,this.collapse=null,this.expanded=null,this.collapsed=null,this.barZIndex=-1,this.showExpander=!0,this.splitterDistance=100,this.orientation="vertical",this.fullSplit=!1,this.resizeSettings={animationOptions:{duration:100,easing:"swing",disabled:!1},ghost:!1},this.panel1={minSize:1,collapsed:!1,scrollBars:"auto"},this.panel2={minSize:1,collapsed:!1,scrollBars:"auto"},this.collapsingPanel="panel1",this.wijCSS={cornerCssPrefix:"ui-corner-",arrowCssPrefix:"ui-icon-triangle-1-",panelCss:{panel1:{n:"panel1",content:"panel1-content"},panel2:{n:"panel2",content:"panel2-content"}},wrapperCss:"wijmo-wijsplitter-wrapper",hSplitterCss:"wijmo-wijsplitter-horizontal",vSplitterCss:"wijmo-wijsplitter-vertical",hSplitterCssPrefix:"wijmo-wijsplitter-h-",vSplitterCssPrefix:"wijmo-wijsplitter-v-",collapsedCss:"collapsed",expandedCss:"expanded",resizeHelperCss:"resize-helper",barCss:"bar",expanderCss:"expander"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"}}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijsplitter",i.prototype),n.ui!=null&&n.ui.plugin!=null&&n.ui.plugin.add("resizable","wijanimate",{stop:function(e,t){var r=n(this).data("uiResizable"),i=r.options,s=r.element,o=r._proportionallyResizeElements,u=o.length&&/textarea/i.test(o[0].nodeName),a=u&&n.ui.hasScroll(o[0],"left")?0:r.sizeDiff.height,f=u?0:r.sizeDiff.width,l,c,h;s.css("width",r.originalSize.width).css("height",r.originalSize.height),l={width:r.size.width-f,height:r.size.height-a},c=parseInt(s.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(s.css("top"),10)+(r.position.top-r.originalPosition.top)||null,i.disabledAnimate?(s.css(n.extend(l,h&&c?{top:h,left:c}:{})),s.trigger("animated")):s.animate(n.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var t={width:parseInt(s.css("width"),10),height:parseInt(s.css("height"),10),top:parseInt(s.css("top"),10),left:parseInt(s.css("left"),10)};o&&o.length&&n(o[0]).css({width:t.width,height:t.height}),r._updateCache(t),r._propagate("resize",e),s.trigger("animating")},complete:function(){s.trigger("animated")}})}})})(e.splitter||(e.splitter={}));var t=e.splitter})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(m){var h=jQuery;var j=(function(){function q(){this.wijCSS={superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""};this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"};this.initSelector=":jqmData(role='wijsuperpanel')";this.allowResize=false;this.autoRefresh=false;this.animationOptions={queue:false,disabled:false,duration:250,easing:undefined};this.hScrollerActivating=null;this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.keyboardSupport=false;this.keyDownInterval=100;this.mouseWheelSupport=true;this.bubbleScrollingEvent=true;this.resizableOptions={handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"};this.resized=null;this.dragStop=null;this.painted=null;this.scrolling=null;this.scroll=null;this.scrolled=null;this.showRounder=true;this.vScrollerActivating=null;this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.customScrolling=false;this.listenContentScroll=false}return q})();var i=(function(r){__extends(q,r);function q(){r.apply(this,arguments)}q.prototype.destroy=function(){};q.prototype.needToScroll=function(s){};q.prototype.scrollChildIntoView=function(s){};q.prototype.hScrollTo=function(s,t){};q.prototype.vScrollTo=function(t,s){};q.prototype.scrollPxToValue=function(t,s){};q.prototype.scrollTo=function(s,u,t){};q.prototype.refresh=function(){};q.prototype.paintPanel=function(s){};q.prototype.getContentElement=function(){};return q})(b.wijmoWidget);m.wijsuperpanel=i;var g;if(!h.support.isTouchEnabled||!h.support.isTouchEnabled()){var c="wijmo-wijsuperpanel-handle",n="wijmo-wijsuperpanel-hbarcontainer",p="wijmo-wijsuperpanel-vbarcontainer",f="",d="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",e="<div class='wijmo-wijsuperpanel-hbarcontainer {superpanelHBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {superpanelHBarbuttonLeft} {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {superpanelHBarbuttonRight} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",l="<div class='wijmo-wijsuperpanel-vbarcontainer {superpanelVBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {superpanelVBarbuttonTop} {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {superpanelVBarbuttonBottom} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",k="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonleft {superpanelButtonLeft}'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonright {superpanelButtonRight}'><span class='{icon} {iconCaratRight}'></span></div>",o="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton}  wijmo-wijsuperpanel-buttontop {superpanelButtonTop}'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonbottom {superpanelButtonBottom}'><span class='{icon} {iconCaratDown}'> </span></div>";i.prototype=h.extend(true,{},h.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(t,w){var q=this,y=q.options,v=q._fields(),x=v.hbarDrag,s=v.vbarDrag,u=v.resizer;if(t==="animationOptions"){w=h.extend(y.animationOptions,w)}else{if(t==="hScroller"){if(w.scrollLargeChange!==undefined&&w.scrollLargeChange!==null){q._autoHLarge=false}w=h.extend(y.hScroller,w);q.refresh()}else{if(t==="vScroller"){if(w.scrollLargeChange!==undefined&&w.scrollLargeChange!==null){q._autoVLarge=false}w=h.extend(y.vScroller,w);q.refresh()}else{if(t==="resizableOptions"){w=h.extend(q.resizableOptions,w)}}}}h.Widget.prototype._setOption.apply(q,arguments);if(h.isPlainObject(w)){q.options[t]=w}switch(t){case"allowResize":q._initResizer();break;case"disabled":if(w){if(x!==undefined){x.draggable("disable")}if(s!==undefined){s.draggable("disable")}if(u!==undefined){u.resizable("disable")}}else{if(x!==undefined){x.draggable("enable")}if(s!==undefined){s.draggable("enable")}if(u!==undefined){u.resizable("enable")}}break;case"mouseWheelSupport":case"keyboardSupport":q._bindElementEvents(q,v,q.element,y);break}return q},_create:function(){var q=this,r=q.options;r.vScroller.dir="v";r.hScroller.dir="h";q._initMarkup();q.paintPanel();q._initResizer();if(q.options.disabled){q.disable()}q._detectAutoRefresh();if(r.listenContentScroll){q._listenContentScroll()}if(q.element.is(":hidden")&&q.element.wijAddVisibilityObserver){q.element.wijAddVisibilityObserver(function(){if(q.element.wijRemoveVisibilityObserver){q.element.wijRemoveVisibilityObserver()}q.refresh()},"wijsuperpanel")}},_initMarkup:function(){var q=this.options.wijCSS,r=/\{(\w+?)\}/ig,s=function(u,t){return q[t]};f=q.stateActive;e=e.replace(r,s);l=l.replace(r,s);k=k.replace(r,s);o=o.replace(r,s)},_detectAutoRefresh:function(){var q=this,r=h.wijmo.wijsuperpanel.panels;if(r===undefined){r=[];h.wijmo.wijsuperpanel.panels=r}r.push(q);if(q.options.autoRefresh){if(!h.wijmo.wijsuperpanel.setAutoRefreshInterval){h.wijmo.wijsuperpanel.setAutoRefreshInterval=q._setAutoRefreshInterval;h.wijmo.wijsuperpanel.setAutoRefreshInterval()}}},_setAutoRefreshInterval:function(){var q=h.wijmo.wijsuperpanel.autoRereshInterval,r=h.wijmo.wijsuperpanel.panels,s;s=window.setInterval(function(){window.clearInterval(s);var w=r.length,y=false,v,t,A,u,x,z;for(v=0;v<w;v++){t=r[v];A=t.element[0];u=t.options.autoRefresh;if(u){y=true}x=t.getContentElement();z=t._paintedMark;if(u&&x.is(":visible")&&(z===undefined||z.width!==x[0].offsetWidth||z.height!==x[0].offsetHeight||z.mainWidth!==A.offsetWidth||z.mainHeight!==A.offsetHeight)){t.paintPanel()}}if(y){window.setTimeout(h.wijmo.wijsuperpanel.setAutoRefreshInterval,0)}},q===undefined?500:q)},destroy:function(){var q=this,u=q._fields(),t=q.element,s,r,v=q.options.wijCSS;h.wijmo.wijsuperpanel.panels=h.grep(h.wijmo.wijsuperpanel.panels,function(w){return w!==q},false);if(!u.initialized){return}if(q._radiusKey){q.element.css(q._radiusKey,"")}if(u.intervalID!==undefined){window.clearInterval(u.intervalID);u.intervalID=undefined}if(u.resizer!==undefined){u.resizer.resizable("destroy")}if(u.hbarContainer!==undefined){u.hbarDrag.remove();u.hbarContainer.unbind("."+q.widgetName)}if(u.vbarContainer!==undefined){u.vbarDrag.remove();u.vbarContainer.unbind("."+q.widgetName)}t.unbind("."+q.widgetName);u.contentWrapper.unbind("."+q.widgetName);s=u.stateContainer.find(">.wijmo-wijsuperpanel-button");s.unbind("."+q.widgetName);r=u.templateWrapper;r.contents().each(function(w,x){t.append(x)});u.stateContainer.remove();if(u.tabindex){t.removeAttr("tabindex")}t.removeClass(["wijmo-wijsuperpanel",v.widget,v.content,v.cornerAll].join(" "));h.Widget.prototype.destroy.apply(q,arguments)},_fields:function(){var q=this,s=q.element,r=q.widgetName+"-fields",t=q._fieldsStore;if(t===undefined){t={};s.data(r,t);q._fieldsStore=t}return t},_hasMode:function(q,s){var r=q.scrollMode.split(",");r=h.map(r,function(t){return h.trim(t).toLowerCase()});return h.inArray(s.toLowerCase(),r)>-1},_bindElementEvents:function(r,v,u,w){var q=r._hasMode(w.hScroller,"edge"),t=r._hasMode(w.vScroller,"edge"),s=r.widgetName;if(q||t){if(r._mousemoveBind===undefined){r._mousemoveBind=true;u.bind("mousemove."+s,r,r._contentMouseMove);u.bind("mouseleave."+s,null,function(){r._clearInterval()})}}else{u.unbind("mousemove",r._contentMouseMove);r._mousemoveBind=undefined}if(w.mouseWheelSupport){if(r._mouseWheelBind===undefined){r._mouseWheelBind=true;u.bind("mousewheel."+s,r,r._panelMouseWheel)}}else{u.unbind("mousewheel",r._panelMouseWheel);r._mouseWheelBind=undefined}if(w.keyboardSupport){if(r._keyboardBind===undefined){r._keyboardBind=true;u.bind("keydown."+s,r,r._panelKeyDown)}}else{u.unbind("keydown",r._panelKeyDown);r._keyboardBind=undefined}},_dragStop:function(t,q,r){var s={dragHandle:r};q._trigger("dragStop",t,s)},_contentMouseMove:function(E){if(E.data.options.disabled){return}var x=E.data,z=x.options,t=z.hScroller,q=z.vScroller,u=h(E.currentTarget),D=x._fields(),F=x._hasMode(t,"edge"),w=x._hasMode(q,"edge"),H={X:E.pageX,Y:E.pageY},G=u.offset(),r=G.left,v=G.top,B=t.hoverEdgeSpan,s=q.hoverEdgeSpan,C=u.innerHeight(),A=u.innerWidth(),y="";r=H.X-r;v=H.Y-v;x._clearInterval();if(F){if(r<B){y="left"}if(r>(A-B)){y="right"}}if(w){if(v<s){y="top"}if(v>(C-s)){y="bottom"}}x._setScrollingInterval(D,y,x,false)},_setScrollingInterval:function(t,r,q,s){var u=q.options;if(r.length>0){t.internalFuncID=window.setInterval(function(){q._doScrolling(r,q,s)},u.keyDownInterval)}},_scrollButtonMouseOver:function(s){var q=s.data,t=q.options,r=h(s.currentTarget);if(t.disabled){return}if(!r.hasAllClasses(t.wijCSS.stateDisabled)){r.bind("mouseout."+q.widgetName,q,q._buttonMouseOut).bind("mousedown."+q.widgetName,q,q._buttonMouseDown).bind("mouseup."+q.widgetName,q,q._buttonMouseUp).addClass(t.wijCSS.stateHover);q._buttonScroll(r,q,"buttonshover")}},_buttonScroll:function(t,q,w){var s="",v=q.options,u=q._fields(),r=q._hasMode(v.hScroller,w),x=q._hasMode(v.vScroller,w);if(t.hasClass("wijmo-wijsuperpanel-buttonleft")&&r){s="left"}else{if(t.hasClass("wijmo-wijsuperpanel-buttonright")&&r){s="right"}else{if(t.hasClass("wijmo-wijsuperpanel-buttontop")&&x){s="top"}else{if(t.hasClass("wijmo-wijsuperpanel-buttonbottom")&&x){s="bottom"}}}}if(s.length>0){q._clearInterval();q._doScrolling(s,q,true);q._setScrollingInterval(u,s,q,true)}},_listenContentScroll:function(){var G=this,t=G.options,B=G._fields(),A=B.hbarContainer,v=B.hbarDrag,D=B.vbarContainer,C=B.vbarDrag,u=B.templateWrapper,z=B.contentWrapper,F=z.width(),y=z.height(),x=u&&u.offset(),s=x&&x.left,r=x&&x.top,q=B.contentWidth,E=B.contentHeight;z.bind("scroll",function(H){var J=u.position(),w=J.left,I=J.top;z.scrollTop(0).scrollLeft(0);u.css({left:w,top:I});if(w<=0&&w>F-q){G._updateScrollValue(G.scrollPxToValue(-w,"h"),t.hScroller);G._scrollDrag("h",A,v,true)}if(I<=0&&I>y-E){G._updateScrollValue(G.scrollPxToValue(-I,"v"),t.vScroller);G._scrollDrag("v",D,C,true)}})},_buttonMouseDown:function(s){var q=s.data,r=h(s.currentTarget),t=q.options.wijCSS;if(q.options.disabled){return}if(!r.hasAllClasses(t.stateDisabled)){r.addClass(t.stateActive);q._buttonScroll(r,q,"buttons")}},_buttonMouseUp:function(s){var q=s.data,r=h(s.currentTarget);r.removeClass(q.options.wijCSS.stateActive);q._clearInterval()},_buttonMouseOut:function(s){var q=s.data,t=q.options.wijCSS,r=h(s.currentTarget);r.unbind("mouseout",q._buttonMouseOut).unbind("mousedown",q._buttonMouseDown).unbind("mouseup",q._buttonMouseUp).removeClass(t.stateHover).removeClass(t.stateActive);q._clearInterval()},_updateScrollValue:function(s,q){var r=h.Event("scrollValueChanged");q.scrollValue=s;this._trigger("scrollValueChanged",r,q)},_panelKeyDown:function(u){var s=u.data,v=s.options,r=u.shiftKey,q=u.keyCode,t=b.getKeyCodeEnum();if(!v.keyboardSupport||v.disabled){return}if(q===t.LEFT){s._doScrolling("left",s,r)}else{if(q===t.RIGHT){s._doScrolling("right",s,r)}else{if(q===t.UP){s._doScrolling("top",s,r)}else{if(q===t.DOWN){s._doScrolling("bottom",s,r)}}}}u.stopPropagation();u.preventDefault()},_draggingInternal:function(y,F,A,D){var u=A.dir,z=u==="h",C=z?"left":"top",t=y.position[C]-F._getScrollContainerPadding(C),r=F._getTrackLen(u)-D[z?"outerWidth":"outerHeight"](true),x=t/r,w=(A.scrollMax-A.scrollLargeChange+1),B=x*w,E,q,s;if(B<A.scrollMin){B=A.scrollMin}if(B>w){B=w}E={oldValue:A.scrollValue,newValue:B,dir:u};if(!F._scrolling(true,F,E)){return}if(F.customScroll){s=Math.abs(F.customScroll);q=F.scrollPxToValue(s,A.dir)}F._updateScrollValue(q||B,A);F.customScroll=undefined;F._setDragAndContentPosition(true,false,u,"dragging")},_dragging:function(u,s,r){var v=r.options,q=h(u.target),t=q.parent();if(t.hasAllClasses(n)){r._draggingInternal(s,r,v.hScroller,q)}else{r._draggingInternal(s,r,v.vScroller,q)}},_panelMouseWheel:function(v,x){var z=v.data,q=z.options,y,r="",s,u=q.hScroller,t=q.vScroller,w;if(!q.mouseWheelSupport||q.disabled){return}y=h(v.srcElement||v.originalEvent.target);s=y.closest("."+n,z.element).size()>0;if(x>0){r=s?"left":"top"}else{r=s?"right":"bottom"}if(r.length>0){z._doScrolling(r,z)}w=false;if(r==="left"){w=!z.hNeedScrollBar||Math.abs(u.scrollValue-u.scrollMin)<0.001}if(r==="right"){w=!z.hNeedScrollBar||Math.abs(u.scrollValue-(u.scrollMax-z._getHScrollBarLargeChange()+1))<0.001}if(r==="top"){w=!z.vNeedScrollBar||Math.abs(t.scrollValue-t.scrollMin)<0.001}if(r==="bottom"){w=!z.vNeedScrollBar||Math.abs(t.scrollValue-(t.scrollMax-z._getVScrollBarLargeChange()+1))<0.001}if(!w||!q.bubbleScrollingEvent||r==="left"||r==="right"){v.stopPropagation();v.preventDefault()}},_documentMouseUp:function(s){var q=s.data.self,r=s.data.ele;r.removeClass(q.options.wijCSS.stateActive);q._clearInterval();h(document).unbind("mouseup",q._documentMouseUp)},_scrollerMouseOver:function(t){var r=t.data,u=r.options,q,s=null,v=false;if(u.disabled){return}q=h(t.srcElement||t.originalEvent.target||t.originalEvent.srcElement);if(q.hasAllClasses(u.wijCSS.stateDefault)){s=q;v=true}else{if(q.parent().hasAllClasses(u.wijCSS.stateDefault)){s=q.parent();v=true}else{if(q.hasAllClasses(p)||q.hasAllClasses(n)){s=q}}}if(s){if(v){s.addClass(u.wijCSS.stateHover)}s.bind("mouseout."+r.widgetName,r,r._elementMouseOut);s.bind("mousedown."+r.widgetName,r,r._elementMouseDown);s.bind("mouseup."+r.widgetName,r,r._elementMouseUp)}},_elementMouseUp:function(r){var q=h(r.currentTarget);q.removeClass(f)},_elementMouseDown:function(v){var A=h(v.currentTarget),z=v.data,r,u,q="",y=false,s=false,x,w,t;if(z.options.disabled||v.which!==1){return}if(A.hasClass("wijmo-wijsuperpanel-vbar-buttontop")){q="top";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom")){q="bottom";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-hbar-buttonleft")){q="left";s=true}else{if(A.hasClass("wijmo-wijsuperpanel-hbar-buttonright")){q="right";s=true}else{if(A.hasAllClasses(c)){A.addClass(f);return}else{if(A.hasAllClasses(n)){r=A.find("."+c);x=r.offset();if(v.pageX<x.left){q="left"}else{q="right"}y=true}else{if(A.hasAllClasses(p)){u=A.find("."+c);w=u.offset();if(v.pageY<w.top){q="top"}else{q="bottom"}y=true}}}}}}}z._clearInterval();z._doScrolling(q,z,y);t=z._fields();z._setScrollingInterval(t,q,z,y);if(s){A.addClass(f)}h(document).bind("mouseup."+z.widgetName,{self:z,ele:A},z._documentMouseUp)},doScrolling:function(q,r){this._doScrolling(q,this,r)},_setScrollerValue:function(v,y,B,r,E,C,G){var z=y.scrollMin,A=C?r:B,D=y.scrollValue,F=0,u,w,x,q,s;if(!D){D=z}if(E){u=y.scrollMax-r+1;if(Math.abs(D-u)<0.001){G._clearInterval();return false}w=y.firstStepChangeFix;F=D+A;if(!C&&Math.abs(D-z)<0.0001&&!isNaN(w)){F+=w}if(F>u){F=u}}else{if(Math.abs(D-z)<0.001){G._clearInterval();return false}F=D-A;if(F<0){F=z}}x={oldValue:y.scrollValue,newValue:F,direction:v,dir:y.dir};if(!G._scrolling(true,G,x)){return false}if(G.customScroll){s=Math.abs(G.customScroll);q=G.scrollPxToValue(s,y.dir)}G._updateScrollValue(q||F,y);G.customScroll=undefined;return true},_doScrolling:function(s,z,y){var r=z.options,u=r.vScroller,v=r.hScroller,t=z._getVScrollBarSmallChange(),x=z._getVScrollBarLargeChange(),w=z._getHScrollBarLargeChange(),q=z._getHScrollBarSmallChange();if(s==="top"||s==="bottom"){if(!z._setScrollerValue(s,u,t,x,s==="bottom",y,z)){return}s="v"}else{if(s==="left"||s==="right"){if(!z._setScrollerValue(s,v,q,w,s==="right",y,z)){return}s="h"}}z._setDragAndContentPosition(true,true,s)},_disableButtonIfNeeded:function(C){var w=C._fields(),q=C.options,r=w.buttonLeft,t=w.buttonRight,u=w.buttonTop,D=w.buttonBottom,y,z,v,x,B,E,A,s;if(w.intervalID>0){window.clearInterval(w.intervalID)}if(r!==undefined){y=C._getHScrollBarLargeChange();z=q.hScroller.scrollMax-y+1;v=q.hScroller.scrollValue;x=q.hScroller.scrollMin;if(v===undefined){v=x}if(Math.abs(v-x)<0.001||!w.hScrolling){r.addClass(q.wijCSS.stateDisabled)}else{r.removeClass(q.wijCSS.stateDisabled)}if(Math.abs(v-z)<0.001||!w.hScrolling){t.addClass(q.wijCSS.stateDisabled)}else{t.removeClass(q.wijCSS.stateDisabled)}}if(u!==undefined){B=C._getVScrollBarLargeChange();E=q.vScroller.scrollMax-B+1;A=q.vScroller.scrollValue;s=q.vScroller.scrollMin;if(A===undefined){A=s}if(Math.abs(A-s)<0.001||!w.vScrolling){u.addClass(q.wijCSS.stateDisabled)}else{u.removeClass(q.wijCSS.stateDisabled)}if(Math.abs(A-E)<0.001||!w.vScrolling){D.addClass(q.wijCSS.stateDisabled)}else{D.removeClass(q.wijCSS.stateDisabled)}}},_clearInterval:function(){var r=this._fields(),q=r.internalFuncID;if(q>0){window.clearInterval(q);r.internalFuncID=-1}},_elementMouseOut:function(r){var s=h(r.currentTarget),q=r.data;s.unbind("mouseout",q._elementMouseOut);s.unbind("mousedown",q._elementMouseDown);s.unbind("mouseup",q._elementMouseUp);s.removeClass(q.options.wijCSS.stateHover)},_getScrollOffset:function(w){var s=h(w),x=this._fields(),A=x.contentWrapper,C=x.templateWrapper,y,u,t,z,q,v,r,B={left:null,top:null};if(s.length===0){return B}y=s.offset();u=C.offset();y.leftWidth=y.left+s.outerWidth();y.topHeight=y.top+s.outerHeight();t=A.offset();t.leftWidth=t.left+A.outerWidth();t.topHeight=t.top+A.outerHeight();v=y.left-u.left;if(y.left<t.left){B.left=v}else{if(y.leftWidth>t.leftWidth){r=y.leftWidth-u.left-A.innerWidth();if(v<r){B.left=v}else{B.left=r}}}z=y.top-u.top;if(y.top<t.top){B.top=z}else{if(y.topHeight>t.topHeight){q=y.topHeight-u.top-A.innerHeight();if(z<q){B.top=z}else{B.top=q}}}return B},_scrollDrag:function(u,y,t,q){var H=this,s=H.options,F=u==="v",A=F?s.vScroller:s.hScroller,w=A.scrollMin,C=A.scrollMax,z=A.scrollValue===undefined?w:(A.scrollValue-w),B=H._getLargeChange(u),D=C-w-B+1,G=-1,r,x,E;if(z>D){z=D}if(y!==undefined){r=H._getTrackLen(u);x=t[F?"outerHeight":"outerWidth"]();E=H._getScrollContainerPadding(F?"top":"left");G=(z/D)*(r-x)+E}if(G>=0){t.css(F?"top":"left",G+"px")}H._scrollEnd(q,H,u)},needToScroll:function(r){var q=this._getScrollOffset(r);return q.top!==null||q.left!==null},scrollChildIntoView:function(t){var s=this._getScrollOffset(t),r=s.left,q=s.top;if(r!==null){this.hScrollTo(r)}if(q!==null){this.vScrollTo(q)}},hScrollTo:function(q,r){var s=this.options;this._updateScrollValue(!!r?q:this.scrollPxToValue(q,"h"),s.hScroller);this._setDragAndContentPosition(true,true,"h","nonestop")},vScrollTo:function(s,q){var r=this.options;this._updateScrollValue(!!q?s:this.scrollPxToValue(s,"v"),r.vScroller);this._setDragAndContentPosition(true,true,"v","nonestop")},scrollPxToValue:function(B,r){var q=this.options,s=(r==="h"?"outerWidth":"outerHeight"),D=(r==="h"?"contentWidth":"contentHeight"),u=(r==="h"?"hScroller":"vScroller"),v=this._fields(),C=v.contentWrapper,F=v[D],A=C[s](),x=q[u].scrollMin,E=q[u].scrollMax,t=E-x,z=(r==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange()),y=t-z+1,w=y*(B/(F-A));if(w<x){w=x}if(w>y){w=y}return w},scrollTo:function(q,s,r){this.hScrollTo(q,r);this.vScrollTo(s,r)},refresh:function(){this.paintPanel()},paintPanel:function(r){var q=this,u=q.element,v,w,t,s;if(u.is(":visible")){v=typeof document.activeElement!="unknown"?document.activeElement:undefined;w=q.options;t=q._fields();if(!t.initialized){q._initialize(t,u,q)}q._resetLargeChange(q,t,w);q._bindElementEvents(q,t,u,w);s=t.templateWrapper;s.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"});s.hide();s.show();t.contentWidth=s.width();t.contentHeight=s.height();s.css("float","");q._setRounder(q,u);q._setInnerElementsSize(t,u);if(q._testScroll(q,t,w)===false){return false}q._initScrollBars(q,t,w);q._initScrollButtons(q,t,w);q._trigger("painted");q._paintedMark={date:new Date(),mainWidth:u[0].offsetWidth,mainHeight:u[0].offsetHeight,width:t.contentWidth,height:t.contentWidth};if(v!==undefined&&!r){h(v).focus()}return true}return false},_resetLargeChange:function(q,s,t){var r;if(q._autoVLarge){t.vScroller.scrollLargeChange=null}if(q._autoHLarge){t.hScroller.scrollLargeChange=null}s.vTrackLen=undefined;s.hTrackLen=undefined;if(s.vbarContainer){r=s.vbarContainer.children("."+c+":eq(0)");r.detach();s.vbarContainer.remove();s.vbarContainer=undefined}if(s.hbarContainer){r=s.hbarContainer.children("."+c+":eq(0)");r.detach();s.hbarContainer.remove();s.hbarContainer=undefined}},_initialize:function(t,s,r){var u=r.options.wijCSS;t.initialized=true;s.addClass(["wijmo-wijsuperpanel",u.widget,u.content].join(" "));t.oldHeight=s.css("height");var q=s.css("overflow");s.css("overflow","");s.height(s.height());s.css("overflow",q);r._createAdditionalDom(r,t,s)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(E,r,w,s,y,x,q){var v=s==="h",C="mouseover."+E.widgetName,F=v?"buttonLeft":"buttonTop",B=v?"buttonRight":"buttonBottom",t=x[F],D=x[B],u,z,A;if(E._hasMode(w,"buttons")||E._hasMode(w,"buttonshover")){u=v?k:o;if(t===undefined){z=h(u).appendTo(q);z.bind(C,E,E._scrollButtonMouseOver);x[F]=t=q.children(v?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop");x[B]=D=q.children(v?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")}A={my:v?"left":"top",of:y,at:v?"left":"top",collision:"none"};h.extend(A,w.decreaseButtonPosition);t.position(A);A={my:v?"right":"bottom",of:y,at:v?"right":"bottom",collision:"none"};h.extend(A,w.increaseButtonPosition);D.position(A)}else{if(t!==undefined){t.remove();D.remove();x[F]=x[B]=undefined}}},_initScrollButtons:function(r,t,u){var q=t.contentWrapper,s=t.stateContainer;r._setButtonPosition(r,u,u.hScroller,"h",q,t,s);r._setButtonPosition(r,u,u.vScroller,"v",q,t,s)},_getVScrollBarSmallChange:function(){var r=this.options,q;if(!r.vScroller.scrollSmallChange){q=this._getVScrollBarLargeChange();r.vScroller.scrollSmallChange=q/2}return r.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(t){var H=this,s=H.options,A=H._fields(),G=t==="v",z=G?s.vScroller:s.hScroller,B=G?"innerHeight":"innerWidth",x=G?"contentHeight":"contentWidth",y=G?"_autoVLarge":"_autoHLarge",E,w,r,D,q,u,C,F;if(z.scrollLargeChange){return z.scrollLargeChange}E=z.scrollMax;w=z.scrollMin;r=E-w;D=A.contentWrapper;q=D[B]();u=A[x];C=q/(u-q);F=((r+1)*C)/(1+C);if(isNaN(F)){F=0}z.scrollLargeChange=F;H[y]=true;return z.scrollLargeChange},_getHScrollBarSmallChange:function(){var r=this.options,q;if(!r.hScroller.scrollSmallChange){q=this._getHScrollBarLargeChange();r.hScroller.scrollSmallChange=q/2}return r.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(F,K,H){var y=H.hScroller,C=y.scrollMax,A=y.scrollMin,B=C-A,s=H.vScroller,G=s.scrollMax,E=s.scrollMin,v=G-E,u=K.hbarDrag,J=K.vbarDrag,r,I,x,M,L,z,t,D,q,w;if(F.hNeedScrollBar&&u.is(":visible")){r=F._getHScrollBarLargeChange();I=F._getTrackLen("h");x=F._getDragLength(B,r,I,H.hScroller.scrollMinDragLength);u.width(x);M=u.outerWidth(true)-u.width();u.width(x-M);L=u.children("span");L.css("margin-left",(u.width()-L[0].offsetWidth)/2);if(I<=u.outerWidth(true)){u.hide()}else{u.show()}if(F._isDragging==true){h(document).trigger("mouseup");F._isDragging=false}}if(F.vNeedScrollBar&&J.is(":visible")){z=F._getVScrollBarLargeChange();t=F._getTrackLen("v");D=F._getDragLength(v,z,t,H.vScroller.scrollMinDragLength);J.height(D);q=J.outerHeight(true)-J.height();J.height(D-q);w=J.children("span");w.css("margin-top",(J.height()-w[0].offsetHeight)/2);if(t<=J.outerHeight(true)){J.hide()}else{J.show()}if(F._isDragging==true){h(document).trigger("mouseup");F._isDragging=false}}F._setDragAndContentPosition(false,false,"both")},_getTrackLen:function(t){var s=this,v=s._fields(),u=t+"TrackLen",r=v.hbarContainer,x=v.vbarContainer,q=0,w=0;if(v[u]!==undefined){return v[u]}if(t==="h"){w=s._getScrollContainerPadding("h");q=r.innerWidth()}if(t==="v"){w=s._getScrollContainerPadding("v");q=x.innerHeight()}v[u]=(q-w);return v[u]},_getScrollContainerPadding:function(q){var s=this,u=s._fields(),v=0,r,t;if(q==="h"){v=s._getScrollContainerPadding("left")+s._getScrollContainerPadding("right")}else{if(q==="v"){v=s._getScrollContainerPadding("top")+s._getScrollContainerPadding("bottom")}else{if(q==="left"||q==="right"){r=u.hbarContainer}else{r=u.vbarContainer}t=q+"Padding";if(u[t]!==undefined){v=u[t];return v}if(r&&r.css){v=parseFloat(r.css("padding-"+q))}u[t]=v}}return v},_triggerScroll:function(q,r,t){var s={position:q,dir:r,animationOptions:t};this._trigger("scroll",null,s)},_contentDragAnimate:function(ab,O,U,D,J,x,y){var B=this,X=B.options,T=ab==="v",H=T?X.vScroller:X.hScroller,S=T?"outerHeight":"outerWidth",P=T?"innerHeight":"innerWidth",M=T?"contentHeight":"contentWidth",z=T?"top":"left",G=H.scrollMin,Y=H.scrollMax,Q=Y-G,C=H.scrollValue===undefined?G:(H.scrollValue-G),V=B._getLargeChange(ab),L=Q-V+1,aa=B._fields(),s=aa.contentWrapper,A=aa.templateWrapper,N,w,K,u,W,Z,t,q,E,R,F,I;if(C>L){C=L}N=(aa[M]-s[P]())*(C/L);if(Math.abs(N)<0.001){N=0}N=Math.round(N);w=-1;if(U!==undefined){if(O&&D.is(":animated")&&J!=="nonestop"){D.stop(true,false)}K=B._getTrackLen(ab);u=D[S](true);W=K-u;Z=B._getScrollContainerPadding(z);w=(C/L)*W+Z}if(O&&X.animationOptions&&!X.animationOptions.disabled){if(w>=0&&y!=="dragging"){t=h.extend({},X.animationOptions);t.complete=undefined;if(T){q={top:w}}else{q={left:w}}D.animate(q,t)}E=h.extend({},X.animationOptions);R=X.animationOptions.complete;E.complete=function(){B._scrollEnd(x,B,ab);if(h.isFunction(R)){R(arguments)}};if(O&&A.is(":animated")&&J!=="nonestop"){A.stop(true,false)}if(T){F={top:-N}}else{F={left:-N}}if(!X.customScrolling){A.animate(F,E)}else{B._scrollEnd(x,B,ab,C)}B._triggerScroll(N,ab,E)}else{I=T?"top":"left";if(w>=0&&y!=="dragging"){D[0].style[I]=w+"px"}if(!X.customScrolling){A[0].style[I]=-N+"px"}B._triggerScroll(N,ab);B._scrollEnd(x,B,ab,C)}},_setDragAndContentPosition:function(q,t,s,y,z){var A=this,v=A._fields(),u=v.hbarContainer,r=v.hbarDrag,x=v.vbarContainer,w=v.vbarDrag;if((s==="both"||s==="h")&&v.hScrolling){A._contentDragAnimate("h",t,u,r,y,q,z)}if((s==="both"||s==="v")&&v.vScrolling){A._contentDragAnimate("v",t,x,w,y,q,z)}if(v.intervalID>0){window.clearInterval(v.intervalID)}v.intervalID=window.setInterval(function(){A._disableButtonIfNeeded(A)},500)},_scrolling:function(s,q,u){var t=true;if(s){u.beforePosition=q.getContentElement().position();q._beforePosition=u.beforePosition;t=q._trigger("scrolling",null,u);q.customScroll=u.customScroll}return t},_scrollEnd:function(s,q,r,t){if(s){window.setTimeout(function(){var u=q.getContentElement(),w,v;if(!u.is(":visible")){return}w=q.getContentElement().position();v={dir:r,beforePosition:q._beforePosition,afterPosition:w};if(!isNaN(t)){v.newValue=t}q._trigger("scrolled",null,v)},0)}},_getDragLength:function(t,q,r,u){var w=t/q,v=r/w,s=u;if(v<s){v=s}else{if((v+1)>=r){v=r-1}}return Math.round(v)},_needScrollbar:function(r,s){var q=this._hasMode(r,"scrollbar"),t=r.scrollBarVisibility,u=q&&(t==="visible"||(t==="auto"&&s));return u},_bindBarEvent:function(s,t,r){var q=this;s.bind("mouseover."+q.widgetName,q,q._scrollerMouseOver);if(!h.fn.draggable){return}t.draggable({axis:r==="h"?"x":"y",start:function(v,u){if(q.options.disabled){return false}q._isDragging=true},drag:function(v,u){q._dragging(v,u,q)},containment:"parent",stop:function(u){q._dragStop(u,q,r);h(u.target).removeClass(f);q._isDragging=false}})},_createBarIfNeeded:function(D,v,t,y,A){if(D){var E=this,w,z=E._fields(),s=t+"barContainer",u=t+"barDrag",x=t==="h",q=A[x?"innerHeight":"innerWidth"](),C=z[s]=h(y),r,B;v.append(C);r=C[0][x?"offsetHeight":"offsetWidth"];q=q-r;w={direction:x?"horizontal":"vertical",targetBarLen:r,contentLength:q};if(E._trigger(x?"hScrollerActivating":"vScrollerActivating",null,w)===false){return false}B=z[u]=C.find("."+c);E._bindBarEvent(C,B,t);A[x?"height":"width"](q)}},_setScrollbarPosition:function(s,C,F,r,D,x,q,J,L,E,B){var t=E==="h",z,K,v,A,I,y,H,G,w,u=C.options.wijCSS;if(x){z=r[0][t?"offsetHeight":"offsetWidth"];K=C._getScrollContainerPadding(E);v=t?"top":"left";A=t?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"};I=t?{top:z+"px",left:null}:{left:z+"px"};y=t?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"};H=t?{top:"",left:null}:{left:""};G=F[t?"innerWidth":"innerHeight"]();if(J===v){r.css(A);F.css(I);if(t){r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(u.cornerBL).addClass(u.cornerTL);r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(u.cornerBR).addClass(u.cornerTR);r.removeClass(u.cornerBottom).addClass(u.cornerTop)}else{r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(u.cornerTR).addClass(u.cornerTL);r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(u.cornerBR).addClass(u.cornerBL);r.removeClass(u.cornerRight).addClass(u.cornerLeft)}}else{r.css(y);F.css(H);if(t){r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(u.cornerTL).addClass(u.cornerBL);r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(u.cornerBL).addClass(u.cornerBR);r.removeClass(u.cornerTop).addClass(u.cornerBottom)}else{r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(u.cornerTL).addClass(u.cornerTR);r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(u.cornerBL).addClass(u.cornerBR);r.removeClass(u.cornerLeft).addClass(u.cornerRight)}}w=0;if(q){w=D[0][t?"offsetWidth":"offsetHeight"];if(L==="left"){r.css("right","0px")}else{if(L==="right"){r.css("left","0px")}else{if(L==="top"){r.css("bottom","0px")}else{if(L==="bottom"){r.css("top","0px")}}}}}if(!t&&q){w=0}r[t?"width":"height"](G-K);C._enableDisableScrollBar(E,r,!B)}else{s.css(t?"left":"top","")}},_testScroll:function(F,y,t){var r=y.templateWrapper,z=y.contentWrapper,w=y.stateContainer,q=z.innerWidth(),D=z.innerHeight(),v=y.contentWidth,u=y.contentHeight,C,E,x,A,B,s;y.hScrolling=v>q;y.vScrolling=u>D;C=F.hNeedScrollBar=F._needScrollbar(t.hScroller,y.hScrolling);if(F._createBarIfNeeded(C,w,"h",e,z)===false){return false}if(C&&!y.vScrolling){r.css("float","left");y.contentHeight=r.height();y.vScrolling=y.contentHeight>(D-y.hbarContainer[0].offsetHeight);r.css("float","")}E=F.vNeedScrollBar=F._needScrollbar(t.vScroller,y.vScrolling);if(F._createBarIfNeeded(E,w,"v",l,z)===false){return false}if(E&&!y.hScrolling){r.css("float","left");y.contentWidth=r.width();y.hScrolling=y.contentWidth>(q-y.vbarContainer[0].offsetWidth);r.css("float","");if(y.hScrolling&&!C){C=F.hNeedScrollBar=F._needScrollbar(t.hScroller,y.hScrolling);if(F._createBarIfNeeded(C,w,"h",e,z)===false){return false}}}x=y.hbarContainer;A=y.vbarContainer;B=t.hScroller.scrollBarPosition;s=t.vScroller.scrollBarPosition;F._setScrollbarPosition(r,F,z,x,A,C,E,B,s,"h",y.hScrolling);F._setScrollbarPosition(r,F,z,A,x,E,C,s,B,"v",y.vScrolling)},_enableDisableScrollBar:function(r,s,q){var t=this.options;if(r==="v"){s[q?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled");s.find("."+t.wijCSS.stateDefault)[q?"addClass":"removeClass"](t.wijCSS.stateDisabled)}else{if(r==="h"){s[q?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled");s.find("."+t.wijCSS.stateDefault)[q?"addClass":"removeClass"](t.wijCSS.stateDisabled)}}s.children("."+c)[q?"hide":"show"]()},_initResizer:function(){var r=this,u=r.options,s=r._fields(),v=s.resizer,q,t;if(!h.fn.resizable){return}if(!v&&u.allowResize){q=u.resizableOptions;t=q.stop;q.stop=function(w){r._resizeStop(w,r);if(h.isFunction(t)){t(w)}};s.resizer=v=r.element.resizable(q)}if(!u.allowResize&&s.resizer){v.resizable("destroy");s.resizer=null}},_resizeStop:function(r,q){if(!this.options.autoRefresh){q.paintPanel(true)}q._trigger("resized")},_createAdditionalDom:function(r,t,s){if(!s.attr("tabindex")){s.attr("tabindex","-1");t.tabindex=true}var q=t.stateContainer=h(d),v,u=r.options.wijCSS;t.contentWrapper=q.children();v=t.templateWrapper=t.contentWrapper.children();s.contents().each(function(w,x){var y=h(x);if(y.hasAllClasses(u.superpanelHeader)){t.header=y;return}if(y.hasAllClasses(u.superpanelFooter)){t.footer=y;return}v[0].appendChild(x)});if(t.header!==undefined){s.prepend(t.header)}s[0].appendChild(q[0]);if(t.footer!==undefined){t.footer.insertAfter(q)}},_setRounder:function(q,v){if(this.options.showRounder){v.addClass(this.options.wijCSS.cornerAll);if(q._rounderAdded){return}if(h.browser.msie){return}var t="",s="",u,r;if(h.browser.webkit){s="WebkitBorderTopLeftRadius";t="WebkitBorderRadius"}else{if(h.browser.mozilla){s="MozBorderRadiusBottomleft";t="MozBorderRadius"}else{s="border-top-left-radius";t="border-radius"}}u=v.css(s);r=parseInt(u,10);v.css(t,r+1);q._rounderAdded=true;q._radiusKey=t}else{v.removeClass(this.options.wijCSS.cornerAll)}},_setInnerElementsSize:function(t,y){var q=t.stateContainer,u=t.contentWrapper,x=0,r,s,w,v;if(t.header!==undefined){x+=t.header.outerHeight()}if(t.footer!==undefined){x+=t.footer.outerHeight()}r=q[0].style;s=y.innerHeight()-x;w=y.innerWidth();r.display="none";r.height=s+"px";r.width=w+"px";v=u[0].style;v.height=s+"px";v.width=w+"px";r.display=""}});i.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,new j());h.wijmo.registerWidget("wijsuperpanel",i.prototype)}else{var c="wijmo-wijsuperpanel-handle",d="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>";i.prototype=h.extend(true,{},h.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(r,t){var q=this,u=q.options,s=q._fields();if(r==="animationOptions"||r==="resizableOptions"){t=h.extend(u[r],t)}else{if(r==="hScroller"||r==="vScroller"){t=h.extend(u[r],t);q.refresh()}}h.Widget.prototype._setOption.apply(q,arguments);switch(r){case"allowResize":q._initResizer();break;case"disabled":q._handleDisabledOption(t,q.element);break;case"mouseWheelSupport":case"keyboardSupport":q._bindElementEvents(q,s,q.element,u);break}},_create:function(){var q=this,r=q.options;r.vScroller.dir="v";r.hScroller.dir="h";q._createDom();if(q.options.disabled){q.disable()}if(q.element.is(":hidden")&&q.element.wijAddVisibilityObserver){q.element.wijAddVisibilityObserver(function(){q.refresh();if(q.element.wijRemoveVisibilityObserver){q.element.wijRemoveVisibilityObserver()}},"wijsuperpanel")}},_handleDisabledOption:function(r,s){var q=this;if(r){if(!q.disabledDiv){q.disabledDiv=q._createDisabledDiv(s)}q.disabledDiv.appendTo("body")}else{if(q.disabledDiv){q.disabledDiv.remove();q.disabledDiv=null}}},_createDisabledDiv:function(s){var r=this,v=s?s:r.element,u=v.offset(),t=v.outerWidth(),q=v.outerHeight();return h("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:t,height:q,left:u.left,top:u.top})},_createDom:function(){var q=this,r=q.element;q.paintPanel();q._initResizer();q._bindElementEvents()},_applyOverflow:function(q){var s={},t=this.options,r=t.hScroller.scrollBarVisibility,u=t.vScroller.scrollBarVisibility;s["overflow-x"]=r;s["overflow-y"]=u;if(h.support.isTouchEnabled&&h.support.isTouchEnabled()){if(r==="visible"&&u==="visible"){s["overflow-x"]="auto";s["overflow-y"]="auto"}}q.css(s)},_createAdditionalDom:function(r,t,s){if(!s.attr("tabindex")){s.attr("tabindex","-1");t.tabindex=true}var q=t.stateContainer=h(d),v,u=r.options.wijCSS;r._applyOverflow(t.stateContainer);t.contentWrapper=q.children();s.contents().each(function(w,x){var y=h(x);if(y.hasAllClasses(u.superpanelHeader)){t.header=y;return}if(y.hasAllClasses(u.superpanelFooter)){t.footer=y;return}t.contentWrapper[0].appendChild(x)});if(t.header!==undefined){s.prepend(t.header)}s[0].appendChild(q[0]);if(t.footer!==undefined){t.footer.insertAfter(q)}r._resetDom();t.contentWrapper.css("float","left");t.contentWidth=t.contentWrapper.width();t.contentHeight=t.contentWrapper.height();t.contentWrapper.css("float","")},_bindElementEvents:function(){var q=this,t=q.element,w=q.options,r=q.widgetName,s=t.find(".wijmo-wijsuperpanel-statecontainer"),u=s.scrollTop(),v=s.scrollLeft();s.bind("scroll",function(z,C){var x=h(this).scrollTop(),E=h(this).scrollLeft(),F,B,y,A,D;if(x===u&&E===v){return}if(x===u){B="h";if(E>v){F="right"}else{F="left"}y=w.hScroller.scrollValue;D=E}else{B="v";if(x>u){F="bottom"}else{F="top"}y=w.vScroller.scrollValue;D=x}A=q.scrollPxToValue(D,B);q._trigger("scrolling",null,{dir:B,direction:F,oldValue:y,newValue:A,beforePosition:{left:-v,top:-u}});q._triggerScroll(D,B);q._updateScrollValue(D,B);q._trigger("scrolled",null,{dir:B,beforePosition:{left:-v,top:-u},afterPosition:{left:-E,top:-x},newValue:A});v=E;u=x});if(w.keyboardSupport){if(q._keyboardBind===undefined){q._keyboardBind=true;t.bind("keydown."+r,q,q._panelKeyDown)}}else{t.unbind("keydown."+r,q._panelKeyDown);q._keyboardBind=undefined}if(!w.mouseWheelSupport){t.bind("mousewheel",function(x){x.stopPropagation();return false})}},_setScrollingInterval:function(t,r,q,s){var u=q.options;if(r.length>0){t.internalFuncID=window.setInterval(function(){q._doScrolling(r,q,s)},u.keyDownInterval)}},_triggerScroll:function(q,r){var s={position:q,dir:r};this._trigger("scroll",null,s)},_panelKeyDown:function(u){var s=u.data,v=s.options,r,q,t=b.getKeyCodeEnum();if(!v.keyboardSupport||v.disabled){return}r=u.shiftKey;q=u.keyCode;if(q===t.LEFT){s._doScrolling("left",s,r)}else{if(q===t.RIGHT){s._doScrolling("right",s,r)}else{if(q===t.UP){s._doScrolling("top",s,r)}else{if(q===t.DOWN){s._doScrolling("bottom",s,r)}}}}u.stopPropagation();u.preventDefault()},_doScrolling:function(r,y,x){var w,t,q,u=y._fields(),z=u.stateContainer[0],s={},v;if(r==="top"||r==="bottom"){t="v";q="scrollTop"}else{if(r==="left"||r==="right"){t="h";q="scrollLeft"}}if(x){w=y._getLargeChange(t)}else{w=y._getSmallChange(t)}v=z[q];if(r==="top"||r==="left"){s[q]=v-w}else{s[q]=v+w}y._animateTo(s)},_getLargeChange:function(u){var r=this,t=r._fields(),q,s=u=="h"?t.clientWidth:t.clientHeight;if(s){q=s}else{q=t.stateContainer[u=="h"?"width":"height"]()}return q},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(q,w){var v=this.options.wijCSS.cornerAll;if(this.options.showRounder){w.addClass(v);if(q._rounderAdded){return}if(h.browser.msie){return}var t="",s="",u,r;if(h.browser.webkit){s="WebkitBorderTopLeftRadius";t="WebkitBorderRadius"}else{if(h.browser.mozilla){s="MozBorderRadiusBottomleft";t="MozBorderRadius"}else{s="border-top-left-radius";t="border-radius"}}u=w.css(s);r=parseInt(u,10);w.css(t,r+1);q._rounderAdded=true;q._radiusKey=t}else{w.removeClass(v)}},_initResizer:function(){var r=this,u=r.options,s=r._fields(),v=s.resizer,q,t;if(!h.fn.resizable){return}if(!v&&u.allowResize){q=u.resizableOptions;t=q.stop;q.stop=function(w){r._resetDom();r._trigger("resized");if(h.isFunction(t)){t(w)}};s.resizer=v=r.element.resizable(q)}if(!u.allowResize&&s.resizer){v.resizable("destroy");s.resizer=null}},_resetDom:function(){var r=this,v=r.options,u=r.element,t=r._fields(),s=u.width(),q=u.height();if(t.header!==undefined){q-=t.header.outerHeight()}if(t.footer!==undefined){q-=t.footer.outerHeight()}if(t.stateContainer.length){t.stateContainer.css({width:s,height:q});t.clientWidth=t.stateContainer[0].clientWidth;t.clientHeight=t.stateContainer[0].clientHeight}},_fields:function(){var q=this,s=q.element,r=q.widgetName+"-fields",t=q._fieldsStore;if(t===undefined){t={};s.data(r,t);q._fieldsStore=t}return t},_getScrollOffset:function(w){var s=h(w),x,A,y,u,t,z,q,v,r,B={left:null,top:null};if(s.length===0){return B}x=this._fields();A=x.contentWrapper;y=s.offset();y.leftWidth=y.left+s.outerWidth();y.topHeight=y.top+s.outerHeight();t=A.offset();t.leftWidth=t.left+x.clientWidth;t.topHeight=t.top+x.clientHeight;v=y.left-t.left;if(y.left<t.left){B.left=v}else{if(y.leftWidth>t.leftWidth){r=y.leftWidth-t.left-x.clientWidth;if(v<r){B.left=v}else{B.left=r}}}z=y.top-t.top;if(y.top<t.top){B.top=z}else{if(y.topHeight>t.topHeight){q=y.topHeight-t.top-x.clientHeight;if(z<q){B.top=z}else{B.top=q}}}return B},_initialize:function(s,r,q){var t=q.options.wijCSS;s.initialized=true;r.addClass(["wijmo-wijsuperpanel",t.widget,t.content].join(" "));q._setRounder(q,r);q._createAdditionalDom(q,s,r);q._trigger("painted");q._initScrollPosition()},_initScrollPosition:function(){var x=this.options,v=x.hScroller,w=x.vScroller,u=v.scrollValue,t=w.scrollValue,s=this._fields(),q=u?this._scrollValueToPx(u,"h"):0,r=t?this._scrollValueToPx(t,"v"):0;if(u){s.stateContainer.prop("scrollLeft",q)}if(t){s.stateContainer.prop("scrollTop",r)}},_updateScrollValue:function(s,r){var u=this.scrollPxToValue(s,r),v=this.options,q=(r==="h"?"hScroller":"vScroller"),t=h.Event("scrollValueChanged");v[q].scrollValue=u;this._trigger("scrollValueChanged",t,v[q])},scrollPxToValue:function(B,t){var s=this.options,A=(t==="h"?"clientWidth":"clientHeight"),r=(t==="h"?"scrollWidth":"scrollHeight"),w=(t==="h"?"hScroller":"vScroller"),x=this._fields(),C=x.stateContainer[0],u=C[A],q=C[r],z=s[w].scrollMin,D=s[w].scrollMax,v=D-z,y=v*B/(q-u)+z;return y},_scrollValueToPx:function(B,t){var s=this.options,A=(t==="h"?"clientWidth":"clientHeight"),r=(t==="h"?"scrollWidth":"scrollHeight"),w=(t==="h"?"hScroller":"vScroller"),x=this._fields(),C=x.stateContainer[0],u=C[A],q=C[r],z=s[w].scrollMin,D=s[w].scrollMax,v=D-z,y=(B-z)*(q-u)/v;return y},_animateTo:function(v){var q=this,t=q.element,u=q.options,r=u.animationOptions,s=q._fields();s.stateContainer.animate(v,r)},destroy:function(){var q=this,t=q.element,v=q.options,s=q._fields(),r,u=v.wijCSS;if(q.disabledDiv){q.disabledDiv.remove();q.disabledDiv=null}if(s.resizer!==undefined){s.resizer.resizable("destroy")}t.unbind("."+q.widgetName);t.removeClass(["wijmo-wijsuperpanel",u.widget,u.content,u.cornerAll].join(" "));r=s.contentWrapper;r.contents().each(function(w,x){t.append(x)});s.stateContainer.remove();h.Widget.prototype.destroy.apply(q,arguments)},doScrolling:function(q,r){this._doScrolling(q,this,r)},paintPanel:function(r){var q=this,t=q.element,s=q._fields();if(!s.initialized){this._initialize(s,t,q)}},needToScroll:function(q){var r=this._getScrollOffset(q);return r.top!==null||r.left!==null},scrollChildIntoView:function(q){var t=this._getScrollOffset(q),s=t.left,r=t.top;this.scrollTo(s,r)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(q,r){var s=!!r?this._scrollValueToPx(q):q;this._animateTo({scrollLeft:s})},vScrollTo:function(s,q){var r=!!q?this._scrollValueToPx(s):s;this._animateTo({scrollTop:r})},refresh:function(){var q=this,r=q._fields();q._applyOverflow(r.stateContainer);q._resetDom()},scrollTo:function(r,u,t){var s=!!t?this._scrollValueToPx(r):r,q=!!t?this._scrollValueToPx(u):u;this._animateTo({scrollTop:q});this._animateTo({scrollLeft:s})}});i.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,{wijCSS:{superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:true,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}});h.wijmo.registerWidget("wijsuperpanel",i.prototype)}})(b.superpanel||(b.superpanel={}));var a=b.superpanel})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijmenu",i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r._itemWidgetName="wijmenuitem",r.prototype._preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},r.prototype._initState=function(){var e=this;e.options.items||(e.options.items=[])},r.prototype._create=function(){var t=this,i=t.options,s=i.direction,o=i.mode,u,a=t.element,f,l=e.getKeyCodeEnum(),c=i.disabled;t._initState(),a.is(":hidden")&&a.wijAddVisibilityObserver&&a.wijAddVisibilityObserver(function(){t.refresh(),a.wijRemoveVisibilityObserver&&a.wijRemoveVisibilityObserver()},"wijmenu"),a.data("wijmomenu",n.camelCase(t.widgetFullName)),t.clickNameSpace="click.wijmenudoc"+t._newId(),a.hide(),t.cssPre="wijmo-wijmenu",t.nowIndex=9999,t.activeItem=null,t.refresh(),a.attr("tabIndex",0),t._getDisabled()&&(t.disable(),i.disabledState===!0&&(i.disabled=c)),a.bind("keydown.wijmenuEvent",function(e){if(t._getDisabled())return;o==="sliding"&&t._getSublist().stop(!0,!0);var n=t.activeItem,a,c,h=i.orientation;n?(a=n._isRoot(),f=n._getSublist()):a=!0;switch(e.keyCode){case l.PAGE_UP:t.previousPage(e),t._preventEvent(e);break;case l.PAGE_DOWN:t.nextPage(e),t._preventEvent(e);break;case l.UP:if(h==="vertical"||o==="sliding"||!a)t.previous(e),t._preventEvent(e);break;case l.DOWN:h==="vertical"||o==="sliding"||!a?(t.next(e),t._preventEvent(e)):n&&o==="flyout"&&r._hasVisibleSubMenus(n)&&f.is(":hidden")&&n._showFlyoutSubmenu(e,function(){t.activate(e,n._getFirstSelectableSubItem())});break;case l.RIGHT:h==="horizontal"&&a&&o==="flyout"?(s==="rtl"?t.previous(e):t.next(e),t._preventEvent(e)):n&&(u=n.getParent(),s==="rtl"?t._keyDownToCloseSubmenu(o,e,u):t._keyDownToOpenSubmenu(n,o,e,f));break;case l.LEFT:h==="horizontal"&&a&&o==="flyout"?(s==="rtl"?t.next(e):t.previous(e),t._preventEvent(e)):(n&&(u=n.getParent()),s==="rtl"?t._keyDownToOpenSubmenu(n,o,e,f):t._keyDownToCloseSubmenu(o,e,u));break;case l.ENTER:if(!n)return;c=n._getLink();if(o==="flyout")break;t.select(),c.is("a")&&c.attr("href")==="#"&&t._preventEvent(e);break;case l.TAB:t.next(e),t._preventEvent(e)}})},r.prototype._keyDownToOpenSubmenu=function(e,t,n,i){var s=this;t==="flyout"&&r._hasVisibleSubMenus(e)?i.is(":hidden")&&e._showFlyoutSubmenu(n,function(){s.activate(n,e._getFirstSelectableSubItem())}):t==="sliding"&&i.length>0&&e._getLink().trigger("click",e._getFirstSelectableSubItem())},r.prototype._keyDownToCloseSubmenu=function(e,t,r){var i=this,s=i.options,o;e==="flyout"?r&&(r._hideCurrentSubmenu(t),i.activate(t,r)):(s.backLink&&i._backLink&&i._backLink.is(":visible")&&i._backLink.trigger("click",function(){r&&i.activate(t,r)}),o=n("."+s.wijCSS.wijmenuBreadcrumb,i.domObject.menucontainer).find("li a"),o.length>0&&o.eq(o.length-2).trigger("click",function(){r&&i.activate(t,r)}))},r.prototype._createMenuItems=function(){var e=this,t=[],i=e.options,s=e.options.items.length,o=e._getSublist().children("li").length,u,a,f;for(u=0;u<s-o;u++)e._getSublist().append("<li>");return i.ensureSubmenuOnBody&&i.mode==="flyout"&&(e._submenuContainer=n("<div>").addClass(i.wijCSS.helperReset).addClass(i.wijCSS.widget).addClass(i.wijCSS.header).addClass(i.wijCSS.wijmenu).addClass(i.wijCSS.wijmenuSubmenuContainer),i.orientation==="horizontal"&&i.mode==="flyout"&&e._submenuContainer.addClass(i.wijCSS.wijmenuHorizontal),f=n("<ul>").addClass(i.wijCSS.wijmenuList).addClass(i.wijCSS.helperReset).data(n.camelCase(e.widgetFullName),e).data("wijmomenu",n.camelCase(e.widgetFullName))),n(">li",e._getSublist()).each(function(s,o){var u=n(this),l=r._getMenuItemOptions(e.options,s),c,h;return a=e._createItemWidget(u,l),t.push(a),e.options.items[s]=a.options,i.ensureSubmenuOnBody&&i.mode==="flyout"&&(h=a._getSublist(),e._bindMousehoverEvent(h),h.children().length>0&&(c=n("<li>").addClass(i.wijCSS.widget).addClass(i.wijCSS.wijmenuItem).addClass(i.wijCSS.stateDefault).addClass(i.wijCSS.cornerAll).addClass(i.wijCSS.wijmenuParent).addClass(i.wijCSS.header).append(h),n(c).appendTo(f))),i.ensureSubmenuOnBody&&i.mode==="flyout"&&n(e._submenuContainer).append(f).appendTo("body"),this}),t},r.prototype._createItemWidget=function(e,t){var i=r._itemWidgetName;return n.fn[i]&&e[i](t),r._getItemWidget(e)},r.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo(n.domObject.menucontainer)):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},r.prototype._getDisabled=function(){var e=this,t=e.options;return t.disabledState===!0||t.disabled===!0},r.prototype._createDisabledDiv=function(e){return n("<div></div>").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},r.prototype._innerDestroy=function(){var e=this,t=e.options;e.destroying=!0,e[t.mode==="flyout"?"_killFlyout":"_killDrilldown"](),e._killMenuItems(),e._killtrigger(),e._killElement(),t.ensureSubmenuOnBody&&t.mode==="flyout"&&e._submenuContainer&&e._submenuContainer.remove(),e.destroying=!1},r.prototype.destroy=function(){var e=this;this._innerDestroy(),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),t.prototype.destroy.call(this)},r.prototype.activate=function(e,t){if(!t)return;var n=this,i=n.options,s=n.domObject.scrollcontainer,o,u,a=!1,f=!0;o=(t.jquery?t:t.element).eq(0);if(n.activeItem&&n.activeItem.element.get(0)===o.get(0))return;n.deactivate(e),n.activeItem=r._getItemWidget(o),u=o.children(":first"),n._trigger("focus",e,{item:n.activeItem}),n.options.mode==="sliding"&&(f=o.parent().is("."+i.wijCSS.wijmenuCurrent),a=f&&n._hasScroll()&&s.wijsuperpanel("needToScroll",o),a&&(n._linkContainer.link=u,n._linkContainer.needToFocus=!0,s.wijsuperpanel("scrollChildIntoView",o))),u.addClass(i.wijCSS.stateFocus).end(),n.element.removeAttr("aria-activedescendant"),n.element.attr("aria-activedescendant",o.attr("id")),f&&!a&&u.is("a")&&u.focus()},r.prototype.deactivate=function(e){var t=this,n=t.options,r=t.activeItem;if(!r)return;setTimeout(function(){r._getLink().removeClass(n.wijCSS.stateFocus).removeAttr("id"),t._trigger("blur")},0),t.activeItem=null},r.prototype.next=function(e){this._move("next",function(e){return e._getFirstSelectableSubItem()},e)},r.prototype.previous=function(e){this._move("previous",function(e){return e._getLastSelectableSubItem()},e)},r.prototype.first=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getFirstSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.last=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getLastSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.nextPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.last()){t.activate(e,a._getFirstSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=o-(t.offset().top-s+t.height()),i=t.height();return r<i&&r>-i}),u.length?u=u[u.length-1]:u=a._getLastSelectableSubItem(),t.activate(e,u)}else!i||t.last()?f=a._getFirstSelectableSubItem():f=a._getLastSelectableSubItem(),t.activate(e,f)},r.prototype.previousPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.first()){t.activate(e,a._getLastSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=t.offset().top-s+o-t.height(),i=t.height();return r<i&&r>-i}),u.length?u=u[0]:u=a._getFirstSelectableSubItem(),t.activate(e,u)}else!i||t.first()?f=a._getLastSelectableSubItem():f=a._getFirstSelectableSubItem(),t.activate(e,f)},r.prototype.select=function(e){var t=this,n=t.activeItem,r;t._trigger("select",e,{item:n}),t.options.checkable&&(r=!n.options.selected,n._setOption("selected",r))},r.prototype._getActiveItemElement=function(){return this.activeItem?this.activeItem.element:null},r.prototype.setItemDisabled=function(e,t){var r=n(e,this.element),i=this.options;r.find("."+i.wijCSS.wijmenuItem+">a").attr("disabled",t),r.find(">a").toggleClass(i.wijCSS.stateDisabled,t)},r.prototype._setOption=function(e,t){var n=this;if(n.destroying)return;n["_set_"+e]&&n["_set_"+e](t),n.options[e]=t,e==="disabled"&&n._handleDisabledOption(t,n.domObject.menucontainer)},r.prototype._set_items=function(e){var t=this;t._getSublist().children().remove(),t.options.items=e,t.refresh()},r.prototype._set_mode=function(e){var t=this;t._innerDestroy(),t.options.mode=e,t.refresh()},r.prototype._set_backLink=function(e){var t=this,r=t.options,i;this.options.backLink=e,t.options.mode==="sliding"&&(t._killDrilldown(),t._drilldown(),i=n("."+r.wijCSS.wijmenuBreadcrumb,t.domObject.menucontainer),t._resetDrilldownMenu(i))},r.prototype._set_direction=function(e){var t=this;t._innerDestroy(),t.refresh()},r.prototype._set_orientation=function(e){var t=this,r=t.domObject.menucontainer,i=t.options.direction,s="ui-icon-triangle-1-",o=i==="rtl"?"w":"e",u=e==="horizontal"?o:"s",a=e==="horizontal"?"s":o;r.removeClass(t.cssPre+"-vertical "+t.cssPre+"-horizontal"),t.options.mode==="flyout"?(r.addClass(t.cssPre+"-"+e),n.each(t.getItems(),function(e,t){if(t.getItems().length===0)return;t._getLink().find("."+s+u).removeClass(s+u+" "+s+a).addClass(s+a)})):r.addClass(t.cssPre+"-vertical")},r.prototype._getTriggerEle=function(){return r._getOuterElement(this.options.trigger,"."+this.options.wijCSS.wijmenu)},r.prototype._set_triggerEvent=function(e){var t=this,n=t.options,r=t._getTriggerEle();t._killtrigger(),n.triggerEvent=e,r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._set_trigger=function(e){var t=this,n=t.options,r;t._killtrigger(),n.trigger=e,r=t._getTriggerEle(),r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._initTrigger=function(e){var t=this.options,r=t.triggerEvent,i=this,s=i.domObject.menucontainer,o=".wijmenuEvent";e.is("iframe")&&(e=n(e.get(0).contentWindow.document));switch(r){case"click":e.bind(r+o,function(e){t.mode!=="popup"&&i._displayMenu(e),e.stopPropagation()});break;case"mouseenter":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"dblclick":e.bind(r+o,function(e){i._displayMenu(e),e.stopPropagation()});break;case"rtclick":e.bind("contextmenu"+o,function(e){s.hide(),i._displayMenu(e),e.preventDefault(),e.stopPropagation()})}},r.prototype._killtrigger=function(){var e=this.options,t;e.trigger!==""&&(t=n(e.trigger),t.is("iframe")&&(t=n(t.get(0).contentWindow.document)),t&&t.length>0&&t.unbind(".wijmenuEvent").unbind("wijmenuEvent"))},r.prototype._move=function(e,t,n){var i=this,s=i._getActiveItemElement(),o,u,a;if(!s||!s.length){i.activate(n,t(i));return}a=r._getItemWidget(s),o=a[e](),u=a._getParentOrMenu(),o?i.activate(n,o):i.activate(n,t(u))},r.prototype._bindMousehoverEvent=function(e){var t=this,r=t.options;e.delegate("li>."+r.wijCSS.wijmenuLink,"mouseenter.wijmenuEvent",function(){var e=n(this).hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||e)return;n(this).addClass(r.wijCSS.stateHover)}).delegate("li>."+r.wijCSS.wijmenuLink,"mouseleave.wijmenuEvent",function(){var e=n(this).hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||e)return;n(this).removeClass(r.wijCSS.stateHover),n(this).data("subMenuOpened")&&n(this).addClass(r.wijCSS.stateActive)})},r.prototype.refresh=function(){var e=this,t=e.element,r=e.options,i=r.direction,s,o,u,a,f;e.domObject&&e._innerDestroy();if(t.is("ul"))e._rootMenu=t,s=t.wrap("<div></div>").parent(),o=s.wrap("<div></div>").parent();else{if(!t.is("div"))return;e._rootMenu=n("ul:first",t),s=t,o=t.wrap("<div></div>").parent()}i==="rtl"&&e._rootMenu.addClass(r.wijCSS.wijmenuRtl),s.addClass("scrollcontainer checkablesupport"),o.addClass(r.wijCSS.widget).addClass(r.wijCSS.header).addClass(r.wijCSS.wijmenu).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix).attr("aria-activedescendant",r.wijCSS.activeMenuitem),r.orientation==="horizontal"&&r.mode==="flyout"&&o.addClass(r.wijCSS.wijmenuHorizontal),u={scrollcontainer:s,menucontainer:o},e.domObject=u,e._getSublist().data("topmenu",!0),e._getSublist().hasAllClasses(r.wijCSS.wijmenuList)||e._getSublist().addClass(r.wijCSS.wijmenuList).addClass(r.wijCSS.helperReset),e._items=e._createMenuItems(),t.show(),e._bindMousehoverEvent(t),this[r.mode==="flyout"?"_flyout":"_drilldown"](),r.trigger!==""&&(a=e._getTriggerEle(),a.length>0&&(o.hide(),e._initTrigger(a))),n(document).bind(e.clickNameSpace,function(t){var i=r.trigger;if(n(t.target).parent().is("."+r.wijCSS.wijmenuAllLists))return;if(n(t.target).closest(r.trigger).is(r.trigger))return;var s=n(t.target).closest("."+r.wijCSS.wijmenu);if(s.length===0){if(r.mode==="sliding"){f=n("."+r.wijCSS.wijmenuBreadcrumb,o);if(r.trigger==="")return;e._resetDrilldownMenu(f)}else if(r.mode==="flyout"&&r.triggerEvent!=="mouseenter"){e._hideAllMenus(t);return}a&&a.length>0&&e._hideMenu(t)}})},r.prototype._flyout=function(){var e=this.domObject.menucontainer,t=this.options,r=this.getItems();e.attr("role","menu"),t.orientation==="horizontal"&&e.attr("role","menubar"),n.each(r,function(e,t){t._flyout()})},r.prototype._hideAllMenus=function(e){var t=this,r,i,s=function(t){t.getItems().length>0&&(n.each(t.getItems(),function(e,t){s(t)}),t._hideSubmenu(!1,e))};n.each(t._items,function(e,t){s(t)});if(t.options.trigger!==""){r=t.domObject.menucontainer;if(r.data("isAnimated"))return;i=t._getTriggerEle();if(i.length===0)return;t._hideMenu(e)}},r.prototype.hideAllMenus=function(e){this._hideAllMenus(e)},r.prototype._killFlyout=function(){n.each(this.getItems(),function(){this._killFlyout()})},r.prototype._killElement=function(){var e=this,t=e.options,r=e._getSublist();r.removeClass(t.wijCSS.wijmenuList).removeClass(t.wijCSS.helperReset).removeClass(t.wijCSS.wijmenuContent).removeClass(t.wijCSS.helperClearFix),n(document).unbind(e.clickNameSpace),e.element.is("ul")?e.element.unwrap().unwrap():e.element.unwrap(),e.domObject=null,e.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject"),r.undelegate(".wijmenuEvent")},r.prototype._killMenuItems=function(){var e=this,t=e.getItems(),n;for(n=t.length-1;n>=0;n--)t[n].destroy(!0);e._items.length=0},r.prototype._sroll=function(){var e=this.domObject.scrollcontainer,t=n.extend({hScroller:{scrollBarVisibility:"hidden"}},this.options.superPanelOptions);e.height(this.options.maxHeight),e.wijsuperpanel(t)},r.prototype._initScrollCallback=function(){var e=this,t=e.domObject.scrollcontainer;e._linkContainer={link:null,needToFocus:!1},t.wijsuperpanel({scrolled:function(){var t=e._linkContainer.link;e._linkContainer.needToFocus&&t&&t.is("a")&&(t.focus(),e._linkContainer.needToFocus=!1)}})},r.prototype._resetScroll=function(e){var t=this,n=t._rootMenu.parent(),r=5,i=t.domObject.scrollcontainer,s=e._getSublist();n.height(s.height()),i.wijsuperpanel("option","hScroller",{scrollValue:0}),i.wijsuperpanel("option","vScroller",{scrollValue:0}),i.wijsuperpanel("paintPanel"),t._hasScroll()&&(s.prev().length>0&&(r=s.prev().css("padding-left").replace(/px/g,"")),s.width(i.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-r),n.height(s.height()),i.wijsuperpanel("paintPanel"))},r.prototype._hasScroll=function(){var e=this.domObject.scrollcontainer;return e.data("wijmoWijsuperpanel").vNeedScrollBar},r.prototype._resetDrillChildMenu=function(e){var t=this.options;e.removeClass(t.wijCSS.wijmenuScroll).removeClass(t.wijCSS.wijmenuCurrent).height("auto")},r.prototype._resetDrilldownMenu=function(e,t){var r=this,i=r.options,s=r._getSublist(),o=r.domObject.menucontainer,u=n("<li>"+i.crumbDefaultText+"</li>").addClass(i.wijCSS.wijmenuBreadcrumbText),a=function(e){n.each(e,function(e,t){var n=t._getSublist(),i=t.getItems();n.hide(),r._resetDrillChildMenu(n),i.length>0&&a(i)})};n("."+i.wijCSS.wijmenuCurrent,o).removeClass(i.wijCSS.wijmenuCurrent),s.animate({left:0},i.showDuration,null,function(){a(r.getItems()),s.addClass(i.wijCSS.wijmenuCurrent),t&&t()}),n("."+i.wijCSS.wijmenuAllLists,o).find("span").remove(),e.empty().append(u),n("."+i.wijCSS.wijmenuFooter,o).empty().hide(),r._resetScroll(r)},r.prototype._drilldown=function(){var e=this,t=e._getSublist(),i=e.domObject.menucontainer.attr("role","menu"),s,o=e.options,u=o.direction,a=n("<ul></ul>").addClass(o.wijCSS.wijmenuBreadcrumb).addClass(o.wijCSS.stateDefault).addClass(o.wijCSS.cornerAll).addClass(o.wijCSS.helperClearFix),f=n("<li>"+o.crumbDefaultText+"</li>").addClass(o.wijCSS.wijmenuBreadcrumbText),l=n('<li><a href="#">'+o.topLinkText+"</a></li>").addClass(o.wijCSS.wijmenuAllLists);t.wrap("<div>").parent().css("position","relative"),i.addClass(o.wijCSS.wijmenuIpod).addClass(o.wijCSS.wijmenuContainer),o.backLink?a.addClass(o.wijCSS.wijmenuFooter).appendTo(i).hide():a.addClass(o.wijCSS.wijmenuHeader).prependTo(i),o.backLink||a.append(f),s=i.width(),t.addClass(o.wijCSS.wijmenuContent).addClass(o.wijCSS.wijmenuCurrent).addClass(o.wijCSS.content).addClass(o.wijCSS.helperClearFix).css({width:s}),n.each(e.getItems(),function(e,t){t._setDrilldownUlStyle()}),e._sroll(),e._initScrollCallback(),e._resetScroll(e),e.element.data("firstLeftValue",parseFloat(t.css("left"))),t.delegate("li>."+o.wijCSS.wijmenuLink,"click",function(s,f){var c=n(this).parent(),h=c.attr("disabled"),p,d,v,m,g,y,b,w,E,S=r._getItemWidget(c),x,T;if(e._getDisabled()||h)return;if(e._isSliding)return;t.stop(!0,!0),E=r._hasVisibleSubMenus(S);if(!E){e._leafNodeClick(s,S,a);return}p=S._getSublist();if(p.hasAllClasses(o.wijCSS.wijmenuCurrent))return;if(!e._trigger("showing",s,S))return;e._isSliding=!0,d=S._getParentOrMenu()._getSublist(),v=d.data("topmenu")?0:parseFloat(t.css("left")),u==="rtl"?y=Math.round(v+parseFloat(i.width().toString())):y=Math.round(v-parseFloat(i.width().toString())),b=n("."+o.wijCSS.wijmenuFooter,i),w=function(t,s){var u=t,a=n("."+o.wijCSS.wijmenuCurrent,i),f,l;if(a.get(0)===e._getSublist().get(0))return;s?(f=s._getSublist(),l=s):(f=a.parent().closest("ul",i[0]),l=r._getItemWidget(a.parent())._getParentOrMenu()),a.hide().attr("aria-expanded","false"),e._resetDrillChildMenu(a),e._resetScroll(l),f.addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),f.hasAllClasses(o.wijCSS.wijmenuContent)&&(u.remove(),b.hide())},e._resetDrillChildMenu(d),e._resetScroll(S),e._slidingAnimation(t,y,function(){e._trigger("shown",s,S),e.activate(s,f||S),e.select(s),e._isSliding=!1}),p.show().addClass(o.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),o.backLink?b.find("a").size()===0&&(b.show(),x=n("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconArrowLeft),T=n("<span></span>").addClass(o.wijCSS.wijmenuBacklinktext),e._backLink=n('<a href="#"></a>').append(x).append(T).appendTo(b).click(function(r,s){if(e._getDisabled())return;var o=e._getCurrentItemInSliding(),a=n(this),f;if(!e._trigger("hidding",r,o))return;t.stop(!0,!0);if(u==="rtl")f=Math.round(t.css("left").replace("px",""))-Math.round(i.width());else{f=Math.round(t.css("left").replace("px",""))+Math.round(i.width());if(f>v)return}e._slidingAnimation(t,f,function(){e._trigger("hidden",r,o),w(a),s&&s()}),r.preventDefault()}),T.width(b.width()-x.width()),T.text(o.backLinkText)):(a.find("li").size()===1&&(a.empty().append(l),l.find("a").click(function(t,r){var i=n(this).parent(),s=e._getCurrentItemInSliding();e._slidingMenu(t,i,s,null,function(t){t?(w(null,t),r&&r()):e._resetDrilldownMenu(a,r)}),t.preventDefault()})),n("."+o.wijCSS.wijmenuCurrentCrumb,i).removeClass(o.wijCSS.wijmenuCurrentCrumb),m=S._getLink().text(),g=n("<li></li>").addClass(o.wijCSS.wijmenuCurrentCrumb).append(n('<a href="#">'+m+"</a>").addClass(o.wijCSS.wijmenuCrumb)),g.appendTo(a).find("a").click(function(t,r){if(e._getDisabled())return;var i=n(this).parent(),s;i.is("."+o.wijCSS.wijmenuCurrentCrumb)||(s=e._getCurrentItemInSliding(),e._slidingMenu(t,i,s,S,function(e){w(null,e),r&&r()})),t.preventDefault()}),g.prev().append(n("<span></span>").addClass(o.wijCSS.icon).addClass(o.wijCSS.iconCaratRight))),n(this).attr("href")==="#"&&s.preventDefault()})},r.prototype._slidingMenu=function(e,t,n,r,i){var s=this,o=s._getSublist(),u=s.options.direction,a=s.domObject.menucontainer,f=a.width(),l=t.parent().children().length-1,c,h,p,d,v=function(e,t,n){c=(u==="rtl"?1:-1)*t*f,s._slidingAnimation(o,c,function(){n&&n(e)})},m=function(t,n){var r;if(t!==n){r=s._trigger("hidding",e,t);if(r)return l--,d&&d(),d=function(){s._trigger("hidden",e,t)},m(t.getParent(),n)}return t};h=m(n,r),h!==n&&(v(h,l,function(){d&&d(),i&&i(h)}),p=t.parent().children().eq(l),p.addClass("wijmo-wijmenu-current-crumb").find("span").remove(),p.nextAll().remove())},r.prototype._getCurrentItemInSliding=function(){var e=this,t=e.domObject.menucontainer,i=n(".wijmo-wijmenu-current",t),s=r._getItemWidget(i.parent());return s},r.prototype._leafNodeClick=function(e,t,n){var r=this,i=r.options,s;r.activate(e,t),r.select(e),i.trigger&&(s=r._getTriggerEle(),s.length&&(r._hideMenu(e),r._resetDrilldownMenu(n))),t._getLink().attr("href")==="#"&&e.preventDefault()},r.prototype._slidingAnimation=function(e,t,n){var r=this.options.slidingAnimation;r&&!r.disabled?e.stop(!0,!0).animate({left:t},r.duration,r.easing,n):(e.css("left",t),n.call(this))},r.prototype._killDrilldown=function(){var e=this._getSublist(),t=this.options,r=this.domObject,i={width:"",height:""};e.css(i).removeClass(t.wijCSS.content),r.scrollcontainer&&r.scrollcontainer.parent().length>0&&(r.scrollcontainer.css(i),r.scrollcontainer.wijsuperpanel("destroy"),r.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(e)),e.prevAll().remove(),r.menucontainer.removeClass(t.wijCSS.wijmenuIpod).removeClass(t.wijCSS.wijmenuContainer),n("."+t.wijCSS.wijmenuCurrent,r.menucontainer).removeClass(t.wijCSS.wijmenuCurrent),n("."+t.wijCSS.wijmenuBreadcrumb,r.menucontainer).remove(),e.undelegate("li>."+t.wijCSS.wijmenuLink,"click"),n("ul",e).css({left:"",width:""}),e.css("left",""),r.scrollcontainer=r.menucontainer.children(":first")},r.prototype._displayMenu=function(e){var t=this,i=t.options,s,o,u,a=t.domObject.menucontainer,f=n(e.target),l=!r._hasVisibleSubMenus(t);if(a.is(":visible")||l)return;if(!t._trigger("showing",e,t))return;a.show(),t._setPosition(f),t.nowIndex++,t._setZindex(a,t.nowIndex),a.hide(),s={context:a,show:!0},o=i.direction==="rtl"?"right":"left",u=n.extend({},{option:{direction:o}},i.animation,i.showAnimation),r._animateFlyoutMenu(u,s,function(){t._trigger("shown",e,t)}),t._isClickToOpen=i.triggerEvent==="click",this.element.data("shown",!0)},r.prototype._hideMenu=function(e){var t=this,i=t.options,s=this.domObject.menucontainer,o=r.animations,u,a;if(!this.element.data("shown"))return;if(!t._trigger("hidding",e,t))return;this.element.data("shown",!1),n.fn.wijhide?(u={context:s,show:!1},a=n.extend({},i.animation,i.hideAnimation),s.wijhide(a,o,u,null,function(){t._setZindex(s,null),s.attr("aria-hidden",!0),t._trigger("hidden",e,t)})):(s.hide().attr("aria-hidden",!0),t._setZindex(s,null),t._trigger("hidden",e,t))},r.prototype._setZindex=function(e,t){var r=this.domObject,i;if(!r)return;i=r.menucontainer;if(e.get(0)===i.get(0)){t?i.css("z-index",t):i.css("z-index","");return}t?(e.parent().css("z-index",999),e.css("z-index",t),n.browser.msie&&parseInt(n.browser.version)<8&&i.css("z-index")===0&&i.css("z-index",9950)):(e.css("z-index",""),e.parent().css("z-index",""),n.browser.msie&&parseInt(n.browser.version)<8&&n("ul:visible",this._getSublist()).length===0&&i.css("z-index")===9950&&i.css("z-index",""))},r.prototype._setPosition=function(e){var t=this._getPosition(),r={of:e},i=this.domObject.menucontainer;i.css({left:"0",top:"0",position:"absolute"}),i.position(n.extend(r,t))},r.prototype._getPosition=function(){var e=this.options,t=e.direction,r=t==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};return r=n.extend(r,e.position),r},r.prototype._getFirstSelectableSubItem=function(){return r._getFirstSelectableSubItem(this)},r.prototype._getLastSelectableSubItem=function(){return r._getLastSelectableSubItem(this)},r.prototype.add=function(e,t){r._add(this,e,t)},r.prototype._getSublist=function(){return this._rootMenu},r.prototype.getItems=function(){return this._items},r.prototype.remove=function(e){r._remove(this,e)},r.prototype._newId=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n;for(n=0;n<16;n++)t+=e[Math.round(Math.random()*25)];return t},r.animations={slide:function(e,t){e=n.extend({duration:400,easing:"swing"},e,t),e.show?e.context.stop(!0,!0).animate({height:"show"},e,function(){e.context.attr("aria-hidden",!1)}):e.context.stop(!0,!0).animate({height:"hide"},e,function(){e.context.attr("aria-hidden",!0)})}},r._animateFlyoutMenu=function(t,i,s){var o=i.context;n.fn.wijshow?(o.data("isAnimated",!0),o.wijshow(t,r.animations,i,null,function(){o.data("isAnimated",!1);var e=n.browser;e.msie&&e.version==="9.0"?(o.wrap("<div></div>"),o.unwrap()):e.msie&&e.version==="6.0"&&o.css("overflow",""),o.attr("aria-hidden",!1),s&&s()})):o.show().attr("aria-hidden",!1)},r._getMenuItemOptions=function(t,r){return t?!t.items||!n.isArray(t.items)?{}:r>=t.items.length?{}:t.items[r]:{}},r._getOuterElement=function(t,r){return n(t).filter(function(){return n(this).closest(r).length===0})},r._hasVisibleSubMenus=function(t){var n,r,i;t.jquery?t.data("wijmomenu")?n=t.data(t.data("wijmomenu")):t.data("wijmomenuitem")&&(n=t.data(t.data("wijmomenuitem"))):n=t;if(!n)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";r=n.getItems();if(!r.length)return!1;for(i=0;i<r.length;i++)if(r[i].options.displayVisible)return!0;return!1},r._getFirstSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=0;n<r.length;n++){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},r._getLastSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=r.length-1;n>=0;n--){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},r._getSelectableSubItems=function(t,r){return n.grep(t.getItems(),function(e,t){var n=e.options;return n.header||n.separator||n.displayVisible===!1?!1:r(e,t)},!1)},r._add=function(t,i,s){var o=null,u=n("<li></li>"),a=t._getSublist(),f=t.getItems(),l,c,h=!1;typeof i=="string"?/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(i)&&u.append(i):n.isPlainObject(i)&&(c=jQuery.extend(!0,{},i));if(!a||a.length<=0)a=n("<ul></ul>"),t.element.append(a),h=!0;(!s||isNaN(s)||s>f.length)&&s!==0&&(s=f.length),f.length>0&&f.length!==s?(l=f[s].element,u.insertBefore(l)):a.append(u),o=t._createItemWidget(u,c);if(o===null||o===undefined)return;r._changeCollection(s,t.getItems(),t.options.items,o),t._bindModeEvents?t._bindModeEvents(o,h):o._bindModeEvents(o,h),h&&t._initUlCssClass()},r._changeCollection=function(t,n,r,i){if(!i){n.splice(t,1),r.splice(t,1);return}n.splice(t,0,i),r.splice(t,0,i.options)},r._remove=function(t,n){var r=t.getItems()[n];r&&r.element&&r.element.remove()},r._getItemWidget=function(t){return t.data(t.data("wijmomenuitem"))},r}(e.wijmoWidget);t.wijmenu=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijmenu')",this.wijCSS={wijmenu:"wijmo-wijmenu",wijmenuHorizontal:"wijmo-wijmenu-horizontal",wijmenuCurrent:"wijmo-wijmenu-current",wijmenuCurrentCrumb:"wijmo-wijmenu-current-crumb",wijmenuBreadcrumb:"wijmo-wijmenu-breadcrumb",wijmenuBreadcrumbText:"wijmo-wijmenu-breadcrumb-text",wijmenuItem:"wijmo-wijmenu-item",wijmenuLink:"wijmo-wijmenu-link",wijmenuList:"wijmo-wijmenu-list",wijmenuScroll:"wijmo-wijmenu-scroll",wijmenuContent:"wijmo-wijmenu-content",wijmenuFooter:"wijmo-wijmenu-footer",wijmenuHeader:"wijmo-wijmenu-header",wijmenuContainer:"wijmo-wijmenu-container",wijmenuIpod:"wijmo-wijmenu-ipod",wijmenuCrumb:"wijmo-wijmenu-crumb",wijmenuAllLists:"wijmo-wijmenu-all-lists",wijmenuPrevList:"wijmo-wijmenu-prev-list",wijmenuRtl:"wijmo-wijmenu-rtl",wijmenuBacklinktext:"wijmo-wijmenu-backlinktext",wijmenuSubmenuContainer:"wijmo-wijmenu-submenu-container",wijmenuParent:"wijmo-wijmenu-parent"},this.wijMobileCSS={header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.trigger="",this.triggerEvent="click",this.position={},this.animation={animated:"slide",duration:400,easing:null,option:null},this.showAnimation={},this.hideAnimation={animated:"fade",duration:400,easing:null,option:null},this.showDelay=400,this.hideDelay=400,this.slidingAnimation={duration:400,easing:null},this.mode="flyout",this.superPanelOptions=null,this.checkable=!1,this.orientation="horizontal",this.direction="ltr",this.maxHeight=200,this.backLink=!0,this.backLinkText="Back",this.topLinkText="All",this.crumbDefaultText="Choose an option",this.select=null,this.focus=null,this.blur=null,this.showing=null,this.shown=null,this.hidding=null,this.hidden=null,this.items=null,this.ensureSubmenuOnBody=!1}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),function(e){e._map=[],e.link=0,e.separator=1,e.header=2,e.other=3}(t.MarkupType||(t.MarkupType={}));var o=t.MarkupType,u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initState=function(){this._items=[],this._resetMarkupValue(),this.options.items||(this.options.items=[])},t.prototype._create=function(){var t=this;t._isMobile&&n.extend(!0,t.options.wijCSS,t.options.wijMobileCSS),t.element.data("wijmomenuitem",n.camelCase(t.widgetFullName)),t._initState(),t._getOrSetOptionsValues(),t._createChildMenuItems(),t._initCssClass(),e.prototype._create.call(this)},t.prototype._refresh=function(){var e=this,t=e.options;e._set_navigateUrl(t.navigateUrl),e._set_target(t.target),e._set_displayVisible(t.displayVisible),e._createChildMenuItems(),e._initCssClass()},t.prototype._setOption=function(t,r){var i=this,s=i.options,o;if(t==="items"){e.prototype._setOption.call(this,t,r),i._set_items(r);return}if(r===s[t])return;e.prototype._setOption.call(this,t,r);if(!n.isFunction(i["_set_"+t]))return;i["_set_"+t](r,!0);switch(t){case"header":case"separator":i._refresh();break;case"displayVisible":o=i.getParent(),o&&o._setSubmenuIcon();break;default:}},t.prototype.index=function(){return this.element.index()},t.prototype._set_selected=function(e){var t=this,n=t.options,r=t._getMenuItemType();r===o.link?t._getLink().toggleClass(n.wijCSS.stateActive,e):t.options.selected=!1},t.prototype._set_items=function(e){var t=this;t._getSublist().remove(),t._items=[],e.length>0&&(t._createChildMenuItems(),t._initUlCssClass()),t._setSubmenuIcon(e.length>0),t._bindModeEvents(t,!0),t._resetMarkupValue()},t.prototype._bindModeEvents=function(e,t){var n=this,r=e._getMenu(),i=r.options;t&&(n._initUlCssClass(),n._setSubmenuIcon(),n._resetMarkupValue()),i.mode==="flyout"?t?(n._killFlyout(),n._flyout()):e._flyout():(n._setDrilldownUlStyle(),e.element.parent().is(":visible")&&r._resetScroll(e._getParentOrMenu()))},t.prototype._set_value=function(e,t){this.options.value=e},t.prototype._set_text=function(e,t){var n=this,r=n.options;e||t?n._setText(e):r.text=n._getText()},t.prototype._set_navigateUrl=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(e||t?i.attr("href",e):r.navigateUrl=i.attr("href"))},t.prototype._set_target=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(r.target||t?i.attr("target",e):r.target=i.attr("target")||"")},t.prototype._set_iconClass=function(e,t){var r=this,i=r.options,s,u,a,f;if(i.header===!0||i.separator===!0)return;s=r._getLink(),u=s.find("span."+i.wijCSS.wijmenuitemIcon),e?(u.length===0&&(u=n("<span>"),a=s.children("."+i.wijCSS.wijmenuText).wrap("<span>").parent(),a.addClass(i.wijCSS.wijmenuText),a.prepend(u)),u.addClass(e).addClass(i.wijCSS.wijmenuIconLeft).addClass(i.wijCSS.wijmenuitemIcon),t&&r._set_imagePosition(i.imagePosition)):u.length!==0&&(u.remove(),a=s.children("."+i.wijCSS.wijmenuText),f=a.text(),a.html(""),a.text(f)),r._getMenuItemType()===o.other&&s.addClass(i.wijCSS.wijmenuLink).addClass(i.wijCSS.cornerAll)},t.prototype._set_imagePosition=function(e,t){var n=this,r=n.options,i=n._getLink(),s=i.find(">span>span."+r.wijCSS.wijmenuitemIcon),o=e==="right"?r.wijCSS.wijmenuIconRight:r.wijCSS.wijmenuIconLeft;if(s.length===0)return;s.removeClass(r.wijCSS.wijmenuIconRight).removeClass(r.wijCSS.wijmenuIconLeft).addClass(o)},t.prototype._set_separator=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(r.html("").removeClass(i.wijCSS.wijmenuSeparator).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault).removeClass(i.wijCSS.cornerAll),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.length===0?(i.separator=!0,i.header=!1,n._createMenuItemMarkup(o.separator)):i.separator=!1,n._resetMarkupValue()},t.prototype._set_header=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(i.header=!1,r.html("").removeClass(i.wijCSS.header).removeClass(i.wijCSS.cornerAll).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.is("h1,h2,h3,h4,h5")?(i.header=!0,i.separator=!1,s.is("h1,h2,h3,h4,h5")||(s.remove(),s=n._createMenuItemMarkup(o.header),r.append(s))):i.header=!1,n._resetMarkupValue()},t.prototype._set_displayVisible=function(e){var t=this,n=t.element;e?n.show():n.hide()},t.prototype._createMenuItemMarkup=function(e){var t=this,r=t.options,i=t.element,s;return e===o.separator?(i.html('<span class="'+r.wijCSS.wijmenuSeparatorContent+'">&nbsp;</span>'),null):(e===o.header?s=n("<h3></h3>").text(r.text):s=n("<a>").text(r.text),s)},t.prototype._getMenuItemType=function(e){var t=this,r=t.options,i=t._getLink();return e&&(r=n.extend({},r,e)),r.separator===!0?o.separator:r.header===!0?o.header:i.length===0?r.text?o.link:o.separator:i.is("a")?o.link:i.is("h1,h2,h3,h4,h5")?o.header:o.other},t.prototype._getOrSetOptionsValues=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i===o.header?(e._set_header(n.header),e._set_text(n.text)):i===o.separator?e._set_separator(n.separator):(r.length===0?(r=e._createMenuItemMarkup(i),t.append(r)):e._set_text(n.text),e._resetMarkupValue(),e._set_navigateUrl(n.navigateUrl),e._set_target(n.target)),e._set_displayVisible(n.displayVisible),e._set_selected(n.selected)},t.prototype._getText=function(){return this._getLink().text()},t.prototype._setText=function(e){var t=this.element,n=this.options,r;r=t.find(":not(ul)a ."+n.wijCSS.wijmenuText+":first");if(r.length!==0){r.text(e);return}r=t.children("h1,h2,h3,h4,h5").filter(":first");if(r.length!==0){r.text(e);return}r=t.children("a:first");if(r.length!==0){r.text(e);return}},t.prototype._createChildMenuItems=function(){var e=this,t=e.element,r=e._items,s=e.options,o,u,a,f,l,c;if(s.header===!0||s.separator===!0)return;o=s.items.length,u=e._getSublist(),a=u.children("li").length;if(o>a){u.length===0&&(u=n("<ul>").appendTo(t),e._resetMarkupValue());for(f=0;f<o-a;f++)u.append("<li>")}n.each(e._getChildren(),function(t,s){var o=n(s),u;u=i._getMenuItemOptions(e.options,t),l=e._createItemWidget(o,u),r.push(l),e.options.items[t]=l.options})},t.prototype._createItemWidget=function(e,t){var r=this,i=r.widgetName;return e[i](t),e.data(n.camelCase(r.widgetFullName))},t.prototype._initCssClass=function(){var e=this,t=this.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i!==o.separator&&t.attr("role","menuitem"),i===o.separator?t.addClass(n.wijCSS.wijmenuSeparator).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll):i===o.header?t.addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll):(i===o.link?t.hasAllClasses(n.wijCSS.wijmenuItem)||(t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),r.addClass(n.wijCSS.wijmenuLink).addClass(n.wijCSS.cornerAll),r.wrapInner("<span>").children("span").addClass(n.wijCSS.wijmenuText)):t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),e._setSubmenuIcon()),e._set_iconClass(n.iconClass),e._set_imagePosition(n.imagePosition),e._initUlCssClass()},t.prototype._initUlCssClass=function(){var e=this.options;this._getSublist().addClass(e.wijCSS.wijmenuList).addClass(e.wijCSS.content).addClass(e.wijCSS.cornerAll).addClass(e.wijCSS.helperClearFix).addClass(e.wijCSS.wijmenuChild).addClass(e.wijCSS.helperReset).hide()},t.prototype._setSubmenuIcon=function(e){var t=this,r=this.options,s=t._getLink(),o=t._getMenu(),u=o.options.direction,a=u==="rtl"?s.children("span."+r.wijCSS.icon+":first"):s.children("span."+r.wijCSS.icon+":last");e===undefined&&(e=i._hasVisibleSubMenus(t)),e&&!s.is(":input")?(a.length===0&&(u==="rtl"?a=n("<span>").prependTo(s):a=n("<span>").appendTo(s)),t._isRoot()&&o.options.orientation==="horizontal"&&o.options.mode==="flyout"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowDown):u==="rtl"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowLeft):a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowRight)):a.remove()},t.prototype._killFlyout=function(){var e=this.element.attr("role",""),t=this.options;e.removeClass(t.wijCSS.wijmenuParent).unbind(".wijmenuEvent").unbind(".wijmenuitem").children(":first").unbind(".wijmenuEvent").unbind(".wijmenuitem").attr("aria-haspopup",""),this._getSublist().unbind(".wijmenuEvent").unbind(".wijmenuitem"),n.each(this.getItems(),function(){this._killFlyout()})},t.prototype._getItemTriggerEvent=function(){var e=this,t=e.element,r=e._getMenu(),i=r.options,s="default";return i.trigger!==""&&(t.is(i.trigger)||r.element.is(i.trigger)?s=i.triggerEvent:(t.parents("."+i.wijCSS.wijmenuParent).each(function(e,t){if(n(t).is(i.trigger))return s=i.triggerEvent,!1}),s==="default"&&e._isOuterTirggerEle()&&(s=i.triggerEvent))),t.data("triggerEvent",s),s},t.prototype._isOuterTirggerEle=function(){var e=this._getMenu();return i._getOuterElement(e.options.trigger,"."+e.options.wijCSS.wijmenu).length>0},t.prototype._flyout=function(){var e=this,t=e._getMenu(),r=t.options,i=".wijmenuitem",s=n(e.element).attr("aria-haspopup",!0),o,u,a=e._getItemTriggerEvent(),f=s.children("a."+r.wijCSS.wijmenuLink),l=e._getSublist(),c;if(e.getItems().length>0){l.bind("mouseleave"+i,function(t){if(r.disabled)return;u=setTimeout(function(){e._hideCurrentSubmenu(t)},r.hideDelay)}),s.addClass(e.options.wijCSS.wijmenuParent);if(a!=="default"&&r.triggerEvent!=="mouseenter"){switch(r.triggerEvent){case"click":f.bind("click"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"dblclick":f.bind("dblclick"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"rtclick":f.bind("contextmenu"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t),t.preventDefault()})}l.data("notClose",!0)}else f.bind("mouseenter.wijmenuEvent",function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(u),o=setTimeout(function(){e._displaySubmenu(t,null)},r.showDelay)}).bind("mouseleave"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(o),l.is("ul")||(l=l.children("ul:first")),u=setTimeout(function(){e._hideSubmenu(!1,t)},r.hideDelay)}),e.getItems().length>0&&e._getSublist().bind("mouseenter"+i,function(e){if(r.disabled)return;clearTimeout(u)}),l.data("notClose",!1)}f.bind("click.wijmenuEvent",function(n){c=f.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||c)return;if(f.is("a")){if(e._getSublist().length===0)t._hideAllMenus(n);else if(r.trigger===""||s.data("triggerEvent")==="default"||r.triggerEvent==="mouseenter")t._hideAllMenus(n);else{var i=t._currentMenuList,o,u;if(i!==undefined){o=s;if(e._getSublist().length===0)for(u=i.length;u>0;u--){if(i[u-1]===e)break;i[u-1]._hideSubmenu(!1,n)}}}t.activate(n,e)}t.select(n),f.attr("href")==="#"&&n.preventDefault()}).bind("focusin.wijmenuEvent",function(n){c=f.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||c)return;f.is("a")&&t.activate(n,e)}),n.each(e.getItems(),function(){this._flyout()})},t.prototype._hideSubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u=i.animations,a,f,l,c=r._getSublist(),h=r._getLink(),p=n.browser.msie?r.element.children("iframe.bgiframe"):null,d;if(!h.data("subMenuOpened"))return;if(!s._trigger("hidding",t,r))return;h.is("."+o.wijCSS.wijmenuLink)&&(h.data("subMenuOpened",!1),h.removeClass(o.wijCSS.stateActive)),n.fn.wijhide&&e!==!0?(a={context:c,show:!1},f=n.extend({},o.animation,o.hideAnimation),c.wijhide(f,u,a,null,function(){s._setZindex(c,null),c.attr("aria-hidden",!0),n.browser.msie&&p.remove(),s._trigger("hidden",t,r)})):(c.hide({complete:function(){n.browser.msie&&p.remove()}}).attr("aria-hidden",!0),s._setZindex(c,null),s._trigger("hidden",t,r)),l=s._currentMenuList,l&&(l=n.makeArray(n.map(l,function(e){return e&&e===r?null:e})),s._currentMenuList=n.makeArray(l))},t.prototype._displaySubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u,a,f,l=i.animations,c,h=r._getLink(),p=r._getSublist(),d,v;n.browser.msie&&(d=r.element.children("iframe.bgiframe"),d.length===0&&(d=n('<iframe class="bgiframe" frameborder="0" tabindex="-1" src="javascript: false;" style="display:none;position:absolute;z-index:-1;top:0px;left:0px;opacity:0;" />'),r.element.append(d))),c=!i._hasVisibleSubMenus(r);if(p.is(":visible")||c)return;if(!s._trigger("showing",e,r))return;h.is("a."+o.wijCSS.wijmenuLink)&&h.data("subMenuOpened",!0),p.show(),r._setMenuItemPosition(),n.browser.msie&&r._setIframeBounds(p,d),s.nowIndex++,s._setZindex(p,s.nowIndex),p.hide(),u={context:p,show:!0},a=o.direction==="rtl"?"right":"left",o.orientation==="horizontal"&&r._isRoot()&&(a="up"),n.browser.msie&&d.css("display",""),f=n.extend({},{option:{direction:a}},o.animation,o.showAnimation),i._animateFlyoutMenu(f,u,function(){p.is(":hidden")&&r._hideSubmenu(!0,e),s._trigger("shown",e,r),t&&t()}),s._isClickToOpen=o.triggerEvent==="click",s._currentMenuList===undefined&&(s._currentMenuList=[]),s._currentMenuList.push(r)},t.prototype._setMenuItemPosition=function(){var e=this,t=e._getSublist(),r=e._getMenuItemPosition(),i={of:this._getLink()};t.css({left:"0",top:"0",position:"absolute"}),t.position(n.extend(i,r))},t.prototype._getMenuItemPosition=function(){var e=this,t=this._getMenu(),r=t.options,i=r.direction,s=i==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};return r.orientation==="horizontal"&&e._isRoot()&&(s=i==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"}),s=n.extend(s,r.position),s},t.prototype._getChildren=function(){return this._getSublist().children("li")},t.prototype._setDrilldownUlStyle=function(){var e=this,t=e.options,r=e._getSublist(),i=e._getMenu(),s=i.domObject.menucontainer.width();i.options.direction==="rtl"?r.css({width:s,left:-s}):r.css({width:s,left:s}),r.addClass(t.wijCSS.content),n.each(e.getItems(),function(e,t){t.getItems().length&&this._setDrilldownUlStyle()})},t.prototype._getMenu=function(){var e=this,t=e._menu,n,r;if(!t){n=e.element.parent();while(!n.is("body")&&n.length>0){r=n.data("wijmomenu");if(r)return t=n.data(r),e._menu=t,t;n=n.parent()}throw"An menuitem must be a child of menu"}return t},t.prototype.getParent=function(){var e=this,t=e.element,n,r,s;r=e._parent;if(r!==undefined)return r;n=e._getMenu(),s=t.parent().closest("li",n.element[0]);if(s.length>0){r=i._getItemWidget(s);if(r!==undefined)return e._parent=r,r}if(n._getSublist().get(0)===t.parent().get(0))return e._parent=null,null;throw"An menuitem must be a child of menu or another menuitem"},t.prototype._getParentOrMenu=function(){return this.getParent()||this._getMenu()},t.prototype._getField=function(e){return this.element.data(e)},t.prototype._setField=function(e,t){return this.element.data(e,t)},t.prototype._innerDestroy=function(e){var t=this,n=t.options,r=t.element,i,s=t.getItems(),o=s.length-1;r.removeClass(n.wijCSS.widget).removeClass(n.wijCSS.wijmenuItem).removeClass(n.wijCSS.stateDefault).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.wijmenuParent).removeClass(n.wijCSS.header).removeClass(n.wijCSS.wijmenuSeparator),i=r.children("."+n.wijCSS.wijmenuLink),i.removeClass(n.wijCSS.wijmenuLink).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.stateFocus).removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive).html(i.children("."+n.wijCSS.wijmenuText).html()).unbind(".wijmenuitem").unbind(".wijmenuEvent"),r.children("ul").removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.content).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.helperClearFix).removeClass(n.wijCSS.wijmenuChild).removeClass(n.wijCSS.helperReset).attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden",""),r.removeAttr("role"),i.removeAttr("aria-haspopup"),e||t._removeFromParentCollection(),r.removeData("menu").removeData("parent"),r.children("iframe.bgiframe").length!==0&&r.children("iframe.bgiframe").remove();for(;o>=0;o--)s[o].destroy(!0);t._items.length=0,t._resetMarkupValue()},t.prototype.destroy=function(t){var n=this;n._innerDestroy(t),e.prototype.destroy.call(this)},t.prototype._getFirstSelectableSubItem=function(){return i._getFirstSelectableSubItem(this)},t.prototype._getLastSelectableSubItem=function(){return i._getLastSelectableSubItem(this)},t.prototype.next=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s+1;r<t.length;r++){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype.previous=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s-1;r>=0;r--){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype._removeFromParentCollection=function(){var e=this,t,r=!1,s;t=e.getParent(),t===null&&(t=e._getMenu(),r=!0),s=n.inArray(e,t.getItems());if(s===-1)return;i._changeCollection(s,t.getItems(),t.options.items,null),t.getItems().length===0&&(r||(t._setSubmenuIcon(!1),t._resetMarkupValue()),t.element.children("ul").remove())},t.prototype._resetMarkupValue=function(){this._sublist=null,this._link=null},t.prototype._hideCurrentSubmenu=function(e){var t=this,r=t._getSublist();if(r.length===0)return;r.data("notClose")||t._hideSubmenu(!1,e),n.each(t.getItems(),function(){this._hideCurrentSubmenu(e)})},t.prototype._showFlyoutSubmenu=function(e,t){var n=this,r=this._getMenu(),i=r._currentMenuList,s;if(i!==undefined)for(s=i.length;s>0;s--){if(i[s-1]===n.getParent())break;i[s-1]._hideSubmenu(!1,e)}n._displaySubmenu(e,t)},t.prototype.getItems=function(){return this._items},t.prototype._getSublist=function(){var e=this;return e._sublist||(e._sublist=this.element.children("ul:first")),e._sublist},t.prototype._getLink=function(){var e=this;return e._link||(e._link=this.element.children(":first")),e._link},t.prototype._isRoot=function(){return this.getParent()===null},t.prototype.add=function(e,t){i._add(this,e,t)},t.prototype.remove=function(e){i._remove(this,e)},t.prototype._setIframeBounds=function(e,t){var r=this,i,s=0,o=0,u=0,a=0,f,l,c,h,p,d=n.browser;if(!d.msie)return;d.msie&&parseFloat(n.browser.version)<9||(i=e.css("box-shadow").split(" "),p=i.length,p>1&&(d.msie&&p<4?f=0:f=r._parsePxToNumber(d.msie?i[3]:i[p-1]),d.msie&&p<3?l=0:l=.3*r._parsePxToNumber(d.msie?i[2]:i[p-2]),c=r._parsePxToNumber(d.msie?i[1]:i[p-3]),h=r._parsePxToNumber(d.msie?i[0]:i[p-4]),s=l+f-h,s=s>=0?s:0,o=l+f+h,o=o>=0?o:0,u=l+f-c,u=u>=0?u:0,a=l+f+c,a=a>=0?a:0)),t.css({width:e.outerWidth(!0)+s+o+"px",height:e.outerHeight(!0)+u+a+"px",left:r._parsePxToNumber(e.css("left"))-s+"px",top:r._parsePxToNumber(e.css("top"))-u+"px"})},t.prototype._parsePxToNumber=function(e){var t=e.indexOf("px");return!t||t===-1?0:parseFloat(e.substr(0,t))},t}(e.wijmoWidget);t.wijmenuitem=u,u.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenuitem')",wijCSS:{wijmenuitemIcon:"wijmenuitem-icon",wijmenuParent:"wijmo-wijmenu-parent",wijmenuLink:"wijmo-wijmenu-link",wijmenuText:"wijmo-wijmenu-text",wijmenuList:"wijmo-wijmenu-list",wijmenuItem:"wijmo-wijmenu-item",wijmenuSeparator:"wijmo-wijmenu-separator",wijmenuIconLeft:"wijmo-wijmenu-icon-left",wijmenuIconRight:"wijmo-wijmenu-icon-right",wijmenuChild:"wijmo-wijmenu-child",wijmenuSeparatorContent:"wijmo-wijmenu-separator-content"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},header:!1,separator:!1,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:!0,selected:!1,items:null}),n.wijmo.registerWidget(r,i.prototype),n.widget("wijmo.wijmenuitem",n.wijmo.widget,u.prototype)})(e.menu||(e.menu={}));var t=e.menu})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijexpander",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setOption=function(e,t){switch(e){case"contentUrl":t?this.element.find("> ."+this.options.wijCSS.content).wijContent(t):this.element.find("> ."+this.options.wijCSS.content).html("");break;case"disabled":t?(this.element.addClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).addClass(this.options.wijCSS.stateDisabled)):(this.element.removeClass(this.options.wijCSS.stateDisabled).find("> .ui-expander-header").removeClass(this.options.wijCSS.stateDisabled),this.element.find("> ."+this.options.wijCSS.content).removeClass(this.options.wijCSS.stateDisabled));break;case"expandDirection":this._onDirectionChange(t,!0,this.options.expandDirection);break;case"expanded":t?this.expand():this.collapse();return;default:}n.wijmo.widget.prototype._setOption.apply(this,arguments)},t.prototype._create=function(){var e=this.options,t=this.element.children(),r,i;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-expander-icons"),r=n(t[0]),i=n(t[1]);if(e.expandDirection==="left"||e.expandDirection==="top")r.remove(),r.insertAfter(i);r.addClass("ui-expander-header"),r.attr("role","tab"),i.attr("role","tabpanel"),r.find("> a").length===0&&r.wrapInner('<a href="javascript:void(null)"></a>'),r.find("> .ui-icon").length===0&&n('<span class="ui-icon"></span>').insertBefore(n("> a",r)[0]),i.addClass("ui-expander-content "+e.wijCSS.content)},t.prototype._init=function(){var e=this.options;this._onDirectionChange(e.expandDirection,!1),e.contentUrl&&n("."+e.wijCSS.content,this.element).wijContent(this.options.contentUrl),e.expanded?(this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.stateActive).attr({"aria-expanded":"true",tabIndex:0}).addClass(this._headerCornerOpened).find("> .ui-icon").addClass(this._triangleIconOpened),this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility()):(this.element.find("> .ui-expander-content").hide(),this.element.find("> .ui-expander-header").addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").addClass(this._triangleIconClosed)),e.disabled&&(this.element.addClass(e.wijCSS.stateDisabled).find("> .ui-expander-header").addClass(e.wijCSS.stateDisabled),this.element.find("> .ui-expander-content").addClass(e.wijCSS.stateDisabled)),this._bindLiveEvents()},t.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass("wijmo-wijexpander ui-expander "+e.wijCSS.widget+" ui-helper-reset ui-expander-icons"),n.wijmo.widget.prototype.destroy.apply(this,arguments)},t.prototype._bindLiveEvents=function(){var e=this.options;this.element.on("click.wijexpander",">.ui-expander-header",jQuery.proxy(this._onHeaderClick,this)),this.element.on("mouseenter.wijexpander",".ui-expander-header",function(){n(this).addClass(e.wijCSS.stateHover)}),this.element.on("mouseleave.wijexpander",".ui-expander-header",function(){n(this).removeClass(e.wijCSS.stateHover)}),this.element.on("focus.wijexpander",".ui-expander-header",function(){n(this).addClass(e.wijCSS.stateFocus)}),this.element.on("blur.wijexpander",".ui-expander-header",function(){n(this).removeClass(e.wijCSS.stateFocus)})},t.prototype._unbindLiveEvents=function(){this.element.off(".wijexpander",".ui-expander-header")},t.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var i,s,o,u,a,f,l,c,h=this.options;r&&r!==e&&this.element.removeClass("ui-expander-"+r),t&&(s=this.element.find(".ui-expander-header."+this._headerCornerOpened),s.removeClass(this._headerCornerOpened),o=this.element.find(".ui-expander-content."+this._contentCornerOpened),o.removeClass(this._contentCornerOpened),u=this.element.find("."+this._triangleIconOpened),a=this.element.find("."+this._triangleIconClosed),u.removeClass(this._triangleIconOpened),a.removeClass(this._triangleIconClosed));switch(e){case"top":this._headerCornerOpened="ui-corner-bottom",this._contentCornerOpened="ui-corner-top",this._triangleIconOpened=h.wijCSS.iconArrowUp,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!0,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-top");break;case"right":this._headerCornerOpened="ui-corner-left",this._contentCornerOpened="ui-corner-right",this._triangleIconOpened=h.wijCSS.iconArrowRight,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!1,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-right");break;case"left":this._headerCornerOpened="ui-corner-right",this._contentCornerOpened="ui-corner-left",this._triangleIconOpened=h.wijCSS.iconArrowLeft,this._triangleIconClosed=h.wijCSS.iconArrowDown,i=!0,this.element.addClass("ui-helper-horizontal"),this.element.addClass("ui-expander-left");break;default:this._headerCornerOpened="ui-corner-top",this._contentCornerOpened="ui-corner-bottom",this._triangleIconOpened=h.wijCSS.iconArrowDown,this._triangleIconClosed=h.wijCSS.iconArrowRight,i=!1,this.element.removeClass("ui-helper-horizontal"),this.element.addClass("ui-expander-bottom")}f=this.element.data("rightToLeft"),this.element.data("rightToLeft",i),t&&(u.addClass(this._triangleIconOpened),a.addClass(this._triangleIconClosed),s.addClass(this._headerCornerOpened),o.addClass(this._contentCornerOpened)),t&&i!==f&&this.element.children(".ui-expander-header").each(function(e,t){c=n(this),i?(l=c.next(".ui-expander-content"),c.remove(),c.insertAfter(l)):(l=c.prev(".ui-expander-content"),c.remove(),c.insertBefore(l))})},t.prototype.collapse=function(){var e=this.options,t,r,i,s;if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeCollapse")?(e.animated?(t={expand:!1,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").removeClass("ui-expander-content-active"),this._trigger("afterCollapse"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=n.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!n.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](t)):(this.element.find("> .ui-expander-content").hide(),this._trigger("afterCollapse")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.stateActive).removeClass(this._headerCornerOpened).attr({"aria-expanded":"false",tabIndex:-1}).addClass(e.wijCSS.stateDefault+" "+e.wijCSS.cornerAll).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),this.options.expanded=!1,!0):!1},t.prototype.expand=function(){var e=this.options,t,r,i,s;if(!e.allowExpand)return;return this.element.hasAllClasses(e.wijCSS.stateDisabled)?!1:this._trigger("beforeExpand")?(e.animated?(t={expand:!0,content:this.element.find("> .ui-expander-content"),complete:jQuery.proxy(function(){this.element.find("> .ui-expander-content").addClass("ui-expander-content-active").addClass(this._contentCornerOpened).wijTriggerVisibility(),this._trigger("afterExpand"),this.element.find("> .ui-expander-content").css("display","")},this),horizontal:this.element.hasClass("ui-helper-horizontal")},r=n.wijmo.wijexpander.animations,i=e.duration,s=e.animated,s&&!r[s]&&!n.easing[s]&&(s="slide"),r[s]||(r[s]=function(e){this.slide(e,{easing:s,duration:i||700})}),r[s](t)):(this.element.find("> .ui-expander-content").show(),this._trigger("afterExpand")),this.element.find("> .ui-expander-header").removeClass(e.wijCSS.cornerAll).addClass(e.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),this.options.expanded=!0,!0):!1},t.prototype._onHeaderClick=function(e){this.option("expanded",!this.options.expanded)},t}(e.wijmoWidget);t.wijexpander=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-content ui-body ui-body-c"},this.initSelector=":jqmData(role='wijexpander')",this.allowExpand=!0,this.animated="slide",this.contentUrl="",this.expanded=!0,this.expandDirection="bottom",this.beforeCollapse=null,this.beforeExpand=null,this.afterCollapse=null,this.afterExpand=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget(r,i.prototype),n.extend(n.wijmo.wijexpander,{animations:{slide:function(e,t){var r;e=n.extend({easing:"swing",duration:300},e,t),e.expand?(e.horizontal?r={width:"show",opacity:"show"}:r={height:"show",opacity:"show"},e.content.stop(!0,!0).animate(r,e)):(e.horizontal?r={width:"hide",opacity:"hide"}:r={height:"hide",opacity:"hide"},e.content.stop(!0,!0).animate(r,e))}}})})(e.expander||(e.expander={}));var t=e.expander})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijaccordion",i="wijmo-wijaccordion",s="wijmo-wijaccordion-top",o="wijmo-wijaccordion-bottom",u="wijmo-wijaccordion-left",a="wijmo-wijaccordion-right",f="wijmo-wijaccordion-header",l="wijmo-wijaccordion-content",c="wijmo-wijaccordion-content-active",h="wijmo-wijaccordion-icons",p="ui-helper-horizontal",d=function(t){function r(){t.apply(this,arguments),this.widgetEventPrefix="wijaccordion"}return __extends(r,t),r.prototype._setOption=function(e,n){var r=this.options;if(r[e]!==n)switch(e){case"selectedIndex":this.activate(n);break;case"disabled":n?this.element.addClass(r.wijCSS.stateDisabled):this.element.removeClass(r.wijCSS.stateDisabled);break;case"event":this._unbindLiveEvents(),this.options.event=n,this._bindLiveEvents();break;case"header":this._handleHeaderChange(n,r.header);break;case"animated":break;case"expandDirection":this._onDirectionChange(n,!0,r.expandDirection);break;default:}t.prototype._setOption.call(this,e,n)},r.prototype._handleHeaderChange=function(e,t){var n=this.options.wijCSS,r=this.element.find(t);r.removeClass(n.wijaccordionHeader).removeClass(f).removeClass(n.stateActive).removeClass(this._triangleIconOpened),r.siblings("."+l).removeClass(n.wijaccordionContent).removeClass(l).removeClass(n.content).removeClass(n.wijaccordionContentActive).removeClass(c),this._initHeaders(e)},r.prototype._initHeaders=function(e){typeof e=="undefined"&&(e=null);var t=this.options,e=e?e:t.header,n=this.element.find(e);n.each(jQuery.proxy(this._initHeader,this))},r.prototype._initHeader=function(e,t){var r=this.options,s=r.wijCSS,o=this.element.data("rightToLeft"),u=n(t),a=n(u.next()[0]);o&&(u.remove(),u.insertAfter(a)),u.addClass(f).addClass(s.wijaccordionHeader).attr("role","tab"),a.attr("role","tabpanel"),u.find("> a").length===0&&u.wrapInner('<a href="#"></a>'),u.find("> ."+s.icon).length===0&&n("<span></span>").addClass(s.icon).insertBefore(n("> a",u)[0]),e===r.selectedIndex?(u.addClass(s.stateDefault).addClass(s.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}),u.find("> ."+s.icon).addClass(this._triangleIconOpened),a.addClass(c).addClass(s.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility()):(u.addClass(s.stateDefault).addClass(s.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}),u.find("> .ui-icon").addClass(this._triangleIconClosed),a.hide()),a.addClass(l).addClass(s.wijaccordionContent).addClass(s.content);for(;;){if(u.parent().hasClass(i))break;u.unwrap()}},r.prototype._create=function(){var e=this.options,r=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(i).addClass(e.wijCSS.wijaccordion).addClass(e.wijCSS.widget).addClass(h).addClass(e.wijCSS.wijaccordionIcons).addClass(e.wijCSS.helperClearFix),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._onDirectionChange(e.expandDirection,!1),this._initHeaders(),this.element.attr("role","tablist"),n(window).on("resize.wijaccordion",function(e){r._adjustAccordion()}),(e.expandDirection==="left"||e.expandDirection==="right")&&r._adjustAccordion(),this._getDefaultLayoutSetting(),t.prototype._create.call(this)},r.prototype._init=function(){this._bindLiveEvents()},r.prototype._adjustAccordion=function(){if(this.options.expandDirection==="top"||this.options.expandDirection==="bottom")return;var e=this._getHeaders(),t=n("."+l,this.element),r=t.parent().width(),i=parseInt(t.css("paddingLeft"),10)+parseInt(t.css("paddingRight"),10)+parseInt(t.css("borderRightWidth"),10)+parseInt(t.css("borderLeftWidth"),10),s=n("."+f,this.element).outerWidth(!0),o=r-e.length*(s+4)-i,o=o<576?o:576;t.width(o)},r.prototype._getDefaultLayoutSetting=function(){var e=n("."+l,this.element);this.options.expandDirection==="top"||this.options.expandDirection==="bottom"?this._defaultLayoutSetting={paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom")}:this._defaultLayoutSetting={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),width:e.width()}},r.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass(e.wijCSS.wijaccordion).removeClass(i).removeClass(e.wijCSS.widget).removeClass(e.wijCSS.wijaccordionIcons).removeClass(h).removeAttr("role"),n(window).off("resize.wijaccordion"),t.prototype.destroy.call(this)},r.prototype._getHeaders=function(){var e=this.options,t=this.element.data("rightToLeft"),r=[],i,s,o=this.element.find(e.header);if(!(o.length>0&&!n(o[0]).hasClass(f)&&n(o[0]).hasClass(l)))return o;for(i=0;i<o.length;i+=1)s=t?n(o[i]).next("."+f):n(o[i]).prev("."+f),s.length>0&&r.push(s[0]);return n(r)},r.prototype.activate=function(e){var t,r=this.options,i=this._getHeaders(),s,o,u=this.element.data("rightToLeft"),a,f,h,d,v,m,g,y,b,w;s=n(jQuery.grep(i,function(e){return n(e).hasAllClasses(r.wijCSS.stateActive)})),typeof e=="number"?t=n(i[e]):typeof e=="string"?(e=parseInt(e,0),t=n(i[e])):(t=n(e),e=i.index(e));if(t.hasAllClasses(r.wijCSS.stateDisabled))return!1;if(t.hasAllClasses(r.wijCSS.stateActive))if(r.requireOpenedPane){if(s.length===t.length&&s.index()===t.index())return!1}else s=t,t=n(null);else r.requireOpenedPane||(s=n(null));a=i.index(t),f=i.index(s),h=u?t.prev("."+l):t.next("."+l),d=u?s.prev("."+l):s.next("."+l);if(s.length===0&&t.length===0)return!1;r.expandDirection==="left"||r.expandDirection==="right"?o=this._defaultLayoutSetting.width:o=h.css("width");if(!this._trigger("beforeSelectedIndexChanged",null,{newIndex:a,prevIndex:f}))return!1;s.removeClass(r.wijCSS.stateActive).removeClass(this._headerCornerOpened).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),t.removeClass("ui-corner-all").addClass(r.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),r.animated?(v={toShow:h,toHide:d,complete:jQuery.proxy(function(){d.removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),h.addClass(r.wijCSS.wijaccordionContentActive).addClass(c).wijTriggerVisibility(),d.css("display",""),h.css("display",""),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})},this),horizontal:this.element.hasClass(p),rightToLeft:this.element.data("rightToLeft"),down:a>f,autoHeight:r.autoHeight||r.fillSpace,defaultLayoutSetting:this._defaultLayoutSetting},m=r.animated,g=r.duration,n.isFunction(m)&&(r.animated=m(v)),n.isFunction(g)&&(r.duration=g(v)),y=n.wijmo.wijaccordion.animations,b=r.duration,w=r.animated,w&&!y[w]&&!n.easing[w]&&(w="slide"),y[w]||(y[w]=function(e){this.slide(e,{easing:w,duration:b||700})}),y[w](v)):(s.length>0&&d.hide().removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),t.length>0&&h.show().addClass(c).addClass(r.wijCSS.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility(),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})),this.options.selectedIndex=a},r.prototype._bindLiveEvents=function(){var e=this,t=this.options,r="."+f;this.element.on(t.event+".wijaccordion",r,jQuery.proxy(this._onHeaderClick,this)).on("keydown.wijaccordion",r,jQuery.proxy(this._onHeaderKeyDown,this)).on("mouseenter.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateHover)}).on("mouseleave.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateHover)}).on("focus.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateFocus)}).on("blur.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateFocus)})},r.prototype._unbindLiveEvents=function(){this.element.off(".wijaccordion","."+f)},r.prototype._onHeaderClick=function(e){return this.options.disabled||this.activate(e.currentTarget),!1},r.prototype._onHeaderKeyDown=function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;if(!n.ui)return;var r=e.getKeyCodeEnum(),i=this.element.find("."+f+"."+this.options.wijCSS.stateFocus),s,o=this._getHeaders();if(i.length>0){s=n("."+f,this.element).index(i);switch(t.keyCode){case r.RIGHT:case r.DOWN:if(o[s+1])return o[s+1].focus(),!1;break;case r.LEFT:case r.UP:if(o[s-1])return o[s-1].focus(),!1;break;case r.SPACE:case r.ENTER:this.activate(t.currentTarget),t.preventDefault()}}return!0},r.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var c,h,d,v,m,g,y=this.options;t&&(h=this.element.find("."+f+"."+this._headerCornerOpened),h.removeClass(this._headerCornerOpened),d=this.element.find("."+l+"."+this._contentCornerOpened),d.removeClass(this._contentCornerOpened),v=this.element.find("."+this._triangleIconOpened),m=this.element.find("."+this._triangleIconClosed),v.removeClass(this._triangleIconOpened),m.removeClass(this._triangleIconClosed)),r!==null&&this.element.removeClass(i+"-"+r);switch(e){case"top":this._headerCornerOpened=y.wijCSS.cornerBottom,this._contentCornerOpened=y.wijCSS.cornerTop,this._triangleIconOpened=y.wijCSS.iconArrowUp,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!0,this.element.removeClass(p),this.element.addClass(s).addClass(y.wijCSS.wijaccordionTop);break;case"right":this._headerCornerOpened=y.wijCSS.cornerLeft,this._contentCornerOpened=y.wijCSS.cornerRight,this._triangleIconOpened=y.wijCSS.iconArrowRight,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!1,this.element.addClass(p),this.element.addClass(a).addClass(y.wijCSS.wijaccordionRight);break;case"left":this._headerCornerOpened=y.wijCSS.cornerRight,this._contentCornerOpened=y.wijCSS.cornerLeft,this._triangleIconOpened=y.wijCSS.iconArrowLeft,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!0,this.element.addClass(p),this.element.addClass(u).addClass(y.wijCSS.wijaccordionLeft);break;default:this._headerCornerOpened=y.wijCSS.cornerTop,this._contentCornerOpened=y.wijCSS.cornerBottom,this._triangleIconOpened=y.wijCSS.iconArrowDown,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!1,this.element.removeClass(p),this.element.addClass(o).addClass(y.wijCSS.wijaccordionBottom)}g=this.element.data("rightToLeft"),this.element.data("rightToLeft",c),t&&(v.addClass(this._triangleIconOpened),m.addClass(this._triangleIconClosed),h.addClass(this._headerCornerOpened),d.addClass(this._contentCornerOpened)),t&&c!==g&&this.element.children("."+f).each(function(e,t){var r=n(this),i;c?(i=r.next("."+l),r.remove(),r.insertAfter(i)):(i=r.prev("."+l),r.remove(),r.insertBefore(i))})},r}(e.wijmoWidget);t.wijaccordion=d;var v=function(){function e(){this.wijCSS={wijaccordion:"",wijaccordionTop:"",wijaccordionBottom:"",wijaccordionLeft:"",wijaccordionRight:"",wijaccordionHeader:"",wijaccordionContent:"",wijaccordionContentActive:"",wijaccordionIcons:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c"},this.initSelector=":jqmData(role='wijaccordion')",this.animated="slide",this.duration=null,this.event="click",this.disabled=!1,this.expandDirection="bottom",this.header="> li > :first-child,> :not(li):even",this.requireOpenedPane=!0,this.selectedIndex=0}return e}();d.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new v),n.wijmo.registerWidget(r,d.prototype),n.extend(n.wijmo.wijaccordion,{animations:{slide:function(e,t){e=n.extend({easing:"swing",duration:300},e,t);var r,i;e.horizontal?(r={width:"show"},i={width:"hide"}):(r={height:"show"},i={height:"hide"});if(!e.toHide.size()){e.toShow.stop(!0,!0).animate(r,e);return}if(!e.toShow.size()){e.toHide.stop(!0,!0).animate(i,e);return}var s=e.toShow.css("overflow"),o=0,u={},a={},f,l=e.horizontal?["width","paddingLeft","paddingRight"]:["height","paddingTop","paddingBottom"],c,h=e.toShow;e.horizontal?(c=h[0].style.height,h.height(parseInt(h.parent().height(),10)-parseInt(h.css("paddingTop"),10)-parseInt(h.css("paddingBottom"),10)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0))):(c=h[0].style.width,h.width(parseInt(h.parent().width(),10)-parseInt(h.css("paddingLeft"),10)-parseInt(h.css("paddingRight"),10)-(parseInt(h.css("borderLeftWidth"),10)||0)-(parseInt(h.css("borderRightWidth"),10)||0))),n.each(l,function(t,r){a[r]="hide";if(!e.horizontal&&r==="height"){var i=(""+n.css(e.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);u[r]={value:i?i[1]:"0",unit:i?i[2]||"px":"px"}}else u[r]={value:e.defaultLayoutSetting[r],unit:"px"}}),e.horizontal?f={width:0,overflow:"hidden"}:f={height:0,overflow:"hidden"},e.toShow.css(f).stop(!0,!0).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").stop(!0,!0).animate(a,{step:function(t,n){var r;if(n.prop===e.horizontal?"width":"height")o=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start);r=o*u[n.prop].value,r<0&&(r=0),e.toShow[0].style[n.prop]=r+u[n.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css(e.horizontal?"width":"height",""),e.toShow.css(e.horizontal?"height":"width",c),e.toShow.css({overflow:s}),e.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})})(e.accordion||(e.accordion={}));var t=e.accordion})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var h=jQuery,e="wijdialog";var g=(function(i){__extends(j,i);function j(){i.apply(this,arguments)}j.prototype._create=function(){return h.ui.dialog.prototype._create.apply(this,arguments)};j.prototype._init=function(){return h.ui.dialog.prototype._init.apply(this,arguments)};j.prototype._destroy=function(){return h.ui.dialog.prototype._destroy.apply(this,arguments)};j.prototype._appendTo=function(){return h.ui.dialog.prototype._appendTo.apply(this,arguments)};j.prototype._setOptions=function(){return h.ui.dialog.prototype._setOptions.apply(this,arguments)};j.prototype._setOption=function(k,l){return h.ui.dialog.prototype._setOption.apply(this,arguments)};j.prototype.widget=function(){return h.ui.dialog.prototype.widget.apply(this,arguments)};j.prototype.close=function(){return h.ui.dialog.prototype.close.apply(this,arguments)};j.prototype.isOpen=function(){return h.ui.dialog.prototype.isOpen.apply(this,arguments)};j.prototype.moveToTop=function(){return h.ui.dialog.prototype.moveToTop.apply(this,arguments)};j.prototype._moveToTop=function(){return h.ui.dialog.prototype._moveToTop.apply(this,arguments)};j.prototype.open=function(){return h.ui.dialog.prototype.open.apply(this,arguments)};j.prototype._focusTabbable=function(){return h.ui.dialog.prototype._focusTabbable.apply(this,arguments)};j.prototype._keepFocus=function(){return h.ui.dialog.prototype._keepFocus.apply(this,arguments)};j.prototype._createWrapper=function(){return h.ui.dialog.prototype._createWrapper.apply(this,arguments)};j.prototype._createTitlebar=function(){return h.ui.dialog.prototype._createTitlebar.apply(this,arguments)};j.prototype._title=function(){return h.ui.dialog.prototype._title.apply(this,arguments)};j.prototype._createButtonPane=function(){return h.ui.dialog.prototype._createButtonPane.apply(this,arguments)};j.prototype._createButtons=function(){return h.ui.dialog.prototype._createButtons.apply(this,arguments)};j.prototype._makeDraggable=function(){return h.ui.dialog.prototype._makeDraggable.apply(this,arguments)};j.prototype._makeResizable=function(){return h.ui.dialog.prototype._makeResizable.apply(this,arguments)};j.prototype._minHeight=function(){return h.ui.dialog.prototype._minHeight.apply(this,arguments)};j.prototype._position=function(){return h.ui.dialog.prototype._position.apply(this,arguments)};j.prototype._size=function(){return h.ui.dialog.prototype._size.apply(this,arguments)};j.prototype._blockFrames=function(){return h.ui.dialog.prototype._blockFrames.apply(this,arguments)};j.prototype._unblockFrames=function(){return h.ui.dialog.prototype._unblockFrames.apply(this,arguments)};j.prototype._createOverlay=function(){if(!this.options.modal){return}var k=this,l=k.options.wijCSS;if(!h.ui.dialog.overlayInstances){this._delay(function(){if(h.ui.dialog.overlayInstances){this.document.bind("focusin.dialog",function(o){if(!h(o.target).closest(".ui-dialog").length&&!h(o.target).closest(".ui-datepicker").length){o.preventDefault();if(o.relatedTarget&&h(o.relatedTarget).closest(".ui-dialog").length){return}var m=h(".ui-dialog:visible:last .ui-dialog-content"),n;if(m.data("wijmoWijdialog")){n=m.data("wijmoWijdialog")}else{n=m.data("wijmoC1dialog")}if(n){n._focusTabbable()}}})}})}this.overlay=h("<div>").addClass(l.overlay+" "+l.uiFront+" "+l.wijdialogOverlay).appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});h.ui.dialog.overlayInstances++};j.prototype._destroyOverlay=function(){return h.ui.dialog.prototype._destroyOverlay.apply(this,arguments)};return j})(b.JQueryUIWidget);d.JQueryUIDialog=g;var c=(function(){function i(){this.wijCSS={wijdialog:"wijmo-wijdialog",wijdialogZone:"wijmo-wijdialog-defaultdockingzone",uiFront:"ui-front",uiDialog:"ui-dialog",wijdialogOverlay:"ui-dialog-overlay",uiDialogContent:"ui-dialog-content",wijdialogCaptionButton:"wijmo-wijdialog-captionbutton",wijdialogHasFrame:"wijmo-wijdialog-hasframe",iconPinW:"ui-icon-pin-w",iconPinS:"ui-icon-pin-s",iconRefresh:"ui-icon-refresh",iconCarat1N:"ui-icon-carat-1-n",iconCarat1S:"ui-icon-carat-1-s",iconMinus:"ui-icon-minus",iconExtlink:"ui-icon-extlink",iconNewWin:"ui-icon-newwin",uiDialogClose:"ui-dialog-titlebar-close",uiDialogTitleBar:"ui-dialog-titlebar",uiDialogButtonPanel:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",wijdialogTitleBarClose:"wijmo-wijdialog-titlebar-close",wijdialogTitleBarPin:"wijmo-wijdialog-titlebar-pin",wijdialogTitleBarRefresh:"wijmo-wijdialog-titlebar-refresh",wijdialogTitleBarToggle:"wijmo-wijdialog-titlebar-toggle",wijdialogTitleBarMinimize:"wijmo-wijdialog-titlebar-minimize",wijdialogTitleBarMaximize:"wijmo-wijdialog-titlebar-maximize",wijdialogTitleBarRestore:"wijmo-wijdialog-titlebar-restore"};this.appendTo="body";this.autoOpen=true;this.buttons=[];this.closeOnEscape=true;this.closeText="close";this.dialogClass="";this.draggable=true;this.height="auto";this.hide=null;this.maxHeight=null;this.maxWidth=null;this.minHeight=150;this.minWidth=150;this.modal=false;this.position={my:"center",at:"center",of:window};this.resizable=true;this.show=null;this.title=null;this.width=300;this.stack=true;this.beforeClose=null;this.close=null;this.create=null;this.drag=null;this.dragStart=null;this.dragStop=null;this.focus=null;this.open=null;this.resize=null;this.resizeStart=null;this.resizeStop=null;this.zIndex=1000;this.initSelector="";this.captionButtons={};this.collapsingAnimation=null;this.expandingAnimation=null;this.contentUrl="";this.minimizeZoneElementId="";this.buttonCreating=null;this.stateChanged=null;this.blur=null}return i})();var f=(function(i){__extends(j,i);function j(){i.apply(this,arguments)}j.prototype._create=function(){var k=this,n=k.options,m=n.wijCSS,l=k.element.attr("title");h.ui.dialog.maxZ=h.ui.dialog.maxZ||100;if(h.isArray(n.buttons)){h.each(n.buttons,function(o,p){var q=p.click;if(q&&(typeof q==="string")&&window[q]){p.click=window[q]}})}k.form=k.element.closest("form[id]");i.prototype._create.call(this);k.element.removeClass("ui-dialog-content ui-widget-content").addClass(m.uiDialogContent).addClass(m.content);k.uiDialog.removeClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front").addClass(m.uiDialog).addClass(m.widget).addClass(m.content).addClass(m.cornerAll).addClass(m.uiFront).addClass(m.wijdialog).removeClass(this.options.dialogClass).addClass(this.options.dialogClass);if(l){k.uiDialog.attr("title",l)}k.uiDialogTitlebar.removeClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").addClass(m.uiDialogTitleBar).addClass(m.header).addClass(m.cornerAll).addClass(m.helperClearFix);k._initWijWindow();k._bindWindowResize();k._attachDraggableResizableEvent();k._originalPosition=n.position;k.uiDialog.css({zIndex:n.zIndex});k.isPin=false;if(k.options.appendTo==="body"){if(k.form.length){k.uiDialog.appendTo(k.form)}}};j.prototype._createButtonPane=function(){var k=this.options.wijCSS;i.prototype._createButtonPane.call(this);this.uiDialogButtonPane.removeClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix").addClass(k.uiDialogButtonPanel).addClass(k.content).addClass(k.helperClearFix)};j.prototype._createButtons=function(){i.prototype._createButtons.call(this);if(this.uiDialog.hasClass("ui-dialog-buttons")){this.uiDialog.removeClass("ui-dialog-buttons").addClass(this.options.wijCSS.uiDialogButtons)}};j.prototype._makeDraggable=function(){i.prototype._makeDraggable.call(this);this.uiDialog.draggable("option","cancel","."+this.options.wijCSS.wijdialogCaptionButton)};j.prototype._createOverlay=function(){var k=this.options.wijCSS;i.prototype._createOverlay.call(this);if(this.overlay){this.overlay.removeClass("ui-widget-overlay ui-front").addClass(k.overlay).addClass(k.uiFront)}};j.prototype._handleDisabledOption=function(l,m){var k=this;this.uiDialog.removeClass(this.options.wijCSS.stateDisabled);if(l){if(!k.disabledDiv){k.disabledDiv=k._createDisabledDiv()}k.disabledDiv.appendTo(k.options.appendTo);if(h.browser.msie&&k.uiDialog.data("ui-draggable")){k.uiDialog.draggable("disable")}this.uiDialog.addClass(this.options.wijCSS.stateDisabled)}else{if(k.disabledDiv){k.disabledDiv.remove();k.disabledDiv=null;if(h.browser.msie&&k.uiDialog.data("ui-draggable")){k.uiDialog.draggable("enable")}}}};j.prototype._createDisabledDiv=function(){var l=this,p,o=l.uiDialog,n=o.offset(),m=o.outerWidth(),k=o.outerHeight();p=h("<div></div>").addClass(l.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:m,height:k,left:n.left,top:n.top});if(h.browser.msie){p.css("background-color","white");if(h.browser.version==="9.0"){p.css("opacity","0.1")}}return p};j.prototype.destroy=function(){var k=this,l=k.options.wijCSS;if(k.disabledDiv){k.disabledDiv.remove();k.disabledDiv=null}i.prototype.destroy.call(this);k.element.removeClass(l.uiDialogContent).removeClass(l.content);k.element.unbind(".wijdialog").removeData("wijdialog").removeData(this.widgetFullName)};j.prototype._attachDraggableResizableEvent=function(){var l=this,k=l.uiDialog,m=l.options;if(m.draggable&&k.draggable){k.bind("dragstop",function(n,o){l._saveNormalState();l._destoryIframeMask()}).bind("dragstart",function(n,o){l._createIframeMask()})}if(m.resizable&&k.resizable){k.bind("resizestop",function(n,o){l._saveNormalState();l._destoryIframeMask()}).bind("resizestart",function(n,o){l._createIframeMask();if(l.initWidth===undefined&&l.initHeight===undefined){l.initWidth=l.uiDialog.width();l.initHeight=l.uiDialog.height()}})}};j.prototype._createIframeMask=function(){var k=this;if(k.innerFrame){k.mask=h("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(h.ui.dialog.maxZ+1)+"'></div>").appendTo(k.uiDialog)}};j.prototype._destoryIframeMask=function(){var k=this;if(k.innerFrame&&k.mask){k.mask.remove();k.mask=undefined}};j.prototype._initWijWindow=function(){var k=this,l=true;k._createCaptionButtons();k._checkUrl();k.uiDialog.bind("mousedown",function(n){var m=n.target;if(!h.contains(k.element[0],m)){k.uiDialog.focus()}}).bind("mouseenter",function(m){l=true}).bind("mouseleave",function(m){l=false}).bind("focusout",function(m){if(!l){k._trigger("blur",m,{el:k.element})}})};j.prototype._moveToTop=function(n,o){var k=this,m=k.options,l;if((m.modal&&!o)||(!m.stack&&!m.modal)){k._trigger("focus",n);return false}if(m.zIndex>h.ui.dialog.maxZ){h.ui.dialog.maxZ=m.zIndex}if(k.overlay){h.ui.dialog.maxZ+=1;k.overlay.css("z-index",h.ui.dialog.maxZ)}l={scrollTop:k.element.scrollTop(),scrollLeft:k.element.scrollLeft()};h.ui.dialog.maxZ+=1;k.uiDialog.css("z-index",h.ui.dialog.maxZ);k.element.attr(l);k._trigger("focus",n);return false};j.prototype._checkUrl=function(){var k=this,n=k.options,l=n.contentUrl,m=h('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');if(typeof l==="string"&&l.length>0){k.element.addClass(n.wijCSS.wijdialogHasFrame);k.element.append(m);k.innerFrame=m}k.contentWrapper=k.element};j.prototype._setOption=function(l,m){var k=this;i.prototype._setOption.call(this,l,m);if(l==="disabled"){k._handleDisabledOption(m,k.element)}else{if(l==="contentUrl"){if(k.innerFrame){k.innerFrame.attr("src",m)}else{k._checkUrl()}}else{if(l==="captionButtons"){k._createCaptionButtons()}else{if(l==="minimizeZoneElementId"){if(k.getState()==="minimized"&&h("#"+m).length>0){h("#"+m).append(k.uiDialog)}}}}}};j.prototype._createCaptionButtons=function(){var p=[],k=this,s=k.options,l,r=s.wijCSS,n={pin:{visible:true,click:k.pin,iconClassOn:r.iconPinW,iconClassOff:r.iconPinS},refresh:{visible:true,click:k.refresh,iconClassOn:r.iconRefresh},toggle:{visible:true,click:k.toggle,iconClassOn:r.iconCarat1N,iconClassOff:r.iconCarat1S},minimize:{visible:true,click:k.minimize,iconClassOn:r.iconMinus},maximize:{visible:true,click:k.maximize,iconClassOn:r.iconExtlink},close:{visible:true,text:s.closeText,click:k.close,iconClassOn:r.iconClose}},m=s.captionButtons,q=k.uiDialogTitlebar;q.children("."+s.wijCSS.uiDialogClose+", ."+s.wijCSS.wijdialogCaptionButton).remove();h.each(n,function(o,t){if(m&&m[o]){h.extend(t,m[o])}p.push({button:o,info:t})});k._trigger("buttonCreating",null,p);for(l=0;l<p.length;l++){k._createCaptionButton(p[l],q)}};j.prototype._createCaptionButton=function(n,k,p){var t=this,r=t.options.wijCSS,m,s=r["wijdialogTitleBar"+n.button.charAt(0).toUpperCase()+n.button.substring(1)],o=k.children("."+s),l=n.info,q=h("<span></span>");if(l.visible){if(o.size()===0){q.addClass("ui-icon "+l.iconClassOn).text(l.text||n.button);m=h('<a href="#"></a>').append(q).addClass(s+" ui-corner-all "+r.wijdialogCaptionButton).attr("role","button").hover(function(){m.addClass(r.stateHover)},function(){m.removeClass(r.stateHover)}).click(function(u){if(n.button=="close"){u.preventDefault()}if(q.hasAllClasses(l.iconClassOff)){q.removeClass(l.iconClassOff)}else{q.addClass(l.iconClassOff)}if(h.isFunction(l.click)){l.click.apply(t,arguments)}return false});if(p){return m}else{m.appendTo(k)}}t[n.button+"Button"]=m}else{o.remove()}};j.prototype.pin=function(){var l=this.isPin,k=this.pinButton.children("span"),m=this.options.wijCSS;if(!l){if(k.length){if(!k.hasAllClasses(m.iconPinS)){k.addClass(m.iconPinS)}}}else{k.removeClass(m.iconPinS)}this._enableDisableDragger(!l);this.isPin=!l};j.prototype.refresh=function(){var k=this.innerFrame;if(k!==undefined){k.attr("src",k.attr("src"))}};j.prototype.toggle=function(){var l=this,k=l.toggleButton.children("span"),m=l.options.wijCSS;if(!l.minimized){if(l.collapsed===undefined||!l.collapsed){l.collapsed=true;if(!k.hasAllClasses(m.iconCarat1S)){k.addClass(m.iconCarat1S)}l._collapseDialogContent(true)}else{l.collapsed=false;if(k.hasAllClasses(m.iconCarat1S)){k.removeClass(m.iconCarat1S)}l._expandDialogContent(true)}}};j.prototype._expandDialogContent=function(m){var l=this,n=l.options,k=n.expandingAnimation;l.uiDialog.height("auto");if(m&&k!==null){l.contentWrapper.show(k.animated,k.options,k.duration,function(o){l.uiDialog.css("height",l._toggleHeight);if(h.isFunction(k.callback)){k.callback(o)}if(n.resizable){l._enableDisableResizer(false)}})}else{l.contentWrapper.show();if(n.resizable){l._enableDisableResizer(false)}l.uiDialog.css("height",l.toggleHeight)}};j.prototype._collapseDialogContent=function(n,m){var l=this,p=l.options,k=p.collapsingAnimation;if(p.resizable){l._enableDisableResizer(true)}if(!m){l._toggleHeight=l.uiDialog[0].style.height}l.uiDialog.height("auto");if(n&&k!==null){l.contentWrapper.hide(k.animated,k.options,k.duration)}else{l.contentWrapper.hide()}l._enableDisableDragger(l.isPin)};j.prototype._enableDisableResizer=function(k){var l=this.uiDialog;if(!this.options.resizable){return}l.resizable({disabled:k});if(k){l.removeClass(this.options.wijCSS.stateDisabled)}};j.prototype._enableDisableDragger=function(k){var l=this.uiDialog;if(!this.options.draggable){return}l.draggable({disabled:k});if(k){l.removeClass(this.options.wijCSS.stateDisabled)}};j.prototype.minimize=function(){var z=this,v=z.uiDialog,n=z.options,y=n.wijCSS,k=null,w=h("<div></div>"),u=h("<div></div>"),r,m,x,q,s={width:undefined,height:undefined},p,A={width:undefined,height:undefined},t="uiDialog",l;if(!z.minimized){q=z.uiDialog.position();s.width=z.uiDialog.width();s.height=z.uiDialog.height();l=z.getState();if(z.maximized){z.maximized=false;z.restoreButton.remove();h(window).unbind(".onWinResize")}else{if(z.collapsed){z._expandDialogContent(false)}z._saveNormalState()}z._enableDisableResizer(true);if(z.collapsed){z._collapseDialogContent(false)}w.appendTo(z.options.appendTo).css({top:z.uiDialog.offset().top,left:z.uiDialog.offset().left,height:z.uiDialog.innerHeight(),width:z.uiDialog.innerWidth(),position:"absolute"});z.contentWrapper.hide();if(z.uiDialogButtonPane.length){z.uiDialogButtonPane.hide()}v.height("auto");v.width("auto");z._doButtonAction(z.minimizeButton,"hide");z._restoreButton(true,z.minimizeButton,"After");z._doButtonAction(z.pinButton,"hide");z._doButtonAction(z.refreshButton,"hide");z._doButtonAction(z.toggleButton,"hide");z._doButtonAction(z.maximizeButton,"show");if(h.browser.webkit){h("."+y.wijdialogCaptionButton,z.uiDialog).css("float","left")}if(z.innerFrame){t="copy";z[t]=z.uiDialog.clone();z[t].empty();z.uiDialogTitlebar.appendTo(z[t])}if(n.minimizeZoneElementId.length>0){k=h("#"+n.minimizeZoneElementId)}if(k!==null&&k.size()>0){k.append(z[t])}else{r=h("."+y.wijdialogZone);if(r.size()===0){r=h('<div class="'+y.wijdialogZone+'"></div>');h(document.body).append(r)}r.append(z[t]).css("z-index",v.css("z-index"))}z[t].css("position","static");z[t].css("float","left");if(h.browser.msie&&h.browser.version==="6.0"){m=h(document).scrollTop();x=document.documentElement.clientHeight-r.height()+m;r.css({position:"absolute",left:"0px",top:x})}u.appendTo("body").css({top:z[t].offset().top,left:z[t].offset().left,height:z[t].innerHeight(),width:z[t].innerWidth(),position:"absolute"});z.uiDialog.hide();if(z.innerFrame){z[t].hide()}w.effect("transfer",{to:u,className:y.content},100,function(){w.remove();u.remove();z[t].show();z.minimized=true;p=z.uiDialog.position();A.width=z.uiDialog.width();A.height=z.uiDialog.height();z._enableDisableDragger(true);z._trigger("resize",null,{originalPosition:q,originalSize:s,position:p,size:A});z._trigger("stateChanged",null,{originalState:l,state:"minimized"})})}};j.prototype._doButtonAction=function(k,l){if(k!==undefined){k.removeClass(this.options.wijCSS.stateHover);k[l]()}};j.prototype.maximize=function(){var m=this,l=h(window),p,o={width:undefined,height:undefined},k,n={width:undefined,height:undefined},q;if(!m.maximized){m._enableDisableDragger(false);p=m.uiDialog.position();o.width=m.uiDialog.width();o.height=m.uiDialog.height();if(m.minimized){m.restore()}else{if(m.collapsed){m._expandDialogContent(false)}m._saveNormalState();q="normal"}m.maximized=true;if(m.maximizeButton!==undefined){m.maximizeButton.hide();m._restoreButton(true,m.maximizeButton,"Before")}if(h.browser.webkit){h("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")}m._onWinResize(m,l);if(m.collapsed){m._collapseDialogContent(false)}if(!m.collapsed){m._enableDisableDragger(true)}m._enableDisableResizer(true);k=m.uiDialog.position();n.width=m.uiDialog.width();n.height=m.uiDialog.height();m._trigger("resize",null,{originalPosition:p,originalSize:o,position:k,size:n});if(q==="normal"){m._trigger("stateChanged",null,{originalState:"normal",state:"maximized"})}}};j.prototype._bindWindowResize=function(){var l=this,k=h(window),o,n,m;k.resize(function(){if(l.maximized){l._onWinResize(l,k)}});if(h.browser.msie&&h.browser.version==="6.0"){k.bind("scroll.wijdialog resize.wijdialog",function(){if(l.minimized){n=h(document).scrollTop();m=l.uiDialog.parent();o=document.documentElement.clientHeight-m.height()+n;m.css({top:o})}})}};j.prototype._saveNormalState=function(){var k=this,l=k.uiDialog,m=k.element;if(!k.maximized){k.normalWidth=l.css("width");k.normalLeft=l.css("left");k.normalTop=l.css("top");k.normalHeight=l.css("height");k.normalInnerHeight=m.css("height");k.normalInnerWidth=m.css("width");k.normalInnerMinWidth=m.css("min-width");k.normalInnerMinHeight=m.css("min-height")}};j.prototype._onWinResize=function(l,k){l.uiDialog.css("top",k.scrollTop());l.uiDialog.css("left",k.scrollLeft());l.uiDialog.setOutWidth(k.width());l.uiDialog.setOutHeight(k.height());l.options.width=l.uiDialog.width();l.options.height=l.uiDialog.height();l._size();if(l.collapsed){l.uiDialog.height("auto");l.contentWrapper.hide()}};j.prototype._restoreButton=function(l,n,k){var m=this,p={button:"restore",info:{visible:l,click:m.restore,iconClassOn:this.options.wijCSS.iconNewWin}},o=m._createCaptionButton(p,m.uiDialogTitlebar,true);if(l){o["insert"+k](n);m.restoreButton=o}};j.prototype._appendToBody=function(k){if(!this.innerFrame){k.appendTo(this.options.appendTo)}else{this.uiDialogTitlebar.prependTo(k);k.show()}};j.prototype.restore=function(){var s=this,q=s.uiDialog,l,n={width:undefined,height:undefined},m,t={width:undefined,height:undefined},r=h("<div></div>"),p=h("<div></div>"),o="uiDialog",k;if(s.minimized){s.minimized=false;if(s.innerFrame){o="copy";if(!s[o]){o="uiDialog"}}l=s[o].position();n.width=s[o].width();n.height=s[o].height();r.appendTo(s.options.appendTo).css({top:s[o].offset().top,left:s[o].offset().left,height:s[o].innerHeight(),width:s[o].innerWidth(),position:"absolute"});q.css("position","absolute");q.css("float","");s._appendToBody(q);s._enableDisableResizer(false);if(!s.isPin){s._enableDisableDragger(false)}s._restoreToNormal();s.contentWrapper.show();if(s.uiDialogButtonPane.length){s.uiDialogButtonPane.show()}p.appendTo(s.options.appendTo).css({top:s.uiDialog.offset().top,left:s.uiDialog.offset().left,height:s.uiDialog.innerHeight(),width:s.uiDialog.innerWidth(),position:"absolute"});s.uiDialog.hide();r.effect("transfer",{to:p,className:this.options.wijCSS.content},150,function(){s.uiDialog.show();m=s.uiDialog.position();t.width=s.uiDialog.width();t.height=s.uiDialog.height();r.remove();p.remove();if(s.copy){s.copy.remove()}s._trigger("resize",null,{originalPosition:l,originalSize:n,position:m,size:t});k=s.getState();s._trigger("stateChanged",null,{originalState:"minimized",state:k})});if(s.collapsed){s._collapseDialogContent()}s._doButtonAction(s.minimizeButton,"show");s._doButtonAction(s.restoreButton,"remove");s._doButtonAction(s.pinButton,"show");s._doButtonAction(s.refreshButton,"show");s._doButtonAction(s.toggleButton,"show");if(h.browser.webkit){h("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")}}else{if(s.maximized){s.maximized=false;l=s.uiDialog.position();n.width=s.uiDialog.width();n.height=s.uiDialog.height();h(window).unbind(".onWinResize");if(s.collapsed){s._expandDialogContent()}s._enableDisableResizer(false);if(!s.isPin){s._enableDisableDragger(false)}s._restoreToNormal();s.contentWrapper.show();if(s.collapsed){s._collapseDialogContent()}if(s.maximizeButton!==undefined){s.maximizeButton.show();s._restoreButton(false,s.maximizeButton,"before")}m=s.uiDialog.position();t.width=s.uiDialog.width();t.height=s.uiDialog.height();s._trigger("resize",null,{originalPosition:l,originalSize:n,position:m,size:t});k=s.getState();s._trigger("stateChanged",null,{originalState:"maximized",state:k})}}};j.prototype.getState=function(){var k=this;return k.minimized?"minimized":(k.maximized?"maximized":"normal")};j.prototype.reset=function(){var k=this;if(k.getState()==="normal"){k.normalWidth=k.normalLeft=k.normalTop=k.normalHeight=k.normalInnerHeight=k.normalInnerWidth=k.normalInnerMinWidth=k.normalInnerMinHeight=undefined;if(k.initHeight&&k.initWidth){k.options.width=k.initWidth;k.options.height=k.initHeight;k._size()}k._setOption("position",k._originalPosition)}else{k.element.one(this.widgetEventPrefix+"statechanged",function(){k.normalWidth=k.normalLeft=k.normalTop=k.normalHeight=k.normalInnerHeight=k.normalInnerWidth=k.normalInnerMinWidth=k.normalInnerMinHeight=undefined;if(k.initHeight&&k.initWidth){k.options.width=k.initWidth;k.options.height=k.initHeight;k._size()}k._setOption("position",k._originalPosition)});k.restore()}};j.prototype.open=function(){var k=this,l=k.options;if((l.hide==="drop"||l.hide==="bounce")&&h.browser.msie){k.uiDialog.css("filter","auto")}if(!k.innerFrame){if(!k.minimized){i.prototype.open.call(this)}else{k.uiDialog.show();k._isOpen=true}k.uiDialog.wijTriggerVisibility()}else{if(h.browser.msie&&h.browser.version==="9.0"){window.setTimeout(function(){k.innerFrame.attr("src",l.contentUrl)},200)}else{k.innerFrame.attr("src",l.contentUrl)}if(!k.minimized){i.prototype.open.call(this)}else{k.uiDialogTitlebar.show();k._isOpen=true}}if(k.collapsed){k._collapseDialogContent(false,true)}if(l.disabled){if(k.disabledDiv){k.disabledDiv.show()}else{k.disable()}}};j.prototype.close=function(){var k=this,l=k.options;if(i.prototype.close.call(this)){if(k.innerFrame){k.innerFrame.attr("src","");if(k.minimized){k.uiDialogTitlebar.hide()}}if(k.disabledDiv&&l.disabled){k.disabledDiv.hide()}}};j.prototype._restoreToNormal=function(){var k=this,l=k.uiDialog,m=k.element;l.css("width",k.normalWidth);l.css("left",k.normalLeft);l.css("top",k.normalTop);l.css("height",k.normalHeight);m.css("height",k.normalInnerHeight);m.css("width",k.normalInnerWidth);m.css("min-width",k.normalInnerMinWidth);m.css("min-height",k.normalInnerMinHeight);k.options.width=k.uiDialog.width();k.options.height=k.uiDialog.height()};return j})(g);d.wijdialog=f;if(h.ui&&h.ui.dialog){h.extend(h.ui.dialog.overlay,{create:function(j){if(this.instances.length===0){setTimeout(function(){if(h.ui.dialog.overlay.instances.length){h(document).bind(h.ui.dialog.overlay.events,function(k){if(h(k.target).zIndex()<h.ui.dialog.overlay.maxZ&&!h.contains(j.element[0],k.target)){return false}})}},1);h(document).bind("keydown.dialog-overlay",function(k){var l=b.getKeyCodeEnum();if(j.options.closeOnEscape&&!k.isDefaultPrevented()&&k.keyCode&&k.keyCode===l.ESCAPE){j.close(k);k.preventDefault()}});h(window).bind("resize.dialog-overlay",h.ui.dialog.overlay.resize)}var i=(this.oldInstances.pop()||h("<div></div>").addClass(j.options.wijCSS.overlay)).appendTo(document.body).css({width:this.width(),height:this.height()});if(h.fn.bgiframe){i.bgiframe()}this.instances.push(i);return i},height:function(){var j,i;if(h.browser.msie){j=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(j<i){return h(window).height()+"px"}else{return j+"px"}}else{return h(document).height()+"px"}},width:function(){var i,j;if(h.browser.msie){i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);j=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(i<j){return h(window).width()+"px"}else{return i+"px"}}else{return h(document).width()+"px"}}});f.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,h.ui.dialog.prototype.options,new c());f.prototype.disable=function(){return this._setOption("disabled",true)};f.prototype.enable=function(){return this._setOption("disabled",false)};h.wijmo.registerWidget(e,h.ui.dialog,f.prototype)}})(b.dialog||(b.dialog={}));var a=b.dialog})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.options.disabled&&this.disable(),this._refresh()},t.prototype._destroy=function(){this.element.removeClass(this.options.wijCSS.widget+" wijmo-wijpager "+this.options.wijCSS.helperClearFix),this.$ul.remove()},t.prototype._setOption=function(e,t){this._super(e,t),this._refresh()},t.prototype._refresh=function(){this._validate(),this.$ul&&this.$ul.remove(),this.element.append(this.$ul=n('<ul class="ui-list '+this.options.wijCSS.cornerAll+" "+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(!1);break;case"nextpreviousfirstlast":this._createNextPrev(!0);break;case"numeric":this._createNumeric(!1);break;case"numericfirstlast":this._createNumeric(!0)}},t.prototype._validate=function(){var e=this.options;if(isNaN(e.pageCount)||e.pageCount<1)e.pageCount=1;isNaN(e.pageIndex)||e.pageIndex<0?e.pageIndex=0:e.pageIndex>=e.pageCount&&(e.pageIndex=e.pageCount-1);if(isNaN(e.pageButtonCount)||e.pageButtonCount<1)e.pageButtonCount=1},t.prototype._createNextPrev=function(e){var t=this.options;e&&t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),t.pageIndex&&this.$ul.append(this._createPagerItem(!1,t.previousPageText,t.pageIndex,t.previousPageClass)),t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.nextPageText,t.pageIndex+2,t.nextPageClass)),e&&t.pageIndex+1<t.pageCount&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass))},t.prototype._createNumeric=function(e){var t=this.options,n=t.pageIndex+1,r=1,i=Math.min(t.pageCount,t.pageButtonCount),s;n>i&&(r=Math.floor(t.pageIndex/t.pageButtonCount)*t.pageButtonCount+1,i=r+t.pageButtonCount-1,i=Math.min(i,t.pageCount),i-r+1<t.pageButtonCount&&(r=Math.max(1,i-t.pageButtonCount+1))),r!==1&&(e&&this.$ul.append(this._createPagerItem(!1,t.firstPageText,1,t.firstPageClass)),this.$ul.append(this._createPagerItem(!1,"...",r-1,"")));for(s=r;s<=i;s++)this.$ul.append(this._createPagerItem(s===n,s.toString(),s,""));t.pageCount>i&&(this.$ul.append(this._createPagerItem(!1,"...",i+1,"")),e&&this.$ul.append(this._createPagerItem(!1,t.lastPageText,t.pageCount,t.lastPageClass)))},t.prototype._createPagerItem=function(e,t,r,i){var s,o=this.options.wijCSS,u=this,a=n("<li />").addClass(o.pagerButton+" "+o.cornerAll).attr({role:"tab","aria-label":t,title:t});return e?a.addClass(o.stateActive).attr("aria-selected","true"):a.addClass(o.stateDefault).hover(function(){u.options.disabled||n(this).addClass(o.stateHover)},function(){u.options.disabled||n(this).removeClass(o.stateHover)}).bind("click."+this.widgetName,{newPageIndex:r-1},n.proxy(this._onClick,this)),e?s=n("<span />"):s=i?n("<span />").addClass(o.icon+" "+i):n("<a/>").attr("href","#"),s.text(t),a.append(s),a},t.prototype._onClick=function(e){if(this.options.disabled)return!1;var t={newPageIndex:e.data.newPageIndex,handled:!1};if(this._trigger("pageIndexChanging",null,t)!==!1&&this.options.pageIndex!==t.newPageIndex){this.options.pageIndex=t.newPageIndex,t.handled||this._refresh();var n={newPageIndex:t.newPageIndex};this._trigger("pageIndexChanged",null,n)}return!1},t}(e.wijmoWidget);t.wijpager=r,r.prototype.widgetEventPrefix="wijpager";var i=function(){function e(){this.wijCSS={pagerButton:"wijmo-wijpager-button"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-b",stateActive:"ui-btn-down-c"},this.firstPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekFirst,this.firstPageText="First",this.lastPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekEnd,this.lastPageText="Last",this.mode="numeric",this.nextPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekNext,this.nextPageText="Next",this.pageButtonCount=10,this.previousPageClass=n.wijmo.widget.prototype.options.wijCSS.iconSeekPrev,this.previousPageText="Previous",this.pageCount=1,this.pageIndex=0,this.pageIndexChanging=null,this.pageIndexChanged=null}return e}();r.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new i),n.wijmo.registerWidget("wijpager",r.prototype)})(e.pager||(e.pager={}));var t=e.pager})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var g=jQuery;function f(i,j){var h=g.extend(true,{},i,j);delete h.constructor;return h}e.extendWidgetOptions=f;var d=(function(i){__extends(h,i);function h(){i.apply(this,arguments);this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._windowResizeTimer=0}h.prototype._createWidget=function(j,k){var l=j&&(b).data.util.isClassInstance(j.data)&&!((typeof wijdatasource==="function")&&(j.data instanceof wijdatasource))&&j.data;if(l){delete j.data}i.prototype._createWidget.apply(this,arguments);if(l){j.data=l;this.option("data",l)}};h.prototype._create=function(){var l=this;if(!this.element.is("table")){throw"invalid markup"}this._windowResizeTimer=0;this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this._initialized=false;this._destroyed=false;this._rendered=false;this._eventUID=undefined;this._dataViewWrapper=undefined;this._originalHtml=undefined;this._originalAttr=undefined;this._originalCssText=undefined;this._autoHeight=undefined;this._autoWidth=undefined;this._renderCounter=0;this.$superPanelHeader=undefined;this.$topPagerDiv=undefined;this.$bottomPagerDiv=undefined;this.$groupArea=undefined;this.__uid=undefined;this._wijDataView=undefined;this.outerDiv=undefined;this.sketchTable=undefined;this.cellFormatter=undefined;this.rowStyleFormatter=undefined;this.cellStyleFormatter=undefined;this._eventUID=b.grid.getUID();this._spinnerIsActivated=false;this.deficientFilters={};var k=("data" in this.options),m=k&&this.options.data;if(k){delete this.options.data}this.options=g.extend(true,{},this.options);if(g.isFunction(window.wijmoASPNetParseOptions)){window.wijmoASPNetParseOptions(this.options)}if(k){this.options.data=m}if(window.wijmoApplyWijTouchUtilEvents){g=(window).wijmoApplyWijTouchUtilEvents(g)}this._initialized=false;this._destroyed=false;this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default");this._dataViewWrapper=new b.grid.dataViewWrapper(this);this._originalHtml=this.element.html();this._originalAttr={};this._originalCssText=this.element[0].style.cssText;this.element.addClass("wijmo-wijgrid-root");this.element.wrap('<div class="'+this.options.wijCSS.widget+" wijmo-wijgrid "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>');this.outerDiv=this.element.parent();var n=this.element[0].style.height,j=this.element[0].style.width;if(n){this.outerDiv.css("height",n)}this._autoHeight=(n==""||n=="auto");if(j){this.outerDiv.css("width",this.element[0].style.width)}this._autoWidth=(j==""||j=="auto");this.element.css({height:"",width:""});if(this.options.disabled){this.disable()}this.cellFormatter=new b.grid.cellFormatterHelper();this.rowStyleFormatter=new b.grid.rowStyleFormatterHelper(this);this.cellStyleFormatter=new b.grid.cellStyleFormatterHelper(this);this._viewPortBounds({start:0,end:0});if(this._allowVirtualScrolling()){this._viewPortBounds().start=this._scrollingState.index;if(this._serverSideVirtualScrolling()){this._dataOffset=this._scrollingState.index}}if(this.element.wijAddVisibilityObserver){this.element.wijAddVisibilityObserver(function(o){if(l._initialized&&!l._destroyed&&(o.target!==l.element[0])&&(o.target!==l.outerDiv[0])){l.setSize()}},"wijgrid")}this._renderCounter=0};h.prototype._destroy=function(){var k,j=this;try{this._view().dispose();this._detachEvents(true);if(this._resizerui){this._resizerui.dispose();this._resizerui=null}if(this._frozenerui){this._frozenerui.dispose();this._frozenerui=null}if(this._selectionui){this._selectionui.dispose();this._selectionui=null}if(this._dragndropui){this._dragndropui.dispose();this._dragndropui=null}this._dataViewWrapper.dispose();b.grid.remove$dataByPrefix(this.element,this._data$prefix);if(this.element.wijRemoveVisibilityObserver){this.element.wijRemoveVisibilityObserver()}this.element.insertBefore(this.outerDiv);this.outerDiv.remove();this.element.html(this._originalHtml);g.each(this._originalAttr,function(l,m){if(m===undefined){j.element.removeAttr(l)}else{j.element.attr(l,m)}});this.element.removeClass("wijmo-wijgrid-root");this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=true}};h.prototype._init=function(){this.$superPanelHeader=null;this.$topPagerDiv=null;this.$bottomPagerDiv=null;this.$groupArea=null;this._prevHoveredSketchRowIndex=-1;this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default");if(!this.options.data){if(!this._field("thead")){this._field("thead",b.grid.readTableSection(this.element,1))}if(!this._field("tfoot")){this._field("tfoot",b.grid.readTableSection(this.element,3))}}this._initialized=this._initialized||false;this.ensureControl(true)};h.prototype._setOption=function(l,n){var o=this["_preset_"+l],k=this.options[l],m,j;if(o!==undefined){n=o.apply(this,[n,k])}m=(n!==k)||(l.toLowerCase()==="columns");i.prototype._setOption.apply(this,[l,n]);if(m){j=this["_postset_"+l];if(j!==undefined){j.apply(this,[n,k])}}};h.prototype.columns=function(){return this._field("columns")||[]};h.prototype.currentCell=function(l,j,o){var n,k=this._view(),m=this._rows();if(arguments.length===0){n=this._field("currentCell");if(!n){this._field("currentCell",n=b.grid.cellInfo.outsideValue)}return n}else{n=(typeof(l)!=="number")?(l)._clone():new b.grid.cellInfo(l,j);if(!n.isEqual(b.grid.cellInfo.outsideValue)){if(!n._isValid()){throw"invalid arguments"}n._clip(this._getDataCellsRange(e.dataRowsRangeMode.sketch));if(n.rowIndex()>=0){if(!(k._getRowInfoBySketchRowIndex(n.rowIndex()).type&b.grid.rowType.data)){return}}}n._setGridView(this);this._changeCurrentCell(null,n,{changeSelection:o||false,setFocus:false});return this._field("currentCell")}};h.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()};h.prototype.dataView=function(){return this._dataViewWrapper.dataView()};h.prototype.doRefresh=function(l){var o=this;if(!g.isPlainObject(l)){l={}}var p,u=this,q=b.grid.EXPANDO,k=l&&l.virtualScrollData;if(!this._initialized){try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.getFieldsInfo(),true,true)}catch(r){throw r}finally{this._ownerise(true);this._initialized=true}}else{}if(!k){this._rebuildLeaves();var j=e.lazy(this._dataViewWrapper.data,this._dataViewWrapper);var t=this._dataViewWrapper.dataView();var m=this._prepareTotalsRequest(true);if(m.length){g.each(this._field("leaves"),function(v,w){w._totalsValue=(j().totals)?j().totals[w.dataKey]:undefined})}if(t.count()){p=this._field("leaves");var n=new b.grid.LazySketchTable({count:function(){return t.count()},getRange:function(B,z,x,A){for(var y=0;y<z;y++){var w=B+y;var v=t.item(w);x[A+y]=o._buildSketchRow({values:v,originalRowIndex:w},p)}}});if(this._hasGrouping()||this._hasMerging()){n.ensureNotLazy()}this.sketchTable=n}else{this.sketchTable=new b.grid.SketchTable();var s=j().emptyData;if(s){p=this._field("visibleLeaves");g.each(s,function(v,w){u.sketchTable.add(u._buildSketchRowEmptyDataItem(w,p,v===s.length-1))})}}}this._onRendering(l);if(!k){this._refresh(l)}else{this._refreshVirtual(l)}if(l&&g.isFunction(l.beforeOnRendered)){l.beforeOnRendered.apply(this,[l])}this._onRendered(l);if(l&&g.isFunction(l.afterRefresh)){l.afterRefresh.apply(this,[l])}};h.prototype.beginEdit=function(){return this._beginEditInternal(null)};h.prototype.endEdit=function(){return this._endEditInternal(null)};h.prototype.ensureControl=function(k,j){this._loading();if(!g.isPlainObject(j)){j={data:null,afterRefresh:null,beforeRefresh:null}}j._wijgridMarker=true;if(this._initialized){if(!j||!j.virtualScrollData){this._convertWidgetsToOptions()}}else{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.isDataLoaded()&&this._dataViewWrapper.getFieldsInfo(),this._dataViewWrapper.isDataLoaded(),false);if(!this._dataViewWrapper.isOwnDataView()){(new b.grid.settingsManager(this)).MapDVToWG()}}this._ownerise(true);if(this._initialized){if(j&&g.isFunction(j.beforeRefresh)){j.beforeRefresh.apply(this)}}this.mAllowVirtualScrolling=undefined;if(k===true){this._dataViewWrapper.load(j)}else{this.doRefresh(j);this._loaded()}};h.prototype.getCellInfo=function(k){var j=null;if(k&&(k=this._findUntilOuterDiv(k,{td:true,th:true}))){j=this._view().getAbsoluteCellInfo(k,false)}return j};h.prototype.getFilterOperatorsByDataType=function(j){return(new b.grid.filterOperatorsCache(this)).getByDataType(j||"string")};h.prototype.pageCount=function(){if(this._customPagingEnabled()){return Math.ceil(this.options.totalRows/this.options.pageSize)||1}return this.options.allowPaging?(this._dataViewWrapper.dataView()).pageCount():1};h.prototype._closestCulture=function(){return this.mClosestCulture};h.prototype._serverShaping=function(){return false};h.prototype._pageIndexForDataView=function(){return this.options.pageIndex};h.prototype.setSize=function(o,l){var m=this._view(),n={type:"",hScrollValue:null,vScrollValue:null},p=this.outerDiv,k=this._field("visibleLeaves"),j=[];if(m&&m.getScrollValue){n=m.getScrollValue()}if(o||(o===0)){this._autoWidth=false;p.width(o)}if(l||(l===0)){this._autoHeight=false;p.height(l)}g.each(k,function(s,r){var t=m.getHeaderCell(s),u=m.getJoinedCols(s);g(t).css("width","");g.each(u,function(w,v){g(v).css("width","")})});this._view().updateSplits(n);var q=this._UIFrozener();if(q){q.refresh()}};h.prototype.selection=function(){var j=this._field("selection");if(!j){this._field("selection",j=new b.grid.selection(this))}return j};h.prototype._onDataViewCurrentPositionChanged=function(m,k){var j=this._currentCellFromDataView(this.currentCell().cellIndex()),l=this.selection();j=this.currentCell(j,null,true)};h.prototype._resetDataProperties=function(){this.options.pageIndex=0;var j=this._viewPortBounds();j.start=j.end=0};h.prototype._onDataViewLoading=function(){this._activateSpinner();this._trigger("dataLoading")};h.prototype._onDataViewReset=function(j){(new b.grid.settingsManager(this)).MapDVToWG();this._trigger("dataLoaded");this.doRefresh(j);this._loaded()};h.prototype._onDataViewLoaded=function(){};h.prototype._loading=function(){this._activateSpinner();this._trigger("loading")};h.prototype._loaded=function(){this._deactivateSpinner();this._trigger("loaded")};h.prototype._buildSketchRow=function(u,m){var k,n,o,r,s,l,t=b.data.Expando.getFrom(u.values,false),q=t?t[b.grid.EXPANDO]:null,j=new b.grid.SketchDataRow(u.originalRowIndex,q&&q.rowAttributes),p=q&&q.cellsAttributes;for(k=0,n=m.length;k<n;k++){o=m[k];if(b.grid.validDataKey(o.dataKey)){r=p?p[o.dataKey]:null;s=this._dataViewWrapper.getValue(u.values,o.dataKey);j.add(new e.ValueCell(this.parse(o,s),r))}}return j};h.prototype._buildSketchRowEmptyDataItem=function(k,p,o){var l,j,n=new e.SketchRow(b.grid.rowType.emptyDataRow),m=p.length;for(l=0,j=k.length;l<j;l++){n.add(new e.HtmlCell(k[l],{colSpan:(m>0&&o)?m:1}))}return n};h.prototype._prepareColumnOptions=function(k,l,j,m,r){b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));t._originalDataKey=t.dataKey;t._originalHeaderText=t.headerText});new b.grid.bandProcessor().getVisibleHeight(k,true);var o=[],p=this._originalHeaderRowData(),n=this._originalFooterRowData(),q=(l||"").toLowerCase(),s=this;if(m){b.grid.columnsGenerator.generate(q,j,k)}b.grid.setTraverseIndex(k);b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));b.grid.shallowMerge(t,e.c1basefield.prototype.options);if(!t.isBand){b.grid.shallowMerge(t,e.c1field.prototype.options);t.groupInfo=t.groupInfo||{};b.grid.shallowMerge(t.groupInfo,e.c1field.prototype.options.groupInfo);if(!t.clientType){t.clientType="c1field"}}else{t.clientType="c1band"}if(t.isLeaf&&!t.isBand){o.push(t)}});this._field("leaves",o);if(m){g.each(o,g.proxy(function(v,t){var u=(typeof(t.dataKey)==="number")?t.dataKey:v;if(q==="merge"||t.dynamic===true){if(t.headerText===undefined){if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&p&&(u<p.length)){t.headerText=g.trim(p[u])}else{if(b.grid.validDataKey(t.dataKey)){t.headerText=""+t.dataKey}}}}if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&n&&(u<n.length)){t._footerTextDOM=g.trim(n[u])}},this))}};h.prototype._rebuildLeaves=function(){var j=[],l=[],k;if(this._showRowHeader()){k=b.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:true,allowMoving:false,allowSizing:false,allowSort:false,isRowHeader:true});k.owner=this;j.push(k)}g.each(this.options.columns,function(m,n){j.push(n)});this._columnsHeadersTable(new b.grid.bandProcessor().generateSpanTable(j,l));this._field("leaves",l);this._onLeavesCreated()};h.prototype._onLeavesCreated=function(){var o=this._field("leaves"),m=this._dataViewWrapper.getFieldsInfo(),n,l=0,j=0,k=this;this._field("visibleLeaves",g.grep(o,function(p,q){p.leavesIdx=q;if(b.grid.validDataKey(p.dataKey)){p.dataIndex=l++}else{p.dataIndex=-1}if(!p.isBand){n=m[p.dataKey];if(n){p._underlyingDataType=n.type;p._underlyingDataFormatString=n.format}if(g.isFunction(p.dataParser)){p.dataParser=new (p.dataParser)()}}if(p.parentVis){p.visLeavesIdx=j++;return true}return false}))};h.prototype._allowVirtualScrolling=function(){if(this.mAllowVirtualScrolling===undefined){this.mAllowVirtualScrolling=!this.options.allowPaging&&this.options.allowVirtualScrolling&&(this.options.staticRowIndex<0)&&(this.options.scrollMode!=="none")&&!this._hasMerging()}return this.mAllowVirtualScrolling};h.prototype._headerRows=function(){return this._view().headerRows()};h.prototype._filterRow=function(){return this._view().filterRow()};h.prototype._rows=function(){return this._view().bodyRows()};h.prototype._localizeFilterOperators=function(k){var j=this,l=new b.grid.filterOperatorsCache(this);g.each(k,function(m,p){if(p.name){var n=l.getByName(p.name);if(n){n.displayName=p.displayName}}})};h.prototype._UIDragndrop=function(j){if(!this._dragndropui&&j){this._dragndropui=new b.grid.uiDragndrop(this)}return this._dragndropui};h.prototype._UIFrozener=function(j){if(!this._frozenerui&&j){this._frozenerui=new b.grid.uiFrozener(this)}return this._frozenerui};h.prototype._UIResizer=function(j){if(!this._resizerui&&j){this._resizerui=new b.grid.uiResizer(this)}return this._resizerui};h.prototype._UISelection=function(j){if(!this._selectionui&&j){this._selectionui=new b.grid.uiSelection(this)}return this._selectionui};h.prototype._postset_allowColMoving=function(m,l){var k=this;g.each(this.columns(),function(n,o){if(m){k._UIDragndrop(true).attach(o)}else{k._UIDragndrop(true).detach(o)}});var j=this._field("groupedWidgets");if(j){g.each(j,function(n,o){if(m){k._UIDragndrop(true).attach(o)}else{k._UIDragndrop(true).detach(o)}})}};h.prototype._postset_allowSorting=function(k,j){this.ensureControl(false)};h.prototype._postset_columns=function(k,j){this._initialized=false;this.ensureControl(true)};h.prototype._postset_allowPaging=function(k,j){this.ensureControl(true)};h.prototype._postset_freezingMode=function(k,j){if(this._frozenerui){this._frozenerui.refresh()}};h.prototype._postset_culture=function(k,j){throw"read-only"};h.prototype._postset_customFilterOperators=function(k,j){var l=this._dataViewWrapper.dataView()};h.prototype._postset_data=function(k,j){this._ownerise(false);b.grid.traverse(this.options.columns,function(n,m){if(n.dynamic){var l=g.inArray(n,m);if(l>=0){m.splice(l,1)}}else{n.dataKey=n._originalDataKey;n.headerText=n._originalHeaderText}});this._initialized=false;if(this._dataViewWrapper){this._dataViewWrapper.dispose()}this._dataViewWrapper=new b.grid.dataViewWrapper(this);this.ensureControl(true)};h.prototype._postset_disabled=function(m,l){var k=this,j=this._view();b.grid.iterateChildrenWidgets(this.outerDiv,function(n,o){if(o!==k){o.option("disabled",m)}});if(j){j.ensureDisabledState()}};h.prototype._postset_groupIndent=function(k,j){this.ensureControl(false)};h.prototype._postset_groupAreaCaption=function(l,k){var j=this._groupedColumns();if(this.$groupArea&&(!j||!j.length)){this.$groupArea.html(l||"&nbsp;")}};h.prototype._postset_highlightCurrentCell=function(k,j){var l=this.currentCell();if(l&&l._isValid()){this._highlightCellPosition(l,k)}};h.prototype._preset_pageIndex=function(n,l){if(isNaN(n)){throw"out of range"}var k=this.pageCount(),m=function(o){if(o>k-1){o=k-1}if(o<0){o=0}return o},j;n=m(n);if(this.options.allowPaging&&n!==l){j={newPageIndex:n};if(!this._onPageIndexChanging(j)){n=l}else{n=m(j.newPageIndex)}}return n};h.prototype._postset_pageIndex=function(l,k){if(this.options.allowPaging){var j={newPageIndex:l};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onPageIndexChanged(j)}else{this.ensureControl(true,{afterRefresh:function(){this._onPageIndexChanged(j)}})}}};h.prototype._preset_pageSize=function(k,j){if(isNaN(k)){throw"out of range"}if(k<=0){k=1}return k};h.prototype._postset_pageSize=function(k,j){this._resetDataProperties();if(this.options.allowPaging&&!this._customPagingEnabled()){this.ensureControl(true)}};h.prototype._postset_pagerSettings=function(k,j){this.ensureControl(false)};h.prototype._postset_scrollMode=function(k,j){this.ensureControl(false)};h.prototype._postset_selectionMode=function(m,k){var l=this.selection(),n=this.currentCell(),j=this.selection().selectedCells().length();l.beginUpdate();l.clear();if(n&&n._isValid()&&j){l._selectRange(new b.grid.cellInfoRange(n,n),false,false,b.grid.cellRangeExtendMode.none,null)}l.endUpdate();this._view().toggleDOMSelection(m==="none")};h.prototype._postset_showFilter=function(k,j){this.ensureControl(false)};h.prototype._postset_showGroupArea=function(k,j){this.ensureControl(false)};h.prototype._postset_showRowHeader=function(k,j){this.ensureControl(false)};h.prototype._postset_staticRowIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_staticColumnIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_allowVirtualScrolling=function(k,j){this.ensureControl(false)};h.prototype._preset_allowVirtualScrolling=function(k,j){if(isNaN(k)||k<0){throw"out of range"}return k};h.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var k=this.options.wijCSS,j=this.outerDiv.append('<div class="wijmo-wijgrid-overlay '+k.overlay+'"></div><span class="wijmo-wijgrid-loadingtext '+k.content+" "+k.cornerAll+'"><span class="'+k.icon+' ui-icon-clock"></span>'+this.options.loadingText+"</span>").find("> .wijmo-wijgrid-loadingtext");j.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"});this._spinnerIsActivated=true}};h.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0};h.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated){try{this.outerDiv.find("> .wijmo-wijgrid-overlay, > .wijmo-wijgrid-loadingtext").remove()}finally{this._spinnerIsActivated=false}}};h.prototype._columnWidgetsFactory=function(j,m){var k,l=m.clientType;if(!l&&m.isBand){l="c1band"}m=g.extend({},m,{disabled:this.options.disabled});try{g.data(j[0],"wijgridowner",this);switch(l){case"c1basefield":k=j.c1basefield(m);break;case"c1band":k=j.c1band(m);break;default:k=j.c1field(m)}}finally{g.removeData(j[0],"wijgridowner")}return k};h.prototype._convertWidgetsToOptions=function(){if(this._initialized&&this._mergeWidgetsWithOptions){this._ownerise(false);this._widgetsToOptions();this._ownerise(true)}};h.prototype._field=function(j,k){return b.grid.dataPrefix(this.element,this._data$prefix,j,k)};h.prototype._removeField=function(j){var k=this._data$prefix+j;this.element.removeData(k)};h.prototype._prepareTotalsRequest=function(k){var m=this._field("leaves"),j,l;if(!m||!this.options.showFooter){return[]}j=g.map((m),function(o,n){if(!o.isBand&&b.grid.validDataKey(o.dataKey)&&o.aggregate&&o.aggregate!=="none"){if(k){return[{column:o,aggregate:o.aggregate}]}else{return[{dataKey:o.dataKey,aggregate:o.aggregate}]}}return null});return j};h.prototype._widgetsToOptions=function(){var j=b.grid.flatten(this.options.columns);g.each(this.columns(),function(m,l){delete l.options.columns;var k=j[l.options.travIdx];g.extend(true,k,l.options);k.filterValue=l.options.filterValue;k.filterOperator=l.options.filterOperator})};h.prototype._recreateColumnWidgets=function(){g.each(this.columns(),function(s,t){t.destroy()});var n=[],p=this._headerRows(),r,o,q,m,l,j,k;if(p&&p.length()){r=[];b.grid.traverse(this.options.columns,function(s){if(s.parentVis){r.push(s)}});for(o=0,q=r.length;o<q;o++){m=r[o];l=p.item(m.thY);j=b.grid.rowAccessor.getCell(l,m.thX);k=this._columnWidgetsFactory(g(j),m);n.push(k.data(b.grid.widgetName(k)))}}this._field("columns",n)};h.prototype._groupedColumns=function(l){var j;l=!(j=this._field("groupedColumns"))||l;if(l){j=[];var n=this._field("leaves")||[],m=false,k=function(o){return o.groupInfo&&o.groupInfo.position&&(o.groupInfo.position!=="none")};g.each(n,function(o,p){if(k(p)){m=m||(p.groupedIndex===undefined);if(!m){j.push(p)}}else{delete p.groupedIndex}});if(m){g.each(n,function(o,p){if(k(p)){p.groupedIndex=j.length;j.push(p)}})}else{j.sort(function(p,o){return p.groupedIndex-o.groupedIndex});g.each(j,function(o,p){p.groupedIndex=o})}this._field("groupedColumns",j)}return j||[]};h.prototype._ownerise=function(j){if(j){var k=this;b.grid.traverse(this.options.columns,function(o){o.owner=k;var n,m,l;if((n=o.groupInfo)){n.owner=o;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){n.expandInfo[m].owner=n}}}})}else{b.grid.traverse(this.options.columns,function(o){delete o.owner;var n,m,l;if((n=o.groupInfo)){delete n.owner;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){delete n.expandInfo[m].owner}}}})}};h.prototype._ensureRenderableBounds=function(j){return b.grid.ensureBounds(j,this._renderableRowsCount()-1)};h.prototype._ensureTotalRowsBounds=function(j){return b.grid.ensureBounds(j,this._totalRowsCount()-1)};h.prototype._ensureViewPortBoundsVisible=function(k){var j=this._renderableRowsCount();if(k.end>=j){k.start-=k.end-j;k.end=j-1}return k};h.prototype._renderableBoundsCollection=function(){return this.mRenderableBoundsCollection};h.prototype._rebuildRenderBoundsCollection=function(){var o=-1,j=-1,m=false,n=this._totalRowsCount();this.mRenderableBoundsCollection=new b.grid.renderBoundsCollection(n-1);if(this._allowVirtualScrolling()&&this._serverSideVirtualScrolling()){this.mRenderableBoundsCollection.add({start:0,end:n-1})}else{if(!this._allowVirtualScrolling()||!this._hasGrouping()){this.mRenderableBoundsCollection.add({start:0,end:n-1})}else{for(var l=0;l<this.sketchTable.count();l++){var k=this.sketchTable.row(l);if(k.style("display")==="none"){if(o>=0){this.mRenderableBoundsCollection.add({start:o,end:j});m=false}o=j=-1}else{if(o<0){m=true;o=j=l}else{j++}}}if(m){this.mRenderableBoundsCollection.add({start:o,end:j})}}}};h.prototype._refresh=function(j){new b.grid.grouper().group(this,this.sketchTable,this._field("leaves"));new b.grid.merger().merge(this.sketchTable,this._field("visibleLeaves"));this._rebuildRenderBoundsCollection();if(this.options.scrollMode!=="none"){this.mView=new b.grid.fixedView(this,this._viewPortBounds())}else{this.mView=new b.grid.flatView(this,this._viewPortBounds())}this._render();this._ownerise(false);this._recreateColumnWidgets();this._ownerise(true);if(this.options.allowPaging){if(this.$topPagerDiv){this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}if(this.$bottomPagerDiv){this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}}};h.prototype._refreshVirtual=function(j){var l=j.virtualScrollData,k={top:0,bottom:0};if(l.data){k=this._processVirtualData(l)}this._updateRowInfos(l,k);this._renderVirtualIntoView(l)};h.prototype._updateRowInfos=function(o,l){var j=this._viewPortBounds(),q=this._view(),m=o.newBounds,s=this._view().bodyRows(),p,n,r,k;switch(o.mode){case e.intersectionMode.reset:break;case e.intersectionMode.overlapBottom:p={start:m.start-j.start,end:j.end-j.start};r=m.start-j.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex-=r;if(l.top!==0){k.dataItemIndex+=l.top}q._setRowInfo(k.$rows,k)}break;case e.intersectionMode.overlapTop:p={start:j.start-j.start,end:m.end-j.start};r=j.start-m.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex+=r;if(l.top!==0){k.dataItemIndex+=l.top}q._setRowInfo(k.$rows,k)}break}};h.prototype._renderVirtualIntoView=function(n){var j=this._viewPortBounds(),r=this,k,q=this._view(),o,m,l;switch(n.mode){case e.intersectionMode.reset:q._clearBody();var p=n.newBounds.end-n.newBounds.start+1;this._renderableBoundsCollection().forEachIndex(n.newBounds.start,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,-1,k.dataItemIndex(),s)});q._rebuildOffsets();break;case e.intersectionMode.overlapBottom:o={start:n.newBounds.start,end:j.end};for(m=0;m<o.start-j.start;m++){q._removeBodyRow(0,false)}var p=n.newBounds.end-o.end;this._renderableBoundsCollection().forEachIndex(o.end+1,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,-1,k.dataItemIndex(),s)});break;case e.intersectionMode.overlapTop:o={start:j.start,end:n.newBounds.end};for(m=0;m<j.end-n.newBounds.end;m++){q._removeBodyRow(o.end-o.start+1,false)}l=0;var p=j.start-n.newBounds.start;this._renderableBoundsCollection().forEachIndex(n.newBounds.start,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,l++,k.dataItemIndex(),s)});break;default:break}};h.prototype._processVirtualData=function(q){var r=this._dataViewWrapper,j=r.dataView().getSource(),k,s=this._field("leaves"),p,m,l,o=0,u={top:0,bottom:0},t,n=this._serverSideVirtualScrollingMargin();switch(q.mode){case e.intersectionMode.reset:this.sketchTable.clear();r._unsafeSplice(0,j.length);this._dataOffset=q.request.index;for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.add(this._buildSketchRow(r._wrapDataItem(k,p),s))}break;case e.intersectionMode.overlapBottom:for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.add(this._buildSketchRow(r._wrapDataItem(k,j.length-1),s))}u.bottom=q.data.length;break;case e.intersectionMode.overlapTop:for(p=q.data.length-1;p>=0;p--){r._unsafeSplice(0,0,k=q.data[p]);this.sketchTable.insert(0,this._buildSketchRow(r._wrapDataItem(k,p),s))}this._dataOffset=q.request.index;u.top=q.data.length;break}m=this._ensureTotalRowsBounds({start:q.newBounds.start,end:q.newBounds.end});l={start:this._dataOffset,end:this._dataOffset+j.length-1};o=(l.end-m.end)-n;if(o>0){u.bottom-=o;r._unsafeSplice(j.length-o,o);this.sketchTable.removeLast(o)}o=(m.start-l.start)-n;if(o>0){u.top-=o;r._unsafeSplice(0,o);this.sketchTable.removeFirst(o);this._dataOffset+=o}this.sketchTable.updateIndexes();r._refreshSilent();return u};h.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===true};h.prototype._isMobileEnv=function(){return this._isMobile};h.prototype._render=function(){var j=this._view(),m=this.options,l=this.options.wijCSS,k;j.render();k=this.outerDiv;if(m.scrollMode!=="none"){k=this.outerDiv.find("div.wijmo-wijgrid-scroller:first")}this.$superPanelHeader=null;if(this.$topPagerDiv){if(this.$topPagerDiv.data("wijmo-wijpager")){this.$topPagerDiv.wijpager("destroy")}this.$topPagerDiv.remove()}this.$topPagerDiv=null;if(this._needToCreatePagerItem()&&((m.pagerSettings.position==="top")||(m.pagerSettings.position==="topAndBottom"))){if(!this.$topPagerDiv){k.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$topPagerDiv=g('<div class="wijmo-wijgrid-header '+l.header+" "+l.cornerTop+'"></div>'))}}if(m.showGroupArea){this._processGroupArea(k)}else{this.$groupArea=null}if(this.$bottomPagerDiv){if(this.$bottomPagerDiv.data("wijmo-wijpager")){this.$bottomPagerDiv.wijpager("destroy")}this.$bottomPagerDiv.remove()}this.$bottomPagerDiv=null;if(this._needToCreatePagerItem()&&((m.pagerSettings.position==="bottom")||(m.pagerSettings.position==="topAndBottom"))){if(!this.$bottomPagerDiv){k.append(this.$bottomPagerDiv=g('<div class="wijmo-wijgrid-footer wijmo-wijsuperpanel-footer '+l.stateDefault+" "+l.cornerBottom+'"></div>'))}}};h.prototype._processGroupArea=function(l){var j=this,k=this._groupedColumns(),m=[];this.$groupArea=g('<div class="'+this.options.wijCSS.content+" "+this.options.wijCSS.helperClearFix+'"></div>');if(k.length>0){g.each(k,function(n,p){var o=g('<a href="#"></a>').appendTo(j.$groupArea);try{g.data(o[0],"wijgridowner",j);o.c1groupedfield(g.extend({},{allowMoving:p.allowMoving,allowSort:p.allowSort,dataIndex:p.dataIndex,dataKey:p.dataKey,headerText:p.headerText,isBand:p.isBand,isLeaf:p.isLeaf,linearIdx:p.linearIdx,parentIdx:p.parentIdx,sortDirection:p.sortDirection,travIdx:p.travIdx,groupedIndex:p.groupedIndex},{disabled:j.options.disabled}))}finally{g.removeData(o[0],"wijgridowner")}m.push(o.data("wijmo-c1groupedfield"))})}else{this.$groupArea.addClass("wijmo-wijgrid-group-area").css("padding",0).html(this.options.groupAreaCaption||"&nbsp;")}this._field("groupedWidgets",m);if(!this.$superPanelHeader){l.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'))}this.$superPanelHeader.prepend(this.$groupArea);this._UIDragndrop(true).attachGroupArea(this.$groupArea)};h.prototype._pagerSettings2PagerWidgetSettings=function(){return g.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:g.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:g.proxy(this._onPagerWidgetPageIndexChanged,this)})};h.prototype._showRowHeader=function(){return(this.options.showRowHeader===true)&&(this.options.staticColumnsAlignment!=="right")};h.prototype._attachEvents=function(){var j=this._view(),l=j.focusableElement(),k=this;l.bind("keydown."+this.widgetName,g.proxy(this._onKeyDown,this));l.bind("keypress."+this.widgetName,g.proxy(this._onKeyPress,this));g.each(j.subTables(),function(m,n){var o=n.element();if(o){if(o.tHead){g(o.tHead).bind("click."+k.widgetName,g.proxy(k._onClick,k))}if(o.tBodies.length){g(o.tBodies[0]).bind("click."+k.widgetName,g.proxy(k._onClick,k)).bind("dblclick."+k.widgetName,g.proxy(k._onDblClick,k)).bind("mousemove."+k.widgetName,g.proxy(k._onMouseMove,k)).bind("mouseout."+k.widgetName,g.proxy(k._onMouseOut,k))}}});g(window).bind("resize."+this.widgetName+"."+this._eventUID,g.proxy(this._onWindowResize,this))};h.prototype._detachEvents=function(m){var j=this._view(),l=this,k;this._windowResizeTimer=0;g(window).unbind("resize."+this.widgetName+"."+this._eventUID);if(j){k=j.focusableElement();k.unbind("keydown."+this.widgetName);k.unbind("keypress."+this.widgetName);g.each(j.subTables(),function(){var n=this.element();if(n){if(n.tHead){g(n.tHead).unbind("."+l.widgetName)}if(n.tBodies.length){g(n.tBodies[0]).unbind("."+l.widgetName)}}})}};h.prototype._handleSort=function(o,k){var n=this.options.columns,j=o.travIdx,m,l;if(o&&this.options.allowSorting){m=((o.sortDirection==="none")?"ascending":((o.sortDirection==="ascending")?"descending":"ascending"));l={column:o,sortDirection:m,sortCommand:o.dataKey+" "+(m==="ascending"?"asc":"desc")};if(this._onColumnSorting(l)){o.sortDirection=l.sortDirection;if(k){o.sortOrder=this._customSortOrder++}else{this._customSortOrder=1000;g.each(this.columns(),function(p,q){q.options.sortOrder=0;if(q.options.travIdx!==j&&!(q.options.groupInfo&&q.options.groupInfo.position!=="none")){q.options.sortDirection="none"}});b.grid.traverse(n,function(p){p.sortOrder=0;if(p.travIdx!==j&&!(p.groupInfo&&p.groupInfo.position!=="none")){p.sortDirection="none"}})}l={column:o,sortDirection:o.sortDirection,sortCommand:o.dataKey+" "+(o.sortDirection==="ascending"?"asc":"desc")};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnSorted(l)}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnSorted(l)}})}}}};h.prototype._handleDragnDrop=function(n,r,m,j,q){var p=b.grid.getColumnByTravIdx(this.options.columns,n),l=b.grid.getColumnByTravIdx(this.options.columns,r),k=j?"groupArea":"columns",o=q?"groupArea":"columns";if(q){if(this._onColumnGrouping({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})){this.ensureControl(true,{beforeRefresh:function(){if(!l){p.found.groupedIndex=0}else{switch(m){case"left":p.found.groupedIndex=l.found.groupedIndex-0.5;break;case"right":p.found.groupedIndex=l.found.groupedIndex+0.5;break}}if(!j){g.extend(true,p.found,{groupInfo:{position:"header"}})}},afterRefresh:function(){this._onColumnGrouped({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})}})}}else{if(this._onColumnDropping({drag:p.found,drop:l.found,at:m})){this.ensureControl(false,{beforeRefresh:function(){p.at.splice(p.found.linearIdx,1);switch(m){case"left":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx-1,0,p.found)}else{l.at.splice(l.found.linearIdx,0,p.found)}break;case"right":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx,0,p.found)}else{l.at.splice(l.found.linearIdx+1,0,p.found)}break;case"center":l.found.columns.push(p.found);break}b.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:p.found,drop:l.found,at:m})}})}}};h.prototype._handleFilter=function(m,p,o){var j=(new b.grid.filterOperatorsCache(this)).getByName(p),n,l,k;if(j){if(j.arity>1){n=this.parse(m.options,o);l=(n!==null&&(b.grid.getDataType(m.options)==="string"||!isNaN(n)))}else{l=true}if(l){k={column:m.options,operator:j.name,value:n};if(this._onColumnFiltering(k)){m.options.filterValue=k.value;m.options.filterOperator=k.operator;this._resetDataProperties();if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnFiltered({column:m.options})}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnFiltered({column:m.options})}})}}}}};h.prototype._handleUngroup=function(l){var k=b.grid.getColumnByTravIdx(this.options.columns,l),j;if(k&&k.found){j=k.found;if(this._onColumnUngrouping({column:j})){this.ensureControl(true,{beforeRefresh:function(){delete j.groupedIndex;g.extend(true,j,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:j})}})}}};h.prototype._onVirtualScrolling=function(o,l,p,j,n,m){var k=this;this.ensureControl(this._serverSideVirtualScrolling(),{virtualScrollData:{newBounds:o,request:l,mode:p,data:m},beforeOnRendered:function(q){var r=k._viewPortBounds();g.extend(r,q.virtualScrollData.newBounds)},afterRefresh:function(q){(k._view())._adjustRowsHeights();if(n){n(j)}}})};h.prototype._handleVirtualScrolling=function(s,k,q){if(typeof k==="undefined"){k=null}var p=this._view(),j=this._viewPortBounds(),l=this._ensureRenderableBounds({start:s,end:s+p.getVirtualPageSize()-1}),r=this._ensureTotalRowsBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),m=null,o,n=(this._view()).getVirtualPageSize();if(k){o=k}else{if(l.start>j.end||l.end<j.start){o=e.intersectionMode.reset}else{if(l.start>j.start){o=e.intersectionMode.overlapBottom}else{if(l.start<j.start){o=e.intersectionMode.overlapTop}else{o=l.start!==j.start||l.end!==j.end?e.intersectionMode.reset:e.intersectionMode.none}}}}if(this._serverSideVirtualScrolling()){switch(o){case e.intersectionMode.reset:m={index:s,maxCount:n};break;case e.intersectionMode.overlapBottom:if(l.end>r.end){m={index:r.end+1,maxCount:n}}break;case e.intersectionMode.overlapTop:if(l.start<r.start){m={index:Math.max(0,r.start-n),maxCount:0};m.maxCount=r.start-m.index}break}}if(o!==e.intersectionMode.none){this._onVirtualScrolling(l,m,o,s,q)}};h.prototype._serverSideVirtualScrolling=function(){return false};h.prototype._serverSideVirtualScrollingMargin=function(){var j=(this._view()).getVirtualPageSize()*2;if(j<20){j=20}return j};h.prototype._onColumnDropping=function(j){return this._trigger("columnDropping",null,j)};h.prototype._onColumnDropped=function(j){this._trigger("columnDropped",null,j)};h.prototype._onColumnGrouping=function(j){return this._trigger("columnGrouping",null,j)};h.prototype._onColumnGrouped=function(j){this._trigger("columnGrouped",null,j)};h.prototype._onColumnUngrouping=function(j){return this._trigger("columnUngrouping",null,j)};h.prototype._onColumnUngrouped=function(j){this._trigger("columnUngrouped",null,j)};h.prototype._onColumnFiltering=function(j){return this._trigger("filtering",null,j)};h.prototype._onColumnFiltered=function(j){this._trigger("filtered",null,j)};h.prototype._onFilterOperatorsListShowing=function(j){this._trigger("filterOperatorsListShowing",null,j)};h.prototype._onColumnSorting=function(j){return this._trigger("sorting",null,j)};h.prototype._onColumnSorted=function(j){this._trigger("sorted",null,j)};h.prototype._onCurrentCellChanged=function(q,m){var l=this.options,r=this.currentCell();var j=r.row();this._dataViewWrapper.currentPosition(j.type&b.grid.rowType.data?j.dataItemIndex:-1);if(l.scrollMode!=="none"&&r&&!r.isEqual(b.grid.cellInfo.outsideValue)){var n=r;if(!(n.row().type&b.grid.rowType.data)&&!n.tableCell()){n=r._clone();n.cellIndex(0)}(this._view()).scrollTo(n)}this._trigger("currentCellChanged");var k=(q&&(q.type||"").toLowerCase())||"";if(m.changeSelection){var s=this.selection(),t=this.options.selectionMode.toLowerCase(),p=m.selectionExtendMode||b.grid.cellRangeExtendMode.none;s.beginUpdate();if(k){if(r._isValid()){switch(k){case"click":if(!q.shiftKey||(!s._multipleRangesAllowed()&&t!=="singlerange")){s._startNewTransaction(r)}if(q.shiftKey&&q.ctrlKey){s._clearRange(new b.grid.cellInfoRange(r,r),p)}else{s._selectRange(new b.grid.cellInfoRange(s._anchorCell(),r),q.ctrlKey,q.shiftKey,p,null)}break;case"keydown":if(!q.shiftKey||(!s._multipleRangesAllowed()&&t!=="singlerange")){s._startNewTransaction(r)}s._selectRange(new b.grid.cellInfoRange(s._anchorCell(),r),false,q.shiftKey,b.grid.cellRangeExtendMode.none,null);break}}}else{s.clear();if(r._isValid()){s._startNewTransaction(r);s._selectRange(new b.grid.cellInfoRange(r,r),false,false,b.grid.cellRangeExtendMode.none,null)}}s.endUpdate()}if(k==="click"&&this._editBySingleClick()){this._beginEditInternal(q)}};h.prototype._onPageIndexChanging=function(j){return this._trigger("pageIndexChanging",null,j)};h.prototype._onPageIndexChanged=function(j){this._trigger("pageIndexChanged",null,j)};h.prototype._onPagerWidgetPageIndexChanging=function(k,j){j.handled=true};h.prototype._onPagerWidgetPageIndexChanged=function(k,j){this._setOption("pageIndex",j.newPageIndex)};h.prototype._onRendering=function(j){var k=this._view();this._rendered=false;if(j.virtualScrollData){}else{if(k){k.dispose()}this._detachEvents(false);this.element.detach();this.element.css({"table-layout":"",width:""});this.element.empty();this.outerDiv.empty();this.outerDiv.append(this.element);if(this._selectionui){this._selectionui.dispose();this._selectionui=null}if(this._resizerui){this._resizerui.dispose();this._resizerui=null}if(this._frozenerui){this._frozenerui.dispose();this._frozenerui=null}var l=this._field("currentCell");this._field("currentCellPrevCycle",l?{x:l.cellIndex(),y:l.rowIndex()}:{x:-1,y:-1});this._field("currentCell",null)}this._trigger("rendering")};h.prototype._onRendered=function(j){var k=this._view(),n,l=this.selection().selectedCells().length()>0;this._rendered=true;if(!j.virtualScrollData){this._field("selection",null);this._setAttr(k.focusableElement(),"tabIndex",0);var m=this._field("currentCellPrevCycle");n=this._currentCellFromDataView(m.x);if(!n._isValid()&&this.options.showSelectionOnRender){n=this._getFirstDataRowCell(0)}this.currentCell(n,null,true);this._attachEvents();this._UISelection(true);var o=new b.grid.uiResizer(this);g.each(this.columns(),function(q,p){var r=p.options;if(r.visible&&r.parentVis&&r.isLeaf){o.addElement(p)}});this._resizerui=o;k.updateSplits(this._scrollingState);if(this.options.scrollMode!=="none"){this._frozenerui=new b.grid.uiFrozener(this)}}else{this.currentCell(this.currentCell(),null,false);this.selection()._ensureSelection()}this._renderCounter++;this._trigger("rendered")};h.prototype._onClick=function(n){if(!this._canInteract()||!n.target){return}var q=this._view(),m=this._findUntilOuterDiv(n.target,{td:true,th:true}),o,j,k=b.grid.cellRangeExtendMode.none,p,r;if(m){if(g(n.target).hasClass("wijmo-wijgrid-grouptogglebtn")){this._onGroupBtnClick(n);n.stopPropagation();return false}o=g(m).closest("tr");if(!o.length){return}j=q.getAbsoluteCellInfo(m,false);if(o.hasClass("wijmo-wijgrid-datarow")||o.hasClass("wijmo-wijgrid-headerrow")){if(j.cellIndex()<0||j.rowIndex()<0){if(j.rowIndex()>=0){j=new b.grid.cellInfo(0,j.rowIndex());k=b.grid.cellRangeExtendMode.row}else{j=this._getFirstDataRowCell(j.cellIndex());k=b.grid.cellRangeExtendMode.column}}j=q.getAbsoluteCellInfo(m,true);this._changeCurrentCell(n,j,{changeSelection:true,setFocus:!g(n.target).is(":focus"),selectionExtendMode:k})}var l={cell:j};this._trigger("cellClicked",null,l)}};h.prototype._onDblClick=function(j){if(!this._editBySingleClick()){this._beginEditInternal(j)}};h.prototype._onGroupBtnClick=function(p){if(!this._canInteract()){return}var j=g(p.target).closest("tr"),l=b.grid.groupHelper,m=l.getGroupInfo(j[0]),n,o,k=this;if(m){n=l.getColumnByGroupLevel(this._field("leaves"),m.level);if(n){o=n.groupInfo.expandInfo[m.index];if(o.isExpanded){o.collapse()}else{o.expand(p.shiftKey)}if(this._allowVirtualScrolling()){this._rebuildRenderBoundsCollection();(this._view()).vsUI._changeVisibleRowsCount(this._renderableBoundsCollection().capacity());this._ensureViewPortBoundsVisible(this._viewPortBounds());this._handleVirtualScrolling(this._viewPortBounds().start,e.intersectionMode.reset)}this.setSize()}}};h.prototype._onKeyDown=function(n){if(!this._canInteract()){return true}var u=(n.target).tagName.toLowerCase(),p=this.currentCell(),j=b.getKeyCodeEnum();if((u==="input"||u==="option"||u==="select"||u==="textarea")&&(g(n.target).closest("tr.wijmo-wijgrid-datarow").length===0)){return true}if(this.options.allowEditing){if((n.which===j.ESCAPE||n.which===113)&&(p._isValid()&&p._isEdit())){this._endEditInternal(n);return false}else{if(n.which===113){this._beginEditInternal(n);return false}}}if(!this.options.allowKeyboardNavigation){return true}var s;switch(n.which){case j.DOWN:case j.PAGE_DOWN:case j.UP:case j.PAGE_UP:case j.LEFT:case j.RIGHT:case j.HOME:case j.END:case j.TAB:if(this._canMoveToAnotherCell(n.target,n.which)){var o=this._getDataCellsRange(e.dataRowsRangeMode.renderable);s=this._getNextCurrentCell(o,p,n.keyCode,n.shiftKey)}break}if(s){var t=s._isRendered(),l=this._renderableBoundsCollection().getRenderedIndex(s.rowIndex()),k,q,m=this._allowVirtualScrolling()&&(l-this._viewPortBounds().start>=this._rows().length()-1),r=this;if(this._allowVirtualScrolling()&&(!t||(m&&(k=this._view().getVisibleAreaBounds(true))&&(q=s.row().$rows)&&(q.offset().top+q.outerHeight()>k.top+k.height)))){if(s.rowIndex()>p.rowIndex()){l-=this._rows().length()-1;l+=1}(this._view()).vsUI.scrollTo(l,function(){r._changeCurrentCell(n,s,{changeSelection:true,setFocus:true});g(r._view().focusableElement()).focus()})}else{this._changeCurrentCell(n,s,{changeSelection:true,setFocus:true})}return false}return true};h.prototype._onKeyPress=function(m){if(this._canInteract()&&this.options.allowEditing){var l=m.which,n=this.currentCell();if(l&&n._isValid()&&!n._isEdit()){var j=(m.target).tagName.toLowerCase();if(j!=="input"&&j!=="option"&&j!=="select"&&j!=="textarea"){var k=g(m.target).closest(".wijmo-wijgrid");if(k.length&&(k[0]===this.outerDiv[0])){if(g.wij.charValidator.isPrintableChar(String.fromCharCode(l))){this._beginEditInternal(m);return false}}}}}};h.prototype._onMouseMove=function(o){var q=this._view(),m=this._frozenerui,n,l,r,p,j,k=b.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||(m&&m.inProgress())){return}n=this._findUntilOuterDiv(o.target,{td:true,th:true});if(n){l=g(n).closest("tr");if(!l.length||!(l.hasClass("wijmo-wijgrid-datarow")||l.hasClass("wijmo-wijgrid-headerrow"))){return}r=q.getAbsoluteCellInfo(n,true);var s=r.rowIndex();if(s!==this._prevHoveredSketchRowIndex){if(this._prevHoveredSketchRowIndex!==undefined&&(q._isRowRendered(this._prevHoveredSketchRowIndex)>=0)){j=q._getRowInfoBySketchRowIndex(this._prevHoveredSketchRowIndex);if(j){q._changeRowRenderState(j,k.hovered,false);this.rowStyleFormatter.format(j)}}this._prevHoveredSketchRowIndex=s;if(s>=0){j=q._getRowInfoBySketchRowIndex(s);if(j){q._changeRowRenderState(j,k.hovered,true);this.rowStyleFormatter.format(j)}}}}};h.prototype._onMouseOut=function(n){if(!this._canInteract()){return}var m=this._findUntilOuterDiv(n.relatedTarget,{tr:true});if(!m||!g(m).hasClass("wijmo-wijgrid-datarow")){var k=this._prevHoveredSketchRowIndex,j=this._view();if(k>=0){var l=j._getRowInfoBySketchRowIndex(k);if(l&&l.$rows){j._changeRowRenderState(l,b.grid.renderState.hovered,false);this.rowStyleFormatter.format(l)}this._prevHoveredSketchRowIndex=-1}}};h.prototype._onWindowResize=function(k){var j=this;if(this._windowResizeTimer>0){window.clearTimeout(this._windowResizeTimer);this._windowResizeTimer=0}if(this._windowResizeTimer!==-1){this._windowResizeTimer=window.setTimeout(function(){j._windowResizeTimer=-1;try{if(!j._destroyed&&j._initialized&&j.element.parent().length){j.setSize()}}finally{j._windowResizeTimer=0}},50)}};h.prototype._fieldResized=function(n,k,m){if(k<0){k=0}if(m<=0){m=1}var l={column:n.options,oldWidth:k,newWidth:m};if(this._trigger("columnResizing",null,l)!==false){if(isNaN(l.newWidth)||l.newWidth<0){l.newWidth=1}n.option("width",l.newWidth);var j={column:n.options};this._trigger("columnResized",null,j)}};h.prototype._changeCurrentCell=function(o,m,j){var q=this.currentCell(),p=this._getDataCellsRange(e.dataRowsRangeMode.sketch),n,k,l=this.options.highlightCurrentCell,r;if((p._isValid()&&p._containsCellInfo(m))||(m.isEqual(b.grid.cellInfo.outsideValue))){if(q.cellIndex()!==m.cellIndex()||q.rowIndex()!==m.rowIndex()){n={cellIndex:m.cellIndex(),rowIndex:m.rowIndex(),oldCellIndex:q.cellIndex(),oldRowIndex:q.rowIndex()};if(this._trigger("currentCellChanging",null,n)){k=false;if(!this.options.allowEditing||!q._isEdit()||(k=this._endEditInternal(null))){if(p._containsCellInfo(q)){if(l){this._highlightCellPosition(q,false)}if(r=q.tableCell()){g(r).removeAttr("tabIndex")}}q=m._clone();q._setGridView(this);if(l){this._highlightCellPosition(q,true)}if(r=q.tableCell()){g(r).attr("tabIndex",0);if(j.setFocus&&!q._isEdit()){this._view().focusableElement().focus()}}this._field("currentCell",q);this._onCurrentCellChanged(o,j)}}else{return false}}else{if(l){this._highlightCellPosition(q,true)}if(r=q.tableCell()){g(r).attr("tabIndex",0)}if(o&&!q._isEdit()&&this._editBySingleClick()){this._beginEditInternal(o)}}}else{}return true};h.prototype._highlightCellPosition=function(m,r){if(m&&m._isValid()){var q=m.cellIndexAbs(),o=m.rowIndexAbs(),l=b.grid.renderState,p=this._view(),k,n,j;n=p.getHeaderCell(q);if(n){k=p._getRowInfo(this._headerRows().item(m.column().thY));n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}if(m._isRendered()){n=p.getJoinedRows(o,0);if(n){k=p._getRowInfo(n);p._changeRowRenderState(k,l.current,r);this.rowStyleFormatter.format(k)}n=p.getCell(q,o);if(n){n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}}}};h.prototype._beginEditInternal=function(l){if(this._canInteract()&&this.options.allowEditing){var k=this.currentCell().column(),j;if(k&&!k.readOnly){j=new b.grid.cellEditorHelper().currentCellEditStart(this,l);if(j){}return j}}return false};h.prototype._endEditInternal=function(k){if(this._canInteract()&&this.options.allowEditing){var j=new b.grid.cellEditorHelper().currentCellEditEnd(this,k);if(j&&!this._allowVirtualScrolling()){this._view().ensureHeight(this.currentCell().rowIndex())}return j}return false};h.prototype._onViewInsertEmptyRow=function(n,j,k,l,m){return null};h.prototype._onViewCreateEmptyCell=function(l,j,k){return null};h.prototype._onViewCellRendered=function(m,l,j,k){};h.prototype._onViewRowRendered=function(j){};h.prototype._getDataParser=function(j){return j.dataParser||b.data.defaultParsers[j.dataType]||b.data.defaultParsers.string};h.prototype.parse=function(k,m){var l=b.grid.getDataType(k),j=b.grid.getDataType(k);if(g.isFunction(m)){m=m()}m=b.data.convert(m,l,j,{culture:this.mClosestCulture,format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.toStr=function(k,m){var n=this._dataViewWrapper.dataView(),l=b.grid.getDataType(k),j="string";m=b.data.convert(m,l,j,{culture:this.mClosestCulture,format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.parseFailed=function(l,m,k,j){return m};h.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]};h.prototype._canInteract=function(){return !this.options.disabled};h.prototype._canMoveToAnotherCell=function(p,o){var k=p.tagName.toLowerCase(),j,q,n,m;switch(k){case"input":if(g(p).hasClass("wijgridinput")){var l=p;if(l.type==="text"){j=l.value.length;q=new b.grid.domSelection(l).getSelection();n=b.getKeyCodeEnum();m=((o===n.TAB)||(o===n.UP||o===n.DOWN||o===n.PAGE_DOWN||o===n.PAGE_UP)||(q.length===0&&((q.start===0&&(o===n.LEFT||o===n.HOME))||(q.end>=j&&(o===n.RIGHT||o===n.END)))));return m}return true}return false;case"textarea":case"select":return false}return true};h.prototype._editBySingleClick=function(){var j=(this.options.editingInitOption||"").toLowerCase();switch(j){case"click":case"doubleclick":break;case"auto":default:j=this._isMobileEnv()?"click":"doubleclick";break}return j==="click"};h.prototype._getDataToAbsOffset=function(){var j=0,l=0,k=this._headerRows();if(this._showRowHeader()){j++}if(k){l+=k.length()}if(this._filterRow()){l++}return{x:j,y:l}};h.prototype._currentCellFromDataView=function(l){var j=this._dataViewWrapper.currentPosition(),k=new b.grid.cellInfo(l,this._dataViewDataRowIndexToGrid(j),null);if(k.rowIndex()<0){k.cellIndex(-1)}else{if(k.cellIndex()<0){k.cellIndex(0)}}return k};h.prototype._dataViewDataRowIndexToGrid=function(p){var k=b.grid.rowType,l=this._view(),n=this._rows(),m,j,o;if(p<0){return -1}for(m=0,j=n.length();m<j;m++){o=l._getRowInfo(n.item(m));if((o.type&k.data)&&(o.dataItemIndex===p)){return o.sectionRowIndex}}return -1};h.prototype._getDataCellsRange=function(n,m){if(typeof m==="undefined"){m=false}var l=0,j=0,k=this._field("visibleLeaves").length-1,o;switch(n){case e.dataRowsRangeMode.rendered:if(this._rendered){o=this._rows().length()-1;break}case e.dataRowsRangeMode.sketch:o=this._totalRowsCount()-1;break;case e.dataRowsRangeMode.renderable:o=this._renderableRowsCount()-1;break}if(this._showRowHeader()){k--}if(m&&o>0){o--}if(k<0||o<0){l=j=k=o=-1}return new b.grid.cellInfoRange(new b.grid.cellInfo(l,j,null),new b.grid.cellInfo(k,o,null))};h.prototype._getDataItem=function(j){return this.dataView().item(j)};h.prototype._getFirstDataRowCell=function(o){var p,k,n,l=this._view(),m=this._rows(),j=b.grid.rowType;for(p=0,k=m.length();p<k;p++){n=l._getRowInfo(m.item(p));if(n.type&j.data){return new b.grid.cellInfo(o,p)}}return b.grid.cellInfo.outsideValue};h.prototype._getNextCurrentCell=function(s,n,v,m){var t=n.cellIndex(),u=n.rowIndex(),r=b.getKeyCodeEnum(),j=this.sketchTable,k=this._renderableBoundsCollection().getRenderedIndex(u),o=this._renderableBoundsCollection(),p,l=(v===r.TAB),q=function(A,C,z,x){if(typeof x==="undefined"){x=false}var B=A?o.forEachIndex:o.forEachIndexBackward,y=0,w=null;B.call(o,C,-1,function(D){var F=j.row(D),E=F.isDataRow();if((!x||E)&&(F.style("display")!=="none")){w=D;if(++y>=z){return false}}});return w};switch(v){case r.ENTER:case r.DOWN:if((p=q(true,k+1,1))!=null){u=p}break;case r.PAGE_DOWN:if((p=q(true,k+1,this._pageSizeKey))!=null){u=p}break;case r.UP:if((p=q(false,k-1,1))!=null){u=p}break;case r.PAGE_UP:if((p=q(false,k-1,this._pageSizeKey))!=null){u=p}break;case r.TAB:if(m){t--;if(t<s.topLeft().cellIndex()){t=s.bottomRight().cellIndex();if((p=q(false,k-1,1,true))!=null){u=p}else{if((p=q(false,o.capacity()-1,1,true))!=null){u=p}}}}else{t++;if(t>s.bottomRight().cellIndex()){t=s.topLeft().cellIndex();if((p=q(true,k+1,1,true))!=null){u=p}else{if((p=q(true,0,1,true))!=null){u=p}}}}break;case r.END:t=s.bottomRight().cellIndex();break;case r.HOME:t=s.topLeft().cellIndex();break;case r.LEFT:if(t>s.topLeft().cellIndex()){t--}break;case r.RIGHT:if(t<s.bottomRight().cellIndex()){t++}break}return new b.grid.cellInfo(t,u,this)};h.prototype._findUntilOuterDiv=function(o,j){var m=o,k,n,l=null;for(;m;m=m.parentNode){n=m.nodeName.toLowerCase();if(n){if(m===this.outerDiv[0]){k=m;break}if(j[n]){l=m}}}return k?l:null};h.prototype._getStaticIndex=function(l){var j,k=this._getDataCellsRange(e.dataRowsRangeMode.rendered);if(this._hasSpannedCells()){return -1}if(l){j=Math.min(this.options.staticRowIndex,k.bottomRight().rowIndex())}else{j=Math.min(this.options.staticColumnIndex,k.bottomRight().cellIndex())}if(j<-1){j=-1}return j};h.prototype._getStaticOffsetIndex=function(j){var k=0;if(j){if(this._showRowHeader()){k++}}else{k=this._columnsHeadersTable().length;if(this.options.showFilter){k++}}return k};h.prototype._getRealStaticColumnIndex=function(){var o,k,m=this._getStaticOffsetIndex(true),n=this._getStaticIndex(false),j,l;j=n+m;if(n>=0){o=this._field("visibleLeaves");k=o.length;l=j;for(;j<k;j++){if(o[j].parentIdx===-1){if(j>l){j--}break}}if(j>=k){j=k-1}}return j};h.prototype._getRealStaticRowIndex=function(){var j=this._getStaticOffsetIndex(false);return this._getStaticIndex(true)+j};h.prototype._hasMerging=function(){var n=this._field("leaves"),m,k,l,j=false;if(n){for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=j||(l.parentVis&&(l.rowMerge!=="none"))}}return j};h.prototype._hasGrouping=function(){var n=this._field("leaves"),m,k,l,j=false;for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=l.groupInfo&&(l.groupInfo.position!=="none")}return j};h.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()};h.prototype._columnsHeadersTable=function(j){if(arguments.length){this._field("columnsHeadersTable",j)}return this._field("columnsHeadersTable")};h.prototype._view=function(){return this.mView};h.prototype._originalFooterRowData=function(){var j=this._field("tfoot");return(j&&j.length)?j[0]:null};h.prototype._originalHeaderRowData=function(){var j=this._field("thead");return(j&&j.length)?j[0]:null};h.prototype._setAttr=function(j,l,m){var k=this;if(j===this.element){if(arguments.length===2){g.each(l,function(o,n){if(!(o in k._originalAttr)){k._originalAttr[o]=j.attr(o)}});return j.attr(l)}else{if(!(l in this._originalAttr)){this._originalAttr[l]=j.attr(l)}return j.attr(l,m)}}else{return(arguments.length===3)?j.attr(l,m):j.attr(l)}return this};h.prototype._totalRowsCount=function(){return this.sketchTable.count()};h.prototype._renderableRowsCount=function(){return this._renderableBoundsCollection().capacity()};h.prototype._trackScrollingPosition=function(j,k){this._scrollingState.x=j;this._scrollingState.y=k};h.prototype._trackScrollingIndex=function(j){this._scrollingState.index=j};h.prototype._uid=function(){if(this.__uid===undefined){this.__uid=b.grid.getUID()}return"wijgrid"+this.__uid};h.prototype._viewPortBounds=function(j){if(arguments.length){this.mViewPortBounds=j}return this.mViewPortBounds};h.prototype._viewPortBoundsOfEntirelyShownRows=function(){var l=this._viewPortBounds(),m=false,k=l.end-l.start+1;if(this._allowVirtualScrolling()){var j=this._view();if(k<j.getVirtualPageSize()){m=true}}if(!m){l=g.extend({},l);l.end--}return l};return h})(b.wijmoWidget);e.wijgrid=d;d.prototype.widgetEventPrefix="wijgrid";d.prototype._data$prefix="wijgrid";d.prototype._customSortOrder=1000;d.prototype._pageSizeKey=10;d.prototype._mergeWidgetsWithOptions=true;var c=(function(){function h(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"};this.allowColMoving=false;this.allowColSizing=false;this.allowEditing=false;this.allowKeyboardNavigation=true;this.allowPaging=false;this.allowSorting=false;this.allowVirtualScrolling=false;this.cellStyleFormatter=undefined;this.columns=[];this.columnsAutogenerationMode="merge";this.culture="";this.customFilterOperators=[];this.data=null;this.editingInitOption="auto";this.ensureColumnsPxWidth=false;this.filterOperatorsSortMode="alphabeticalCustomFirst";this.freezingMode="none";this.groupAreaCaption="Drag a column here to group by that column.";this.groupIndent=10;this.highlightCurrentCell=false;this.highlightOnHover=true;this.loadingText="Loading...";this.nullString="";this.pageIndex=0;this.pageSize=10;this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"};this.readAttributesFromData=false;this.rowHeight=-1;this.rowStyleFormatter=undefined;this.scrollMode="none";this.selectionMode="singleRow";this.showFilter=false;this.showFooter=false;this.showGroupArea=false;this.showSelectionOnRender=true;this.showRowHeader=false;this.staticColumnIndex=-1;this.staticColumnsAlignment="left";this.staticRowIndex=-1;this.totalRows=-1;this.afterCellEdit=null;this.afterCellUpdate=null;this.beforeCellEdit=null;this.beforeCellUpdate=null;this.cellClicked=null;this.columnDragging=null;this.columnDragged=null;this.columnDropping=null;this.columnDropped=null;this.columnGrouping=null;this.columnGrouped=null;this.columnResizing=null;this.columnResized=null;this.columnUngrouping=null;this.columnUngrouped=null;this.currentCellChanging=null;this.currentCellChanged=null;this.filterOperatorsListShowing=null;this.filtering=null;this.filtered=null;this.groupAggregate=null;this.groupText=null;this.invalidCellValue=null;this.pageIndexChanging=null;this.pageIndexChanged=null;this.selectionChanged=null;this.sorting=null;this.sorted=null;this.dataLoading=null;this.dataLoaded=null;this.loading=null;this.loaded=null;this.rendering=null;this.rendered=null}return h})();d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());g.wijmo.registerWidget("wijgrid",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var g=jQuery;var h=(function(){function n(o){if(o){this.__attr=o}}n.prototype.attrs=function(){return this.__attr};n.prototype.ensureAttr=function(){this.__attr=this.__attr||{};return this.__attr};n.prototype.attr=function(o,p){if(arguments.length==0){return this.__attr}if(arguments.length==1){return this.__attr?this.__attr[o]:null}else{this.ensureAttr()[o]=p}};n.prototype.style=function(o,p){if(arguments.length==0){return this.__style}else{if(arguments.length==1){return this.__style&&this.__style[o]}else{this.ensureStyle()[o]=p}}};n.prototype.deleteStyle=function(o){if(this.__style){delete this.__style[o]}};n.prototype.ensureStyle=function(){this.__style=this.__style||{};return this.__style};return n})();c.SketchObject=h;var k=(function(o){__extends(n,o);function n(p){o.call(this,p)}n.prototype.visible=function(p){if(arguments.length==0){return !(this._visible===false)}else{this._visible=p}};return n})(h);c.SketchCell=k;var l=(function(o){__extends(n,o);function n(q,p){o.call(this,p);this.value=q}return n})(k);c.ValueCell=l;var e=(function(p){__extends(o,p);function o(r,q){if(typeof r==="undefined"){r=""}p.call(this,q);this.html=r}o.nbsp=function n(){return new o("&nbsp;")};return o})(k);c.HtmlCell=e;var f=(function(n){__extends(o,n);function o(q,p){n.call(this,p);this.rowType=q}o.prototype.isDataRow=function(){return(this.rowType&b.grid.rowType.data)==b.grid.rowType.data};o.prototype.dataItemIndex=function(p){if(typeof p==="undefined"){p=0}return -1};o.prototype.cellCount=function(){return this._cells?this._cells.length:0};o.prototype._ensureCells=function(){this._cells=this._cells||[]};o.prototype.add=function(p){this._ensureCells();this._cells.push(p)};o.prototype.insert=function(p,q){this._ensureCells();this._cells.splice(p,0,q)};o.prototype.cell=function(p){return this._cells[p]};o.prototype.valueCell=function(p){return this.cell(p)};o.prototype.removeAt=function(p){if(!this._cells){throw"Wrong index"}this._cells.splice(p,1)};o.prototype.clear=function(){};o.prototype.getRowInfo=function(){return{type:this.rowType,state:null,sectionRowIndex:null,dataRowIndex:null,virtualDataItemIndex:null,dataItemIndex:this.dataItemIndex(),$rows:null}};return o})(h);c.SketchRow=f;var d=(function(o){__extends(n,o);function n(q,p){o.call(this,b.grid.rowType.data|((q%2)==1?b.grid.rowType.dataAlt:0),p);this.originalRowIndex=q}n.prototype.dataItemIndex=function(p){if(typeof p==="undefined"){p=0}return p+this.originalRowIndex};n.prototype.isDataRow=function(){return true};return n})(f);c.SketchDataRow=d;var m=(function(o){__extends(n,o);function n(r,p){if(typeof r==="undefined"){r=true}var q=r?b.grid.rowType.groupHeader:b.grid.rowType.groupFooter;o.call(this,q,p)}n.prototype.getRowInfo=function(){var p=o.prototype.getRowInfo.call(this);if(this.groupByValue!==undefined){p.groupByValue=this.groupByValue}return p};return n})(f);c.SketchGroupRow=m;var i=(function(){function n(){this._table=[]}n.prototype.getRawTable=function(){return this._table};n.prototype.row=function(o){return this._table[o]};n.prototype.valueAt=function(p,o){return this.row(p).valueCell(o).value};n.prototype.count=function(o){if(typeof o==="number"){this._table.length=o}return this._table.length};n.prototype.add=function(o){this._table.push(o)};n.prototype.insert=function(o,p){this._table.splice(o,0,p)};n.prototype.clear=function(){this._table.length=0};n.prototype.removeFirst=function(o){if(typeof o==="undefined"){o=1}this._table.splice(0,o)};n.prototype.removeLast=function(o){if(typeof o==="undefined"){o=1}this._table.splice(this._table.length-o,o)};n.prototype.replace=function(o,p){this._table.splice(o,1,p)};n.prototype.updateIndexes=function(){for(var o=0;o<this._table.length;o++){var p=this._table[o];if(this._table[o].isDataRow()){(p).originalRowIndex=o}}};n.prototype.isLazy=function(){return false};n.prototype.ensureNotLazy=function(){};return n})();c.SketchTable=i;var j=(function(o){__extends(n,o);function n(p){o.call(this);this.mIsLazy=true;this.pageSize=30;if(p==null){throw"Row source is null"}this.mSource=p;this._table.length=p.count()}n.prototype.isLazy=function(){return this.mIsLazy};n.prototype.ensureNotLazy=function(){if(!this.isLazy()){return}this.ensureRange();this.mIsLazy=false};n.prototype.invalidate=function(){this._table=new Array(this.mSource.count());if(!this.isLazy()){this.updateRange()}};n.prototype.row=function(p){if(!o.prototype.row.call(this,p)){this.ensureRange(Math.max(0,p-this.pageSize/2),this.pageSize)}return o.prototype.row.call(this,p)};n.prototype.ensureRange=function(r,q){if(typeof r==="undefined"){r=0}if(typeof q==="undefined"){q=this._table.length-r}if(!this.isLazy()){return}if(r<0){throw"Wrong range start"}this._table.length=this.mSource.count();if(this._table.length==0){if(q>0){throw"Wrong range length"}return}while(r<this._table.length&&this._table[r]){r++}if(r>=this._table.length){return}var p=Math.min(r+q-1,this._table.length-1);while(p>=r&&this._table[p]){p--}q=p-r+1;if(q>0){this.updateRange(r,q)}};n.prototype.updateRange=function(q,p){if(typeof q==="undefined"){q=0}if(typeof p==="undefined"){p=this._table.length-q}if(this.mSource==null){throw"Cannot create sketch row because source is null"}this.mSource.getRange(q,p,this._table,q)};return n})(i);c.LazySketchTable=j})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var f=jQuery;var d=(function(h){__extends(g,h);function g(){h.apply(this,arguments)}g.prototype._create=function(){var i=f.data(this.element[0],"wijgridowner");this._field("owner",i);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass(i.options.wijCSS.widget+" wijmo-c1basefield "+i.options.wijCSS.stateDefault);if(this.options.disabled){this.disable()}if(i.options.allowColMoving){i._UIDragndrop(true).attach(this)}};g.prototype._init=function(){this.element.wrapInner("<div class='wijmo-wijgrid-innercell'></div>");this._refreshHeaderCell()};g.prototype.destroy=function(){try{h.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();if(i&&i._UIDragndrop()){i._UIDragndrop().detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix);this.element.removeClass(i.options.wijCSS.widget+" wijmo-c1basefield "+i.options.wijCSS.stateDefault).html(this.element.find(".wijmo-wijgrid-headertext").html())};g.prototype._field=function(i,j){return b.grid.dataPrefix(this.element,this._data$prefix,i,j)};g.prototype._removeField=function(i){var j=this._data$prefix+i;this.element.removeData(j)};g.prototype._setOption=function(k,m){var o=this["_preset_"+k],j=this.options[k],l,i;if(o!==undefined){m=o.apply(this,[m,j])}l=(m!==j);h.prototype._setOption.apply(this,[k,m]);if(l){if(this.options.groupedIndex!==undefined){var n=this._owner()._field("groupedWidgets")[this.options.groupedIndex];if(n&&(k in n.options)){n._setOption(k,m)}}i=this["_postset_"+k];if(i!==undefined){i.apply(this,[m,j])}}};g.prototype._postset_allowMoving=function(j,i){};g.prototype._preset_clientType=function(j,i){throw"read-only"};g.prototype._postset_headerText=function(j,i){this._refreshHeaderCell()};g.prototype._postset_visible=function(j,i){this._owner().ensureControl(false)};g.prototype._postset_width=function(l,i){var j=this._owner();if(j){this.options.ensurePxWidth=true;var k=b.grid.getColumnByTravIdx(j.options.columns,this.options.travIdx);if(k){k.found.width=l;k.found.ensurePxWidth=true}j.setSize()}};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(i){if(b.grid.isChildOf(this._owner().options.columns,i,this)){return false}return true};g.prototype._createHeaderContent=function(i){return i.html(this.options.headerText||"&nbsp;")};g.prototype._decorateHeaderContent=function(i){return i.wrapInner('<span class="wijmo-wijgrid-headertext" />')};g.prototype._refreshHeaderCell=function(){var i=this.element.children(".wijmo-wijgrid-innercell").empty();this._createHeaderContent(i);this._decorateHeaderContent(i)};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);e.c1basefield=d;d.prototype._data$prefix="c1basefield";var c=(function(){function g(){this.allowMoving=true;this.allowSizing=true;this.cellFormatter=undefined;this.dataKey=undefined;this.ensurePxWidth=undefined;this.footerText=undefined;this.headerText=undefined;this.textAlignment=undefined;this.visible=true;this.width=undefined}return g})();e.c1basefield_options=c;d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());f.wijmo.registerWidget("c1basefield",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" wijmo-c1field")};h.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":if(this.$filterEditor.data("wijmo-wijinputdate")){this.$filterEditor.wijinputdate("destroy")}break;case"mask":if(this.$filterEditor.data("wijmo-wijinputmask")){this.$filterEditor.wijinputmask("destroy")}break;case"numberCurrency":case"numberNumber":case"numberPercent":if(this.$filterEditor.data("wijmo-wijinputnumber")){this.$filterEditor.wijinputnumber("destroy")}break}this.$filterEditor=null}this.element.removeClass(i.options.wijCSS.widget+" wijmo-c1field");this._removeDropDownFilterList();g.prototype._destroy.apply(this,arguments)};h.prototype._init=function(){g.prototype._init.apply(this,arguments);this.$filterEditor=null;var i=this._owner();this.filterRow=i._filterRow();if(i.options.showFilter&&this.options.showFilter&&(this.options.dataIndex>=0)){this._prepareFilterCell()}};h.prototype._postset_aggregate=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_allowSort=function(j,i){this._refreshHeaderCell()};h.prototype._postset_dataType=function(j,i){throw"read-only"};h.prototype._postset_dataParser=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_dataFormatString=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_filterOperator=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_filterValue=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_groupInfo=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_rowMerge=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_showFilter=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_sortDirection=function(j,i){this.options.sortOrder=0;this._owner().ensureControl(true)};h.prototype._postset_width=function(j,i){g.prototype._postset_width.apply(this,arguments)};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){if(this.options.groupedIndex!==undefined&&(i instanceof e.wijmo.c1groupedfield)){return false}return true}return false};h.prototype._isSortable=function(){return b.grid.validDataKey(this.options.dataKey)};h.prototype._isSortableUI=function(){var i=this._owner();return i&&i.options.allowSorting&&this.options.allowSort&&this._isSortable()};h.prototype._decorateHeaderContent=function(j){var i=this._owner();if(!this._isSortable()){g.prototype._decorateHeaderContent.apply(this,arguments)}else{if(this._isSortableUI()){j.wrapInner('<a class="wijmo-wijgrid-headertext" href="#" role="button" />').children("a").bind("click."+this.widgetName,this,e.proxy(this._onHrefClick,this))}else{g.prototype._decorateHeaderContent.apply(this,arguments)}switch(this.options.sortDirection){case"ascending":j.append(e('<span class="wijmo-wijgrid-sort-icon '+i.options.wijCSS.icon+" "+i.options.wijCSS.iconArrowUp+'">ascending</span>'));break;case"descending":j.append(e('<span class="wijmo-wijgrid-sort-icon '+i.options.wijCSS.icon+" "+i.options.wijCSS.iconArrowDown+'">descending</span>'));break}}};h.prototype._prepareFilterCell=function(){var p=this.options.visLeavesIdx,l=this._owner(),j=null,n,o,k=this,i,m=b.grid.HTML5InputSupport.getDefaultInputType(l._isMobileEnv(),this.options);if(p>=0){l=this._owner();if(this.filterRow){j=e(b.grid.rowAccessor.getCell(this.filterRow,p))}else{throw"exception"}this.$filterEditor=j.find("input");j.bind(((e.support).selectstart?"selectstart":"mousedown"),function(q){q.stopPropagation()});n=l.parse(this.options,b.grid.filterHelper.getSingleValue(this.options.filterValue));if(n===null||n==="undefined"){switch(b.grid.getDataType(this.options)){case"boolean":n=false;break;case"number":case"currency":case"datetime":n=0;break;default:n=""}}o={culture:l.options.culture,disabled:l.options.disabled,decimalPlaces:(function(q){var r=/^(n|p|c){1}(\d*)$/.exec(q);if(r&&r[2]){return parseInt(r[2],10)}r=/^(d){1}(\d*)$/.exec(q);if(r){return 0}return 2})(this.options.dataFormatString)};switch(i=this._getInputEditorType(this.options)){case"date":if(m==="text"){this.$filterEditor.wijinputdate(e.extend(o,{date:n,dateFormat:this.options.dataFormatString||undefined,showTrigger:true}))}else{this._createHtmlEditor(this.$filterEditor,m,b.grid.HTML5InputSupport.toStr(n||new Date(),m))}break;case"mask":this.$filterEditor.wijinputmask({text:n+""});break;case"numberCurrency":this.$filterEditor.wijinputnumber(e.extend(o,{type:"currency",value:n}));break;case"numberNumber":if(m==="text"){this.$filterEditor.wijinputnumber(e.extend(o,{value:n}))}else{this._createHtmlEditor(this.$filterEditor,m,b.grid.HTML5InputSupport.toStr(n,m))}break;case"numberPercent":this.$filterEditor.wijinputnumber(e.extend(o,{type:"percent",value:n*100}));break;default:throw b.grid.stringFormat('Unsupported editor type: "{0}"',i)}j.find(".wijmo-wijgrid-filter-trigger").attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(q){if(!k.options.disabled){e(this).addClass(l.options.wijCSS.stateHover)}}).bind("mouseleave."+this.widgetName,function(q){if(!k.options.disabled){e(this).removeClass(l.options.wijCSS.stateHover+" "+l.options.wijCSS.stateActive)}}).bind("mouseup."+this.widgetName,this,function(q){if(!k.options.disabled){e(this).removeClass(l.options.wijCSS.stateActive)}}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(q){q.preventDefault()})}};h.prototype._createHtmlEditor=function(i,j,k){return i.wrap('<span class="wijgrid-input-wrapper"></span').attr("type",j).val(k)};h.prototype._onFilterBtnClick=function(q){var m=q.data.column,n=8,p=m._owner(),o,r,s,t,u,j,i,l,k=b.grid.HTML5InputSupport.getDefaultInputType(p._isMobileEnv(),m.options);if(m.options.disabled){return false}if(m.$dropDownFilterList){m._removeDropDownFilterList();return false}q.target.focus();o=b.grid.filterHelper.getSingleOperatorName(m.options.filterOperator).toLowerCase();r=p.getFilterOperatorsByDataType(b.grid.getDataType(m.options));s={operators:e.extend(true,[],r),column:m.options};p._onFilterOperatorsListShowing(s);t=[];if(s.operators){e.each(s.operators,function(w,v){t.push({label:v.displayName||v.name,value:v.name,selected:v.name.toLowerCase()===o})})}m.$dropDownFilterList=e('<div class="wijmo-wijgrid-filterlist"></div').appendTo(document.body).wijlist({autoSize:true,maxItemsCount:n,selected:function(x,w){var y,v;switch(v=m._getInputEditorType(m.options)){case"date":if(k==="text"){y=m.$filterEditor.wijinputdate("option","date")||new Date()}else{y=b.grid.HTML5InputSupport.parse(m.$filterEditor.val(),k)||new Date()}break;case"mask":y=m.$filterEditor.wijinputmask("option","text");break;case"numberNumber":if(k!=="text"){y=b.grid.HTML5InputSupport.parse(m.$filterEditor.val(),k)||0;break}case"numberCurrency":case"numberPercent":y=m.$filterEditor.wijinputnumber("option","value");if(v==="numberPercent"){y/=100}break}m._removeDropDownFilterList();p._handleFilter(m,w.item.value,y)}});m.$dropDownFilterList.css("z-index",b.grid.getZIndex(p.outerDiv,9999));m.$dropDownFilterList.wijlist("setItems",t).wijlist("renderList");i=m.$dropDownFilterList.width()|150;m.$dropDownFilterList.width(t.length>n?i+20:i).wijlist("refreshSuperPanel").position({of:e(this),my:"left top",at:"left bottom"});(m.$dropDownFilterList).$button=e(this);l=(m.$dropDownFilterList).eventUID=b.grid.getUID();e(document).bind("mousedown."+m.widgetName+"."+l,{column:m},m._onDocMouseDown)};h.prototype._onDocMouseDown=function(l){var i=e(l.target),j=i.parents(".wijmo-wijgrid-filterlist:first"),k=i.is(".wijmo-wijgrid-filter-trigger")?i:i.parents(".wijmo-wijgrid-filter-trigger:first");if((k.length&&(k[0]===l.data.column.$dropDownFilterList.$button[0]))||(j.length&&(j[0]===l.data.column.$dropDownFilterList[0]))){}else{l.data.column._removeDropDownFilterList()}};h.prototype._onHrefClick=function(i){if(i.data.options.disabled){return false}if(i.data.options.allowSort){var j=i.data._owner();j._handleSort(i.data.options,i.ctrlKey)}return false};h.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var i=(this.$dropDownFilterList).eventUID;this.$dropDownFilterList.remove();this.$dropDownFilterList=null;e(document).unbind("mousedown."+this.widgetName+"."+i,this._onDocMouseDown)}};h.prototype._getInputEditorType=function(i){switch(b.grid.getDataType(i)){case"number":return(i.dataFormatString&&i.dataFormatString.indexOf("p")===0)?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"mask"}};return h})(c.c1basefield);c.c1field=f;var d=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.aggregate="none";this.allowSort=true;this.dataType=undefined;this.inputType=undefined;this.dataParser=undefined;this.dataFormatString=undefined;this.filterOperator="nofilter";this.filterValue=undefined;this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:true,collapsedImageClass:e.wijmo.wijCSS.iconArrowRight,expandedImageClass:e.wijmo.wijCSS.iconArrowRightDown,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined};this.readOnly=false;this.rowMerge="none";this.showFilter=true;this.sortDirection="none";this.valueRequired=false}return h})(c.c1basefield_options);c.c1field_options=d;f.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new d());e.wijmo.registerWidget("c1field",e.wijmo.c1basefield,f.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" wijmo-c1band")};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){return !(i instanceof d.wijmo.c1groupedfield)}return false};return h})(c.c1basefield);c.c1band=e;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.columns=[]}return h})(c.c1field_options);e.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new f());d.wijmo.registerWidget("c1band",d.wijmo.c1basefield,e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(f){__extends(g,f);function g(){f.apply(this,arguments)}g.prototype._create=function(){var h=d.data(this.element[0],"wijgridowner");this._field("owner",h);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass("wijmo-wijgrid-group-button "+h.options.wijCSS.stateDefault+" "+h.options.wijCSS.cornerAll);if(this.options.disabled){this.disable()}if(h.options.allowColMoving){h._UIDragndrop(true).attach(this)}};g.prototype._init=function(){this._refreshHeaderCell()};g.prototype.destroy=function(){try{f.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}this.element.find("*").unbind("."+this.widgetName);var h=this._owner();if(h&&h._dragndrop(false)){h._dragndrop(false).detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix)};g.prototype._field=function(h,i){return b.grid.dataPrefix(this.element,this._data$prefix,h,i)};g.prototype._removeField=function(h){var i=this._data$prefix+h;this.element.removeData(i)};g.prototype._setOption=function(j,l){var m=this["_preset_"+j],i=this.options[j],k,h;if(m!==undefined){l=m.apply(this,[l,i])}k=(l!==i);f.prototype._setOption.apply(this,[j,l]);if(k){h=this["_postset_"+j];if(h!==undefined){h.apply(this,[l,i])}}};g.prototype._postset_headerText=function(j,i,h){this._refreshHeaderCell()};g.prototype._postset_allowSort=function(j,i,h){this._refreshHeaderCell()};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(h){if(!(h instanceof d.wijmo.c1groupedfield)){return false}if(b.grid.isChildOf(this._owner().options.columns,h,this)){return false}return true};g.prototype._isSortable=function(){return b.grid.validDataKey(this.options.dataKey)};g.prototype._isSortableUI=function(){var h=this._owner();return h&&h.options.allowSorting&&this.options.allowSort&&this._isSortable()};g.prototype._refreshHeaderCell=function(){var i=this._owner().options.wijCSS,h=d('<span class="wijmo-wijgrid-group-button-close '+i.stateDefault+" "+i.cornerAll+'"><span class="'+i.icon+" "+i.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(h);if(this._isSortableUI()){this.element.bind("click."+this.widgetName,this,d.proxy(this._onHrefClick,this))}else{}if(this._isSortable()){switch(this.options.sortDirection){case"ascending":this.element.append(d('<span class="wijmo-wijgrid-group-button-sort '+i.icon+" "+i.iconArrowUp+'"></span>'));break;case"descending":this.element.append(d('<span class="wijmo-wijgrid-group-button-sort '+i.icon+" "+i.iconArrowDown+'"></span>'));break}}};g.prototype._onCloseClick=function(i){var h=i.data.options;if(!h.disabled){(i.data._owner())._handleUngroup(i.data.options.travIdx)}return false};g.prototype._onHrefClick=function(i){var j=i.data._owner(),h=i.data.options,k;if(!(h).disabled&&h.allowSort){k=b.grid.search(j.columns(),function(l){return l.options.travIdx===h.travIdx});k=(!k.found)?b.grid.getColumnByTravIdx(j.options.columns,h.travIdx).found:k.found.options;if(k){j._handleSort(k,i.ctrlKey)}}return false};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);c.c1groupedfield=e;e.prototype._data$prefix="c1groupedfield";e.prototype.options=d.extend(true,{},b.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:true,allowSort:true,headerText:undefined,sortDirection:"none"});d.wijmo.registerWidget("c1groupedfield",e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var j=jQuery;var o=(function(){function p(){}p.prototype.generateSpanTable=function(q,s){this._height=this._width=this._inc=this._shift=0;this._table=[];this._traverseList=[];this._savedXPos=[];var r=this._generateSpanTable(q,s,true);return r};p.prototype._generateSpanTable=function(q,v,t){var u,s,r=this;this._height=this.getVisibleHeight(q,t);v=v||[];b.grid.traverse(q,function(w){if(w.isLeaf){v.push(w)}r._traverseList.push(w)});this._width=v.length;for(u=0;u<this._height;u++){this._table[u]=[];for(s=0;s<this._width;s++){this._table[u][s]={column:null,colSpan:0,rowSpan:0}}}this._setTableValues(q,0,0);return this._table};p.prototype.getVisibleHeight=function(s,t){var v,r,w,u,q=0;if(j.isArray(s)){for(v=0,r=s.length;v<r;v++){u=this.getVisibleHeight(s[v],t);q=Math.max(q,u)}}else{w=(s.visible===undefined)?true:s.visible;s.parentVis=w&&t;if(s.isBand){for(v=0,r=s.columns.length;v<r;v++){u=this.getVisibleHeight(s.columns[v],s.parentVis);q=Math.max(q,u)}if(!s.parentVis){return q}s.isLeaf=(q===0);q++}else{s.isLeaf=true;if(s.parentVis){q=1}}}return q};p.prototype._getVisibleParent=function(q){while(q){q=this._traverseList[q.parentIdx];if(q&&(q.parentVis||q.parentVis===undefined)){return q}}return null};p.prototype._setTableValues=function(w,v,z){var s,u,t,r,A,q;if(j.isArray(w)){for(s=0,u=w.length;s<u;s++){this._setTableValues(w[s],v,z)}}else{if(w.travIdx===undefined){throw"undefined travIdx"}t=z+this._shift;if(w.parentVis){r=t+this._inc;this._table[v][r].column=w;this._savedXPos[w.travIdx]=r}if(w.isBand){for(s=0,u=w.columns.length;s<u;s++){this._setTableValues(w.columns[s],v+1,z)}}if(w.parentVis){if(this._shift-t===0){this._table[v][this._savedXPos[w.travIdx]].rowSpan=this._height-v;this._shift++}else{this._table[v][this._savedXPos[w.travIdx]].colSpan=this._shift-t}}else{if(!w.isBand&&this._height>0){q=this._getVisibleParent(w);A=(q)?q.isLeaf:false;if(A){this._inc++}if(v>=this._height){v=this._height-1}r=z+this._shift+this._inc;this._table[v][r].column=w;if(!A){if(q&&(this._savedXPos[q.travIdx]===r)){this._shiftTableElements(r,v)}this._inc++}}}}};p.prototype._shiftTableElements=function(q,r){var s;for(s=0;s<r;s++){this._table[s][q+1]=this._table[s][q];this._table[s][q]={column:null,colSpan:0,rowSpan:0};if(this._table[s][q+1].column){this._savedXPos[this._table[s][q+1].column.travIdx]++}}};return p})();d.bandProcessor=o;function h(p){var q=[];k(p,q);return q}d.getAllLeaves=h;function k(s,u){var r,q,t,p;if(s){for(r=0,q=s.length;r<q;r++){t=s[r];if(t.options){t=t.options}p=t.columns;if(p&&p.length){k(p,u)}else{u.push(t)}}}}function i(t,r){var s,q,u,p=null;if(t&&r>=0){for(s=0,q=t.length;s<q&&!p;s++){u=t[s];if(u.options){u=u.options}if(u.travIdx===r){return{found:u,at:t}}if(u.columns){p=this.getColumnByTravIdx(u.columns,r)}}}return p}d.getColumnByTravIdx=i;function m(p,s,q){if(s.options){s=s.options}if(q.options){q=q.options}if(q.isBand&&s.parentIdx>=0){if(s.parentIdx===q.travIdx){return true}if(s.parentIdx>q.travIdx){var r=this.flatten(p);while(true){s=r[s.parentIdx];if(s.travIdx===q.travIdx){return true}if(s.parentIdx===-1){break}}}}return false}d.isChildOf=m;function g(p){var q=[];f(p,q);return q}d.getLeaves=g;function f(r,t){var q,p,s;if(r){for(q=0,p=r.length;q<p;q++){s=r[q];if(s.isLeaf){t.push(s)}if(s.columns){f(s.columns,t)}}}}function n(p){return e(p,0,-1)}d.setTraverseIndex=n;function e(s,q,u){var r,p,t;if(s){for(r=0,p=s.length;r<p;r++){t=s[r];if(t.options){t=t.options}t.linearIdx=r;t.travIdx=q++;t.parentIdx=u;if(t.columns){q=e(t.columns,q,q-1)}}}return q}function c(q){var p=[];b.grid.traverse(q,function(r){p.push(r)});return p}d.flatten=c;function l(r,t){var q,p,s;if(r&&(j.isFunction(t))){for(q=0;q<r.length;q++){s=r[q];if(s.options){s=s.options}p=r.length;t(s,r);if(r.length!==p){q--;continue}if(s.columns){b.grid.traverse(s.columns,t)}}}}d.traverse=l})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._dvFilteringSettings=undefined;this._dvPagingSettings=undefined;this._dvSortingSettings=undefined;this._wgFilteringSettings=undefined;this._wgPagingSettings=undefined;this._wgSortingSettings=undefined;if(!g){throw"exception"}this._wijgrid=g;this._dataView=g._dataViewWrapper.dataView();this._filterCache=new b.grid.filterOperatorsCache(g)}f.prototype.compareSettings=function(){var j=true,k,h,l,g;j=((k=this.DVPagingSettings())===(h=this.WGPagingSettings()));if(!j&&k&&h){j=(k.pageSize===h.pageSize&&k.pageIndex===h.pageIndex)}if(j){j=((k=this.DVSortingSettings())===(h=this.WGSortingSettings()));if(!j&&k&&h&&((g=k.length)===h.length)){j=true;for(l=0;l<g&&j;l++){j=((k[l].dataKey===h[l].dataKey)&&(k[l].sortDirection===h[l].sortDirection))}}}if(j){k=this.DVFilteringSettings();h=this.WGFilteringSettings();j=b.grid.compareObj(k,h)}return j};f.prototype.DVFilteringSettings=function(){function h(j,k){var l;e.each(j,function(m,n){if(typeof(n)==="string"){l=n}else{if(e.isArray(n)){h(n,k)}else{k.filterValue.push(n.value);k.filterOperator.push({name:n.originalOperator||n.operator,condition:l})}}})}if(this._dvFilteringSettings===undefined){var i=[],g=this._dataView.filter();if(g){e.each(g,function(l,j){var k={dataKey:l};if(e.isArray(j)){k.filterValue=[];k.filterOperator=[];h(j,k)}else{if(e.isPlainObject(j)){k.filterValue=j.value;k.filterOperator=j.originalOperator||j.operator||"Equals"}else{k.filterValue=j;k.filterOperator="Equals"}}i.push(k)})}this._dvFilteringSettings=(i.length)?i:null}return this._dvFilteringSettings};f.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var h=b.grid.asPagedDataView(this._dataView);if(h){var g=h.pageSize();this._dvPagingSettings=(g>0)?{pageSize:h.pageSize(),pageIndex:h.pageIndex()}:null}}return this._dvPagingSettings};f.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var h=[];if(true){var g=b.data.sorting.compile(this._dataView.sort()).normalized;if(g){e.each(g,function(i,j){if(j!==null){h.push({dataKey:(typeof(j)==="string")?j:j.property,sortDirection:j.asc||j.asc===undefined?"ascending":"descending"})}})}}this._dvSortingSettings=(h.length)?h:null}return this._dvSortingSettings};f.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var i=[],h=this._wijgrid._field("leaves"),g=this;if(h){e.each(h,function(l,j){if(b.grid.validDataKey(j.dataKey)&&j.filterOperator){var m=(b.grid.deepExtend({},{foo:j.filterValue})).foo,k=(b.grid.deepExtend({},{foo:j.filterOperator})).foo,n=b.grid.filterHelper.verify(k,m,j.dataType,g._filterCache);if(n){i.push({owner:j,dataKey:j.dataKey,filterValue:n.filterValue,filterOperator:n.filterOperator})}}})}this._wgFilteringSettings=(i.length)?i:null}return this._wgFilteringSettings};f.prototype.WGPagingSettings=function(){if(this._wgPagingSettings===undefined){this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null}return this._wgPagingSettings};f.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var h={},i=[],g=this._wijgrid._groupedColumns(true),l=this._wijgrid._field("leaves")||[],k=function(m){return(!m.isBand&&b.grid.validDataKey(m.dataKey))},j=0;e.each(g,function(n,m){if(k(m)){if(m.sortDirection==="none"){m.sortDirection="ascending"}h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:j++}}});j++;e.each(l,function(n,m){if(k(m)){if(m.sortDirection==="ascending"||m.sortDirection==="descending"){if(!h[m.dataKey]){h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:(m.sortOrder||0)+j}}}}});e.each(h,function(m,n){i.push(n)});i.sort(function(n,m){return n.sortOrder-m.sortOrder});e.each(i,function(m,n){delete n.sortOrder});this._wgSortingSettings=(i.length)?i:null}return this._wgSortingSettings};f.prototype.MapWGToDV=function(){var j=this;var g={},i,h;if(this._mapPagingParams()&&(i=this.WGPagingSettings())){g.pageIndex=i.pageIndex;g.pageSize=i.pageSize}else{g.pageSize=-1}if(this._mapSortingParams()){g.sort=[];if(i=this.WGSortingSettings()){g.sort=[];e.each(i,function(k,l){g.sort.push({property:l.dataKey,asc:l.sortDirection==="ascending"})})}}this._wijgrid.deficientFilters={};if(this._mapFilteringParams()){e.each(this._wijgrid._field("leaves"),function(l,k){if(b.grid.validDataKey(k.dataKey)&&((k.filterOperator===undefined)^(k.filterValue===undefined))){j._wijgrid.deficientFilters[k.dataKey]={filterOperator:k.filterOperator,filterValue:k.filterValue}}});g.filter={};if(i=this.WGFilteringSettings()){g.filter=this._convertFilterToDV(i)}if(e.isEmptyObject(g.filter)){g.filter=null}}return g};f.prototype.MapDVToWG=function(){var m,k={},g=this._mapSortingParams(),l=this._mapPagingParams(),j=this._mapFilteringParams(),i=b.grid.asPagedDataView(this._dataView),h=this;e.each(this._wijgrid._field("leaves"),function(o,n){if(g){n.sortOrder=0;n.sortDirection="none"}if(j){n.filterOperator="nofilter";n.filterValue=undefined}k[n.dataKey]=n});if(l&&i){this._wijgrid.options.pageSize=i.pageSize();this._wijgrid.options.pageIndex=i.pageIndex()}if(g&&(m=this.DVSortingSettings())){e.each(m,function(n,q){var p;if((p=k[q.dataKey])){p.sortDirection=q.sortDirection;p.sortOrder=n}})}if(j){if(m=this.DVFilteringSettings()){e.each(m,function(p,q){var n;if((n=k[q.dataKey])){n.filterValue=q.filterValue;n.filterOperator=q.filterOperator;if(e.isPlainObject(n.filterOperator)){n.filterOperator=n.filterOperator.name}delete h._wijgrid.deficientFilters[n.dataKey]}})}e.each(this._wijgrid.deficientFilters,function(o,n){k[o].filterOperator=n.filterOperator;k[o].filterValue=n.filterValue})}};f.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()};f.prototype._mapSortingParams=function(){return !this._wijgrid._serverShaping()};f.prototype._mapFilteringParams=function(){return !this._wijgrid._serverShaping()};f.prototype.makeProxyFilter=function(j,h,i,m){i=i.toLowerCase();var n=this,k=(j.dataType==="datetime"),p={originalOperator:undefined,property:h,operator:i,value:m};var o=this._filterCache.getByNameInt(i);var l=b.data.filtering.ops[i];if((i!=="nofilter")&&(o.isCustom||k)){p.originalOperator=p.operator;if(o.isCustom){p.operator=e.extend(true,{},o.op);p.operator.apply=p.operator.operator}else{p.operator=e.extend(true,{},l);var g=j.inputType?b.grid.TimeUnitConverter.convertInputType(j.inputType):b.grid.TimeUnitConverter.convertFormatString(j.dataFormatString||"d");p.operator.apply=function(r,q){if(!(r instanceof Date)){r=n._wijgrid.parse(j,r)}if(!(q instanceof Date)){q=n._wijgrid.parse(j,q)}b.grid.TimeUnitConverter.cutDate(r,g);b.grid.TimeUnitConverter.cutDate(q,g);return l.apply(r,q)}}}return p};f.prototype._convertFilterToDV=function(i){var g={},h=this;e.each(i,function(n,q){var k=q.dataKey,j=[],o="and",l,m,r,p;if(!e.isPlainObject(q)){return}m=q.filterOperator;r=q.filterValue;if(m==null){return}if(!e.isArray(m)){m=[m]}if(!e.isArray(r)){r=[r]}if(m.length!=r.length){throw"The number of filter operators must match the number of filter values"}if(m.length==0){return}e.each(m,function(u,s){var v;if(typeof s==="string"){s={name:s}}if(!e.isPlainObject(s)||!s.name){throw"Invalid filter operator"}v=r[u];if(!e.isArray(v)){v=[v]}p=e.map(v,function(x){return h.makeProxyFilter(q.owner,k,s.name,x)});function t(){if(p.length>1){p.splice(0,0,"or")}else{p=p[0]}}function w(){if(o==null){o=l;j.splice(0,0,l)}}o=null;l=s.condition||"or";if(j.length<=1||o==l){if(p.length==1||j.length<=1||o=="or"){j=j.concat(p);w()}else{t();j.push(p);w()}}else{t();j=[j,p];w()}});e.each(j,function(s,t){if(e.isArray(t)&&t.length==2){j[s]=t[1]}});if(j.length==2&&typeof(j[0]==="string")){j.shift()}if(j.length==1){j=j[0]}g[k]=j});return g};return f})();d.settingsManager=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var g=jQuery;var f=(function(){function j(k){this._domSource=null;this._ignoreAllEvents=false;this._ignoreChangeEvent=false;this._ignoreCurrentChangedEvent=false;this._sharedDataItems=null;this._userData=null;this._totals=null;this._changeTimer=0;this._toDispose=[];this._isOwnDataView=false;this._isWijdatasource=false;this._isDynamicWijdatasource=false;this._wijgrid=k;this._createDataViewWrapper()}j.prototype.data=function(){var l=this._getDataViewInst(),k=b.grid.asPagedDataView(l);return{data:this._getSharedDataItems(),totalRows:k!=null?k.totalItemCount():(l.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}};j.prototype.dataView=function(){return this._getDataViewInst()};j.prototype.dispose=function(){var k=this._getDataViewInst();this._propChangeListener.dispose();g.each(this._toDispose,function(l,m){m.dispose()});if(k&&this._isOwnDataView){k.dispose()}this._wijgrid._wijDataView=null};j.prototype.ignoreChangeEvent=function(k){if(arguments.length){this._ignoreChangeEvent=(k===true)}else{return this._ignoreChangeEvent}};j.prototype.ignoreCurrentChangedEvent=function(k){if(arguments.length){this._ignoreCurrentChangedEvent=(k===true)}else{return this._ignoreCurrentChangedEvent}};j.prototype.isDataLoaded=function(){var k=this._getDataViewInst();return k.isLoaded()};j.prototype.isOwnDataView=function(){return this._isOwnDataView};j.prototype.getFieldsInfo=function(){var k=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(k.getProperties())};j.prototype._propDescriptorsToFieldsInfo=function(l){var k={};if(l){g.each(l,function(m,n){if(n.name==="$$hash"||n.name==="$$hashKey"){return}k[n.name]={name:n.name,type:n.type||"string"}})}return k};j.prototype.isBoundedToDOM=function(){return this._domSource!==null};j.prototype.load=function(k){this._userData=k;var n=this._getDataViewInst();if(!n){this._createDataViewWrapper();n=this._getDataViewInst()}this._onDataViewLoading();var o=new b.grid.settingsManager(this._wijgrid);if(this._needToLoad(o)){var l=o.MapWGToDV(),m=false;if(this._isWijdatasource&&!this._isDynamicWijdatasource&&n.isLoaded()){m=true}this.ignoreCurrentChangedEvent(true);n.refresh(l,m)}else{if(this.isDataLoaded()){this._onDataViewLoaded();this._onDataViewReset()}}};j.prototype.currentPosition=function(l){var k=this._getDataViewInst();if(!arguments.length){return k.currentPosition()}this.ignoreCurrentChangedEvent(true);try{k.currentPosition(l)}finally{this.ignoreCurrentChangedEvent(false)}};j.prototype.getValue=function(l,k){var m=this._getDataViewInst();if(typeof(k)==="number"){k=k+""}return m.getProperty(l,k)};j.prototype.setValue=function(l,k,m){var n=this._getDataViewInst();this.ignoreChangeEvent(true);try{if(typeof(k)==="number"){k=k+""}n.setProperty(l,k,m)}finally{this.ignoreChangeEvent(false)}};j.prototype.makeDirty=function(){this._propChangeListener.removeAll();this._totals=null;this._sharedDataItems=null};j.prototype._createDataViewWrapper=function(){var l,n=this._wijgrid.options.data,o=this._getDataViewInst(),m=false;if(o){return}if(!n){this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData);n=this._domSource.items}m=(typeof(wijdatasource)!=="undefined"&&(n instanceof wijdatasource));this._isOwnDataView=(g.isArray(n)||m);this._isWijdatasource=!!(this._isOwnDataView&&m);this._isDynamicWijdatasource=!!(this._isOwnDataView&&m&&n.dynamic);if(this._isOwnDataView){if(!this._domSource&&this._wijgrid.options.readAttributesFromData){this._moveAttributesToExpando(n)}var k=this.isBoundedToDOM()&&b.grid.getTableSection(this._wijgrid.element,b.grid.rowScope.body);o=b.grid.GridDataView.create(b.data.asDataView(this._parseOwnData(n,k)))}else{o=n}this._wijgrid._wijDataView=o;this._toDispose.push(o.isLoading.subscribe(g.proxy(this._onDataViewLoadingInternal,this)));this._toDispose.push(o.isLoaded.subscribe(g.proxy(this._onDataViewLoadedInternal,this)));this._toDispose.push(o.subscribe(g.proxy(this._onDataViewChangeInternal,this)));this._toDispose.push(o.currentPosition.subscribe(g.proxy(this._onDataViewCurrentChangedInternal,this)));this._propChangeListener=new b.grid.propChangeListener(g.proxy(this._onPropertyChanged,this))};j.prototype._parseOwnData=function(q,m){var l=this;if(q&&q.length){var n=g.extend(true,[],this._wijgrid.options.columns),o=b.data.ArrayDataViewBase._getProps(q[0])||[],p=this._propDescriptorsToFieldsInfo(o),k=[];this._wijgrid._prepareColumnOptions(n,"merge",p,true,true);b.grid.traverse(n,function(r){if(b.grid.getDataType(r)!=="string"&&b.grid.validDataKey(r.dataKey)){k.push(r)}});if(k.length&&m){g.each(q,function(s,r){b.grid.dataViewWrapper._parseDataItem(l._wijgrid,r,(m&&m.rows[s]),k)})}}return q};j._parseDataItem=function i(m,k,l,n){g.each(n,function(p,o){var q=k[o.dataKey],r=m.parse(o,q);if(isNaN(r)){var s=null;if(l){s=l.cells[o.dataKey]}r=m.parseFailed(o,q,k,s)}k[o.dataKey]=r});return k};j.prototype._getDataViewInst=function(){return this._wijgrid._wijDataView};j.prototype._needToLoad=function(k){var l=this._getDataViewInst();if(this._isDynamicWijdatasource||(this._isWijdatasource&&!l.isLoaded())){return true}if(this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()){return true}if(this.isDataLoaded()||l.isLoading()){return !k.compareSettings()}return true};j.prototype._validateSettings=function(k){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&((k.DVPagingSettings()||{}).pageSize!==(k.WGPagingSettings()||{}).pageSize)){throw"The pageSize option of the external dataView can't be changed."}};j.prototype._onDataViewLoadingInternal=function(k){if(this._ignoreAllEvents){return}if(k){if(!this._userData){this._onDataViewLoading()}}};j.prototype._onDataViewLoadedInternal=function(k){if(this._ignoreAllEvents){return}if(k){this._onDataViewLoaded()}};j.prototype._onDataViewChangeInternal=function(l){var k=this;if(this._ignoreAllEvents||this._ignoreChangeEvent){return}if(l.changes){if(l.length&&l[0].entityState()==="detached"){return}g.each(l.changes,function(m,n){switch(n.changeType){case"remove":k._propChangeListener.remove(n.index);break;case"add":k._propChangeListener.insert(n.index,n.element);break}})}this._onDataViewChange.apply(this,arguments)};j.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent){return}this._onDataViewCurrentChanged.apply(this,arguments)};j.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(false);this.makeDirty();this._wijgrid._onDataViewReset(this._userData)}finally{this._userData=null}};j.prototype._onPropertyChanged=function(l){var k=this;if(this._changeTimer>0){window.clearTimeout(this._changeTimer);this._changeTimer=0}if(this._changeTimer!=-1){this._changeTimer=window.setTimeout(function(){k._changeTimer=-1;if(!k._wijgrid._destroyed){k._onDataViewChange()}k._changeTimer=0},100)}};j.prototype._onDataViewChange=function(k){this._onDataViewReset()};j.prototype._onDataViewCurrentChanged=function(l,k){this._wijgrid._onDataViewCurrentPositionChanged(l,k)};j.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()};j.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()};j.prototype._getSharedDataItems=function(){if(!this._sharedDataItems){var o=this._getDataViewInst(),k=o.count();this._sharedDataItems=[];var n=true;for(var m=0;m<k;m++){var l=o.item(m);if(n){if(!this._propChangeListener.insert(m,l)&&m===0){n=false}}this._sharedDataItems.push(this._wrapDataItem(l,m))}}if(!this._sharedDataItems){this._sharedDataItems=[]}return this._sharedDataItems};j.prototype._getTotals=function(){if(!this._totals){var k=this._getDataViewInst();this._totals=this._prepareTotals(k,this._wijgrid._prepareTotalsRequest(true))}if(!this._totals){this._totals={}}return this._totals};j.prototype._prepareTotals=function(r,q){if(!q||q.length===0){return{}}var p,l,o,m,n=[],k={};for(p=0,l=q.length;p<l;p++){n.push(new b.grid.tally())}for(p=0,l=r.count();p<l;p++){for(o=0,m=n.length;o<m;o++){n[o].add(this._wijgrid.parse(q[o].column,this.getValue(p,q[o].column.dataKey)))}}for(p=0,l=n.length;p<l;p++){k[q[p].column.dataKey]=n[p].getValueString(q[p].column)}return k};j.prototype._processDOM=function(m,l){var k={items:[],emptyData:[],header:b.grid.readTableSection(m,b.grid.rowScope.head)};if(b.grid.getTableSectionLength(m,2)===1&&g(b.grid.getTableSectionRow(m,2,0)).hasClass("wijmo-wijgrid-emptydatarow")){k.emptyData=b.grid.readTableSection(m,b.grid.rowScope.body)}else{k.items=b.grid.readTableSection(m,b.grid.rowScope.body,l)}return k};j.prototype._moveAttributesToExpando=function(k){g.each(k,function(l,m){var o=(b).data.Expando.getFrom(m,true),n;n=o[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}};if(m.rowAttributes){n.rowAttributes=m.rowAttributes;delete m.rowAttributes}g.each(m,function(q,p){if(g.isArray(p)){n.cellsAttributes[q]=p[1];m[q]=p[0]}})})};j.prototype._wrapDataItem=function(k,l){return{values:k,originalRowIndex:l}};j.prototype._refreshSilent=function(){var k=this._getDataViewInst();if(k){try{this._ignoreAllEvents=true;k.refresh()}finally{this._ignoreAllEvents=false}}};j.prototype._unsafeReplace=function(k,l){var m=this._getDataViewInst();if(!(m instanceof b.grid.GridDataView)){"operation is not supported"}m._unsafeReplace(k,l)};j.prototype._unsafeSplice=function(k,m,l){var n=this._getDataViewInst();if(!(n instanceof b.grid.GridDataView)){"operation is not supported"}if(arguments.length===2){n._unsafeSplice(k,m)}else{n._unsafeSplice(k,m,l)}};j.prototype._unsafePush=function(k){var l=this._getDataViewInst();if(!(l instanceof b.grid.GridDataView)){"operation is not supported"}l._unsafePush(k)};return j})();d.dataViewWrapper=f;function c(i){return i&&("pageCount" in i)?i:null}d.asPagedDataView=c;function e(i){return i&&("commitEdit" in i)?i:null}d.asEditableDataView=e;var h=(function(){function i(j){this._subscriptions=[];this._callback=j}i.prototype.insert=function(k,l){var m=null,j=this;g.each(l,function(n,o){if(j._isValidPropName(n)&&o&&g.isFunction(o.subscribe)){m=m||[];m.push(o.subscribe(j._callback))}});if(!m){return false}if(this._subscriptions.length<k){this._subscriptions.length=k}this._subscriptions.splice(k,0,m);return true};i.prototype.remove=function(k){var j=this._subscriptions[k];if(j){g.each(j,function(l,m){m.dispose();j[l]=null})}this._subscriptions[k]=null;this._subscriptions.splice(k,1)};i.prototype.removeAll=function(){var j,k;while(j=this._subscriptions.length){this.remove(j-1)}this._subscriptions=[]};i.prototype.dispose=function(){this.removeAll()};i.prototype._isValidPropName=function(j){if(j&&(typeof(j)==="string")){return j.match(/^entityState|jQuery/)===null}return true};return i})();d.propChangeListener=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;var e=(function(){function g(j,i,k,h,l){this.cr=new b.grid.cellRange(-1,-1);this.isExpanded=false;this._value=-1;this._sum=-1;this._position="none";this._hasHeaderOrFooter=true;if(j!==undefined){this.isExpanded=j}if(i!==undefined){this.cr=i}if(k!==undefined){this._sum=k}if(h!==undefined){this._position=h}if(l!==undefined){this._hasHeaderOrFooter=l}}g.prototype.isSubRange=function(h){return((this.cr.r1>=h.cr.r1)&&(this.cr.r2<=h.cr.r2))};g.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2};g.prototype.getHeaderImageClass=function(h){var i=this.owner;if(i){return h?i.expandedImageClass||d.c1field.prototype.options.groupInfo.expandedImageClass:i.collapsedImageClass||d.c1field.prototype.options.groupInfo.collapsedImageClass}return null};g.prototype.collapse=function(){var j,k,i,l,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){l=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(l,this.cr,j.level)){if((j.position!=="footer")&&(j.outlineMode!=="none")){h=b.grid.groupHelper.getGroupedColumnsCount(l);this._collapse(i,i._rows(),l,this,h,i._allowVirtualScrolling())}}}};g.prototype.expand=function(l){var j,k,i,m,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){m=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(m,this.cr,j.level)){h=b.grid.groupHelper.getGroupedColumnsCount(m);this._expand(i,i._rows(),m,this,h,l,true,i._allowVirtualScrolling())}}};g.prototype._collapse=function(h,m,t,u,v,r){var k=u.owner,n=u.cr.r1,w=u.cr.r2,q,s,p,l,o;switch(k.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(h.sketchTable.row(u.cr.r1),undefined);if(!r){this._toggleRowVisibility(m.item(u.cr.r1),undefined,false)}n++;break}for(q=n;q<=w;q++){this._toggleSketchRowVisibility(h.sketchTable.row(q),false);if(!r){this._toggleRowVisibility(m.item(q),false)}}u.isExpanded=false;if(!r){this._updateHeaderIcon(m,u)}for(q=k.level+1;q<=v;q++){p=b.grid.groupHelper.getChildGroupRanges(t,u.cr,q-1);for(o=0,s=p.length;o<s;o++){l=p[o];l.isExpanded=false;switch(l.owner.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(h.sketchTable.row(l.cr.r1),false);if(!r){this._toggleRowVisibility(m.item(l.cr.r1),undefined,false)}break}if(!r){this._updateHeaderIcon(m,l)}}}};g.prototype._expand=function(j,o,t,v,w,h,m,r){var k=v.owner,n=v.cr.r1,x=v.cr.r2,q,s,p,l,u;switch(k.position){case"header":this._toggleSketchRowVisibility(j.sketchTable.row(n),true);if(!r){this._toggleRowVisibility(o.item(n),true,m||h)}n++;break;case"footer":this._toggleSketchRowVisibility(j.sketchTable.row(x),true);if(!r){this._toggleRowVisibility(o.item(x),true)}x--;break;case"headerAndFooter":this._toggleSketchRowVisibility(j.sketchTable.row(n),true);if(!r){this._toggleRowVisibility(o.item(n),true,m||h)}if(m){this._toggleSketchRowVisibility(j.sketchTable.row(x),true);if(!r){this._toggleRowVisibility(o.item(x),true)}}n++;x--;break}if(m){v.isExpanded=true;if(!r){this._updateHeaderIcon(o,v)}}else{return}if(v.owner.level===w){for(q=n;q<=x;q++){this._toggleSketchRowVisibility(j.sketchTable.row(q),true);if(!r){this._toggleRowVisibility(o.item(q),true)}}}else{p=b.grid.groupHelper.getChildGroupRanges(t,v.cr,v.owner.level);if(p.length&&(n!==p[0].cr.r1)){for(q=n;q<p[0].cr.r1;q++){this._toggleSketchRowVisibility(j.sketchTable.row(q),true);if(!r){this._toggleRowVisibility(o.item(q),true)}}}if(h){for(q=0,s=p.length;q<s;q++){l=p[q];this._expand(j,o,t,l,w,h,true,r)}}else{for(q=0,s=p.length;q<s;q++){l=p[q];u=(l.owner.position==="footer"||l.owner.outlineMode==="none")?true:false;this._expand(j,o,t,l,w,false,u,r)}}}};g.prototype._toggleRowVisibility=function(i,j,h){if(i){if(i[0]){if(j!==undefined){i[0].style.display=j?"":"none";i[0]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[0]["aria-expanded"]=h?"true":"false"}}if(i[1]){if(j!==undefined){i[1].style.display=j?"":"none";i[1]["aria-hidden"]=j?"false":"true"}if(h!==undefined){i[1]["aria-expanded"]=h?"true":"false"}}}};g.prototype._toggleSketchRowVisibility=function(i,h){if(i&&h!==undefined){if(h){i.deleteStyle("display")}else{i.style("display","none")}}};g.prototype._updateHeaderIcon=function(i,j){if(j.owner.position!=="footer"){var h=i.item(j.cr.r1);if(h){f.each(h,function(k,l){if(l){var m=f(l).find("div.wijmo-wijgrid-grouptogglebtn:first-child");if(m&&m.length){m.toggleClass(j.getHeaderImageClass(!j.isExpanded),false);m.toggleClass(j.getHeaderImageClass(j.isExpanded),true)}}})}}};return g})();d.groupRange=e;var c=(function(){function g(){this._groupRowIdx=0}g.prototype.group=function(h,i,j){this._grid=h;this._sketchTable=i;this._leaves=j;this._groupRowIdx=0;try{this._group()}finally{delete this._grid;delete this._sketchTable;delete this._leaves}};g.prototype._group=function(){var j=this;f.each(this._leaves,function(k,l){if(l.groupInfo){delete l.groupInfo.level;delete l.groupInfo.expandInfo}});var h=this._grid._groupedColumns(true),i=1;if(h.length==0){return}this._sketchTable.ensureNotLazy();f.each(h,function(k,l){j._groupRowIdx=0;if(l.groupInfo&&(l.groupInfo.position&&(l.groupInfo.position!=="none"))&&(l.dataIndex>=0)){l.groupInfo.level=i;l.groupInfo.expandInfo=[];j._processRowGroup(l,i++)}})};g.prototype._processRowGroup=function(q,k){var u=0,v=true;f.each(this._leaves,function(y,x){if(x.parentVis){u=y;return false}});for(var r=0;r<this._sketchTable.count();r++){var w=this._sketchTable.row(r);if(!w.isDataRow()){continue}var p=this._getGroupCellRange(r,q,k),h=true,o=(q.groupInfo.outlineMode==="startCollapsed"),n,t,s,l;if(o||b.grid.groupHelper.isParentCollapsed(this._leaves,p,k)){if((q.groupInfo.groupSingleRow===false)&&(p.r1===p.r2)){continue}h=false}if(k&&this._grid.options.groupIndent){for(var j=p.r1;j<=p.r2;j++){this._addIndent(this._sketchTable.row(j).cell(u),k)}}v=!(q.groupInfo.groupSingleRow===false&&(p.r1===p.r2));switch(q.groupInfo.position){case"header":s=this._addGroupRange(q.groupInfo,p,h,v);for(var m=p.r1;m<=p.r2;m++){w=this._sketchTable.row(m);w.attr("aria-level",k+1);if(!h){w.style("display","none");w.attr("aria-hidden",true)}}if(!v){break}this._updateByGroupRange(s,k);l=b.grid.groupHelper.isParentCollapsed(this._leaves,s.cr,k);n=this._buildGroupRow(s,p,true,l);this._sketchTable.insert(p.r1,n);n.attr("arial-level",k);n.attr("aria-expanded",h);if(l){n.style("display","none");n.attr("aria-hidden",true)}r=p.r2+1;break;case"footer":s=this._addGroupRange(q.groupInfo,p,true,v);if(!v){break}this._updateByGroupRange(s,k);t=this._buildGroupRow(s,p,false,false);t.attr("aria-level",k);this._sketchTable.insert(p.r2+1,t);r=p.r2+1;l=b.grid.groupHelper.isParentCollapsed(this._leaves,s.cr,k);if(l){t.style("display","none");t.attr("aria-hidden",true)}break;case"headerAndFooter":s=this._addGroupRange(q.groupInfo,p,h,v);for(m=p.r1;m<=p.r2;m++){w=this._sketchTable.row(m);w.attr("aria-level",k+1);if(!h){w.style("display","none");w.attr("aria-hidden",true)}}if(!v){break}this._updateByGroupRange(s,k);l=b.grid.groupHelper.isParentCollapsed(this._leaves,s.cr,k);n=this._buildGroupRow(s,p,true,l);t=this._buildGroupRow(s,p,false,false);this._sketchTable.insert(p.r2+1,t);t.attr("aria-level",k);if(l||!h){t.style("display","none");t.attr("aria-hidden",true)}this._sketchTable.insert(p.r1,n);n.attr("aria-level",k);n.attr("aria-expanded",h);if(l){t.style("display","none");t.attr("aria-hidden",true)}r=p.r2+2;break;default:throw b.grid.stringFormat('Unknown Position value: "{0}"',q.groupInfo.position)}this._groupRowIdx++}};g.prototype._buildGroupRow=function(o,t,j,y){var m=o.owner,x=m.owner,n=x.owner,s=((j)?"GH":"GF")+this._groupRowIdx+"-"+m.level,u=new b.grid.SketchGroupRow(j,{id:s}),v=undefined,l="",r="",h,A,h,z,i,w,k,q,p;if((x.dataIndex>=0)&&((v=this._sketchTable.valueAt(t.r1,x.dataIndex))!==null)){l=n.toStr(x,v)}u.groupByValue=v;if(this._grid._showRowHeader()){u.add(d.HtmlCell.nbsp())}h=new d.HtmlCell();if(j&&m.outlineMode!=="none"){if(o.isExpanded){h.html='<div class="'+n.options.wijCSS.icon+" "+o.getHeaderImageClass(true)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}else{h.html='<div class="'+n.options.wijCSS.icon+" "+o.getHeaderImageClass(false)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}}u.add(h);if(x.aggregate&&(x.aggregate!=="none")){r=this._getAggregate(t,x,x,j,l)}z=(j)?m.headerText:m.footerText;if(z==="custom"){i={data:this._sketchTable.getRawTable(),column:x,groupByColumn:m.owner,groupText:l,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:j,aggregate:r};if(this._grid._trigger("groupText",null,i)){z=i.text}}else{if((z===undefined)||(z===null)){if(j){z="{1}: {0}"}if(r||(r===0)){z=z?z+" {2}":"{2}"}}z=b.grid.stringFormat(z,l,x&&x.headerText?x.headerText:"",r.toString())}if(!z){z="&nbsp;"}h.html+="<span>"+z+"</span>";this._addIndent(h,m.level-1);w=1;k=(this._grid._showRowHeader())?1:0;q=true;for(;k<this._leaves.length;k++){A=this._leaves[k];if(A.parentVis){if(q){q=false;continue}if((A.dynamic!==true)&&A.aggregate&&(A.aggregate!=="none")){break}w++}}for(;k<this._leaves.length;k++){A=this._leaves[k];if(A.parentVis){p=this._getAggregate(t,A,m.owner,j,l);if(!p&&(p!==0)){p="&nbsp;"}u.add(new d.HtmlCell(p.toString(),{groupInfo:{leafIndex:A.leavesIdx,purpose:b.grid.groupRowCellPurpose.aggregateCell}}))}}h.ensureAttr().colSpan=w;h.ensureAttr().groupInfo={leafIndex:x.leavesIdx,purpose:b.grid.groupRowCellPurpose.groupCell};return u};g.prototype._getAggregate=function(l,k,i,o,n){var h="",m,j,p;if(!k.aggregate||(k.aggregate==="none")){return h}if(k.aggregate==="custom"){m={data:this._sketchTable.getRawTable(),column:k,groupByColumn:i,groupText:n,text:"",groupingStart:l.r1,groupingEnd:l.r2,isGroupHeader:o};if(this._grid._trigger("groupAggregate",null,m)){h=m.text}}else{j=new b.grid.tally();for(p=l.r1;p<=l.r2;p++){j.add(this._sketchTable.valueAt(p,k.dataIndex))}h=j.getValueString(k)}return h};g.prototype._getGroupCellRange=function(n,l,h){var p=l.leavesIdx,q,j=new b.grid.cellRange(n,p),i=b.grid.groupHelper.getParentGroupRange(this._leaves,j,h),o,m,k;q=this._sketchTable.row(n);if(q.isDataRow()){o=q.valueCell(l.dataIndex).value;if(o instanceof Date){o=o.getTime()}for(j.r2=n,k=this._sketchTable.count()-1;j.r2<k;j.r2++){if(!this._sketchTable.row(j.r2+1).isDataRow()||(i&&(j.r2+1>i.cr.r2))){break}m=this._sketchTable.valueAt(j.r2+1,l.dataIndex);if(m instanceof Date){m=m.getTime()}if(o!==m){break}}}return j};g.prototype._addGroupRange=function(j,n,h,p){var q=null,o=b.grid.groupHelper.getChildGroupIndex(n,j.expandInfo),m,i,l,k;if(o>=0&&o<j.expandInfo.length){q=j.expandInfo[o]}else{m=new b.grid.cellRange(n.r1,n.r1,n.r2,n.r2);i=(j.position==="footer"||!p)?true:h&&(j.outlineMode!=="startCollapsed");q=new b.grid.groupRange(i,m,-1,j.position,p);q.owner=j;j.expandInfo.push(q)}if(q&&p){l=n.r1;k=n.r2;if(j.position==="headerAndFooter"){k+=2}if(j.position!=="headerAndFooter"){k++}q.cr.r2=k}return q};g.prototype._updateByGroupRange=function(p,h){var n,o,k,l,m,r,q;for(n=0,o=this._leaves.length;n<o;n++){k=this._leaves[n].groupInfo;if(k&&(k.level<h)){l=(k.expandInfo)?k.expandInfo.length:0;for(m=0;m<l;m++){r=k.expandInfo[m];q=(p.position==="headerAndFooter")?2:1;if(r.cr.r1>=p.cr.r1&&!((r.cr.r1===p.cr.r1)&&(r.position==="footer"))){r.cr.r1+=q}if(r.cr.r2>=p.cr.r1){r.cr.r2+=q}}}}};g.prototype._addIndent=function(i,j){var h;if(j>0&&(h=this._grid.options.groupIndent)){i.ensureStyle().paddingLeft=(h*j)+"px"}};return g})();d.grouper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(){}f._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$");f.getGroupInfo=function m(s){if(s){var r=b.grid.groupHelper._getGroupInfoRegExp.exec(s.id),t,p,q;if(r){t=parseInt(r[3],10);p=parseInt(r[2],10);q=(r[1]==="H");return{level:t,index:p,isHeader:q,toString:function(){return(q?"GH":"GF")+p+"-"+t}}}}return null};f.getColumnByGroupLevel=function j(t,s){var r,p,q;for(r=0,p=t.length;r<p;r++){q=t[r];if(q.groupInfo&&(q.groupInfo.level===s)){return q}}return null};f.getGroupedColumnsCount=function l(t){var q=0,s,p,r;for(s=0,p=t.length;s<p;s++){r=t[s].groupInfo;if(r&&(r.position==="header"||r.position==="headerAndFooter"||r.position==="footer")){q++}}return q};f.getChildGroupIndex=function n(q,p){var u=0,r=p.length-1,s,t;while(u<=r){s=((r-u)>>1)+u;t=p[s].cr.r1-q.r1;if(t===0){return s}if(t<0){u=s+1}else{r=s-1}}return u};f.getParentGroupIndex=function h(q,r){var p=b.grid.groupHelper.getChildGroupIndex(q,r);if(p>0){p--}return(p<r.length)?p:-1};f.getChildGroupRanges=function k(u,v,p){var y=[],x=b.grid.groupHelper.getColumnByGroupLevel(u,p+1);if(x){var r=x.groupInfo.expandInfo,w=b.grid.groupHelper.getChildGroupIndex(v,r);for(var s=w,t=r.length;s<t;s++){var q=r[s];if(q.cr.r2<=v.r2){y.push(q)}else{break}}}return y};f.getParentGroupRange=function g(u,q,t){if(t===undefined){t=65535}if(t-2>=0){for(var s=u.length-1;s>=0;s--){var r=u[s].groupInfo;if(!r||!r.expandInfo||(r.level<0)||(r.level!==t-1)){continue}var p=b.grid.groupHelper.getParentGroupIndex(q,r.expandInfo);if(p>=0){return r.expandInfo[p]}}}return null};f.isParentCollapsed=function i(t,p,s){if(s===1){return false}for(var q=s;q>1;q--){var r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&!r.isExpanded){return true}p=r.cr}return false};f.isParentExpanded=function o(t,p,s){if(s===1){return true}for(var q=s;q>1;q--){var r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(r&&r.isExpanded){return true}p=r.cr}return false};return f})();c.groupHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(j,k,h,i){switch(arguments.length){case 2:this.r1=this.r2=j;this.c1=this.c2=k;break;case 4:this.r1=j;this.r2=h;this.c1=k;this.c2=i;break;default:this.r1=0;this.r2=0;this.c1=0;this.c2=0}}g.prototype.isSingleCell=function(){return((this.r1===this.r2)&&(this.c1===this.c2))};return g})();d.cellRange=c;var f=(function(){function g(){}g.prototype.merge=function(i,h){this._leaves=h;this._data=i;try{this._merge()}finally{delete this._data;delete this._leaves}};g.prototype._merge=function(){var l,h,j,k=true;for(l=0,h=this._leaves.length;l<h;l++){j=this._leaves[l];if((j.dataIndex>=0)&&!j.isBand&&(j.rowMerge==="free"||j.rowMerge==="restricted")){if(k){this._data.ensureNotLazy();k=false}this._mergeColumn(j)}}};g.prototype._mergeColumn=function(n){var m=n.dataIndex,o,k,h,j,l,p;for(k=0,h=this._data.count();k<h;k++){o=this._data.row(k);if(!o.isDataRow()){continue}j=this._getCellRange(k,n);if(j.r1!==j.r2){l=j.r2-j.r1+1;this._data.row(j.r1).cell(m).ensureAttr().rowSpan=l;for(p=j.r1+1;p<=j.r2;p++){this._data.row(p).cell(m).visible(false)}}k=j.r2}};g.prototype._getCellRange=function(h,k){var j=k.dataIndex,q,m=new b.grid.cellRange(h,j),o=(this._data.valueAt(h,j)||"").toString(),i=this._data.count(),n,l,p;for(m.r2=h;m.r2<i-1;m.r2++){q=this._data.row(m.r2+1);if(!q.isDataRow()||((q.valueCell(j).value||"").toString()!==o)){break}}n=k.leavesIdx;if(n>0&&k.rowMerge==="restricted"){l=this._leaves[n-1];if(l.dataIndex>=0){p=this._getCellRange(h,l);m.r1=Math.max(m.r1,p.r1);m.r2=Math.min(m.r2,p.r2)}}return m};return g})();d.merger=f})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var o=jQuery;c.EXPANDO="__wijgrid";(function(L){L._map=[];L.header=1;L.data=2;L.dataAlt=4;L.filter=8;L.groupHeader=16;L.groupFooter=32;L.footer=64;L.emptyDataRow=128})(c.rowType||(c.rowType={}));var z=c.rowType;(function(L){L._map=[];L.none=0;L.rendering=1;L.current=2;L.hovered=4;L.selected=8})(c.renderState||(c.renderState={}));var J=c.renderState;(function(L){L._map=[];L.table=0;L.head=1;L.body=2;L.foot=3})(c.rowScope||(c.rowScope={}));var n=c.rowScope;(function(L){L._map=[];L.none=0;L.column=1;L.row=2})(c.cellRangeExtendMode||(c.cellRangeExtendMode={}));var t=c.cellRangeExtendMode;(function(L){L._map=[];L.createIfNull=0;L.createAlways=1;L.dispose=2})(c.objectMode||(c.objectMode={}));var G=c.objectMode;(function(L){L._map=[];L.groupCell=0;L.aggregateCell=1})(c.groupRowCellPurpose||(c.groupRowCellPurpose={}));var r=c.groupRowCellPurpose;(function(L){L._map=[];L.sketch=0;L.rendered=1;L.renderable=2})(c.dataRowsRangeMode||(c.dataRowsRangeMode={}));var e=c.dataRowsRangeMode;(function(L){L._map=[];L.none=0;L.overlapTop=1;L.overlapBottom=2;L.reset=3})(c.intersectionMode||(c.intersectionMode={}));var f=c.intersectionMode;function k(O,M){var P,L,N;if(o.isArray(O)&&o.isArray(M)){if(O.length===M.length){N=true;for(P=0,L=O.length;P<L&&N;P++){N=b.grid.compareObj(O[P],M[P])}return N}}else{if(o.isPlainObject(O)&&o.isPlainObject(M)){for(P in O){if(O.hasOwnProperty(P)){if(!b.grid.compareObj(O[P],M[P])){return false}}}for(P in M){if(M.hasOwnProperty(P)){if(!b.grid.compareObj(O[P],M[P])){return false}}}return true}else{if(O instanceof Date){O=O.getTime()}if(M instanceof Date){M=M.getTime()}}}return O===M}c.compareObj=k;function g(O){var P=[];for(var N=0;N<(arguments.length-1);N++){P[N]=arguments[N+1]}var M,L;if(!O){return""}for(M=0,L=P.length;M<L;M++){O=O.replace(new RegExp("\\{"+M+"\\}","gm"),P[M])}return O}c.stringFormat=g;function q(L){return(L&&!(L<0))||(L===0)}c.validDataKey=q;function s(L){if(L&&(L instanceof Date)){return !isNaN(L.getTime())}return false}c.validDate=s;function B(L){return L.dataType||L._underlyingDataType||"string"}c.getDataType=B;function d(L,M){if(L&&M){L.find(".ui-widget").each(function(N,O){o.each(o(O).data(),function(Q,P){if(P.widgetName){M(N,P)}});return true})}}c.iterateChildrenWidgets=d;function K(L,M){var N=[];o.each(L.data(),function(O){if(O.indexOf(M)===0){N.push(O)}});o.each(N,function(O,P){L.removeData(P)})}c.remove$dataByPrefix=K;var C=(function(){function L(M){this._dom=M}L.prototype.getSelection=function(){var O=0,M=0,N;if(this._dom.selectionStart!==undefined){O=this._dom.selectionStart;M=this._dom.selectionEnd}else{if(document.selection){N=document.selection.createRange().duplicate();M=N.text.length;O=Math.abs(N.moveStart("character",-this._dom.value.length));M+=O}}return{start:O,end:M,length:M-O}};L.prototype.setSelection=function(M){if(this._dom.selectionStart!==undefined){this._dom.setSelectionRange(M.start,M.end)}else{var N=this._dom.createTextRange();N.collapse(true);N.moveStart("character",M.start);N.moveEnd("character",M.end);N.select()}};L.prototype.toggleSelection=function(O){var M=o(this._dom),N="onselectstart" in this._dom;if(O){if(N){M.unbind(".wijgrid-disableSelection")}else{M.css({MozUserSelect:"",WebkitUserSelect:""})}}else{if(N){M.bind("selectstart.wijgrid-disableSelection",function(P){P.preventDefault()})}else{M.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})}}};return L})();c.domSelection=C;function j(L){return o.extend(true,{},c.c1basefield.prototype.options,c.c1field.prototype.options,{dynamic:true,isLeaf:true,isBand:false,parentIdx:-1},L)}c.createDynamicField=j;function p(N,M){if(N){var L=N.nodeType?o(N):N,O=L.offset();if(O){if(M){return{top:O.top,left:O.left,width:L[0].clientWidth||0,height:L[0].clientHeight||0}}return{top:O.top,left:O.left,width:L.outerWidth(),height:L.outerHeight()}}}return null}c.bounds=p;function I(M,L){if(M){if(M.start<0){M.start=0}if(M.end<0){M.end=0}M.start=Math.min(M.start,L);M.end=Math.min(M.end,L)}return M}c.ensureBounds=I;function v(O,Q,N){if(Q===undefined){Q=3}if(O&&Q!==0){if(!N&&O.nodeType===3){return O.nodeValue}if(O.nodeType===1){switch((O).type){case"button":case"text":case"textarea":case"select-one":return(O).value;case"checkbox":return(O).checked.toString()}var L="",M=0,P;while(P=O.childNodes[M++]){L+=b.grid._getDOMText(P,Q-1)}return L}}return""}c._getDOMText=v;function H(N,R,L,T){var Q=(N.jquery||o.isArray(N)),O,S,P,M=R+L;if(arguments.length===3){if(Q){return o.data(N[0],M)}return o.data(N,M)}else{if(Q){for(O=0,S=N.length;O<S;O++){P=o.data(N[O],M,T)}return P}return o.data(N,M,T)}}c.dataPrefix=H;function D(O,P){if(P&&O){var L,N,M;for(L in P){if(P.hasOwnProperty(L)){N=P[L];M=typeof(N);if((M==="string"||M==="boolean"||M==="number")&&(O[L]===undefined)){O[L]=N}}}}}c.shallowMerge=D;function F(L){return(L&&(typeof(L)==="object")&&!(L instanceof Date))}c.isCustomObject=F;function u(N,P){var L,O,M=o.isFunction(P);for(L in N){if(N.hasOwnProperty(L)){O=M?P(N[L]):(N[L]===P);if(O===true){return{at:L,found:N[L]}}}}return{at:null,found:null}}c.search=u;function A(S,N){if(S){var Q,M,P=0,L={},R,O;for(Q=0,M=S.attributes.length;Q<M;Q++){O=S.attributes[Q].name;if(O&&(!N||!N(O))){R=S.getAttribute(O);if(O==="style"){R=(typeof(R)==="object")?R.cssText:R}if(!R&&O==="class"){R=S.getAttribute("className")}if(R&&(typeof(R)!=="function")){L[O]=R;P++}}}if(P){return L}}return null}c.getAttributes=A;function w(N,O){var M,P,R,L,Q;if(N){if(typeof(O)!=="object"&&!o.isFunction(O)){O={}}for(M in N){P=N[M];R=O[R];if(P===O){continue}if(P&&(o.isPlainObject(P)||(L=o.isArray(P)))){if(L){L=false;Q=R&&o.isArray(R)?R:[]}else{Q=R&&o.isPlainObject(R)?R:{}}O[M]=b.grid.deepExtend(P,Q)}else{O[M]=P}}}return O}c.deepExtend=w;function l(M,L){if(M&&M.jquery){M=M[0]}if(M){return(arguments.length===1)?o.data(M,"wijgridwidgetName"):o.data(M,"wijgridwidgetName",L)}return undefined}c.widgetName=l;var i=(function(){function M(){}M._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""};M.isExtendSupportRequired=function L(R){R=(R||"").toLowerCase();return(R in b.grid.HTML5InputSupport._requiresExtendedSupport)};M.getDefaultInputType=function P(T,S){var R=S.inputType;if(!R){R="text";if(T){switch(b.grid.getDataType(S)){case"number":case"currency":R="number";break;case"datetime":R="datetime";break}}}return R};M.toStr=function N(T,S){var R=T;S=(S||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(S)){switch(S){case"datetime":R=(T)?R=Globalize.format(T,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":R=(T)?R=Globalize.format(T,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":R=(T)?R=Globalize.format(T,"yyyy-MM-dd"):"";break;case"month":R=(T)?R=Globalize.format(T,"yyyy-MM"):"";break;case"time":R=(T)?R=Globalize.format(T,"HH:mm:ss"):"";break}}else{R=T+""}return R};M.parse=function O(T,S){var R,U=function(V){V=new Date(V);if(!b.grid.validDate(V)){V=null}return V};S=(S||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(S)){switch(S){case"datetime":R=Globalize.parseDate(T,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(T,"yyyy-MM-ddTHH:mmZ")||U(T);break;case"datetime-local":R=Globalize.parseDate(T,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(T,"yyyy-MM-ddTHH:mm")||U(T);break;case"date":R=Globalize.parseDate(T,"yyyy-MM-dd")||U(T);break;case"month":R=Globalize.parseDate(T,"yyyy-MM");break;case"time":R=Globalize.parseDate(T,"HH:mm:ss")||Globalize.parseDate(T,"HH:mm");break;case"number":R=parseFloat(T)}}else{R=T}return R};M.extend=function Q(T,S,R){if(!T){T=S}else{R=(R||"").toLowerCase();switch(R){case"date":T.setFullYear(S.getFullYear(),S.getMonth(),S.getDate());break;case"month":T.setFullYear(S.getFullYear(),S.getMonth());break;case"time":T.setHours(S.getHours());T.setMinutes(S.getMinutes());T.setSeconds(S.getSeconds());break;default:T=S}}return T};return M})();c.HTML5InputSupport=i;function x(L,M){if(typeof M==="undefined"){M=99}var N=0;if(L&&o.ui&&o.fn.zIndex){N=L.zIndex();if(N){N++}}return Math.max(N,M)}c.getZIndex=x;function m(M,L,N){return(M>L)&&(M<(L+N))}c.isOverAxis=m;function E(Q,M,P,O,L,N){return b.grid.isOverAxis(Q,P,L)&&b.grid.isOverAxis(M,O,N)}c.isOver=E;var h=0;function y(){return"uid"+h++}c.getUID=y;o.extend(o.wijmo.wijgrid,{rowType:b.grid.rowType,renderState:b.grid.renderState,bounds:b.grid.bounds})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(wijmo){(function(grid){(function(TimeUnit){TimeUnit._map=[];TimeUnit.Millisecond=1;TimeUnit.Second=2;TimeUnit.Minute=4;TimeUnit.Hour=8;TimeUnit.Day=16;TimeUnit.Month=32;TimeUnit.Year=64;TimeUnit.DATE=TimeUnit.Year|TimeUnit.Month|TimeUnit.Day;TimeUnit.TIME=TimeUnit.Hour|TimeUnit.Minute|TimeUnit.Second|TimeUnit.Millisecond;TimeUnit.ALL=TimeUnit.DATE|TimeUnit.TIME})(grid.TimeUnit||(grid.TimeUnit={}));var TimeUnit=grid.TimeUnit;var TimeUnitConverter=(function(){function TimeUnitConverter(){}TimeUnitConverter.convertInputType=function convertInputType(inputType){var formatString=wijmo.grid.TimeUnitConverter.convertInputTypeToFormatString(inputType),result=wijmo.grid.TimeUnitConverter.convertFormatString(formatString);return result};TimeUnitConverter.convertInputTypeToFormatString=function convertInputTypeToFormatString(inputType){switch((inputType||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""};TimeUnitConverter.convertFormatString=function convertFormatString(dateFormatString){var result=0;if(dateFormatString){if(dateFormatString.length===1){switch(dateFormatString[0]){case"t":return TimeUnit.Hour|TimeUnit.Minute;case"T":return TimeUnit.TIME;case"d":case"D":return TimeUnit.DATE;case"Y":return TimeUnit.Month|TimeUnit.Year;case"M":return TimeUnit.Month|TimeUnit.Day;case"f","F","S":return TimeUnit.ALL}}var quoteFirst,quoteLast;if(((quoteFirst=dateFormatString.indexOf("'"))>=0)&&((quoteLast=dateFormatString.lastIndexOf("'"))>=0)&&(quoteFirst!==quoteLast)){dateFormatString=dateFormatString.substr(0,quoteFirst)+dateFormatString.substring(quoteLast+1,dateFormatString.length-1)}for(var i=0,len=dateFormatString.length;i<len;i++){switch(dateFormatString[i]){case"d":result|=TimeUnit.Day;break;case"M":result|=TimeUnit.Month;break;case"y":result|=TimeUnit.Year;break;case"m":result|=TimeUnit.Minute;break;case"h":case"H":result|=TimeUnit.Hour;break;case"s":result|=TimeUnit.Second;break;case"f":result|=TimeUnit.Millisecond;break}}}return result||TimeUnit.ALL};TimeUnitConverter.cutDate=function cutDate(date,timeUnit){if(date){timeUnit=~timeUnit;if(timeUnit&TimeUnit.Millisecond){date.setMilliseconds(0)}if(timeUnit&TimeUnit.Second){date.setSeconds(0)}if(timeUnit&TimeUnit.Minute){date.setMinutes(0)}if(timeUnit&TimeUnit.Hour){date.setHours(0)}if(timeUnit&TimeUnit.Day){date.setDate(1)}if(timeUnit&TimeUnit.Month){date.setMonth(0)}if(timeUnit&TimeUnit.Year){date.setFullYear(0)}}return date};return TimeUnitConverter})();grid.TimeUnitConverter=TimeUnitConverter;function lazy(eval,context){var hasValue=false,value;return function(){if(!hasValue){value=context?eval.call(context):eval();hasValue=true}return value}}grid.lazy=lazy})(wijmo.grid||(wijmo.grid={}));var grid=wijmo.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var f=(function(){function h(){}h.NoFilterOp={applicableTo:null,name:"NoFilter",displayName:"No filter",arity:1,operator:function(){return true}};return h})();var c=(function(){function h(j){this._cache={};var i=this;this._wijgrid=j;this._addOperator(null,f.NoFilterOp);e.each(b.data.filtering.ops,function(k,l){i._addOperator(k,l)});e.each(j.options.customFilterOperators,function(k,l){i._addOperator(null,l,true)})}h.prototype.getByName=function(i){var j=this.getByNameInt(i);return(j)?j.op:null};h.prototype.getByNameInt=function(i){return this._cache[(i||"").toLowerCase()]};h.prototype.getByDataType=function(j){var k=[],i;e.each(this._cache,function(l,n){var m=n.op;if(!m.applicableTo||e.inArray(j,m.applicableTo)>=0){k.push(n)}});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":k.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":k.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":k.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:break}i=e.map(k,function(m,l){return m.op});return i};h.prototype._addOperator=function(i,k,j){if(typeof j==="undefined"){j=false}if(i&&!k.name){k.name=i}i=(i||k.name).toLowerCase();if(!this._cache[i]){this._cache[i]={op:k,isCustom:(j===true)}}};h.prototype._sortAlpha=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaEmbeddedFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return 1}if(i.isCustom){return -1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaCustomFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return -1}if(i.isCustom){return 1}}if(l===k){return 0}return(l<k)?-1:1};return h})();d.filterOperatorsCache=c;var g=(function(){function l(){}l.marker="_wijgrid";l.getSingleValue=function i(m){if(e.isArray(m)){m=m[0];if(e.isArray(m)){m=m[0]}}return m};l.getSingleOperatorName=function h(m){if(e.isArray(m)){m=m[0]}return m.name||m||""};l.verify=function k(o,t,q,p){if(o){if(e.isArray(o)){var r,n,s=[],m=[];if(!e.isArray(t)){t=[t]}for(r=0,n=o.length;r<n;r++){if(b.grid.filterHelper._verifySingleOp(o[r],t[r],q,p)){s.push({name:o[r].name||o[r],condition:o[r].condition||"or"});m.push(t?t[r]:undefined)}}if(s.length){return{filterOperator:s,filterValue:m}}}else{if(b.grid.filterHelper._verifySingleOp(o,t,q,p)){return{filterOperator:o,filterValue:t}}}}return null};l._verifySingleOp=function j(m,q,o,n){if(m&&(m=(m.name||m))){var p;m=(m||"").toLowerCase();if((m!=="nofilter"||q!==undefined)&&(p=n.getByName(m))){if(p.applicableTo===null||e.inArray(o||"string",p.applicableTo)>=0){if(p.arity===1||(p.arity>1&&b.grid.filterHelper.getSingleValue(q)!==undefined)){return true}}}}return false};return l})();d.filterHelper=g})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(e){var g=jQuery;function f(l,k){if(l&&!l.nodeType){l=l[0]}if(l){switch(k){case b.grid.rowScope.head:return l.tHead;case b.grid.rowScope.body:if(l.tBodies){return l.tBodies[0]||null}break;case b.grid.rowScope.foot:return l.tFoot;default:return l}}return null}e.getTableSection=f;function j(l,k){var m;if(l&&!l.nodeType){l=l[0]}return(l&&(m=this.getTableSection(l,k)))?m.rows.length:0}e.getTableSectionLength=j;function i(l,k,n){var m;if(l&&!l.nodeType){l=l[0]}return(l&&(m=this.getTableSection(l,k)))?(m.rows[n]||null):null}e.getTableSectionRow=i;function c(t,u,o){var p,r,x,k,l,w,s,m,v=[],n=function(y){y=y.toLowerCase();return y==="rowspan"||y==="colspan"},q;if(t&&!t.nodeType){t=t[0]}if(t&&(q=this.getTableSection(t,u))){for(p=0,r=q.rows.length;p<r;p++){l=q.rows[p];w=[];if(o){s=(b).data.Expando.getFrom(w,true);m=s[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:b.grid.getAttributes(l)||{}}}for(x=0,k=l.cells.length;x<k;x++){w[x]=g.trim((l.cells[x]).innerHTML);if(o){m.cellsAttributes[x]=b.grid.getAttributes(l.cells[x],n)||{}}}v[p]=w}}return v}e.readTableSection=c;function d(k){var l=k.parentNode.parentNode;switch(l.tagName.toLowerCase()){case"thead":return b.grid.rowScope.head;case"tbody":return b.grid.rowScope.body;case"tfoot":return b.grid.rowScope.foot}return null}e.determineSection=d;var h=(function(){function k(m,n,l,o){this._width=0;this._table=m;this._offsets=[];if(o){this.ensureColGroup()}if(l){this.ensureTBody()}if(!n){this._buildOffsets()}}k.prototype.element=function(){return this._table};k.prototype.width=function(){return this._width};k.prototype.getCellIdx=function(m,l){return(m<this._width)?this._offsets[l][m].cellIdx:-1};k.prototype.getColumnIdx=function(m,l){if(typeof(m)!=="number"){var n=m;m=n.cellIndex;l=n.parentNode.rowIndex}return(m<this._width)?this._offsets[l][m].colIdx:-1};k.prototype.clearSection=function(m){var o,l,n=b.grid.getTableSection(this._table,m);switch(m){case b.grid.rowScope.body:o=this.getSectionLength(b.grid.rowScope.table);l=o+this.getSectionLength(m)-1;break;case b.grid.rowScope.foot:o=this.getSectionLength(b.grid.rowScope.table)+this.getSectionLength(b.grid.rowScope.head);l=o+this.getSectionLength(m)-1;break;default:o=0;l=this.getSectionLength(m)-1}while(n.rows.length){n.deleteRow(0)}this._offsets.splice(o,l-o+1)};k.prototype.getSectionLength=function(l){return b.grid.getTableSectionLength(this._table,l)};k.prototype.getSectionRow=function(m,l){return b.grid.getTableSectionRow(this._table,l,m)};k.prototype.forEachColumnCellNatural=function(o,r,q){var m,n,p,l;for(m=0,n=this._table.rows.length;m<n;m++){p=this._table.rows[m];if(o<p.cells.length){l=r(p.cells[o],m,q);if(l!==true){return l}}}return true};k.prototype.forEachColumnCell=function(p,s,r){var m,o,q,n,l;for(m=0,o=this._offsets.length;m<o;m++){q=this._table.rows[m];n=this.getCellIdx(p,m);if(n>=0){l=s(q.cells[n],m,r);if(l!==true){return l}}}return true};k.prototype.forEachRowCell=function(r,q,p){var o=this._table.rows[r],m,n,l;for(m=0,n=o.cells.length;m<n;m++){l=q(o.cells[m],m,p);if(l!==true){return l}}return true};k.prototype.colGroupTag=function(){var l=this._table.getElementsByTagName("colgroup");return((l&&l[0]))||null};k.prototype.colTags=function(){var l=this.colGroupTag();return(l&&l.getElementsByTagName("col"))||[]};k.prototype.ensureTBody=function(){return((this._table.tBodies&&this._table.tBodies[0])||this._table.appendChild(document.createElement("tbody")))};k.prototype.ensureTHead=function(){return(this._table.tHead&&this._table.tHead[0])||this._table.createTHead()};k.prototype.ensureTFoot=function(){return(this._table.tFoot&&this._table.tFoot[0])||this._table.createTFoot()};k.prototype.ensureColGroup=function(){var l=this._table.getElementsByTagName("colgroup");return((l&&l[0])||this._table.appendChild(document.createElement("colgroup")))};k.prototype.appendCol=function(m){var l=this.ensureColGroup();return((m&&l.appendChild(m))||l.appendChild(document.createElement("col")))};k.prototype.removeOffset=function(l){if(l>=0&&l<this._offsets.length){if(l<0||(!l&&l!==0)){l=this._offsets.length-1}this._offsets.splice(l,1)}};k.prototype.insertOffset=function(l){var n,m;if(this._width>0){n=[];for(m=0;m<this._width;m++){n.push({cellIdx:m,colIdx:m})}if(l<0||(!l&&l!==0)){l=this._offsets.length}this._offsets.splice(l,0,n)}};k.prototype.rebuildOffsets=function(){this._offsets=[];this._width=0;this._buildOffsets()};k.prototype._buildOffsets=function(){var r=[],m,p,t,v,o,u,l,s,q,n;for(p=0,t=this._table.rows.length;p<t;p++){m=[];this._offsets[p]=m;v=this._table.rows[p];for(o=0,u=0,l=v.cells.length;o<l;o++,u++){s=v.cells[o];for(;r[u]>1;u++){r[u]--;m[u]={cellIdx:-1,colIdx:-1}}if(!(r[u]>1)){r[u]=s.rowSpan}m[u]={cellIdx:o,colIdx:-1};m[o].colIdx=u;q=s.colSpan;for(;q>1;q--){m[++u]={cellIdx:-1,colIdx:-1}}}n=r.length;for(;u<n;u++){r[u]--;m[u]={cellIdx:-1,colIdx:-1}}this._width=Math.max(this._width,n)}};return k})();e.htmlTableAccessor=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(h,l,i,k,j){if(typeof i==="undefined"){i=null}if(typeof k==="undefined"){k=false}if(typeof j==="undefined"){j=true}this.__isEdit=false;this._wijgrid=i;this._virtualize=j;if(k){this._ci=h-this._wijgrid._getDataToAbsOffset().x;this._ri=l-this._wijgrid._getDataToAbsOffset().y;if(this._virtualize){this._ri=this._wijgrid._renderableBoundsCollection().getAbsIndex(this._ri+this._wijgrid._viewPortBounds().start)}}else{this._ci=h;this._ri=l}}g.outsideValue=new g(-1,-1,null);g.prototype.cellIndexAbs=function(){return this._ci+this._wijgrid._getDataToAbsOffset().x};g.prototype.rowIndexAbs=function(){var h=this._virtualize?this._wijgrid._renderableBoundsCollection().getRenderedIndex(this._ri)-this._wijgrid._viewPortBounds().start:this._ri;h+=this._wijgrid._getDataToAbsOffset().y;return h};g.prototype.cellIndex=function(h){if(!arguments.length){return this._ci}this._ci=h};g.prototype.column=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._field("visibleLeaves")[this.cellIndexAbs()]}return null};g.prototype.container=function(){var i=this.tableCell(),h;if(i){h=e(i).children("div.wijmo-wijgrid-innercell");if(h){return h}}return null};g.prototype.isEqual=function(h){return(h&&(h.rowIndex()===this.rowIndex())&&(h.cellIndex()===this.cellIndex()))};g.prototype.row=function(){var i=null,h=null;if(this._wijgrid){if(this._virtualize){return this._wijgrid._view()._getRowInfoBySketchRowIndex(this.rowIndex())}else{i=this._wijgrid._view().rows().item(this.rowIndexAbs());if(i&&i.length){h=this._wijgrid._view()._getRowInfo(i)}}}return h};g.prototype.rowIndex=function(h){if(!arguments.length){return this._ri}this._ri=h};g.prototype.tableCell=function(){if(this._wijgrid&&this._isValid()){if(!this._virtualize||this._isRendered()){return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs())}}return null};g.prototype.value=function(i){var h,k,j;if(this._wijgrid&&this._isValid()){k=this.row();if(k.type&b.grid.rowType.data){h=this.column();if(arguments.length===0){j=this._wijgrid._dataViewWrapper.getValue(k.data,h.dataKey);return this._wijgrid.parse(h,j)}else{i=this._wijgrid.parse(h,i);if((i===null&&h.valueRequired)||((b.grid.getDataType(h)!=="string")&&isNaN(i))){throw"invalid value"}this._wijgrid._dataViewWrapper.setValue(k.dataItemIndex,h.dataKey,i);var m=this._wijgrid.sketchTable.row(this.rowIndex());var l=m.cell(h.dataIndex);l.value=i}}}};g.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()};g.prototype._clip=function(i,k){if(typeof k==="undefined"){k=false}var h=false,j;if(k){if(this.cellIndexAbs()<(j=i.topLeft().cellIndexAbs())){h=true;this._ci=i.topLeft().cellIndex()}if(this.cellIndexAbs()>(j=i.bottomRight().cellIndexAbs())){h=true;this._ci=i.bottomRight().cellIndex()}if(this.rowIndexAbs()<(j=i.topLeft().rowIndexAbs())){h=true;this._ri=i.topLeft().rowIndex()}if(this.rowIndexAbs()>(j=i.bottomRight().rowIndexAbs())){h=true;this._ri=i.bottomRight().rowIndex()}}else{if(this.cellIndex()<(j=i.topLeft().cellIndex())){h=true;this._ci=j}if(this.cellIndex()>(j=i.bottomRight().cellIndex())){h=true;this._ci=j}if(this.rowIndex()<(j=i.topLeft().rowIndex())){h=true;this._ri=j}if(this.rowIndex()>(j=i.bottomRight().rowIndex())){h=true;this._ri=j}}return h};g.prototype._clone=function(){return new b.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid,false,this._virtualize)};g.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0};g.prototype._isRendered=function(){var h=this._wijgrid._view()._isRowRendered(this.rowIndex());return h>=0};g.prototype._isEdit=function(h){if(!arguments.length){return this.__isEdit}this.__isEdit=h};g.prototype._setGridView=function(h){this._wijgrid=h};return g})();d.cellInfo=c;var f=(function(){function g(i,h){if(!i||!h){throw"invalid arguments"}this._topLeft=i._clone();this._bottomRight=h._clone()}g.prototype.bottomRight=function(){return this._bottomRight};g.prototype.isEqual=function(h){return(h&&this._topLeft.isEqual(h.topLeft())&&this._bottomRight.isEqual(h.bottomRight()))};g.prototype.topLeft=function(){return this._topLeft};g.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()};g.prototype._isIntersect=function(j){var i,h,l,k;if(j){i=j.bottomRight().rowIndex()-j.topLeft().rowIndex()+1;h=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if((j.topLeft().rowIndex()+i)-this._topLeft.rowIndex()<i+h){l=j.bottomRight().cellIndex()-j.topLeft().cellIndex()+1;k=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1;return((j.topLeft().cellIndex()+l)-this._topLeft.cellIndex()<l+k)}}return false};g.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()};g.prototype._clip=function(j,k){if(typeof k==="undefined"){k=false}var i=this._topLeft._clip(j,k);var h=this._bottomRight._clip(j,k);return i||h};g.prototype._clone=function(){return new g(this._topLeft._clone(),this._bottomRight._clone())};g.prototype._containsCellInfo=function(h){return(h&&h.cellIndex()>=this._topLeft.cellIndex()&&h.cellIndex()<=this._bottomRight.cellIndex()&&h.rowIndex()>=this._topLeft.rowIndex()&&h.rowIndex()<=this._bottomRight.rowIndex())};g.prototype._containsCellRange=function(h){return(h&&this._containsCellInfo(h.topLeft())&&this._containsCellInfo(h.bottomRight()))};g.prototype._extend=function(i,h){if(i===b.grid.cellRangeExtendMode.column){this._topLeft.rowIndex(h.topLeft().rowIndex());this._bottomRight.rowIndex(h.bottomRight().rowIndex())}else{if(i===b.grid.cellRangeExtendMode.row){this._topLeft.cellIndex(h.topLeft().cellIndex());this._bottomRight.cellIndex(h.bottomRight().cellIndex())}}return this};g.prototype._normalize=function(){var i=this._topLeft.cellIndex(),k=this._topLeft.rowIndex(),h=this._bottomRight.cellIndex(),j=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(i,h));this._topLeft.rowIndex(Math.min(k,j));this._bottomRight.cellIndex(Math.max(i,h));this._bottomRight.rowIndex(Math.max(k,j))};g.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()};g.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()};return g})();d.cellInfoRange=f;e.extend(e.wijmo.wijgrid,{cellInfo:b.grid.cellInfo,cellInfoRange:b.grid.cellInfoRange})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g,h){this._rowHeaderSize=22;this.mIsRendered=false;this._sizesAdjCache={th:0,col:0,subTable:0};if(!g){throw"'wijgrid' must be specified"}this._wijgrid=g;this._bounds=h;this._wijgrid.element.addClass("wijmo-wijgrid-table")}f.prototype.dispose=function(){this.toggleDOMSelection(true);this._wijgrid.element.removeClass("wijmo-wijgrid-table")};f.prototype.ensureDisabledState=function(){var i="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,h=this._wijgrid.options.disabled,g=this;e.each(this.subTables(),function(k,l){if(l){var j=e(l.element());if(h){j.addClass(i);g._wijgrid._setAttr(j,"aria-disabled",true)}else{j.removeClass(i);g._wijgrid._setAttr(j,"aria-disabled",false)}}})};f.prototype.ensureWidth=function(h,i,g){this._setColumnWidth(h,i)};f.prototype.ensureHeight=function(g){};f.prototype.getScrollValue=function(){return null};f.prototype.getVisibleAreaBounds=function(g){throw"not implemented"};f.prototype.getVisibleContentAreaBounds=function(){throw"not implemented"};f.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"};f.prototype.isRendered=function(){return this.mIsRendered};f.prototype.render=function(){this._ensureRenderBounds();this._preRender();this._renderContent();this._postRender()};f.prototype.toggleDOMSelection=function(g){e.each(this.subTables(),function(h,i){(new b.grid.domSelection(i.element())).toggleSelection(g)});(new b.grid.domSelection(this._wijgrid.outerDiv)).toggleSelection(g)};f.prototype.updateSplits=function(g){throw"not implemented"};f.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){if(!this.isRendered()){throw"not rendered yet"}this._bodyRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.body,0,0)}return this._bodyRowsAccessor};f.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){if(!this.isRendered()){throw"not rendered yet"}var g=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,0);return g.item(g.length()-1)}return null};f.prototype.footerRow=function(){if(this._wijgrid.options.showFooter){if(!this.isRendered()){throw"not rendered yet"}var g=new b.grid.rowAccessor(this,b.grid.rowScope.foot,0,0);return g.item(0)}};f.prototype.headerRows=function(){var g;if(!this._headerRowsAccessor){if(!this.isRendered()){throw"not rendered yet"}g=this._wijgrid.options.showFilter?1:0;this._headerRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,g)}return this._headerRowsAccessor};f.prototype.rows=function(){if(!this._rowsAccessor){if(!this.isRendered()){throw"not rendered yet"}this._rowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.table,0,0)}return this._rowsAccessor};f.prototype.focusableElement=function(){throw"not implemented"};f.prototype.forEachColumnCell=function(g,i,h){throw"not implemented"};f.prototype.forEachRowCell=function(i,h,g){throw"not implemented"};f.prototype.getAbsoluteCellInfo=function(h,g){throw"not implemented"};f.prototype.getAbsoluteRowIndex=function(g){throw"not implemented"};f.prototype.getCell=function(h,g){throw"not implemented"};f.prototype.getColumnIndex=function(g){throw"not implemented"};f.prototype.getHeaderCell=function(g){throw"not implemented"};f.prototype.getJoinedCols=function(g){throw"not implemented"};f.prototype.getJoinedRows=function(h,g){throw"not implemented"};f.prototype.getJoinedTables=function(g,h){throw"not implemented"};f.prototype.subTables=function(){throw"not implemented"};f.prototype._getMappedScrollMode=function(){var i=this._wijgrid.options.scrollMode,g="auto",h="auto";switch(i){case"horizontal":g="hidden";h="visible";break;case"vertical":g="visible";h="hidden";break;case"both":g="visible";h="visible";break}return{vScrollBarVisibility:g,hScrollBarVisibility:h}};f.prototype._postRender=function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none");this.mIsRendered=true;this.ensureDisabledState();this._sizesAdjCache.col=0;this._sizesAdjCache.th=0;this._sizesAdjCache.subTable=0;var j=this._wijgrid._field("visibleLeaves");if(j.length>0){var h=this.getHeaderCell(0),i=this.getJoinedCols(0);if(h){this._sizesAdjCache.th=e(h).leftBorderWidth()+e(h).rightBorderWidth()}if(i&&i.length){this._sizesAdjCache.col=e(i[0]).leftBorderWidth()+e(i[0]).rightBorderWidth()}}var g=this.subTables()[0];this._sizesAdjCache.subTable=e(g.element()).leftBorderWidth()+e(g.element()).rightBorderWidth()};f.prototype._preRender=function(){this.mIsRendered=false};f.prototype._ensureRenderBounds=function(){var g=this._wijgrid._getDataCellsRange(d.dataRowsRangeMode.sketch);this._bounds.start=0;this._bounds.end=g.bottomRight().rowIndex()};f.prototype._renderContent=function(){this._renderCOLS();this._renderHeader();if(this._wijgrid.options.showFilter){this._renderFilter()}this._renderBody();if(this._wijgrid.options.showFooter){this._renderFooter()}};f.prototype._renderCOLS=function(){var h=this._wijgrid._field("visibleLeaves"),j,l,k,g;for(k=0,g=h.length;k<g;k++){j=h[k];l=this._createCol(j,k);this._appendCol(l,j,k)}};f.prototype._renderHeader=function(){var h=b.grid.rowType,j=this._wijgrid._columnsHeadersTable(),k,g,l;if(j&&(g=j.length)){for(k=0;k<g;k++){l=this._insertEmptyRow(h.header,k,-1,-1,-1,undefined);this._renderRow(l,null,j[k])}}};f.prototype._renderFilter=function(){var g=this._insertEmptyRow(b.grid.rowType.filter,-1,-1,-1,-1,undefined);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._renderBody=function(){var i=b.grid.rowType,h=this._wijgrid._field("visibleLeaves"),n=this._wijgrid.sketchTable,l=-1,k=0,m=0,g=this._wijgrid._dataOffset;var j=this;if(this._bounds.start>=0&&this._bounds.end>=0){this._wijgrid._renderableBoundsCollection().forEachIndex(this._bounds.start,this._bounds.end-this._bounds.start+1,function(o){var s=n.row(o-g),q=s.isDataRow(),p=(s).groupByValue,r=j._insertEmptyRow(s.rowType,m++,q?++l:-1,s.dataItemIndex(),s.dataItemIndex(k),p);j._renderRow(r,h,s)})}};f.prototype._renderFooter=function(){var g=this._insertEmptyRow(b.grid.rowType.footer,-1,-1,-1,-1,undefined);this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._insertEmptyRow=function(n,g,h,j,m,l){var i=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),k=this._insertRow(n,g,i);return this._createRowInfo(k,n,b.grid.renderState.rendering,g,h,j,m,l)};f.prototype._createEmptyCell=function(j,g,i){var h=b.grid.rowType,k=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(j.type,k)};f.prototype._insertRow=function(i,g,h){throw"not implemented"};f.prototype._createCell=function(i,j){var h=b.grid.rowType,g;if(!j){if(i===h.header){j=document.createElement("th")}else{j=document.createElement("td")}}if(i!==h.filter){g=document.createElement("div");g.className="wijmo-wijgrid-innercell";if(j.firstChild){while(j.firstChild){g.appendChild(j.firstChild)}}j.appendChild(g)}return e(j)};f.prototype._appendCell=function(i,g,h){throw"not implemented"};f.prototype._createCol=function(h,g){throw"not implemented"};f.prototype._appendCol=function(i,h,g){throw"not implemented"};f.prototype._renderRow=function(l,i,k){var h=b.grid.rowType,g,j;switch(l.type){case h.filter:this._renderFilterRow(l,i);break;case h.footer:this._renderFooterRow(l,i);break;case h.header:this._renderHeaderRow(l,k);break;case h.data:case h.data|h.dataAlt:this._renderDataRow(l,i,k);g=k.attr();j=k.style();break;case h.emptyDataRow:case h.groupHeader:case h.groupFooter:this._renderSpannedRow(l,i,k);g=k.attr();j=k.style();break;default:throw"unknown rowType"}this._rowRendered(l,g,j)};f.prototype._renderCell=function(g,l,n,k,i,j,h){var m=this._createEmptyCell(g,i.dataIndex,i);var o=(g.type===b.grid.rowType.filter)?m:e(m[0].firstChild);this._appendCell(g,l,m);if(k){o.html(n)}else{this._wijgrid.cellFormatter.format(m,o,i,n,g)}this._cellRendered(g,m,l,i,j,h)};f.prototype._renderDataRow=function(g,p,j){var k,l,m,o,r,n,h;for(k=0,l=p.length;k<l;k++){m=p[k];o=m.dataIndex;if(o<0){n=null;h=null;r=null}else{var q=j.cell(o);if(!q||!q.visible()){continue}r=this._wijgrid.toStr(m,q.value);n=q.attr();h=q.style()}this._renderCell(g,k,r,false,m,n,h)}};f.prototype._renderFilterRow=function(l,h){var k,g,j;for(k=0,g=h.length;k<g;k++){j=h[k];this._renderCell(l,k,b.grid.filterHelper.getSingleValue(j.filterValue),false,j)}};f.prototype._renderFooterRow=function(k,h){var j,g;for(j=0,g=h.length;j<g;j++){this._renderCell(k,j,"",false,h[j])}};f.prototype._renderHeaderRow=function(m,k){var j,g,l=0,h;for(j=0,g=k.length;j<g;j++){h=k[j];if(h.column&&h.column.parentVis){h.column.thX=l++;h.column.thY=m.sectionRowIndex;this._renderCell(m,j,h.column.headerText,false,h.column,{colSpan:h.colSpan,rowSpan:h.rowSpan})}}};f.prototype._renderSpannedRow=function(n,j,o){var l,k,h=Math.min(j.length,o.cellCount());for(l=0;l<h;l++){var m=n.type===b.grid.rowType.emptyDataRow;var g=o.cell(l);this._renderCell(n,l,g.html,m,j[l],g.attr(),g.style())}};f.prototype._cellRendered=function(l,k,i,h,g,j){this._wijgrid.cellStyleFormatter.format(k,i,h,l,b.grid.renderState.rendering,g,j);this._changeCellRenderState(k,b.grid.renderState.rendering,false);this._wijgrid._onViewCellRendered(l,k,i,h)};f.prototype._rowRendered=function(i,g,h){this._wijgrid.rowStyleFormatter.format(i,g,h);i.state&=~b.grid.renderState.rendering;this._setRowInfo(i.$rows,i);this._wijgrid._onViewRowRendered(i)};f.prototype._isBodyRow=function(i){var g=b.grid.rowType,h=i.type;return((h&g.data)||(h===g.groupHeader)||(h===g.groupFooter)||(h===g.emptyDataRow))};f.prototype._changeRowRenderState=function(h,g,i){if(i){h.state|=g}else{h.state&=~g}this._setRowInfo(h.$rows,h)};f.prototype._changeCellRenderState=function(l,h,k){var j=b.grid.dataPrefix,g=this._wijgrid._data$prefix,i=j(l,g,"renderState");if(k){h=i|h;j(l,g,"renderState",h)}else{h=i&~h;j(l,g,"renderState",h)}return h};f.prototype._adjustWidthArray=function(i,q,o,k){var r=this._sumWidthArray(i),j=this._sumWidthArray(q),p=[],m,n=0,h,g,l=true;if(r<=o){e.extend(true,p,i);if(r===o||k){return p}else{m=o-r}}else{e.extend(true,p,q);if(j>=o){return p}else{m=o-j}}e.each(p,function(s,t){if(!t.real){n++}});if(n!==0){h=Math.floor(m/n);g=m-h*n;e.each(p,function(s,t){if(!t.real){t.width+=h;if(l){t.width+=g;l=false}}})}return p};f.prototype._getColumnWidth=function(m){var u,n,o,q,k,r,t,p,s,h,l;n=this._wijgrid._field("visibleLeaves")[m];if(n._realWidth!==undefined){u={width:n._realWidth,real:true}}else{if(n.isRowHeader){u={width:this._rowHeaderSize,real:true}}else{var g=0;o=this.getJoinedTables(true,m);q=o[2];for(k=0;k<2;k++){r=o[k];if(r!==null){t=r.element().rows;if(l=t.length){for(h=l-1,s=null;h>=0;h--){if(t[h].cells.length===r.width()){s=t[h];break}}if(s){p=s.cells[q];g=Math.max(g,e(p).outerWidth())}}}}u={width:g,real:false}}}return u};f.prototype._setColumnWidth=function(h,i){var j=this.getHeaderCell(h),l=this.getJoinedCols(h),k;if(i){var g=this;if(j){k=i-this._sizesAdjCache.th;if(k<0){k=0}j.style.width=k+"px"}e.each(l,function(n,m){if(m){k=i-g._sizesAdjCache.col;if(k<0){k=0}m.style.width=k+"px"}})}};f.prototype._setTableWidth=function(i,g,m,j){var l,k,h=this;e.each(i,function(n,o){o[0].style.tableLayout="fixed";o[0].style.width=(g-h._sizesAdjCache.subTable)+"px"});l=i[0].outerWidth();k=l-g;if(k!==0){this._setColumnWidth(j,m-k)}};f.prototype._sumWidthArray=function(j,i,h){var g=0;e.each(j,function(k,l){if(i!==undefined&&h!==undefined&&(k<i||k>h)){return true}g+=l.width});return g};f.prototype._clearBody=function(){e.each(this.subTables(),function(g,h){h.clearSection(2)})};f.prototype._rebuildOffsets=function(){e.each(this.subTables(),function(g,h){h.rebuildOffsets()})};f.prototype._removeBodyRow=function(l,k){var j=b.grid.rowType,p=this._wijgrid._rows(),m,n,h,g,o;if((l>=0)&&(l<(n=p.length()))){h=this._getRowInfo(p.item(l),false);g=this.getAbsoluteRowIndex(h.$rows[0]);h.$rows.remove();o=this.getJoinedTables(false,g);if(o[0]){o[0].removeOffset(o[2])}if(o[1]){o[1].removeOffset(o[2])}}};f.prototype._insertBodyRow=function(l,m,h,r){var q=this._wijgrid._field("visibleLeaves"),k=b.grid.rowType,p=this._wijgrid._view(),s=this._wijgrid._rows(),n=s.length(),j=l.isDataRow(),i,g,o;if(m<0||m>=n||(!m&&m!==0)){m=n}i=this._insertEmptyRow(l.rowType,m,-1,h,r,(l).groupByValue);this._renderRow(i,q,l);g=this.getAbsoluteRowIndex(i.$rows[0]);o=this.getJoinedTables(false,g);if(o[0]){o[0].insertOffset(g)}if(o[1]){o[1].insertOffset(g)}return i};f.prototype._findRowInfo=function(l){var h=this.bodyRows(),j=0,g=h.length(),k;if(e.isFunction(l)){for(j=0;j<g;j++){k=this._getRowInfo(h.item(j));if(l(k)===true){return k}}}return null};f.prototype._setRowInfo=function(l,k){var h="$rows" in k,g="data" in k,j,i;if(h){j=k.$rows;delete k.$rows}if(g){i=k.data;delete k.data}b.grid.dataPrefix(l,this._wijgrid._data$prefix,"rowInfo",k);if(h){k.$rows=j}if(g){k.data=i}};f.prototype._getRowInfo=function(i,g){if(typeof g==="undefined"){g=true}var l=this._wijgrid,h=i[1]?e(i):e(i[0]),m=b.grid.dataPrefix(h,l._data$prefix,"rowInfo"),k;m.$rows=h;if(g&&(m.dataItemIndex>=0)&&(m.type&b.grid.rowType.data)){try{m.data=l._getDataItem(m.dataItemIndex)}catch(j){m.data=null}}return m};f.prototype._getRowInfoBySketchRowIndex=function(j,g){if(typeof g==="undefined"){g=true}var k=this._isRowRendered(j);if(k>=0){var h=this.bodyRows().item(k);if(h){return this._getRowInfo(h,g)}}else{var m=this._wijgrid.sketchTable.row(j),l=m.getRowInfo();if(g&&(l.dataItemIndex>=0)&&m.isDataRow()){try{l.data=this._wijgrid._getDataItem(l.dataItemIndex)}catch(i){l.data=null}}return l}return null};f.prototype._createRowInfo=function(p,m,i,k,j,g,n,o){var l,h={type:m,state:i,sectionRowIndex:k,dataRowIndex:j,dataItemIndex:g,virtualDataItemIndex:n,$rows:p?e(p):null};if(o!==undefined){h.groupByValue=o}if((g>=0)&&(m&b.grid.rowType.data)){h.data=this._wijgrid._getDataItem(g)}return h};f.prototype._isRowRendered=function(h){var g=this._wijgrid._renderableBoundsCollection().getRenderedIndex(h);if(g>=0){if(g>=this._bounds.start&&g<=this._bounds.end){return g-this._bounds.start}}return -1};return f})();d.baseView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(f){__extends(g,f);function g(h,i){f.call(this,h,i);this._dataTable=null;this._contentArea=null}g.prototype.ensureWidth=function(k,l,j){var i=e(this._dataTable.element()),h=i.width()+l-j;f.prototype.ensureWidth.call(this,k,l,j);this._setTableWidth([i],h,l,k)};g.prototype.getVisibleAreaBounds=function(h){var i=b.grid.bounds(this._dataTable.element(),h);return i};g.prototype.getVisibleContentAreaBounds=function(){return this.getVisibleAreaBounds()};g.prototype.updateSplits=function(j){var t=this,n=this._wijgrid,i=n.options,l=n.element,h=[],q=[],k=[],p=n._field("visibleLeaves"),s=n.outerDiv,u,m;l.css({"table-layout":"",width:"auto"});e.each(p,function(x,v){var y,o=v.width;if(o||(o===0)){y=((typeof(o)==="string")&&(o.length>1)&&(o[o.length-1]==="%"));if(y){o=s.width()*parseFloat(o)/100}else{o=parseFloat(o)}if(v.ensurePxWidth||(v.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)){v._realWidth=o}t._setColumnWidth(x,o)}});e.each(p,function(v,o){h.push(t._getColumnWidth(v))});l.css("width","1px");e.each(p,function(v,o){q.push(t._getColumnWidth(v))});u=s.width();k=this._adjustWidthArray(h,q,u,i.ensureColumnsPxWidth);e.each(k,function(v,w){var o=p[v];if(o._realWidth!==undefined){delete o._realWidth;return}t._setColumnWidth(v,w.width)});l.css("table-layout","fixed");m=k.length-1;if(m!==-1){var r=s.width()-u;k[m].width+=r;this._setTableWidth([l],this._sumWidthArray(k,0,m),k[m].width,m)}};g.prototype.focusableElement=function(){return e(this._dataTable.element())};g.prototype.forEachColumnCell=function(h,j,i){return this._dataTable.forEachColumnCell(h,j,i)};g.prototype.forEachRowCell=function(j,i,h){return this._dataTable.forEachRowCell(j,i,h)};g.prototype.getAbsoluteCellInfo=function(i,h){return new b.grid.cellInfo(this.getColumnIndex(i),(i.parentNode).rowIndex,this._wijgrid,true,h)};g.prototype.getAbsoluteRowIndex=function(h){return h.rowIndex};g.prototype.getCell=function(k,j){var i=this._dataTable.getCellIdx(k,j),h;if(i>=0){h=this.getJoinedRows(j,0);if(h[0]){return h[0].cells[i]}}return null};g.prototype.getColumnIndex=function(h){return this._dataTable.getColumnIdx(h)};g.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};g.prototype.getJoinedCols=function(h){var i=e(this._dataTable.element()).find("> colgroup");if(i.length){if(h<i[0].childNodes.length){return[i[0].childNodes[h],null]}}return[null,null]};g.prototype.getJoinedRows=function(i,h){return[this._dataTable.getSectionRow(i,h),null]};g.prototype.getJoinedTables=function(h,i){return[this._dataTable,null,i]};g.prototype.subTables=function(){return[this._dataTable]};g.prototype._preRender=function(){f.prototype._preRender.call(this);this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0],true,true,true)};g.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content);this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0]);this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"});this._wijgrid.element.css("border-collapse","separate");f.prototype._postRender.call(this)};g.prototype._insertRow=function(l,i,j){var h=b.grid.rowType,k;switch(l){case h.header:case h.filter:k=this._dataTable.ensureTHead();break;case h.footer:k=this._dataTable.ensureTFoot();break;default:k=this._dataTable.ensureTBody()}if(j){return[k.appendChild(j)]}else{if(i>k.rows.length){i=-1}return[k.insertRow(i)]}};g.prototype._rowRendered=function(k,h,i){var j=k.$rows[0];if(!j.cells.length&&this._isBodyRow(k)){j.parentNode.removeChild(j)}else{f.prototype._rowRendered.call(this,k,h,i)}};g.prototype._appendCell=function(j,h,i){j.$rows[0].appendChild(i[0])};g.prototype._createCol=function(i,h){return[document.createElement("col")]};g.prototype._appendCol=function(j,i,h){this._dataTable.appendCol(j[0])};return g})(c.baseView);c.flatView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(g){__extends(f,g);function f(h,i){g.call(this,h,i);this._verScrollBarSize=18;this._viewTables={};this._splitAreas={};this._rowHeight=f.defaultRowHeight;this.element=h.element;this._staticDataRowIndex=h._getStaticIndex(true);this._staticRowIndex=h._getRealStaticRowIndex();this._staticColumnIndex=h._getRealStaticColumnIndex();this._staticAllColumnIndex=(this._staticColumnIndex===-1)?-1:h._field("visibleLeaves")[this._staticColumnIndex].leavesIdx;this._mouseWheelHandler=e.proxy(this._onMouseWheel,this)}f.defaultRowHeight=19;f.prototype.dispose=function(){g.prototype.dispose.call(this);this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)};f.prototype.ensureWidth=function(s,x,i){var q=this._wijgrid,k=q.options,l=this._staticColumnIndex,v=s<=l,r=e(this._viewTables.nw.element()),m=e(this._viewTables.ne.element()),w=e(this._viewTables.sw.element()),t=e(this._viewTables.se.element()),h=v?[r,w]:[m,t],p=(v?r.width():m.width())+x-i,j=this.getScrollValue();this._destroySuperPanel();g.prototype.ensureWidth.call(this,s,x,i);this._setTableWidth(h,p,x,s);try{if(l>=0){k.splitDistanceX=r[0].offsetWidth}else{k.splitDistanceX=0}}catch(u){}this._updateSplitAreaBounds(0);this._adjustRowsHeights();try{if(this._staticRowIndex>=0){k.splitDistanceY=Math.max(r[0].offsetHeight,m[0].offsetHeight)}else{k.splitDistanceY=0}}catch(u){}this._updateSplitAreaBounds(1);this.refreshPanel(j);var n=q._UIFrozener();if(n){n.refresh()}};f.prototype.ensureHeight=function(r){var l,m=this._wijgrid,i=m.options,n=e(this._viewTables.nw.element()),j=e(this._viewTables.ne.element()),s=e(this._viewTables.sw.element()),p=e(this._viewTables.se.element()),h=this.getScrollValue(),t;this._destroySuperPanel();if(arguments.length>0){l=this.getJoinedRows(r,2);this._setRowHeight(l,this._getRowHeight(l))}p.css("height","");s.css("height","");t=Math.max(p.height(),s.height());p.height(t);s.height(t);try{if(this._staticRowIndex>=0){i.splitDistanceY=Math.max(n[0].offsetHeight,j[0].offsetHeight)}else{i.splitDistanceY=0}}catch(q){}this._updateSplitAreaBounds(1);this.refreshPanel(h);var k=m._UIFrozener();if(k){k.refresh()}};f.prototype.getScrollValue=function(){var h=this._getSuperPanel();return h?{x:h.options.hScroller.scrollValue,y:h.options.vScroller.scrollValue}:null};f.prototype.getPanelContentWrapper=function(){return this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first")};f.prototype.getVisibleAreaBounds=function(h){var i=b.grid.bounds(this.getPanelContentWrapper(),h);if(!i){i=b.grid.bounds(this._wijgrid.outerDiv,h)}return i};f.prototype.getVisibleContentAreaBounds=function(){var k=this.getVisibleAreaBounds(),j=b.grid.bounds(this._viewTables.nw.element())||{},i=b.grid.bounds(this._viewTables.ne.element())||{},m=b.grid.bounds(this._viewTables.sw.element())||{},l=b.grid.bounds(this._viewTables.se.element())||{},h={top:k.top,left:k.left,width:Math.max(j.width+i.width,m.width+l.width),height:Math.max(j.height+m.height,i.height+l.height)};h.width=Math.min(k.width,h.width);h.height=Math.min(k.height,h.height);return h};f.prototype.getRowAreaHeight=function(){var i=this.getPanelContentWrapper();if(i.length==0){i=this._wijgrid.outerDiv}var h=i.height();var l=this._wijgrid.options.splitDistanceY;if(l){h-=l}if(this._wijgrid.options.showFooter){var k,j=(this.isRendered()&&(k=this.footerRow()))?e(k).height():f.defaultRowHeight;h-=j}return h};f.prototype.getVirtualPageSize=function(){return Math.ceil(this.getRowAreaHeight()/this._rowHeight)};f.prototype.getFixedAreaVisibleBounds=function(){var k=this.getVisibleAreaBounds(),j=b.grid.bounds(this._splitAreas.ne),h=b.grid.bounds(this._splitAreas.nw),i=null,l=null;if(j.height||h.height){i={left:k.left,top:k.top,width:k.width,height:Math.min(j.height||h.height,k.height)}}if(h.width){l={left:h.left,top:k.top,width:Math.min(h.width,k.width),height:k.height}}return[i,l]};f.prototype.refreshPanel=function(j){var r=this,n=this._wijgrid,s=n.options,p=this._getGridWidth(s.scrollMode),i=this._getMappedScrollMode(),m=this._testNeedVBar(n.outerDiv,n.element,e(this._viewTables.ne.element()),s.scrollMode,n._autoHeight),q=m&&!l,o=j?j.x:null,h=j?j.y:null,l=(e.support.isTouchEnabled&&e.support.isTouchEnabled()),k=n._rows().item(0);this._rowHeight=k&&k[0]?e(k[0]).outerHeight():f.defaultRowHeight;this._splitAreas.ne.width(p-s.splitDistanceX-(q?this._verScrollBarSize:0));if(s.staticColumnsAlignment==="right"){this._splitAreas.nw.css({left:"",right:q?this._verScrollBarSize:0});this._splitAreas.sw.css({left:"",right:q?this._verScrollBarSize:0})}if(!this._scroller.data("wijmo-wijsuperpanel")){if(this._wijgrid._allowVirtualScrolling()){this.vsUI=new b.grid.uiVirtualScroller(n,this._splitAreas.se,s.splitDistanceY,this._rowHeight)}this._scroller.wijsuperpanel({disabled:n.options.disabled,scroll:e.proxy(this._onScroll,this),bubbleScrollingEvent:true,customScrolling:this._wijgrid._allowVirtualScrolling(),vScroller:{scrollBarVisibility:i.vScrollBarVisibility,scrollValue:j?j.y:null},hScroller:{scrollBarVisibility:i.hScrollBarVisibility,scrollValue:j?j.x:null},hScrollerActivating:function(v,t){var u;if(n._autoHeight){u=n.element.height()+s.splitDistanceY-t.contentLength;if(u>0){r._scroller.height(r._scroller.height()+u);r._scroller.wijsuperpanel("paintPanel");return false}}r._splitAreas.sw.height(t.contentLength-s.splitDistanceY)}});if(this._wijgrid._allowVirtualScrolling()){this.vsUI.attach(this._scroller)}}else{this._scroller.wijsuperpanel("paintPanel")}this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5);if(this._wijgrid._allowVirtualScrolling()){this._wijgrid._handleVirtualScrolling(this._bounds.start)}};f.prototype.scrollTo=function(x){if(!x.tableCell()){return}var j=this._wijgrid,z=j.options,t=this._getSuperPanel(),k=x.tableCell(),h=k.nodeType?e(k):k,n=null,s=null;if(t&&h.is(":visible")){var m=(t).getContentElement(),B=m.parent(),p=parseInt((m.css("left")+"").replace("px",""),10)*-1,r=parseInt((m.css("top")+"").replace("px",""),10)*-1,C=B.outerWidth()-z.splitDistanceX,v=B.outerHeight()-z.splitDistanceY,u=h.position(),A=u.left,i=u.top,D=h.outerWidth(),w=h.outerHeight(),l=j._getStaticIndex(true),y=j._getStaticIndex(false),E=x.rowIndex(),q=x.cellIndex();if(E<=l){if(q<=y){n=0;s=0}else{A+=p;if(A+D>p+C){p=n=A+D-C}if(A<p){n=A}s=0}}else{if(q<=y){i+=this._splitAreas.sw.scrollTop();if(i+w>r+v){r=s=i+w-v}if(i<r){s=i}n=0}else{A-=z.splitDistanceX;if(i+w>r+v){r=s=i+w-v}if(A+D>p+C){p=n=A+D-C}if(i<r){s=i}if(A<p){n=A}}}if(n!==null){(t).hScrollTo(n)}if(s!==null){if(this._wijgrid._allowVirtualScrolling()){}else{(t).vScrollTo(s)}}}};f.prototype.updateSplits=function(t){var j=this._wijgrid,y=j.options,m,w=this,r=[],p=[],q=[],x=this._staticColumnIndex,v,u=y.scrollMode,k=j._field("visibleLeaves"),h=e(this._viewTables.se.element()),n=e(this._viewTables.ne.element()),z=e(this._viewTables.sw.element()),D=e(this._viewTables.nw.element()),l=j.outerDiv,C,A,s;this._destroySuperPanel();l.unbind("mousewheel",this._mouseWheelHandler);if((C=w._viewTables.se.element().tBodies)&&(C=C[0])){s=false;for(A=0;A<C.rows.length;A++){if(!e(C.rows[A]).hasClass("wijmo-wijgrid-groupheaderrow")){s=true;break}}if(!s){j.element.css("width","100%")}}e.each([h,n,z,D],function(i,o){o.css({"table-layout":"",width:""})});e.each(k,function(E,o){var F,i=o.width;if(i||(i===0)){F=((typeof(i)==="string")&&(i.length>1)&&(i[i.length-1]==="%"));if(F){i=l.width()*parseFloat(i)/100}else{i=parseFloat(i)}if(o.ensurePxWidth||(o.ensurePxWidth===undefined&&y.ensureColumnsPxWidth)){o._realWidth=i}w._setColumnWidth(E,i)}});e.each(k,function(o,i){q.push(w._getColumnWidth(o))});e.each([D,n,z,h],function(i,o){o.css({width:"1px"})});e.each(k,function(o,i){p.push(w._getColumnWidth(o))});m=l.width();r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(o,E){var i=k[o];if(i._realWidth!==undefined){delete i._realWidth;return}w._setColumnWidth(o,E.width)});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);if(!y.ensureColumnsPxWidth){n.parent().width(m-y.splitDistanceX)}v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1);if(!y.ensureColumnsPxWidth){if(this._testNeedVBar(j.outerDiv,h,n,u,j._autoHeight)){m-=this._verScrollBarSize;r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(i,o){if(!o.real){w._setColumnWidth(i,o.width)}});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);n.parent().width(m-y.splitDistanceX);v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1)}}this.refreshPanel(t);l.bind("mousewheel",e.proxy(this._mouseWheelHandler,this))};f.prototype._clearBody=function(){g.prototype._clearBody.call(this)};f.prototype.bodyRows=function(){var h=g.prototype.bodyRows.call(this);return h};f.prototype.focusableElement=function(){return this._wijgrid.outerDiv};f.prototype.forEachColumnCell=function(j,m,l){var k=this.getJoinedTables(true,j),i,h;if(k[0]!==null){i=k[2];h=k[0].forEachColumnCell(i,m,l);if(h!==true){return h}if(k[1]!==null){h=k[1].forEachColumnCell(i,m,l);if(h!==true){return h}}}return true};f.prototype.forEachRowCell=function(o,n,m){var l=this.getJoinedTables(false,o),k=l[0],j=l[1],h,i;if(k!==null){h=l[2];if(h<k.element().rows.length){i=k.forEachRowCell(h,n,m);if(i!==true){return i}}if((j!==null)&&(h<j.element().rows.length)){i=j.forEachRowCell(h,n,m);if(i!==true){return i}}}return true};f.prototype.getAbsoluteCellInfo=function(i,h){return new b.grid.cellInfo(this.getColumnIndex(i),this.getAbsoluteRowIndex(i.parentNode),this._wijgrid,true,h)};f.prototype.getAbsoluteRowIndex=function(i){var h=i.rowIndex,j=i.parentNode;while(j&&j.tagName&&j.tagName.toLowerCase()!=="table"){j=j.parentNode}return(j===this._viewTables.nw.element()||j===this._viewTables.ne.element())?h:h+this._staticRowIndex+1};f.prototype.getCell=function(o,m){var h=this.getJoinedTables(false,m),l,k,n,j,i;if(h[0]!==null){l=this.getJoinedTables(true,o);if(l[0]!==null){k=h[2];n=l[2];j=null;if(h[1]!==null){j=(o===n)?h[0]:h[1]}else{j=h[0]}i=j.getCellIdx(n,k);if(i>=0){return j.element().rows[k].cells[i]}}}return null};f.prototype.getColumnIndex=function(l){var h=null,j=null,i=false,k;for(h=l.parentNode;h.tagName.toLowerCase()!=="table";h=h.parentNode){}if(h!==null){if(h===this._viewTables.nw.element()){j=this._viewTables.nw}else{if(h===this._viewTables.ne.element()){j=this._viewTables.ne;i=true}else{if(h===this._viewTables.sw.element()){j=this._viewTables.sw}else{if(h===this._viewTables.se.element()){j=this._viewTables.se;i=true}}}}if(j!==null){k=j.getColumnIdx(l);if(i){k+=this._staticColumnIndex+1}return k}}return -1};f.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};f.prototype.getJoinedCols=function(j){var h=[],k=this.getJoinedTables(true,j),i=k[2];k.splice(k.length-1,1);e.each(k,function(l,m){h.push(m?e(m.element()).find("col")[i]:null)});return h};f.prototype.getJoinedRows=function(o,j){var u=null,t=null,s=null,q=null,p=this._staticRowIndex,h=this._staticColumnIndex,i=this._wijgrid._field("visibleLeaves").length-1,r=this._rowsCountRaw()-1,l=(p===r),n=(p<0),k=!l&&!n,m=0;if(l||k){if(h>=0&&h<i){s=this._viewTables.nw;q=this._viewTables.ne}else{s=(h<0)?this._viewTables.ne:this._viewTables.nw}m=s.getSectionLength(j);if(o<m){u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}}if(n||(k&&(u===null))){if(!n){o-=m}if(h>=0&&h<i){s=this._viewTables.sw;q=this._viewTables.se}else{s=(h<0)?this._viewTables.se:this._viewTables.sw}u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}return(u===null&&t===null)?null:[u,t]};f.prototype.getJoinedTables=function(i,k){var n=null,m=null,h=k,l=this._wijgrid,o=this._staticRowIndex,j=this._staticColumnIndex;if(i){if(k<=j){n=this._viewTables.nw;m=this._viewTables.sw}else{n=this._viewTables.ne;m=this._viewTables.se;h=h-(j+1)}if(o<0){n=null}if(o===this._rowsCountRaw()-1){m=null}}else{if(k<=o){n=this._viewTables.nw;m=this._viewTables.ne}else{n=this._viewTables.sw;m=this._viewTables.se;h=h-(o+1)}if(j<0){n=null}if(j===l._field("leaves").length-1){m=null}}if(n===null){n=m;m=null}return[n,m,h]};f.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]};f.prototype._getGridWidth=function(k){var j=this._wijgrid,i=j.element.outerWidth(true)+j.options.splitDistanceX,h=j.outerDiv.innerWidth();if(this._testNeedVBar(j.outerDiv,j.element,e(this._viewTables.ne.element()),k,j._autoHeight)){i+=this._verScrollBarSize}if(i>h){i=h}return i};f.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null};f.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){this._wijgrid._ensureRenderableBounds(this._bounds);this._bounds.end=this._bounds.start+this.getVirtualPageSize()-1;if(this._wijgrid._serverSideVirtualScrolling()){var h=(this._bounds.end-this._bounds.start+1)-this._wijgrid.sketchTable.count();if(h>0){this._bounds.end-=h}}this._wijgrid._ensureRenderableBounds(this._bounds)}else{g.prototype._ensureRenderBounds.call(this)}};f.prototype._renderContent=function(){g.prototype._renderContent.call(this)};f.prototype._preRender=function(){g.prototype._preRender.call(this);var i=document.createDocumentFragment(),h=b.grid.htmlTableAccessor;this._wijgrid.outerDiv.wrapInner('<div class="wijmo-wijgrid-fixedview"><div class="wijmo-wijgrid-scroller"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>');this._scroller=this._wijgrid.outerDiv.find(".wijmo-wijgrid-scroller");this._scroller.css("padding",0);this._scroller.after(this._splitAreas.nw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.ne=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.sw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first");this._viewTables={nw:new h(i.appendChild(document.createElement("table")),true,true,true),ne:new h(i.appendChild(document.createElement("table")),true,true,true),sw:new h(i.appendChild(document.createElement("table")),true,true,true),se:new h(i.appendChild(this._wijgrid.element[0]),true,true,true)}};f.prototype._postRender=function(){var j,h,m,l,i=b.grid.htmlTableAccessor,k=this;this._viewTables={nw:new i(j=this._viewTables.nw.element()),ne:new i(h=this._viewTables.ne.element()),sw:new i(m=this._viewTables.sw.element()),se:new i(l=this._viewTables.se.element())};this._splitAreas.nw.empty().append(j);this._splitAreas.ne.empty().append(h);this._splitAreas.sw.empty().append(m);this._splitAreas.se.empty().append(l);e.each(this._viewTables,function(n,p){var o=e(p.element());k._wijgrid._setAttr(o,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"});o.addClass("wijmo-wijgrid-table").css("border-collapse","separate").find("> tbody").addClass(k._wijgrid.options.wijCSS.content)});g.prototype._postRender.call(this)};f.prototype._rowsCountRaw=function(){var i=this._viewTables.nw.element(),h=this._viewTables.ne.element(),k=this._viewTables.sw.element(),j=this._viewTables.se.element(),l;l=Math.max(i.rows.length,h.rows.length)+Math.max(k.rows.length,j.rows.length);return l};f.prototype._createCol=function(i,h){return[document.createElement("col"),document.createElement("col")]};f.prototype._appendCol=function(j,i,h){if(h<=this._staticColumnIndex){this._viewTables.nw.appendCol(j[0]);this._viewTables.sw.appendCol(j[1])}else{this._viewTables.ne.appendCol(j[0]);this._viewTables.se.appendCol(j[1])}};f.prototype._insertRow=function(m,i,k){var h=b.grid.rowType,l,j,n=this._viewTables;switch(m){case h.header:case h.filter:l=n.nw.ensureTHead();j=n.ne.ensureTHead();break;case h.footer:l=n.sw.ensureTFoot();j=n.se.ensureTFoot();break;default:if(i<=this._staticDataRowIndex){l=n.nw.ensureTBody();j=n.ne.ensureTBody()}else{i-=this._staticDataRowIndex+1;l=n.sw.ensureTBody();j=n.se.ensureTBody()}}if(k){return[l.appendChild(k),j.appendChild(k.cloneNode(false))]}else{return[l.insertRow(i>l.rows.length?-1:i),j.insertRow(i>j.rows.length?-1:i)]}};f.prototype._rowRendered=function(l,h,i){var j=l.$rows[0],k=l.$rows[1];if(!j.cells.length&&this._isBodyRow(l)){j.parentNode.removeChild(j);j=null}if(!k.cells.length&&this._isBodyRow(l)){k.parentNode.removeChild(k);k=null}if(j||k){if(!j||!k){l.$rows=j?e(j):e(k)}g.prototype._rowRendered.call(this,l,h,i)}};f.prototype._appendCell=function(k,h,j){var i=(k.type!==b.grid.rowType.header)?this._staticColumnIndex:this._staticAllColumnIndex;if(h<=i){k.$rows[0].appendChild(j[0])}else{k.$rows[1].appendChild(j[0])}};f.prototype._getRowHeight=function(n,h){if(n[0]&&n[1]){var q=n[0],k=n[1],m=e(q),i=e(k),p,j,o,l=function(r){var t,s=r[0],u;for(t=0;t<s.cells.length;t++){u=s.cells[t];if(!u.rowSpan||u.rowSpan===1){return e(u).outerHeight()}}return r.height()};if(o=e.data(q,"customHeight")){p=j=parseInt(o)}else{m.css("height","");i.css("height","");if(h){p=l(m);j=l(i)}else{p=m.height();j=i.height()}}return Math.max(p,j)}return null};f.prototype._setRowHeight=function(h,k){if(h[0]&&h[1]){var j=[e(h[0]),e(h[1])],i;if(k===null){return}k+=1;e.each(j,function(l,m){m.height(k);i=k-m.height();if(i){m.height(k+i)}})}};f.prototype._adjustRowHeight=function(){var k=this._wijgrid,B=this._staticColumnIndex,A=k._field("visibleLeaves").length-1,p,o,q,C,n,t,x,u,m,l,w,s,z,y,v,h,r=[];if(B>-1&&B<A){p=this._staticRowIndex;o=this._rowsCountRaw()-1;q=this._viewTables;if(p>-1&&p<=o){C=q.ne.element();n=C.parentNode;t=q.nw.element();x=t.parentNode;v=t.rows;h=C.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]],true))}}if(p>=-1&&p<o){u=q.se.element();m=u.parentNode;l=q.sw.element();w=l.parentNode;v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]]))}}if(p>-1&&p<=o){x.removeChild(t);n.removeChild(C)}if(p>=-1&&p<o){w.removeChild(l);m.removeChild(u)}if(p>-1&&p<=o){v=t.rows;h=C.rows;s=v.length;for(z=0,y=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>=-1&&p<o){v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>-1&&p<=o){x.appendChild(t);n.appendChild(C)}if(p>=-1&&p<o){w.appendChild(l);m.appendChild(u)}}};f.prototype._adjustRowsHeights=function(){var i=e(this._viewTables.sw.element()),j=e(this._viewTables.se.element()),h;j.css("height","");i.css("height","");this._adjustRowHeight();h=Math.max(j.height(),i.height());i.height(h);j.height(h)};f.prototype._destroySuperPanel=function(){if(this._scroller.data("wijmo-wijsuperpanel")){if(this.vsUI){this.vsUI.dispose()}this._scroller.wijsuperpanel("destroy")}};f.prototype._onScroll=function(h,j){var i=this._getSuperPanel();if(this._wijgrid._allowVirtualScrolling()){if(j.dir==="h"){this._setFixedAreaPosition((i).getContentElement(),j.dir,j.position,j.animationOptions,false);this._setFixedAreaPosition(this._splitAreas.ne,j.dir,j.position,j.animationOptions,true)}}else{this._setFixedAreaPosition(j.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,j.dir,j.position,j.animationOptions,true)}this._wijgrid._trackScrollingPosition(i.options.hScroller.scrollValue,i.options.vScroller.scrollValue)};f.prototype._onMouseWheel=function(l,m){var k,i=(m>0)?"top":"bottom",h=false,j;if(this._wijgrid._canInteract()){k=this.getFixedAreaVisibleBounds();e.each(k,function(n,p){if(p&&b.grid.isOver(l.pageY,l.pageX,p.top,p.left,p.height,p.width)){h=true;return false}});if(h&&this._scroller.data("wijmo-wijsuperpanel")){j=this._scroller.wijsuperpanel("option","vScroller").scrollValue;this._scroller.wijsuperpanel("doScrolling",i);if(j!==this._scroller.wijsuperpanel("option","vScroller").scrollValue){l.stopPropagation();l.preventDefault()}}}};f.prototype._setFixedAreaPosition=function(j,m,h,k,l){var n={},i;if(m==="h"){i=l?"scrollLeft":"left"}else{i=l?"scrollTop":"top"}if(!l){h=-h}if(k){n[i]=h;j.animate(n,k)}else{if(l){j[0][i]=h}else{j.css(i,h)}}};f.prototype._testNeedVBar=function(q,i,r,j,s){var o,k=this._wijgrid,l=r.width()+k.options.splitDistanceX,h=i.height()+k.options.splitDistanceY,u=q.width(),p=q.height(),n,t=0,m=0;if(this._wijgrid._allowVirtualScrolling()&&k._totalRowsCount()>1){return true}if(k.$superPanelHeader!==null){t=k.$superPanelHeader.outerHeight(true)}if(k.$bottomPagerDiv!==null){m=k.$bottomPagerDiv.outerHeight(true)}n=p-t-m;if(j==="both"||j==="vertical"){o=true}else{o=(j==="auto")&&((h>n)||(!s&&l>u&&h>n-this._verScrollBarSize))}return o};f.prototype._updateSplitAreaBounds=function(n){var h=this._wijgrid,m=h.options,l,j,i=0,k=0;if(n===0||n===2){this._splitAreas.nw.width(m.splitDistanceX);this._splitAreas.sw.width(m.splitDistanceX);if(h.options.staticColumnsAlignment==="right"){this._splitAreas.se.css("marginRight",m.splitDistanceX);this._splitAreas.ne.css("marginRight",m.splitDistanceX)}else{this._splitAreas.se.css("marginLeft",m.splitDistanceX);this._splitAreas.ne.css("marginLeft",m.splitDistanceX)}}if(n===1||n===2){this._scroller.css("height","");this._splitAreas.se.css("marginTop",0);l=h.outerDiv.height();if(!h._autoHeight){this._scroller.height(l)}else{this._scroller.height(l+m.splitDistanceY)}this._splitAreas.nw.height(m.splitDistanceY);this._splitAreas.ne.height(m.splitDistanceY);if(h.$superPanelHeader!==null){i=h.$superPanelHeader.outerHeight(true)}if(h.$bottomPagerDiv!==null){k=h.$bottomPagerDiv.outerHeight(true)}j=l-i-k;if(h.$superPanelHeader!==null){this._splitAreas.nw.css("top",i+"px");this._splitAreas.ne.css("top",i+"px")}if(!h._autoHeight){this._splitAreas.sw.height(j-m.splitDistanceY)}else{this._splitAreas.sw.height(j)}this._splitAreas.sw.css("top",m.splitDistanceY+i);this._splitAreas.se.css("marginTop",m.splitDistanceY)}};return f})(d.baseView);d.fixedView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var f=jQuery;var d=(function(){function g(h){this._updates=0;this._selectedColumns=null;this._selectedRows=null;this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!h){throw"invalid arguments"}this._wijgrid=h;this._addedCells=new e(h);this._removedCells=new e(h);this._selectedCells=new e(h);this._addedDuringCurTransactionCells=new e(h)}g.prototype.selectedCells=function(){return this._selectedCells};g.prototype.addColumns=function(i,h){if(!h&&h!==0){h=i}this.addRange(i,0,h,16777215)};g.prototype.addRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._selectRange(h,false,true,b.grid.cellRangeExtendMode.none,null);this.endUpdate()};g.prototype.addRows=function(i,h){if(!h&&h!==0){h=i}this.addRange(0,i,16777215,h)};g.prototype.removeRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._clearRange(h,b.grid.cellRangeExtendMode.none);this.endUpdate()};g.prototype.removeColumns=function(i,h){if(!h&&h!==0){h=i}this.removeRange(i,0,h,16777215)};g.prototype.removeRows=function(i,h){if(!h&&h!==0){h=i}this.removeRange(0,i,16777215,h)};g.prototype.clear=function(){this.beginUpdate();this._removedCells._clear();this._removedCells._addFrom(this._selectedCells);this.endUpdate()};g.prototype.selectAll=function(){this.beginUpdate();this._selectRange(this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch),false,false,b.grid.cellRangeExtendMode.none,null);this.endUpdate()};g.prototype.beginUpdate=function(){this._updates++};g.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length()){if(this._selectedColumns!==null){this._selectedColumns.UnderlyingDataChanged()}if(this._selectedRows!==null){this._selectedRows.UnderlyingDataChanged()}this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells})}this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._removedCells._clear()}}};g.prototype._multipleRangesAllowed=function(){var h=this._wijgrid.options.selectionMode;return(h&&((h=h.toLowerCase())==="multicolumn"||h==="multirow"||h==="multirange"))};g.prototype._anchorCell=function(){return this.__anchorCell};g.prototype._startNewTransaction=function(h){if(h){this.__anchorCell=h._clone();this._addedDuringCurTransactionCells=new b.grid.cellInfoOrderedCollection(this._wijgrid)}};g.prototype._clearRange=function(o,m){var t=this._wijgrid.options.selectionMode.toLowerCase(),h,j,l,q,u,s,n,p,k,r=this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch);if(o._isValid()&&(t!=="none")&&(this._selectedCells.length()>0)){h=o._clone();h._normalize();h._clip(r);if(!o._isValid()){return}h._extend(this._extend_rules[t][m],r);this.beginUpdate();for(n=0,p=this._selectedCells.length();n<p;n++){k=this._selectedCells.item(n);if(h._containsCellInfo(k)){this._removedCells._add(k)}}this.endUpdate()}};g.prototype._selectRange=function(i,o,m,l,k){var n=this._wijgrid.options.selectionMode.toLowerCase(),h,j=this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch);if((n!=="none")&&i._isValid()){h=i._clone();h._normalize();h._clip(j);if(!h._isValid()){return}this.beginUpdate();if(!this._multipleRangesAllowed()){this.clear()}else{if(o||m){if(m){this._removedCells._clear();this._removedCells._addFrom(this._addedDuringCurTransactionCells)}}else{this.clear()}}switch(n){case"singlecell":case"singlecolumn":case"singlerow":h=(k===null)?new b.grid.cellInfoRange(h.topLeft(),h.topLeft()):new b.grid.cellInfoRange(k,k);break}h._extend(this._extend_rules[n][l],j);this.doRange(h,true);this.endUpdate()}};g.prototype._ensureSelection=function(){var h=this._wijgrid._view(),l=-2,m;for(var k=0;k<this._selectedCells.length();k++){var j=this._selectedCells.item(k);if(j._isRendered()){if(l!==j.rowIndex()){m=j.row();l=j.rowIndex()}this.selectCell(j,m,h,true)}}};g.prototype.doSelection=function(){var r=this._wijgrid._view(),n,p,m,s,q,o,l=b.grid.renderState,j,h,k=-1;for(n=0,p=this._removedCells.length();n<p;n++){m=this._removedCells.item(n);if(this._addedCells.indexOf(m)<0){if(k!==m.rowIndex()){j=m.row();k=m.rowIndex()}this.selectCell(m,j,r,false);this._selectedCells._remove(m);this._addedDuringCurTransactionCells._remove(m)}else{this._removedCells._removeAt(n);n--;p--}}k=-1;for(n=0,p=this._addedCells.length();n<p;n++){m=this._addedCells.item(n);o=this._selectedCells.indexOf(m);if(o<0){if(k!==m.rowIndex()){j=m.row();k=m.rowIndex()}this.selectCell(m,j,r,true);this._selectedCells._insertUnsafe(m,~o);this._addedDuringCurTransactionCells._add(m)}else{this._addedCells._removeAt(n);n--;p--}}};g.prototype.selectCell=function(k,o,j,i){if(k._isRendered()){var l=this._wijgrid._viewPortBounds();var h=j.getCell(k.cellIndexAbs(),k.rowIndexAbs());if(h){var n=f(h),m=j._changeCellRenderState(n,b.grid.renderState.selected,i===true);this._wijgrid.cellStyleFormatter.format(n,k.cellIndex(),k.column(),o,m)}}};g.prototype.doRange=function(m,s){var j=m.topLeft().cellIndex(),p=m.topLeft().rowIndex(),i=m.bottomRight().cellIndex(),o=m.bottomRight().rowIndex(),l,u,k,q,n=this._wijgrid._view(),h,t,r=this._wijgrid._viewPortBounds();if(s){l=this._addedCells.length();t=this._wijgrid._rows();for(u=p;u<=o;u++){h=n._getRowInfoBySketchRowIndex(u);if(h.type&b.grid.rowType.data){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,u);if(l===0){this._addedCells._appendUnsafe(q)}else{this._addedCells._add(q)}}}}}else{l=this._removedCells.length();for(u=p;u<=o;u++){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,u);if(l===0){this._removedCells._appendUnsafe(q)}else{this._removedCells._add(q)}}}}};return g})();c.selection=d;var e=(function(){function g(h){this._clear=function(){this._list.length=0};if(!h){throw"invalid arguments"}this._wijgrid=h;this._list=[]}g.prototype.item=function(h){return this._list[h]};g.prototype.length=function(){return this._list.length};g.prototype.indexOf=function(i,n){if(arguments.length===1){n=i.rowIndex();i=i.cellIndex()}var j=0,h=this._list.length-1,l,m,k;while(j<=h){l=j+((h-j)>>1);m=this._list[l];k=m.rowIndex()-n;if(k===0){k=m.cellIndex()-i}if(k<0){j=l+1}else{if(k>0){h=l-1}else{return l}}}return ~j};g.prototype.toString=function(){var k="",j,h;for(j=0,h=this._list.length;j<h;j++){k+=this._list[j].toString()+"\n"}return k};g.prototype._add=function(i){var h=this.indexOf(i);if(h<0){this._list.splice(~h,0,i);i._setGridView(this._wijgrid);return true}return false};g.prototype._addFrom=function(j){if(j){var l=j.length(),h=this._list.length,k;if(h===0){this._list.length=l;for(k=0;k<l;k++){this._list[k]=j.item(k);this._list[k]._setGridView(this._wijgrid)}}else{for(k=0;k<l;k++){this._add(j.item(k))}}}};g.prototype._appendUnsafe=function(h){this._list[this._list.length]=h;h._setGridView(this._wijgrid)};g.prototype._insertUnsafe=function(i,h){this._list.splice(h,0,i)};g.prototype._remove=function(i){var h=this.indexOf(i);if(h>=0){this._list.splice(h,1);return true}return false};g.prototype._removeAt=function(h){this._list.splice(h,1)};g.prototype._getColumnsIndicies=function(){var m=[],h=this._list.length,j,l,k;if(h){j=[];for(l=0;l<h;l++){j[this._list[l].cellIndex()]=1}h=j.length;k=0;for(l=0;l<h;l++){if(j[l]){m[k++]=l}}}return m};g.prototype._getSelectedRowsIndicies=function(){var m=[],h=this._list.length,l,k,j;if(h){l=[];for(k=0;k<h;k++){l[this._list[k].rowIndex()]=1}h=l.length;j=0;for(k=0;k<h;k++){if(l[k]){m[j++]=k}}}return m};g.prototype._rectangulate=function(){var h=this._list.length,m=4294967295,o=4294967295,k=0,n=0,l,j;if(h){for(l=0;l<h;l++){j=this._list[l];m=Math.min(m,j.cellIndex());o=Math.min(o,j.rowIndex());k=Math.max(k,j.cellIndex());n=Math.max(n,j.rowIndex())}return new b.grid.cellInfoRange(new b.grid.cellInfo(m,o),new b.grid.cellInfo(k,n))}return null};return g})();c.cellInfoOrderedCollection=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){this._gap_to_start=10;this._inProgress=false;this._additionalEventsAttached=false;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui";this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._view=this._wijgrid._view();this._rootElement=this._view.focusableElement();this._visLeavesLen=this._wijgrid._field("visibleLeaves").length;this._rootElement.bind(this._eventKey("mousedown"),e.proxy(this._onGridMouseDown,this))}f.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown);this._detachAdditionalEvents()};f.prototype._onGridMouseDown=function(j){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none"){return}var k=this._view.getVisibleContentAreaBounds(),i={x:j.pageX,y:j.pageY},h=((j.target&&(j.target).tagName!==undefined)?(j.target).tagName.toLowerCase():undefined),g=e(j.target);if((!h||g.is("td.wijgridtd, th.wijgridtd, div.wijmo-wijgrid-innercell"))&&(i.x>k.left&&i.x<k.left+k.width)&&(i.y>k.top&&i.y<k.top+k.height)){this._attachAdditionalEvents();this._startPos=i;this._startCellInfo=this._coordToDataCellInfo(this._startPos)}};f.prototype._onDocumentMouseMove=function(h){if(!this._startCellInfo||!this._startCellInfo._isValid()){return}var u={x:h.pageX,y:h.pageY},z,q,w,m,r,v,p,g,x,y,o,n,j,k,t=this._wijgrid._view(),s=this._wijgrid._rows(),l=b.grid.renderState;if(!this._inProgress){this._inProgress=(Math.abs(this._startPos.x-u.x)>this._gap_to_start)||(Math.abs(this._startPos.y-u.y)>this._gap_to_start)}if(this._inProgress){z=this._coordToDataCellInfo(u);if(!z._isValid()){return}this._endCellInfo=z;w=new b.grid.cellInfoRange(this._startCellInfo,this._endCellInfo);w._normalize();w._clip(this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch));if(w._isValid()&&!w.isEqual(this._prevMouseMoveRange)){this._prevMouseMoveRange=w;m=new b.grid.cellInfoOrderedCollection(this._wijgrid);r=w.bottomRight().rowIndex();v=w.bottomRight().cellIndex();for(p=w.topLeft().rowIndex();p<=r;p++){n=t._getRowInfoBySketchRowIndex(p);if(n.type&b.grid.rowType.data){for(g=w.topLeft().cellIndex();g<=v;g++){m._appendUnsafe(new b.grid.cellInfo(g,p))}}}j=-1;for(x=0,y=this._addedCells.length();x<y;x++){q=this._addedCells.item(x);if(m.indexOf(q)<0){if(this._wijgrid.selection().selectedCells().indexOf(q)<0){g=this._view.getCell(q.cellIndexAbs(),q.rowIndexAbs());if(g){if(j!==q.rowIndex()){n=q.row();j=q.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,false);this._wijgrid.cellStyleFormatter.format(o,q.cellIndex(),q.column(),n,k)}}this._addedCells._removeAt(x);x--;y--}}j=-1;for(x=0,y=m.length();x<y;x++){q=m.item(x);if(this._addedCells.indexOf(q)<0&&this._wijgrid.selection().selectedCells().indexOf(q)<0){if(this._addedCells._add(q)){g=this._view.getCell(q.cellIndexAbs(),q.rowIndexAbs());if(g){if(j!==q.rowIndex()){n=q.row();j=q.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,true);this._wijgrid.cellStyleFormatter.format(o,q.cellIndex(),q.column(),n,k)}}}}}}};f.prototype._onDocumentMouseUp=function(o){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=false;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(o,this._endCellInfo,{changeSelection:false,setFocus:false});if(!o.shiftKey||(!this._wijgrid.selection()._multipleRangesAllowed()&&this._wijgrid.options.selectionMode.toLowerCase()!=="singleRange")){this._wijgrid.selection()._startNewTransaction(this._startCellInfo)}this._wijgrid.selection().beginUpdate();this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,o.shiftKey,o.ctrlKey,b.grid.cellRangeExtendMode.none,this._endCellInfo);this._wijgrid.selection().endUpdate();var q=this._wijgrid._view(),j=-1,h,k=b.grid.renderState;for(var m=0,n=this._addedCells.length();m<n;m++){var l=this._addedCells.item(m);if(this._wijgrid.selection().selectedCells().indexOf(l)<0){var r=q.getCell(l.cellIndexAbs(),l.rowIndexAbs());if(r!==null){if(j!==l.rowIndex()){h=l.row();j=l.rowIndex()}var p=e(r),g=q._changeCellRenderState(p,k.selected,false);this._wijgrid.cellStyleFormatter.format(p,l.cellIndex(),l.column(),h,g)}}}this._addedCells._clear();this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null;return false}}};f.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached){try{this._view.toggleDOMSelection(false);e(document).bind(this._eventKey("mousemove"),e.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),e.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=true}}};f.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached){try{this._view.toggleDOMSelection(true);e(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=false}}};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};f.prototype._coordToDataCellInfo=function(g){var k=0,o=this._visLeavesLen-1,n=0,h=-1,i,p=new b.grid.rowAccessor(this._view,2,0,0),j,m,l,q;while(k<=o){n=((o-k)>>1)+k;i=b.grid.bounds(this._view.getHeaderCell(n));if(!i){m=p.item(0);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,n))}if(!i){break}if(g.x<i.left){o=n-1}else{if(g.x>i.left+i.width){k=n+1}else{h=n;break}}}if(h===-1){return b.grid.cellInfo.outsideValue}p=new b.grid.rowAccessor(this._view,0,0,0);j=-1;k=0;o=p.length()-1;n=0;while(k<=o){n=((o-k)>>1)+k;m=p.item(n);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,0));if(g.y<i.top){o=n-1}else{if(g.y>i.top+i.height){k=n+1}else{j=n;break}}}if(j===-1){return b.grid.cellInfo.outsideValue}q=new b.grid.cellInfo(h,j,this._wijgrid,true);return q};return f})();c.uiSelection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function h(j,m,l,k){this._view=j;this._scope=m;this._offsetBottom=k;this._offsetTop=l}h.prototype.item=function(k){var j=this.length();return(k<j)?this._view.getJoinedRows(k+this._offsetTop,this._scope):null};h.prototype.length=function(){var l=this._view.getJoinedTables(true,0),j=0,k;if(k=l[0]){j=k.getSectionLength(this._scope)}if(k=l[1]){j+=k.getSectionLength(this._scope)}j-=this._offsetTop+this._offsetBottom;if(j<0){j=0}return j};h.iterateCells=function f(q,s,k){if(q&&s){var n=0,m,o,p,l,r,t;for(m=0,o=q.length;m<o;m++){p=q[m];if(p){for(l=0,r=p.cells.length;l<r;l++){t=s(p.cells[l],n++,k);if(t!==true){return}}}}}};h.getCell=function g(j,m){var k,l;if(j&&(k=j[0])){l=k.cells.length;if(m<l){return k.cells[m]}m-=l;if(k=j[1]){l=k.cells.length;if(m<l){return k.cells[m]}}}return null};h.cellsCount=function i(j){var l=0,k;if(j&&(k=j[0])){l=k.cells.length;if(k=j[1]){l+=k.cells.length}}return l};return h})();d.rowAccessor=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(){this._timeout=25}f.prototype.currentCellEditStart=function(g,j){var o=false,m=g.currentCell(),n=g._view(),h,k,l,i;if(m._isValid()&&!m._isEdit()&&(m.column().dataIndex>=0)){h=m.row();if(h){i=h.type;if(i&b.grid.rowType.data){k={cell:m,event:j,handled:false};if(o=g._trigger("beforeCellEdit",null,k)){if(!k.handled){o=this._defaultBeforeCellEdit(g,k)}}if(o){m._isEdit(true);if(g._showRowHeader()){l=e((h.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell");if(l.length){l.empty();l.append(e("<div>&nbsp;</div>").addClass(g.options.wijCSS.icon+" ui-icon-pencil"))}}}}}}return o};f.prototype.currentCellEditEnd=function(h,v){var q=h.currentCell(),i=q.column(),n=false,p=h._view(),k,s,t,x,w,j,g=b.getKeyCodeEnum(),r;if(!q._isValid()||!q._isEdit()){return}k=q.row();if(k){s=k.type;if(!(s&b.grid.rowType.data)){return n}t=(v&&v.which===g.ESCAPE);if(!v||(!t)){var l={cell:q,value:undefined};if(n=h._trigger("beforeCellUpdate",null,l)){if(l.value===undefined){l.value=this._getCellValue(h,q)}x=l.value;w=q.value();try{r=this._getHTMLInputElementType(q);if(b.grid.HTML5InputSupport.isExtendSupportRequired(r)){l.value=b.grid.HTML5InputSupport.parse(l.value,r);l.value=b.grid.HTML5InputSupport.extend(w,l.value,r)}else{l.value=h.parse(q.column(),l.value)}x=l.value}catch(u){l.value=x}if(b.grid.getDataType(i)==="datetime"){if(x instanceof Date){x=x.getTime()}if(w instanceof Date){w=w.getTime()}}if(x!==w){try{q.value(l.value)}catch(u){var y={cell:q,value:l.value};n=false;h._trigger("invalidCellValue",null,y)}if(n){var m={cell:q};h._trigger("afterCellUpdate",null,m)}}}}else{n=true}if(n){var o={cell:q,event:v,handled:false};h._trigger("afterCellEdit",null,o);if(!o.handled){n=this._defaultAfterCellEdit(h,o)}if(n){q._isEdit(false)}if(h._showRowHeader()){e((k.$rows[0]).cells[0]).children("div.wijmo-wijgrid-innercell").html("&nbsp;")}window.setTimeout(function(){if(!h._destroyed){q=h.currentCell();if(j=q.tableCell()){e(j).attr("tabIndex",0).focus()}else{e(h._view().focusableElement()).focus()}}},this._timeout)}}return n};f.prototype._defaultBeforeCellEdit=function(g,m){var i=m.cell.column(),t=false,q,p,s,o,k,r,j=b.getKeyCodeEnum(),h=b.grid.HTML5InputSupport.getDefaultInputType(g._isMobileEnv(),i);if(i.dataIndex>=0){q=m.cell.value();t=true;try{s=m.cell.container();if(b.grid.getDataType(i)==="boolean"){var n=s.children("span");if(n.length&&n.prop("disabled")){e.data(n[0],"disabledSpan",true);n.prop("disabled",false)}o=s.find(":checkbox");o.prop("disabled",false);o.focus();if(m.event&&m.event.type==="keypress"){o.one("keyup",function(u){if(u.which===j.SPACE){u.preventDefault();(o[0]).checked=!q}})}}else{o=e("<input />").attr("type",h).addClass("wijgridinput wijmo-wijinput "+g.options.wijCSS.stateFocus).bind("keydown",g,e.proxy(this._checkBoxOrInputKeyDown,this));o.bind(((e.support).selectstart?"selectstart":"mousedown"),function(u){u.stopPropagation()});if(m.event&&m.event.type==="keypress"&&m.event.which){o.val(String.fromCharCode(m.event.which))}else{switch(b.grid.getDataType(i)){case"currency":case"number":if(q!==null){o.val(q);break}case"datetime":if(b.grid.HTML5InputSupport.isExtendSupportRequired(h)){o.val(b.grid.HTML5InputSupport.toStr(q,h));break}default:o.val(g.toStr(i,q));break}}s.empty().append(o);k=o.val().length;if(h==="text"){new b.grid.domSelection(o[0]).setSelection({start:k,end:k})}o.focus();setTimeout(function(){o.focus()},this._timeout*2)}}catch(l){alert(l.message);t=false}}return t};f.prototype._defaultAfterCellEdit=function(g,k){var o=k.cell.column(),r=false,p,q,n,h,m;if(o.dataIndex>=0){r=true;m=g._view();try{p=k.cell.container();q=g.toStr(o,k.cell.value());h=m._getRowInfoBySketchRowIndex(k.cell.rowIndex());if(b.grid.getDataType(o)==="boolean"){var l=p.children("span"),i=l.length&&e.data(l[0],"disabledSpan");n=p.find(":checkbox");if(q==="true"){n.attr("checked","checked")}else{n.removeAttr("checked")}if(i){l.prop("disabled",true);n.prop("disabled",true)}}else{g.cellFormatter.format(e(k.cell.tableCell()),p,o,q,h)}}catch(j){alert("defaultAfterCellEdit: "+j.message);r=false}}return r};f.prototype._checkBoxOrInputKeyDown=function(h){var g=b.getKeyCodeEnum();if(h.which===g.ENTER){var i=h.data;if(i){i._endEditInternal(h);return false}}};f.prototype._getCellValue=function(h,i){var j=i.container().find(":input:first"),g=null;if(j.length){g=(j.attr("type")==="checkbox")?(j[0]).checked:j.val()}return g};f.prototype._getHTMLInputElementType=function(g){return g.container().find(":input:first").attr("type")};return f})();c.cellEditorHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){}f._div=document.createElement("div");f.prototype.format=function(o,q,k,m,h){if(h.type&b.grid.rowType.footer){if(k.aggregate&&(k.aggregate!=="none")){m=b.grid.stringFormat(k.footerText||"{0}",k._totalsValue||"")}else{m=k.footerText||k._footerTextDOM||""}}var i=true,l=null,n={$container:q,column:k,formattedValue:m,row:h,afterDefaultCallback:null},g=k.owner,j=b.grid.rowType;if(((h.type&j.data)||(h.type===j.groupFooter||h.type===j.groupHeader))&&g._allowVirtualScrolling()){var p=g.options.rowHeight>0?g.options.rowHeight:0;q.css({overflow:"hidden",height:p||b.grid.fixedView.defaultRowHeight})}if(e.isFunction(k.cellFormatter)){i=!k.cellFormatter(n)}if(i){if(h.type===b.grid.rowType.groupHeader||h.type===b.grid.rowType.groupFooter){l=this._defFormatGroupCell}else{switch(b.grid.getDataType(k)){case"boolean":l=this._boolFormatter;break;default:l=this._textFormatter}}if(l){l.call(this,n);if(e.isFunction(n.afterDefaultCallback)){n.afterDefaultCallback(n)}}}};f.prototype._textFormatter=function(h){var g;switch(h.row.type){case b.grid.rowType.filter:this._defFormatFilterCell(h);break;default:this._updateHTML(h)}};f.prototype._boolFormatter=function(k){var l,n,h="disabled='disabled'",j,m,g=b.grid.rowType,i=b.getKeyCodeEnum();switch(k.row.type){case g.data:case g.data|g.dataAlt:l=k.column.owner;n=l.options.allowEditing&&(k.column.readOnly!==true);if(n){h=""}if(l.parse(k.column,l._dataViewWrapper.getValue(k.row.data,k.column.dataKey))===true){k.$container.html("<input class='wijgridinput' type='checkbox' checked='checked' "+h+" />")}else{k.$container.html("<input class='wijgridinput' type='checkbox' "+h+" />")}if(n){k.$container.children("input").bind("mousedown",function(o){j=k.$container.parent()[0];m=l.currentCell();if(m.tableCell()!==j){l._onClick({target:j})}if(!m._isEdit()){l.beginEdit()}}).bind("keydown",function(o){if(o.which===i.ENTER){l._endEditInternal(o);return false}})}break;default:this._textFormatter(k)}};f.prototype._defFormatFilterCell=function(g){var h=g.column.owner,i=h.options.wijCSS;g.$container.addClass(i.widget+" "+i.stateDefault);if((g.column.dataIndex>=0)&&!g.column.isBand&&g.column.showFilter){g.$container.html('<table cellPadding="0" cellSpacing="0" class="wijmo-wijgrid-filter '+i.cornerAll+'"><tr><td style="width:100%"><input type="text" class="wijmo-wijgrid-filter-input" style="width:100%" /></td><td class="wijmo-wijgrid-filter-trigger '+i.cornerRight+" "+i.stateDefault+'"><span class="'+i.icon+" "+i.iconArrowDown+'"></span></td></tr></table>')}else{g.$container.html("&nbsp;")}};f.prototype._defFormatGroupCell=function(g){this._updateHTML(g)};f.prototype._updateHTML=function(h){var g=h.$container[0];if(g.firstChild){while(g.firstChild){g.removeChild(g.firstChild)}}b.grid.cellFormatterHelper._div.innerHTML=h.formattedValue||"&nbsp;";while(b.grid.cellFormatterHelper._div.firstChild){g.appendChild(b.grid.cellFormatterHelper._div.firstChild)}};return f})();d.cellFormatterHelper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){this.MIN_WIDTH=5;this._elements=[];this._gap=10;this._step=1;this._inProgress=false;this._hoveredField=null;this._startLocation=null;this._lastLocation=null;this._proxy=null;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}f.prototype.addElement=function(g){if(g&&g.element){g.element.bind(this._eventKey("mousemove"),d.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),d.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),d.proxy(this._onMouseOut,this));this._elements.push(g)}};f.prototype.dispose=function(){var g=this;d.each(this._elements,function(h,i){i.element.unbind(g._eventKey("mousemove"),g._onMouseMove).unbind(g._eventKey("mousedown"),g._onMouseDown).unbind(g._eventKey("mouseout"),g._onMouseOut)});this._detachDocEvents()};f.prototype.inProgress=function(){return this._inProgress};f.prototype._onMouseMove=function(h){if(!this._inProgress){var g=this._getFieldByPos({x:h.pageX,y:h.pageY});if(g&&g._canSize()&&this._wijgrid._canInteract()){g.element.css("cursor","e-resize");this._hoveredField=g;h.stopPropagation()}else{this._onMouseOut(h)}}};f.prototype._onMouseOut=function(g){if(!this._inProgress){if(this._hoveredField){this._hoveredField.element.css("cursor","");this._hoveredField=null}}};f.prototype._onMouseDown=function(h){this._hoveredField=this._getFieldByPos({x:h.pageX,y:h.pageY});if(this._hoveredField&&(this._hoveredField)._canSize()&&this._wijgrid._canInteract()){try{this._hoveredField.element.css("cursor","");this._docCursor=document.body.style.cursor;document.body.style.cursor="e-resize";this._startLocation=this._lastLocation=b.grid.bounds(this._hoveredField.element);this._proxy=d('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.stateHightlight+'">&nbsp;</div>');var g=this._wijgrid._view().getVisibleAreaBounds();this._proxy.css({left:h.pageX,top:this._startLocation.top,height:g.height+g.top-this._startLocation.top});d(document.body).append(this._proxy)}finally{this._attachDocEvents();this._inProgress=true;h.stopPropagation()}}};f.prototype._onDocumentMouseMove=function(h){var g=this._step*Math.round((h.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+g,top:h.pageY,width:undefined,height:undefined};this._proxy.css("left",this._lastLocation.left)};f.prototype._onDocumentMouseUp=function(g){try{document.body.style.cursor=this._docCursor;this._proxy.remove();if(this._startLocation!==this._lastLocation){this._wijgrid._fieldResized(this._hoveredField,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}}finally{this._hoveredField=null;this._proxy=null;this._detachDocEvents();this._inProgress=false}};f.prototype._onSelectStart=function(g){g.preventDefault()};f.prototype._attachDocEvents=function(){if(!this._inProgress){d(document).bind(this._eventKey("mousemove"),d.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),d.proxy(this._onDocumentMouseUp,this));if(d.fn.disableSelection){d(document.body).disableSelection()}if("onselectstart" in document){d(document.body).bind("selectstart",this._onSelectStart)}}};f.prototype._detachDocEvents=function(){if(this._inProgress){d(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp);if(d.fn.enableSelection){d(document.body).enableSelection()}if("onselectstart" in document){d(document.body).unbind("selectstart",this._onSelectStart)}}};f.prototype._getFieldByPos=function(h){var l,g,k,m,j;for(l=0,g=this._elements.length;l<g;l++){k=this._elements[l];m=b.grid.bounds(k.element);j=b.grid.isOver(h.y,h.x,m.top,m.left+m.width-this._gap,m.height,this._gap);if(j){return k}}return null};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};return f})();c.uiResizer=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._scope_guid="scope_"+b.grid.getUID();this._dragEnd=false;this.mZIndex=1000;this._wijgrid=g;this._wijCSS=this._wijgrid.options.wijCSS;this._wrapHtml='<div class="'+this._wijCSS.widget+" wijmo-wijgrid "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'"><table class="wijmo-wijgrid-root wijmo-wijgrid-table"><tr class="wijmo-wijgrid-headerrow"></tr></table></div>'}f.prototype.attachGroupArea=function(h){var i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}h.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:true,accept:function(j){if(g._wijgrid.options.allowColMoving){i=g._getWijFieldInstance(j);if(i){if((i instanceof e.wijmo.c1groupedfield)&&(i.options.groupedIndex===g._wijgrid._groupedColumns().length-1)){return false}return !i.options.isBand&&(i.options.groupedIndex===undefined||(i instanceof e.wijmo.c1groupedfield))}}return false},drop:function(k,j){if(!g._isInElement(k,j.draggable)&&(i=g._getWijFieldInstance(j.draggable))){g._dragEnd=true}},over:function(l,k){var j=g._wijgrid._field("groupedWidgets").length;g._dropTargetRedirected=(j>0);g._droppableWijField=(j>0)?g._wijgrid._field("groupedWidgets")[j-1]:h;h.data("thisDroppableWijField",g._droppableWijField)},out:function(k,j){if(g._droppableWijField===h.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.attach=function(j){var h,i,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}if(!j||!(h=j.element)){return}h.draggable({helper:function(l){var k;if(j instanceof e.wijmo.c1groupedfield){k=h.clone()}else{k=h.clone().wrap(g._wrapHtml).width(h.width()).height(h.height()).closest(".wijmo-wijgrid")}k.addClass("wijmo-wijgrid-dnd-helper").css("z-index",g.mZIndex=b.grid.getZIndex(g._wijgrid.outerDiv,1000));return k},appendTo:"body",scope:g._scope_guid,drag:function(m,l){g._hideArrows();if(g._droppableWijField&&!g._isInElement(m,h)){var k=g._droppableWijField.element;if(!k){k=(g._droppableWijField)}g._showArrows(k,g._getPosition(j,g._droppableWijField,m,l))}},start:function(p,o){if(g._wijgrid._canInteract()&&g._wijgrid.options.allowColMoving&&(g._wijgrid._UIResizer()==null||!g._wijgrid._UIResizer().inProgress())){var n=j.options,l=j.options.travIdx,m=(j instanceof e.wijmo.c1groupedfield),k=m?"groupArea":"columns";if(m){n=b.grid.search(g._wijgrid.columns(),function(q){return q.options.travIdx===l});n=(!n.found)?b.grid.getColumnByTravIdx(g._wijgrid.options.columns,l).found:n.found.options}if(j._canDrag()&&g._wijgrid._trigger("columnDragging",null,{drag:n,dragSource:k})){g._wijgrid._trigger("columnDragged",null,{drag:n,dragSource:k});return true}}return false},stop:function(l,k){g._hideArrows();try{if(g._dragEnd){if(!g._droppableWijField.element){g._wijgrid._handleDragnDrop(j.options.travIdx,-1,"left",j instanceof e.wijmo.c1groupedfield,true)}else{g._wijgrid._handleDragnDrop(j.options.travIdx,g._droppableWijField.options.travIdx,g._getPosition(j,g._droppableWijField,l,k),j instanceof e.wijmo.c1groupedfield,g._droppableWijField instanceof e.wijmo.c1groupedfield)}}}finally{g._droppableWijField=null;g._dragEnd=false}}}).droppable({hoverClass:g._wijCSS.stateHover,scope:g._scope_guid,tolerance:"pointer",greedy:true,accept:function(k){if(g._wijgrid.options.allowColMoving){if(h[0]!==k[0]){i=g._getWijFieldInstance(k);if(i){return i._canDropTo(j)}}}return false},drop:function(l,k){if(i=g._getWijFieldInstance(k.draggable)){g._dragEnd=true}},over:function(l,k){g._dropTargetRedirected=false;g._droppableWijField=j;h.data("thisDroppableWijField",g._droppableWijField)},out:function(l,k){if(g._droppableWijField===j.element.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.detach=function(h){var g;if(h&&(g=h.element)){if(g.data("ui-draggable")){g.draggable("destroy")}if(g.data("ui-droppable")){g.droppable("destroy")}}};f.prototype.dispose=function(){if(this._$topArrow){this._$topArrow.remove();this._$topArrow=null}if(this._$bottomArrow){this._$bottomArrow.remove();this._$bottomArrow=null}};f.prototype._getWijFieldInstance=function(g){var h=b.grid.widgetName(g);if(!h){throw"widgetName is undedined"}return g.data(h)};f.prototype._showArrows=function(h,g){this._topArrow().css("z-index",this.mZIndex).show().position({my:"center",at:g+" top",of:h,collision:"none"});this._bottomArrow().css("z-index",this.mZIndex).show().position({my:"center",at:g+" bottom",of:h,collision:"none"})};f.prototype._hideArrows=function(){this._topArrow().hide();this._bottomArrow().hide()};f.prototype._topArrow=function(){if(!this._$topArrow){this._$topArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-top").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-s")).hide().appendTo(document.body)}return this._$topArrow};f.prototype._bottomArrow=function(){if(!this._$bottomArrow){this._$bottomArrow=e("<div />").addClass("wijmo-wijgrid-dnd-arrow-bottom").append(e("<span />").addClass(this._wijCSS.icon+" ui-icon-arrowthick-1-n")).hide().appendTo(document.body)}return this._$bottomArrow};f.prototype._isInElement=function(i,g){var h=b.grid.bounds(g,false);return((i.pageX>h.left&&i.pageX<h.left+h.width)&&(i.pageY>h.top&&i.pageY<h.top+h.height))};f.prototype._getPosition=function(k,i,l,m){if(!i.element){return"left"}if(this._dropTargetRedirected){return"right"}var g=b.grid.bounds(i.element,false),n=g.width/6,j=g.left+(g.width/2),o="right",h;if(l.pageX<j){o="left"}if(i instanceof e.wijmo.c1groupedfield){if(k instanceof e.wijmo.c1groupedfield){h=i.options.groupedIndex-k.options.groupedIndex;if(Math.abs(h)===1){o=(h<0)?"left":"right"}}return o}h=i.options.linearIdx-k.options.linearIdx;if(i.options.isBand&&(k.options.parentIdx!==i.options.travIdx)&&(Math.abs(l.pageX-j)<n)){return"center"}if(k.options.parentIdx===i.options.parentIdx&&Math.abs(h)===1){o=(h<0)?"left":"right"}return o};return f})();d.uiDragndrop=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(r,q,l,g,h,p,k){var j=b.grid.renderState,i=b.grid.rowType,n=g.type,o,m=null;if(q===0&&this._wijgrid._showRowHeader()){l=null}if(n===i.groupHeader||n===i.groupFooter){l=null;if(p&&(m=p.groupInfo)){l=this._wijgrid._field("leaves")[m.leafIndex]}}o={$cell:r,state:h,row:g,column:l,_cellIndex:q,_purpose:m?m.purpose:undefined};if(h===j.rendering){this._renderingStateFormatter(o,p,k)}else{this._currentStateFormatter(o,h&j.current);this._selectedStateFormatter(o,h&j.selected)}if(e.isFunction(this._wijgrid.options.cellStyleFormatter)){this._wijgrid.options.cellStyleFormatter(o)}};f.prototype._renderingStateFormatter=function(i,m,l){var g=b.grid.rowType,j,n,h=i.column,k=i.row.type;switch(k){case g.header:i.$cell.addClass("wijgridth");break;default:i.$cell.addClass("wijgridtd")}if((k&g.data)&&h&&h.textAlignment){switch(h.textAlignment.toLowerCase()){case"left":i.$cell.addClass("wijalign-left");break;case"right":i.$cell.addClass("wijalign-right");break;case"center":i.$cell.addClass("wijalign-center");break}}if(m){for(j in m){if(m.hasOwnProperty(j)){n=m[j];if((j==="colSpan"||j==="rowSpan")&&!(n>1)){continue}if(j==="class"){i.$cell.addClass(n)}else{i.$cell.attr(j,n)}}}}if(l){for(j in l){if(l.hasOwnProperty(j)){if(j==="paddingLeft"){i.$cell.children(".wijmo-wijgrid-innercell").css(j,l[j]);continue}i.$cell.css(j,l[j])}}}if(i._cellIndex===0&&this._wijgrid._showRowHeader()){i.$cell.attr({role:"rowheader",scope:"row"}).addClass(this._wijgrid.options.wijCSS.stateDefault+" "+this._wijgrid.options.wijCSS.content+" wijmo-wijgrid-rowheader")}else{switch(k){case (g.header):i.$cell.attr({role:"columnheader",scope:"col"});break;case (g.footer):i.$cell.attr({role:"columnfooter",scope:"col"});break;default:i.$cell.attr("role","gridcell")}}if(k&g.data){if(i._cellIndex>=0&&h){i.$cell.attr("headers",(window).escape(h.headerText));if(h.readOnly){i.$cell.attr("aria-readonly",true)}if(h.dataIndex>=0){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}}if(k===g.groupHeader||k===g.groupFooter){if(h&&i._purpose===b.grid.groupRowCellPurpose.aggregateCell){i.$cell.addClass("wijdata-type-"+b.grid.getDataType(h))}}};f.prototype._currentStateFormatter=function(h,i){var g=b.grid.rowType;if(i){h.$cell.addClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.addClass("wijmo-wijgrid-current-headercell")}else{h.$cell.addClass("wijmo-wijgrid-current-cell")}}else{h.$cell.removeClass(this._wijgrid.options.wijCSS.stateActive);if(h.row.type===g.header){h.$cell.removeClass("wijmo-wijgrid-current-headercell")}else{h.$cell.removeClass("wijmo-wijgrid-current-cell")}}};f.prototype._hoveredStateFormatter=function(g,h){if(h){}else{}};f.prototype._selectedStateFormatter=function(g,h){if(h){g.$cell.addClass(this._wijgrid.options.wijCSS.stateHightlight).attr("aria-selected","true")}else{g.$cell.removeClass(this._wijgrid.options.wijCSS.stateHightlight).removeAttr("aria-selected")}};return f})();c.cellStyleFormatterHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(m,h,j){var i=b.grid.renderState,g=b.grid.rowType,l=m.state,k=m;if(l===i.rendering){this._renderingStateFormatter(k,h,j)}else{this._currentStateFormatter(k,(l&i.current)!==0);this._hoveredStateFormatter(k,(l&i.hovered)!==0);this._selectedStateFormatter(k,(l&i.selected)!==0)}if(d.isFunction(this._wijgrid.options.rowStyleFormatter)){this._wijgrid.options.rowStyleFormatter(k)}};f.prototype._renderingStateFormatter=function(k,h,i){var m="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,j="wijmo-wijgrid-row "+this._wijgrid.options.wijCSS.content,g=b.grid.rowType,l;k.$rows.attr("role","row");if(h){for(l in h){if(h.hasOwnProperty(l)){if(l==="class"){k.$rows.addClass(h[l])}else{k.$rows.attr(l,h[l]);if(k.$rows[0].style.height){k.$rows.each(function(){d.data(this,"customHeight",this.style.height);return true})}}}}}if(i){for(l in i){if(i.hasOwnProperty(l)){k.$rows.css(l,i[l])}}}switch(k.type&~g.dataAlt){case (g.header):m="wijmo-wijgrid-headerrow";break;case (g.data):m=j+" wijmo-wijgrid-datarow";if(k.type&g.dataAlt){m+=" wijmo-wijgrid-alternatingrow"}break;case (g.emptyDataRow):m=j+" wijmo-wijgrid-emptydatarow";break;case (g.filter):m="wijmo-wijgrid-filterrow";break;case (g.groupHeader):m=j+" wijmo-wijgrid-groupheaderrow";break;case (g.groupFooter):m=j+" wijmo-wijgrid-groupfooterrow";break;case (g.footer):m="wijmo-wijgrid-footerrow "+this._wijgrid.options.wijCSS.stateHightlight;break;default:throw b.grid.stringFormat("unknown rowType: {0}",k.type)}k.$rows.addClass(m)};f.prototype._currentStateFormatter=function(h,g){if(this._wijgrid._showRowHeader()){if(g){d((h.$rows[0]).cells[0]).addClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}else{d((h.$rows[0]).cells[0]).removeClass(this._wijgrid.options.wijCSS.stateActive+" wijmo-wijgrid-current-rowheadercell")}}};f.prototype._hoveredStateFormatter=function(h,g){if(g){h.$rows.addClass(this._wijgrid.options.wijCSS.stateHover)}else{h.$rows.removeClass(this._wijgrid.options.wijCSS.stateHover)}};f.prototype._selectedStateFormatter=function(h,g){if(g){}else{}};return f})();c.rowStyleFormatterHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){this._sum=0;this._sum2=0;this._cntNumbers=0;this._cntStrings=0;this._cntDates=0;this._max=0;this._min=0;this._minDate=0;this._maxDate=0}f.prototype.add=function(h){if(h===null||h===""){return}var i,g=(h instanceof Date)?"datetime":typeof(h);i=h.toString();if(this._cntStrings++===0){this._minString=this._maxString=i}if(i<this._minString){this._minString=i}if(i>this._maxString){this._maxString=i}if(g==="number"){if(this._cntNumbers++===0){this._min=this._max=h}this._sum+=h;this._sum2+=h*h;if(h<this._min){this._min=h}if(h>this._max){this._max=h}}else{if(g==="datetime"){i=h.getTime();if(this._cntDates++===0){this._minDate=this._maxDate=i}if(i<this._minDate){this._minDate=i}if(i>this._maxDate){this._maxDate=i}}}};f.prototype.getValueString=function(h){var g=h.owner;if(this._cntNumbers&&(h.dataType==="number"||h.dataType==="currency")){var i=this._getValue(h.aggregate);return g.toStr(h,i)}if(this._cntDates&&(h.dataType==="datetime")){switch(h.aggregate){case"max":return g.toStr(h,new Date(this._maxDate));case"min":return g.toStr(h,new Date(this._minDate));case"count":return this._cntStrings+""}}if(this._cntStrings){switch(h.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}}return""};f.prototype._getValue=function(h){switch(h){case"average":return(this._cntNumbers===0)?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1){return 0}return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1){return 0}var g=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-g*g}return 0};return f})();d.tally=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._docEventsUID="wijgridfrozener"+b.grid.getUID();this._docEventsAttached=false;this._newStaticIndex=-1;this._staticColumnIndex=-1;this._staticRowIndex=-1;this._staticOffsetH=0;this._staticOffsetV=0;this._inProgress=false;this._wijgrid=g;this.refresh()}f.prototype.inProgress=function(){return this._inProgress};f.prototype.refresh=function(){this.dispose();var i=this._wijgrid.options.freezingMode;if(i!=="none"){this._$outerDiv=this._wijgrid.outerDiv.find(".wijmo-wijgrid-fixedview");this._superPanel=(this._wijgrid._view())._getSuperPanel();this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(false);this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(true);this._staticColumnIndex=this._wijgrid._getStaticIndex(false);this._staticRowIndex=this._wijgrid._getStaticIndex(true);this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();var h=b.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),g=b.grid.bounds(this._$outerDiv);if((i==="both"||i==="columns")&&(this._wijgrid.options.staticColumnsAlignment!=="right"||this._staticColumnIndex>=0)){this._createVBar(this._visibleBounds,h,g)}if((i==="both"||i==="rows")&&!this._wijgrid._serverSideVirtualScrolling()){this._createHBar(this._visibleBounds,h,g)}}};f.prototype.dispose=function(){if(this._$hBar){this._$hBar.remove();this._$hBar=null}if(this._$vBar){this._$vBar.remove();this._$vBar=null}if(this._$proxy){this._$proxy.remove();this._$proxy=null}this._$outerDiv=null;this._superPanel=null;this._detachDocEvents()};f.prototype._createVBar=function(k,j,g){var l=(this._wijgrid.options.staticColumnsAlignment!=="right"),i=l?j.width+j.left:j.left-2,h=this;if(i<=k.left+k.width){this._$vBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-freezing-handle-v").addClass(l?"":"not-allowed").css({left:i-g.left,top:j.top-g.top,height:k.height+k.top-j.top}).bind("mousedown",function(m){m.data=true;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$vBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:0,height:"100%"})}};f.prototype._createHBar=function(k,j,g){var i=j.top+j.height,l=(this._wijgrid.options.staticColumnsAlignment!=="right"),h=this;if(i<=k.top+k.height){this._$hBar=e("<div><div></div></div>").addClass("wijmo-wijgrid-freezing-handle-h").css({left:l?j.left-g.left:0,top:i-g.top,width:l?k.width+k.left-j.left:k.width}).bind("mousedown",function(m){m.data=false;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$hBar.find("div").addClass(this._wijgrid.options.wijCSS.header).css({width:"100%",height:0})}};f.prototype._onBarMouseDown=function(g){if(this._wijgrid.options.disabled||(this._wijgrid.options.staticColumnsAlignment==="right"&&g.data)){return false}this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();this._newStaticIndex=g.data?this._staticColumnIndex:this._staticRowIndex;this._$proxy=e('<div class="wijmo-wijgrid-resizehandle '+this._wijgrid.options.wijCSS.header+'"></div>').appendTo(document.body);this._attachDocEvents(g.data);this._inProgress=true;g.stopPropagation()};f.prototype._onDocumentMouseMove=function(g){if(g.data&&this._superPanel.options.hScroller.scrollValue){(this._superPanel).hScrollTo(0)}else{if(!g.data&&this._superPanel.options.vScroller.scrollValue){(this._superPanel).vScrollTo(0)}}this._showPosition(g)};f.prototype._onDocumentMouseUp=function(g){try{if(this._$proxy){this._$proxy.remove()}this._detachDocEvents();if(g.data){if(this._newStaticIndex!==this._staticColumnIndex){this._wijgrid.option("staticColumnIndex",this._newStaticIndex)}}else{if(this._newStaticIndex!==this._staticRowIndex){this._wijgrid.option("staticRowIndex",this._newStaticIndex)}}}finally{this._$proxy=null;this._inProgress=false}};f.prototype._attachDocEvents=function(g){if(!this._docEventsAttached){try{if(e.fn.disableSelection){e(document.body).disableSelection()}this._wijgrid._view().toggleDOMSelection(false);e(document).bind(this._docEventKey("mousemove"),g,e.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),g,e.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=true}}};f.prototype._detachDocEvents=function(){if(this._docEventsAttached){try{if(e.fn.enableSelection){e(document.body).enableSelection()}this._wijgrid._view().toggleDOMSelection(true);e(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=false}}};f.prototype._docEventKey=function(g){return b.grid.stringFormat("{0}.{1}",g,this._docEventsUID)};f.prototype._showPosition=function(l){var i,o,h,n,p,m,j,g,k=(this._wijgrid.options.staticColumnsAlignment!=="right");if(l.data){g=b.grid.bounds(this._$vBar);if(Math.abs(l.pageX-(g.left+g.width/2))<g.width){this._$proxy.hide();return}if((i=this._getFieldByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i.element);h=o.left+o.width/2;n=i.options.visLeavesIdx-this._staticOffsetV;p=Math.max(n-1,-1);m=l.pageX<h?(p!==this._staticColumnIndex):(n===this._staticColumnIndex);j=m?o.left:o.left+o.width;if(!b.grid.isOverAxis(j,this._visibleBounds.left-1,this._visibleBounds.width+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:j,top:o.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-o.top})}}else{g=b.grid.bounds(this._$hBar);if(Math.abs(l.pageY-(g.top+g.height/2))<g.height){this._$proxy.hide();return}if((i=this._getRowByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i);h=o.top+o.height/2;n=this._wijgrid._view().getAbsoluteRowIndex(i)-this._staticOffsetH;p=Math.max(n-1,-1);m=l.pageY<h?(p!==this._staticRowIndex):(n===this._staticRowIndex);j=m?o.top:o.top+o.height;if(!b.grid.isOverAxis(j,this._visibleBounds.top-1,this._visibleBounds.height+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:k?o.left:this._visibleBounds.left,top:j,width:k?this._visibleBounds.width+this._visibleBounds.left-o.left:this._visibleBounds.width,height:3})}}};f.prototype._getFieldByPos=function(n){var k=this._wijgrid.columns(),j,g,h,m,l;for(j=0,g=k.length;j<g;j++){h=k[j];m=h.options;if(m.isLeaf){l=b.grid.bounds(h.element);if(b.grid.isOverAxis(n.x,l.left,l.width)){return h}}}return null};f.prototype._getRowByPos=function(m){var k=this._wijgrid._rows(),h,g,l,j;for(h=0,g=k.length();h<g;h++){l=k.item(h)[0];j=b.grid.bounds(e(l));if(b.grid.isOverAxis(m.y,j.top,j.height)){return l}}return null};return f})();d.uiFrozener=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function i(){}i.generate=function g(m,l,k){switch(m){case"append":i._processAppendMode(l,k);break;case"merge":i._processMergeMode(l,k);break;case"none":break;default:throw b.grid.stringFormat('Unsupported value: "{0}"',m)}};i._processAppendMode=function h(m,l){var k={};b.grid.traverse(l,function(n){if(n.dynamic&&b.grid.validDataKey(n.dataKey)){k[n.dataKey]=true}});d.each(m,function(p,o){if(("name" in o)&&!k[o.name]){var n=i._createAutoField(o);l.push(n)}})};i._processMergeMode=function f(m,l){var n=[],k;b.grid.traverse(l,function(o){if(o.isLeaf&&!o.isBand){var p=o.dataKey;if(b.grid.validDataKey(p)){if(m[p]!==undefined){delete m[p]}}else{if(p!==null){n.push(o)}}}});if(n.length){k=0;d.each(m,function(p,q){var o=n[k++];if(o){o.dataKey=q.name;delete m[p]}})}d.each(m,function(p,q){var o=i._createAutoField(q);l.push(o)})};i._createAutoField=function j(k){return b.grid.createDynamicField({dataKey:k.name})};return i})();c.columnsGenerator=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(i,h,k,j){this._timer=0;this._timeout=50;this._ignoreScrollEvents=false;this._debounceScrolledEvent=true;this._wijgrid=i;this._fixedAreaHeight=k;this._$content=h;this._view=this._wijgrid._view();this._N=this._wijgrid._renderableRowsCount();this._rowHeight=j;this._updateContentHeight();var g=this._wijgrid.outerDiv.height()+this._N*this._rowHeight;this._view._splitAreas.sw.height(g)}f.prototype.scrollTo=function(h,g){this._debounceScrolledEvent=false;this._completeListener=g;(this._panelInst).vScrollTo(h*(this._panelInst).options.vScroller.scrollSmallChange,true)};f.prototype._updateContentHeight=function(){this._$content.height(this._rowHeight*this._N)};f.prototype.attach=function(g){this._$scroller=g;this._panelInst=g.data("wijmo-wijsuperpanel");this._updateContentHeight();this._updateVerticalScroller();g.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelScrolled,this));g.bind("wijsuperpanelscrolling.wijgrid",d.proxy(this._onSuperpanelScrolling,this));g.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelPostScrolled,this))};f.prototype._updateVerticalScroller=function(){var g=Math.max(0,this._N-(this._view.getVirtualPageSize()-1));this._setVerticalScrollerOptions(1,g)};f.prototype._setVerticalScrollerOptions=function(h,g){var i=this._panelInst.options.vScroller;i.scrollSmallChange=h;i.scrollLargeChange=h*4;g+=i.scrollLargeChange-1;i.scrollMax=g;this._panelInst.option("vScroller",i)};f.prototype._changeVisibleRowsCount=function(g){this._N=g;this._updateContentHeight();this._updateVerticalScroller()};f.prototype.dispose=function(){this._$scroller.unbind(".wijgrid");this._clearTimer()};f.prototype._clearTimer=function(){window.clearTimeout(this._timer);this._timer=0};f.prototype._onSuperpanelScrolling=function(h,g){if(this._ignoreScrollEvents||(g.dir!=="v")){return}if(this._timer===-1){return false}};f.prototype._onSuperpanelScrolled=function(i,h){var g=this;if(this._ignoreScrollEvents||(h.dir!=="v")){return}if(this._timer>0){this._clearTimer()}if(this._timer!==-1){this._timer=window.setTimeout(function(){g._timer=-1;var k=Math.floor(h.newValue/g._panelInst.options.vScroller.scrollSmallChange),j=g._view._bounds.start;if(k<0){k=0}if(k>=g._N){k=g._N-1}if(k!==j){g._debounceScrolledEvent=true;g._wijgrid._handleVirtualScrolling(k,null,d.proxy(g._scrollingCompleted,g))}else{g._debounceScrolledEvent=true;g._log();g._clearTimer()}},this._debounceScrolledEvent?this._timeout:0)}};f.prototype._scrollingCompleted=function(g){this._wijgrid._trackScrollingIndex(g);this._log();if(this._completeListener){this._completeListener();this._completeListener=null}this._clearTimer()};f.prototype._onSuperpanelPostScrolled=function(){if(d.isFunction(this._postScrolled)){this._postScrolled.apply(this,arguments)}};f.prototype._log=function(){};return f})();c.uiVirtualScroller=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=(function(){function e(f){this._items=[];this._capacity=null;this._maxRowIndex=f}e.prototype.add=function(f){this._capacity=null;var k=this._items.length,n;if(!k||(n=this._items[k-1]).end<f.start){if(k&&(f.start-n.end===1)){n.end=f.end}else{this._items.push(f)}}else{var o=this._binSearchByStartVal(f.start),l=this._binSearchByEndVal(f.end),j=o<0?~o:o,h=l<0?~l:l,g=(o>=0)||(j>0&&f.start<=this._items[j-1].end),m=(l>=0)||(h<k&&f.end<=this._items[h].end&&f.end>=this._items[h].start),i;if(g){if(m){if(o>=0){this._items[h].start=this._items[j].start;if(i=(h-j)){this._items.splice(j,i)}}else{this._items[h].start=this._items[j-1].start;if(i=h-j+1){this._items.splice(j-1,i)}}}else{if(o>=0){this._items[j].end=f.end;if(i=(h-j-1)){this._items.splice(j,i)}}else{this._items[j-1].end=f.end;if(i=(h-j)){this._items.splice(j,i)}}}}else{if(m){this._items[h].start=f.start;if(i=(h-j)){this._items.splice(j,i)}}else{this._items.splice(j,h-j,f)}}}};e.prototype.remove=function(f){this._capacity=null;var l=this._items.length;if(l){var p=this._binSearchByStartVal(f.start),m=this._binSearchByEndVal(f.end),j=p<0?~p:p,h=m<0?~m:m,g=(p>=0)||(j>0&&f.start<=this._items[j-1].end),o=(m>=0)||(h<l&&f.end<=this._items[h].end&&f.end>=this._items[h].start);if(g){if(o){var n=(p>=0)?p:j-1,k=(m>=0)?m:h;if(p>=0&&m>=0){this._items.splice(j,h-j+1)}else{if(p>=0){this._items[h].start=f.end+1;this._items.splice(j,h-j)}else{if(m>=0){if(n===k){this._items[j-1].end=f.start-1}else{this._items[j].end=f.start-1;this._items.splice(j,h-j+1)}}else{if(n===k){var i=this._items[j-1].end;this._items[j-1].end=f.start-1;this._items.splice(j,0,{start:f.end+1,end:i})}else{this._items[j-1].end=f.start-1;this._items[h].start=f.end+1;this._items.splice(j,h-j)}}}}}else{if(p>=0){this._items.splice(j,h-j)}else{this._items[j].end=f.start-1;this._items.splice(j,h-j-1)}}}else{if(o){if(m>=0){this._items.splice(j,h-j+1)}else{this._items[h].start=f.end+1;this._items.splice(j,h-j)}}else{this._items.splice(j,h-j)}}}};e.prototype.clear=function(){this._capacity=0;this._items=[]};e.prototype.item=function(f){return this._items[f]};e.prototype.forEachIndex=function(g,n,q){if(g<0){return}var o=this._items.length,f=this._getIteratorStateFor(g),h=0,p=true,m=false;if(f){var k=f.j;for(var l=f.i;l<o&&!m;l++){var r=this._items[l];if(!p){k=r.start}for(k;k<=r.end&&!m;k++){if((++h>n)&&(n!==-1)){return}m=(q(k)===false)}p=false}}};e.prototype.forEachIndexBackward=function(g,n,q){if(g<0){return}var o=this._items.length,f=this._getIteratorStateFor(g),h=0,p=true,m=false;if(f){var k=f.j;for(var l=f.i;l>=0&&!m;l--){var r=this._items[l];if(!p){k=r.end}for(k;k>=r.start&&!m;k--){if((++h>n)&&(n!==-1)){return}m=(q(k)===false)}p=false}}};e.prototype._getIteratorStateFor=function(j){var f=this._items.length,h=0;for(var g=0;g<f;g++){var k=this._items[g];h+=k.end-k.start+1;var l=h-j;if(l>=0){return{i:g,j:k.end-l+1}}}return null};e.prototype.getAbsIndex=function(k){for(var h=0,f=this._items.length;h<f;h++){var j=this._items[h],g=j.end-j.start;if(k<=g){return j.start+k}else{k-=g+1}}return -1};e.prototype.getRenderedIndex=function(h){var k=this.hasAbsIndex(h);if(k>=0){var f=0;for(var g=0;g<k;g++){var j=this._items[g];f+=j.end-j.start+1}return f+(h-this._items[k].start)}return -1};e.prototype.hasAbsIndex=function(g){if(this._items.length){var f=this._binSearchByStartVal(g);if(f>=0){return f}else{f=~f;if(f>0&&g<=this._items[f-1].end){return f-1}}}return -1};e.prototype.length=function(){return this._items.length};e.prototype.capacity=function(){if(this._capacity===null){var g=0;for(var h=0,f=this._items.length;h<f;h++){var j=this._items[h];g+=(j.end-j.start)+1}this._capacity=g}return this._capacity};e.prototype.truncate=function(g,f){this.truncateByStart(g);this.truncateByStart(f)};e.prototype.truncateByCount=function(k){var j=0;if(k===0){this._items=[]}else{for(var g=0,f=this._items.length;g<f;g++){var h=this._items[g];j+=(h.end-h.start)+1;if(j>=k){if(j>k){h.end-=j-k}this._items.splice(g+1,this._items.length-(g+1));break}}}};e.prototype.truncateByStart=function(h,i){var g=this._binSearchByStartVal(h),f=this._items.length;if(g<0){g=~g;if(g<f){if(g>0&&this._items[g-1].end>=h){this._items[g-1].start=h;this._items.splice(0,g-1)}else{if(i){this._items[g].start=h}this._items.splice(0,g)}}else{this._items=[]}}else{this._items.splice(0,g)}};e.prototype.truncateByEnd=function(i,h){var g=this._binSearchByEndVal(i),f=this._items.length;if(g<0){g=~g;if(g<f){this._items[g].end=i;this._items.splice(g+1,this._items.length-g+1)}else{this._items=[]}}else{this._items.splice(g+1,this._items.length-g+1)}};e.prototype.deleteFromTop=function(j){var g=0,f=0;for(g=0;g<this._items.length;g++){var h=this._items[g];f+=h.end-h.start+1;if(f>=j){break}}if(f>=j){this._items[g].start=f-j+1}this._items.splice(0,g)};e.prototype.deleteFromBottom=function(j){var g=0,f=0;for(g=this._items.length-1;g>=0;g--){var h=this._items[g];f+=h.end-h.start+1;if(f>=j){break}}if(f>=j){this._items[g].start=f-j+1}this._items.splice(g,this._items.length-g)};e.prototype._binSearchByStartVal=function(j){var g=0,h=this._items.length-1;while(g<=h){var f=(h+g)>>1,i=this._items[f].start-j;if(i===0){return f}if(i<0){g=f+1}else{h=f-1}}return ~g};e.prototype._binSearchByEndVal=function(j){var g=0,h=this._items.length-1;while(g<=h){var f=(h+g)>>1,i=this._items[f].end-j;if(i<0){g=f+1}else{if(i){h=f-1}else{return f}}}return ~g};return e})();c.renderBoundsCollection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(a){(function(e){var d=jQuery,g=Globalize;function f(m,k,j,i){var h=m;i=d.extend({nullString:"",format:""},i);function l(n){i.parser=i.parser||e.defaultParsers[n];if(!i.parser&&m!=null){e.errors.noParser(n)}return i.parser}k=k||m!=null&&typeof m;j=j||k;if(!j){return m}if(j=="string"){l(k);if(!i.parser){return m}return i.parser.toStr(m,i.culture,i.format,i.nullString,true)}l(j);if(!i.parser){return m}m=i.parser.parse(m,i.culture,i.format,i.nullString,true);if(isNaN(m)&&m!=null&&e.util.isNumeric(m)){if(i.ignoreError){return h}e.errors.cantConvert(j,h)}return m}e.convert=f;e.defaultParsers={string:{parse:function(k,j,l,i,h){switch(k){case null:return null;case i:if(h){return null}case undefined:case"&nbsp":return"";default:return""+k}},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return""+k}},number:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"n",j.name)}},currency:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}if(k==="string"){l=l.replace(j.numberFormat.currency.symbol,"")}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"c",j.name)}},datetime:{parse:function(m,j,n,i,h){var l;if(m instanceof Date){return m}if(!m||(m==="&nbsp;")||(m===i&&h)){return null}l=/^\/Date\((\d+)\)\/$/.exec(m);if(l){return new Date(parseInt(l[1],10))}var k=g.parseDate(m,n,j.name);if(k==null||isNaN(k)){k=Date.parse(m);k=isNaN(k)?NaN:new Date(k)}return k},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"d",j.name)}},"boolean":{parse:function(k,j,l,i,h){var m=typeof(k);if(m==="number"){return k!=0}if(m==="boolean"){return k}if(m==="string"){k=d.trim(k)}if(!k||(k==="&nbsp;")||(k===i&&h)){return null}switch(k.toLowerCase()){case"true":return true;case"false":return false}return NaN},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return(k)?"true":"false"}}};function c(h){return function(){if(!g){e.util.logError(e.errors.noGlobalize.create().message)}return h.apply(this,arguments)}}d.each(e.defaultParsers,function(h,i){i.parse=i.parse&&c(i.parse);i.toStr=i.toStr&&c(i.toStr)})})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(a){(function(c){(function(f){(function(g){g.Connective={AND:"and",OR:"or"};function i(l){function k(o){var m=[];if(o.length===0){return m}var n=g.Connective.AND;c.util.each(o,function(q,r){if(q==0&&c.util.isString(r)){var s=r.toLowerCase();if(s==g.Connective.AND||s==g.Connective.OR){n=s;return}}if($.isArray(r)){r=k(r);if(!r){return}if(r[0]===n||r.length==2){r.shift();m=m.concat(r);return}}else{var p=f.normalizeCondition(r);if(!p){return}p.property=r.property;r=p}m.push(r)});if(m.length==0){return null}else{m.unshift(n);return m}}return k(l)}function j(l){if(!$.isArray(l)){return null}var k={isEmpty:true,original:l,normalized:i(l),func:null};if(k.normalized==null){k.func=function(m){return true}}else{k.isEmpty=false;k.func=function(m){function n(q){var o=q[0]===g.Connective.AND,p=o?c.util.every:c.util.some;return p(q,function(s,r){if(r===0){return o}if($.isArray(s)){return n(s)}else{var t=c.util.getProperty(m,s.property);return s.op.apply(t,s.value)}})}return n(k.normalized)}}return k}function h(k){return j(k)||c.filtering.compile(k)}g.compile=h})(f.extended||(f.extended={}));var e=f.extended})(c.filtering||(c.filtering={}));var d=c.filtering})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var g=jQuery;var f=b.data;var e=f.filtering.extended;var d=(function(){function i(j){this.real=j;this._updatingFilter=false;this._overrideFilter();this._makeMemberProxies()}i.prototype._overrideFilter=function(){var j=this;this.filter=f.observable(this.real.filter());this.filter.subscribe(function(k){if(j.real.filter()!==k&&!j._updatingFilter){j.refresh({filter:k})}});this.real.filter.subscribe(function(k){if(k!==j._lastSetFilter){j.filter(k)}})};i.prototype.refresh=function(j,l){if(typeof l==="undefined"){l=false}j=g.extend({},j);var k=j.filter;j.filter=this._coerceFilter(j.filter);this._lastSetFilter=j.filter;this._updatingFilter=true;try{if(g.isFunction(j.filter)&&!g.isFunction(k)){this.filter(k)}else{this.filter(j.filter)}}finally{this._updatingFilter=false}return this.real.refresh(j,l)};i.prototype._makeMemberProxies=function(){var j=this;f.util.each(this.real,function(k,l){if(!g.isFunction(l)||j[k]||k.charAt(0)==="_"){return}j[k]=g.isFunction(l.subscribe)?l:function(){return l.apply(j.real,arguments)}})};i.create=function h(j){return new i(j)};i.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(k){var j=[];g.each(k,function(o,l){if(!g.isArray(l)){l=[l]}else{var m=f.util.isString(l[0])&&l[0].toLowerCase();if(m===e.Connective.AND||m===e.Connective.OR){j.push(l);return}}var n=[];g.each(l,function(q,r){var p=f.filtering.normalizeCondition(r);if(p){p.property=o;n.push(p)}});if(n.length>0){j.push(n)}});return j.length>0?j:null};i.prototype._coerceFilter=function(j){if(g.isArray(j)){return e.compile(j).func}else{if(!g.isPlainObject(j)){return j}}j=g.extend(true,{},j);var l={};g.each(j,function(o,m){if(!g.isArray(m)){m=[m]}if(l){var n=f.util.isString(m[0])&&m[0].toLowerCase();if(m.length==1||m.length==2&&(n==="and"||n==="or")){l[o]=m[m.length-1];return}}j[o]=m;l=null});if(l){return l}var k=this._convertComplexPropertyFilterToExtendedFilterFormat(j);return e.compile(k).func};i.prototype._unsafeReplace=function(j,k){(this.real).sourceArray[j]=k;(this.real).local[j]=k};i.prototype._unsafeSplice=function(j,l,k){if(arguments.length===2){(this.real).sourceArray.splice(j,l);(this.real).local.splice(j,l)}else{(this.real).sourceArray.splice(j,l,k);(this.real).local.splice(j,l,k)}};i.prototype._unsafePush=function(j){(this.real).sourceArray.push(j);(this.real).local.push(j)};return i})();c.GridDataView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijlightbox";!window.S&&window.swfobject&&(window.S={flash:window.swfobject});var i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype._keyDownHandler=function(t){var n=this.options,r=this,i=e.getKeyCodeEnum();if(t.keyCode&&t.keyCode===i.ESCAPE){r._isFullSize()?r._toggleFullSize():n.closeOnEscape&&r._close(),t.preventDefault();return}if(n.keyNav&&t.keyCode)switch(t.keyCode){case i.LEFT:case i.DOWN:r.back(),t.preventDefault();break;case i.RIGHT:case i.UP:r.next(),t.preventDefault();break;case i.HOME:n.groupItems.length>0&&r.show(0),t.preventDefault();break;case i.END:n.groupItems.length>0&&r.show(n.groupItems.length-1),t.preventDefault()}},r.prototype._create=function(){var e=this.options,t=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e.groupItems||(e.groupItems=[]),this._defaults={transAnimation:{animated:"fade",duration:400,easing:"linear"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"linear"},textHideOption:{duration:300,easing:"linear"}},this._parse(),this.container=n("<div/>").addClass("wijmo-wijlightbox "+e.wijCSS.widget+" wijmo-wijlightbox-controls-"+e.controlsPosition).css("z-index",e.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",n.proxy(t,"_keyDownHandler")).appendTo(document.body).hide(),this.frame=n("<div></div>").addClass(["wijmo-wijlightbox-frame",e.wijCSS.content,e.wijCSS.cornerAll,e.wijCSS.helperClearFix].join(" ")).appendTo(this.container),this.content=n("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame),e.activeIndex===undefined?(typeof e.activeIndex!="number"&&e.cookie&&(e.activeIndex=parseInt(t._cookie(),10)),e.activeIndex=e.activeIndex||(e.groupItems.length?0:-1)):e.activeIndex===null&&(e.activeIndex=-1),e.activeIndex=e.activeIndex>=0&&e.groupItems[e.activeIndex]||e.activeIndex<0?e.activeIndex:0,this._initClickBehavior(),this._createTimerBar(),this._createDialogButtons(),this._createCtrlButtons(),this._createText(),this._createCounter(),this._refreshCounter(),this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){t._addState("hover",n(this))},mouseout:function(){t._removeState("hover",n(this))},mousedown:function(){t._addState("active",n(this))},mouseup:function(){t._removeState("active",n(this))}}),this._groupMode()&&this._createNavButtons(),this._initHoverBehavior(),this.container.width(this.frame.outerWidth())},r.prototype.destroy=function(){var e=this.options,t=this;return this._hideWaiting(),this._hideOverlay(),e.cookie&&this._cookie(null,e.cookie),this.container.remove(),n.Widget.prototype.destroy.apply(t,arguments),t},r.prototype._setOption=function(e,t){var r=this.options[e];n.Widget.prototype._setOption.apply(this,arguments);switch(e){case"groupItems":this.options.activeIndex>=t.length?this.show(t.length-1):this.options.activeIndex<0&&t.length?this.show(0):this.show(this.options.activeIndex);break;case"activeIndex":this.show(t);break;case"textPosition":this._resetText();break;case"clickPause":this._initClickBehavior();break;case"showNavButtons":this._createNavButtons();break;case"showControlsOnHover":this._initHoverBehavior();break;case"controlsPosition":this._set_controlsPosition(r,t)}},r.prototype._set_controlsPosition=function(e,t){e!==t&&(this._removeCounter(),this._removeNavButtons(),this.container.removeClass("wijmo-wijlightbox-controls-outside wijmo-wijlightbox-controls-inside").addClass("wijmo-wijlightbox-controls-"+t),this._createCounter(),this._createNavButtons())},r.prototype._initClickBehavior=function(){var e=this.options,t=this;this.content.unbind("click"),e.clickPause?this._groupMode()&&this.content.click(function(){t[t.isPlaying()?"stop":"play"]()}):this._groupMode()&&this.content.click(function(r){if(t.isPlaying())return!1;var i=n.extend({},n(this).offset(),{width:n(this).outerWidth(!0),height:n(this).outerHeight(!0)});r.pageX>=i.left&&r.pageX<i.left+i.width/2?t.backBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.back():t.nextBtn.hasAllClasses(e.wijCSS.stateDisabled)||t.next()})},r.prototype._initHoverBehavior=function(){var e=this.options,t=this;this.frame.unbind(".wijlightbox"),e.showControlsOnHover&&this.frame.bind({"mouseenter.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._showAccessories(!0)},"mouseleave.wijlightbox":function(){if(t.container.data("moving.wijlightbox"))return!1;t._hideAccessories(!0)},"mousemove.wijlightbox":function(){t.container.data("moving.wijlightbox")===!1&&t.container.data("accessvisible.wijlightbox")===!1&&t.frame.trigger("mouseenter")}})},r.prototype._getPlugins=function(){var e=this.container.data("plugins.wijlightbox"),t,r,i;return e||(e={},window.navigator.plugins&&window.navigator.plugins.length?(t=[],n.each(window.navigator.plugins,function(e,n){t.push(n.name)}),t=t.join(","),i=t.indexOf("Flip4Mac")>-1,e={fla:t.indexOf("Shockwave Flash")>-1,qt:t.indexOf("QuickTime")>-1,wmp:!i&&t.indexOf("Windows Media")>-1,f4m:i}):(r=function(e){var t;try{t=new ActiveXObject(e)}catch(n){}return!!t},e={fla:r("ShockwaveFlash.ShockwaveFlash"),qt:r("QuickTime.QuickTime"),wmp:r("wmplayer.ocx"),f4m:!1}),this.container.data("plugins.wijlightbox",e)),e},r.prototype._sanitizeSelector=function(e){return e.replace(/:/g,"\\:")},r.prototype._getFragmentId=function(e){var t=/^#.+/,r=n(e).attr("href")||"",i=r.split("#")[0],s=n("base")[0];return i&&(i===window.location.toString().split("#")[0]||s&&i===s.attributes.href)&&(r=e.hash,e.href=r),t.test(r)?this._sanitizeSelector(r):""},r.prototype._parseLink=function(e){var t=this,r=this.options,i=n(e),s={href:undefined,player:undefined,img:undefined,gallery:undefined},o,u,a,f,l=["href","player","title","alt","height","width","gallery","wijvideosrc"];if(i.length>0&&i[0].tagName.toLowerCase()==="a"){o=i.attr("rel"),n.each(l,function(e,t){s[t]=i.attr(t)||""});if(!s.href)return;s.player||(s.player=r.player||t._getPlayerName(s.href)),u=i.find("img"),u&&u.length===0&&(u=i),u&&u.length>=1&&(n.each(["title","alt"],function(e,t){s[t]=u.attr(t)||s[t]}),s.img=u),o&&(a=o.match(/\[(.*?)\]/),a&&(s.gallery=a[1]||s.gallery),n.each(o.split(";"),function(e,t){var n=t.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);n&&(s[n[1]]=n[2])})),s.player==="inline"&&(s.href=t._getFragmentId(e)),s.gallery?(f=r.groupItems.length,r.groupItems[f]=s,i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,f),!1}})):i.bind({click:function(e){return e.stopPropagation(),e.preventDefault(),r.disabled||t._open(u,s),!1}})}},r.prototype._parse=function(){var e=this;this._parseLink(this.element),this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(t,n){e._parseLink(n)})},r.prototype._showAccessories=function(e){this.container.data("accessvisible.wijlightbox",!0),this._showNavButtons(e),this._showToolboxButtons(e),this._showCounter(e)},r.prototype._hideAccessories=function(e){this.container.data("accessvisible.wijlightbox",!1),this._hideNavButtons(e),this._hideToolboxButtons(e),this._hideCounter(e)},r.prototype._groupMode=function(){var e=this.options;return e.groupItems&&e.groupItems.length>1},r.prototype._resetText=function(){this._removeText(),this._createText()},r.prototype._createText=function(e){var t=this,r=t.options,i,s,o,u,a;if(r.textPosition==="none")return;if(this.container.find(".wijmo-wijlightbox-text").length)return;i=r.textPosition.toLowerCase(),s=n("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+i+" "+r.wijCSS.content+" "+r.wijCSS.helperClearFix),u=n("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+i+" "+r.wijCSS.helperClearFix).appendTo(s),a=n("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+i+" "+r.wijCSS.helperClearFix).appendTo(s);if(r.textPosition==="inside")s.addClass(r.wijCSS.content+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame);else if(r.textPosition==="outside")s.addClass([r.wijCSS.content,r.wijCSS.cornerAll,r.wijCSS.helperClearFix].join(" ")).width(this.frame.width()).appendTo(this.container);else if(r.textPosition==="overlay"||r.textPosition==="titleOverlay")o=n("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+i+" "+r.wijCSS.helperClearFix).width(this.frame.width()).appendTo(this.frame),s.width(this.frame.width()).appendTo(this.frame),r.textPosition==="titleOverlay"&&s.bind({mouseenter:function(){o.stop(),s.stop();var e=u.outerHeight(!0)+a.outerHeight(!0),i=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)},mouseleave:function(){o.stop(),s.stop();var e=u.height(),i=n.extend({},t._defaults.textHideOption,r.textHideOption,{queue:!1});o.animate({height:e},i),s.animate({height:e},i)}});this._refreshText(e)},r.prototype._removeText=function(){this.container.find(".wijmo-wijlightbox-text,.wijmo-wijlightbox-mask").remove()},r.prototype._getActiveItem=function(){var e=this.options;return e.groupItems&&e.groupItems.length&&e.activeIndex>=0&&e.activeIndex<e.groupItems.length?e.groupItems[e.activeIndex]:null},r.prototype._refreshText=function(e){var t=this,r=this.options,i,s,o,u,a;if(r.textPosition==="none")return;i=this.container.data("item.wijlightbox")||this._getActiveItem();if(!i)return;s=this.container.find(".wijmo-wijlightbox-text"),o=this.container.find(".wijmo-wijlightbox-title"),u=this.container.find(".wijmo-wijlightbox-detail"),a=this.container.find(".wijmo-wijlightbox-mask"),a.stop(),s.stop(),o.html(i.title),u.html(i.alt),r.textPosition==="outside"&&s.width(this.frame.width());var f=o.outerHeight(!0),l=u.outerHeight(!0),c=n.extend({},t._defaults.textShowOption,r.textShowOption,{queue:!1});if(r.textPosition==="overlay"||r.textPosition==="titleOverlay"){var h=f+(r.textPosition==="overlay"?l:0);s.height(0),a.height(0),s.animate({height:h},c),a.animate({height:h},c)}else e?s.height(f+l):(s.height(0),s.animate({height:f+l},c))},r.prototype._addState=function(e,t){t.is(":not(."+this.options.wijCSS.stateDisabled+")")&&t.addClass("ui-state-"+e)},r.prototype._removeState=function(e,t){t.removeClass("ui-state-"+e)},r.prototype._createNavButtons=function(){var e=this,t=this.options;if(!t.showNavButtons||!this._groupMode()){this._removeNavButtons();return}this.backBtn||(this.backBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerRight:t.wijCSS.cornerLeft)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowLeft+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.back(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}})),this.nextBtn||(this.nextBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerLeft:t.wijCSS.cornerRight)).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrowRight+"'></span>").hide().appendTo(this.frame).bind({click:function(){return n(this).hasAllClasses(t.wijCSS.stateDisabled)||e.next(),!1},mouseover:function(){e._addState("hover",n(this))},mouseout:function(){e._removeState("hover",n(this))},mousedown:function(){e._addState("active",n(this))},mouseup:function(){e._removeState("active",n(this))}}))},r.prototype._removeNavButtons=function(){this.backBtn&&(this.backBtn.remove(),this.backBtn=undefined),this.nextBtn&&(this.nextBtn.remove(),this.nextBtn=undefined)},r.prototype._refreshNavButtons=function(){var e=this.options,t;this.backBtn&&(t=e.activeIndex===0?"addClass":"removeClass",this.backBtn[t](e.wijCSS.stateDisabled)),this.nextBtn&&(t=e.activeIndex>=e.groupItems.length-1?"addClass":"removeClass",this.nextBtn[t](e.wijCSS.stateDisabled))},r.prototype._showNavButtons=function(e){if(this.isPlaying())return;this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideNavButtons=function(e){this.container.find(".wijmo-wijlightbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createToolbox=function(){this.toolBox||(this.toolBox=n("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame))},r.prototype._showToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideToolboxButtons=function(e){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(!0,!0).fadeOut(e?600:0)},r.prototype._createCtrlButtons=function(){var e=this,t=this.options,r=t.wijCSS;if(!t.ctrlButtons||t.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var i=t.ctrlButtons.split("|");i.length===1&&i[0]===t.ctrlButtons&&(i=t.ctrlButtons.split(",")),n.each(i,function(i,s){s=n.trim(s),s==="play"&&!this.playBtn?e.playBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button"," wijmo-wijlightbox-toolbox-button-play ",r.stateDefault,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconPlay+"'></span>").hide().click(function(){return e.isPlaying()?e.stop():(t.activeIndex>=t.groupItems.length-1&&e.show(0),e.play()),!1}):s==="stop"&&!this.stopBtn&&(e.stopBtn=n("<a href='#'/>").addClass(["wijmo-wijlightbox-toolbox-button","wijmo-wijlightbox-toolbox-button-stop",r.stateDefault,r.stateDisabled,r.cornerAll].join(" ")).append("<span class='"+r.icon+" "+r.iconStop+"'></span>").hide().click(function(){return e.isPlaying()&&(e.stop(),e.show(0)),!1}))}),this.stopBtn&&this.stopBtn.appendTo(this.toolBox),this.playBtn&&this.playBtn.appendTo(this.toolBox)},r.prototype._removeCtrlButtons=function(){this.playBtn&&(this.playBtn.remove(),this.playBtn=undefined),this.stopBtn&&(this.stopBtn.remove(),this.stopBtn=undefined)},r.prototype._refreshCtrlButtons=function(){var e=this.options.wijCSS;if(this.playBtn){var t=this.playBtn.find("."+e.icon);t&&(t.removeClass(e.iconPause+" "+e.iconPlay),t.addClass(this.isPlaying()?e.iconPause:e.iconPlay))}this.stopBtn&&this.stopBtn[this.isPlaying()?"removeClass":"addClass"](e.stateDisabled)},r.prototype._createDialogButtons=function(){var e=this,t=this.options,r;if(!t.dialogButtons||t.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox(),r=t.dialogButtons.split("|"),r.length===1&&r[0]===t.dialogButtons&&(r=t.dialogButtons.split(",")),n.each(r,function(r,i){i=n.trim(i),i==="close"&&!this.closeBtn?e.closeBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconClose+"'></span>").hide().click(function(){return e._close(),!1}):i==="fullSize"&&!this.fullBtn&&(e.fullBtn=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize "+t.wijCSS.stateDefault+" "+t.wijCSS.cornerAll).append("<span class='"+t.wijCSS.icon+" "+t.wijCSS.iconArrow4Diag+"'></span>").hide().click(function(){return e._toggleFullSize(),!1}))}),this.closeBtn&&this.closeBtn.appendTo(this.toolBox),this.fullBtn&&this.fullBtn.appendTo(this.toolBox),this.btnSep||(this.btnSep=n("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox))},r.prototype._removeDialogButtons=function(){this.closeBtn&&(this.closeBtn.remove(),this.closeBtn=undefined),this.fullBtn&&(this.fullBtn.remove(),this.fullBtn=undefined)},r.prototype._refreshDialogButtons=function(){var e=this.options.wijCSS;if(this.fullBtn){var t=this.fullBtn.find("."+e.icon);t&&(t.removeClass(e.iconArrow4Diag+" "+e.iconNewWin),t.addClass(this._isFullSize()?e.iconNewWin:e.iconArrow4Diag))}},r.prototype._createTimerBar=function(){var e=this,t=e.options;if(!t.showTimer||!e._groupMode()){e._removeTimerBar();return}e._createToolbox(),e.timerBar||(e.timerBar=n("<div></div>").addClass("wijmo-wijlightbox-timerbar "+t.wijCSS.content+" ui-priority-secondary "+t.wijCSS.cornerAll).appendTo(e.toolBox),e.timerMeter=n("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value "+t.wijCSS.content+" "+t.wijCSS.cornerAll).appendTo(e.toolBox))},r.prototype._removeTimerBar=function(){this.timerMeter&&(this.timerMeter.remove(),this.timerMeter=undefined),this.timerBar&&(this.timerBar.remove(),this.timerBar=undefined)},r.prototype._createCounter=function(){var e=this,t=e.options;if(!t.showCounter||!e._groupMode()){e._removeCounter();return}e.counter||(e.counter=n("<div></div>").addClass("wijmo-wijlightbox-counter "+t.wijCSS.stateDefault+" "+(t.controlsPosition==="inside"?t.wijCSS.cornerTL:t.wijCSS.cornerAll)).hide().appendTo(e.frame))},r.prototype._removeCounter=function(){this.counter&&(this.counter.remove(),this.counter=undefined)},r.prototype._refreshCounter=function(e){var t=this,r=this.options,i="";if(!this.counter||!this._groupMode())return;this.counter.empty();if(r.showCounter&&r.groupItems.length>1&&this.counter){e===undefined&&(e=r.activeIndex);var s=r.groupItems.length;if(r.counterType==="sequence"){var o=0,u=s,a=parseInt(r.counterLimit,10)||0;if(a>=2&&a<s){var f=Math.floor(a/2);o=Math.min(u-a,Math.max(o,e-f)),u=Math.min(u,o+a)}while(o!==u)n("<a></a>").addClass("wijmo-wijlightbox-counter-item "+r.wijCSS.content+" "+r.wijCSS.stateDefault+(o===e?" wijmo-wijlightbox-counter-active "+r.wijCSS.stateActive:"")).text((++o).toString()).appendTo(this.counter);this.counter.find("a").click(function(e,r){return n(this).hasClass("wijmo-wijlightbox-counter-active")?!1:(t.show(parseInt(n(this).text(),10)-1),!1)})}else{var l=r.counterFormat||"[i] of [n]";i=l.replace("[i]",e+1),i=i.replace("[n]",s),n("<span></span>").text(i).appendTo(this.counter)}}},r.prototype._showCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeIn(e?600:0,function(){n(this).css("opacity","")})},r.prototype._hideCounter=function(e){this.container.find(".wijmo-wijlightbox-counter").stop(!0,!0).fadeOut(e?600:0)},r.prototype._cookie=function(e,t){var r=this.cookie||(this.cookie=this.options.cookie.name);return n.cookie.apply(null,[r].concat(n.makeArray(arguments)))},r.prototype._showOverlay=function(){if(this.container.data("overlay.wijlightbox"))return;this.container.data("overlay.wijlightbox",new n.wijmo.wijlightbox.overlay(this))},r.prototype._hideOverlay=function(){var e=this.container.data("overlay.wijlightbox");if(!e)return;e.close(),this.container.removeData("overlay.wijlightbox")},r.prototype._hasOverlay=function(){return this.container.hasData("overlay.wijlightbox")},r.prototype._showWaiting=function(){if(this.container.data("waiting.wijlightbox"))return;this.container.data("waiting.wijlightbox",new n.wijmo.wijlightbox.overlay(this,!0))},r.prototype._hideWaiting=function(){var e=this.container.data("waiting.wijlightbox");if(!e)return;e.close(),this.container.removeData("waiting.wijlightbox")},r.prototype._hasWaiting=function(){return this.container.hasData("waiting.wijlightbox")},r.prototype._getUrl=function(e){var t=this.options,n=typeof e=="string"?e:e.href,r=t.rootUrl;return r&&r.length>0&&(r.indexOf("//")===-1&&(r=window.location.protocol+"//"+window.location.host+(r.startsWith("/")?"":"/")+r),r.substr(r.length-1,1)!=="/"&&(r+="/"),n=r+(n.substr(0,1)==="/"?n.substr(1):n)),n},r.prototype._preload=function(){var e=this.options,t;for(t=Math.max(0,e.activeIndex);t<Math.min(e.activeIndex+5,e.groupItems.length);t++)e.groupItems[t].image||(e.groupItems[t].image=new Image,e.groupItems[t].image.src=this._getUrl(e.groupItems[t]))},r.prototype._slideAnimate=function(e,t,r){var i=["position","top","bottom","left","right","width","height"],s=n.setMode(t,e.mode||"show"),o=s==="show",u=e.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};n.save(t,i),t.show(),l=e.distance||t[a==="top"?"outerHeight":"outerWidth"](!0),n.createWrapper(t).css({overflow:"hidden"}),o&&t.css(a,f?isNaN(l)?parseInt("-"+l):-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,t.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){s==="hide"&&t.hide(),n.restore(t,i),n.removeWrapper(t),r()}})},r.prototype._slideTo=function(e,t,r,i,s){var o=this.options,u=this,a=e.getElement(),f,l,c,h,p,d,v,m;a.parent().is(".wijmo-wijlightbox-aniwrapper")?f=a.parent():(f=n.createWrapper(a).css({overflow:"hidden"}),f.removeClass("ui-effects-wrapper"),f.addClass("wijmo-wijlightbox-aniwrapper")),f.parent().is(".wijmo-wijlightbox-aniwrapper")?l=f.parent():(l=n.createWrapper(f).css({overflow:"hidden"}),l.removeClass("ui-effects-wrapper"),l.addClass("wijmo-wijlightbox-aniwrapper")),c=o.slideDirection||"horizontal",h=a.outerWidth(),p=a.outerHeight(),c==="horizontal"?(a.width(h).css("float",i?"left":"right"),f.width(2*h).css({left:i?0:-1*h,position:"absolute"})):(a.height(p),f.width(h).css({top:i?0:-1*p,position:"absolute"}).height(2*p)),t.appendTo(f),d=t.getElement(),c==="horizontal"?d.width(h).css("float",i?"left":"right"):d.height(p),this.container.data("animating.wijlightbox",!0),v=function(){a=f.children(":last");while(a.parent().is(".wijmo-wijlightbox-aniwrapper"))a.parent().replaceWith(a);a.css({"float":"",width:"",height:""}),o.autoSize&&!u._isFullSize()?u._resize(s):(n.isFunction(s)&&s.apply(u),u._refreshText())},m={mode:"hide",direction:c==="horizontal"?i?"left":"right":i?"up":"down",easing:r.easing,distance:c==="horizontal"?h:p,duration:r.duration},n.effects?f.effect("slide",m,v):u._slideAnimate(m,f,v)},r.prototype._moveFrom=function(e,t,r){var i=this,s=this.options,o;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t),i._removeText();if(t.animated==="none"||t.duration<=0){i._createText(),n.isFunction(r)&&r.apply(i),this.container.data("moving.wijlightbox",!1);return}o=n.extend({width:i.frame.width(),height:i.frame.height()},i.container.offset()),i.frame.width(e.width).height(e.height),i.container.css({left:e.left,top:e.top,width:i.frame.outerWidth(),position:"absolute",opacity:""}),i._moveTo(o,t,function(){i.frame.width(o.width),i.container.width(i.frame.outerWidth()),i._createText(),i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)})},r.prototype._moveTo=function(e,t,r){var i=this,s=this.options;n.isFunction(t)?(r=t,t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation)):t=n.extend({},i._defaults.resizeAnimation,s.resizeAnimation,t);var o=t.duration/2,u=t.animated,a=i._isOpen(),f=u==="wh"?{left:e.left,top:undefined}:{top:e.top},l=u==="wh"?{top:e.top,left:undefined}:{left:e.left},c=u==="wh"?{width:e.width,height:undefined}:{height:e.height},h=u==="wh"?{height:e.height,width:undefined}:{width:e.width};if(u==="wh"||u==="hw"){a&&i.container.animate(f,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(c,{duration:o,easing:t.easing,complete:function(){a&&i.container.animate(l,{duration:o,easing:t.easing,queue:!0}),i.frame.animate(h,{duration:o,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})}});return}a&&i.container.animate({left:e.left,top:e.top},{duration:t.duration,easing:t.easing,queue:!0}),i.frame.animate({width:e.width,height:e.height,opacity:1},{duration:t.duration,easing:t.easing,complete:function(){i.container.data("moving.wijlightbox",!1),n.isFunction(r)&&r.apply(i)}})},r.prototype.show=function(e){return this._show(e),this},r.prototype._resize=function(e){var t=this,r=n.extend({},t.container.offset(),{width:t.frame.width(),height:t.frame.height()});t._size(),t._isOpen()&&t._position(),t._moveFrom(r,e)},r.prototype._onAfterShow=function(){var e=this,t=this.options,n;e._refreshNavButtons(),e.container.data("animating.wijlightbox",!1),t.modal||e._hideOverlay(),n={index:t.activeIndex,item:t.groupItems[t.activeIndex]},e._trigger("show",null,n),e._startTimer()},r.prototype._show=function(e,t,r){var i=this,s=this.options,o,u;if(this.container.data("showing.wijlightbox"))return o=[function(){i._show(e,t,r)}],this.container.queue("showqueue",o),this;u=s.activeIndex;if(!n.isPlainObject(e)){u=e;if(u<0||u>=s.groupItems.length)return this;e=s.groupItems[u]}e&&this.container.data("item.wijlightbox",e),this._groupMode()&&this._preload(),n.isFunction(t)&&(r=t,t=undefined),r||(r=i._onAfterShow);var a={index:u,item:e};if(i._trigger("beforeShow",null,a)===!1)return this;this.container.data("showing.wijlightbox",!0);var f=function(){n.isFunction(r)&&r.apply(i),i.container.data("showing.wijlightbox",!1),i.container.dequeue("showqueue"),i.container.clearQueue("showqueue")};i._refreshCounter(u);var l=this.container.data("player.wijlightbox"),c,h=function(){i.container.data("playerwidth.wijlightbox",c.width),i.container.data("playerheight.wijlightbox",c.height);var e=n.extend({},i._defaults.transAnimation,s.transAnimation);if(s.activeIndex===u||e.animated==="none"||e.duration<=0||!i._isOpen()){s.activeIndex=u,l&&l.remove(),c.appendTo(i.content),i._refreshText(),f();return}s.cookie&&i._cookie(s.activeIndex,s.cookie);if(e.animated==="slide")t=t===undefined?u>s.activeIndex:t,i._slideTo(l,c,e,t,f),s.activeIndex=u;else{s.activeIndex=u;var r=function(){c&&(c.appendTo(i.content,!0),c.fadeIn(e.duration,f))};n.browser.msie&&i.frame.trigger("mouseleave");var o=function(){l&&l.remove(),s.autoSize&&!i._isFullSize()?i._resize(r):(r(),i._refreshText())};l?l.fadeOut(e.duration*.4,o):o()}};return c=this._createPlayer(e,h),this},r.prototype.next=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex+1;return e.loop&&(t%=e.groupItems.length),t<e.groupItems.length?(this._show(t,!0),!0):!1},r.prototype.back=function(){var e=this.options;if(!this._groupMode())return!1;var t=e.activeIndex-1;return e.loop&&(t=t<0?e.groupItems.length-1:t),t>=0?(this._show(t,!1),!0):!1},r.prototype.adjustPosition=function(){this._position()},r.prototype.isPlaying=function(){return!!this.container.data("playing.wijlightbox")},r.prototype._startTimer=function(){if(!this.isPlaying()||!this._groupMode())return;var e=this.options,t=this,n;e.showTimer===!0?(this.timerMeter||this._createTimerBar(),n=this.timerBar.width(),t.timerMeter.width("0"),t.timerMeter.animate({width:n},e.delay,null,function(){t.isPlaying()&&!t.next()&&t.stop()})):window.setTimeout(function(){t.isPlaying()&&!t.next()&&t.stop()},e.delay)},r.prototype.play=function(){if(!this._groupMode())return!1;this.container.data("playing.wijlightbox")||this.container.data("playing.wijlightbox",!0),this._refreshCtrlButtons(),this._hideNavButtons(),this._startTimer()},r.prototype.stop=function(){this.container.removeData("playing.wijlightbox"),this._refreshCtrlButtons(),this._removeTimerBar()},r.prototype._size=function(e,t){var r=this.options,i=r.width,s=r.height,o=r.autoSize?this.container.data("playerwidth.wijlightbox")||i:i,u=r.autoSize?this.container.data("playerheight.wijlightbox")||s:s,a,f=u/o;if(typeof e=="boolean")t=e;else if(n.isPlainObject(e)&&"width"in e&&"height"in e)i=e.width,s=e.height;else{a=this.container.data("player.wijlightbox"),r.autoSize&&a&&a.name==="img"&&(o>i&&(o=i,u=Math.round(i*f)),u>s&&(u=s,o=Math.round(s/f))),i=o,s=u;if(t)return{width:i,height:s}}this.frame.width(i).height(s),this.container.width(this.frame.outerWidth(!0))},r.prototype._position=function(){var e=this.options,t=[],r=[0,0],i,s=e.position;if(s){if(typeof s=="string"||typeof s=="object"&&"0"in s)t=s.split?s.split(" "):[s[0],s[1]],t.length===1&&(t[1]=t[0]),n.each(["left","top"],function(e,n){+t[e]===t[e]&&(r[e]=t[e],t[e]=n)}),s={my:t.join(" "),at:t.join(" "),offset:r.join(" ")};s=n.extend({},e.position,s)}i=this.container.is(":visible"),i||this.container.show(),this.container.css({top:0,left:0}).position(s),i||this.container.hide()},r.prototype._getRelRect=function(e){var t;return e&&(n.isPlainObject(e)&&"left"in e&&"top"in e&&"width"in e&&"height"in e?t=n.merge({},e):e=n(e),e.jquery&&e.length&&(t=n.extend({},e.offset(),{width:e.width(),height:e.height()}))),t},r.prototype._close=function(e){var t=this.options,r=this,i,s,o;if(!this._isOpen())return;s={rel:e};if(!1===this._trigger("beforeClose",null,s))return;e=s.rel,!e&&this._groupMode()&&(e=t.groupItems[t.activeIndex].img),this.container.data("moving.wijlightbox",!0),this._hideAccessories(!1),this._hideWaiting(),this._hideOverlay(),this.stop(),o=function(){r._removePlayer(),r.container.hide(),r._trigger("close"),r.container.unbind("keypress.wijlightbox"),r.container.removeData("open.wijlightbox").removeData("rect.wijlightbox").removeData("moving.wijlightbox").removeData("fullsize.wijlightbox"),n(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},i=this._getRelRect(e),i||this.container.data("rect.wijlightbox")&&(i=this.container.data("rect.wijlightbox")),this._removeText();if(i){this._moveTo(i,{animated:"sync",duration:200},o);return}return o.call(),this},r.prototype._isOpen=function(){return!!this.container.data("open.wijlightbox")},r.prototype._open=function(e,t){if(this._isOpen())return;var r=this.options,i=this;this.toolBox&&(this._isFullSize()?this.toolBox.css({top:"2px",right:"4px"}):this.toolBox.css({top:"",right:""}));var s=function(){r.modal&&i._showOverlay(),r.showControlsOnHover?this._hideAccessories(!1):this._showAccessories(!1);var t=i._getRelRect(e);i.container.css("opacity",0),i.container.show(),i._size(),i._createText(!0),i._refreshText(!0),i._position(),i.container.data("open.wijlightbox",!0);if(e&&t)i.container.data("rect.wijlightbox",t),i._moveFrom(t,{animated:"sync"});else{var s=n.extend({},i._defaults.transAnimation,r.transAnimation);s.animated==="fade"?(i.container.hide(),i.container.fadeIn(s.duration,function(){i._createText()})):i._createText(),this.container.data("moving.wijlightbox",!1)}n(document).bind("keydown.wijlightbox",n.proxy(i,"_keyDownHandler")).bind("click.wijlightbox",function(e){var t=e.target||e.srcElement;i._isOpen()&&!!r.closeOnOuterClick&&t!==i.container.get(0)&&n(t).parents().index(i.container)<0&&i._close()}),r.autoPlay&&this.play(),i._refreshNavButtons(),i._refreshDialogButtons();var u={index:r.activeIndex,item:r.groupItems[r.activeIndex]};i._trigger("show",null,u),i._trigger("open")};return this.container.data("moving.wijlightbox",!0),this._show(t,!0,s),this},r.prototype._getWinRect=function(){var e=n(window);return n.extend({width:e.width(),height:e.height()},e.offset()||{left:2,top:2})},r.prototype._resizeHandler=function(){var e=this;e._removeText(),e._size(e._getWinRect()),e._createText()},r.prototype._isFullSize=function(){return!!this.container.data("fullsize.wijlightbox")},r.prototype._toggleFullSize=function(){var e=this,t=n(window);if(!e._isOpen())return;if(this._isFullSize())e.toolBox&&e.toolBox.css({top:"",right:""}),this.container.data("fullsize.wijlightbox",!1),t.unbind("resize.wijlightbox",n.proxy(this,"_resizeHandler")),e._resize(function(){e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())});else{this.container.data("fullsize.wijlightbox",!0),t.bind("resize.wijlightbox",n.proxy(this,"_resizeHandler"));var r=e._getWinRect(),i=this.frame.borderSize();r.width-=i.width,r.height-=i.height,e._removeText(),e._moveTo(r,{animated:"sync"},function(){e.toolBox&&e.toolBox.css({top:"2px",right:"4px"}),e.frame.width(r.width),e.container.width(e.frame.outerWidth()),e._createText(),e._adjustPlayerSize(e.content.innerWidth(),e.content.innerHeight())})}this._refreshDialogButtons()},r.prototype._getExt=function(e){var t,n,r=/[0-9a-z]+$/i,i=e.indexOf("?");return i>-1&&(e=e.substring(0,i)),n=e.match(r),n&&(t=n[0].toLowerCase()),t},r.prototype._getPlayerName=function(e){if(e.indexOf("#")===0||e.indexOf("#")>0&&e.indexOf(document.location.href)===0)return"inline";var t=["bmp","gif","jpg","jpeg","png"],r=["swf"],i=["flv","m4v"],s=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],o=["asf","avi","mpg","mpeg","wm","wmv"],u=["mp4","mpg","mpeg","ogg","ogv"],a=this._getExt(e);if(a){if(n.inArray(a,t)>=0)return"img";if(n.inArray(a,r)>=0)return"swf";if(n.inArray(a,i)>=0)return"flv";if(n.inArray(a,o)>=0)return"wmp";if(n.inArray(a,s)>=0)return"qt";if(n.inArray(a,u)>=0)return"wijvideo"}return"iframe"},r.prototype._adjustPlayerSize=function(e,t){var n=this.container.data("player.wijlightbox");n&&n.adjustSize&&n.adjustSize(e,t)},r.prototype._removePlayer=function(){var e=this.container.data("player.wijlightbox");e&&(e.remove(),this.container.data("player.wijlightbox",null))},r.prototype._createPlayer=function(e,t,r){var i=e.player;if(!n.isFunction(n.wijmo.wijlightbox[i]))throw"unknown player "+i;var s=this,o=!1,u,a=function(){o=!0,this._hideWaiting(),n.isFunction(t)&&window.setTimeout(function(){t.apply(s)},1)},f=function(){this._hideWaiting(),n.isFunction(r)&&r.apply(s)};return u=new n.wijmo.wijlightbox[i](this,e,a,f),this.container.data("player.wijlightbox",u),window.setTimeout(function(){o===!1&&s._showWaiting()},200),u},r}(e.wijmoWidget);t.wijlightbox=i;var s=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijlightbox')",this.textPosition="overlay",this.width=600,this.height=400,this.autoSize=!0,this.player="",this.groupItems=null,this.rootUrl="",this.ctrlButtons="",this.dialogButtons="close",this.counterType="default",this.counterFormat="[i] of [n]",this.counterLimit=10,this.showCounter=!0,this.showNavButtons=!0,this.showTimer=!1,this.controlsPosition="inside",this.showControlsOnHover=!0,this.clickPause=!1,this.keyNav=!1,this.modal=!1,this.position={my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=n(this).css(e).offset().top;t<0&&n(this).css("top",e.top-t)}},this.zIndex=1e3,this.closeOnEscape=!0,this.closeOnOuterClick=!0,this.autoPlay=!1,this.delay=2e3,this.loop=!0,this.cookie=null,this.transAnimation={animated:"fade",duration:400,easing:"linear"},this.slideDirection="horizontal",this.resizeAnimation={animated:"sync",duration:400},this.textShowOption={duration:300,easing:"linear"},this.textHideOption={duration:300,easing:"linear"},this.showMovieControls=!0,this.autoPlayMovies=!0,this.flashParams={bgcolor:"#000000",allowfullscreen:!0},this.flashVars={},this.flashVersion="9.0.115",this.flvPlayer="player\\player.swf",this.flashInstall="player\\expressInstall.swf",this.beforeShow=null,this.show=null,this.open=null,this.beforeClose=null,this.close=null}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijlightbox",i.prototype),n.extend(n.wijmo.wijlightbox,{img:function(e,t,r,i){this.name="img",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var s=this;n("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var i=n(this);s.width=t.width?parseInt(t.width,10):i.width(),s.height=t.height?parseInt(t.height,10):i.height(),i.remove(),r&&n.isFunction(r)&&r.apply(e)},error:function(){n(this).remove(),i&&n.isFunction(i)&&i.apply(e)}}).attr("src",this.url)},swf:function(e,t,r,i){this.name="swf";var s=e.options;this.id="flashhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)},iframe:function(e,t,r,i){this.name="swf",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),t.width&&(this.width=parseInt(t.width,10)),t.height&&(this.height=parseInt(t.height,10)),this.$iframe=n("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(e.content).bind("load",function(){r&&n.isFunction(r)&&r.apply(e)}).attr("src",this.url)},inline:function(e,t,r,i){this.name="inline";var s=e.options,o=s.wijCSS,u="wijmo-wijlightbox-frame "+o.content;" "+o.cornerAll+" "+o.helperClearFix,this.lightbox=e,this.item=t,this.width=t.width?parseInt(t.width,10):s.width;if(t.height)this.height=parseInt(t.height,10);else{var a=n(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox '+o.widget+'">'+'<div class="'+u+'">'+'<div class="'+u+'">'+'<div class="wijmo-wijlightbox-content"> '+"</div></div></div></div>").appendTo(document.body).width(this.width);this.height=a.outerHeight(!0)+10,a.unwrap(),a.remove()}r&&n.isFunction(r)&&r.apply(e)},flv:function(e,t,r,i){this.name="flv";var s=e.options;this.id="flvhost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t);var o=20;this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wmp:function(e,t,r,i){var s=e.options,o;this.name="wmp",this.id="wmphost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),o=n.browser.msie?70:45,this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},qt:function(e,t,r,i){var s=e.options,o=16;this.name="qt",this.id="qthost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,s.showMovieControls&&(this.height+=o),r&&n.isFunction(r)&&r.apply(e)},wijvideo:function(e,t,r,i){var s=e.options;this.name="wijvideo",this.id="wijvideohost",this.lightbox=e,this.item=t,this.url=this.lightbox._getUrl(t),this.wijvideosrc=!t.wijvideosrc||t.wijvideosrc===""?null:this.lightbox._getUrl(t.wijvideosrc),this.width=t.width?parseInt(t.width,10):s.width,this.height=t.height?parseInt(t.height,10):s.height,r&&n.isFunction(r)&&r.apply(e)}}),n.extend(n.wijmo.wijlightbox.img.prototype,{appendTo:function(e,t){this.$element=n("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url),t&&this.$element.hide(),this.lightbox.options.transAnimation&&this.lightbox.options.transAnimation.animated=="fade"?(e.children().length&&e.empty(),this.$element.prependTo(e)):this.$element.appendTo(e)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.swf.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r=t.flashInstall,i=t.flashVersion,s=t.flashVars,o=t.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",i,r,s,o)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.iframe.prototype,{appendTo:function(e,t){t||this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(e,t){this.$iframe&&this.$iframe.fadeOut(e,t)},fadeIn:function(e,t){this.$iframe&&this.$iframe.fadeIn(e,t)},getElement:function(){return this.$iframe}}),n.extend(n.wijmo.wijlightbox.inline.prototype,{appendTo:function(e,t){this.$element=n(this.item.href).clone().appendTo(e),t||this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(e,t){this.$element&&this.$element.fadeOut(e,t)},fadeIn:function(e,t){this.$element&&this.$element.fadeIn(e,t)},getElement:function(){return this.$element}}),n.extend(n.wijmo.wijlightbox.flv.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(e);var t=this.lightbox.options,r="100%",i="100%",s=t.flvPlayer,o=t.flashInstall,u=t.flashVersion,a=n.extend({file:this.url,width:r,height:i,autostart:t.autoPlayMovies?"true":"false",controlbar:t.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},t.flashVars),f=n.extend({autostart:t.autoPlayMovies?"true":"false",allowscriptaccess:"always"},t.flashParams);S.flash.embedSWF(s,this.id,r,i,u,o,a,f)},remove:function(){S.flash.expressInstallCallback(),S.flash.removeSWF(this.id),this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wmp.prototype,{appendTo:function(e){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var t=this.lightbox.options,r='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',i={autostart:t.autoPlayMovies?1:0,url:undefined,uimode:undefined,showcontrols:undefined},s;n.browser.msie?(r+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"',i.url=this.url,i.uimode=t.showMovieControls?"full":"none"):(r+=' type="video/x-ms-wmv"',r+=' data="'+this.url+'"',i.showcontrols=t.showMovieControls?1:0),r+=">";for(s in i)r+='<param name="'+s+'" value="'+i[s]+'">';r+="</object>",this.$container.html(r)},remove:function(){if(n.browser.msie)try{window[this.id].controls.stop(),window[this.id].URL="movie"+now()+".wmv",window[this.id]=function(){}}catch(e){}this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.qt.prototype,{appendTo:function(e,t){this.$container=n("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(e);var r=this.lightbox.options,i=r.autoPlayMovies?"true":"false",s=r.showMovieControls?"true":"false",o=n.browser.msie?"<object":"<embed",u={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true",classid:undefined,codebase:undefined,type:undefined,src:undefined,autoplay:undefined,controller:undefined},a,f;n.browser.msie?(u.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",u.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"):(u.type="video/quicktime",u.src=this.url,u.autoplay=i,u.controller=s);for(a in u)u[a]&&(o+=" "+a+'="'+u[a]+'"');o+=">";if(n.browser.msie){var l={src:this.url,scale:"aspect",controller:s,autoplay:i};for(f in l)o+='<param name="'+f+'" value="'+l[f]+'">'}o+=n.browser.msie?"</object>":"</embed>",t&&e.hide(),this.$container.html(o),t&&e.show()},remove:function(){try{document[this.id].Stop(),document[this.id]=null}catch(e){}this.$container.remove()},fadeOut:function(e,t){t.call();return},fadeIn:function(e,t){t.call();return},getElement:function(){return this.$container}}),n.extend(n.wijmo.wijlightbox.wijvideo.prototype,{appendTo:function(e){var t=this.lightbox.options;this.$container=n("<video/>").css({overflow:"hidden"}).attr({width:this.width,height:this.height,autoPlay:t.autoPlayMovies?"true":"false",controls:t.showMovieControls?"controls":""}).appendTo(e),!this.url||n("<source/>").attr({src:this.url}).appendTo(this.$container),!this.wijvideosrc||n("<source/>").attr({src:this.wijvideosrc}).appendTo(this.$container),this.$container.wijvideo({fullScreenButtonVisible:!1})},remove:function(){this.$container.remove()},fadeOut:function(e,t){this.$container&&this.$container.fadeOut(e,t)},fadeIn:function(e,t){this.$container&&this.$container.fadeIn(e,t)},getElement:function(){return this.$container},adjustSize:function(e,t){this.$container.wijvideo("setWidth",e),this.$container.wijvideo("setHeight",t)}}),n.extend(n.wijmo.wijlightbox,{overlay:function(e,t){this.mask=n("<div></div>").addClass(e.options.wijCSS.overlay+" wijmo-wijlightbox-overlay"+(t?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()}).bind("click",function(){return e.options.closeOnOuterClick&&e._close(),!1}),n.fn.bgiframe&&this.mask.bgiframe();if(t){this.mask.css("z-index",this.zIndex);var r=n("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);r.css({left:(this.mask.width()-r.width())/2,top:(this.mask.height()-r.height())/2})}n(window).bind("resize.wijlightbox-overlay",n.proxy(this,"resize")),window.setTimeout(function(){var e;this.mask&&(e=n.wijmo.wijlightbox.overlay,n(document).bind(e.events,function(t){if(n(t.target).zIndex()<e.zIndex)return!1}))},1)}}),n.extend(n.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1e3,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".wijlightbox-overlay"}).join(" "),close:function(){n(document).unbind(".wijlightbox-overlay"),n(window).unbind(".wijlightbox-overlay"),this.mask.remove(),this.mask=undefined},height:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height():e):n(document).height()},width:function(){var e,t;return n.browser.msie&&parseInt(n.browser.version)<7?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width():e):n(document).width()},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(e.lightbox||(e.lightbox={}));var t=e.lightbox})(wijmo||(wijmo={}));;
var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijtooltip",i="@wijtp@",s="wijmo-wijtooltip",o=s+"-arrow-",u=parseFloat,a=window,f=document,l=Math,c=l.max,h={},p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t._tooltips=new Array,t.prototype._setOption=function(t,r){var i=this,s="_set_"+t,o=i.options[t];if(t==="controlwidth"){i._setSize("width",r);return}if(t==="controlheight"){i._setSize("height",r);return}e.prototype._setOption.call(this,t,r),n.isPlainObject(r)&&(i.options[t]=n.extend({},o,r)),i[s]&&i[s](o)},t.prototype._set_cssClass=function(){var e=this,t=e.options,n=e._tooltipCache._$tooltip;if(!n)return;n.hasClass(t.cssClass)||n.addClass(t.cssClass)},t.prototype._set_content=function(e){var t=this;t._isAjaxCallback?(t._callbacked=!0,t.show(),t._callbacked=!1):t._setText()},t.prototype._create=function(){var e=this,n=e.options,r=e.element,s=r&&r.attr("id"),o="",u="",a=n.group||i,f=t._getTooltip(a);f?f.count++:(f=e._createTooltip(),f.count=0,t._tooltips[a]=f),u=n.cssClass?n.cssClass:"",f._$tooltip.hasClass(u)||f._$tooltip.addClass(u),n.position.of=e.element,e._bindLiveEvents(),e._tooltipCache=f,s!==""&&(o=f._$tooltip.attr("aria-describedby"),o=o===undefined?"":o+" ",f._$tooltip.attr("aria-describedby",o+s)),n.controlwidth&&n.controlwidth!==""&&e._setSize("width",n.controlwidth),n.controlheight&&n.controlheight!==""&&e._setSize("height",n.controlheight)},t.prototype.destroy=function(){var n=this,r=n.element,s=n.options.group||i;r.unbind(".tooltip"),r.attr("title",n._content),t._removeTooltip(s),e.prototype.destroy.call(this)},t.prototype.widget=function(){return this._tooltipCache._$tooltip},t.prototype.show=function(){var e=this,t=e._tooltipCache,r=t?t._$tooltip:null,i=e.options;if(!t||i.disabled)return;t._showAnimationTimer&&(clearTimeout(t._showAnimationTimer),t._showAnimationTimer=null),t._showAtAnimationTimer&&(clearTimeout(t._showAtAnimationTimer),t._showAtAnimationTimer=null),t._hideAnimationTimer&&(clearTimeout(t._hideAnimationTimer),t._hideAnimationTimer=null),r.stop(!0,!0);if(i.ajaxCallback&&n.isFunction(i.ajaxCallback)&&!e._callbacked){e._isAjaxCallback=!0,i.ajaxCallback.call(e.element);return}e._setText(),t._showAnimationTimer=setTimeout(function(){h=r.offset();if(i.mouseTrailing){e._setCalloutCss();return}e._setPosition(),e._showTooltip()},e.options.showDelay)},t.prototype.showAt=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n?n._callout:null,s,o=0,u=0,a={},f,l,c,p,d,v;if(!n||!i)return;r.stop(!0,!0),n._showAtAnimationTimer&&(clearTimeout(n._showAtAnimationTimer),n._showAtAnimationTimer=null),n._hideAnimationTimer&&(clearTimeout(n._hideAnimationTimer),n._hideAnimationTimer=null),n._showAtAnimationTimer=setTimeout(function(){var n=r.is(":visible");t._setText(),h=r.offset(),r.offset({left:0,top:0}).show(),s=i.position(),o=s.left,u=s.top,l=t._getBorder(i),c=l.left||l.right,p=l.top||l.bottom,d=r.width(),v=r.height(),f=t._getCalloutShape(),a={rt:{left:e.x-d-c,top:e.y-u},rc:{left:e.x-d-c,top:e.y-v/2},rb:{left:e.x-d-c,top:e.y-u-p},lt:{left:e.x+c,top:e.y-u},lc:{left:e.x+c,top:e.y-v/2},lb:{left:e.x+c,top:e.y-u-p},tl:{left:e.x-o,top:e.y+p},tc:{left:e.x-d/2,top:e.y+p},tr:{left:e.x-o-c,top:e.y+p},bl:{left:e.x-o,top:e.y-v-p},bc:{left:e.x-d/2,top:e.y-v-p},br:{left:e.x-o-c,top:e.y-v-p},cc:{left:e.x-d/2,top:e.y-v/2}}[f],f=t._flipTooltip(a,f,l),t._setUnfilledCallout(f),r.offset(a),n||r.hide(),t._calloutShape=f,t._showTooltip()},t.options.showDelay)},t.prototype.hide=function(){var e=this,t=e._tooltipCache;if(!t)return;t._showAnimationTimer&&(clearTimeout(t._showAnimationTimer),t._showAnimationTimer=null),t._showAtAnimationTimer&&(clearTimeout(t._showAtAnimationTimer),t._showAtAnimationTimer=null),t._hideAnimationTimer&&(clearTimeout(t._hideAnimationTimer),t._hideAnimationTimer=null),t._hideAnimationTimer=setTimeout(n.proxy(e._hideTooltip,e),e.options.hideDelay)},t.prototype._createTooltip=function(){var e=this,t=e.options,r=new TooltipCache,i=n("<div></div>").addClass(t.wijCSS.tooltip).addClass(t.wijCSS.widget).addClass(t.wijCSS.content).addClass(t.wijCSS.cornerAll),s=n("<div></div>").addClass(t.wijCSS.tooltipContainer),o=n("<div></div>").addClass(t.wijCSS.content).addClass(t.wijCSS.tooltipPointer).append(n("<div></div>").addClass(t.wijCSS.tooltipPointerInner)),u=n("<div></div>").addClass(t.wijCSS.tooltipTitle).addClass(t.wijCSS.header).addClass(t.wijCSS.cornerAll),a=n("<a href='#'></a>").addClass(t.wijCSS.tooltipClose).addClass(t.wijCSS.stateDefault).addClass(t.wijCSS.cornerAll);return a.append(n("<span></span>").addClass(t.wijCSS.icon).addClass(t.wijCSS.iconClose)).bind("click",n.proxy(e._onClickCloseBtn,e)),t.closeBehavior!=="sticky"&&a.hide(),t.showCallout||o.hide(),i.append(u).append(a).append(s).append(o).css("position","absolute").attr("role","tooltip").appendTo("body").hide(),r._$tooltip=i,r._container=s,r._callout=o,r._closeBtn=a,r._title=u,r},t.prototype._bindLiveEvents=function(){var e=this,t=e.options,r=e.element;e._content===undefined&&(e._content=r.attr("title"),r.attr("title","")),r.unbind(".tooltip"),t.mouseTrailing&&r.bind("mousemove.tooltip",function(n){if(t.disabled)return;var r=t.position.offset||"",i=r.split(" ");i.length===2?e.showAt({x:n.pageX+parseInt(i[0],10),y:n.pageY+parseInt(i[1],10)}):e.showAt({x:n.pageX,y:n.pageY})});switch(t.triggers){case"hover":r.bind("mouseover.tooltip",n.proxy(e.show,e)).bind("mouseout.tooltip",n.proxy(e._hideIfNeeded,e));break;case"click":r.bind("click.tooltip",n.proxy(e.show,e));break;case"focus":r.bind("focus.tooltip",n.proxy(e.show,e)).bind("blur.tooltip",n.proxy(e._hideIfNeeded,e));break;case"rightClick":r.bind("contextmenu.tooltip",function(t){e.show(),t.preventDefault()})}},t.prototype._hideIfNeeded=function(){var e=this,t=e.options,n=t.closeBehavior;if(n==="sticky"||t.modal||n==="none"||t.disabled)return;e.hide()},t.prototype._flipTooltip=function(e,t,n){var r=this,i=r._tooltipCache,s=i?i._$tooltip:null,o={width:s.width(),height:s.height()},u=r._flipCallout(e,o,t),a=u&&u.flip,f,l;return!i||!u||!a.h&&!a.v?u.calloutShape:(f=s.width(),l=s.height(),a.h==="l"?e.left-=f+n.right*2+1:a.h==="r"?e.left+=f+n.left*2+1:a.v==="t"?e.top-=l+n.bottom*2+1:a.v==="b"&&(e.top+=l+n.top*2+1),u.calloutShape)},t.prototype._flipCallout=function(e,t,r){var i=this,s=i.options,u=i._tooltipCache,f=u._$tooltip,l={h:!1,v:!1},c=n(a),h=(s.position.collision||"flip").split(" ");h.length===1&&(h[1]=h[0]);if(!u||h[0]!=="flip"&&h[1]!=="flip")return{flip:l,calloutShape:null};h[0]==="flip"&&(e.left<0||e.left+t.width>c.width()+c.scrollLeft())&&(l.h=!0),h[0]==="flip"&&(e.top<0||e.top+t.height>c.height()+c.scrollTop())&&(l.v=!0);if(s.showCallout){l.h&&(r.indexOf("l")>-1?(r=r.replace(/l/,"r"),l.h="l"):r.indexOf("r")>-1&&(r=r.replace(/r/,"l"),l.h="r")),l.v&&(r.indexOf("t")>-1?(r=r.replace(/t/,"b"),l.v="t"):r.indexOf("b")>-1&&(r=r.replace(/b/,"t"),l.v="b"));if(l.h||l.v)i._removeCalloutCss(),f.addClass(o+r)}return{flip:l,calloutShape:r}},t.prototype._set_position=function(e){var t=this,n=t.options,r=n.position;n.showCallout&&((e.my!==r.my||e.at!==r.at)&&t._setPosition(),t._setCalloutOffset(!0)),t._setText()},t.prototype._set_showCallout=function(){var e=this,t=e._tooltipCache,n=t?t._callout:null;if(!t||!n)return;e.options.showCallout?(e._setCalloutCss(),n.show()):n.hide()},t.prototype._set_closeBehavior=function(){var e=this,t=e._tooltipCache,n=t?t._closeBtn:null;n&&n[e.options.closeBehavior==="sticky"?"show":"hide"]()},t.prototype._set_triggers=function(){this._bindLiveEvents()},t.prototype._set_mouseTrailing=function(){this._bindLiveEvents()},t.prototype._getCalloutShape=function(){var e=this,t=e.options.position,r=function(e){return n.makeArray(n.map(e,function(e){return e.substr(0,1)}))},i=r(t.my.split(" ")),s=r(t.at.split(" ")),o=[];return i.length===2&&(o=i),i[0]===s[0]?(i[1]==="t"&&s[1]==="b"||i[1]==="b"&&s[1]==="t")&&o.reverse():s[0]==="c"&&o.reverse(),o[0]==="c"&&o.reverse(),o.join("")},t.prototype._setCalloutCss=function(){var e=this,t=e.options,r=e._tooltipCache,i=r?r._$tooltip:null,s="",u="",a=n.support.isTouchEnabled;if(!t.showCallout&&!a)return;return e._removeCalloutCss(),u=e._getCalloutShape(),s=o+u,i&&i.addClass(s),u},t.prototype._removeCalloutCss=function(){var e=this._tooltipCache,t;e&&(t=e._$tooltip,n.each(["tl","tc","tr","bl","bc","br","rt","rc","rb","lt","lc","lb","cc"],function(e,n){var r=o+n;if(t.hasClass(r))return t.removeClass(r),!1}))},t.prototype._getBorder=function(e){var t={};return n.each(["top","right","left","bottom"],function(n,r){t[r]=u(e.css("border-"+r+"-width"))}),t},t.prototype._setPosition=function(){var e=this,t=e.options,r=t.position,i=r.my,s=e._tooltipCache,o=s?s._$tooltip:null,a=o.is(":hidden"),f=e._setCalloutCss(),l=f?f.split(""):null,c=[0,0],h=s._callout,p,d,v,m,g,y={width:o.width(),height:o.height()},b,w,E=n.support.isTouchEnabled;a&&o.show(),o.css({left:0,top:0});if(t.showCallout){p=e._getBorder(h),v=u(h.css("left")),d=u(h.css("top")),m=u(h.css("right")),g=u(h.css("bottom"));switch(l[0]){case"l":c[0]=p.right;break;case"r":c[0]=-p.left;break;case"b":c[1]=g;break;case"t":c[1]=-d}switch(l[1]){case"t":c[1]=-d;break;case"b":c[1]=g;break;case"r":c[0]=m;break;case"l":c[0]=-v}}if(E&&E()){switch(l[0]){case"l":c[0]=c[0]+30;break;case"r":c[0]=c[0]-30;break;case"b":c[1]=c[1]-30;break;case"t":c[1]=c[1]+30}switch(l[1]){case"t":c[1]=c[1]+30;break;case"b":c[1]=c[1]-30;break;case"r":c[0]=c[0]-30;break;case"l":c[0]=c[0]+30}}r.my.indexOf(" ")>-1?i=r.my.split(" ")[0]+"+"+c[0]+" "+r.my.split(" ")[1]+"+"+c[1]:i=r.my+"+"+c[0]+" "+r.my+"+"+c[1],o.position({my:i,at:r.at,of:r.of,collision:"none none"}),b=e._flipCallout(o.offset(),y,f),w=b.flip;if(w.h||w.v)o.css({left:0,top:0}),o.position({my:i,at:r.at,of:r.of,collision:r.collision});t.showCallout&&e._setUnfilledCallout(f),e._calloutShape=f,a&&o.hide()},t.prototype._setCalloutOffset=function(e){var t=this,r=t.options,i=t._tooltipCache,s=i?i._$tooltip:null,o=i&&i._callout,u=t._calloutShape,a=!1,f=r.position.offset,l="",c=[],h=r.calloutAnimation;if(!o)return;if(!f||f.length===0)return;o.stop(!0,!0),n.each(["tr","tc","tl","bl","bc","br"],function(e,t){if(u===t)return a=!0,!1}),f&&(c=f.split(" "),c.length===2?l=a?c[0]:c[1]:c.length===1&&(l=c[0])),c&&c.length===2&&c[0]==="none"&&c[1]==="none"?o.css("left","").css("top",""):l==="none"?o.css(a?"left":"top",""):l!==""&&(e&&!e.disabled?a?o.animate({left:l},h.duration,h.easing):o.animate({top:l},h.duration,h.easing):o.css(a?"left":"top",l))},t.prototype._setUnfilledCallout=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n&&n._callout,s=i&&i.children(),o=e.split(""),u=r?r.css("background-color"):"";if(!s)return;s.css({"border-left-color":"","border-top-color":"","border-bottom-color":"","border-right-color":""});if(!t.options.calloutFilled)switch(o[0]){case"l":s.css("border-right-color",u);break;case"t":s.css("border-bottom-color",u);break;case"r":s.css("border-left-color",u);break;case"b":s.css("border-top-color",u)}},t.prototype._showTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o,u,a;if(!i)return;if(e._trigger("showing",null,e)===!1){s.is(":visible")&&s.hide();return}e._showModalLayer(),s.css("z-index",99999),n.fn.wijshow?(u={show:!0,context:s},o=n.extend({},r.animation,r.showAnimation),s.is(":visible")&&(a=s.offset(),s.offset(h),n.extend(u,{pos:a}),o.animated="tooltipSlide"),s.wijshow(o,t.animations,u,null,function(){e._trigger("shown")})):(s.show(),e._trigger("shown")),e._setCalloutOffset(!1)},t.prototype._hideTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o=n.extend({},r.animation,r.hideAnimation),u;if(!i)return;if(e._trigger("hiding",null,e)===!1)return;e._hideModalLayer(),n.fn.wijhide?(u={show:!1,context:s},s.wijhide(o,t.animations,u,null,function(){e._trigger("hidden"),s.css("z-index","")})):(s.hide(),e._trigger("hidden"),s.css("z-index",""))},t.prototype._getContent=function(e){var t={data:""},r;return n.isFunction(e)?(r=e.call(this.element,t),t.data!==""?t.data:r):window[e]&&n.isFunction(window[e])?(r=window[e].call(this.element,t),t.data!==""?t.data:r):e},t.prototype._setText=function(){var e=this,t=e.options,n=e._tooltipCache,r="",i="",s=n?n._title:null;if(!n)return;r=e._getContent(t.content),r=r===""?e._content:r,n._container.html(r),i=e._getContent(t.title),i!==""?s.html(i).show():s.hide()},t.prototype._showModalLayer=function(){var e=this,t=e.options,r=null;e.options.modal&&(r=n("<div>").addClass(t.wijCSS.overlay).css("z-index",99e3).width(e._getDocSize("Width")).height(e._getDocSize("Height")).appendTo("body"),n(window).bind("resize.wijtooltip",function(){r.width(e._getDocSize("Width")).height(e._getDocSize("Height"))}),e._tooltipCache._modalLayer=r)},t.prototype._hideModalLayer=function(){var e=this,t=e._tooltipCache._modalLayer;t&&(t.css("z-index","").remove(),n(window).unbind("resize.wijtooltip"))},t.prototype._getDocSize=function(e){var t,r,i="documentElement",s="body";return n.browser.msie&&parseFloat(n.browser.version)<9?(t=c(f[i]["scroll"+e],f[s]["scroll"+e]),r=c(f[i]["offset"+e],f[s]["offset"+e]),t<r?n(a)[e.toLowerCase()]()+"px":t+"px"):n(f)[e.toLowerCase()]()+"px"},t.prototype._setSize=function(e,t){var n=this,r=n._tooltipCache,i=r?r._$tooltip:null;i&&i.css(e,t)},t.prototype._onClickCloseBtn=function(e){this.hide(),e.preventDefault()},t.animations={fade:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate(e.show?{opacity:"show"}:{opacity:"hide"},e)},tooltipSlide:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate({left:e.pos.left,top:e.pos.top},e)}},t._getTooltip=function(n){return t._tooltips[n]},t._removeTooltip=function(n){var r=t._tooltips[n],i=r?r._$tooltip:null;r&&(r.count--,r.count<=0&&(i.remove(),t._tooltips[n]=null))},t}(e.wijmoWidget);t.wijtooltip=p;var d=function(){function e(){this.initSelector=":jqmData(role='wijtooltip')",this.wijCSS={tooltip:"wijmo-wijtooltip",tooltipContainer:"wijmo-wijtooltip-container",tooltipPointer:"wijmo-wijtooltip-pointer",tooltipPointerInner:"wijmo-wijtooltip-pointer-inner",tooltipTitle:"wijmo-wijtooltip-title",tooltipClose:"wijmo-wijtooltip-close"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a"},this.content="",this.title="",this.closeBehavior="auto",this.mouseTrailing=!1,this.triggers="hover",this.position={my:"left bottom",at:"right top",offset:null},this.showCallout=!0,this.animation={animated:"fade",duration:500,easing:null},this.showAnimation={},this.hideAnimation={},this.showDelay=150,this.hideDelay=150,this.calloutAnimation={duration:1e3,disabled:!1,easing:null},this.calloutFilled=!1,this.modal=!1,this.group=null,this.ajaxCallback=null,this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.cssClass="",this.controlwidth=null,this.controlheight=null}return e}();p.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new d),n.wijmo.registerWidget(r,p.prototype)})(e.tooltip||(e.tooltip={}));var t=e.tooltip})(wijmo||(wijmo={}));var TooltipCache=function(){function e(){}return e}();;
define("jquery.migrate");define("jquery.cookie");define("jquery.globalize");define("jquery.globalize.cultures");define("jquery.mousewheel");define("jquery-form");define("jquery-ui.core");define("jquery-ui.widget");define("jquery-ui.position");define("jquery-ui.mouse");define("jquery-ui.draggable");define("jquery-ui.droppable");define("jquery-ui.resizable");define("jquery-ui.sortable");define("jquery-ui.dialog");define("jquery-ui.button");define("jquery-ui.datepicker");define("jquery-ui.effects.core");define("jquery-ui.effects.blind");define("jquery-ui.effects.slide");define("jquery-ui.effects.scale");define("jquery-ui.effects.transfer");define("jquery-ui.effects.fade");define("jquery-ui.datepicker.i18n");define("wijmo.widget");define("wijmo.data");define("wijmo.data.wijdatasource");define("wijmo.wijtextselection");define("wijmo.wijutil");define("wijmo.wijinputcore");define("wijmo.wijinputdate");define("wijmo.wijinputmask");define("wijmo.wijinputnumber");define("wijmo.wijlist");define("wijmo.wijpopup");define("wijmo.wijcalendar");define("wijmo.wijtabs");define("wijmo.wijdatasource");define("wijmo.wijsplitter");define("wijmo.wijsuperpanel");define("wijmo.wijmenu");define("wijmo.wijexpander");define("wijmo.wijaccordion");define("wijmo.wijdialog");define("wijmo.wijpager");define("wijmo.wijgrid");define("wijmo.wijlightbox");define("wijmo.wijtooltip");
